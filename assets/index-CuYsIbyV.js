var zBe=Object.defineProperty;var cX=t=>{throw TypeError(t)};var QBe=(t,e,r)=>e in t?zBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var k=(t,e,r)=>QBe(t,typeof e!="symbol"?e+"":e,r),fD=(t,e,r)=>e.has(t)||cX("Cannot "+r);var w=(t,e,r)=>(fD(t,e,"read from private field"),r?r.call(t):e.get(t)),qe=(t,e,r)=>e.has(t)?cX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),be=(t,e,r,n)=>(fD(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),fe=(t,e,r)=>(fD(t,e,"access private method"),r);var vn=(t,e,r,n)=>({set _(i){be(t,e,i,r)},get _(){return w(t,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pl(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var L1e={exports:{}},WN={},j1e={exports:{}},pr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI=Symbol.for("react.element"),WBe=Symbol.for("react.portal"),KBe=Symbol.for("react.fragment"),XBe=Symbol.for("react.strict_mode"),JBe=Symbol.for("react.profiler"),YBe=Symbol.for("react.provider"),$Be=Symbol.for("react.context"),ZBe=Symbol.for("react.forward_ref"),e5e=Symbol.for("react.suspense"),t5e=Symbol.for("react.memo"),r5e=Symbol.for("react.lazy"),lX=Symbol.iterator;function n5e(t){return t===null||typeof t!="object"?null:(t=lX&&t[lX]||t["@@iterator"],typeof t=="function"?t:null)}var B1e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q1e=Object.assign,U1e={};function Xp(t,e,r){this.props=t,this.context=e,this.refs=U1e,this.updater=r||B1e}Xp.prototype.isReactComponent={};Xp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V1e(){}V1e.prototype=Xp.prototype;function rH(t,e,r){this.props=t,this.context=e,this.refs=U1e,this.updater=r||B1e}var nH=rH.prototype=new V1e;nH.constructor=rH;q1e(nH,Xp.prototype);nH.isPureReactComponent=!0;var dX=Array.isArray,G1e=Object.prototype.hasOwnProperty,iH={current:null},H1e={key:!0,ref:!0,__self:!0,__source:!0};function k1e(t,e,r){var n,i={},a=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)G1e.call(e,n)&&!H1e.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:VI,type:t,key:a,ref:s,props:i,_owner:iH.current}}function i5e(t,e){return{$$typeof:VI,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aH(t){return typeof t=="object"&&t!==null&&t.$$typeof===VI}function a5e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var fX=/\/+/g;function hD(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a5e(""+t.key):e.toString(36)}function QP(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case VI:case WBe:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+hD(s,0):n,dX(i)?(r="",t!=null&&(r=t.replace(fX,"$&/")+"/"),QP(i,e,r,"",function(u){return u})):i!=null&&(aH(i)&&(i=i5e(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(fX,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",dX(t))for(var o=0;o<t.length;o++){a=t[o];var c=n+hD(a,o);s+=QP(a,e,r,c,i)}else if(c=n5e(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=n+hD(a,o++),s+=QP(a,e,r,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function O2(t,e,r){if(t==null)return t;var n=[],i=0;return QP(t,n,"","",function(a){return e.call(r,a,i++)}),n}function s5e(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wi={current:null},WP={transition:null},o5e={ReactCurrentDispatcher:Wi,ReactCurrentBatchConfig:WP,ReactCurrentOwner:iH};function z1e(){throw Error("act(...) is not supported in production builds of React.")}pr.Children={map:O2,forEach:function(t,e,r){O2(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return O2(t,function(){e++}),e},toArray:function(t){return O2(t,function(e){return e})||[]},only:function(t){if(!aH(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pr.Component=Xp;pr.Fragment=KBe;pr.Profiler=JBe;pr.PureComponent=rH;pr.StrictMode=XBe;pr.Suspense=e5e;pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o5e;pr.act=z1e;pr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=q1e({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=iH.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)G1e.call(e,c)&&!H1e.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:VI,type:t.type,key:i,ref:a,props:n,_owner:s}};pr.createContext=function(t){return t={$$typeof:$Be,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YBe,_context:t},t.Consumer=t};pr.createElement=k1e;pr.createFactory=function(t){var e=k1e.bind(null,t);return e.type=t,e};pr.createRef=function(){return{current:null}};pr.forwardRef=function(t){return{$$typeof:ZBe,render:t}};pr.isValidElement=aH;pr.lazy=function(t){return{$$typeof:r5e,_payload:{_status:-1,_result:t},_init:s5e}};pr.memo=function(t,e){return{$$typeof:t5e,type:t,compare:e===void 0?null:e}};pr.startTransition=function(t){var e=WP.transition;WP.transition={};try{t()}finally{WP.transition=e}};pr.unstable_act=z1e;pr.useCallback=function(t,e){return Wi.current.useCallback(t,e)};pr.useContext=function(t){return Wi.current.useContext(t)};pr.useDebugValue=function(){};pr.useDeferredValue=function(t){return Wi.current.useDeferredValue(t)};pr.useEffect=function(t,e){return Wi.current.useEffect(t,e)};pr.useId=function(){return Wi.current.useId()};pr.useImperativeHandle=function(t,e,r){return Wi.current.useImperativeHandle(t,e,r)};pr.useInsertionEffect=function(t,e){return Wi.current.useInsertionEffect(t,e)};pr.useLayoutEffect=function(t,e){return Wi.current.useLayoutEffect(t,e)};pr.useMemo=function(t,e){return Wi.current.useMemo(t,e)};pr.useReducer=function(t,e,r){return Wi.current.useReducer(t,e,r)};pr.useRef=function(t){return Wi.current.useRef(t)};pr.useState=function(t){return Wi.current.useState(t)};pr.useSyncExternalStore=function(t,e,r){return Wi.current.useSyncExternalStore(t,e,r)};pr.useTransition=function(){return Wi.current.useTransition()};pr.version="18.3.1";j1e.exports=pr;var yt=j1e.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u5e=yt,c5e=Symbol.for("react.element"),l5e=Symbol.for("react.fragment"),d5e=Object.prototype.hasOwnProperty,f5e=u5e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h5e={key:!0,ref:!0,__self:!0,__source:!0};function Q1e(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)d5e.call(e,n)&&!h5e.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:c5e,type:t,key:a,ref:s,props:i,_owner:f5e.current}}WN.Fragment=l5e;WN.jsx=Q1e;WN.jsxs=Q1e;L1e.exports=WN;var Ve=L1e.exports,W1e={exports:{}},Ua={},K1e={exports:{}},X1e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,se){var pe=$.length;$.push(se);e:for(;0<pe;){var we=pe-1>>>1,Ce=$[we];if(0<i(Ce,se))$[we]=se,$[pe]=Ce,pe=we;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var se=$[0],pe=$.pop();if(pe!==se){$[0]=pe;e:for(var we=0,Ce=$.length,Le=Ce>>>1;we<Le;){var Ie=2*(we+1)-1,Oe=$[Ie],ye=Ie+1,Me=$[ye];if(0>i(Oe,pe))ye<Ce&&0>i(Me,Oe)?($[we]=Me,$[ye]=pe,we=ye):($[we]=Oe,$[Ie]=pe,we=Ie);else if(ye<Ce&&0>i(Me,pe))$[we]=Me,$[ye]=pe,we=ye;else break e}}return se}function i($,se){var pe=$.sortIndex-se.sortIndex;return pe!==0?pe:$.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],l=1,d=null,f=3,h=!1,p=!1,_=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var se=r(u);se!==null;){if(se.callback===null)n(u);else if(se.startTime<=$)n(u),se.sortIndex=se.expirationTime,e(c,se);else break;se=r(u)}}function A($){if(_=!1,v($),!p)if(r(c)!==null)p=!0,G(T);else{var se=r(u);se!==null&&K(A,se.startTime-$)}}function T($,se){p=!1,_&&(_=!1,m(j),j=-1),h=!0;var pe=f;try{for(v(se),d=r(c);d!==null&&(!(d.expirationTime>se)||$&&!R());){var we=d.callback;if(typeof we=="function"){d.callback=null,f=d.priorityLevel;var Ce=we(d.expirationTime<=se);se=t.unstable_now(),typeof Ce=="function"?d.callback=Ce:d===r(c)&&n(c),v(se)}else n(c);d=r(c)}if(d!==null)var Le=!0;else{var Ie=r(u);Ie!==null&&K(A,Ie.startTime-se),Le=!1}return Le}finally{d=null,f=pe,h=!1}}var S=!1,P=null,j=-1,F=5,N=-1;function R(){return!(t.unstable_now()-N<F)}function C(){if(P!==null){var $=t.unstable_now();N=$;var se=!0;try{se=P(!0,$)}finally{se?M():(S=!1,P=null)}}else S=!1}var M;if(typeof y=="function")M=function(){y(C)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,B=U.port2;U.port1.onmessage=C,M=function(){B.postMessage(null)}}else M=function(){g(C,0)};function G($){P=$,S||(S=!0,M())}function K($,se){j=g(function(){$(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,G(T))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var se=3;break;default:se=f}var pe=f;f=se;try{return $()}finally{f=pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,se){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var pe=f;f=$;try{return se()}finally{f=pe}},t.unstable_scheduleCallback=function($,se,pe){var we=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?we+pe:we):pe=we,$){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=pe+Ce,$={id:l++,callback:se,priorityLevel:$,startTime:pe,expirationTime:Ce,sortIndex:-1},pe>we?($.sortIndex=pe,e(u,$),r(c)===null&&$===r(u)&&(_?(m(j),j=-1):_=!0,K(A,pe-we))):($.sortIndex=Ce,e(c,$),p||h||(p=!0,G(T))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var se=f;return function(){var pe=f;f=se;try{return $.apply(this,arguments)}finally{f=pe}}}})(X1e);K1e.exports=X1e;var p5e=K1e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _5e=yt,La=p5e;function vt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J1e=new Set,tI={};function Af(t,e){gp(t,e),gp(t+"Capture",e)}function gp(t,e){for(tI[t]=e,t=0;t<e.length;t++)J1e.add(e[t])}var Cu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QU=Object.prototype.hasOwnProperty,m5e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hX={},pX={};function g5e(t){return QU.call(pX,t)?!0:QU.call(hX,t)?!1:m5e.test(t)?pX[t]=!0:(hX[t]=!0,!1)}function y5e(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b5e(t,e,r,n){if(e===null||typeof e>"u"||y5e(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ki(t,e,r,n,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ci[t]=new Ki(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ci[e]=new Ki(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ci[t]=new Ki(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ci[t]=new Ki(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ci[t]=new Ki(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ci[t]=new Ki(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ci[t]=new Ki(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ci[t]=new Ki(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ci[t]=new Ki(t,5,!1,t.toLowerCase(),null,!1,!1)});var sH=/[\-:]([a-z])/g;function oH(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sH,oH);ci[e]=new Ki(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sH,oH);ci[e]=new Ki(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sH,oH);ci[e]=new Ki(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ci[t]=new Ki(t,1,!1,t.toLowerCase(),null,!1,!1)});ci.xlinkHref=new Ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ci[t]=new Ki(t,1,!1,t.toLowerCase(),null,!0,!0)});function uH(t,e,r,n){var i=ci.hasOwnProperty(e)?ci[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b5e(e,r,i,n)&&(r=null),n||i===null?g5e(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Wu=_5e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R2=Symbol.for("react.element"),Gh=Symbol.for("react.portal"),Hh=Symbol.for("react.fragment"),cH=Symbol.for("react.strict_mode"),WU=Symbol.for("react.profiler"),Y1e=Symbol.for("react.provider"),$1e=Symbol.for("react.context"),lH=Symbol.for("react.forward_ref"),KU=Symbol.for("react.suspense"),XU=Symbol.for("react.suspense_list"),dH=Symbol.for("react.memo"),Wc=Symbol.for("react.lazy"),Z1e=Symbol.for("react.offscreen"),_X=Symbol.iterator;function K0(t){return t===null||typeof t!="object"?null:(t=_X&&t[_X]||t["@@iterator"],typeof t=="function"?t:null)}var yn=Object.assign,pD;function eE(t){if(pD===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);pD=e&&e[1]||""}return`
`+pD+t}var _D=!1;function mD(t,e){if(!t||_D)return"";_D=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=o);break}}}finally{_D=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?eE(t):""}function v5e(t){switch(t.tag){case 5:return eE(t.type);case 16:return eE("Lazy");case 13:return eE("Suspense");case 19:return eE("SuspenseList");case 0:case 2:case 15:return t=mD(t.type,!1),t;case 11:return t=mD(t.type.render,!1),t;case 1:return t=mD(t.type,!0),t;default:return""}}function JU(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hh:return"Fragment";case Gh:return"Portal";case WU:return"Profiler";case cH:return"StrictMode";case KU:return"Suspense";case XU:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $1e:return(t.displayName||"Context")+".Consumer";case Y1e:return(t._context.displayName||"Context")+".Provider";case lH:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dH:return e=t.displayName||null,e!==null?e:JU(t.type)||"Memo";case Wc:e=t._payload,t=t._init;try{return JU(t(e))}catch{}}return null}function A5e(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return JU(e);case 8:return e===cH?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Al(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eTe(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T5e(t){var e=eTe(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function P2(t){t._valueTracker||(t._valueTracker=T5e(t))}function tTe(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=eTe(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Z3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function YU(t,e){var r=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function mX(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Al(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rTe(t,e){e=e.checked,e!=null&&uH(t,"checked",e,!1)}function $U(t,e){rTe(t,e);var r=Al(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ZU(t,e.type,r):e.hasOwnProperty("defaultValue")&&ZU(t,e.type,Al(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gX(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ZU(t,e,r){(e!=="number"||Z3(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var tE=Array.isArray;function np(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Al(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function e7(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(vt(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yX(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(vt(92));if(tE(r)){if(1<r.length)throw Error(vt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Al(r)}}function nTe(t,e){var r=Al(e.value),n=Al(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function bX(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iTe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t7(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iTe(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var N2,aTe=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(N2=N2||document.createElement("div"),N2.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=N2.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rI(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var jE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w5e=["Webkit","ms","Moz","O"];Object.keys(jE).forEach(function(t){w5e.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jE[e]=jE[t]})});function sTe(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||jE.hasOwnProperty(t)&&jE[t]?(""+e).trim():e+"px"}function oTe(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=sTe(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var S5e=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r7(t,e){if(e){if(S5e[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(vt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(vt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(vt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(vt(62))}}function n7(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i7=null;function fH(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var a7=null,ip=null,ap=null;function vX(t){if(t=kI(t)){if(typeof a7!="function")throw Error(vt(280));var e=t.stateNode;e&&(e=$N(e),a7(t.stateNode,t.type,e))}}function uTe(t){ip?ap?ap.push(t):ap=[t]:ip=t}function cTe(){if(ip){var t=ip,e=ap;if(ap=ip=null,vX(t),e)for(t=0;t<e.length;t++)vX(e[t])}}function lTe(t,e){return t(e)}function dTe(){}var gD=!1;function fTe(t,e,r){if(gD)return t(e,r);gD=!0;try{return lTe(t,e,r)}finally{gD=!1,(ip!==null||ap!==null)&&(dTe(),cTe())}}function nI(t,e){var r=t.stateNode;if(r===null)return null;var n=$N(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(vt(231,e,typeof r));return r}var s7=!1;if(Cu)try{var X0={};Object.defineProperty(X0,"passive",{get:function(){s7=!0}}),window.addEventListener("test",X0,X0),window.removeEventListener("test",X0,X0)}catch{s7=!1}function x5e(t,e,r,n,i,a,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(l){this.onError(l)}}var BE=!1,eN=null,tN=!1,o7=null,E5e={onError:function(t){BE=!0,eN=t}};function I5e(t,e,r,n,i,a,s,o,c){BE=!1,eN=null,x5e.apply(E5e,arguments)}function O5e(t,e,r,n,i,a,s,o,c){if(I5e.apply(this,arguments),BE){if(BE){var u=eN;BE=!1,eN=null}else throw Error(vt(198));tN||(tN=!0,o7=u)}}function Tf(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function hTe(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function AX(t){if(Tf(t)!==t)throw Error(vt(188))}function R5e(t){var e=t.alternate;if(!e){if(e=Tf(t),e===null)throw Error(vt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return AX(i),t;if(a===n)return AX(i),e;a=a.sibling}throw Error(vt(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(vt(189))}}if(r.alternate!==n)throw Error(vt(190))}if(r.tag!==3)throw Error(vt(188));return r.stateNode.current===r?t:e}function pTe(t){return t=R5e(t),t!==null?_Te(t):null}function _Te(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_Te(t);if(e!==null)return e;t=t.sibling}return null}var mTe=La.unstable_scheduleCallback,TX=La.unstable_cancelCallback,P5e=La.unstable_shouldYield,N5e=La.unstable_requestPaint,Sn=La.unstable_now,F5e=La.unstable_getCurrentPriorityLevel,hH=La.unstable_ImmediatePriority,gTe=La.unstable_UserBlockingPriority,rN=La.unstable_NormalPriority,M5e=La.unstable_LowPriority,yTe=La.unstable_IdlePriority,KN=null,No=null;function D5e(t){if(No&&typeof No.onCommitFiberRoot=="function")try{No.onCommitFiberRoot(KN,t,void 0,(t.current.flags&128)===128)}catch{}}var Hs=Math.clz32?Math.clz32:j5e,C5e=Math.log,L5e=Math.LN2;function j5e(t){return t>>>=0,t===0?32:31-(C5e(t)/L5e|0)|0}var F2=64,M2=4194304;function rE(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nN(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=rE(o):(a&=s,a!==0&&(n=rE(a)))}else s=r&~i,s!==0?n=rE(s):a!==0&&(n=rE(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Hs(e),i=1<<r,n|=t[r],e&=~i;return n}function B5e(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q5e(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-Hs(a),o=1<<s,c=i[s];c===-1?(!(o&r)||o&n)&&(i[s]=B5e(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function u7(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bTe(){var t=F2;return F2<<=1,!(F2&4194240)&&(F2=64),t}function yD(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function GI(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hs(e),t[e]=r}function U5e(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Hs(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function pH(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Hs(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Nr=0;function vTe(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ATe,_H,TTe,wTe,STe,c7=!1,D2=[],fl=null,hl=null,pl=null,iI=new Map,aI=new Map,el=[],V5e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wX(t,e){switch(t){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":iI.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aI.delete(e.pointerId)}}function J0(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=kI(e),e!==null&&_H(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function G5e(t,e,r,n,i){switch(e){case"focusin":return fl=J0(fl,t,e,r,n,i),!0;case"dragenter":return hl=J0(hl,t,e,r,n,i),!0;case"mouseover":return pl=J0(pl,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return iI.set(a,J0(iI.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,aI.set(a,J0(aI.get(a)||null,t,e,r,n,i)),!0}return!1}function xTe(t){var e=Hd(t.target);if(e!==null){var r=Tf(e);if(r!==null){if(e=r.tag,e===13){if(e=hTe(r),e!==null){t.blockedOn=e,STe(t.priority,function(){TTe(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function KP(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=l7(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);i7=n,r.target.dispatchEvent(n),i7=null}else return e=kI(r),e!==null&&_H(e),t.blockedOn=r,!1;e.shift()}return!0}function SX(t,e,r){KP(t)&&r.delete(e)}function H5e(){c7=!1,fl!==null&&KP(fl)&&(fl=null),hl!==null&&KP(hl)&&(hl=null),pl!==null&&KP(pl)&&(pl=null),iI.forEach(SX),aI.forEach(SX)}function Y0(t,e){t.blockedOn===e&&(t.blockedOn=null,c7||(c7=!0,La.unstable_scheduleCallback(La.unstable_NormalPriority,H5e)))}function sI(t){function e(i){return Y0(i,t)}if(0<D2.length){Y0(D2[0],t);for(var r=1;r<D2.length;r++){var n=D2[r];n.blockedOn===t&&(n.blockedOn=null)}}for(fl!==null&&Y0(fl,t),hl!==null&&Y0(hl,t),pl!==null&&Y0(pl,t),iI.forEach(e),aI.forEach(e),r=0;r<el.length;r++)n=el[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<el.length&&(r=el[0],r.blockedOn===null);)xTe(r),r.blockedOn===null&&el.shift()}var sp=Wu.ReactCurrentBatchConfig,iN=!0;function k5e(t,e,r,n){var i=Nr,a=sp.transition;sp.transition=null;try{Nr=1,mH(t,e,r,n)}finally{Nr=i,sp.transition=a}}function z5e(t,e,r,n){var i=Nr,a=sp.transition;sp.transition=null;try{Nr=4,mH(t,e,r,n)}finally{Nr=i,sp.transition=a}}function mH(t,e,r,n){if(iN){var i=l7(t,e,r,n);if(i===null)OD(t,e,n,aN,r),wX(t,n);else if(G5e(i,t,e,r,n))n.stopPropagation();else if(wX(t,n),e&4&&-1<V5e.indexOf(t)){for(;i!==null;){var a=kI(i);if(a!==null&&ATe(a),a=l7(t,e,r,n),a===null&&OD(t,e,n,aN,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else OD(t,e,n,null,r)}}var aN=null;function l7(t,e,r,n){if(aN=null,t=fH(n),t=Hd(t),t!==null)if(e=Tf(t),e===null)t=null;else if(r=e.tag,r===13){if(t=hTe(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return aN=t,null}function ETe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F5e()){case hH:return 1;case gTe:return 4;case rN:case M5e:return 16;case yTe:return 536870912;default:return 16}default:return 16}}var nl=null,gH=null,XP=null;function ITe(){if(XP)return XP;var t,e=gH,r=e.length,n,i="value"in nl?nl.value:nl.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[a-n];n++);return XP=i.slice(t,1<n?1-n:void 0)}function JP(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function C2(){return!0}function xX(){return!1}function Va(t){function e(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?C2:xX,this.isPropagationStopped=xX,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=C2)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=C2)},persist:function(){},isPersistent:C2}),e}var Jp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yH=Va(Jp),HI=yn({},Jp,{view:0,detail:0}),Q5e=Va(HI),bD,vD,$0,XN=yn({},HI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bH,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$0&&($0&&t.type==="mousemove"?(bD=t.screenX-$0.screenX,vD=t.screenY-$0.screenY):vD=bD=0,$0=t),bD)},movementY:function(t){return"movementY"in t?t.movementY:vD}}),EX=Va(XN),W5e=yn({},XN,{dataTransfer:0}),K5e=Va(W5e),X5e=yn({},HI,{relatedTarget:0}),AD=Va(X5e),J5e=yn({},Jp,{animationName:0,elapsedTime:0,pseudoElement:0}),Y5e=Va(J5e),$5e=yn({},Jp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z5e=Va($5e),eqe=yn({},Jp,{data:0}),IX=Va(eqe),tqe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rqe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nqe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iqe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nqe[t])?!!e[t]:!1}function bH(){return iqe}var aqe=yn({},HI,{key:function(t){if(t.key){var e=tqe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=JP(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rqe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bH,charCode:function(t){return t.type==="keypress"?JP(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?JP(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sqe=Va(aqe),oqe=yn({},XN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OX=Va(oqe),uqe=yn({},HI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bH}),cqe=Va(uqe),lqe=yn({},Jp,{propertyName:0,elapsedTime:0,pseudoElement:0}),dqe=Va(lqe),fqe=yn({},XN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hqe=Va(fqe),pqe=[9,13,27,32],vH=Cu&&"CompositionEvent"in window,qE=null;Cu&&"documentMode"in document&&(qE=document.documentMode);var _qe=Cu&&"TextEvent"in window&&!qE,OTe=Cu&&(!vH||qE&&8<qE&&11>=qE),RX=" ",PX=!1;function RTe(t,e){switch(t){case"keyup":return pqe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PTe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kh=!1;function mqe(t,e){switch(t){case"compositionend":return PTe(e);case"keypress":return e.which!==32?null:(PX=!0,RX);case"textInput":return t=e.data,t===RX&&PX?null:t;default:return null}}function gqe(t,e){if(kh)return t==="compositionend"||!vH&&RTe(t,e)?(t=ITe(),XP=gH=nl=null,kh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OTe&&e.locale!=="ko"?null:e.data;default:return null}}var yqe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NX(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yqe[t.type]:e==="textarea"}function NTe(t,e,r,n){uTe(n),e=sN(e,"onChange"),0<e.length&&(r=new yH("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var UE=null,oI=null;function bqe(t){GTe(t,0)}function JN(t){var e=Wh(t);if(tTe(e))return t}function vqe(t,e){if(t==="change")return e}var FTe=!1;if(Cu){var TD;if(Cu){var wD="oninput"in document;if(!wD){var FX=document.createElement("div");FX.setAttribute("oninput","return;"),wD=typeof FX.oninput=="function"}TD=wD}else TD=!1;FTe=TD&&(!document.documentMode||9<document.documentMode)}function MX(){UE&&(UE.detachEvent("onpropertychange",MTe),oI=UE=null)}function MTe(t){if(t.propertyName==="value"&&JN(oI)){var e=[];NTe(e,oI,t,fH(t)),fTe(bqe,e)}}function Aqe(t,e,r){t==="focusin"?(MX(),UE=e,oI=r,UE.attachEvent("onpropertychange",MTe)):t==="focusout"&&MX()}function Tqe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return JN(oI)}function wqe(t,e){if(t==="click")return JN(e)}function Sqe(t,e){if(t==="input"||t==="change")return JN(e)}function xqe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qs=typeof Object.is=="function"?Object.is:xqe;function uI(t,e){if(Qs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!QU.call(e,i)||!Qs(t[i],e[i]))return!1}return!0}function DX(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function CX(t,e){var r=DX(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=DX(r)}}function DTe(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DTe(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function CTe(){for(var t=window,e=Z3();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Z3(t.document)}return e}function AH(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Eqe(t){var e=CTe(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&DTe(r.ownerDocument.documentElement,r)){if(n!==null&&AH(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=CX(r,a);var s=CX(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Iqe=Cu&&"documentMode"in document&&11>=document.documentMode,zh=null,d7=null,VE=null,f7=!1;function LX(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;f7||zh==null||zh!==Z3(n)||(n=zh,"selectionStart"in n&&AH(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),VE&&uI(VE,n)||(VE=n,n=sN(d7,"onSelect"),0<n.length&&(e=new yH("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=zh)))}function L2(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Qh={animationend:L2("Animation","AnimationEnd"),animationiteration:L2("Animation","AnimationIteration"),animationstart:L2("Animation","AnimationStart"),transitionend:L2("Transition","TransitionEnd")},SD={},LTe={};Cu&&(LTe=document.createElement("div").style,"AnimationEvent"in window||(delete Qh.animationend.animation,delete Qh.animationiteration.animation,delete Qh.animationstart.animation),"TransitionEvent"in window||delete Qh.transitionend.transition);function YN(t){if(SD[t])return SD[t];if(!Qh[t])return t;var e=Qh[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in LTe)return SD[t]=e[r];return t}var jTe=YN("animationend"),BTe=YN("animationiteration"),qTe=YN("animationstart"),UTe=YN("transitionend"),VTe=new Map,jX="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(t,e){VTe.set(t,e),Af(e,[t])}for(var xD=0;xD<jX.length;xD++){var ED=jX[xD],Oqe=ED.toLowerCase(),Rqe=ED[0].toUpperCase()+ED.slice(1);Nl(Oqe,"on"+Rqe)}Nl(jTe,"onAnimationEnd");Nl(BTe,"onAnimationIteration");Nl(qTe,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(UTe,"onTransitionEnd");gp("onMouseEnter",["mouseout","mouseover"]);gp("onMouseLeave",["mouseout","mouseover"]);gp("onPointerEnter",["pointerout","pointerover"]);gp("onPointerLeave",["pointerout","pointerover"]);Af("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Af("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Af("onBeforeInput",["compositionend","keypress","textInput","paste"]);Af("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Af("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Af("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pqe=new Set("cancel close invalid load scroll toggle".split(" ").concat(nE));function BX(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,O5e(n,e,void 0,t),t.currentTarget=null}function GTe(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;BX(i,o,u),a=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;BX(i,o,u),a=c}}}if(tN)throw t=o7,tN=!1,o7=null,t}function Xr(t,e){var r=e[g7];r===void 0&&(r=e[g7]=new Set);var n=t+"__bubble";r.has(n)||(HTe(e,t,2,!1),r.add(n))}function ID(t,e,r){var n=0;e&&(n|=4),HTe(r,t,n,e)}var j2="_reactListening"+Math.random().toString(36).slice(2);function cI(t){if(!t[j2]){t[j2]=!0,J1e.forEach(function(r){r!=="selectionchange"&&(Pqe.has(r)||ID(r,!1,t),ID(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[j2]||(e[j2]=!0,ID("selectionchange",!1,e))}}function HTe(t,e,r,n){switch(ETe(e)){case 1:var i=k5e;break;case 4:i=z5e;break;default:i=mH}r=i.bind(null,e,r,t),i=void 0,!s7||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function OD(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Hd(o),s===null)return;if(c=s.tag,c===5||c===6){n=a=s;continue e}o=o.parentNode}}n=n.return}fTe(function(){var u=a,l=fH(r),d=[];e:{var f=VTe.get(t);if(f!==void 0){var h=yH,p=t;switch(t){case"keypress":if(JP(r)===0)break e;case"keydown":case"keyup":h=sqe;break;case"focusin":p="focus",h=AD;break;case"focusout":p="blur",h=AD;break;case"beforeblur":case"afterblur":h=AD;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=EX;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=K5e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=cqe;break;case jTe:case BTe:case qTe:h=Y5e;break;case UTe:h=dqe;break;case"scroll":h=Q5e;break;case"wheel":h=hqe;break;case"copy":case"cut":case"paste":h=Z5e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=OX}var _=(e&4)!==0,g=!_&&t==="scroll",m=_?f!==null?f+"Capture":null:f;_=[];for(var y=u,v;y!==null;){v=y;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=nI(y,m),A!=null&&_.push(lI(y,A,v)))),g)break;y=y.return}0<_.length&&(f=new h(f,p,null,r,l),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&r!==i7&&(p=r.relatedTarget||r.fromElement)&&(Hd(p)||p[Lu]))break e;if((h||f)&&(f=l.window===l?l:(f=l.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=u,p=p?Hd(p):null,p!==null&&(g=Tf(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(_=EX,A="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=OX,A="onPointerLeave",m="onPointerEnter",y="pointer"),g=h==null?f:Wh(h),v=p==null?f:Wh(p),f=new _(A,y+"leave",h,r,l),f.target=g,f.relatedTarget=v,A=null,Hd(l)===u&&(_=new _(m,y+"enter",p,r,l),_.target=v,_.relatedTarget=g,A=_),g=A,h&&p)t:{for(_=h,m=p,y=0,v=_;v;v=Kf(v))y++;for(v=0,A=m;A;A=Kf(A))v++;for(;0<y-v;)_=Kf(_),y--;for(;0<v-y;)m=Kf(m),v--;for(;y--;){if(_===m||m!==null&&_===m.alternate)break t;_=Kf(_),m=Kf(m)}_=null}else _=null;h!==null&&qX(d,f,h,_,!1),p!==null&&g!==null&&qX(d,g,p,_,!0)}}e:{if(f=u?Wh(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var T=vqe;else if(NX(f))if(FTe)T=Sqe;else{T=Tqe;var S=Aqe}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=wqe);if(T&&(T=T(t,u))){NTe(d,T,r,l);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&ZU(f,"number",f.value)}switch(S=u?Wh(u):window,t){case"focusin":(NX(S)||S.contentEditable==="true")&&(zh=S,d7=u,VE=null);break;case"focusout":VE=d7=zh=null;break;case"mousedown":f7=!0;break;case"contextmenu":case"mouseup":case"dragend":f7=!1,LX(d,r,l);break;case"selectionchange":if(Iqe)break;case"keydown":case"keyup":LX(d,r,l)}var P;if(vH)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else kh?RTe(t,r)&&(j="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(OTe&&r.locale!=="ko"&&(kh||j!=="onCompositionStart"?j==="onCompositionEnd"&&kh&&(P=ITe()):(nl=l,gH="value"in nl?nl.value:nl.textContent,kh=!0)),S=sN(u,j),0<S.length&&(j=new IX(j,t,null,r,l),d.push({event:j,listeners:S}),P?j.data=P:(P=PTe(r),P!==null&&(j.data=P)))),(P=_qe?mqe(t,r):gqe(t,r))&&(u=sN(u,"onBeforeInput"),0<u.length&&(l=new IX("onBeforeInput","beforeinput",null,r,l),d.push({event:l,listeners:u}),l.data=P))}GTe(d,e)})}function lI(t,e,r){return{instance:t,listener:e,currentTarget:r}}function sN(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=nI(t,r),a!=null&&n.unshift(lI(t,a,i)),a=nI(t,e),a!=null&&n.push(lI(t,a,i))),t=t.return}return n}function Kf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qX(t,e,r,n,i){for(var a=e._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=nI(r,a),c!=null&&s.unshift(lI(r,c,o))):i||(c=nI(r,a),c!=null&&s.push(lI(r,c,o)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var Nqe=/\r\n?/g,Fqe=/\u0000|\uFFFD/g;function UX(t){return(typeof t=="string"?t:""+t).replace(Nqe,`
`).replace(Fqe,"")}function B2(t,e,r){if(e=UX(e),UX(t)!==e&&r)throw Error(vt(425))}function oN(){}var h7=null,p7=null;function _7(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var m7=typeof setTimeout=="function"?setTimeout:void 0,Mqe=typeof clearTimeout=="function"?clearTimeout:void 0,VX=typeof Promise=="function"?Promise:void 0,Dqe=typeof queueMicrotask=="function"?queueMicrotask:typeof VX<"u"?function(t){return VX.resolve(null).then(t).catch(Cqe)}:m7;function Cqe(t){setTimeout(function(){throw t})}function RD(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),sI(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);sI(e)}function _l(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function GX(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Yp=Math.random().toString(36).slice(2),xo="__reactFiber$"+Yp,dI="__reactProps$"+Yp,Lu="__reactContainer$"+Yp,g7="__reactEvents$"+Yp,Lqe="__reactListeners$"+Yp,jqe="__reactHandles$"+Yp;function Hd(t){var e=t[xo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Lu]||r[xo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=GX(t);t!==null;){if(r=t[xo])return r;t=GX(t)}return e}t=r,r=t.parentNode}return null}function kI(t){return t=t[xo]||t[Lu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(vt(33))}function $N(t){return t[dI]||null}var y7=[],Kh=-1;function Fl(t){return{current:t}}function nn(t){0>Kh||(t.current=y7[Kh],y7[Kh]=null,Kh--)}function Hr(t,e){Kh++,y7[Kh]=t.current,t.current=e}var Tl={},Ii=Fl(Tl),da=Fl(!1),df=Tl;function yp(t,e){var r=t.type.contextTypes;if(!r)return Tl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fa(t){return t=t.childContextTypes,t!=null}function uN(){nn(da),nn(Ii)}function HX(t,e,r){if(Ii.current!==Tl)throw Error(vt(168));Hr(Ii,e),Hr(da,r)}function kTe(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(vt(108,A5e(t)||"Unknown",i));return yn({},r,n)}function cN(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tl,df=Ii.current,Hr(Ii,t),Hr(da,da.current),!0}function kX(t,e,r){var n=t.stateNode;if(!n)throw Error(vt(169));r?(t=kTe(t,e,df),n.__reactInternalMemoizedMergedChildContext=t,nn(da),nn(Ii),Hr(Ii,t)):nn(da),Hr(da,r)}var wu=null,ZN=!1,PD=!1;function zTe(t){wu===null?wu=[t]:wu.push(t)}function Bqe(t){ZN=!0,zTe(t)}function Ml(){if(!PD&&wu!==null){PD=!0;var t=0,e=Nr;try{var r=wu;for(Nr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}wu=null,ZN=!1}catch(i){throw wu!==null&&(wu=wu.slice(t+1)),mTe(hH,Ml),i}finally{Nr=e,PD=!1}}return null}var Xh=[],Jh=0,lN=null,dN=0,as=[],ss=0,ff=null,xu=1,Eu="";function xd(t,e){Xh[Jh++]=dN,Xh[Jh++]=lN,lN=t,dN=e}function QTe(t,e,r){as[ss++]=xu,as[ss++]=Eu,as[ss++]=ff,ff=t;var n=xu;t=Eu;var i=32-Hs(n)-1;n&=~(1<<i),r+=1;var a=32-Hs(e)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,xu=1<<32-Hs(e)+i|r<<i|n,Eu=a+t}else xu=1<<a|r<<i|n,Eu=t}function TH(t){t.return!==null&&(xd(t,1),QTe(t,1,0))}function wH(t){for(;t===lN;)lN=Xh[--Jh],Xh[Jh]=null,dN=Xh[--Jh],Xh[Jh]=null;for(;t===ff;)ff=as[--ss],as[ss]=null,Eu=as[--ss],as[ss]=null,xu=as[--ss],as[ss]=null}var Ca=null,Na=null,cn=!1,qs=null;function WTe(t,e){var r=us(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function zX(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ca=t,Na=_l(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ca=t,Na=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ff!==null?{id:xu,overflow:Eu}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=us(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ca=t,Na=null,!0):!1;default:return!1}}function b7(t){return(t.mode&1)!==0&&(t.flags&128)===0}function v7(t){if(cn){var e=Na;if(e){var r=e;if(!zX(t,e)){if(b7(t))throw Error(vt(418));e=_l(r.nextSibling);var n=Ca;e&&zX(t,e)?WTe(n,r):(t.flags=t.flags&-4097|2,cn=!1,Ca=t)}}else{if(b7(t))throw Error(vt(418));t.flags=t.flags&-4097|2,cn=!1,Ca=t}}}function QX(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ca=t}function q2(t){if(t!==Ca)return!1;if(!cn)return QX(t),cn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_7(t.type,t.memoizedProps)),e&&(e=Na)){if(b7(t))throw KTe(),Error(vt(418));for(;e;)WTe(t,e),e=_l(e.nextSibling)}if(QX(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(vt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Na=_l(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Na=null}}else Na=Ca?_l(t.stateNode.nextSibling):null;return!0}function KTe(){for(var t=Na;t;)t=_l(t.nextSibling)}function bp(){Na=Ca=null,cn=!1}function SH(t){qs===null?qs=[t]:qs.push(t)}var qqe=Wu.ReactCurrentBatchConfig;function Z0(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vt(309));var n=r.stateNode}if(!n)throw Error(vt(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(vt(284));if(!r._owner)throw Error(vt(290,t))}return t}function U2(t,e){throw t=Object.prototype.toString.call(e),Error(vt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WX(t){var e=t._init;return e(t._payload)}function XTe(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function r(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=bl(m,y),m.index=0,m.sibling=null,m}function a(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,y,v,A){return y===null||y.tag!==6?(y=jD(v,m.mode,A),y.return=m,y):(y=i(y,v),y.return=m,y)}function c(m,y,v,A){var T=v.type;return T===Hh?l(m,y,v.props.children,A,v.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wc&&WX(T)===y.type)?(A=i(y,v.props),A.ref=Z0(m,y,v),A.return=m,A):(A=n3(v.type,v.key,v.props,null,m.mode,A),A.ref=Z0(m,y,v),A.return=m,A)}function u(m,y,v,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=BD(v,m.mode,A),y.return=m,y):(y=i(y,v.children||[]),y.return=m,y)}function l(m,y,v,A,T){return y===null||y.tag!==7?(y=of(v,m.mode,A,T),y.return=m,y):(y=i(y,v),y.return=m,y)}function d(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=jD(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case R2:return v=n3(y.type,y.key,y.props,null,m.mode,v),v.ref=Z0(m,null,y),v.return=m,v;case Gh:return y=BD(y,m.mode,v),y.return=m,y;case Wc:var A=y._init;return d(m,A(y._payload),v)}if(tE(y)||K0(y))return y=of(y,m.mode,v,null),y.return=m,y;U2(m,y)}return null}function f(m,y,v,A){var T=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:o(m,y,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case R2:return v.key===T?c(m,y,v,A):null;case Gh:return v.key===T?u(m,y,v,A):null;case Wc:return T=v._init,f(m,y,T(v._payload),A)}if(tE(v)||K0(v))return T!==null?null:l(m,y,v,A,null);U2(m,v)}return null}function h(m,y,v,A,T){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,o(y,m,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case R2:return m=m.get(A.key===null?v:A.key)||null,c(y,m,A,T);case Gh:return m=m.get(A.key===null?v:A.key)||null,u(y,m,A,T);case Wc:var S=A._init;return h(m,y,v,S(A._payload),T)}if(tE(A)||K0(A))return m=m.get(v)||null,l(y,m,A,T,null);U2(y,A)}return null}function p(m,y,v,A){for(var T=null,S=null,P=y,j=y=0,F=null;P!==null&&j<v.length;j++){P.index>j?(F=P,P=null):F=P.sibling;var N=f(m,P,v[j],A);if(N===null){P===null&&(P=F);break}t&&P&&N.alternate===null&&e(m,P),y=a(N,y,j),S===null?T=N:S.sibling=N,S=N,P=F}if(j===v.length)return r(m,P),cn&&xd(m,j),T;if(P===null){for(;j<v.length;j++)P=d(m,v[j],A),P!==null&&(y=a(P,y,j),S===null?T=P:S.sibling=P,S=P);return cn&&xd(m,j),T}for(P=n(m,P);j<v.length;j++)F=h(P,m,j,v[j],A),F!==null&&(t&&F.alternate!==null&&P.delete(F.key===null?j:F.key),y=a(F,y,j),S===null?T=F:S.sibling=F,S=F);return t&&P.forEach(function(R){return e(m,R)}),cn&&xd(m,j),T}function _(m,y,v,A){var T=K0(v);if(typeof T!="function")throw Error(vt(150));if(v=T.call(v),v==null)throw Error(vt(151));for(var S=T=null,P=y,j=y=0,F=null,N=v.next();P!==null&&!N.done;j++,N=v.next()){P.index>j?(F=P,P=null):F=P.sibling;var R=f(m,P,N.value,A);if(R===null){P===null&&(P=F);break}t&&P&&R.alternate===null&&e(m,P),y=a(R,y,j),S===null?T=R:S.sibling=R,S=R,P=F}if(N.done)return r(m,P),cn&&xd(m,j),T;if(P===null){for(;!N.done;j++,N=v.next())N=d(m,N.value,A),N!==null&&(y=a(N,y,j),S===null?T=N:S.sibling=N,S=N);return cn&&xd(m,j),T}for(P=n(m,P);!N.done;j++,N=v.next())N=h(P,m,j,N.value,A),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?j:N.key),y=a(N,y,j),S===null?T=N:S.sibling=N,S=N);return t&&P.forEach(function(C){return e(m,C)}),cn&&xd(m,j),T}function g(m,y,v,A){if(typeof v=="object"&&v!==null&&v.type===Hh&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case R2:e:{for(var T=v.key,S=y;S!==null;){if(S.key===T){if(T=v.type,T===Hh){if(S.tag===7){r(m,S.sibling),y=i(S,v.props.children),y.return=m,m=y;break e}}else if(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wc&&WX(T)===S.type){r(m,S.sibling),y=i(S,v.props),y.ref=Z0(m,S,v),y.return=m,m=y;break e}r(m,S);break}else e(m,S);S=S.sibling}v.type===Hh?(y=of(v.props.children,m.mode,A,v.key),y.return=m,m=y):(A=n3(v.type,v.key,v.props,null,m.mode,A),A.ref=Z0(m,y,v),A.return=m,m=A)}return s(m);case Gh:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(m,y.sibling),y=i(y,v.children||[]),y.return=m,m=y;break e}else{r(m,y);break}else e(m,y);y=y.sibling}y=BD(v,m.mode,A),y.return=m,m=y}return s(m);case Wc:return S=v._init,g(m,y,S(v._payload),A)}if(tE(v))return p(m,y,v,A);if(K0(v))return _(m,y,v,A);U2(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(m,y.sibling),y=i(y,v),y.return=m,m=y):(r(m,y),y=jD(v,m.mode,A),y.return=m,m=y),s(m)):r(m,y)}return g}var vp=XTe(!0),JTe=XTe(!1),fN=Fl(null),hN=null,Yh=null,xH=null;function EH(){xH=Yh=hN=null}function IH(t){var e=fN.current;nn(fN),t._currentValue=e}function A7(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function op(t,e){hN=t,xH=Yh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ca=!0),t.firstContext=null)}function ds(t){var e=t._currentValue;if(xH!==t)if(t={context:t,memoizedValue:e,next:null},Yh===null){if(hN===null)throw Error(vt(308));Yh=t,hN.dependencies={lanes:0,firstContext:t}}else Yh=Yh.next=t;return e}var kd=null;function OH(t){kd===null?kd=[t]:kd.push(t)}function YTe(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,OH(e)):(r.next=i.next,i.next=r),e.interleaved=r,ju(t,n)}function ju(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Kc=!1;function RH(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $Te(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ml(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,wr&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,ju(t,r)}return i=n.interleaved,i===null?(e.next=e,OH(n)):(e.next=i.next,i.next=e),n.interleaved=e,ju(t,r)}function YP(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,pH(t,r)}}function KX(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function pN(t,e,r,n){var i=t.updateQueue;Kc=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?a=u:s.next=u,s=c;var l=t.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==s&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;s=0,l=u=c=null,o=a;do{var f=o.lane,h=o.eventTime;if((n&f)===f){l!==null&&(l=l.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,_=o;switch(f=e,h=r,_.tag){case 1:if(p=_.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=_.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=yn({},d,f);break e;case 2:Kc=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=h,c=d):l=l.next=h,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(l===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);pf|=s,t.lanes=s,t.memoizedState=d}}function XX(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(vt(191,i));i.call(n)}}}var zI={},Fo=Fl(zI),fI=Fl(zI),hI=Fl(zI);function zd(t){if(t===zI)throw Error(vt(174));return t}function PH(t,e){switch(Hr(hI,e),Hr(fI,t),Hr(Fo,zI),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:t7(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=t7(e,t)}nn(Fo),Hr(Fo,e)}function Ap(){nn(Fo),nn(fI),nn(hI)}function ZTe(t){zd(hI.current);var e=zd(Fo.current),r=t7(e,t.type);e!==r&&(Hr(fI,t),Hr(Fo,r))}function NH(t){fI.current===t&&(nn(Fo),nn(fI))}var mn=Fl(0);function _N(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ND=[];function FH(){for(var t=0;t<ND.length;t++)ND[t]._workInProgressVersionPrimary=null;ND.length=0}var $P=Wu.ReactCurrentDispatcher,FD=Wu.ReactCurrentBatchConfig,hf=0,gn=null,Vn=null,Jn=null,mN=!1,GE=!1,pI=0,Uqe=0;function gi(){throw Error(vt(321))}function MH(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Qs(t[r],e[r]))return!1;return!0}function DH(t,e,r,n,i,a){if(hf=a,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$P.current=t===null||t.memoizedState===null?kqe:zqe,t=r(n,i),GE){a=0;do{if(GE=!1,pI=0,25<=a)throw Error(vt(301));a+=1,Jn=Vn=null,e.updateQueue=null,$P.current=Qqe,t=r(n,i)}while(GE)}if($P.current=gN,e=Vn!==null&&Vn.next!==null,hf=0,Jn=Vn=gn=null,mN=!1,e)throw Error(vt(300));return t}function CH(){var t=pI!==0;return pI=0,t}function Ao(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?gn.memoizedState=Jn=t:Jn=Jn.next=t,Jn}function fs(){if(Vn===null){var t=gn.alternate;t=t!==null?t.memoizedState:null}else t=Vn.next;var e=Jn===null?gn.memoizedState:Jn.next;if(e!==null)Jn=e,Vn=t;else{if(t===null)throw Error(vt(310));Vn=t,t={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Jn===null?gn.memoizedState=Jn=t:Jn=Jn.next=t}return Jn}function _I(t,e){return typeof e=="function"?e(t):e}function MD(t){var e=fs(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=Vn,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,c=null,u=a;do{var l=u.lane;if((hf&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,s=n):c=c.next=d,gn.lanes|=l,pf|=l}u=u.next}while(u!==null&&u!==a);c===null?s=n:c.next=o,Qs(n,e.memoizedState)||(ca=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,gn.lanes|=a,pf|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function DD(t){var e=fs(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Qs(a,e.memoizedState)||(ca=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function ewe(){}function twe(t,e){var r=gn,n=fs(),i=e(),a=!Qs(n.memoizedState,i);if(a&&(n.memoizedState=i,ca=!0),n=n.queue,LH(iwe.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Jn!==null&&Jn.memoizedState.tag&1){if(r.flags|=2048,mI(9,nwe.bind(null,r,n,i,e),void 0,null),$n===null)throw Error(vt(349));hf&30||rwe(r,e,i)}return i}function rwe(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function nwe(t,e,r,n){e.value=r,e.getSnapshot=n,awe(e)&&swe(t)}function iwe(t,e,r){return r(function(){awe(e)&&swe(t)})}function awe(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Qs(t,r)}catch{return!0}}function swe(t){var e=ju(t,1);e!==null&&ks(e,t,1,-1)}function JX(t){var e=Ao();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_I,lastRenderedState:t},e.queue=t,t=t.dispatch=Hqe.bind(null,gn,t),[e.memoizedState,t]}function mI(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function owe(){return fs().memoizedState}function ZP(t,e,r,n){var i=Ao();gn.flags|=t,i.memoizedState=mI(1|e,r,void 0,n===void 0?null:n)}function eF(t,e,r,n){var i=fs();n=n===void 0?null:n;var a=void 0;if(Vn!==null){var s=Vn.memoizedState;if(a=s.destroy,n!==null&&MH(n,s.deps)){i.memoizedState=mI(e,r,a,n);return}}gn.flags|=t,i.memoizedState=mI(1|e,r,a,n)}function YX(t,e){return ZP(8390656,8,t,e)}function LH(t,e){return eF(2048,8,t,e)}function uwe(t,e){return eF(4,2,t,e)}function cwe(t,e){return eF(4,4,t,e)}function lwe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dwe(t,e,r){return r=r!=null?r.concat([t]):null,eF(4,4,lwe.bind(null,e,t),r)}function jH(){}function fwe(t,e){var r=fs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&MH(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function hwe(t,e){var r=fs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&MH(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function pwe(t,e,r){return hf&21?(Qs(r,e)||(r=bTe(),gn.lanes|=r,pf|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ca=!0),t.memoizedState=r)}function Vqe(t,e){var r=Nr;Nr=r!==0&&4>r?r:4,t(!0);var n=FD.transition;FD.transition={};try{t(!1),e()}finally{Nr=r,FD.transition=n}}function _we(){return fs().memoizedState}function Gqe(t,e,r){var n=yl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mwe(t))gwe(e,r);else if(r=YTe(t,e,r,n),r!==null){var i=ki();ks(r,t,n,i),ywe(r,e,n)}}function Hqe(t,e,r){var n=yl(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mwe(t))gwe(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,Qs(o,s)){var c=e.interleaved;c===null?(i.next=i,OH(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=YTe(t,e,i,n),r!==null&&(i=ki(),ks(r,t,n,i),ywe(r,e,n))}}function mwe(t){var e=t.alternate;return t===gn||e!==null&&e===gn}function gwe(t,e){GE=mN=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ywe(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,pH(t,r)}}var gN={readContext:ds,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},kqe={readContext:ds,useCallback:function(t,e){return Ao().memoizedState=[t,e===void 0?null:e],t},useContext:ds,useEffect:YX,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ZP(4194308,4,lwe.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ZP(4194308,4,t,e)},useInsertionEffect:function(t,e){return ZP(4,2,t,e)},useMemo:function(t,e){var r=Ao();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ao();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Gqe.bind(null,gn,t),[n.memoizedState,t]},useRef:function(t){var e=Ao();return t={current:t},e.memoizedState=t},useState:JX,useDebugValue:jH,useDeferredValue:function(t){return Ao().memoizedState=t},useTransition:function(){var t=JX(!1),e=t[0];return t=Vqe.bind(null,t[1]),Ao().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=gn,i=Ao();if(cn){if(r===void 0)throw Error(vt(407));r=r()}else{if(r=e(),$n===null)throw Error(vt(349));hf&30||rwe(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,YX(iwe.bind(null,n,a,t),[t]),n.flags|=2048,mI(9,nwe.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Ao(),e=$n.identifierPrefix;if(cn){var r=Eu,n=xu;r=(n&~(1<<32-Hs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=pI++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Uqe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zqe={readContext:ds,useCallback:fwe,useContext:ds,useEffect:LH,useImperativeHandle:dwe,useInsertionEffect:uwe,useLayoutEffect:cwe,useMemo:hwe,useReducer:MD,useRef:owe,useState:function(){return MD(_I)},useDebugValue:jH,useDeferredValue:function(t){var e=fs();return pwe(e,Vn.memoizedState,t)},useTransition:function(){var t=MD(_I)[0],e=fs().memoizedState;return[t,e]},useMutableSource:ewe,useSyncExternalStore:twe,useId:_we,unstable_isNewReconciler:!1},Qqe={readContext:ds,useCallback:fwe,useContext:ds,useEffect:LH,useImperativeHandle:dwe,useInsertionEffect:uwe,useLayoutEffect:cwe,useMemo:hwe,useReducer:DD,useRef:owe,useState:function(){return DD(_I)},useDebugValue:jH,useDeferredValue:function(t){var e=fs();return Vn===null?e.memoizedState=t:pwe(e,Vn.memoizedState,t)},useTransition:function(){var t=DD(_I)[0],e=fs().memoizedState;return[t,e]},useMutableSource:ewe,useSyncExternalStore:twe,useId:_we,unstable_isNewReconciler:!1};function js(t,e){if(t&&t.defaultProps){e=yn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function T7(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:yn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var tF={isMounted:function(t){return(t=t._reactInternals)?Tf(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ki(),i=yl(t),a=Nu(n,i);a.payload=e,r!=null&&(a.callback=r),e=ml(t,a,i),e!==null&&(ks(e,t,i,n),YP(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ki(),i=yl(t),a=Nu(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=ml(t,a,i),e!==null&&(ks(e,t,i,n),YP(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ki(),n=yl(t),i=Nu(r,n);i.tag=2,e!=null&&(i.callback=e),e=ml(t,i,n),e!==null&&(ks(e,t,n,r),YP(e,t,n))}};function $X(t,e,r,n,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!uI(r,n)||!uI(i,a):!0}function bwe(t,e,r){var n=!1,i=Tl,a=e.contextType;return typeof a=="object"&&a!==null?a=ds(a):(i=fa(e)?df:Ii.current,n=e.contextTypes,a=(n=n!=null)?yp(t,i):Tl),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tF,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function ZX(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&tF.enqueueReplaceState(e,e.state,null)}function w7(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},RH(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=ds(a):(a=fa(e)?df:Ii.current,i.context=yp(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(T7(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&tF.enqueueReplaceState(i,i.state,null),pN(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Tp(t,e){try{var r="",n=e;do r+=v5e(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function CD(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function S7(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Wqe=typeof WeakMap=="function"?WeakMap:Map;function vwe(t,e,r){r=Nu(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){bN||(bN=!0,D7=n),S7(t,e)},r}function Awe(t,e,r){r=Nu(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){S7(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){S7(t,e),typeof n!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function eJ(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Wqe;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=o9e.bind(null,t,e,r),e.then(t,t))}function tJ(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rJ(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Nu(-1,1),e.tag=2,ml(r,e,1))),r.lanes|=1),t)}var Kqe=Wu.ReactCurrentOwner,ca=!1;function Vi(t,e,r,n){e.child=t===null?JTe(e,null,r,n):vp(e,t.child,r,n)}function nJ(t,e,r,n,i){r=r.render;var a=e.ref;return op(e,i),n=DH(t,e,r,n,a,i),r=CH(),t!==null&&!ca?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bu(t,e,i)):(cn&&r&&TH(e),e.flags|=1,Vi(t,e,n,i),e.child)}function iJ(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!zH(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Twe(t,e,a,n,i)):(t=n3(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:uI,r(s,n)&&t.ref===e.ref)return Bu(t,e,i)}return e.flags|=1,t=bl(a,n),t.ref=e.ref,t.return=e,e.child=t}function Twe(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(uI(a,n)&&t.ref===e.ref)if(ca=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(ca=!0);else return e.lanes=t.lanes,Bu(t,e,i)}return x7(t,e,r,n,i)}function wwe(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(Zh,Oa),Oa|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Hr(Zh,Oa),Oa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Hr(Zh,Oa),Oa|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Hr(Zh,Oa),Oa|=n;return Vi(t,e,i,r),e.child}function Swe(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function x7(t,e,r,n,i){var a=fa(r)?df:Ii.current;return a=yp(e,a),op(e,i),r=DH(t,e,r,n,a,i),n=CH(),t!==null&&!ca?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bu(t,e,i)):(cn&&n&&TH(e),e.flags|=1,Vi(t,e,r,i),e.child)}function aJ(t,e,r,n,i){if(fa(r)){var a=!0;cN(e)}else a=!1;if(op(e,i),e.stateNode===null)e3(t,e),bwe(e,r,n),w7(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=ds(u):(u=fa(r)?df:Ii.current,u=yp(e,u));var l=r.getDerivedStateFromProps,d=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&ZX(e,s,n,u),Kc=!1;var f=e.memoizedState;s.state=f,pN(e,n,s,i),c=e.memoizedState,o!==n||f!==c||da.current||Kc?(typeof l=="function"&&(T7(e,r,l,n),c=e.memoizedState),(o=Kc||$X(e,r,o,n,f,c,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,$Te(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:js(e.type,o),s.props=u,d=e.pendingProps,f=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=ds(c):(c=fa(r)?df:Ii.current,c=yp(e,c));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==c)&&ZX(e,s,n,c),Kc=!1,f=e.memoizedState,s.state=f,pN(e,n,s,i);var p=e.memoizedState;o!==d||f!==p||da.current||Kc?(typeof h=="function"&&(T7(e,r,h,n),p=e.memoizedState),(u=Kc||$X(e,r,u,n,f,p,c)||!1)?(l||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,p,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,p,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return E7(t,e,r,n,a,i)}function E7(t,e,r,n,i,a){Swe(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&kX(e,r,!1),Bu(t,e,a);n=e.stateNode,Kqe.current=e;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=vp(e,t.child,null,a),e.child=vp(e,null,o,a)):Vi(t,e,o,a),e.memoizedState=n.state,i&&kX(e,r,!0),e.child}function xwe(t){var e=t.stateNode;e.pendingContext?HX(t,e.pendingContext,e.pendingContext!==e.context):e.context&&HX(t,e.context,!1),PH(t,e.containerInfo)}function sJ(t,e,r,n,i){return bp(),SH(i),e.flags|=256,Vi(t,e,r,n),e.child}var I7={dehydrated:null,treeContext:null,retryLane:0};function O7(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ewe(t,e,r){var n=e.pendingProps,i=mn.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Hr(mn,i&1),t===null)return v7(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,a?(n=e.mode,a=e.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=iF(s,n,0,null),t=of(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=O7(r),e.memoizedState=I7,t):BH(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Xqe(t,e,s,n,o,i,r);if(a){a=n.fallback,s=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=bl(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=bl(o,a):(a=of(a,s,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,s=t.child.memoizedState,s=s===null?O7(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~r,e.memoizedState=I7,n}return a=t.child,t=a.sibling,n=bl(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function BH(t,e){return e=iF({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function V2(t,e,r,n){return n!==null&&SH(n),vp(e,t.child,null,r),t=BH(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xqe(t,e,r,n,i,a,s){if(r)return e.flags&256?(e.flags&=-257,n=CD(Error(vt(422))),V2(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=iF({mode:"visible",children:n.children},i,0,null),a=of(a,i,s,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&vp(e,t.child,null,s),e.child.memoizedState=O7(s),e.memoizedState=I7,a);if(!(e.mode&1))return V2(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(vt(419)),n=CD(a,n,void 0),V2(t,e,s,n)}if(o=(s&t.childLanes)!==0,ca||o){if(n=$n,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ju(t,i),ks(n,t,i,-1))}return kH(),n=CD(Error(vt(421))),V2(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=u9e.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Na=_l(i.nextSibling),Ca=e,cn=!0,qs=null,t!==null&&(as[ss++]=xu,as[ss++]=Eu,as[ss++]=ff,xu=t.id,Eu=t.overflow,ff=e),e=BH(e,n.children),e.flags|=4096,e)}function oJ(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),A7(t.return,e,r)}function LD(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Iwe(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Vi(t,e,n.children,r),n=mn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oJ(t,r,e);else if(t.tag===19)oJ(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Hr(mn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&_N(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),LD(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_N(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}LD(e,!0,r,null,a);break;case"together":LD(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function e3(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bu(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),pf|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(vt(153));if(e.child!==null){for(t=e.child,r=bl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=bl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Jqe(t,e,r){switch(e.tag){case 3:xwe(e),bp();break;case 5:ZTe(e);break;case 1:fa(e.type)&&cN(e);break;case 4:PH(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Hr(fN,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Hr(mn,mn.current&1),e.flags|=128,null):r&e.child.childLanes?Ewe(t,e,r):(Hr(mn,mn.current&1),t=Bu(t,e,r),t!==null?t.sibling:null);Hr(mn,mn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Iwe(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hr(mn,mn.current),n)break;return null;case 22:case 23:return e.lanes=0,wwe(t,e,r)}return Bu(t,e,r)}var Owe,R7,Rwe,Pwe;Owe=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};R7=function(){};Rwe=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,zd(Fo.current);var a=null;switch(r){case"input":i=YU(t,i),n=YU(t,n),a=[];break;case"select":i=yn({},i,{value:void 0}),n=yn({},n,{value:void 0}),a=[];break;case"textarea":i=e7(t,i),n=e7(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=oN)}r7(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(tI.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(tI.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Xr("scroll",t),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Pwe=function(t,e,r,n){r!==n&&(e.flags|=4)};function e_(t,e){if(!cn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function yi(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Yqe(t,e,r){var n=e.pendingProps;switch(wH(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(e),null;case 1:return fa(e.type)&&uN(),yi(e),null;case 3:return n=e.stateNode,Ap(),nn(da),nn(Ii),FH(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(q2(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qs!==null&&(j7(qs),qs=null))),R7(t,e),yi(e),null;case 5:NH(e);var i=zd(hI.current);if(r=e.type,t!==null&&e.stateNode!=null)Rwe(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(vt(166));return yi(e),null}if(t=zd(Fo.current),q2(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[xo]=e,n[dI]=a,t=(e.mode&1)!==0,r){case"dialog":Xr("cancel",n),Xr("close",n);break;case"iframe":case"object":case"embed":Xr("load",n);break;case"video":case"audio":for(i=0;i<nE.length;i++)Xr(nE[i],n);break;case"source":Xr("error",n);break;case"img":case"image":case"link":Xr("error",n),Xr("load",n);break;case"details":Xr("toggle",n);break;case"input":mX(n,a),Xr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Xr("invalid",n);break;case"textarea":yX(n,a),Xr("invalid",n)}r7(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&B2(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&B2(n.textContent,o,t),i=["children",""+o]):tI.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Xr("scroll",n)}switch(r){case"input":P2(n),gX(n,a,!0);break;case"textarea":P2(n),bX(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=oN)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iTe(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[xo]=e,t[dI]=n,Owe(t,e,!1,!1),e.stateNode=t;e:{switch(s=n7(r,n),r){case"dialog":Xr("cancel",t),Xr("close",t),i=n;break;case"iframe":case"object":case"embed":Xr("load",t),i=n;break;case"video":case"audio":for(i=0;i<nE.length;i++)Xr(nE[i],t);i=n;break;case"source":Xr("error",t),i=n;break;case"img":case"image":case"link":Xr("error",t),Xr("load",t),i=n;break;case"details":Xr("toggle",t),i=n;break;case"input":mX(t,n),i=YU(t,n),Xr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=yn({},n,{value:void 0}),Xr("invalid",t);break;case"textarea":yX(t,n),i=e7(t,n),Xr("invalid",t);break;default:i=n}r7(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?oTe(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&aTe(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&rI(t,c):typeof c=="number"&&rI(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(tI.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Xr("scroll",t):c!=null&&uH(t,a,c,s))}switch(r){case"input":P2(t),gX(t,n,!1);break;case"textarea":P2(t),bX(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Al(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?np(t,!!n.multiple,a,!1):n.defaultValue!=null&&np(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=oN)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yi(e),null;case 6:if(t&&e.stateNode!=null)Pwe(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(vt(166));if(r=zd(hI.current),zd(Fo.current),q2(e)){if(n=e.stateNode,r=e.memoizedProps,n[xo]=e,(a=n.nodeValue!==r)&&(t=Ca,t!==null))switch(t.tag){case 3:B2(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&B2(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xo]=e,e.stateNode=n}return yi(e),null;case 13:if(nn(mn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cn&&Na!==null&&e.mode&1&&!(e.flags&128))KTe(),bp(),e.flags|=98560,a=!1;else if(a=q2(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(vt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(vt(317));a[xo]=e}else bp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yi(e),a=!1}else qs!==null&&(j7(qs),qs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||mn.current&1?Gn===0&&(Gn=3):kH())),e.updateQueue!==null&&(e.flags|=4),yi(e),null);case 4:return Ap(),R7(t,e),t===null&&cI(e.stateNode.containerInfo),yi(e),null;case 10:return IH(e.type._context),yi(e),null;case 17:return fa(e.type)&&uN(),yi(e),null;case 19:if(nn(mn),a=e.memoizedState,a===null)return yi(e),null;if(n=(e.flags&128)!==0,s=a.rendering,s===null)if(n)e_(a,!1);else{if(Gn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=_N(t),s!==null){for(e.flags|=128,e_(a,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Hr(mn,mn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Sn()>wp&&(e.flags|=128,n=!0,e_(a,!1),e.lanes=4194304)}else{if(!n)if(t=_N(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e_(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!cn)return yi(e),null}else 2*Sn()-a.renderingStartTime>wp&&r!==1073741824&&(e.flags|=128,n=!0,e_(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(r=a.last,r!==null?r.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Sn(),e.sibling=null,r=mn.current,Hr(mn,n?r&1|2:r&1),e):(yi(e),null);case 22:case 23:return HH(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Oa&1073741824&&(yi(e),e.subtreeFlags&6&&(e.flags|=8192)):yi(e),null;case 24:return null;case 25:return null}throw Error(vt(156,e.tag))}function $qe(t,e){switch(wH(e),e.tag){case 1:return fa(e.type)&&uN(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ap(),nn(da),nn(Ii),FH(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NH(e),null;case 13:if(nn(mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(vt(340));bp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nn(mn),null;case 4:return Ap(),null;case 10:return IH(e.type._context),null;case 22:case 23:return HH(),null;case 24:return null;default:return null}}var G2=!1,Si=!1,Zqe=typeof WeakSet=="function"?WeakSet:Set,jt=null;function $h(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){An(t,e,n)}else r.current=null}function P7(t,e,r){try{r()}catch(n){An(t,e,n)}}var uJ=!1;function e9e(t,e){if(h7=iN,t=CTe(),AH(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,l=0,d=t,f=null;t:for(;;){for(var h;d!==r||i!==0&&d.nodeType!==3||(o=s+i),d!==a||n!==0&&d.nodeType!==3||(c=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===r&&++u===i&&(o=s),f===a&&++l===n&&(c=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(p7={focusedElem:t,selectionRange:r},iN=!1,jt=e;jt!==null;)if(e=jt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,jt=t;else for(;jt!==null;){e=jt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var _=p.memoizedProps,g=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:js(e.type,_),g);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(A){An(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,jt=t;break}jt=e.return}return p=uJ,uJ=!1,p}function HE(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&P7(e,r,a)}i=i.next}while(i!==n)}}function rF(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function N7(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Nwe(t){var e=t.alternate;e!==null&&(t.alternate=null,Nwe(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xo],delete e[dI],delete e[g7],delete e[Lqe],delete e[jqe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fwe(t){return t.tag===5||t.tag===3||t.tag===4}function cJ(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fwe(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function F7(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=oN));else if(n!==4&&(t=t.child,t!==null))for(F7(t,e,r),t=t.sibling;t!==null;)F7(t,e,r),t=t.sibling}function M7(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(M7(t,e,r),t=t.sibling;t!==null;)M7(t,e,r),t=t.sibling}var ii=null,Bs=!1;function oc(t,e,r){for(r=r.child;r!==null;)Mwe(t,e,r),r=r.sibling}function Mwe(t,e,r){if(No&&typeof No.onCommitFiberUnmount=="function")try{No.onCommitFiberUnmount(KN,r)}catch{}switch(r.tag){case 5:Si||$h(r,e);case 6:var n=ii,i=Bs;ii=null,oc(t,e,r),ii=n,Bs=i,ii!==null&&(Bs?(t=ii,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ii.removeChild(r.stateNode));break;case 18:ii!==null&&(Bs?(t=ii,r=r.stateNode,t.nodeType===8?RD(t.parentNode,r):t.nodeType===1&&RD(t,r),sI(t)):RD(ii,r.stateNode));break;case 4:n=ii,i=Bs,ii=r.stateNode.containerInfo,Bs=!0,oc(t,e,r),ii=n,Bs=i;break;case 0:case 11:case 14:case 15:if(!Si&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&P7(r,e,s),i=i.next}while(i!==n)}oc(t,e,r);break;case 1:if(!Si&&($h(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){An(r,e,o)}oc(t,e,r);break;case 21:oc(t,e,r);break;case 22:r.mode&1?(Si=(n=Si)||r.memoizedState!==null,oc(t,e,r),Si=n):oc(t,e,r);break;default:oc(t,e,r)}}function lJ(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Zqe),e.forEach(function(n){var i=c9e.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Es(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:ii=o.stateNode,Bs=!1;break e;case 3:ii=o.stateNode.containerInfo,Bs=!0;break e;case 4:ii=o.stateNode.containerInfo,Bs=!0;break e}o=o.return}if(ii===null)throw Error(vt(160));Mwe(a,s,i),ii=null,Bs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){An(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dwe(e,t),e=e.sibling}function Dwe(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Es(e,t),uo(t),n&4){try{HE(3,t,t.return),rF(3,t)}catch(_){An(t,t.return,_)}try{HE(5,t,t.return)}catch(_){An(t,t.return,_)}}break;case 1:Es(e,t),uo(t),n&512&&r!==null&&$h(r,r.return);break;case 5:if(Es(e,t),uo(t),n&512&&r!==null&&$h(r,r.return),t.flags&32){var i=t.stateNode;try{rI(i,"")}catch(_){An(t,t.return,_)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=r!==null?r.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&rTe(i,a),n7(o,s);var u=n7(o,a);for(s=0;s<c.length;s+=2){var l=c[s],d=c[s+1];l==="style"?oTe(i,d):l==="dangerouslySetInnerHTML"?aTe(i,d):l==="children"?rI(i,d):uH(i,l,d,u)}switch(o){case"input":$U(i,a);break;case"textarea":nTe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?np(i,!!a.multiple,h,!1):f!==!!a.multiple&&(a.defaultValue!=null?np(i,!!a.multiple,a.defaultValue,!0):np(i,!!a.multiple,a.multiple?[]:"",!1))}i[dI]=a}catch(_){An(t,t.return,_)}}break;case 6:if(Es(e,t),uo(t),n&4){if(t.stateNode===null)throw Error(vt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(_){An(t,t.return,_)}}break;case 3:if(Es(e,t),uo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{sI(e.containerInfo)}catch(_){An(t,t.return,_)}break;case 4:Es(e,t),uo(t);break;case 13:Es(e,t),uo(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(VH=Sn())),n&4&&lJ(t);break;case 22:if(l=r!==null&&r.memoizedState!==null,t.mode&1?(Si=(u=Si)||l,Es(e,t),Si=u):Es(e,t),uo(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&t.mode&1)for(jt=t,l=t.child;l!==null;){for(d=jt=l;jt!==null;){switch(f=jt,h=f.child,f.tag){case 0:case 11:case 14:case 15:HE(4,f,f.return);break;case 1:$h(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(_){An(n,r,_)}}break;case 5:$h(f,f.return);break;case 22:if(f.memoizedState!==null){fJ(d);continue}}h!==null?(h.return=f,jt=h):fJ(d)}l=l.sibling}e:for(l=null,d=t;;){if(d.tag===5){if(l===null){l=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=sTe("display",s))}catch(_){An(t,t.return,_)}}}else if(d.tag===6){if(l===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){An(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;l===d&&(l=null),d=d.return}l===d&&(l=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Es(e,t),uo(t),n&4&&lJ(t);break;case 21:break;default:Es(e,t),uo(t)}}function uo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Fwe(r)){var n=r;break e}r=r.return}throw Error(vt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(rI(i,""),n.flags&=-33);var a=cJ(t);M7(t,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=cJ(t);F7(t,o,s);break;default:throw Error(vt(161))}}catch(c){An(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function t9e(t,e,r){jt=t,Cwe(t)}function Cwe(t,e,r){for(var n=(t.mode&1)!==0;jt!==null;){var i=jt,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||G2;if(!s){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Si;o=G2;var u=Si;if(G2=s,(Si=c)&&!u)for(jt=i;jt!==null;)s=jt,c=s.child,s.tag===22&&s.memoizedState!==null?hJ(i):c!==null?(c.return=s,jt=c):hJ(i);for(;a!==null;)jt=a,Cwe(a),a=a.sibling;jt=i,G2=o,Si=u}dJ(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,jt=a):dJ(t)}}function dJ(t){for(;jt!==null;){var e=jt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Si||rF(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Si)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:js(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&XX(e,a,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}XX(e,s,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var d=l.dehydrated;d!==null&&sI(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}Si||e.flags&512&&N7(e)}catch(f){An(e,e.return,f)}}if(e===t){jt=null;break}if(r=e.sibling,r!==null){r.return=e.return,jt=r;break}jt=e.return}}function fJ(t){for(;jt!==null;){var e=jt;if(e===t){jt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,jt=r;break}jt=e.return}}function hJ(t){for(;jt!==null;){var e=jt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{rF(4,e)}catch(c){An(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){An(e,i,c)}}var a=e.return;try{N7(e)}catch(c){An(e,a,c)}break;case 5:var s=e.return;try{N7(e)}catch(c){An(e,s,c)}}}catch(c){An(e,e.return,c)}if(e===t){jt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,jt=o;break}jt=e.return}}var r9e=Math.ceil,yN=Wu.ReactCurrentDispatcher,qH=Wu.ReactCurrentOwner,ls=Wu.ReactCurrentBatchConfig,wr=0,$n=null,Ln=null,oi=0,Oa=0,Zh=Fl(0),Gn=0,gI=null,pf=0,nF=0,UH=0,kE=null,oa=null,VH=0,wp=1/0,Au=null,bN=!1,D7=null,gl=null,H2=!1,il=null,vN=0,zE=0,C7=null,t3=-1,r3=0;function ki(){return wr&6?Sn():t3!==-1?t3:t3=Sn()}function yl(t){return t.mode&1?wr&2&&oi!==0?oi&-oi:qqe.transition!==null?(r3===0&&(r3=bTe()),r3):(t=Nr,t!==0||(t=window.event,t=t===void 0?16:ETe(t.type)),t):1}function ks(t,e,r,n){if(50<zE)throw zE=0,C7=null,Error(vt(185));GI(t,r,n),(!(wr&2)||t!==$n)&&(t===$n&&(!(wr&2)&&(nF|=r),Gn===4&&tl(t,oi)),ha(t,n),r===1&&wr===0&&!(e.mode&1)&&(wp=Sn()+500,ZN&&Ml()))}function ha(t,e){var r=t.callbackNode;q5e(t,e);var n=nN(t,t===$n?oi:0);if(n===0)r!==null&&TX(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&TX(r),e===1)t.tag===0?Bqe(pJ.bind(null,t)):zTe(pJ.bind(null,t)),Dqe(function(){!(wr&6)&&Ml()}),r=null;else{switch(vTe(n)){case 1:r=hH;break;case 4:r=gTe;break;case 16:r=rN;break;case 536870912:r=yTe;break;default:r=rN}r=Hwe(r,Lwe.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Lwe(t,e){if(t3=-1,r3=0,wr&6)throw Error(vt(327));var r=t.callbackNode;if(up()&&t.callbackNode!==r)return null;var n=nN(t,t===$n?oi:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=AN(t,n);else{e=n;var i=wr;wr|=2;var a=Bwe();($n!==t||oi!==e)&&(Au=null,wp=Sn()+500,sf(t,e));do try{a9e();break}catch(o){jwe(t,o)}while(!0);EH(),yN.current=a,wr=i,Ln!==null?e=0:($n=null,oi=0,e=Gn)}if(e!==0){if(e===2&&(i=u7(t),i!==0&&(n=i,e=L7(t,i))),e===1)throw r=gI,sf(t,0),tl(t,n),ha(t,Sn()),r;if(e===6)tl(t,n);else{if(i=t.current.alternate,!(n&30)&&!n9e(i)&&(e=AN(t,n),e===2&&(a=u7(t),a!==0&&(n=a,e=L7(t,a))),e===1))throw r=gI,sf(t,0),tl(t,n),ha(t,Sn()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(vt(345));case 2:Ed(t,oa,Au);break;case 3:if(tl(t,n),(n&130023424)===n&&(e=VH+500-Sn(),10<e)){if(nN(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ki(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=m7(Ed.bind(null,t,oa,Au),e);break}Ed(t,oa,Au);break;case 4:if(tl(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-Hs(n);a=1<<s,s=e[s],s>i&&(i=s),n&=~a}if(n=i,n=Sn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*r9e(n/1960))-n,10<n){t.timeoutHandle=m7(Ed.bind(null,t,oa,Au),n);break}Ed(t,oa,Au);break;case 5:Ed(t,oa,Au);break;default:throw Error(vt(329))}}}return ha(t,Sn()),t.callbackNode===r?Lwe.bind(null,t):null}function L7(t,e){var r=kE;return t.current.memoizedState.isDehydrated&&(sf(t,e).flags|=256),t=AN(t,e),t!==2&&(e=oa,oa=r,e!==null&&j7(e)),t}function j7(t){oa===null?oa=t:oa.push.apply(oa,t)}function n9e(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Qs(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tl(t,e){for(e&=~UH,e&=~nF,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Hs(e),n=1<<r;t[r]=-1,e&=~n}}function pJ(t){if(wr&6)throw Error(vt(327));up();var e=nN(t,0);if(!(e&1))return ha(t,Sn()),null;var r=AN(t,e);if(t.tag!==0&&r===2){var n=u7(t);n!==0&&(e=n,r=L7(t,n))}if(r===1)throw r=gI,sf(t,0),tl(t,e),ha(t,Sn()),r;if(r===6)throw Error(vt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ed(t,oa,Au),ha(t,Sn()),null}function GH(t,e){var r=wr;wr|=1;try{return t(e)}finally{wr=r,wr===0&&(wp=Sn()+500,ZN&&Ml())}}function _f(t){il!==null&&il.tag===0&&!(wr&6)&&up();var e=wr;wr|=1;var r=ls.transition,n=Nr;try{if(ls.transition=null,Nr=1,t)return t()}finally{Nr=n,ls.transition=r,wr=e,!(wr&6)&&Ml()}}function HH(){Oa=Zh.current,nn(Zh)}function sf(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Mqe(r)),Ln!==null)for(r=Ln.return;r!==null;){var n=r;switch(wH(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&uN();break;case 3:Ap(),nn(da),nn(Ii),FH();break;case 5:NH(n);break;case 4:Ap();break;case 13:nn(mn);break;case 19:nn(mn);break;case 10:IH(n.type._context);break;case 22:case 23:HH()}r=r.return}if($n=t,Ln=t=bl(t.current,null),oi=Oa=e,Gn=0,gI=null,UH=nF=pf=0,oa=kE=null,kd!==null){for(e=0;e<kd.length;e++)if(r=kd[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}kd=null}return t}function jwe(t,e){do{var r=Ln;try{if(EH(),$P.current=gN,mN){for(var n=gn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mN=!1}if(hf=0,Jn=Vn=gn=null,GE=!1,pI=0,qH.current=null,r===null||r.return===null){Gn=1,gI=e,Ln=null;break}e:{var a=t,s=r.return,o=r,c=e;if(e=oi,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=o,d=l.tag;if(!(l.mode&1)&&(d===0||d===11||d===15)){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=tJ(s);if(h!==null){h.flags&=-257,rJ(h,s,o,a,e),h.mode&1&&eJ(a,u,e),e=h,c=u;var p=e.updateQueue;if(p===null){var _=new Set;_.add(c),e.updateQueue=_}else p.add(c);break e}else{if(!(e&1)){eJ(a,u,e),kH();break e}c=Error(vt(426))}}else if(cn&&o.mode&1){var g=tJ(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),rJ(g,s,o,a,e),SH(Tp(c,o));break e}}a=c=Tp(c,o),Gn!==4&&(Gn=2),kE===null?kE=[a]:kE.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=vwe(a,c,e);KX(a,m);break e;case 1:o=c;var y=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(gl===null||!gl.has(v)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=Awe(a,o,e);KX(a,A);break e}}a=a.return}while(a!==null)}Uwe(r)}catch(T){e=T,Ln===r&&r!==null&&(Ln=r=r.return);continue}break}while(!0)}function Bwe(){var t=yN.current;return yN.current=gN,t===null?gN:t}function kH(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),$n===null||!(pf&268435455)&&!(nF&268435455)||tl($n,oi)}function AN(t,e){var r=wr;wr|=2;var n=Bwe();($n!==t||oi!==e)&&(Au=null,sf(t,e));do try{i9e();break}catch(i){jwe(t,i)}while(!0);if(EH(),wr=r,yN.current=n,Ln!==null)throw Error(vt(261));return $n=null,oi=0,Gn}function i9e(){for(;Ln!==null;)qwe(Ln)}function a9e(){for(;Ln!==null&&!P5e();)qwe(Ln)}function qwe(t){var e=Gwe(t.alternate,t,Oa);t.memoizedProps=t.pendingProps,e===null?Uwe(t):Ln=e,qH.current=null}function Uwe(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=$qe(r,e),r!==null){r.flags&=32767,Ln=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Gn=6,Ln=null;return}}else if(r=Yqe(r,e,Oa),r!==null){Ln=r;return}if(e=e.sibling,e!==null){Ln=e;return}Ln=e=t}while(e!==null);Gn===0&&(Gn=5)}function Ed(t,e,r){var n=Nr,i=ls.transition;try{ls.transition=null,Nr=1,s9e(t,e,r,n)}finally{ls.transition=i,Nr=n}return null}function s9e(t,e,r,n){do up();while(il!==null);if(wr&6)throw Error(vt(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(vt(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(U5e(t,a),t===$n&&(Ln=$n=null,oi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||H2||(H2=!0,Hwe(rN,function(){return up(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ls.transition,ls.transition=null;var s=Nr;Nr=1;var o=wr;wr|=4,qH.current=null,e9e(t,r),Dwe(r,t),Eqe(p7),iN=!!h7,p7=h7=null,t.current=r,t9e(r),N5e(),wr=o,Nr=s,ls.transition=a}else t.current=r;if(H2&&(H2=!1,il=t,vN=i),a=t.pendingLanes,a===0&&(gl=null),D5e(r.stateNode),ha(t,Sn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(bN)throw bN=!1,t=D7,D7=null,t;return vN&1&&t.tag!==0&&up(),a=t.pendingLanes,a&1?t===C7?zE++:(zE=0,C7=t):zE=0,Ml(),null}function up(){if(il!==null){var t=vTe(vN),e=ls.transition,r=Nr;try{if(ls.transition=null,Nr=16>t?16:t,il===null)var n=!1;else{if(t=il,il=null,vN=0,wr&6)throw Error(vt(331));var i=wr;for(wr|=4,jt=t.current;jt!==null;){var a=jt,s=a.child;if(jt.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(jt=u;jt!==null;){var l=jt;switch(l.tag){case 0:case 11:case 15:HE(8,l,a)}var d=l.child;if(d!==null)d.return=l,jt=d;else for(;jt!==null;){l=jt;var f=l.sibling,h=l.return;if(Nwe(l),l===u){jt=null;break}if(f!==null){f.return=h,jt=f;break}jt=h}}}var p=a.alternate;if(p!==null){var _=p.child;if(_!==null){p.child=null;do{var g=_.sibling;_.sibling=null,_=g}while(_!==null)}}jt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,jt=s;else e:for(;jt!==null;){if(a=jt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:HE(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,jt=m;break e}jt=a.return}}var y=t.current;for(jt=y;jt!==null;){s=jt;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,jt=v;else e:for(s=y;jt!==null;){if(o=jt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:rF(9,o)}}catch(T){An(o,o.return,T)}if(o===s){jt=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,jt=A;break e}jt=o.return}}if(wr=i,Ml(),No&&typeof No.onPostCommitFiberRoot=="function")try{No.onPostCommitFiberRoot(KN,t)}catch{}n=!0}return n}finally{Nr=r,ls.transition=e}}return!1}function _J(t,e,r){e=Tp(r,e),e=vwe(t,e,1),t=ml(t,e,1),e=ki(),t!==null&&(GI(t,1,e),ha(t,e))}function An(t,e,r){if(t.tag===3)_J(t,t,r);else for(;e!==null;){if(e.tag===3){_J(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(gl===null||!gl.has(n))){t=Tp(r,t),t=Awe(e,t,1),e=ml(e,t,1),t=ki(),e!==null&&(GI(e,1,t),ha(e,t));break}}e=e.return}}function o9e(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ki(),t.pingedLanes|=t.suspendedLanes&r,$n===t&&(oi&r)===r&&(Gn===4||Gn===3&&(oi&130023424)===oi&&500>Sn()-VH?sf(t,0):UH|=r),ha(t,e)}function Vwe(t,e){e===0&&(t.mode&1?(e=M2,M2<<=1,!(M2&130023424)&&(M2=4194304)):e=1);var r=ki();t=ju(t,e),t!==null&&(GI(t,e,r),ha(t,r))}function u9e(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Vwe(t,r)}function c9e(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(vt(314))}n!==null&&n.delete(e),Vwe(t,r)}var Gwe;Gwe=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||da.current)ca=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ca=!1,Jqe(t,e,r);ca=!!(t.flags&131072)}else ca=!1,cn&&e.flags&1048576&&QTe(e,dN,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;e3(t,e),t=e.pendingProps;var i=yp(e,Ii.current);op(e,r),i=DH(null,e,n,t,i,r);var a=CH();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fa(n)?(a=!0,cN(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,RH(e),i.updater=tF,e.stateNode=i,i._reactInternals=e,w7(e,n,t,r),e=E7(null,e,n,!0,a,r)):(e.tag=0,cn&&a&&TH(e),Vi(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(e3(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=d9e(n),t=js(n,t),i){case 0:e=x7(null,e,n,t,r);break e;case 1:e=aJ(null,e,n,t,r);break e;case 11:e=nJ(null,e,n,t,r);break e;case 14:e=iJ(null,e,n,js(n.type,t),r);break e}throw Error(vt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:js(n,i),x7(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:js(n,i),aJ(t,e,n,i,r);case 3:e:{if(xwe(e),t===null)throw Error(vt(387));n=e.pendingProps,a=e.memoizedState,i=a.element,$Te(t,e),pN(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Tp(Error(vt(423)),e),e=sJ(t,e,n,r,i);break e}else if(n!==i){i=Tp(Error(vt(424)),e),e=sJ(t,e,n,r,i);break e}else for(Na=_l(e.stateNode.containerInfo.firstChild),Ca=e,cn=!0,qs=null,r=JTe(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bp(),n===i){e=Bu(t,e,r);break e}Vi(t,e,n,r)}e=e.child}return e;case 5:return ZTe(e),t===null&&v7(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,_7(n,i)?s=null:a!==null&&_7(n,a)&&(e.flags|=32),Swe(t,e),Vi(t,e,s,r),e.child;case 6:return t===null&&v7(e),null;case 13:return Ewe(t,e,r);case 4:return PH(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vp(e,null,n,r):Vi(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:js(n,i),nJ(t,e,n,i,r);case 7:return Vi(t,e,e.pendingProps,r),e.child;case 8:return Vi(t,e,e.pendingProps.children,r),e.child;case 12:return Vi(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Hr(fN,n._currentValue),n._currentValue=s,a!==null)if(Qs(a.value,s)){if(a.children===i.children&&!da.current){e=Bu(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Nu(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),A7(a.return,r,e),o.lanes|=r;break}c=c.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(vt(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),A7(s,r,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Vi(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,op(e,r),i=ds(i),n=n(i),e.flags|=1,Vi(t,e,n,r),e.child;case 14:return n=e.type,i=js(n,e.pendingProps),i=js(n.type,i),iJ(t,e,n,i,r);case 15:return Twe(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:js(n,i),e3(t,e),e.tag=1,fa(n)?(t=!0,cN(e)):t=!1,op(e,r),bwe(e,n,i),w7(e,n,i,r),E7(null,e,n,!0,t,r);case 19:return Iwe(t,e,r);case 22:return wwe(t,e,r)}throw Error(vt(156,e.tag))};function Hwe(t,e){return mTe(t,e)}function l9e(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(t,e,r,n){return new l9e(t,e,r,n)}function zH(t){return t=t.prototype,!(!t||!t.isReactComponent)}function d9e(t){if(typeof t=="function")return zH(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lH)return 11;if(t===dH)return 14}return 2}function bl(t,e){var r=t.alternate;return r===null?(r=us(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function n3(t,e,r,n,i,a){var s=2;if(n=t,typeof t=="function")zH(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Hh:return of(r.children,i,a,e);case cH:s=8,i|=8;break;case WU:return t=us(12,r,e,i|2),t.elementType=WU,t.lanes=a,t;case KU:return t=us(13,r,e,i),t.elementType=KU,t.lanes=a,t;case XU:return t=us(19,r,e,i),t.elementType=XU,t.lanes=a,t;case Z1e:return iF(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y1e:s=10;break e;case $1e:s=9;break e;case lH:s=11;break e;case dH:s=14;break e;case Wc:s=16,n=null;break e}throw Error(vt(130,t==null?t:typeof t,""))}return e=us(s,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function of(t,e,r,n){return t=us(7,t,n,e),t.lanes=r,t}function iF(t,e,r,n){return t=us(22,t,n,e),t.elementType=Z1e,t.lanes=r,t.stateNode={isHidden:!1},t}function jD(t,e,r){return t=us(6,t,null,e),t.lanes=r,t}function BD(t,e,r){return e=us(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function f9e(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yD(0),this.expirationTimes=yD(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yD(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QH(t,e,r,n,i,a,s,o,c){return t=new f9e(t,e,r,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=us(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},RH(a),t}function h9e(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gh,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function kwe(t){if(!t)return Tl;t=t._reactInternals;e:{if(Tf(t)!==t||t.tag!==1)throw Error(vt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(vt(171))}if(t.tag===1){var r=t.type;if(fa(r))return kTe(t,r,e)}return e}function zwe(t,e,r,n,i,a,s,o,c){return t=QH(r,n,!0,t,i,a,s,o,c),t.context=kwe(null),r=t.current,n=ki(),i=yl(r),a=Nu(n,i),a.callback=e??null,ml(r,a,i),t.current.lanes=i,GI(t,i,n),ha(t,n),t}function aF(t,e,r,n){var i=e.current,a=ki(),s=yl(i);return r=kwe(r),e.context===null?e.context=r:e.pendingContext=r,e=Nu(a,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ml(i,e,s),t!==null&&(ks(t,i,s,a),YP(t,i,s)),s}function TN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mJ(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function WH(t,e){mJ(t,e),(t=t.alternate)&&mJ(t,e)}function p9e(){return null}var Qwe=typeof reportError=="function"?reportError:function(t){console.error(t)};function KH(t){this._internalRoot=t}sF.prototype.render=KH.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(vt(409));aF(t,e,null,null)};sF.prototype.unmount=KH.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_f(function(){aF(null,t,null,null)}),e[Lu]=null}};function sF(t){this._internalRoot=t}sF.prototype.unstable_scheduleHydration=function(t){if(t){var e=wTe();t={blockedOn:null,target:t,priority:e};for(var r=0;r<el.length&&e!==0&&e<el[r].priority;r++);el.splice(r,0,t),r===0&&xTe(t)}};function XH(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function oF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gJ(){}function _9e(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=TN(s);a.call(u)}}var s=zwe(e,n,t,0,null,!1,!1,"",gJ);return t._reactRootContainer=s,t[Lu]=s.current,cI(t.nodeType===8?t.parentNode:t),_f(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=TN(c);o.call(u)}}var c=QH(t,0,!1,null,null,!1,!1,"",gJ);return t._reactRootContainer=c,t[Lu]=c.current,cI(t.nodeType===8?t.parentNode:t),_f(function(){aF(e,c,r,n)}),c}function uF(t,e,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var c=TN(s);o.call(c)}}aF(e,s,t,i)}else s=_9e(r,e,t,i,n);return TN(s)}ATe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=rE(e.pendingLanes);r!==0&&(pH(e,r|1),ha(e,Sn()),!(wr&6)&&(wp=Sn()+500,Ml()))}break;case 13:_f(function(){var n=ju(t,1);if(n!==null){var i=ki();ks(n,t,1,i)}}),WH(t,1)}};_H=function(t){if(t.tag===13){var e=ju(t,134217728);if(e!==null){var r=ki();ks(e,t,134217728,r)}WH(t,134217728)}};TTe=function(t){if(t.tag===13){var e=yl(t),r=ju(t,e);if(r!==null){var n=ki();ks(r,t,e,n)}WH(t,e)}};wTe=function(){return Nr};STe=function(t,e){var r=Nr;try{return Nr=t,e()}finally{Nr=r}};a7=function(t,e,r){switch(e){case"input":if($U(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=$N(n);if(!i)throw Error(vt(90));tTe(n),$U(n,i)}}}break;case"textarea":nTe(t,r);break;case"select":e=r.value,e!=null&&np(t,!!r.multiple,e,!1)}};lTe=GH;dTe=_f;var m9e={usingClientEntryPoint:!1,Events:[kI,Wh,$N,uTe,cTe,GH]},t_={findFiberByHostInstance:Hd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g9e={bundleType:t_.bundleType,version:t_.version,rendererPackageName:t_.rendererPackageName,rendererConfig:t_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pTe(t),t===null?null:t.stateNode},findFiberByHostInstance:t_.findFiberByHostInstance||p9e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var k2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k2.isDisabled&&k2.supportsFiber)try{KN=k2.inject(g9e),No=k2}catch{}}Ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m9e;Ua.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XH(e))throw Error(vt(200));return h9e(t,e,null,r)};Ua.createRoot=function(t,e){if(!XH(t))throw Error(vt(299));var r=!1,n="",i=Qwe;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=QH(t,1,!1,null,null,r,!1,n,i),t[Lu]=e.current,cI(t.nodeType===8?t.parentNode:t),new KH(e)};Ua.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(vt(188)):(t=Object.keys(t).join(","),Error(vt(268,t)));return t=pTe(e),t=t===null?null:t.stateNode,t};Ua.flushSync=function(t){return _f(t)};Ua.hydrate=function(t,e,r){if(!oF(e))throw Error(vt(200));return uF(null,t,e,!0,r)};Ua.hydrateRoot=function(t,e,r){if(!XH(t))throw Error(vt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=Qwe;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=zwe(e,null,t,1,r??null,i,!1,a,s),t[Lu]=e.current,cI(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new sF(e)};Ua.render=function(t,e,r){if(!oF(e))throw Error(vt(200));return uF(null,t,e,!1,r)};Ua.unmountComponentAtNode=function(t){if(!oF(t))throw Error(vt(40));return t._reactRootContainer?(_f(function(){uF(null,null,t,!1,function(){t._reactRootContainer=null,t[Lu]=null})}),!0):!1};Ua.unstable_batchedUpdates=GH;Ua.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!oF(r))throw Error(vt(200));if(t==null||t._reactInternals===void 0)throw Error(vt(38));return uF(t,e,r,!1,n)};Ua.version="18.3.1-next-f1338f8080-20240426";function Wwe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wwe)}catch(t){console.error(t)}}Wwe(),W1e.exports=Ua;var y9e=W1e.exports,Kwe,yJ=y9e;Kwe=yJ.createRoot,yJ.hydrateRoot;const b9e="http://www.w3.org/2001/XMLSchema#string",v9e="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString";var Ni={},cF={};cF.byteLength=w9e;cF.toByteArray=x9e;cF.fromByteArray=O9e;var Eo=[],ns=[],A9e=typeof Uint8Array<"u"?Uint8Array:Array,qD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xf=0,T9e=qD.length;Xf<T9e;++Xf)Eo[Xf]=qD[Xf],ns[qD.charCodeAt(Xf)]=Xf;ns[45]=62;ns[95]=63;function Xwe(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function w9e(t){var e=Xwe(t),r=e[0],n=e[1];return(r+n)*3/4-n}function S9e(t,e,r){return(e+r)*3/4-r}function x9e(t){var e,r=Xwe(t),n=r[0],i=r[1],a=new A9e(S9e(t,n,i)),s=0,o=i>0?n-4:n,c;for(c=0;c<o;c+=4)e=ns[t.charCodeAt(c)]<<18|ns[t.charCodeAt(c+1)]<<12|ns[t.charCodeAt(c+2)]<<6|ns[t.charCodeAt(c+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=ns[t.charCodeAt(c)]<<2|ns[t.charCodeAt(c+1)]>>4,a[s++]=e&255),i===1&&(e=ns[t.charCodeAt(c)]<<10|ns[t.charCodeAt(c+1)]<<4|ns[t.charCodeAt(c+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function E9e(t){return Eo[t>>18&63]+Eo[t>>12&63]+Eo[t>>6&63]+Eo[t&63]}function I9e(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(E9e(n));return i.join("")}function O9e(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(I9e(t,s,s+a>o?o:s+a));return n===1?(e=t[r-1],i.push(Eo[e>>2]+Eo[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Eo[e>>10]+Eo[e>>4&63]+Eo[e<<2&63]+"=")),i.join("")}var JH={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */JH.read=function(t,e,r,n,i){var a,s,o=i*8-n-1,c=(1<<o)-1,u=c>>1,l=-7,d=r?i-1:0,f=r?-1:1,h=t[e+d];for(d+=f,a=h&(1<<-l)-1,h>>=-l,l+=o;l>0;a=a*256+t[e+d],d+=f,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=n;l>0;s=s*256+t[e+d],d+=f,l-=8);if(a===0)a=1-u;else{if(a===c)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-u}return(h?-1:1)*s*Math.pow(2,a-n)};JH.write=function(t,e,r,n,i,a){var s,o,c,u=a*8-i-1,l=(1<<u)-1,d=l>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,p=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=f/c:e+=f*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=l?(o=0,s=l):s+d>=1?(o=(e*c-1)*Math.pow(2,i),s=s+d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[r+h]=o&255,h+=p,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;t[r+h]=s&255,h+=p,s/=256,u-=8);t[r+h-p]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=cF,r=JH,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const ae=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(ae,z),ae.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function s(ae){if(ae>i)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const z=new Uint8Array(ae);return Object.setPrototypeOf(z,o.prototype),z}function o(ae,z,V){if(typeof ae=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(ae)}return c(ae,z,V)}o.poolSize=8192;function c(ae,z,V){if(typeof ae=="string")return f(ae,z);if(ArrayBuffer.isView(ae))return p(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(ze(ae,ArrayBuffer)||ae&&ze(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ze(ae,SharedArrayBuffer)||ae&&ze(ae.buffer,SharedArrayBuffer)))return _(ae,z,V);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=ae.valueOf&&ae.valueOf();if(x!=null&&x!==ae)return o.from(x,z,V);const O=g(ae);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return o.from(ae[Symbol.toPrimitive]("string"),z,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}o.from=function(ae,z,V){return c(ae,z,V)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function u(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function l(ae,z,V){return u(ae),ae<=0?s(ae):z!==void 0?typeof V=="string"?s(ae).fill(z,V):s(ae).fill(z):s(ae)}o.alloc=function(ae,z,V){return l(ae,z,V)};function d(ae){return u(ae),s(ae<0?0:m(ae)|0)}o.allocUnsafe=function(ae){return d(ae)},o.allocUnsafeSlow=function(ae){return d(ae)};function f(ae,z){if((typeof z!="string"||z==="")&&(z="utf8"),!o.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const V=v(ae,z)|0;let x=s(V);const O=x.write(ae,z);return O!==V&&(x=x.slice(0,O)),x}function h(ae){const z=ae.length<0?0:m(ae.length)|0,V=s(z);for(let x=0;x<z;x+=1)V[x]=ae[x]&255;return V}function p(ae){if(ze(ae,Uint8Array)){const z=new Uint8Array(ae);return _(z.buffer,z.byteOffset,z.byteLength)}return h(ae)}function _(ae,z,V){if(z<0||ae.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<z+(V||0))throw new RangeError('"length" is outside of buffer bounds');let x;return z===void 0&&V===void 0?x=new Uint8Array(ae):V===void 0?x=new Uint8Array(ae,z):x=new Uint8Array(ae,z,V),Object.setPrototypeOf(x,o.prototype),x}function g(ae){if(o.isBuffer(ae)){const z=m(ae.length)|0,V=s(z);return V.length===0||ae.copy(V,0,0,z),V}if(ae.length!==void 0)return typeof ae.length!="number"||ve(ae.length)?s(0):h(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return h(ae.data)}function m(ae){if(ae>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ae|0}function y(ae){return+ae!=ae&&(ae=0),o.alloc(+ae)}o.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==o.prototype},o.compare=function(z,V){if(ze(z,Uint8Array)&&(z=o.from(z,z.offset,z.byteLength)),ze(V,Uint8Array)&&(V=o.from(V,V.offset,V.byteLength)),!o.isBuffer(z)||!o.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===V)return 0;let x=z.length,O=V.length;for(let D=0,H=Math.min(x,O);D<H;++D)if(z[D]!==V[D]){x=z[D],O=V[D];break}return x<O?-1:O<x?1:0},o.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(z,V){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return o.alloc(0);let x;if(V===void 0)for(V=0,x=0;x<z.length;++x)V+=z[x].length;const O=o.allocUnsafe(V);let D=0;for(x=0;x<z.length;++x){let H=z[x];if(ze(H,Uint8Array))D+H.length>O.length?(o.isBuffer(H)||(H=o.from(H)),H.copy(O,D)):Uint8Array.prototype.set.call(O,H,D);else if(o.isBuffer(H))H.copy(O,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=H.length}return O};function v(ae,z){if(o.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||ze(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const V=ae.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&V===0)return 0;let O=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return he(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return De(ae).length;default:if(O)return x?-1:he(ae).length;z=(""+z).toLowerCase(),O=!0}}o.byteLength=v;function A(ae,z,V){let x=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,z>>>=0,V<=z))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return se(this,z,V);case"utf8":case"utf-8":return U(this,z,V);case"ascii":return K(this,z,V);case"latin1":case"binary":return $(this,z,V);case"base64":return M(this,z,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,z,V);default:if(x)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),x=!0}}o.prototype._isBuffer=!0;function T(ae,z,V){const x=ae[z];ae[z]=ae[V],ae[V]=x}o.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<z;V+=2)T(this,V,V+1);return this},o.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<z;V+=4)T(this,V,V+3),T(this,V+1,V+2);return this},o.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<z;V+=8)T(this,V,V+7),T(this,V+1,V+6),T(this,V+2,V+5),T(this,V+3,V+4);return this},o.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?U(this,0,z):A.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(z){if(!o.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:o.compare(this,z)===0},o.prototype.inspect=function(){let z="";const V=t.INSPECT_MAX_BYTES;return z=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(z+=" ... "),"<Buffer "+z+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(z,V,x,O,D){if(ze(z,Uint8Array)&&(z=o.from(z,z.offset,z.byteLength)),!o.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(V===void 0&&(V=0),x===void 0&&(x=z?z.length:0),O===void 0&&(O=0),D===void 0&&(D=this.length),V<0||x>z.length||O<0||D>this.length)throw new RangeError("out of range index");if(O>=D&&V>=x)return 0;if(O>=D)return-1;if(V>=x)return 1;if(V>>>=0,x>>>=0,O>>>=0,D>>>=0,this===z)return 0;let H=D-O,Y=x-V;const Q=Math.min(H,Y),ee=this.slice(O,D),ie=z.slice(V,x);for(let Re=0;Re<Q;++Re)if(ee[Re]!==ie[Re]){H=ee[Re],Y=ie[Re];break}return H<Y?-1:Y<H?1:0};function S(ae,z,V,x,O){if(ae.length===0)return-1;if(typeof V=="string"?(x=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,ve(V)&&(V=O?0:ae.length-1),V<0&&(V=ae.length+V),V>=ae.length){if(O)return-1;V=ae.length-1}else if(V<0)if(O)V=0;else return-1;if(typeof z=="string"&&(z=o.from(z,x)),o.isBuffer(z))return z.length===0?-1:P(ae,z,V,x,O);if(typeof z=="number")return z=z&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(ae,z,V):Uint8Array.prototype.lastIndexOf.call(ae,z,V):P(ae,[z],V,x,O);throw new TypeError("val must be string, number or Buffer")}function P(ae,z,V,x,O){let D=1,H=ae.length,Y=z.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(ae.length<2||z.length<2)return-1;D=2,H/=2,Y/=2,V/=2}function Q(ie,Re){return D===1?ie[Re]:ie.readUInt16BE(Re*D)}let ee;if(O){let ie=-1;for(ee=V;ee<H;ee++)if(Q(ae,ee)===Q(z,ie===-1?0:ee-ie)){if(ie===-1&&(ie=ee),ee-ie+1===Y)return ie*D}else ie!==-1&&(ee-=ee-ie),ie=-1}else for(V+Y>H&&(V=H-Y),ee=V;ee>=0;ee--){let ie=!0;for(let Re=0;Re<Y;Re++)if(Q(ae,ee+Re)!==Q(z,Re)){ie=!1;break}if(ie)return ee}return-1}o.prototype.includes=function(z,V,x){return this.indexOf(z,V,x)!==-1},o.prototype.indexOf=function(z,V,x){return S(this,z,V,x,!0)},o.prototype.lastIndexOf=function(z,V,x){return S(this,z,V,x,!1)};function j(ae,z,V,x){V=Number(V)||0;const O=ae.length-V;x?(x=Number(x),x>O&&(x=O)):x=O;const D=z.length;x>D/2&&(x=D/2);let H;for(H=0;H<x;++H){const Y=parseInt(z.substr(H*2,2),16);if(ve(Y))return H;ae[V+H]=Y}return H}function F(ae,z,V,x){return Je(he(z,ae.length-V),ae,V,x)}function N(ae,z,V,x){return Je(ue(z),ae,V,x)}function R(ae,z,V,x){return Je(De(z),ae,V,x)}function C(ae,z,V,x){return Je(Ue(z,ae.length-V),ae,V,x)}o.prototype.write=function(z,V,x,O){if(V===void 0)O="utf8",x=this.length,V=0;else if(x===void 0&&typeof V=="string")O=V,x=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(x)?(x=x>>>0,O===void 0&&(O="utf8")):(O=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-V;if((x===void 0||x>D)&&(x=D),z.length>0&&(x<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let H=!1;for(;;)switch(O){case"hex":return j(this,z,V,x);case"utf8":case"utf-8":return F(this,z,V,x);case"ascii":case"latin1":case"binary":return N(this,z,V,x);case"base64":return R(this,z,V,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,z,V,x);default:if(H)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),H=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(ae,z,V){return z===0&&V===ae.length?e.fromByteArray(ae):e.fromByteArray(ae.slice(z,V))}function U(ae,z,V){V=Math.min(ae.length,V);const x=[];let O=z;for(;O<V;){const D=ae[O];let H=null,Y=D>239?4:D>223?3:D>191?2:1;if(O+Y<=V){let Q,ee,ie,Re;switch(Y){case 1:D<128&&(H=D);break;case 2:Q=ae[O+1],(Q&192)===128&&(Re=(D&31)<<6|Q&63,Re>127&&(H=Re));break;case 3:Q=ae[O+1],ee=ae[O+2],(Q&192)===128&&(ee&192)===128&&(Re=(D&15)<<12|(Q&63)<<6|ee&63,Re>2047&&(Re<55296||Re>57343)&&(H=Re));break;case 4:Q=ae[O+1],ee=ae[O+2],ie=ae[O+3],(Q&192)===128&&(ee&192)===128&&(ie&192)===128&&(Re=(D&15)<<18|(Q&63)<<12|(ee&63)<<6|ie&63,Re>65535&&Re<1114112&&(H=Re))}}H===null?(H=65533,Y=1):H>65535&&(H-=65536,x.push(H>>>10&1023|55296),H=56320|H&1023),x.push(H),O+=Y}return G(x)}const B=4096;function G(ae){const z=ae.length;if(z<=B)return String.fromCharCode.apply(String,ae);let V="",x=0;for(;x<z;)V+=String.fromCharCode.apply(String,ae.slice(x,x+=B));return V}function K(ae,z,V){let x="";V=Math.min(ae.length,V);for(let O=z;O<V;++O)x+=String.fromCharCode(ae[O]&127);return x}function $(ae,z,V){let x="";V=Math.min(ae.length,V);for(let O=z;O<V;++O)x+=String.fromCharCode(ae[O]);return x}function se(ae,z,V){const x=ae.length;(!z||z<0)&&(z=0),(!V||V<0||V>x)&&(V=x);let O="";for(let D=z;D<V;++D)O+=de[ae[D]];return O}function pe(ae,z,V){const x=ae.slice(z,V);let O="";for(let D=0;D<x.length-1;D+=2)O+=String.fromCharCode(x[D]+x[D+1]*256);return O}o.prototype.slice=function(z,V){const x=this.length;z=~~z,V=V===void 0?x:~~V,z<0?(z+=x,z<0&&(z=0)):z>x&&(z=x),V<0?(V+=x,V<0&&(V=0)):V>x&&(V=x),V<z&&(V=z);const O=this.subarray(z,V);return Object.setPrototypeOf(O,o.prototype),O};function we(ae,z,V){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+z>V)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(z,V,x){z=z>>>0,V=V>>>0,x||we(z,V,this.length);let O=this[z],D=1,H=0;for(;++H<V&&(D*=256);)O+=this[z+H]*D;return O},o.prototype.readUintBE=o.prototype.readUIntBE=function(z,V,x){z=z>>>0,V=V>>>0,x||we(z,V,this.length);let O=this[z+--V],D=1;for(;V>0&&(D*=256);)O+=this[z+--V]*D;return O},o.prototype.readUint8=o.prototype.readUInt8=function(z,V){return z=z>>>0,V||we(z,1,this.length),this[z]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(z,V){return z=z>>>0,V||we(z,2,this.length),this[z]|this[z+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(z,V){return z=z>>>0,V||we(z,2,this.length),this[z]<<8|this[z+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(z,V){return z=z>>>0,V||we(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(z,V){return z=z>>>0,V||we(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},o.prototype.readBigUInt64LE=Ge(function(z){z=z>>>0,q(z,"offset");const V=this[z],x=this[z+7];(V===void 0||x===void 0)&&J(z,this.length-8);const O=V+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,D=this[++z]+this[++z]*2**8+this[++z]*2**16+x*2**24;return BigInt(O)+(BigInt(D)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ge(function(z){z=z>>>0,q(z,"offset");const V=this[z],x=this[z+7];(V===void 0||x===void 0)&&J(z,this.length-8);const O=V*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],D=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+x;return(BigInt(O)<<BigInt(32))+BigInt(D)}),o.prototype.readIntLE=function(z,V,x){z=z>>>0,V=V>>>0,x||we(z,V,this.length);let O=this[z],D=1,H=0;for(;++H<V&&(D*=256);)O+=this[z+H]*D;return D*=128,O>=D&&(O-=Math.pow(2,8*V)),O},o.prototype.readIntBE=function(z,V,x){z=z>>>0,V=V>>>0,x||we(z,V,this.length);let O=V,D=1,H=this[z+--O];for(;O>0&&(D*=256);)H+=this[z+--O]*D;return D*=128,H>=D&&(H-=Math.pow(2,8*V)),H},o.prototype.readInt8=function(z,V){return z=z>>>0,V||we(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},o.prototype.readInt16LE=function(z,V){z=z>>>0,V||we(z,2,this.length);const x=this[z]|this[z+1]<<8;return x&32768?x|4294901760:x},o.prototype.readInt16BE=function(z,V){z=z>>>0,V||we(z,2,this.length);const x=this[z+1]|this[z]<<8;return x&32768?x|4294901760:x},o.prototype.readInt32LE=function(z,V){return z=z>>>0,V||we(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},o.prototype.readInt32BE=function(z,V){return z=z>>>0,V||we(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},o.prototype.readBigInt64LE=Ge(function(z){z=z>>>0,q(z,"offset");const V=this[z],x=this[z+7];(V===void 0||x===void 0)&&J(z,this.length-8);const O=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(x<<24);return(BigInt(O)<<BigInt(32))+BigInt(V+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),o.prototype.readBigInt64BE=Ge(function(z){z=z>>>0,q(z,"offset");const V=this[z],x=this[z+7];(V===void 0||x===void 0)&&J(z,this.length-8);const O=(V<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(O)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+x)}),o.prototype.readFloatLE=function(z,V){return z=z>>>0,V||we(z,4,this.length),r.read(this,z,!0,23,4)},o.prototype.readFloatBE=function(z,V){return z=z>>>0,V||we(z,4,this.length),r.read(this,z,!1,23,4)},o.prototype.readDoubleLE=function(z,V){return z=z>>>0,V||we(z,8,this.length),r.read(this,z,!0,52,8)},o.prototype.readDoubleBE=function(z,V){return z=z>>>0,V||we(z,8,this.length),r.read(this,z,!1,52,8)};function Ce(ae,z,V,x,O,D){if(!o.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>O||z<D)throw new RangeError('"value" argument is out of bounds');if(V+x>ae.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(z,V,x,O){if(z=+z,V=V>>>0,x=x>>>0,!O){const Y=Math.pow(2,8*x)-1;Ce(this,z,V,x,Y,0)}let D=1,H=0;for(this[V]=z&255;++H<x&&(D*=256);)this[V+H]=z/D&255;return V+x},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(z,V,x,O){if(z=+z,V=V>>>0,x=x>>>0,!O){const Y=Math.pow(2,8*x)-1;Ce(this,z,V,x,Y,0)}let D=x-1,H=1;for(this[V+D]=z&255;--D>=0&&(H*=256);)this[V+D]=z/H&255;return V+x},o.prototype.writeUint8=o.prototype.writeUInt8=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,1,255,0),this[V]=z&255,V+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,2,65535,0),this[V]=z&255,this[V+1]=z>>>8,V+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,2,65535,0),this[V]=z>>>8,this[V+1]=z&255,V+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,4,4294967295,0),this[V+3]=z>>>24,this[V+2]=z>>>16,this[V+1]=z>>>8,this[V]=z&255,V+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,4,4294967295,0),this[V]=z>>>24,this[V+1]=z>>>16,this[V+2]=z>>>8,this[V+3]=z&255,V+4};function Le(ae,z,V,x,O){Z(z,x,O,ae,V,7);let D=Number(z&BigInt(4294967295));ae[V++]=D,D=D>>8,ae[V++]=D,D=D>>8,ae[V++]=D,D=D>>8,ae[V++]=D;let H=Number(z>>BigInt(32)&BigInt(4294967295));return ae[V++]=H,H=H>>8,ae[V++]=H,H=H>>8,ae[V++]=H,H=H>>8,ae[V++]=H,V}function Ie(ae,z,V,x,O){Z(z,x,O,ae,V,7);let D=Number(z&BigInt(4294967295));ae[V+7]=D,D=D>>8,ae[V+6]=D,D=D>>8,ae[V+5]=D,D=D>>8,ae[V+4]=D;let H=Number(z>>BigInt(32)&BigInt(4294967295));return ae[V+3]=H,H=H>>8,ae[V+2]=H,H=H>>8,ae[V+1]=H,H=H>>8,ae[V]=H,V+8}o.prototype.writeBigUInt64LE=Ge(function(z,V=0){return Le(this,z,V,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ge(function(z,V=0){return Ie(this,z,V,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(z,V,x,O){if(z=+z,V=V>>>0,!O){const Q=Math.pow(2,8*x-1);Ce(this,z,V,x,Q-1,-Q)}let D=0,H=1,Y=0;for(this[V]=z&255;++D<x&&(H*=256);)z<0&&Y===0&&this[V+D-1]!==0&&(Y=1),this[V+D]=(z/H>>0)-Y&255;return V+x},o.prototype.writeIntBE=function(z,V,x,O){if(z=+z,V=V>>>0,!O){const Q=Math.pow(2,8*x-1);Ce(this,z,V,x,Q-1,-Q)}let D=x-1,H=1,Y=0;for(this[V+D]=z&255;--D>=0&&(H*=256);)z<0&&Y===0&&this[V+D+1]!==0&&(Y=1),this[V+D]=(z/H>>0)-Y&255;return V+x},o.prototype.writeInt8=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,1,127,-128),z<0&&(z=255+z+1),this[V]=z&255,V+1},o.prototype.writeInt16LE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,2,32767,-32768),this[V]=z&255,this[V+1]=z>>>8,V+2},o.prototype.writeInt16BE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,2,32767,-32768),this[V]=z>>>8,this[V+1]=z&255,V+2},o.prototype.writeInt32LE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,4,2147483647,-2147483648),this[V]=z&255,this[V+1]=z>>>8,this[V+2]=z>>>16,this[V+3]=z>>>24,V+4},o.prototype.writeInt32BE=function(z,V,x){return z=+z,V=V>>>0,x||Ce(this,z,V,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[V]=z>>>24,this[V+1]=z>>>16,this[V+2]=z>>>8,this[V+3]=z&255,V+4},o.prototype.writeBigInt64LE=Ge(function(z,V=0){return Le(this,z,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ge(function(z,V=0){return Ie(this,z,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Oe(ae,z,V,x,O,D){if(V+x>ae.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function ye(ae,z,V,x,O){return z=+z,V=V>>>0,O||Oe(ae,z,V,4),r.write(ae,z,V,x,23,4),V+4}o.prototype.writeFloatLE=function(z,V,x){return ye(this,z,V,!0,x)},o.prototype.writeFloatBE=function(z,V,x){return ye(this,z,V,!1,x)};function Me(ae,z,V,x,O){return z=+z,V=V>>>0,O||Oe(ae,z,V,8),r.write(ae,z,V,x,52,8),V+8}o.prototype.writeDoubleLE=function(z,V,x){return Me(this,z,V,!0,x)},o.prototype.writeDoubleBE=function(z,V,x){return Me(this,z,V,!1,x)},o.prototype.copy=function(z,V,x,O){if(!o.isBuffer(z))throw new TypeError("argument should be a Buffer");if(x||(x=0),!O&&O!==0&&(O=this.length),V>=z.length&&(V=z.length),V||(V=0),O>0&&O<x&&(O=x),O===x||z.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),z.length-V<O-x&&(O=z.length-V+x);const D=O-x;return this===z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(V,x,O):Uint8Array.prototype.set.call(z,this.subarray(x,O),V),D},o.prototype.fill=function(z,V,x,O){if(typeof z=="string"){if(typeof V=="string"?(O=V,V=0,x=this.length):typeof x=="string"&&(O=x,x=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!o.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(z.length===1){const H=z.charCodeAt(0);(O==="utf8"&&H<128||O==="latin1")&&(z=H)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(V<0||this.length<V||this.length<x)throw new RangeError("Out of range index");if(x<=V)return this;V=V>>>0,x=x===void 0?this.length:x>>>0,z||(z=0);let D;if(typeof z=="number")for(D=V;D<x;++D)this[D]=z;else{const H=o.isBuffer(z)?z:o.from(z,O),Y=H.length;if(Y===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(D=0;D<x-V;++D)this[D+V]=H[D%Y]}return this};const W={};function ft(ae,z,V){W[ae]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}ft("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ft("ERR_INVALID_ARG_TYPE",function(ae,z){return`The "${ae}" argument must be of type number. Received type ${typeof z}`},TypeError),ft("ERR_OUT_OF_RANGE",function(ae,z,V){let x=`The value of "${ae}" is out of range.`,O=V;return Number.isInteger(V)&&Math.abs(V)>2**32?O=le(String(V)):typeof V=="bigint"&&(O=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(O=le(O)),O+="n"),x+=` It must be ${z}. Received ${O}`,x},RangeError);function le(ae){let z="",V=ae.length;const x=ae[0]==="-"?1:0;for(;V>=x+4;V-=3)z=`_${ae.slice(V-3,V)}${z}`;return`${ae.slice(0,V)}${z}`}function me(ae,z,V){q(z,"offset"),(ae[z]===void 0||ae[z+V]===void 0)&&J(z,ae.length-(V+1))}function Z(ae,z,V,x,O,D){if(ae>V||ae<z){const H=typeof z=="bigint"?"n":"";let Y;throw z===0||z===BigInt(0)?Y=`>= 0${H} and < 2${H} ** ${(D+1)*8}${H}`:Y=`>= -(2${H} ** ${(D+1)*8-1}${H}) and < 2 ** ${(D+1)*8-1}${H}`,new W.ERR_OUT_OF_RANGE("value",Y,ae)}me(x,O,D)}function q(ae,z){if(typeof ae!="number")throw new W.ERR_INVALID_ARG_TYPE(z,"number",ae)}function J(ae,z,V){throw Math.floor(ae)!==ae?(q(ae,V),new W.ERR_OUT_OF_RANGE("offset","an integer",ae)):z<0?new W.ERR_BUFFER_OUT_OF_BOUNDS:new W.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${z}`,ae)}const re=/[^+/0-9A-Za-z-_]/g;function _e(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(re,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function he(ae,z){z=z||1/0;let V;const x=ae.length;let O=null;const D=[];for(let H=0;H<x;++H){if(V=ae.charCodeAt(H),V>55295&&V<57344){if(!O){if(V>56319){(z-=3)>-1&&D.push(239,191,189);continue}else if(H+1===x){(z-=3)>-1&&D.push(239,191,189);continue}O=V;continue}if(V<56320){(z-=3)>-1&&D.push(239,191,189),O=V;continue}V=(O-55296<<10|V-56320)+65536}else O&&(z-=3)>-1&&D.push(239,191,189);if(O=null,V<128){if((z-=1)<0)break;D.push(V)}else if(V<2048){if((z-=2)<0)break;D.push(V>>6|192,V&63|128)}else if(V<65536){if((z-=3)<0)break;D.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((z-=4)<0)break;D.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return D}function ue(ae){const z=[];for(let V=0;V<ae.length;++V)z.push(ae.charCodeAt(V)&255);return z}function Ue(ae,z){let V,x,O;const D=[];for(let H=0;H<ae.length&&!((z-=2)<0);++H)V=ae.charCodeAt(H),x=V>>8,O=V%256,D.push(O),D.push(x);return D}function De(ae){return e.toByteArray(_e(ae))}function Je(ae,z,V,x){let O;for(O=0;O<x&&!(O+V>=z.length||O>=ae.length);++O)z[O+V]=ae[O];return O}function ze(ae,z){return ae instanceof z||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===z.name}function ve(ae){return ae!==ae}const de=function(){const ae="0123456789abcdef",z=new Array(256);for(let V=0;V<16;++V){const x=V*16;for(let O=0;O<16;++O)z[x+O]=ae[V]+ae[O]}return z}();function Ge(ae){return typeof BigInt>"u"?it:ae}function it(){throw new Error("BigInt not supported")}})(Ni);const r_="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n_="http://www.w3.org/2001/XMLSchema#",z2="http://www.w3.org/2000/10/swap/",ai={xsd:{decimal:`${n_}decimal`,boolean:`${n_}boolean`,double:`${n_}double`,integer:`${n_}integer`,string:`${n_}string`},rdf:{type:`${r_}type`,nil:`${r_}nil`,first:`${r_}first`,rest:`${r_}rest`,langString:`${r_}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${z2}reify#forSome`,forAll:`${z2}reify#forAll`},log:{implies:`${z2}log#implies`,isImpliedBy:`${z2}log#isImpliedBy`}},{xsd:Q2}=ai,R9e=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,bJ={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},P9e=/[\x00-\x20<>\\"\{\}\|\^\`]/,N9e={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},F9e=/$0^/;let M9e=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in N9e)&&this[r]instanceof RegExp&&(this[r]=F9e)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let o,c;for(;o=this._newline.exec(n);)this.comments&&(c=this._comment.exec(o[0]))&&a("comment",c[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),i=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(c=this._comment.exec(n))&&a("comment",c[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const u=this._line,l=n[0];let d="",f="",h="",p=null,_=0,g=!1;switch(l){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){g=!0;break}}else{this._n3Mode&&(_=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),f===null||P9e.test(f))return s(this);d="IRI"}else n.length>1&&n[1]==="<"?(d="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(_=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",_=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))?(d="langcode",f=p[1]):(p=this._keyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){d=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h=typeof p[1]=="string"?Q2.double:typeof p[2]=="string"?Q2.decimal:Q2.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?d=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=Q2.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(_=1,f="="):(_=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(_=1,d=l);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",_=2):(d=l,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",_=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",f=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const m=_||p[0].length,y=a(d,f,h,u,m);this.previousToken=y,this._previousMarker=d,n=n.substr(m,n.length)}function a(o,c,u,l,d){const f=n?i-n.length:i,h=f+d,p={type:o,value:c,prefix:u,line:l,start:f,end:h};return e(null,p),p}function s(o){e(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(R9e,(i,a,s,o)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return o in bJ?bJ[o]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const s=e.substring(n,i),o=s.split(/\r\n|\r|\n/).length-1,c=i+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(s),matchLength:c}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,s)=>a?i=a:n.push(s),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Ni.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}};const{rdf:D9e,xsd:Dd}=ai;let $p,C9e=0;const mf={namedNode:eSe,blankNode:tSe,variable:nSe,literal:rSe,defaultGraph:q9e,quad:B7,triple:B7,fromTerm:aE,fromQuad:iSe};let Ku=class Jwe{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Jwe?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},Ywe=class extends Ku{get termType(){return"NamedNode"}},i3=class $we extends Ku{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new Ywe(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?Dd.string:D9e.langString}equals(e){return e instanceof $we?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},L9e=class extends Ku{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},j9e=class extends Ku{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},B9e=class extends Ku{constructor(){return super(""),$p||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};$p=new B9e;function iE(t,e,r){if(e=e||mf,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===mf)return new i3(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(iE(t[0],e,!0),iE(t[1],e,!0),iE(t[2],e,!0),t[3]&&iE(t[3],e,!0))}function ep(t,e){if(typeof t=="string")return t;if(t instanceof Ku&&t.termType!=="Quad")return t.id;if(!t)return $p.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Dd.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[ep(t.subject,!0),ep(t.predicate,!0),ep(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(ep(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}let Zwe=class extends Ku{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||$p}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function eSe(t){return new Ywe(t)}function tSe(t){return new L9e(t||`n3-${C9e++}`)}function rSe(t,e){if(typeof e=="string")return new i3(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=Dd.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?Dd.integer:Dd.double:(r=Dd.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===Dd.string?new i3(`"${t}"`):new i3(`"${t}"^^${r}`)}function nSe(t){return new j9e(t)}function q9e(){return $p}function B7(t,e,r,n){return new Zwe(t,e,r,n)}function aE(t){if(t instanceof Ku)return t;switch(t.termType){case"NamedNode":return eSe(t.value);case"BlankNode":return tSe(t.value);case"Variable":return nSe(t.value);case"DefaultGraph":return $p;case"Literal":return rSe(t.value,t.language||t.datatype);case"Quad":return iSe(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function iSe(t){if(t instanceof Zwe)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return B7(aE(t.subject),aE(t.predicate),aE(t.object),aE(t.graph))}let vJ=0,aSe=class{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&sSe(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),o=this._n3Mode=/n3/.test(r),c=a||s;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||o),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=r===""||/star|\*$/.test(r),c&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new M9e({lineMode:c,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){vJ=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const s=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(a+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,s=this._contextStack,o=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),a===null?o.predicate===null?o.subject=n:o.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;r=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":r=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph;const i=this._subject,a=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,a&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const s=this._predicate,o=this._object;this._subject=this._factory.quad(i,s,o,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){const s=this._predicate,o=this._object;a?this._emit(o,s,i,n):this._emit(i,s,o,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._factory.blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=W2}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,s=0,o="/";for(;i<r;){switch(o){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(o=e[++i+1],o){case"/":n+=e.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return n+e.substring(s,i)+e.substr(i+1);case".":if(o=e[++i+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=e.substring(s,i-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),o!=="/")return`${n}/${e.substr(i+1)}`;s=i+1}}}o=e[++i]}return n+e.substring(s)}parse(e,r,n){let i,a,s;if(r&&(r.onQuad||r.onPrefix||r.onComment)?(i=r.onQuad,a=r.onPrefix,s=r.onComment):(i=r,a=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${vJ++}_`,this._prefixCallback=a||W2,this._inversePredicate=!1,this._quantified=Object.create(null),!i){const c=[];let u;if(this._callback=(l,d)=>{l?u=l:d&&c.push(d)},this._lexer.tokenize(e).every(l=>this._readCallback=this._readCallback(l)),u)throw u;return c}let o=(c,u)=>{c!==null?(this._callback(c),this._callback=W2):this._readCallback&&(this._readCallback=this._readCallback(u))};s&&(this._lexer.comments=!0,o=(c,u)=>{c!==null?(this._callback(c),this._callback=W2):this._readCallback&&(u.type==="comment"?s(u.value):this._readCallback=this._readCallback(u))}),this._callback=i,this._lexer.tokenize(e,o)}};function W2(){}function sSe(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(ai.rdf.first),t.RDF_REST=e.namedNode(ai.rdf.rest),t.RDF_NIL=e.namedNode(ai.rdf.nil),t.N3_FORALL=e.namedNode(ai.r.forAll),t.N3_FORSOME=e.namedNode(ai.r.forSome),t.ABBREVIATIONS={a:e.namedNode(ai.rdf.type),"=":e.namedNode(ai.owl.sameAs),">":e.namedNode(ai.log.implies),"<":e.namedNode(ai.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}sSe(aSe.prototype,mf);function q7(t){return!!t&&t.termType==="DefaultGraph"}function a3(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const U9e=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,V9e=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,AJ="./",G9e="../",UD="?",TJ="#";let H9e=class oSe{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!U9e.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!oSe.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",a3(e)],n=[],i=[],a=/[^/?#]*([/?#])/y;let s,o=0,c=0,u=a.lastIndex=e.length;for(;!o&&!c&&(s=a.exec(this.base));)s[1]===TJ?c=a.lastIndex-1:(r.push(a3(s[0]),"(?:"),n.push(")?"),s[1]!==UD?i.push(u=a.lastIndex):(o=u=a.lastIndex,c=this.base.indexOf(TJ,o),this._pathReplacements[o]=UD));for(let l=0;l<i.length;l++)this._pathReplacements[i[l]]=G9e.repeat(i.length-l-1);return this._pathReplacements[i[i.length-1]]=AJ,this._baseLength=c>0?c:this.base.length,r.push(a3(this.base.substring(u,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){const r=this._getBaseMatcher().exec(e);if(!r)return e;const n=r[0].length;if(n===this._baseLength&&n===e.length)return"";const i=this._pathReplacements[n];if(i){const a=e.substring(n);return i!==UD&&!V9e.test(a)?e:i===AJ&&/^[^?#]/.test(a)?a:i+a}return e.substring(n-1)}};const i_=mf.defaultGraph(),{rdf:k9e,xsd:Jf}=ai,wJ=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,SJ=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,z9e={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};let a_=class extends Ku{equals(e){return e===this}},YH=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,s){n+=i,s&&s()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=i_,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new H9e(r.baseIRI)))}get _inDefaultGraph(){return i_.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(i_.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),wJ.test(r)&&(r=r.replace(SJ,xJ));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(wJ.test(r)&&(r=r.replace(SJ,xJ)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Jf.string)return`"${r}"`}else switch(e.datatype.value){case Jf.string:return`"${r}"`;case Jf.boolean:if(r==="true"||r==="false")return r;break;case Jf.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Jf.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Jf.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===k9e.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${q7(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,i_,i):this._writeQuad(e,r,n,i||i_,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];i=a3(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new a_("[]");case 1:if(i=n[0],!(i.object instanceof a_))return new a_(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let o=0;o<a;o++)i=n[o],i.predicate.equals(e)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(o?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new a_(`${s}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new a_(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function xJ(t){let e=z9e[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var uSe={exports:{}},VD={exports:{}};let Q9e=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};var bn={AggregateError:Q9e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array},cSe={exports:{}},lSe={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){const i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}};const{format:W9e,inspect:wN}=lSe,{AggregateError:K9e}=bn,X9e=globalThis.AggregateError||K9e,J9e=Symbol("kIsNodeError"),Y9e=["string","function","number","object","Function","Object","boolean","bigint","symbol"],$9e=/^([A-Z][a-z0-9]*)+$/,Z9e="__node_internal_",lF={};function uf(t,e){if(!t)throw new lF.ERR_INTERNAL_ASSERTION(e)}function EJ(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function eUe(t,e,r){if(typeof e=="function")return uf(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return uf(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:W9e(e,...r)}function li(t,e,r){r||(r=Error);class n extends r{constructor(...a){super(eUe(t,e,a))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[J9e]=!0,lF[t]=n}function IJ(t){const e=Z9e+t.name;return Object.defineProperty(t,"name",{value:e}),t}function tUe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new X9e([e,t],e.message);return r.code=e.code,r}return t||e}let rUe=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new lF.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};li("ERR_ASSERTION","%s",Error);li("ERR_INVALID_ARG_TYPE",(t,e,r)=>{uf(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const i=[],a=[],s=[];for(const c of e)uf(typeof c=="string","All expected entries have to be of type string"),Y9e.includes(c)?i.push(c.toLowerCase()):$9e.test(c)?a.push(c):(uf(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(a.length>0){const c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(a.length>0||s.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const c=a.pop();n+=`an instance of ${a.join(", ")}, or ${c}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var o;if((o=r.constructor)!==null&&o!==void 0&&o.name)n+=`. Received an instance of ${r.constructor.name}`;else{const c=wN(r,{depth:-1});n+=`. Received ${c}`}}else{let c=wN(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);li("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=wN(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);li("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);li("ERR_MISSING_ARGS",(...t)=>{uf(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);li("ERR_OUT_OF_RANGE",(t,e,r)=>{uf(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=EJ(String(r));else if(typeof r=="bigint"){n=String(r);const i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=EJ(n)),n+="n"}else n=wN(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);li("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);li("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);li("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);li("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);li("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);li("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);li("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);li("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);li("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);li("ERR_STREAM_WRITE_AFTER_END","write after end",Error);li("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Xi={AbortError:rUe,aggregateTwoErrors:IJ(tUe),hideStackFrames:IJ,codes:lF},s_={exports:{}},OJ;function yI(){if(OJ)return s_.exports;OJ=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return s_.exports=t,s_.exports.AbortSignal=e,s_.exports.default=t,s_.exports}var $H={exports:{}},cp=typeof Reflect=="object"?Reflect:null,RJ=cp&&typeof cp.apply=="function"?cp.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},s3;cp&&typeof cp.ownKeys=="function"?s3=cp.ownKeys:Object.getOwnPropertySymbols?s3=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:s3=function(e){return Object.getOwnPropertyNames(e)};function nUe(t){console&&console.warn&&console.warn(t)}var dSe=Number.isNaN||function(e){return e!==e};function Dr(){Dr.init.call(this)}$H.exports=Dr;$H.exports.once=oUe;Dr.EventEmitter=Dr;Dr.prototype._events=void 0;Dr.prototype._eventsCount=0;Dr.prototype._maxListeners=void 0;var PJ=10;function dF(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Dr,"defaultMaxListeners",{enumerable:!0,get:function(){return PJ},set:function(t){if(typeof t!="number"||t<0||dSe(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");PJ=t}});Dr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||dSe(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function fSe(t){return t._maxListeners===void 0?Dr.defaultMaxListeners:t._maxListeners}Dr.prototype.getMaxListeners=function(){return fSe(this)};Dr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=a[e];if(c===void 0)return!1;if(typeof c=="function")RJ(c,this,r);else for(var u=c.length,l=gSe(c,u),n=0;n<u;++n)RJ(l[n],this,r);return!0};function hSe(t,e,r,n){var i,a,s;if(dF(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]),s===void 0)s=a[e]=r,++t._eventsCount;else if(typeof s=="function"?s=a[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=fSe(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=s.length,nUe(o)}return t}Dr.prototype.addListener=function(e,r){return hSe(this,e,r,!1)};Dr.prototype.on=Dr.prototype.addListener;Dr.prototype.prependListener=function(e,r){return hSe(this,e,r,!0)};function iUe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pSe(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=iUe.bind(n);return i.listener=r,n.wrapFn=i,i}Dr.prototype.once=function(e,r){return dF(r),this.on(e,pSe(this,e,r)),this};Dr.prototype.prependOnceListener=function(e,r){return dF(r),this.prependListener(e,pSe(this,e,r)),this};Dr.prototype.removeListener=function(e,r){var n,i,a,s,o;if(dF(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){o=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():aUe(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};Dr.prototype.off=Dr.prototype.removeListener;Dr.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),s;for(i=0;i<a.length;++i)s=a[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function _Se(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?sUe(i):gSe(i,i.length)}Dr.prototype.listeners=function(e){return _Se(this,e,!0)};Dr.prototype.rawListeners=function(e){return _Se(this,e,!1)};Dr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):mSe.call(t,e)};Dr.prototype.listenerCount=mSe;function mSe(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Dr.prototype.eventNames=function(){return this._eventsCount>0?s3(this._events):[]};function gSe(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function aUe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function sUe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function oUe(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,a),n(s)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ySe(t,e,a,{once:!0}),e!=="error"&&uUe(t,i,{once:!0})})}function uUe(t,e,r){typeof t.on=="function"&&ySe(t,"error",e,r)}function ySe(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var QI=$H.exports;(function(t){const e=Ni,{format:r,inspect:n}=lSe,{codes:{ERR_INVALID_ARG_TYPE:i}}=Xi,{kResistStopPropagation:a,AggregateError:s,SymbolDispose:o}=bn,c=globalThis.AbortSignal||yI().AbortSignal,u=globalThis.AbortController||yI().AbortController,l=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||e.Blob,f=typeof d<"u"?function(g){return g instanceof d}:function(g){return!1},h=(_,g)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new i(g,"AbortSignal",_)},p=(_,g)=>{if(typeof _!="function")throw new i(g,"Function",_)};t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(_){let g=!1;return function(...m){g||(g=!0,_.apply(this,m))}},createDeferredPromise:function(){let _,g;return{promise:new Promise((y,v)=>{_=y,g=v}),resolve:_,reject:g}},promisify(_){return new Promise((g,m)=>{_((y,...v)=>y?m(y):g(...v))})},debuglog(){return function(){}},format:r,inspect:n,types:{isAsyncFunction(_){return _ instanceof l},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:f,deprecate(_,g){return _},addAbortListener:QI.addAbortListener||function(g,m){if(g===void 0)throw new i("signal","AbortSignal",g);h(g,"signal"),p(m,"listener");let y;return g.aborted?queueMicrotask(()=>m()):(g.addEventListener("abort",m,{__proto__:null,once:!0,[a]:!0}),y=()=>{g.removeEventListener("abort",m)}),{__proto__:null,[o](){var v;(v=y)===null||v===void 0||v()}}},AbortSignalAny:c.any||function(g){if(g.length===1)return g[0];const m=new u,y=()=>m.abort();return g.forEach(v=>{h(v,"signals"),v.addEventListener("abort",y,{once:!0})}),m.signal.addEventListener("abort",()=>{g.forEach(v=>v.removeEventListener("abort",y))},{once:!0}),m.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(cSe);var ga=cSe.exports,ZH={};const{ArrayIsArray:bSe,ArrayPrototypeIncludes:cUe,ArrayPrototypeJoin:lUe,ArrayPrototypeMap:dUe,NumberIsInteger:ek,NumberMAX_SAFE_INTEGER:fUe,NumberMIN_SAFE_INTEGER:hUe,ObjectPrototypeHasOwnProperty:pUe,String:_Ue}=bn,{hideStackFrames:ps,codes:{ERR_INVALID_ARG_TYPE:_s,ERR_INVALID_ARG_VALUE:vSe,ERR_OUT_OF_RANGE:Sp}}=Xi,{normalizeEncoding:Jvt}=ga,{isAsyncFunction:mUe,isArrayBufferView:gUe}=ga.types,yUe=ps((t,e,r=hUe,n=fUe)=>{if(typeof t!="number")throw new _s(e,"number",t);if(!ek(t))throw new Sp(e,"an integer",t);if(t<r||t>n)throw new Sp(e,`>= ${r} && <= ${n}`,t)});ps((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new _s(e,"number",t);if(!ek(t))throw new Sp(e,"an integer",t);if(t<r||t>n)throw new Sp(e,`>= ${r} && <= ${n}`,t)});ps((t,e,r=!1)=>{if(typeof t!="number")throw new _s(e,"number",t);if(!ek(t))throw new Sp(e,"an integer",t);const n=r?1:0,i=4294967295;if(t<n||t>i)throw new Sp(e,`>= ${n} && <= ${i}`,t)});ps((t,e,r)=>{if(!cUe(r,t)){const i="must be one of: "+lUe(dUe(r,a=>typeof a=="string"?`'${a}'`:_Ue(a)),", ");throw new vSe(e,t,i)}});function bUe(t,e){if(typeof t!="boolean")throw new _s(e,"boolean",t)}function GD(t,e,r){return t==null||!pUe(t,e)?r:t[e]}const vUe=ps((t,e,r=null)=>{const n=GD(r,"allowArray",!1),i=GD(r,"allowFunction",!1);if(!GD(r,"nullable",!1)&&t===null||!n&&bSe(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new _s(e,"Object",t)});ps((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new _s(e,"a dictionary",t)});ps((t,e,r=0)=>{if(!bSe(t))throw new _s(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new vSe(e,t,n)}});ps((t,e="buffer")=>{if(!gUe(t))throw new _s(e,["Buffer","TypedArray","DataView"],t)});const AUe=ps((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new _s(e,"AbortSignal",t)}),TUe=ps((t,e)=>{if(typeof t!="function")throw new _s(e,"Function",t)});ps((t,e)=>{if(typeof t!="function"||mUe(t))throw new _s(e,"Function",t)});ps((t,e)=>{if(t!==void 0)throw new _s(e,"undefined",t)});var WI={validateBoolean:bUe,validateFunction:TUe,validateInteger:yUe,validateObject:vUe,validateAbortSignal:AUe},tk={exports:{}},ASe={exports:{}},xn=ASe.exports={},To,wo;function U7(){throw new Error("setTimeout has not been defined")}function V7(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?To=setTimeout:To=U7}catch{To=U7}try{typeof clearTimeout=="function"?wo=clearTimeout:wo=V7}catch{wo=V7}})();function TSe(t){if(To===setTimeout)return setTimeout(t,0);if((To===U7||!To)&&setTimeout)return To=setTimeout,setTimeout(t,0);try{return To(t,0)}catch{try{return To.call(null,t,0)}catch{return To.call(this,t,0)}}}function wUe(t){if(wo===clearTimeout)return clearTimeout(t);if((wo===V7||!wo)&&clearTimeout)return wo=clearTimeout,clearTimeout(t);try{return wo(t)}catch{try{return wo.call(null,t)}catch{return wo.call(this,t)}}}var Iu=[],lp=!1,Qd,o3=-1;function SUe(){!lp||!Qd||(lp=!1,Qd.length?Iu=Qd.concat(Iu):o3=-1,Iu.length&&wSe())}function wSe(){if(!lp){var t=TSe(SUe);lp=!0;for(var e=Iu.length;e;){for(Qd=Iu,Iu=[];++o3<e;)Qd&&Qd[o3].run();o3=-1,e=Iu.length}Qd=null,lp=!1,wUe(t)}}xn.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Iu.push(new SSe(t,e)),Iu.length===1&&!lp&&TSe(wSe)};function SSe(t,e){this.fun=t,this.array=e}SSe.prototype.run=function(){this.fun.apply(null,this.array)};xn.title="browser";xn.browser=!0;xn.env={};xn.argv=[];xn.version="";xn.versions={};function Xu(){}xn.on=Xu;xn.addListener=Xu;xn.once=Xu;xn.off=Xu;xn.removeListener=Xu;xn.removeAllListeners=Xu;xn.emit=Xu;xn.prependListener=Xu;xn.prependOnceListener=Xu;xn.listeners=function(t){return[]};xn.binding=function(t){throw new Error("process.binding is not supported")};xn.cwd=function(){return"/"};xn.chdir=function(t){throw new Error("process.chdir is not supported")};xn.umask=function(){return 0};var Dl=ASe.exports;const{SymbolAsyncIterator:NJ,SymbolIterator:FJ,SymbolFor:wf}=bn,xSe=wf("nodejs.stream.destroyed"),xUe=wf("nodejs.stream.errored"),MJ=wf("nodejs.stream.readable"),DJ=wf("nodejs.stream.writable"),EUe=wf("nodejs.stream.disturbed"),IUe=wf("nodejs.webstream.isClosedPromise"),OUe=wf("nodejs.webstream.controllerErrorFunction");function rk(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function fF(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function RUe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ko(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function ESe(t){return!!(t&&!ko(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function ISe(t){return!!(t&&!ko(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function OSe(t){return!!(t&&!ko(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function PUe(t){return ESe(t)||ISe(t)||OSe(t)}function NUe(t,e){return t==null?!1:e===!0?typeof t[NJ]=="function":e===!1?typeof t[FJ]=="function":typeof t[NJ]=="function"||typeof t[FJ]=="function"}function hF(t){if(!ko(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[xSe]||n!=null&&n.destroyed)}function FUe(t){if(!fF(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function MUe(t,e){if(!fF(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function RSe(t,e){if(!rk(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function PSe(t){return t&&t[MJ]!=null?t[MJ]:typeof(t==null?void 0:t.readable)!="boolean"?null:hF(t)?!1:rk(t)&&t.readable&&!RSe(t)}function NSe(t){return t&&t[DJ]!=null?t[DJ]:typeof(t==null?void 0:t.writable)!="boolean"?null:hF(t)?!1:fF(t)&&t.writable&&!FUe(t)}function DUe(t,e){return ko(t)?hF(t)?!0:!((e==null?void 0:e.readable)!==!1&&PSe(t)||(e==null?void 0:e.writable)!==!1&&NSe(t)):null}function CUe(t){var e,r;return ko(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function LUe(t){var e,r;return ko(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function jUe(t){if(!ko(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(e==null?void 0:e.closed)||(r==null?void 0:r.closed):typeof t._closed=="boolean"&&FSe(t)?t._closed:null}function FSe(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function BUe(t){return typeof t._sent100=="boolean"&&FSe(t)}function qUe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function UUe(t){if(!ko(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&BUe(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function VUe(t){var e;return!!(t&&((e=t[EUe])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function GUe(t){var e,r,n,i,a,s,o,c,u,l;return!!(t&&((e=(r=(n=(i=(a=(s=t[xUe])!==null&&s!==void 0?s:t.readableErrored)!==null&&a!==void 0?a:t.writableErrored)!==null&&i!==void 0?i:(o=t._readableState)===null||o===void 0?void 0:o.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}var Ju={isDestroyed:hF,kIsDestroyed:xSe,isDisturbed:VUe,isErrored:GUe,isReadable:PSe,kIsClosedPromise:IUe,kControllerErrorFunction:OUe,isClosed:jUe,isDuplexNodeStream:RUe,isFinished:DUe,isIterable:NUe,isReadableNodeStream:rk,isReadableStream:ESe,isReadableFinished:RSe,isReadableErrored:LUe,isNodeStream:ko,isWebStream:PUe,isWritable:NSe,isWritableNodeStream:fF,isWritableStream:ISe,isWritableFinished:MUe,isWritableErrored:CUe,isServerRequest:qUe,willEmitClose:UUe,isTransformStream:OSe};const Xc=Dl,{AbortError:MSe,codes:HUe}=Xi,{ERR_INVALID_ARG_TYPE:kUe,ERR_STREAM_PREMATURE_CLOSE:CJ}=HUe,{kEmptyObject:G7,once:H7}=ga,{validateAbortSignal:zUe,validateFunction:QUe,validateObject:WUe,validateBoolean:KUe}=WI,{Promise:XUe,PromisePrototypeThen:JUe,SymbolDispose:DSe}=bn,{isClosed:YUe,isReadable:LJ,isReadableNodeStream:HD,isReadableStream:$Ue,isReadableFinished:jJ,isReadableErrored:BJ,isWritable:qJ,isWritableNodeStream:UJ,isWritableStream:ZUe,isWritableFinished:VJ,isWritableErrored:GJ,isNodeStream:e7e,willEmitClose:t7e,kIsClosedPromise:r7e}=Ju;let dp;function n7e(t){return t.setHeader&&typeof t.abort=="function"}const k7=()=>{};function CSe(t,e,r){var n,i;if(arguments.length===2?(r=e,e=G7):e==null?e=G7:WUe(e,"options"),QUe(r,"callback"),zUe(e.signal,"options.signal"),r=H7(r),$Ue(t)||ZUe(t))return i7e(t,e,r);if(!e7e(t))throw new kUe("stream",["ReadableStream","WritableStream","Stream"],t);const a=(n=e.readable)!==null&&n!==void 0?n:HD(t),s=(i=e.writable)!==null&&i!==void 0?i:UJ(t),o=t._writableState,c=t._readableState,u=()=>{t.writable||f()};let l=t7e(t)&&HD(t)===a&&UJ(t)===s,d=VJ(t,!1);const f=()=>{d=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||a))&&(!a||h)&&r.call(t)};let h=jJ(t,!1);const p=()=>{h=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||s))&&(!s||d)&&r.call(t)},_=T=>{r.call(t,T)};let g=YUe(t);const m=()=>{g=!0;const T=GJ(t)||BJ(t);if(T&&typeof T!="boolean")return r.call(t,T);if(a&&!h&&HD(t,!0)&&!jJ(t,!1))return r.call(t,new CJ);if(s&&!d&&!VJ(t,!1))return r.call(t,new CJ);r.call(t)},y=()=>{g=!0;const T=GJ(t)||BJ(t);if(T&&typeof T!="boolean")return r.call(t,T);r.call(t)},v=()=>{t.req.on("finish",f)};n7e(t)?(t.on("complete",f),l||t.on("abort",m),t.req?v():t.on("request",v)):s&&!o&&(t.on("end",u),t.on("close",u)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",m),t.on("end",p),t.on("finish",f),e.error!==!1&&t.on("error",_),t.on("close",m),g?Xc.nextTick(m):o!=null&&o.errorEmitted||c!=null&&c.errorEmitted?l||Xc.nextTick(y):(!a&&(!l||LJ(t))&&(d||qJ(t)===!1)||!s&&(!l||qJ(t))&&(h||LJ(t)===!1)||c&&t.req&&t.aborted)&&Xc.nextTick(y);const A=()=>{r=k7,t.removeListener("aborted",m),t.removeListener("complete",f),t.removeListener("abort",m),t.removeListener("request",v),t.req&&t.req.removeListener("finish",f),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",f),t.removeListener("end",p),t.removeListener("error",_),t.removeListener("close",m)};if(e.signal&&!g){const T=()=>{const S=r;A(),S.call(t,new MSe(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Xc.nextTick(T);else{dp=dp||ga.addAbortListener;const S=dp(e.signal,T),P=r;r=H7((...j)=>{S[DSe](),P.apply(t,j)})}}return A}function i7e(t,e,r){let n=!1,i=k7;if(e.signal)if(i=()=>{n=!0,r.call(t,new MSe(void 0,{cause:e.signal.reason}))},e.signal.aborted)Xc.nextTick(i);else{dp=dp||ga.addAbortListener;const s=dp(e.signal,i),o=r;r=H7((...c)=>{s[DSe](),o.apply(t,c)})}const a=(...s)=>{n||Xc.nextTick(()=>r.apply(t,s))};return JUe(t[r7e].promise,a,a),k7}function a7e(t,e){var r;let n=!1;return e===null&&(e=G7),(r=e)!==null&&r!==void 0&&r.cleanup&&(KUe(e.cleanup,"cleanup"),n=e.cleanup),new XUe((i,a)=>{const s=CSe(t,e,o=>{n&&s(),o?a(o):i()})})}tk.exports=CSe;tk.exports.finished=a7e;var Cl=tk.exports;const Mo=Dl,{aggregateTwoErrors:s7e,codes:{ERR_MULTIPLE_CALLBACK:o7e},AbortError:u7e}=Xi,{Symbol:LSe}=bn,{kIsDestroyed:c7e,isDestroyed:l7e,isFinished:d7e,isServerRequest:f7e}=Ju,jSe=LSe("kDestroy"),z7=LSe("kConstruct");function BSe(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function h7e(t,e){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(BSe(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?HJ(this,t,e):this.once(jSe,function(a){HJ(this,s7e(a,t),e)}),this)}function HJ(t,e,r){let n=!1;function i(a){if(n)return;n=!0;const s=t._readableState,o=t._writableState;BSe(a,o,s),o&&(o.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(a),a?Mo.nextTick(p7e,t,a):Mo.nextTick(qSe,t)}try{t._destroy(e||null,i)}catch(a){i(a)}}function p7e(t,e){Q7(t,e),qSe(t)}function qSe(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Q7(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function _7e(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function W7(t,e,r){const n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Mo.nextTick(Q7,t,e):Q7(t,e))}function m7e(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(z7,e),!(t.listenerCount(z7)>1)&&Mo.nextTick(g7e,t)}function g7e(t){let e=!1;function r(n){if(e){W7(t,n??new o7e);return}e=!0;const i=t._readableState,a=t._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?t.emit(jSe,n):n?W7(t,n,!0):Mo.nextTick(y7e,t)}try{t._construct(n=>{Mo.nextTick(r,n)})}catch(n){Mo.nextTick(r,n)}}function y7e(t){t.emit(z7)}function kJ(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function USe(t){t.emit("close")}function b7e(t,e){t.emit("error",e),Mo.nextTick(USe,t)}function v7e(t,e){!t||l7e(t)||(!e&&!d7e(t)&&(e=new u7e),f7e(t)?(t.socket=null,t.destroy(e)):kJ(t)?t.abort():kJ(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Mo.nextTick(b7e,t,e):Mo.nextTick(USe,t),t.destroyed||(t[c7e]=!0))}var Zp={construct:m7e,destroyer:v7e,destroy:h7e,undestroy:_7e,errorOrDestroy:W7};const{ArrayIsArray:A7e,ObjectSetPrototypeOf:VSe}=bn,{EventEmitter:pF}=QI;function _F(t){pF.call(this,t)}VSe(_F.prototype,pF.prototype);VSe(_F,pF);_F.prototype.pipe=function(t,e){const r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",o));let a=!1;function s(){a||(a=!0,t.end())}function o(){a||(a=!0,typeof t.destroy=="function"&&t.destroy())}function c(l){u(),pF.listenerCount(this,"error")===0&&this.emit("error",l)}K7(r,"error",c),K7(t,"error",c);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",o),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function K7(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):A7e(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var nk={Stream:_F,prependListener:K7},GSe={exports:{}};(function(t){const{SymbolDispose:e}=bn,{AbortError:r,codes:n}=Xi,{isNodeStream:i,isWebStream:a,kControllerErrorFunction:s}=Ju,o=Cl,{ERR_INVALID_ARG_TYPE:c}=n;let u;const l=(d,f)=>{if(typeof d!="object"||!("aborted"in d))throw new c(f,"AbortSignal",d)};t.exports.addAbortSignal=function(f,h){if(l(f,"signal"),!i(h)&&!a(h))throw new c("stream",["ReadableStream","WritableStream","Stream"],h);return t.exports.addAbortSignalNoValidate(f,h)},t.exports.addAbortSignalNoValidate=function(d,f){if(typeof d!="object"||!("aborted"in d))return f;const h=i(f)?()=>{f.destroy(new r(void 0,{cause:d.reason}))}:()=>{f[s](new r(void 0,{cause:d.reason}))};if(d.aborted)h();else{u=u||ga.addAbortListener;const p=u(d,h);o(f,p[e])}return f}})(GSe);var mF=GSe.exports;const{StringPrototypeSlice:zJ,SymbolIterator:T7e,TypedArrayPrototypeSet:K2,Uint8Array:w7e}=bn,{Buffer:kD}=Ni,{inspect:S7e}=ga;var x7e=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return kD.alloc(0);const r=kD.allocUnsafe(e>>>0);let n=this.head,i=0;for(;n;)K2(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[T7e](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{const a=n.data;if(e>a.length)r+=a,e-=a.length;else{e===a.length?(r+=a,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=zJ(a,0,e),this.head=n,n.data=zJ(a,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){const r=kD.allocUnsafe(e),n=e;let i=this.head,a=0;do{const s=i.data;if(e>s.length)K2(r,s,n-e),e-=s.length;else{e===s.length?(K2(r,s,n-e),++a,i.next?this.head=i.next:this.head=this.tail=null):(K2(r,new w7e(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++a}while((i=i.next)!==null);return this.length-=a,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return S7e(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:E7e,NumberIsInteger:I7e}=bn,{validateInteger:O7e}=WI,{ERR_INVALID_ARG_VALUE:R7e}=Xi.codes;let HSe=16*1024,kSe=16;function P7e(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function zSe(t){return t?kSe:HSe}function N7e(t,e){O7e(e,"value",0),t?kSe=e:HSe=e}function F7e(t,e,r,n){const i=P7e(e,n,r);if(i!=null){if(!I7e(i)||i<0){const a=n?`options.${r}`:"options.highWaterMark";throw new R7e(a,i)}return E7e(i)}return zSe(t.objectMode)}var gF={getHighWaterMark:F7e,getDefaultHighWaterMark:zSe,setDefaultHighWaterMark:N7e},QSe={},X7={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Ni,n=r.Buffer;function i(s,o){for(var c in s)o[c]=s[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a);function a(s,o,c){return n(s,o,c)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(s,o,c){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,o,c)},a.alloc=function(s,o,c){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=n(s);return o!==void 0?typeof c=="string"?u.fill(o,c):u.fill(o):u.fill(0),u},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(s)}})(X7,X7.exports);var M7e=X7.exports,ik=M7e.Buffer,QJ=ik.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function D7e(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function C7e(t){var e=D7e(t);if(typeof e!="string"&&(ik.isEncoding===QJ||!QJ(t)))throw new Error("Unknown encoding: "+t);return e||t}QSe.StringDecoder=KI;function KI(t){this.encoding=C7e(t);var e;switch(this.encoding){case"utf16le":this.text=V7e,this.end=G7e,e=4;break;case"utf8":this.fillLast=B7e,e=4;break;case"base64":this.text=H7e,this.end=k7e,e=3;break;default:this.write=z7e,this.end=Q7e;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ik.allocUnsafe(e)}KI.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};KI.prototype.end=U7e;KI.prototype.text=q7e;KI.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function zD(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function L7e(t,e,r){var n=e.length-1;if(n<r)return 0;var i=zD(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=zD(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=zD(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function j7e(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function B7e(t){var e=this.lastTotal-this.lastNeed,r=j7e(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function q7e(t,e){var r=L7e(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function U7e(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function V7e(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function G7e(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function H7e(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function k7e(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function z7e(t){return t.toString(this.encoding)}function Q7e(t){return t&&t.length?this.write(t):""}const WJ=Dl,{PromisePrototypeThen:W7e,SymbolAsyncIterator:KJ,SymbolIterator:XJ}=bn,{Buffer:K7e}=Ni,{ERR_INVALID_ARG_TYPE:X7e,ERR_STREAM_NULL_VALUES:J7e}=Xi.codes;function Y7e(t,e,r){let n;if(typeof e=="string"||e instanceof K7e)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[KJ])i=!0,n=e[KJ]();else if(e&&e[XJ])i=!1,n=e[XJ]();else throw new X7e("iterable",["Iterable"],e);const a=new t({objectMode:!0,highWaterMark:1,...r});let s=!1;a._read=function(){s||(s=!0,c())},a._destroy=function(u,l){W7e(o(u),()=>WJ.nextTick(l,u),d=>WJ.nextTick(l,d||u))};async function o(u){const l=u!=null,d=typeof n.throw=="function";if(l&&d){const{value:f,done:h}=await n.throw(u);if(await f,h)return}if(typeof n.return=="function"){const{value:f}=await n.return();await f}}async function c(){for(;;){try{const{value:u,done:l}=i?await n.next():n.next();if(l)a.push(null);else{const d=u&&typeof u.then=="function"?await u:u;if(d===null)throw s=!1,new J7e;if(a.push(d))continue;s=!1}}catch(u){a.destroy(u)}break}}return a}var WSe=Y7e,QD,JJ;function yF(){if(JJ)return QD;JJ=1;const t=Dl,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:c,SafeSet:u,SymbolAsyncDispose:l,SymbolAsyncIterator:d,Symbol:f}=bn;QD=ze,ze.ReadableState=Je;const{EventEmitter:h}=QI,{Stream:p,prependListener:_}=nk,{Buffer:g}=Ni,{addAbortSignal:m}=mF,y=Cl;let v=ga.debuglog("stream",ce=>{v=ce});const A=x7e,T=Zp,{getHighWaterMark:S,getDefaultHighWaterMark:P}=gF,{aggregateTwoErrors:j,codes:{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:R,ERR_STREAM_PUSH_AFTER_EOF:C,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:M},AbortError:U}=Xi,{validateObject:B}=WI,G=f("kPaused"),{StringDecoder:K}=QSe,$=WSe;o(ze.prototype,p.prototype),o(ze,p);const se=()=>{},{errorOrDestroy:pe}=T,we=1,Ce=2,Le=4,Ie=8,Oe=16,ye=32,Me=64,W=128,ft=256,le=512,me=1024,Z=2048,q=4096,J=8192,re=16384,_e=32768,he=65536,ue=1<<17,Ue=1<<18;function De(ce){return{enumerable:!1,get(){return(this.state&ce)!==0},set(ne){ne?this.state|=ce:this.state&=~ce}}}a(Je.prototype,{objectMode:De(we),ended:De(Ce),endEmitted:De(Le),reading:De(Ie),constructed:De(Oe),sync:De(ye),needReadable:De(Me),emittedReadable:De(W),readableListening:De(ft),resumeScheduled:De(le),errorEmitted:De(me),emitClose:De(Z),autoDestroy:De(q),destroyed:De(J),closed:De(re),closeEmitted:De(_e),multiAwaitDrain:De(he),readingMore:De(ue),dataEmitted:De(Ue)});function Je(ce,ne,xe){typeof xe!="boolean"&&(xe=ne instanceof qu()),this.state=Z|q|Oe|ye,ce&&ce.objectMode&&(this.state|=we),xe&&ce&&ce.readableObjectMode&&(this.state|=we),this.highWaterMark=ce?S(this,ce,"readableHighWaterMark",xe):P(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this[G]=null,ce&&ce.emitClose===!1&&(this.state&=~Z),ce&&ce.autoDestroy===!1&&(this.state&=~q),this.errored=null,this.defaultEncoding=ce&&ce.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ce&&ce.encoding&&(this.decoder=new K(ce.encoding),this.encoding=ce.encoding)}function ze(ce){if(!(this instanceof ze))return new ze(ce);const ne=this instanceof qu();this._readableState=new Je(ce,this,ne),ce&&(typeof ce.read=="function"&&(this._read=ce.read),typeof ce.destroy=="function"&&(this._destroy=ce.destroy),typeof ce.construct=="function"&&(this._construct=ce.construct),ce.signal&&!ne&&m(ce.signal,this)),p.call(this,ce),T.construct(this,()=>{this._readableState.needReadable&&O(this,this._readableState)})}ze.prototype.destroy=T.destroy,ze.prototype._undestroy=T.undestroy,ze.prototype._destroy=function(ce,ne){ne(ce)},ze.prototype[h.captureRejectionSymbol]=function(ce){this.destroy(ce)},ze.prototype[l]=function(){let ce;return this.destroyed||(ce=this.readableEnded?null:new U,this.destroy(ce)),new c((ne,xe)=>y(this,Be=>Be&&Be!==ce?xe(Be):ne(null)))},ze.prototype.push=function(ce,ne){return ve(this,ce,ne,!1)},ze.prototype.unshift=function(ce,ne){return ve(this,ce,ne,!0)};function ve(ce,ne,xe,Be){v("readableAddChunk",ne);const ht=ce._readableState;let Et;if(ht.state&we||(typeof ne=="string"?(xe=xe||ht.defaultEncoding,ht.encoding!==xe&&(Be&&ht.encoding?ne=g.from(ne,xe).toString(ht.encoding):(ne=g.from(ne,xe),xe=""))):ne instanceof g?xe="":p._isUint8Array(ne)?(ne=p._uint8ArrayToBuffer(ne),xe=""):ne!=null&&(Et=new F("chunk",["string","Buffer","Uint8Array"],ne))),Et)pe(ce,Et);else if(ne===null)ht.state&=~Ie,z(ce,ht);else if(ht.state&we||ne&&ne.length>0)if(Be)if(ht.state&Le)pe(ce,new M);else{if(ht.destroyed||ht.errored)return!1;de(ce,ht,ne,!0)}else if(ht.ended)pe(ce,new C);else{if(ht.destroyed||ht.errored)return!1;ht.state&=~Ie,ht.decoder&&!xe?(ne=ht.decoder.write(ne),ht.objectMode||ne.length!==0?de(ce,ht,ne,!1):O(ce,ht)):de(ce,ht,ne,!1)}else Be||(ht.state&=~Ie,O(ce,ht));return!ht.ended&&(ht.length<ht.highWaterMark||ht.length===0)}function de(ce,ne,xe,Be){ne.flowing&&ne.length===0&&!ne.sync&&ce.listenerCount("data")>0?(ne.state&he?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null,ne.dataEmitted=!0,ce.emit("data",xe)):(ne.length+=ne.objectMode?1:xe.length,Be?ne.buffer.unshift(xe):ne.buffer.push(xe),ne.state&Me&&V(ce)),O(ce,ne)}ze.prototype.isPaused=function(){const ce=this._readableState;return ce[G]===!0||ce.flowing===!1},ze.prototype.setEncoding=function(ce){const ne=new K(ce);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;const xe=this._readableState.buffer;let Be="";for(const ht of xe)Be+=ne.write(ht);return xe.clear(),Be!==""&&xe.push(Be),this._readableState.length=Be.length,this};const Ge=1073741824;function it(ce){if(ce>Ge)throw new R("size","<= 1GiB",ce);return ce--,ce|=ce>>>1,ce|=ce>>>2,ce|=ce>>>4,ce|=ce>>>8,ce|=ce>>>16,ce++,ce}function ae(ce,ne){return ce<=0||ne.length===0&&ne.ended?0:ne.state&we?1:n(ce)?ne.flowing&&ne.length?ne.buffer.first().length:ne.length:ce<=ne.length?ce:ne.ended?ne.length:0}ze.prototype.read=function(ce){v("read",ce),ce===void 0?ce=NaN:r(ce)||(ce=i(ce,10));const ne=this._readableState,xe=ce;if(ce>ne.highWaterMark&&(ne.highWaterMark=it(ce)),ce!==0&&(ne.state&=~W),ce===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return v("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Qe(this):V(this),null;if(ce=ae(ce,ne),ce===0&&ne.ended)return ne.length===0&&Qe(this),null;let Be=(ne.state&Me)!==0;if(v("need readable",Be),(ne.length===0||ne.length-ce<ne.highWaterMark)&&(Be=!0,v("length less than watermark",Be)),ne.ended||ne.reading||ne.destroyed||ne.errored||!ne.constructed)Be=!1,v("reading, ended or constructing",Be);else if(Be){v("do read"),ne.state|=Ie|ye,ne.length===0&&(ne.state|=Me);try{this._read(ne.highWaterMark)}catch(Et){pe(this,Et)}ne.state&=~ye,ne.reading||(ce=ae(xe,ne))}let ht;return ce>0?ht=We(ce,ne):ht=null,ht===null?(ne.needReadable=ne.length<=ne.highWaterMark,ce=0):(ne.length-=ce,ne.multiAwaitDrain?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null),ne.length===0&&(ne.ended||(ne.needReadable=!0),xe!==ce&&ne.ended&&Qe(this)),ht!==null&&!ne.errorEmitted&&!ne.closeEmitted&&(ne.dataEmitted=!0,this.emit("data",ht)),ht};function z(ce,ne){if(v("onEofChunk"),!ne.ended){if(ne.decoder){const xe=ne.decoder.end();xe&&xe.length&&(ne.buffer.push(xe),ne.length+=ne.objectMode?1:xe.length)}ne.ended=!0,ne.sync?V(ce):(ne.needReadable=!1,ne.emittedReadable=!0,x(ce))}}function V(ce){const ne=ce._readableState;v("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(v("emitReadable",ne.flowing),ne.emittedReadable=!0,t.nextTick(x,ce))}function x(ce){const ne=ce._readableState;v("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&!ne.errored&&(ne.length||ne.ended)&&(ce.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,Re(ce)}function O(ce,ne){!ne.readingMore&&ne.constructed&&(ne.readingMore=!0,t.nextTick(D,ce,ne))}function D(ce,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){const xe=ne.length;if(v("maybeReadMore read 0"),ce.read(0),xe===ne.length)break}ne.readingMore=!1}ze.prototype._read=function(ce){throw new N("_read()")},ze.prototype.pipe=function(ce,ne){const xe=this,Be=this._readableState;Be.pipes.length===1&&(Be.multiAwaitDrain||(Be.multiAwaitDrain=!0,Be.awaitDrainWriters=new u(Be.awaitDrainWriters?[Be.awaitDrainWriters]:[]))),Be.pipes.push(ce),v("pipe count=%d opts=%j",Be.pipes.length,ne);const Et=(!ne||ne.end!==!1)&&ce!==t.stdout&&ce!==t.stderr?_t:Fe;Be.endEmitted?t.nextTick(Et):xe.once("end",Et),ce.on("unpipe",rt);function rt($e,tt){v("onunpipe"),$e===xe&&tt&&tt.hasUnpiped===!1&&(tt.hasUnpiped=!0,Ot())}function _t(){v("onend"),ce.end()}let ut,Pt=!1;function Ot(){v("cleanup"),ce.removeListener("close",wn),ce.removeListener("finish",gt),ut&&ce.removeListener("drain",ut),ce.removeListener("error",mt),ce.removeListener("unpipe",rt),xe.removeListener("end",_t),xe.removeListener("end",Fe),xe.removeListener("data",Qt),Pt=!0,ut&&Be.awaitDrainWriters&&(!ce._writableState||ce._writableState.needDrain)&&ut()}function or(){Pt||(Be.pipes.length===1&&Be.pipes[0]===ce?(v("false write response, pause",0),Be.awaitDrainWriters=ce,Be.multiAwaitDrain=!1):Be.pipes.length>1&&Be.pipes.includes(ce)&&(v("false write response, pause",Be.awaitDrainWriters.size),Be.awaitDrainWriters.add(ce)),xe.pause()),ut||(ut=H(xe,ce),ce.on("drain",ut))}xe.on("data",Qt);function Qt($e){v("ondata");const tt=ce.write($e);v("dest.write",tt),tt===!1&&or()}function mt($e){if(v("onerror",$e),Fe(),ce.removeListener("error",mt),ce.listenerCount("error")===0){const tt=ce._writableState||ce._readableState;tt&&!tt.errorEmitted?pe(ce,$e):ce.emit("error",$e)}}_(ce,"error",mt);function wn(){ce.removeListener("finish",gt),Fe()}ce.once("close",wn);function gt(){v("onfinish"),ce.removeListener("close",wn),Fe()}ce.once("finish",gt);function Fe(){v("unpipe"),xe.unpipe(ce)}return ce.emit("pipe",xe),ce.writableNeedDrain===!0?or():Be.flowing||(v("pipe resume"),xe.resume()),ce};function H(ce,ne){return function(){const Be=ce._readableState;Be.awaitDrainWriters===ne?(v("pipeOnDrain",1),Be.awaitDrainWriters=null):Be.multiAwaitDrain&&(v("pipeOnDrain",Be.awaitDrainWriters.size),Be.awaitDrainWriters.delete(ne)),(!Be.awaitDrainWriters||Be.awaitDrainWriters.size===0)&&ce.listenerCount("data")&&ce.resume()}}ze.prototype.unpipe=function(ce){const ne=this._readableState,xe={hasUnpiped:!1};if(ne.pipes.length===0)return this;if(!ce){const ht=ne.pipes;ne.pipes=[],this.pause();for(let Et=0;Et<ht.length;Et++)ht[Et].emit("unpipe",this,{hasUnpiped:!1});return this}const Be=e(ne.pipes,ce);return Be===-1?this:(ne.pipes.splice(Be,1),ne.pipes.length===0&&this.pause(),ce.emit("unpipe",this,xe),this)},ze.prototype.on=function(ce,ne){const xe=p.prototype.on.call(this,ce,ne),Be=this._readableState;return ce==="data"?(Be.readableListening=this.listenerCount("readable")>0,Be.flowing!==!1&&this.resume()):ce==="readable"&&!Be.endEmitted&&!Be.readableListening&&(Be.readableListening=Be.needReadable=!0,Be.flowing=!1,Be.emittedReadable=!1,v("on readable",Be.length,Be.reading),Be.length?V(this):Be.reading||t.nextTick(Q,this)),xe},ze.prototype.addListener=ze.prototype.on,ze.prototype.removeListener=function(ce,ne){const xe=p.prototype.removeListener.call(this,ce,ne);return ce==="readable"&&t.nextTick(Y,this),xe},ze.prototype.off=ze.prototype.removeListener,ze.prototype.removeAllListeners=function(ce){const ne=p.prototype.removeAllListeners.apply(this,arguments);return(ce==="readable"||ce===void 0)&&t.nextTick(Y,this),ne};function Y(ce){const ne=ce._readableState;ne.readableListening=ce.listenerCount("readable")>0,ne.resumeScheduled&&ne[G]===!1?ne.flowing=!0:ce.listenerCount("data")>0?ce.resume():ne.readableListening||(ne.flowing=null)}function Q(ce){v("readable nexttick read 0"),ce.read(0)}ze.prototype.resume=function(){const ce=this._readableState;return ce.flowing||(v("resume"),ce.flowing=!ce.readableListening,ee(this,ce)),ce[G]=!1,this};function ee(ce,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,t.nextTick(ie,ce,ne))}function ie(ce,ne){v("resume",ne.reading),ne.reading||ce.read(0),ne.resumeScheduled=!1,ce.emit("resume"),Re(ce),ne.flowing&&!ne.reading&&ce.read(0)}ze.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[G]=!0,this};function Re(ce){const ne=ce._readableState;for(v("flow",ne.flowing);ne.flowing&&ce.read()!==null;);}ze.prototype.wrap=function(ce){let ne=!1;ce.on("data",Be=>{!this.push(Be)&&ce.pause&&(ne=!0,ce.pause())}),ce.on("end",()=>{this.push(null)}),ce.on("error",Be=>{pe(this,Be)}),ce.on("close",()=>{this.destroy()}),ce.on("destroy",()=>{this.destroy()}),this._read=()=>{ne&&ce.resume&&(ne=!1,ce.resume())};const xe=s(ce);for(let Be=1;Be<xe.length;Be++){const ht=xe[Be];this[ht]===void 0&&typeof ce[ht]=="function"&&(this[ht]=ce[ht].bind(ce))}return this},ze.prototype[d]=function(){return oe(this)},ze.prototype.iterator=function(ce){return ce!==void 0&&B(ce,"options"),oe(this,ce)};function oe(ce,ne){typeof ce.read!="function"&&(ce=ze.wrap(ce,{objectMode:!0}));const xe=Te(ce,ne);return xe.stream=ce,xe}async function*Te(ce,ne){let xe=se;function Be(rt){this===ce?(xe(),xe=se):xe=rt}ce.on("readable",Be);let ht;const Et=y(ce,{writable:!1},rt=>{ht=rt?j(ht,rt):null,xe(),xe=se});try{for(;;){const rt=ce.destroyed?null:ce.read();if(rt!==null)yield rt;else{if(ht)throw ht;if(ht===null)return;await new c(Be)}}}catch(rt){throw ht=j(ht,rt),ht}finally{(ht||(ne==null?void 0:ne.destroyOnReturn)!==!1)&&(ht===void 0||ce._readableState.autoDestroy)?T.destroyer(ce,null):(ce.off("readable",Be),Et())}}a(ze.prototype,{readable:{__proto__:null,get(){const ce=this._readableState;return!!ce&&ce.readable!==!1&&!ce.destroyed&&!ce.errorEmitted&&!ce.endEmitted},set(ce){this._readableState&&(this._readableState.readable=!!ce)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ce){this._readableState&&(this._readableState.flowing=ce)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ce){this._readableState&&(this._readableState.destroyed=ce)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(Je.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[G]!==!1},set(ce){this[G]=!!ce}}}),ze._fromList=We;function We(ce,ne){if(ne.length===0)return null;let xe;return ne.objectMode?xe=ne.buffer.shift():!ce||ce>=ne.length?(ne.decoder?xe=ne.buffer.join(""):ne.buffer.length===1?xe=ne.buffer.first():xe=ne.buffer.concat(ne.length),ne.buffer.clear()):xe=ne.buffer.consume(ce,ne.decoder),xe}function Qe(ce){const ne=ce._readableState;v("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,t.nextTick(Xe,ne,ce))}function Xe(ce,ne){if(v("endReadableNT",ce.endEmitted,ce.length),!ce.errored&&!ce.closeEmitted&&!ce.endEmitted&&ce.length===0){if(ce.endEmitted=!0,ne.emit("end"),ne.writable&&ne.allowHalfOpen===!1)t.nextTick(Pe,ne);else if(ce.autoDestroy){const xe=ne._writableState;(!xe||xe.autoDestroy&&(xe.finished||xe.writable===!1))&&ne.destroy()}}}function Pe(ce){ce.writable&&!ce.writableEnded&&!ce.destroyed&&ce.end()}ze.from=function(ce,ne){return $(ze,ce,ne)};let He;function Ee(){return He===void 0&&(He={}),He}return ze.fromWeb=function(ce,ne){return Ee().newStreamReadableFromReadableStream(ce,ne)},ze.toWeb=function(ce,ne){return Ee().newReadableStreamFromStreamReadable(ce,ne)},ze.wrap=function(ce,ne){var xe,Be;return new ze({objectMode:(xe=(Be=ce.readableObjectMode)!==null&&Be!==void 0?Be:ce.objectMode)!==null&&xe!==void 0?xe:!0,...ne,destroy(ht,Et){T.destroyer(ce,ht),Et(ht)}}).wrap(ce)},QD}var WD,YJ;function ak(){if(YJ)return WD;YJ=1;const t=Dl,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:c,SymbolHasInstance:u}=bn;WD=B,B.WritableState=M;const{EventEmitter:l}=QI,d=nk.Stream,{Buffer:f}=Ni,h=Zp,{addAbortSignal:p}=mF,{getHighWaterMark:_,getDefaultHighWaterMark:g}=gF,{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:y,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:A,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:P,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:F}=Xi.codes,{errorOrDestroy:N}=h;s(B.prototype,d.prototype),s(B,d);function R(){}const C=c("kOnFinished");function M(q,J,re){typeof re!="boolean"&&(re=J instanceof qu()),this.objectMode=!!(q&&q.objectMode),re&&(this.objectMode=this.objectMode||!!(q&&q.writableObjectMode)),this.highWaterMark=q?_(this,q,"writableHighWaterMark",re):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const _e=!!(q&&q.decodeStrings===!1);this.decodeStrings=!_e,this.defaultEncoding=q&&q.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=pe.bind(void 0,J),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,U(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!q||q.emitClose!==!1,this.autoDestroy=!q||q.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[C]=[]}function U(q){q.buffered=[],q.bufferedIndex=0,q.allBuffers=!0,q.allNoop=!0}M.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(M.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function B(q){const J=this instanceof qu();if(!J&&!n(B,this))return new B(q);this._writableState=new M(q,this,J),q&&(typeof q.write=="function"&&(this._write=q.write),typeof q.writev=="function"&&(this._writev=q.writev),typeof q.destroy=="function"&&(this._destroy=q.destroy),typeof q.final=="function"&&(this._final=q.final),typeof q.construct=="function"&&(this._construct=q.construct),q.signal&&p(q.signal,this)),d.call(this,q),h.construct(this,()=>{const re=this._writableState;re.writing||Ie(this,re),W(this,re)})}i(B,u,{__proto__:null,value:function(q){return n(this,q)?!0:this!==B?!1:q&&q._writableState instanceof M}}),B.prototype.pipe=function(){N(this,new A)};function G(q,J,re,_e){const he=q._writableState;if(typeof re=="function")_e=re,re=he.defaultEncoding;else{if(!re)re=he.defaultEncoding;else if(re!=="buffer"&&!f.isEncoding(re))throw new F(re);typeof _e!="function"&&(_e=R)}if(J===null)throw new P;if(!he.objectMode)if(typeof J=="string")he.decodeStrings!==!1&&(J=f.from(J,re),re="buffer");else if(J instanceof f)re="buffer";else if(d._isUint8Array(J))J=d._uint8ArrayToBuffer(J),re="buffer";else throw new m("chunk",["string","Buffer","Uint8Array"],J);let ue;return he.ending?ue=new j:he.destroyed&&(ue=new T("write")),ue?(t.nextTick(_e,ue),N(q,ue,!0),ue):(he.pendingcb++,K(q,he,J,re,_e))}B.prototype.write=function(q,J,re){return G(this,q,J,re)===!0},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){const q=this._writableState;q.corked&&(q.corked--,q.writing||Ie(this,q))},B.prototype.setDefaultEncoding=function(J){if(typeof J=="string"&&(J=o(J)),!f.isEncoding(J))throw new F(J);return this._writableState.defaultEncoding=J,this};function K(q,J,re,_e,he){const ue=J.objectMode?1:re.length;J.length+=ue;const Ue=J.length<J.highWaterMark;return Ue||(J.needDrain=!0),J.writing||J.corked||J.errored||!J.constructed?(J.buffered.push({chunk:re,encoding:_e,callback:he}),J.allBuffers&&_e!=="buffer"&&(J.allBuffers=!1),J.allNoop&&he!==R&&(J.allNoop=!1)):(J.writelen=ue,J.writecb=he,J.writing=!0,J.sync=!0,q._write(re,_e,J.onwrite),J.sync=!1),Ue&&!J.errored&&!J.destroyed}function $(q,J,re,_e,he,ue,Ue){J.writelen=_e,J.writecb=Ue,J.writing=!0,J.sync=!0,J.destroyed?J.onwrite(new T("write")):re?q._writev(he,J.onwrite):q._write(he,ue,J.onwrite),J.sync=!1}function se(q,J,re,_e){--J.pendingcb,_e(re),Le(J),N(q,re)}function pe(q,J){const re=q._writableState,_e=re.sync,he=re.writecb;if(typeof he!="function"){N(q,new v);return}re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,J?(J.stack,re.errored||(re.errored=J),q._readableState&&!q._readableState.errored&&(q._readableState.errored=J),_e?t.nextTick(se,q,re,J,he):se(q,re,J,he)):(re.buffered.length>re.bufferedIndex&&Ie(q,re),_e?re.afterWriteTickInfo!==null&&re.afterWriteTickInfo.cb===he?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:he,stream:q,state:re},t.nextTick(we,re.afterWriteTickInfo)):Ce(q,re,1,he))}function we({stream:q,state:J,count:re,cb:_e}){return J.afterWriteTickInfo=null,Ce(q,J,re,_e)}function Ce(q,J,re,_e){for(!J.ending&&!q.destroyed&&J.length===0&&J.needDrain&&(J.needDrain=!1,q.emit("drain"));re-- >0;)J.pendingcb--,_e();J.destroyed&&Le(J),W(q,J)}function Le(q){if(q.writing)return;for(let he=q.bufferedIndex;he<q.buffered.length;++he){var J;const{chunk:ue,callback:Ue}=q.buffered[he],De=q.objectMode?1:ue.length;q.length-=De,Ue((J=q.errored)!==null&&J!==void 0?J:new T("write"))}const re=q[C].splice(0);for(let he=0;he<re.length;he++){var _e;re[he]((_e=q.errored)!==null&&_e!==void 0?_e:new T("end"))}U(q)}function Ie(q,J){if(J.corked||J.bufferProcessing||J.destroyed||!J.constructed)return;const{buffered:re,bufferedIndex:_e,objectMode:he}=J,ue=re.length-_e;if(!ue)return;let Ue=_e;if(J.bufferProcessing=!0,ue>1&&q._writev){J.pendingcb-=ue-1;const De=J.allNoop?R:ze=>{for(let ve=Ue;ve<re.length;++ve)re[ve].callback(ze)},Je=J.allNoop&&Ue===0?re:e(re,Ue);Je.allBuffers=J.allBuffers,$(q,J,!0,J.length,Je,"",De),U(J)}else{do{const{chunk:De,encoding:Je,callback:ze}=re[Ue];re[Ue++]=null;const ve=he?1:De.length;$(q,J,!1,ve,De,Je,ze)}while(Ue<re.length&&!J.writing);Ue===re.length?U(J):Ue>256?(re.splice(0,Ue),J.bufferedIndex=0):J.bufferedIndex=Ue}J.bufferProcessing=!1}B.prototype._write=function(q,J,re){if(this._writev)this._writev([{chunk:q,encoding:J}],re);else throw new y("_write()")},B.prototype._writev=null,B.prototype.end=function(q,J,re){const _e=this._writableState;typeof q=="function"?(re=q,q=null,J=null):typeof J=="function"&&(re=J,J=null);let he;if(q!=null){const ue=G(this,q,J);ue instanceof r&&(he=ue)}return _e.corked&&(_e.corked=1,this.uncork()),he||(!_e.errored&&!_e.ending?(_e.ending=!0,W(this,_e,!0),_e.ended=!0):_e.finished?he=new S("end"):_e.destroyed&&(he=new T("end"))),typeof re=="function"&&(he||_e.finished?t.nextTick(re,he):_e[C].push(re)),this};function Oe(q){return q.ending&&!q.destroyed&&q.constructed&&q.length===0&&!q.errored&&q.buffered.length===0&&!q.finished&&!q.writing&&!q.errorEmitted&&!q.closeEmitted}function ye(q,J){let re=!1;function _e(he){if(re){N(q,he??v());return}if(re=!0,J.pendingcb--,he){const ue=J[C].splice(0);for(let Ue=0;Ue<ue.length;Ue++)ue[Ue](he);N(q,he,J.sync)}else Oe(J)&&(J.prefinished=!0,q.emit("prefinish"),J.pendingcb++,t.nextTick(ft,q,J))}J.sync=!0,J.pendingcb++;try{q._final(_e)}catch(he){_e(he)}J.sync=!1}function Me(q,J){!J.prefinished&&!J.finalCalled&&(typeof q._final=="function"&&!J.destroyed?(J.finalCalled=!0,ye(q,J)):(J.prefinished=!0,q.emit("prefinish")))}function W(q,J,re){Oe(J)&&(Me(q,J),J.pendingcb===0&&(re?(J.pendingcb++,t.nextTick((_e,he)=>{Oe(he)?ft(_e,he):he.pendingcb--},q,J)):Oe(J)&&(J.pendingcb++,ft(q,J))))}function ft(q,J){J.pendingcb--,J.finished=!0;const re=J[C].splice(0);for(let _e=0;_e<re.length;_e++)re[_e]();if(q.emit("finish"),J.autoDestroy){const _e=q._readableState;(!_e||_e.autoDestroy&&(_e.endEmitted||_e.readable===!1))&&q.destroy()}}a(B.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(q){this._writableState&&(this._writableState.destroyed=q)}},writable:{__proto__:null,get(){const q=this._writableState;return!!q&&q.writable!==!1&&!q.destroyed&&!q.errored&&!q.ending&&!q.ended},set(q){this._writableState&&(this._writableState.writable=!!q)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const q=this._writableState;return q?!q.destroyed&&!q.ending&&q.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const le=h.destroy;B.prototype.destroy=function(q,J){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[C].length)&&t.nextTick(Le,re),le.call(this,q,J),this},B.prototype._undestroy=h.undestroy,B.prototype._destroy=function(q,J){J(q)},B.prototype[l.captureRejectionSymbol]=function(q){this.destroy(q)};let me;function Z(){return me===void 0&&(me={}),me}return B.fromWeb=function(q,J){return Z().newStreamWritableFromWritableStream(q,J)},B.toWeb=function(q){return Z().newWritableStreamFromStreamWritable(q)},WD}var KD,$J;function $7e(){if($J)return KD;$J=1;const t=Dl,e=Ni,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:a,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:c,isReadableStream:u,isWritableStream:l}=Ju,d=Cl,{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p}}=Xi,{destroyer:_}=Zp,g=qu(),m=yF(),y=ak(),{createDeferredPromise:v}=ga,A=WSe,T=globalThis.Blob||e.Blob,S=typeof T<"u"?function(M){return M instanceof T}:function(M){return!1},P=globalThis.AbortController||yI().AbortController,{FunctionPrototypeCall:j}=bn;class F extends g{constructor(M){super(M),(M==null?void 0:M.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(M==null?void 0:M.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}KD=function C(M,U){if(c(M))return M;if(s(M))return R({readable:M});if(o(M))return R({writable:M});if(a(M))return R({writable:!1,readable:!1});if(u(M))return R({readable:m.fromWeb(M)});if(l(M))return R({writable:y.fromWeb(M)});if(typeof M=="function"){const{value:G,write:K,final:$,destroy:se}=N(M);if(i(G))return A(F,G,{objectMode:!0,write:K,final:$,destroy:se});const pe=G==null?void 0:G.then;if(typeof pe=="function"){let we;const Ce=j(pe,G,Le=>{if(Le!=null)throw new p("nully","body",Le)},Le=>{_(we,Le)});return we=new F({objectMode:!0,readable:!1,write:K,final(Le){$(async()=>{try{await Ce,t.nextTick(Le,null)}catch(Ie){t.nextTick(Le,Ie)}})},destroy:se})}throw new p("Iterable, AsyncIterable or AsyncFunction",U,G)}if(S(M))return C(M.arrayBuffer());if(i(M))return A(F,M,{objectMode:!0,writable:!1});if(u(M==null?void 0:M.readable)&&l(M==null?void 0:M.writable))return F.fromWeb(M);if(typeof(M==null?void 0:M.writable)=="object"||typeof(M==null?void 0:M.readable)=="object"){const G=M!=null&&M.readable?s(M==null?void 0:M.readable)?M==null?void 0:M.readable:C(M.readable):void 0,K=M!=null&&M.writable?o(M==null?void 0:M.writable)?M==null?void 0:M.writable:C(M.writable):void 0;return R({readable:G,writable:K})}const B=M==null?void 0:M.then;if(typeof B=="function"){let G;return j(B,M,K=>{K!=null&&G.push(K),G.push(null)},K=>{_(G,K)}),G=new F({objectMode:!0,writable:!1,read(){}})}throw new h(U,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],M)};function N(C){let{promise:M,resolve:U}=v();const B=new P,G=B.signal;return{value:C(async function*(){for(;;){const $=M;M=null;const{chunk:se,done:pe,cb:we}=await $;if(t.nextTick(we),pe)return;if(G.aborted)throw new f(void 0,{cause:G.reason});({promise:M,resolve:U}=v()),yield se}}(),{signal:G}),write($,se,pe){const we=U;U=null,we({chunk:$,done:!1,cb:pe})},final($){const se=U;U=null,se({done:!0,cb:$})},destroy($,se){B.abort(),se($)}}}function R(C){const M=C.readable&&typeof C.readable.read!="function"?m.wrap(C.readable):C.readable,U=C.writable;let B=!!r(M),G=!!n(U),K,$,se,pe,we;function Ce(Le){const Ie=pe;pe=null,Ie?Ie(Le):Le&&we.destroy(Le)}return we=new F({readableObjectMode:!!(M!=null&&M.readableObjectMode),writableObjectMode:!!(U!=null&&U.writableObjectMode),readable:B,writable:G}),G&&(d(U,Le=>{G=!1,Le&&_(M,Le),Ce(Le)}),we._write=function(Le,Ie,Oe){U.write(Le,Ie)?Oe():K=Oe},we._final=function(Le){U.end(),$=Le},U.on("drain",function(){if(K){const Le=K;K=null,Le()}}),U.on("finish",function(){if($){const Le=$;$=null,Le()}})),B&&(d(M,Le=>{B=!1,Le&&_(M,Le),Ce(Le)}),M.on("readable",function(){if(se){const Le=se;se=null,Le()}}),M.on("end",function(){we.push(null)}),we._read=function(){for(;;){const Le=M.read();if(Le===null){se=we._read;return}if(!we.push(Le))return}}),we._destroy=function(Le,Ie){!Le&&pe!==null&&(Le=new f),se=null,K=null,$=null,pe===null?Ie(Le):(pe=Ie,_(U,Le),_(M,Le))},we}return KD}var XD,ZJ;function qu(){if(ZJ)return XD;ZJ=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=bn;XD=s;const i=yF(),a=ak();n(s.prototype,i.prototype),n(s,i);{const l=r(a.prototype);for(let d=0;d<l.length;d++){const f=l[d];s.prototype[f]||(s.prototype[f]=a.prototype[f])}}function s(l){if(!(this instanceof s))return new s(l);i.call(this,l),a.call(this,l),l?(this.allowHalfOpen=l.allowHalfOpen!==!1,l.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),l.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(s.prototype,{writable:{__proto__:null,...e(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(a.prototype,"writableLength")},writableFinished:{__proto__:null,...e(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(l){this._readableState&&this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}});let o;function c(){return o===void 0&&(o={}),o}s.fromWeb=function(l,d){return c().newStreamDuplexFromReadableWritablePair(l,d)},s.toWeb=function(l){return c().newReadableWritablePairFromDuplex(l)};let u;return s.from=function(l){return u||(u=$7e()),u(l,"body")},XD}const{ObjectSetPrototypeOf:KSe,Symbol:Z7e}=bn;var XSe=Uu;const{ERR_METHOD_NOT_IMPLEMENTED:eVe}=Xi.codes,sk=qu(),{getHighWaterMark:tVe}=gF;KSe(Uu.prototype,sk.prototype);KSe(Uu,sk);const QE=Z7e("kCallback");function Uu(t){if(!(this instanceof Uu))return new Uu(t);const e=t?tVe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),sk.call(this,t),this._readableState.sync=!1,this[QE]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",rVe)}function J7(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function rVe(){this._final!==J7&&J7.call(this)}Uu.prototype._final=J7;Uu.prototype._transform=function(t,e,r){throw new eVe("_transform()")};Uu.prototype._write=function(t,e,r){const n=this._readableState,i=this._writableState,a=n.length;this._transform(t,e,(s,o)=>{if(s){r(s);return}o!=null&&this.push(o),i.ended||a===n.length||n.length<n.highWaterMark?r():this[QE]=r})};Uu.prototype._read=function(){if(this[QE]){const t=this[QE];this[QE]=null,t()}};const{ObjectSetPrototypeOf:JSe}=bn;var YSe=xp;const ok=XSe;JSe(xp.prototype,ok.prototype);JSe(xp,ok);function xp(t){if(!(this instanceof xp))return new xp(t);ok.call(this,t)}xp.prototype._transform=function(t,e,r){r(null,t)};const sE=Dl,{ArrayIsArray:nVe,Promise:iVe,SymbolAsyncIterator:aVe,SymbolDispose:sVe}=bn,SN=Cl,{once:oVe}=ga,uVe=Zp,eY=qu(),{aggregateTwoErrors:cVe,codes:{ERR_INVALID_ARG_TYPE:Y7,ERR_INVALID_RETURN_VALUE:JD,ERR_MISSING_ARGS:lVe,ERR_STREAM_DESTROYED:dVe,ERR_STREAM_PREMATURE_CLOSE:fVe},AbortError:hVe}=Xi,{validateFunction:pVe,validateAbortSignal:_Ve}=WI,{isIterable:Id,isReadable:YD,isReadableNodeStream:u3,isNodeStream:tY,isTransformStream:Bh,isWebStream:mVe,isReadableStream:$D,isReadableFinished:gVe}=Ju,yVe=globalThis.AbortController||yI().AbortController;let ZD,eC,tC;function rY(t,e,r){let n=!1;t.on("close",()=>{n=!0});const i=SN(t,{readable:e,writable:r},a=>{n=!a});return{destroy:a=>{n||(n=!0,uVe.destroyer(t,a||new dVe("pipe")))},cleanup:i}}function bVe(t){return pVe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function rC(t){if(Id(t))return t;if(u3(t))return vVe(t);throw new Y7("val",["Readable","Iterable","AsyncIterable"],t)}async function*vVe(t){eC||(eC=yF()),yield*eC.prototype[aVe].call(t)}async function X2(t,e,r,{end:n}){let i,a=null;const s=u=>{if(u&&(i=u),a){const l=a;a=null,l()}},o=()=>new iVe((u,l)=>{i?l(i):a=()=>{i?l(i):u()}});e.on("drain",s);const c=SN(e,{readable:!1},s);try{e.writableNeedDrain&&await o();for await(const u of t)e.write(u)||await o();n&&(e.end(),await o()),r()}catch(u){r(i!==u?cVe(i,u):u)}finally{c(),e.off("drain",s)}}async function nC(t,e,r,{end:n}){Bh(e)&&(e=e.writable);const i=e.getWriter();try{for await(const a of t)await i.ready,i.write(a).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(a){try{await i.abort(a),r(a)}catch(s){r(s)}}}function AVe(...t){return $Se(t,oVe(bVe(t)))}function $Se(t,e,r){if(t.length===1&&nVe(t[0])&&(t=t[0]),t.length<2)throw new lVe("streams");const n=new yVe,i=n.signal,a=r==null?void 0:r.signal,s=[];_Ve(a,"options.signal");function o(){p(new hVe)}tC=tC||ga.addAbortListener;let c;a&&(c=tC(a,o));let u,l;const d=[];let f=0;function h(v){p(v,--f===0)}function p(v,A){var T;if(v&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=v),!(!u&&!A)){for(;d.length;)d.shift()(u);(T=c)===null||T===void 0||T[sVe](),n.abort(),A&&(u||s.forEach(S=>S()),sE.nextTick(e,u,l))}}let _;for(let v=0;v<t.length;v++){const A=t[v],T=v<t.length-1,S=v>0,P=T||(r==null?void 0:r.end)!==!1,j=v===t.length-1;if(tY(A)){let F=function(N){N&&N.name!=="AbortError"&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(N)};var y=F;if(P){const{destroy:N,cleanup:R}=rY(A,T,S);d.push(N),YD(A)&&j&&s.push(R)}A.on("error",F),YD(A)&&j&&s.push(()=>{A.removeListener("error",F)})}if(v===0)if(typeof A=="function"){if(_=A({signal:i}),!Id(_))throw new JD("Iterable, AsyncIterable or Stream","source",_)}else Id(A)||u3(A)||Bh(A)?_=A:_=eY.from(A);else if(typeof A=="function"){if(Bh(_)){var g;_=rC((g=_)===null||g===void 0?void 0:g.readable)}else _=rC(_);if(_=A(_,{signal:i}),T){if(!Id(_,!0))throw new JD("AsyncIterable",`transform[${v-1}]`,_)}else{var m;ZD||(ZD=YSe);const F=new ZD({objectMode:!0}),N=(m=_)===null||m===void 0?void 0:m.then;if(typeof N=="function")f++,N.call(_,M=>{l=M,M!=null&&F.write(M),P&&F.end(),sE.nextTick(h)},M=>{F.destroy(M),sE.nextTick(h,M)});else if(Id(_,!0))f++,X2(_,F,h,{end:P});else if($D(_)||Bh(_)){const M=_.readable||_;f++,X2(M,F,h,{end:P})}else throw new JD("AsyncIterable or Promise","destination",_);_=F;const{destroy:R,cleanup:C}=rY(_,!1,!0);d.push(R),j&&s.push(C)}}else if(tY(A)){if(u3(_)){f+=2;const F=TVe(_,A,h,{end:P});YD(A)&&j&&s.push(F)}else if(Bh(_)||$D(_)){const F=_.readable||_;f++,X2(F,A,h,{end:P})}else if(Id(_))f++,X2(_,A,h,{end:P});else throw new Y7("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_);_=A}else if(mVe(A)){if(u3(_))f++,nC(rC(_),A,h,{end:P});else if($D(_)||Id(_))f++,nC(_,A,h,{end:P});else if(Bh(_))f++,nC(_.readable,A,h,{end:P});else throw new Y7("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_);_=A}else _=eY.from(A)}return(i!=null&&i.aborted||a!=null&&a.aborted)&&sE.nextTick(o),_}function TVe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new fVe)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var a=s;gVe(t)?sE.nextTick(s):t.once("end",s)}else r();return SN(t,{readable:!0,writable:!1},s=>{const o=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&o&&o.ended&&!o.errored&&!o.errorEmitted?t.once("end",r).once("error",r):r(s)}),SN(e,{readable:!1,writable:!0},r)}var uk={pipelineImpl:$Se,pipeline:AVe};const{pipeline:wVe}=uk,J2=qu(),{destroyer:SVe}=Zp,{isNodeStream:Y2,isReadable:nY,isWritable:iY,isWebStream:iC,isTransformStream:Yl,isWritableStream:aY,isReadableStream:sY}=Ju,{AbortError:xVe,codes:{ERR_INVALID_ARG_VALUE:oY,ERR_MISSING_ARGS:EVe}}=Xi,IVe=Cl;var ZSe=function(...e){if(e.length===0)throw new EVe("streams");if(e.length===1)return J2.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=J2.from(e[0])),typeof e[e.length-1]=="function"){const h=e.length-1;e[h]=J2.from(e[h])}for(let h=0;h<e.length;++h)if(!(!Y2(e[h])&&!iC(e[h]))){if(h<e.length-1&&!(nY(e[h])||sY(e[h])||Yl(e[h])))throw new oY(`streams[${h}]`,r[h],"must be readable");if(h>0&&!(iY(e[h])||aY(e[h])||Yl(e[h])))throw new oY(`streams[${h}]`,r[h],"must be writable")}let n,i,a,s,o;function c(h){const p=s;s=null,p?p(h):h?o.destroy(h):!f&&!d&&o.destroy()}const u=e[0],l=wVe(e,c),d=!!(iY(u)||aY(u)||Yl(u)),f=!!(nY(l)||sY(l)||Yl(l));if(o=new J2({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(l!=null&&l.readableObjectMode),writable:d,readable:f}),d){if(Y2(u))o._write=function(p,_,g){u.write(p,_)?g():n=g},o._final=function(p){u.end(),i=p},u.on("drain",function(){if(n){const p=n;n=null,p()}});else if(iC(u)){const _=(Yl(u)?u.writable:u).getWriter();o._write=async function(g,m,y){try{await _.ready,_.write(g).catch(()=>{}),y()}catch(v){y(v)}},o._final=async function(g){try{await _.ready,_.close().catch(()=>{}),i=g}catch(m){g(m)}}}const h=Yl(l)?l.readable:l;IVe(h,()=>{if(i){const p=i;i=null,p()}})}if(f){if(Y2(l))l.on("readable",function(){if(a){const h=a;a=null,h()}}),l.on("end",function(){o.push(null)}),o._read=function(){for(;;){const h=l.read();if(h===null){a=o._read;return}if(!o.push(h))return}};else if(iC(l)){const p=(Yl(l)?l.readable:l).getReader();o._read=async function(){for(;;)try{const{value:_,done:g}=await p.read();if(!o.push(_))return;if(g){o.push(null);return}}catch{return}}}}return o._destroy=function(h,p){!h&&s!==null&&(h=new xVe),a=null,n=null,i=null,s===null?p(h):(s=p,Y2(l)&&SVe(l,h))},o};const OVe=globalThis.AbortController||yI().AbortController,{codes:{ERR_INVALID_ARG_VALUE:RVe,ERR_INVALID_ARG_TYPE:XI,ERR_MISSING_ARGS:PVe,ERR_OUT_OF_RANGE:NVe},AbortError:Bo}=Xi,{validateAbortSignal:Sf,validateInteger:uY,validateObject:xf}=WI,FVe=bn.Symbol("kWeak"),MVe=bn.Symbol("kResistStopPropagation"),{finished:DVe}=Cl,CVe=ZSe,{addAbortSignalNoValidate:LVe}=mF,{isWritable:jVe,isNodeStream:BVe}=Ju,{deprecate:qVe}=ga,{ArrayPrototypePush:UVe,Boolean:VVe,MathFloor:cY,Number:GVe,NumberIsNaN:HVe,Promise:lY,PromiseReject:dY,PromiseResolve:kVe,PromisePrototypeThen:fY,Symbol:exe}=bn,xN=exe("kEmpty"),hY=exe("kEof");function zVe(t,e){if(e!=null&&xf(e,"options"),(e==null?void 0:e.signal)!=null&&Sf(e.signal,"options.signal"),BVe(t)&&!jVe(t))throw new RVe("stream",t,"must be writable");const r=CVe(this,t);return e!=null&&e.signal&&LVe(e.signal,r),r}function bF(t,e){if(typeof t!="function")throw new XI("fn",["Function","AsyncFunction"],t);e!=null&&xf(e,"options"),(e==null?void 0:e.signal)!=null&&Sf(e.signal,"options.signal");let r=1;(e==null?void 0:e.concurrency)!=null&&(r=cY(e.concurrency));let n=r-1;return(e==null?void 0:e.highWaterMark)!=null&&(n=cY(e.highWaterMark)),uY(r,"options.concurrency",1),uY(n,"options.highWaterMark",0),n+=r,(async function*(){const a=ga.AbortSignalAny([e==null?void 0:e.signal].filter(VVe)),s=this,o=[],c={signal:a};let u,l,d=!1,f=0;function h(){d=!0,p()}function p(){f-=1,_()}function _(){l&&!d&&f<r&&o.length<n&&(l(),l=null)}async function g(){try{for await(let m of s){if(d)return;if(a.aborted)throw new Bo;try{if(m=t(m,c),m===xN)continue;m=kVe(m)}catch(y){m=dY(y)}f+=1,fY(m,p,h),o.push(m),u&&(u(),u=null),!d&&(o.length>=n||f>=r)&&await new lY(y=>{l=y})}o.push(hY)}catch(m){const y=dY(m);fY(y,p,h),o.push(y)}finally{d=!0,u&&(u(),u=null)}}g();try{for(;;){for(;o.length>0;){const m=await o[0];if(m===hY)return;if(a.aborted)throw new Bo;m!==xN&&(yield m),o.shift(),_()}await new lY(m=>{u=m})}}finally{d=!0,l&&(l(),l=null)}}).call(this)}function QVe(t=void 0){return t!=null&&xf(t,"options"),(t==null?void 0:t.signal)!=null&&Sf(t.signal,"options.signal"),(async function*(){let r=0;for await(const i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Bo({cause:t.signal.reason});yield[r++,i]}}).call(this)}async function txe(t,e=void 0){for await(const r of ck.call(this,t,e))return!0;return!1}async function WVe(t,e=void 0){if(typeof t!="function")throw new XI("fn",["Function","AsyncFunction"],t);return!await txe.call(this,async(...r)=>!await t(...r),e)}async function KVe(t,e){for await(const r of ck.call(this,t,e))return r}async function XVe(t,e){if(typeof t!="function")throw new XI("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),xN}for await(const n of bF.call(this,r,e));}function ck(t,e){if(typeof t!="function")throw new XI("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:xN}return bF.call(this,r,e)}class JVe extends PVe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function YVe(t,e,r){var n;if(typeof t!="function")throw new XI("reducer",["Function","AsyncFunction"],t);r!=null&&xf(r,"options"),(r==null?void 0:r.signal)!=null&&Sf(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const u=new Bo(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await DVe(this.destroy(u)),u}const a=new OVe,s=a.signal;if(r!=null&&r.signal){const u={once:!0,[FVe]:this,[MVe]:!0};r.signal.addEventListener("abort",()=>a.abort(),u)}let o=!1;try{for await(const u of this){var c;if(o=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new Bo;i?e=await t(e,u,{signal:s}):(e=u,i=!0)}if(!o&&!i)throw new JVe}finally{a.abort()}return e}async function $Ve(t){t!=null&&xf(t,"options"),(t==null?void 0:t.signal)!=null&&Sf(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Bo(void 0,{cause:t.signal.reason});UVe(e,n)}return e}function ZVe(t,e){const r=bF.call(this,t,e);return(async function*(){for await(const i of r)yield*i}).call(this)}function rxe(t){if(t=GVe(t),HVe(t))return 0;if(t<0)throw new NVe("number",">= 0",t);return t}function eGe(t,e=void 0){return e!=null&&xf(e,"options"),(e==null?void 0:e.signal)!=null&&Sf(e.signal,"options.signal"),t=rxe(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Bo;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Bo;t--<=0&&(yield a)}}).call(this)}function tGe(t,e=void 0){return e!=null&&xf(e,"options"),(e==null?void 0:e.signal)!=null&&Sf(e.signal,"options.signal"),t=rxe(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Bo;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Bo;if(t-- >0&&(yield a),t<=0)return}}).call(this)}ZH.streamReturningOperators={asIndexedPairs:qVe(QVe,"readable.asIndexedPairs will be removed in a future version."),drop:eGe,filter:ck,flatMap:ZVe,map:bF,take:tGe,compose:zVe};ZH.promiseReturningOperators={every:WVe,forEach:XVe,reduce:YVe,toArray:$Ve,some:txe,find:KVe};var aC,pY;function nxe(){if(pY)return aC;pY=1;const{ArrayPrototypePop:t,Promise:e}=bn,{isIterable:r,isNodeStream:n,isWebStream:i}=Ju,{pipelineImpl:a}=uk,{finished:s}=Cl;ixe();function o(...c){return new e((u,l)=>{let d,f;const h=c[c.length-1];if(h&&typeof h=="object"&&!n(h)&&!r(h)&&!i(h)){const p=t(c);d=p.signal,f=p.end}a(c,(p,_)=>{p?l(p):u(_)},{signal:d,end:f})})}return aC={finished:s,pipeline:o},aC}var _Y;function ixe(){if(_Y)return VD.exports;_Y=1;const{Buffer:t}=Ni,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=bn,{promisify:{custom:i}}=ga,{streamReturningOperators:a,promiseReturningOperators:s}=ZH,{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Xi,c=ZSe,{setDefaultHighWaterMark:u,getDefaultHighWaterMark:l}=gF,{pipeline:d}=uk,{destroyer:f}=Zp,h=Cl,p=nxe(),_=Ju,g=VD.exports=nk.Stream;g.isDestroyed=_.isDestroyed,g.isDisturbed=_.isDisturbed,g.isErrored=_.isErrored,g.isReadable=_.isReadable,g.isWritable=_.isWritable,g.Readable=yF();for(const v of r(a)){let T=function(...S){if(new.target)throw o();return g.Readable.from(n(A,this,S))};var y=T;const A=a[v];e(T,"name",{__proto__:null,value:A.name}),e(T,"length",{__proto__:null,value:A.length}),e(g.Readable.prototype,v,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const v of r(s)){let T=function(...P){if(new.target)throw o();return n(A,this,P)};var y=T;const A=s[v];e(T,"name",{__proto__:null,value:A.name}),e(T,"length",{__proto__:null,value:A.length}),e(g.Readable.prototype,v,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}g.Writable=ak(),g.Duplex=qu(),g.Transform=XSe,g.PassThrough=YSe,g.pipeline=d;const{addAbortSignal:m}=mF;return g.addAbortSignal=m,g.finished=h,g.destroy=f,g.compose=c,g.setDefaultHighWaterMark=u,g.getDefaultHighWaterMark=l,e(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p}}),e(d,i,{__proto__:null,enumerable:!0,get(){return p.pipeline}}),e(h,i,{__proto__:null,enumerable:!0,get(){return p.finished}}),g.Stream=g,g._isUint8Array=function(A){return A instanceof Uint8Array},g._uint8ArrayToBuffer=function(A){return t.from(A.buffer,A.byteOffset,A.byteLength)},VD.exports}(function(t){const e=ixe(),r=nxe(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(uSe);var Wt=uSe.exports;const sC=Symbol("iter");function WE(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=WE(t[n]||Object.create(null),e[n],r-1);return t}function axe(t,e,r=4){let n=!1;for(const i in t)if(i in e){const a=r===0?null:axe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}function sxe(t,e,r=4){let n=!1;for(const i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:WE({},t[i],r-1);else if(r!==0){const a=sxe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}let rGe=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||mf}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return iE(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(q7(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[ep(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${q7(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:ep(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}},oxe=class $a{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||mf,this._entityIndex=r.entityIndex||new rGe({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const s in n=r[a].subjects)for(const o in i=n[s])e+=Object.keys(i[o]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),s=a[n]||(a[n]={}),o=i in s;return o||(s[i]=null),!o}_removeFromIndex(e,r,n,i){const a=e[r],s=a[n];delete s[i];for(const o in s)return;delete a[n];for(const o in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,s,o,c){let u,l,d;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(const _ in e)if(l=e[_]){p[a]=this._termFromId(f[_]),n&&((u=l,l={})[n]=u[n]);for(const g in l)if(d=l[g]){p[s]=this._termFromId(f[g]);const m=i?i in d?[i]:[]:Object.keys(d);for(let y=0;y<m.length;y++)p[o]=this._termFromId(f[m[y]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,s,o;if((a=e[r])&&(s=a[n]))for(o in s)i(o)}_countInIndex(e,r,n,i){let a=0,s,o,c;r&&((s=e,e={})[r]=s[r]);for(const u in e)if(o=e[u]){n&&((s=o,o={})[n]=s[n]);for(const l in o)(c=o[l])&&(i?i in c&&a++:a+=Object.keys(c).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;const a=this._graphs;let s,o,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(s=a[i])||!(o=s.subjects[e])||!(c=o[r])||!(n in c))return!1;this._removeFromIndex(s.subjects,e,r,n),this._removeFromIndex(s.predicates,r,n,e),this._removeFromIndex(s.objects,n,e,r),this._size!==null&&this._size--;for(e in s.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Wt.Readable({objectMode:!0}),s=this.readQuads(e,r,n,i);return a._read=o=>{for(;--o>=0;){const{done:c,value:u}=s.next();if(c){a.push(null);return}a.push(u)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let s,o,c,u;if(!(e&&!(o=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(const l in a)(s=a[l])&&(o?u?yield*this._findInIndex(s.objects,u,o,c,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,o,c,null,"subject","predicate","object",l):c?yield*this._findInIndex(s.predicates,c,u,null,"predicate","object","subject",l):u?yield*this._findInIndex(s.objects,u,null,null,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",l))}match(e,r,n,i){return new Yf(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let s=0,o,c,u,l;if(e&&!(c=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n)))return 0;for(const d in a)(o=a[d])&&(e?n?s+=this._countInIndex(o.objects,l,c,u):s+=this._countInIndex(o.subjects,c,u,l):r?s+=this._countInIndex(o.predicates,u,l,c):s+=this._countInIndex(o.objects,l,c,u));return s}forEach(e,r,n,i,a){this.some(s=>(e(s,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(s=>!e(s,this),r,n,i,a)}some(e,r,n,i,a){for(const s of this.readQuads(r,n,i,a))if(e(s,this))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.predicates,o,c,e):this._loopByKey1(s.subjects,o,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.objects,c,o,e):this._loopByKey0(s.subjects,o,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.subjects,o,c,e):this._loopByKey1(s.objects,o,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(s=>(e(s.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(o,c)=>{throw new Error(`${o.value} ${c}`)},a=this.getQuads(null,ai.rdf.rest,ai.rdf.nil,null),s=e?[...a]:[];return a.forEach(o=>{const c=[];let u=!1,l,d;const f=o.graph;let h=o.subject;for(;h&&!u;){const p=this.getQuads(null,null,h,null),_=this.getQuads(h,null,null,null);let g,m=null,y=null,v=null;for(let A=0;A<_.length&&!u;A++)g=_[A],g.graph.equals(f)?l?u=i(h,"has non-list arcs out"):g.predicate.value===ai.rdf.first?m?u=i(h,"has multiple rdf:first arcs"):s.push(m=g):g.predicate.value===ai.rdf.rest?y?u=i(h,"has multiple rdf:rest arcs"):s.push(y=g):p.length?u=i(h,"can't be subject and object"):(l=g,d="subject"):u=i(h,"not confined to single graph");for(let A=0;A<p.length&&!u;++A)g=p[A],l?u=i(h,"can't have coreferences"):g.predicate.value===ai.rdf.rest?v?u=i(h,"has incoming rdf:rest arcs"):v=g:(l=g,d="object");m?c.unshift(m.object):u=i(h,"has no list head"),h=v&&v.subject}u?e=!1:l&&(n[l[d].value]=c)}),e&&this.removeQuads(s),n}addAll(e){if(e instanceof Yf&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof $a&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=WE(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e instanceof Yf&&(e=e.filtered),e===this)return!0;if(!(e instanceof $a)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));const r=this._graphs,n=e._graphs;let i,a,s,o,c;for(const u in n){if(!(i=r[u]))return!1;i=i.subjects;for(const l in a=n[u].subjects){if(!(s=i[l]))return!1;for(const d in o=a[l]){if(!(c=s[d]))return!1;for(const f in o[d])if(!(f in c))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){if(e&&e instanceof Yf&&(e=e.filtered),e===this)return new $a({entityIndex:this._entityIndex});if(e instanceof $a&&e._entityIndex===this._entityIndex){const r=new $a({entityIndex:this._entityIndex}),n=sxe(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof Yf&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new $a({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof Yf&&(e=e.filtered),e===this){const r=new $a({entityIndex:this._entityIndex});return r._graphs=WE(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof $a&&this._entityIndex===e._entityIndex){const r=new $a({entityIndex:this._entityIndex}),n=axe(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){const r=new $a({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new YH().quadsToString(this)}union(e){const r=new $a({entityIndex:this._entityIndex});return r._graphs=WE(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function _o(t,e,r=0){const n=e[r];if(n&&!(n in t))return!1;let i=!1;for(const a in n?{[n]:t[n]}:t){const s=r===2?null:_o(t[a],e,r+1);s!==!1&&(i=i||Object.create(null),i[a]=s)}return i}let Yf=class uxe extends Wt.Readable{constructor(e,r,n,i,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,s=this._filtered=new oxe({factory:e._factory,entityIndex:this.options.entityIndex});let o,c,u;if(a&&!(o=s._termToNumericId(a))||i&&!(c=s._termToNumericId(i))||n&&!(u=s._termToNumericId(n)))return s;const l=e._getGraphs(r);for(const d in l){let f,h,p,_;(_=l[d])&&(!o&&c?(h=_o(_.predicates,[c,u,o]))&&(f=_o(_.subjects,[o,c,u]),p=_o(_.objects,[u,o,c])):u?(p=_o(_.objects,[u,o,c]))&&(f=_o(_.subjects,[o,c,u]),h=_o(_.predicates,[c,u,o])):(f=_o(_.subjects,[o,c,u]))&&(h=_o(_.predicates,[c,u,o]),p=_o(_.objects,[u,o,c])),f&&(s._graphs[d]={subjects:f,predicates:h,objects:p}))}s._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[sC]&&(this[sC]=this[Symbol.iterator]());const r=this[sC];for(;--e>=0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new YH().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new uxe(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}};const lk={Parser:aSe,Writer:YH,Store:oxe,DataFactory:mf},{Parser:nGe}=lk;function cxe(t){return t===b9e||t===v9e}function iGe(t,e,r){let n=t;return e&&(n+=`@${e}`),r&&!cxe(r)&&(n+=`^^${r}`),n}const mY=/@prefix\s+(\w+):\s*<([^>]+)>\s*\./g;function aGe(t){const e=new Map;let r;for(mY.lastIndex=0;(r=mY.exec(t))!==null;)e.set(r[1],r[2]);return e}function o_(t){const e=aGe(t);try{return{triples:new nGe({format:"Turtle"}).parse(t).map(a=>{var h;if(!(a.object.termType==="Literal"))return{subject:a.subject.value,predicate:a.predicate.value,object:a.object.value,objectIsLiteral:!1};const o=a.object.value,c=a.object.language,u=(h=a.object.datatype)==null?void 0:h.value,l=iGe(o,c,u),d=!!c,f=!!u&&!cxe(u);return{subject:a.subject.value,predicate:a.predicate.value,object:l,objectIsLiteral:!0,...c&&{objectLiteralLanguage:c},...f&&{objectLiteralDatatype:u},...(d||f)&&{objectLexicalValue:o}}}),prefixes:e,error:null}}catch(r){const n=r instanceof Error?r.message:String(r);return{triples:[],prefixes:e,error:n}}}function vF(t,e){for(const[r,n]of e){if(t===n)return`${r}:`;if(t.startsWith(n)){const i=t.slice(n.length);return`${r}:${i}`}}return t}function oC(t,e){for(const[r,n]of e)if(t===n||t.startsWith(n))return r;try{const r=new URL(t),n=r.hostname.replace(/^www\./,""),a=(r.pathname.replace(/\/$/,"")||"").split("/").filter(Boolean).pop()||"";return a?a.slice(0,12):n?n.slice(0,12):"other"}catch{return"other"}}var sGe={value:()=>{}};function JI(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new c3(r)}function c3(t){this._=t}function oGe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}c3.prototype=JI.prototype={constructor:c3,on:function(t,e){var r=this._,n=oGe(t+"",r),i,a=-1,s=n.length;if(arguments.length<2){for(;++a<s;)if((i=(t=n[a]).type)&&(i=uGe(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=n[a]).type)r[i]=gY(r[i],t.name,e);else if(e==null)for(i in r)r[i]=gY(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new c3(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,i=a.length;n<i;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}};function uGe(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function gY(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=sGe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var $7="http://www.w3.org/1999/xhtml";const yY={svg:"http://www.w3.org/2000/svg",xhtml:$7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function AF(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),yY.hasOwnProperty(e)?{space:yY[e],local:t}:t}function cGe(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===$7&&e.documentElement.namespaceURI===$7?e.createElement(t):e.createElementNS(r,t)}}function lGe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function lxe(t){var e=AF(t);return(e.local?lGe:cGe)(e)}function dGe(){}function dk(t){return t==null?dGe:function(){return this.querySelector(t)}}function fGe(t){typeof t!="function"&&(t=dk(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],s=a.length,o=n[i]=new Array(s),c,u,l=0;l<s;++l)(c=a[l])&&(u=t.call(c,c.__data__,l,a))&&("__data__"in c&&(u.__data__=c.__data__),o[l]=u);return new ja(n,this._parents)}function hGe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function pGe(){return[]}function dxe(t){return t==null?pGe:function(){return this.querySelectorAll(t)}}function _Ge(t){return function(){return hGe(t.apply(this,arguments))}}function mGe(t){typeof t=="function"?t=_Ge(t):t=dxe(t);for(var e=this._groups,r=e.length,n=[],i=[],a=0;a<r;++a)for(var s=e[a],o=s.length,c,u=0;u<o;++u)(c=s[u])&&(n.push(t.call(c,c.__data__,u,s)),i.push(c));return new ja(n,i)}function fxe(t){return function(){return this.matches(t)}}function hxe(t){return function(e){return e.matches(t)}}var gGe=Array.prototype.find;function yGe(t){return function(){return gGe.call(this.children,t)}}function bGe(){return this.firstElementChild}function vGe(t){return this.select(t==null?bGe:yGe(typeof t=="function"?t:hxe(t)))}var AGe=Array.prototype.filter;function TGe(){return Array.from(this.children)}function wGe(t){return function(){return AGe.call(this.children,t)}}function SGe(t){return this.selectAll(t==null?TGe:wGe(typeof t=="function"?t:hxe(t)))}function xGe(t){typeof t!="function"&&(t=fxe(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],s=a.length,o=n[i]=[],c,u=0;u<s;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&o.push(c);return new ja(n,this._parents)}function pxe(t){return new Array(t.length)}function EGe(){return new ja(this._enter||this._groups.map(pxe),this._parents)}function EN(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EN.prototype={constructor:EN,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function IGe(t){return function(){return t}}function OGe(t,e,r,n,i,a){for(var s=0,o,c=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],n[s]=o):r[s]=new EN(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function RGe(t,e,r,n,i,a,s){var o,c,u=new Map,l=e.length,d=a.length,f=new Array(l),h;for(o=0;o<l;++o)(c=e[o])&&(f[o]=h=s.call(c,c.__data__,o,e)+"",u.has(h)?i[o]=c:u.set(h,c));for(o=0;o<d;++o)h=s.call(t,a[o],o,a)+"",(c=u.get(h))?(n[o]=c,c.__data__=a[o],u.delete(h)):r[o]=new EN(t,a[o]);for(o=0;o<l;++o)(c=e[o])&&u.get(f[o])===c&&(i[o]=c)}function PGe(t){return t.__data__}function NGe(t,e){if(!arguments.length)return Array.from(this,PGe);var r=e?RGe:OGe,n=this._parents,i=this._groups;typeof t!="function"&&(t=IGe(t));for(var a=i.length,s=new Array(a),o=new Array(a),c=new Array(a),u=0;u<a;++u){var l=n[u],d=i[u],f=d.length,h=FGe(t.call(l,l&&l.__data__,u,n)),p=h.length,_=o[u]=new Array(p),g=s[u]=new Array(p),m=c[u]=new Array(f);r(l,d,_,g,m,h,e);for(var y=0,v=0,A,T;y<p;++y)if(A=_[y]){for(y>=v&&(v=y+1);!(T=g[v])&&++v<p;);A._next=T||null}}return s=new ja(s,n),s._enter=o,s._exit=c,s}function FGe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function MGe(){return new ja(this._exit||this._groups.map(pxe),this._parents)}function DGe(t,e,r){var n=this.enter(),i=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}function CGe(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,a=n.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var u=r[c],l=n[c],d=u.length,f=o[c]=new Array(d),h,p=0;p<d;++p)(h=u[p]||l[p])&&(f[p]=h);for(;c<i;++c)o[c]=r[c];return new ja(o,this._parents)}function LGe(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,a=n[i],s;--i>=0;)(s=n[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function jGe(t){t||(t=BGe);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var s=r[a],o=s.length,c=i[a]=new Array(o),u,l=0;l<o;++l)(u=s[l])&&(c[l]=u);c.sort(e)}return new ja(i,this._parents).order()}function BGe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function qGe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function UGe(){return Array.from(this)}function VGe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length;i<a;++i){var s=n[i];if(s)return s}return null}function GGe(){let t=0;for(const e of this)++t;return t}function HGe(){return!this.node()}function kGe(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function zGe(t){return function(){this.removeAttribute(t)}}function QGe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function WGe(t,e){return function(){this.setAttribute(t,e)}}function KGe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function XGe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function JGe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function YGe(t,e){var r=AF(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?QGe:zGe:typeof e=="function"?r.local?JGe:XGe:r.local?KGe:WGe)(r,e))}function _xe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $Ge(t){return function(){this.style.removeProperty(t)}}function ZGe(t,e,r){return function(){this.style.setProperty(t,e,r)}}function eHe(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function tHe(t,e,r){return arguments.length>1?this.each((e==null?$Ge:typeof e=="function"?eHe:ZGe)(t,e,r??"")):Ep(this.node(),t)}function Ep(t,e){return t.style.getPropertyValue(e)||_xe(t).getComputedStyle(t,null).getPropertyValue(e)}function rHe(t){return function(){delete this[t]}}function nHe(t,e){return function(){this[t]=e}}function iHe(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function aHe(t,e){return arguments.length>1?this.each((e==null?rHe:typeof e=="function"?iHe:nHe)(t,e)):this.node()[t]}function mxe(t){return t.trim().split(/^|\s+/)}function fk(t){return t.classList||new gxe(t)}function gxe(t){this._node=t,this._names=mxe(t.getAttribute("class")||"")}gxe.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function yxe(t,e){for(var r=fk(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function bxe(t,e){for(var r=fk(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function sHe(t){return function(){yxe(this,t)}}function oHe(t){return function(){bxe(this,t)}}function uHe(t,e){return function(){(e.apply(this,arguments)?yxe:bxe)(this,t)}}function cHe(t,e){var r=mxe(t+"");if(arguments.length<2){for(var n=fk(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?uHe:e?sHe:oHe)(r,e))}function lHe(){this.textContent=""}function dHe(t){return function(){this.textContent=t}}function fHe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function hHe(t){return arguments.length?this.each(t==null?lHe:(typeof t=="function"?fHe:dHe)(t)):this.node().textContent}function pHe(){this.innerHTML=""}function _He(t){return function(){this.innerHTML=t}}function mHe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function gHe(t){return arguments.length?this.each(t==null?pHe:(typeof t=="function"?mHe:_He)(t)):this.node().innerHTML}function yHe(){this.nextSibling&&this.parentNode.appendChild(this)}function bHe(){return this.each(yHe)}function vHe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AHe(){return this.each(vHe)}function THe(t){var e=typeof t=="function"?t:lxe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function wHe(){return null}function SHe(t,e){var r=typeof t=="function"?t:lxe(t),n=e==null?wHe:typeof e=="function"?e:dk(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function xHe(){var t=this.parentNode;t&&t.removeChild(this)}function EHe(){return this.each(xHe)}function IHe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function OHe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function RHe(t){return this.select(t?OHe:IHe)}function PHe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function NHe(t){return function(e){t.call(this,e,this.__data__)}}function FHe(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function MHe(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,i=e.length,a;r<i;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function DHe(t,e,r){return function(){var n=this.__on,i,a=NHe(e);if(n){for(var s=0,o=n.length;s<o;++s)if((i=n[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=e;return}}this.addEventListener(t.type,a,r),i={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(i):this.__on=[i]}}function CHe(t,e,r){var n=FHe(t+""),i,a=n.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,l;c<u;++c)for(i=0,l=o[c];i<a;++i)if((s=n[i]).type===l.type&&s.name===l.name)return l.value}return}for(o=e?DHe:MHe,i=0;i<a;++i)this.each(o(n[i],e,r));return this}function vxe(t,e,r){var n=_xe(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function LHe(t,e){return function(){return vxe(this,t,e)}}function jHe(t,e){return function(){return vxe(this,t,e.apply(this,arguments))}}function BHe(t,e){return this.each((typeof e=="function"?jHe:LHe)(t,e))}function*qHe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length,s;i<a;++i)(s=n[i])&&(yield s)}var Axe=[null];function ja(t,e){this._groups=t,this._parents=e}function YI(){return new ja([[document.documentElement]],Axe)}function UHe(){return this}ja.prototype=YI.prototype={constructor:ja,select:fGe,selectAll:mGe,selectChild:vGe,selectChildren:SGe,filter:xGe,data:NGe,enter:EGe,exit:MGe,join:DGe,merge:CGe,selection:UHe,order:LGe,sort:jGe,call:qGe,nodes:UGe,node:VGe,size:GGe,empty:HGe,each:kGe,attr:YGe,style:tHe,property:aHe,classed:cHe,text:hHe,html:gHe,raise:bHe,lower:AHe,append:THe,insert:SHe,remove:EHe,clone:RHe,datum:PHe,on:CHe,dispatch:BHe,[Symbol.iterator]:qHe};function _n(t){return typeof t=="string"?new ja([[document.querySelector(t)]],[document.documentElement]):new ja([[t]],Axe)}function VHe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Tu(t,e){if(t=VHe(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const GHe={passive:!1},bI={capture:!0,passive:!1};function uC(t){t.stopImmediatePropagation()}function fp(t){t.preventDefault(),t.stopImmediatePropagation()}function Txe(t){var e=t.document.documentElement,r=_n(t).on("dragstart.drag",fp,bI);"onselectstart"in e?r.on("selectstart.drag",fp,bI):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function wxe(t,e){var r=t.document.documentElement,n=_n(t).on("dragstart.drag",null);e&&(n.on("click.drag",fp,bI),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const $2=t=>()=>t;function Z7(t,{sourceEvent:e,subject:r,target:n,identifier:i,active:a,x:s,y:o,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Z7.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function HHe(t){return!t.ctrlKey&&!t.button}function kHe(){return this.parentNode}function zHe(t,e){return e??{x:t.x,y:t.y}}function QHe(){return navigator.maxTouchPoints||"ontouchstart"in this}function WHe(){var t=HHe,e=kHe,r=zHe,n=QHe,i={},a=JI("start","drag","end"),s=0,o,c,u,l,d=0;function f(A){A.on("mousedown.drag",h).filter(n).on("touchstart.drag",g).on("touchmove.drag",m,GHe).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(A,T){if(!(l||!t.call(this,A,T))){var S=v(this,e.call(this,A,T),A,T,"mouse");S&&(_n(A.view).on("mousemove.drag",p,bI).on("mouseup.drag",_,bI),Txe(A.view),uC(A),u=!1,o=A.clientX,c=A.clientY,S("start",A))}}function p(A){if(fp(A),!u){var T=A.clientX-o,S=A.clientY-c;u=T*T+S*S>d}i.mouse("drag",A)}function _(A){_n(A.view).on("mousemove.drag mouseup.drag",null),wxe(A.view,u),fp(A),i.mouse("end",A)}function g(A,T){if(t.call(this,A,T)){var S=A.changedTouches,P=e.call(this,A,T),j=S.length,F,N;for(F=0;F<j;++F)(N=v(this,P,A,T,S[F].identifier,S[F]))&&(uC(A),N("start",A,S[F]))}}function m(A){var T=A.changedTouches,S=T.length,P,j;for(P=0;P<S;++P)(j=i[T[P].identifier])&&(fp(A),j("drag",A,T[P]))}function y(A){var T=A.changedTouches,S=T.length,P,j;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),P=0;P<S;++P)(j=i[T[P].identifier])&&(uC(A),j("end",A,T[P]))}function v(A,T,S,P,j,F){var N=a.copy(),R=Tu(F||S,T),C,M,U;if((U=r.call(A,new Z7("beforestart",{sourceEvent:S,target:f,identifier:j,active:s,x:R[0],y:R[1],dx:0,dy:0,dispatch:N}),P))!=null)return C=U.x-R[0]||0,M=U.y-R[1]||0,function B(G,K,$){var se=R,pe;switch(G){case"start":i[j]=B,pe=s++;break;case"end":delete i[j],--s;case"drag":R=Tu($||K,T),pe=s;break}N.call(G,A,new Z7(G,{sourceEvent:K,subject:U,target:f,identifier:j,active:pe,x:R[0]+C,y:R[1]+M,dx:R[0]-se[0],dy:R[1]-se[1],dispatch:N}),P)}}return f.filter=function(A){return arguments.length?(t=typeof A=="function"?A:$2(!!A),f):t},f.container=function(A){return arguments.length?(e=typeof A=="function"?A:$2(A),f):e},f.subject=function(A){return arguments.length?(r=typeof A=="function"?A:$2(A),f):r},f.touchable=function(A){return arguments.length?(n=typeof A=="function"?A:$2(!!A),f):n},f.on=function(){var A=a.on.apply(a,arguments);return A===a?f:A},f.clickDistance=function(A){return arguments.length?(d=(A=+A)*A,f):Math.sqrt(d)},f}function hk(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Sxe(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function $I(){}var vI=.7,IN=1/vI,hp="\\s*([+-]?\\d+)\\s*",AI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Do="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",KHe=/^#([0-9a-f]{3,8})$/,XHe=new RegExp(`^rgb\\(${hp},${hp},${hp}\\)$`),JHe=new RegExp(`^rgb\\(${Do},${Do},${Do}\\)$`),YHe=new RegExp(`^rgba\\(${hp},${hp},${hp},${AI}\\)$`),$He=new RegExp(`^rgba\\(${Do},${Do},${Do},${AI}\\)$`),ZHe=new RegExp(`^hsl\\(${AI},${Do},${Do}\\)$`),eke=new RegExp(`^hsla\\(${AI},${Do},${Do},${AI}\\)$`),bY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hk($I,Ip,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vY,formatHex:vY,formatHex8:tke,formatHsl:rke,formatRgb:AY,toString:AY});function vY(){return this.rgb().formatHex()}function tke(){return this.rgb().formatHex8()}function rke(){return xxe(this).formatHsl()}function AY(){return this.rgb().formatRgb()}function Ip(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=KHe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?TY(e):r===3?new la(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Z2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Z2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=XHe.exec(t))?new la(e[1],e[2],e[3],1):(e=JHe.exec(t))?new la(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=YHe.exec(t))?Z2(e[1],e[2],e[3],e[4]):(e=$He.exec(t))?Z2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ZHe.exec(t))?xY(e[1],e[2]/100,e[3]/100,1):(e=eke.exec(t))?xY(e[1],e[2]/100,e[3]/100,e[4]):bY.hasOwnProperty(t)?TY(bY[t]):t==="transparent"?new la(NaN,NaN,NaN,0):null}function TY(t){return new la(t>>16&255,t>>8&255,t&255,1)}function Z2(t,e,r,n){return n<=0&&(t=e=r=NaN),new la(t,e,r,n)}function nke(t){return t instanceof $I||(t=Ip(t)),t?(t=t.rgb(),new la(t.r,t.g,t.b,t.opacity)):new la}function eV(t,e,r,n){return arguments.length===1?nke(t):new la(t,e,r,n??1)}function la(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}hk(la,eV,Sxe($I,{brighter(t){return t=t==null?IN:Math.pow(IN,t),new la(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vI:Math.pow(vI,t),new la(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new la(cf(this.r),cf(this.g),cf(this.b),ON(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wY,formatHex:wY,formatHex8:ike,formatRgb:SY,toString:SY}));function wY(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}`}function ike(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}${Wd((isNaN(this.opacity)?1:this.opacity)*255)}`}function SY(){const t=ON(this.opacity);return`${t===1?"rgb(":"rgba("}${cf(this.r)}, ${cf(this.g)}, ${cf(this.b)}${t===1?")":`, ${t})`}`}function ON(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wd(t){return t=cf(t),(t<16?"0":"")+t.toString(16)}function xY(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Us(t,e,r,n)}function xxe(t){if(t instanceof Us)return new Us(t.h,t.s,t.l,t.opacity);if(t instanceof $I||(t=Ip(t)),!t)return new Us;if(t instanceof Us)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-e)/o+2:s=(e-r)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Us(s,o,c,t.opacity)}function ake(t,e,r,n){return arguments.length===1?xxe(t):new Us(t,e,r,n??1)}function Us(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}hk(Us,ake,Sxe($I,{brighter(t){return t=t==null?IN:Math.pow(IN,t),new Us(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vI:Math.pow(vI,t),new Us(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new la(cC(t>=240?t-240:t+120,i,n),cC(t,i,n),cC(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Us(EY(this.h),eR(this.s),eR(this.l),ON(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ON(this.opacity);return`${t===1?"hsl(":"hsla("}${EY(this.h)}, ${eR(this.s)*100}%, ${eR(this.l)*100}%${t===1?")":`, ${t})`}`}}));function EY(t){return t=(t||0)%360,t<0?t+360:t}function eR(t){return Math.max(0,Math.min(1,t||0))}function cC(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Exe=t=>()=>t;function ske(t,e){return function(r){return t+r*e}}function oke(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function uke(t){return(t=+t)==1?Ixe:function(e,r){return r-e?oke(e,r,t):Exe(isNaN(e)?r:e)}}function Ixe(t,e){var r=e-t;return r?ske(t,r):Exe(isNaN(t)?e:t)}const IY=function t(e){var r=uke(e);function n(i,a){var s=r((i=eV(i)).r,(a=eV(a)).r),o=r(i.g,a.g),c=r(i.b,a.b),u=Ixe(i.opacity,a.opacity);return function(l){return i.r=s(l),i.g=o(l),i.b=c(l),i.opacity=u(l),i+""}}return n.gamma=t,n}(1);function Jc(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var tV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lC=new RegExp(tV.source,"g");function cke(t){return function(){return t}}function lke(t){return function(e){return t(e)+""}}function dke(t,e){var r=tV.lastIndex=lC.lastIndex=0,n,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(n=tV.exec(t))&&(i=lC.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Jc(n,i)})),r=lC.lastIndex;return r<e.length&&(a=e.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?lke(c[0].x):cke(e):(e=c.length,function(u){for(var l=0,d;l<e;++l)o[(d=c[l]).i]=d.x(u);return o.join("")})}var OY=180/Math.PI,rV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oxe(t,e,r,n,i,a){var s,o,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*r+e*n)&&(r-=t*c,n-=e*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),t*n<e*r&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*OY,skewX:Math.atan(c)*OY,scaleX:s,scaleY:o}}var tR;function fke(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?rV:Oxe(e.a,e.b,e.c,e.d,e.e,e.f)}function hke(t){return t==null||(tR||(tR=document.createElementNS("http://www.w3.org/2000/svg","g")),tR.setAttribute("transform",t),!(t=tR.transform.baseVal.consolidate()))?rV:(t=t.matrix,Oxe(t.a,t.b,t.c,t.d,t.e,t.f))}function Rxe(t,e,r,n){function i(u){return u.length?u.pop()+" ":""}function a(u,l,d,f,h,p){if(u!==d||l!==f){var _=h.push("translate(",null,e,null,r);p.push({i:_-4,x:Jc(u,d)},{i:_-2,x:Jc(l,f)})}else(d||f)&&h.push("translate("+d+e+f+r)}function s(u,l,d,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,n)-2,x:Jc(u,l)})):l&&d.push(i(d)+"rotate("+l+n)}function o(u,l,d,f){u!==l?f.push({i:d.push(i(d)+"skewX(",null,n)-2,x:Jc(u,l)}):l&&d.push(i(d)+"skewX("+l+n)}function c(u,l,d,f,h,p){if(u!==d||l!==f){var _=h.push(i(h)+"scale(",null,",",null,")");p.push({i:_-4,x:Jc(u,d)},{i:_-2,x:Jc(l,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,l){var d=[],f=[];return u=t(u),l=t(l),a(u.translateX,u.translateY,l.translateX,l.translateY,d,f),s(u.rotate,l.rotate,d,f),o(u.skewX,l.skewX,d,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,f),u=l=null,function(h){for(var p=-1,_=f.length,g;++p<_;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var pke=Rxe(fke,"px, ","px)","deg)"),_ke=Rxe(hke,", ",")",")"),mke=1e-12;function RY(t){return((t=Math.exp(t))+1/t)/2}function gke(t){return((t=Math.exp(t))-1/t)/2}function yke(t){return((t=Math.exp(2*t))-1)/(t+1)}const bke=function t(e,r,n){function i(a,s){var o=a[0],c=a[1],u=a[2],l=s[0],d=s[1],f=s[2],h=l-o,p=d-c,_=h*h+p*p,g,m;if(_<mke)m=Math.log(f/u)/e,g=function(P){return[o+P*h,c+P*p,u*Math.exp(e*P*m)]};else{var y=Math.sqrt(_),v=(f*f-u*u+n*_)/(2*u*r*y),A=(f*f-u*u-n*_)/(2*f*r*y),T=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(A*A+1)-A);m=(S-T)/e,g=function(P){var j=P*m,F=RY(T),N=u/(r*y)*(F*yke(e*j+T)-gke(T));return[o+N*h,c+N*p,u*F/RY(e*j+T)]}}return g.duration=m*1e3*e/Math.SQRT2,g}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,c=o*o;return t(s,o,c)},i}(Math.SQRT2,2,4);var Op=0,oE=0,u_=0,Pxe=1e3,RN,uE,PN=0,gf=0,TF=0,TI=typeof performance=="object"&&performance.now?performance:Date,Nxe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function pk(){return gf||(Nxe(vke),gf=TI.now()+TF)}function vke(){gf=0}function NN(){this._call=this._time=this._next=null}NN.prototype=_k.prototype={constructor:NN,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?pk():+r)+(e==null?0:+e),!this._next&&uE!==this&&(uE?uE._next=this:RN=this,uE=this),this._call=t,this._time=r,nV()},stop:function(){this._call&&(this._call=null,this._time=1/0,nV())}};function _k(t,e,r){var n=new NN;return n.restart(t,e,r),n}function Ake(){pk(),++Op;for(var t=RN,e;t;)(e=gf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Op}function PY(){gf=(PN=TI.now())+TF,Op=oE=0;try{Ake()}finally{Op=0,wke(),gf=0}}function Tke(){var t=TI.now(),e=t-PN;e>Pxe&&(TF-=e,PN=t)}function wke(){for(var t,e=RN,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:RN=r);uE=t,nV(n)}function nV(t){if(!Op){oE&&(oE=clearTimeout(oE));var e=t-gf;e>24?(t<1/0&&(oE=setTimeout(PY,t-TI.now()-TF)),u_&&(u_=clearInterval(u_))):(u_||(PN=TI.now(),u_=setInterval(Tke,Pxe)),Op=1,Nxe(PY))}}function NY(t,e,r){var n=new NN;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var Ske=JI("start","end","cancel","interrupt"),xke=[],Fxe=0,FY=1,iV=2,l3=3,MY=4,aV=5,d3=6;function wF(t,e,r,n,i,a){var s=t.__transition;if(!s)t.__transition={};else if(r in s)return;Eke(t,r,{name:e,index:n,group:i,on:Ske,tween:xke,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Fxe})}function mk(t,e){var r=$s(t,e);if(r.state>Fxe)throw new Error("too late; already scheduled");return r}function zo(t,e){var r=$s(t,e);if(r.state>l3)throw new Error("too late; already running");return r}function $s(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Eke(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=_k(a,0,r.time);function a(u){r.state=FY,r.timer.restart(s,r.delay,r.time),r.delay<=u&&s(u-r.delay)}function s(u){var l,d,f,h;if(r.state!==FY)return c();for(l in n)if(h=n[l],h.name===r.name){if(h.state===l3)return NY(s);h.state===MY?(h.state=d3,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete n[l]):+l<e&&(h.state=d3,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete n[l])}if(NY(function(){r.state===l3&&(r.state=MY,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=iV,r.on.call("start",t,t.__data__,r.index,r.group),r.state===iV){for(r.state=l3,i=new Array(f=r.tween.length),l=0,d=-1;l<f;++l)(h=r.tween[l].value.call(t,t.__data__,r.index,r.group))&&(i[++d]=h);i.length=d+1}}function o(u){for(var l=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=aV,1),d=-1,f=i.length;++d<f;)i[d].call(t,l);r.state===aV&&(r.on.call("end",t,t.__data__,r.index,r.group),c())}function c(){r.state=d3,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function f3(t,e){var r=t.__transition,n,i,a=!0,s;if(r){e=e==null?null:e+"";for(s in r){if((n=r[s]).name!==e){a=!1;continue}i=n.state>iV&&n.state<aV,n.state=d3,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[s]}a&&delete t.__transition}}function Ike(t){return this.each(function(){f3(this,t)})}function Oke(t,e){var r,n;return function(){var i=zo(this,t),a=i.tween;if(a!==r){n=r=a;for(var s=0,o=n.length;s<o;++s)if(n[s].name===e){n=n.slice(),n.splice(s,1);break}}i.tween=n}}function Rke(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=zo(this,t),s=a.tween;if(s!==n){i=(n=s).slice();for(var o={name:e,value:r},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=o;break}c===u&&i.push(o)}a.tween=i}}function Pke(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=$s(this.node(),r).tween,i=0,a=n.length,s;i<a;++i)if((s=n[i]).name===t)return s.value;return null}return this.each((e==null?Oke:Rke)(r,t,e))}function gk(t,e,r){var n=t._id;return t.each(function(){var i=zo(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return $s(i,n).value[e]}}function Mxe(t,e){var r;return(typeof e=="number"?Jc:e instanceof Ip?IY:(r=Ip(e))?(e=r,IY):dke)(t,e)}function Nke(t){return function(){this.removeAttribute(t)}}function Fke(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mke(t,e,r){var n,i=r+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===n?a:a=e(n=s,r)}}function Dke(t,e,r){var n,i=r+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===n?a:a=e(n=s,r)}}function Cke(t,e,r){var n,i,a;return function(){var s,o=r(this),c;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=o+"",s===c?null:s===n&&c===i?a:(i=c,a=e(n=s,o)))}}function Lke(t,e,r){var n,i,a;return function(){var s,o=r(this),c;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=o+"",s===c?null:s===n&&c===i?a:(i=c,a=e(n=s,o)))}}function jke(t,e){var r=AF(t),n=r==="transform"?_ke:Mxe;return this.attrTween(t,typeof e=="function"?(r.local?Lke:Cke)(r,n,gk(this,"attr."+t,e)):e==null?(r.local?Fke:Nke)(r):(r.local?Dke:Mke)(r,n,e))}function Bke(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function qke(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Uke(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&qke(t,a)),r}return i._value=e,i}function Vke(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&Bke(t,a)),r}return i._value=e,i}function Gke(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=AF(t);return this.tween(r,(n.local?Uke:Vke)(n,e))}function Hke(t,e){return function(){mk(this,t).delay=+e.apply(this,arguments)}}function kke(t,e){return e=+e,function(){mk(this,t).delay=e}}function zke(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Hke:kke)(e,t)):$s(this.node(),e).delay}function Qke(t,e){return function(){zo(this,t).duration=+e.apply(this,arguments)}}function Wke(t,e){return e=+e,function(){zo(this,t).duration=e}}function Kke(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qke:Wke)(e,t)):$s(this.node(),e).duration}function Xke(t,e){if(typeof e!="function")throw new Error;return function(){zo(this,t).ease=e}}function Jke(t){var e=this._id;return arguments.length?this.each(Xke(e,t)):$s(this.node(),e).ease}function Yke(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;zo(this,t).ease=r}}function $ke(t){if(typeof t!="function")throw new Error;return this.each(Yke(this._id,t))}function Zke(t){typeof t!="function"&&(t=fxe(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],s=a.length,o=n[i]=[],c,u=0;u<s;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&o.push(c);return new Vu(n,this._parents,this._name,this._id)}function eze(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,a=Math.min(n,i),s=new Array(n),o=0;o<a;++o)for(var c=e[o],u=r[o],l=c.length,d=s[o]=new Array(l),f,h=0;h<l;++h)(f=c[h]||u[h])&&(d[h]=f);for(;o<n;++o)s[o]=e[o];return new Vu(s,this._parents,this._name,this._id)}function tze(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function rze(t,e,r){var n,i,a=tze(e)?mk:zo;return function(){var s=a(this,t),o=s.on;o!==n&&(i=(n=o).copy()).on(e,r),s.on=i}}function nze(t,e){var r=this._id;return arguments.length<2?$s(this.node(),r).on.on(t):this.each(rze(r,t,e))}function ize(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function aze(){return this.on("end.remove",ize(this._id))}function sze(t){var e=this._name,r=this._id;typeof t!="function"&&(t=dk(t));for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s)for(var o=n[s],c=o.length,u=a[s]=new Array(c),l,d,f=0;f<c;++f)(l=o[f])&&(d=t.call(l,l.__data__,f,o))&&("__data__"in l&&(d.__data__=l.__data__),u[f]=d,wF(u[f],e,r,f,u,$s(l,r)));return new Vu(a,this._parents,e,r)}function oze(t){var e=this._name,r=this._id;typeof t!="function"&&(t=dxe(t));for(var n=this._groups,i=n.length,a=[],s=[],o=0;o<i;++o)for(var c=n[o],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var f=t.call(l,l.__data__,d,c),h,p=$s(l,r),_=0,g=f.length;_<g;++_)(h=f[_])&&wF(h,e,r,_,f,p);a.push(f),s.push(l)}return new Vu(a,s,e,r)}var uze=YI.prototype.constructor;function cze(){return new uze(this._groups,this._parents)}function lze(t,e){var r,n,i;return function(){var a=Ep(this,t),s=(this.style.removeProperty(t),Ep(this,t));return a===s?null:a===r&&s===n?i:i=e(r=a,n=s)}}function Dxe(t){return function(){this.style.removeProperty(t)}}function dze(t,e,r){var n,i=r+"",a;return function(){var s=Ep(this,t);return s===i?null:s===n?a:a=e(n=s,r)}}function fze(t,e,r){var n,i,a;return function(){var s=Ep(this,t),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(t),Ep(this,t))),s===c?null:s===n&&c===i?a:(i=c,a=e(n=s,o))}}function hze(t,e){var r,n,i,a="style."+e,s="end."+a,o;return function(){var c=zo(this,t),u=c.on,l=c.value[a]==null?o||(o=Dxe(e)):void 0;(u!==r||i!==l)&&(n=(r=u).copy()).on(s,i=l),c.on=n}}function pze(t,e,r){var n=(t+="")=="transform"?pke:Mxe;return e==null?this.styleTween(t,lze(t,n)).on("end.style."+t,Dxe(t)):typeof e=="function"?this.styleTween(t,fze(t,n,gk(this,"style."+t,e))).each(hze(this._id,t)):this.styleTween(t,dze(t,n,e),r).on("end.style."+t,null)}function _ze(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function mze(t,e,r){var n,i;function a(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&_ze(t,s,r)),n}return a._value=e,a}function gze(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,mze(t,e,r??""))}function yze(t){return function(){this.textContent=t}}function bze(t){return function(){var e=t(this);this.textContent=e??""}}function vze(t){return this.tween("text",typeof t=="function"?bze(gk(this,"text",t)):yze(t==null?"":t+""))}function Aze(t){return function(e){this.textContent=t.call(this,e)}}function Tze(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&Aze(i)),e}return n._value=t,n}function wze(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Tze(t))}function Sze(){for(var t=this._name,e=this._id,r=Cxe(),n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,c,u=0;u<o;++u)if(c=s[u]){var l=$s(c,e);wF(c,t,r,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Vu(n,this._parents,t,r)}function xze(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(a,s){var o={value:s},c={value:function(){--i===0&&a()}};r.each(function(){var u=zo(this,n),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),u.on=e}),i===0&&a()})}var Eze=0;function Vu(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Cxe(){return++Eze}var au=YI.prototype;Vu.prototype={constructor:Vu,select:sze,selectAll:oze,selectChild:au.selectChild,selectChildren:au.selectChildren,filter:Zke,merge:eze,selection:cze,transition:Sze,call:au.call,nodes:au.nodes,node:au.node,size:au.size,empty:au.empty,each:au.each,on:nze,attr:jke,attrTween:Gke,style:pze,styleTween:gze,text:vze,textTween:wze,remove:aze,tween:Pke,delay:zke,duration:Kke,ease:Jke,easeVarying:$ke,end:xze,[Symbol.iterator]:au[Symbol.iterator]};function Ize(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Oze={time:null,delay:0,duration:250,ease:Ize};function Rze(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Pze(t){var e,r;t instanceof Vu?(e=t._id,t=t._name):(e=Cxe(),(r=Oze).time=pk(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var s=n[a],o=s.length,c,u=0;u<o;++u)(c=s[u])&&wF(c,t,e,u,s,r||Rze(c,e));return new Vu(n,this._parents,t,e)}YI.prototype.interrupt=Ike;YI.prototype.transition=Pze;function DY(t,e){var r,n=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,s=r.length,o,c=0,u=0;for(a=0;a<s;++a)o=r[a],c+=o.x,u+=o.y;for(c=(c/s-t)*n,u=(u/s-e)*n,a=0;a<s;++a)o=r[a],o.x-=c,o.y-=u}return i.initialize=function(a){r=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function Nze(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return Lxe(this.cover(e,r),e,r,t)}function Lxe(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,a=t._root,s={data:n},o=t._x0,c=t._y0,u=t._x1,l=t._y1,d,f,h,p,_,g,m,y;if(!a)return t._root=s,t;for(;a.length;)if((_=e>=(d=(o+u)/2))?o=d:u=d,(g=r>=(f=(c+l)/2))?c=f:l=f,i=a,!(a=a[m=g<<1|_]))return i[m]=s,t;if(h=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===h&&r===p)return s.next=a,i?i[m]=s:t._root=s,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(_=e>=(d=(o+u)/2))?o=d:u=d,(g=r>=(f=(c+l)/2))?c=f:l=f;while((m=g<<1|_)===(y=(p>=f)<<1|h>=d));return i[y]=a,i[m]=s,t}function Fze(t){var e,r,n=t.length,i,a,s=new Array(n),o=new Array(n),c=1/0,u=1/0,l=-1/0,d=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(s[r]=i,o[r]=a,i<c&&(c=i),i>l&&(l=i),a<u&&(u=a),a>d&&(d=a));if(c>l||u>d)return this;for(this.cover(c,u).cover(l,d),r=0;r<n;++r)Lxe(this,s[r],o[r],t[r]);return this}function Mze(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var s=i-r||1,o=this._root,c,u;r>t||t>=i||n>e||e>=a;)switch(u=(e<n)<<1|t<r,c=new Array(4),c[u]=o,o=c,s*=2,u){case 0:i=r+s,a=n+s;break;case 1:r=i-s,a=n+s;break;case 2:i=r+s,n=a-s;break;case 3:r=i-s,n=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=r,this._y0=n,this._x1=i,this._y1=a,this}function Dze(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Cze(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Gi(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function Lze(t,e,r){var n,i=this._x0,a=this._y0,s,o,c,u,l=this._x1,d=this._y1,f=[],h=this._root,p,_;for(h&&f.push(new Gi(h,i,a,l,d)),r==null?r=1/0:(i=t-r,a=e-r,l=t+r,d=e+r,r*=r);p=f.pop();)if(!(!(h=p.node)||(s=p.x0)>l||(o=p.y0)>d||(c=p.x1)<i||(u=p.y1)<a))if(h.length){var g=(s+c)/2,m=(o+u)/2;f.push(new Gi(h[3],g,m,c,u),new Gi(h[2],s,m,g,u),new Gi(h[1],g,o,c,m),new Gi(h[0],s,o,g,m)),(_=(e>=m)<<1|t>=g)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-_],f[f.length-1-_]=p)}else{var y=t-+this._x.call(null,h.data),v=e-+this._y.call(null,h.data),A=y*y+v*v;if(A<r){var T=Math.sqrt(r=A);i=t-T,a=e-T,l=t+T,d=e+T,n=h.data}}return n}function jze(t){if(isNaN(l=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,r=this._root,n,i,a,s=this._x0,o=this._y0,c=this._x1,u=this._y1,l,d,f,h,p,_,g,m;if(!r)return this;if(r.length)for(;;){if((p=l>=(f=(s+c)/2))?s=f:c=f,(_=d>=(h=(o+u)/2))?o=h:u=h,e=r,!(r=r[g=_<<1|p]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[m]=r:this._root=r),this):(this._root=a,this)}function Bze(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function qze(){return this._root}function Uze(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Vze(t){var e=[],r,n=this._root,i,a,s,o,c;for(n&&e.push(new Gi(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,a=r.x0,s=r.y0,o=r.x1,c=r.y1)&&n.length){var u=(a+o)/2,l=(s+c)/2;(i=n[3])&&e.push(new Gi(i,u,l,o,c)),(i=n[2])&&e.push(new Gi(i,a,l,u,c)),(i=n[1])&&e.push(new Gi(i,u,s,o,l)),(i=n[0])&&e.push(new Gi(i,a,s,u,l))}return this}function Gze(t){var e=[],r=[],n;for(this._root&&e.push(new Gi(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,s=n.x0,o=n.y0,c=n.x1,u=n.y1,l=(s+c)/2,d=(o+u)/2;(a=i[0])&&e.push(new Gi(a,s,o,l,d)),(a=i[1])&&e.push(new Gi(a,l,o,c,d)),(a=i[2])&&e.push(new Gi(a,s,d,l,u)),(a=i[3])&&e.push(new Gi(a,l,d,c,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function Hze(t){return t[0]}function kze(t){return arguments.length?(this._x=t,this):this._x}function zze(t){return t[1]}function Qze(t){return arguments.length?(this._y=t,this):this._y}function yk(t,e,r){var n=new bk(e??Hze,r??zze,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function bk(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function CY(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var Ji=yk.prototype=bk.prototype;Ji.copy=function(){var t=new bk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=CY(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=CY(n));return t};Ji.add=Nze;Ji.addAll=Fze;Ji.cover=Mze;Ji.data=Dze;Ji.extent=Cze;Ji.find=Lze;Ji.remove=jze;Ji.removeAll=Bze;Ji.root=qze;Ji.size=Uze;Ji.visit=Vze;Ji.visitAfter=Gze;Ji.x=kze;Ji.y=Qze;function lf(t){return function(){return t}}function al(t){return(t()-.5)*1e-6}function Wze(t){return t.x+t.vx}function Kze(t){return t.y+t.vy}function Xze(t){var e,r,n,i=1,a=1;typeof t!="function"&&(t=lf(t==null?1:+t));function s(){for(var u,l=e.length,d,f,h,p,_,g,m=0;m<a;++m)for(d=yk(e,Wze,Kze).visitAfter(o),u=0;u<l;++u)f=e[u],_=r[f.index],g=_*_,h=f.x+f.vx,p=f.y+f.vy,d.visit(y);function y(v,A,T,S,P){var j=v.data,F=v.r,N=_+F;if(j){if(j.index>f.index){var R=h-j.x-j.vx,C=p-j.y-j.vy,M=R*R+C*C;M<N*N&&(R===0&&(R=al(n),M+=R*R),C===0&&(C=al(n),M+=C*C),M=(N-(M=Math.sqrt(M)))/M*i,f.vx+=(R*=M)*(N=(F*=F)/(g+F)),f.vy+=(C*=M)*N,j.vx-=R*(N=1-N),j.vy-=C*N)}return}return A>h+N||S<h-N||T>p+N||P<p-N}}function o(u){if(u.data)return u.r=r[u.data.index];for(var l=u.r=0;l<4;++l)u[l]&&u[l].r>u.r&&(u.r=u[l].r)}function c(){if(e){var u,l=e.length,d;for(r=new Array(l),u=0;u<l;++u)d=e[u],r[d.index]=+t(d,u,e)}}return s.initialize=function(u,l){e=u,n=l,c()},s.iterations=function(u){return arguments.length?(a=+u,s):a},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:lf(+u),c(),s):t},s}function Jze(t){return t.index}function LY(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function Yze(t){var e=Jze,r=d,n,i=lf(30),a,s,o,c,u,l=1;t==null&&(t=[]);function d(g){return 1/Math.min(o[g.source.index],o[g.target.index])}function f(g){for(var m=0,y=t.length;m<l;++m)for(var v=0,A,T,S,P,j,F,N;v<y;++v)A=t[v],T=A.source,S=A.target,P=S.x+S.vx-T.x-T.vx||al(u),j=S.y+S.vy-T.y-T.vy||al(u),F=Math.sqrt(P*P+j*j),F=(F-a[v])/F*g*n[v],P*=F,j*=F,S.vx-=P*(N=c[v]),S.vy-=j*N,T.vx+=P*(N=1-N),T.vy+=j*N}function h(){if(s){var g,m=s.length,y=t.length,v=new Map(s.map((T,S)=>[e(T,S,s),T])),A;for(g=0,o=new Array(m);g<y;++g)A=t[g],A.index=g,typeof A.source!="object"&&(A.source=LY(v,A.source)),typeof A.target!="object"&&(A.target=LY(v,A.target)),o[A.source.index]=(o[A.source.index]||0)+1,o[A.target.index]=(o[A.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)A=t[g],c[g]=o[A.source.index]/(o[A.source.index]+o[A.target.index]);n=new Array(y),p(),a=new Array(y),_()}}function p(){if(s)for(var g=0,m=t.length;g<m;++g)n[g]=+r(t[g],g,t)}function _(){if(s)for(var g=0,m=t.length;g<m;++g)a[g]=+i(t[g],g,t)}return f.initialize=function(g,m){s=g,u=m,h()},f.links=function(g){return arguments.length?(t=g,h(),f):t},f.id=function(g){return arguments.length?(e=g,f):e},f.iterations=function(g){return arguments.length?(l=+g,f):l},f.strength=function(g){return arguments.length?(r=typeof g=="function"?g:lf(+g),p(),f):r},f.distance=function(g){return arguments.length?(i=typeof g=="function"?g:lf(+g),_(),f):i},f}const $ze=1664525,Zze=1013904223,jY=4294967296;function eQe(){let t=1;return()=>(t=($ze*t+Zze)%jY)/jY}function tQe(t){return t.x}function rQe(t){return t.y}var nQe=10,iQe=Math.PI*(3-Math.sqrt(5));function aQe(t){var e,r=1,n=.001,i=1-Math.pow(n,1/300),a=0,s=.6,o=new Map,c=_k(d),u=JI("tick","end"),l=eQe();t==null&&(t=[]);function d(){f(),u.call("tick",e),r<n&&(c.stop(),u.call("end",e))}function f(_){var g,m=t.length,y;_===void 0&&(_=1);for(var v=0;v<_;++v)for(r+=(a-r)*i,o.forEach(function(A){A(r)}),g=0;g<m;++g)y=t[g],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return e}function h(){for(var _=0,g=t.length,m;_<g;++_){if(m=t[_],m.index=_,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=nQe*Math.sqrt(.5+_),v=_*iQe;m.x=y*Math.cos(v),m.y=y*Math.sin(v)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(_){return _.initialize&&_.initialize(t,l),_}return h(),e={tick:f,restart:function(){return c.restart(d),e},stop:function(){return c.stop(),e},nodes:function(_){return arguments.length?(t=_,h(),o.forEach(p),e):t},alpha:function(_){return arguments.length?(r=+_,e):r},alphaMin:function(_){return arguments.length?(n=+_,e):n},alphaDecay:function(_){return arguments.length?(i=+_,e):+i},alphaTarget:function(_){return arguments.length?(a=+_,e):a},velocityDecay:function(_){return arguments.length?(s=1-_,e):1-s},randomSource:function(_){return arguments.length?(l=_,o.forEach(p),e):l},force:function(_,g){return arguments.length>1?(g==null?o.delete(_):o.set(_,p(g)),e):o.get(_)},find:function(_,g,m){var y=0,v=t.length,A,T,S,P,j;for(m==null?m=1/0:m*=m,y=0;y<v;++y)P=t[y],A=_-P.x,T=g-P.y,S=A*A+T*T,S<m&&(j=P,m=S);return j},on:function(_,g){return arguments.length>1?(u.on(_,g),e):u.on(_)}}}function sQe(){var t,e,r,n,i=lf(-30),a,s=1,o=1/0,c=.81;function u(h){var p,_=t.length,g=yk(t,tQe,rQe).visitAfter(d);for(n=h,p=0;p<_;++p)e=t[p],g.visit(f)}function l(){if(t){var h,p=t.length,_;for(a=new Array(p),h=0;h<p;++h)_=t[h],a[_.index]=+i(_,h,t)}}function d(h){var p=0,_,g,m=0,y,v,A;if(h.length){for(y=v=A=0;A<4;++A)(_=h[A])&&(g=Math.abs(_.value))&&(p+=_.value,m+=g,y+=g*_.x,v+=g*_.y);h.x=y/m,h.y=v/m}else{_=h,_.x=_.data.x,_.y=_.data.y;do p+=a[_.data.index];while(_=_.next)}h.value=p}function f(h,p,_,g){if(!h.value)return!0;var m=h.x-e.x,y=h.y-e.y,v=g-p,A=m*m+y*y;if(v*v/c<A)return A<o&&(m===0&&(m=al(r),A+=m*m),y===0&&(y=al(r),A+=y*y),A<s&&(A=Math.sqrt(s*A)),e.vx+=m*h.value*n/A,e.vy+=y*h.value*n/A),!0;if(h.length||A>=o)return;(h.data!==e||h.next)&&(m===0&&(m=al(r),A+=m*m),y===0&&(y=al(r),A+=y*y),A<s&&(A=Math.sqrt(s*A)));do h.data!==e&&(v=a[h.data.index]*n/A,e.vx+=m*v,e.vy+=y*v);while(h=h.next)}return u.initialize=function(h,p){t=h,r=p,l()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:lf(+h),l(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.theta=function(h){return arguments.length?(c=h*h,u):Math.sqrt(c)},u}function oQe(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function uQe(){return this.eachAfter(oQe)}function cQe(t,e){let r=-1;for(const n of this)t.call(e,n,++r,this);return this}function lQe(t,e){for(var r=this,n=[r],i,a,s=-1;r=n.pop();)if(t.call(e,r,++s,this),i=r.children)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}function dQe(t,e){for(var r=this,n=[r],i=[],a,s,o,c=-1;r=n.pop();)if(i.push(r),a=r.children)for(s=0,o=a.length;s<o;++s)n.push(a[s]);for(;r=i.pop();)t.call(e,r,++c,this);return this}function fQe(t,e){let r=-1;for(const n of this)if(t.call(e,n,++r,this))return n}function hQe(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,i=n&&n.length;--i>=0;)r+=n[i].value;e.value=r})}function pQe(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function _Qe(t){for(var e=this,r=mQe(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var i=n.length;t!==r;)n.splice(i,0,t),t=t.parent;return n}function mQe(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),i=null;for(t=r.pop(),e=n.pop();t===e;)i=t,t=r.pop(),e=n.pop();return i}function gQe(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function yQe(){return Array.from(this)}function bQe(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function vQe(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*AQe(){var t=this,e,r=[t],n,i,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(i=0,a=n.length;i<a;++i)r.push(n[i]);while(r.length)}function SF(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=SQe)):e===void 0&&(e=wQe);for(var r=new wI(t),n,i=[r],a,s,o,c;n=i.pop();)if((s=e(n.data))&&(c=(s=Array.from(s)).length))for(n.children=s,o=c-1;o>=0;--o)i.push(a=s[o]=new wI(s[o])),a.parent=n,a.depth=n.depth+1;return r.eachBefore(EQe)}function TQe(){return SF(this).eachBefore(xQe)}function wQe(t){return t.children}function SQe(t){return Array.isArray(t)?t[1]:null}function xQe(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function EQe(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function wI(t){this.data=t,this.depth=this.height=0,this.parent=null}wI.prototype=SF.prototype={constructor:wI,count:uQe,each:cQe,eachAfter:dQe,eachBefore:lQe,find:fQe,sum:hQe,sort:pQe,path:_Qe,ancestors:gQe,descendants:yQe,leaves:bQe,links:vQe,copy:TQe,[Symbol.iterator]:AQe};function IQe(t,e){return t.parent===e.parent?1:2}function dC(t){var e=t.children;return e?e[0]:t.t}function fC(t){var e=t.children;return e?e[e.length-1]:t.t}function OQe(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function RQe(t){for(var e=0,r=0,n=t.children,i=n.length,a;--i>=0;)a=n[i],a.z+=e,a.m+=e,e+=a.s+(r+=a.c)}function PQe(t,e,r){return t.a.parent===e.parent?t.a:r}function h3(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}h3.prototype=Object.create(wI.prototype);function NQe(t){for(var e=new h3(t,0),r,n=[e],i,a,s,o;r=n.pop();)if(a=r._.children)for(r.children=new Array(o=a.length),s=o-1;s>=0;--s)n.push(i=r.children[s]=new h3(a[s],s)),i.parent=r;return(e.parent=new h3(null,0)).children=[e],e}function jxe(){var t=IQe,e=1,r=1,n=null;function i(u){var l=NQe(u);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(s),n)u.eachBefore(c);else{var d=u,f=u,h=u;u.eachBefore(function(y){y.x<d.x&&(d=y),y.x>f.x&&(f=y),y.depth>h.depth&&(h=y)});var p=d===f?1:t(d,f)/2,_=p-d.x,g=e/(f.x+p+_),m=r/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+_)*g,y.y=y.depth*m})}return u}function a(u){var l=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(l){RQe(u);var h=(l[0].z+l[l.length-1].z)/2;f?(u.z=f.z+t(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+t(u._,f._));u.parent.A=o(u,f,u.parent.A||d[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function o(u,l,d){if(l){for(var f=u,h=u,p=l,_=f.parent.children[0],g=f.m,m=h.m,y=p.m,v=_.m,A;p=fC(p),f=dC(f),p&&f;)_=dC(_),h=fC(h),h.a=u,A=p.z+y-f.z-g+t(p._,f._),A>0&&(OQe(PQe(p,u,d),u,A),g+=A,m+=A),y+=p.m,g+=f.m,v+=_.m,m+=h.m;p&&!fC(h)&&(h.t=p,h.m+=y-m),f&&!dC(_)&&(_.t=f,_.m+=g-v,d=u)}return d}function c(u){u.x*=e,u.y=u.depth*r}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(n=!1,e=+u[0],r=+u[1],i):n?null:[e,r]},i.nodeSize=function(u){return arguments.length?(n=!0,e=+u[0],r=+u[1],i):n?[e,r]:null},i}const rR=t=>()=>t;function FQe(t,{sourceEvent:e,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function Ou(t,e,r){this.k=t,this.x=e,this.y=r}Ou.prototype={constructor:Ou,scale:function(t){return t===1?this:new Ou(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ou(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var FN=new Ou(1,0,0);Ou.prototype;function hC(t){t.stopImmediatePropagation()}function c_(t){t.preventDefault(),t.stopImmediatePropagation()}function MQe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function DQe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function BY(){return this.__zoom||FN}function CQe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function LQe(){return navigator.maxTouchPoints||"ontouchstart"in this}function jQe(t,e,r){var n=t.invertX(e[0][0])-r[0][0],i=t.invertX(e[1][0])-r[1][0],a=t.invertY(e[0][1])-r[0][1],s=t.invertY(e[1][1])-r[1][1];return t.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function BQe(){var t=MQe,e=DQe,r=jQe,n=CQe,i=LQe,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,c=bke,u=JI("start","zoom","end"),l,d,f,h=500,p=150,_=0,g=10;function m(U){U.property("__zoom",BY).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",N).filter(i).on("touchstart.zoom",R).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(U,B,G,K){var $=U.selection?U.selection():U;$.property("__zoom",BY),U!==$?T(U,B,G,K):$.interrupt().each(function(){S(this,arguments).event(K).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},m.scaleBy=function(U,B,G,K){m.scaleTo(U,function(){var $=this.__zoom.k,se=typeof B=="function"?B.apply(this,arguments):B;return $*se},G,K)},m.scaleTo=function(U,B,G,K){m.transform(U,function(){var $=e.apply(this,arguments),se=this.__zoom,pe=G==null?A($):typeof G=="function"?G.apply(this,arguments):G,we=se.invert(pe),Ce=typeof B=="function"?B.apply(this,arguments):B;return r(v(y(se,Ce),pe,we),$,s)},G,K)},m.translateBy=function(U,B,G,K){m.transform(U,function(){return r(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof G=="function"?G.apply(this,arguments):G),e.apply(this,arguments),s)},null,K)},m.translateTo=function(U,B,G,K,$){m.transform(U,function(){var se=e.apply(this,arguments),pe=this.__zoom,we=K==null?A(se):typeof K=="function"?K.apply(this,arguments):K;return r(FN.translate(we[0],we[1]).scale(pe.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof G=="function"?-G.apply(this,arguments):-G),se,s)},K,$)};function y(U,B){return B=Math.max(a[0],Math.min(a[1],B)),B===U.k?U:new Ou(B,U.x,U.y)}function v(U,B,G){var K=B[0]-G[0]*U.k,$=B[1]-G[1]*U.k;return K===U.x&&$===U.y?U:new Ou(U.k,K,$)}function A(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function T(U,B,G,K){U.on("start.zoom",function(){S(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(K).end()}).tween("zoom",function(){var $=this,se=arguments,pe=S($,se).event(K),we=e.apply($,se),Ce=G==null?A(we):typeof G=="function"?G.apply($,se):G,Le=Math.max(we[1][0]-we[0][0],we[1][1]-we[0][1]),Ie=$.__zoom,Oe=typeof B=="function"?B.apply($,se):B,ye=c(Ie.invert(Ce).concat(Le/Ie.k),Oe.invert(Ce).concat(Le/Oe.k));return function(Me){if(Me===1)Me=Oe;else{var W=ye(Me),ft=Le/W[2];Me=new Ou(ft,Ce[0]-W[0]*ft,Ce[1]-W[1]*ft)}pe.zoom(null,Me)}})}function S(U,B,G){return!G&&U.__zooming||new P(U,B)}function P(U,B){this.that=U,this.args=B,this.active=0,this.sourceEvent=null,this.extent=e.apply(U,B),this.taps=0}P.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,B){return this.mouse&&U!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var B=_n(this.that).datum();u.call(U,this.that,new FQe(U,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),B)}};function j(U,...B){if(!t.apply(this,arguments))return;var G=S(this,B).event(U),K=this.__zoom,$=Math.max(a[0],Math.min(a[1],K.k*Math.pow(2,n.apply(this,arguments)))),se=Tu(U);if(G.wheel)(G.mouse[0][0]!==se[0]||G.mouse[0][1]!==se[1])&&(G.mouse[1]=K.invert(G.mouse[0]=se)),clearTimeout(G.wheel);else{if(K.k===$)return;G.mouse=[se,K.invert(se)],f3(this),G.start()}c_(U),G.wheel=setTimeout(pe,p),G.zoom("mouse",r(v(y(K,$),G.mouse[0],G.mouse[1]),G.extent,s));function pe(){G.wheel=null,G.end()}}function F(U,...B){if(f||!t.apply(this,arguments))return;var G=U.currentTarget,K=S(this,B,!0).event(U),$=_n(U.view).on("mousemove.zoom",Ce,!0).on("mouseup.zoom",Le,!0),se=Tu(U,G),pe=U.clientX,we=U.clientY;Txe(U.view),hC(U),K.mouse=[se,this.__zoom.invert(se)],f3(this),K.start();function Ce(Ie){if(c_(Ie),!K.moved){var Oe=Ie.clientX-pe,ye=Ie.clientY-we;K.moved=Oe*Oe+ye*ye>_}K.event(Ie).zoom("mouse",r(v(K.that.__zoom,K.mouse[0]=Tu(Ie,G),K.mouse[1]),K.extent,s))}function Le(Ie){$.on("mousemove.zoom mouseup.zoom",null),wxe(Ie.view,K.moved),c_(Ie),K.event(Ie).end()}}function N(U,...B){if(t.apply(this,arguments)){var G=this.__zoom,K=Tu(U.changedTouches?U.changedTouches[0]:U,this),$=G.invert(K),se=G.k*(U.shiftKey?.5:2),pe=r(v(y(G,se),K,$),e.apply(this,B),s);c_(U),o>0?_n(this).transition().duration(o).call(T,pe,K,U):_n(this).call(m.transform,pe,K,U)}}function R(U,...B){if(t.apply(this,arguments)){var G=U.touches,K=G.length,$=S(this,B,U.changedTouches.length===K).event(U),se,pe,we,Ce;for(hC(U),pe=0;pe<K;++pe)we=G[pe],Ce=Tu(we,this),Ce=[Ce,this.__zoom.invert(Ce),we.identifier],$.touch0?!$.touch1&&$.touch0[2]!==Ce[2]&&($.touch1=Ce,$.taps=0):($.touch0=Ce,se=!0,$.taps=1+!!l);l&&(l=clearTimeout(l)),se&&($.taps<2&&(d=Ce[0],l=setTimeout(function(){l=null},h)),f3(this),$.start())}}function C(U,...B){if(this.__zooming){var G=S(this,B).event(U),K=U.changedTouches,$=K.length,se,pe,we,Ce;for(c_(U),se=0;se<$;++se)pe=K[se],we=Tu(pe,this),G.touch0&&G.touch0[2]===pe.identifier?G.touch0[0]=we:G.touch1&&G.touch1[2]===pe.identifier&&(G.touch1[0]=we);if(pe=G.that.__zoom,G.touch1){var Le=G.touch0[0],Ie=G.touch0[1],Oe=G.touch1[0],ye=G.touch1[1],Me=(Me=Oe[0]-Le[0])*Me+(Me=Oe[1]-Le[1])*Me,W=(W=ye[0]-Ie[0])*W+(W=ye[1]-Ie[1])*W;pe=y(pe,Math.sqrt(Me/W)),we=[(Le[0]+Oe[0])/2,(Le[1]+Oe[1])/2],Ce=[(Ie[0]+ye[0])/2,(Ie[1]+ye[1])/2]}else if(G.touch0)we=G.touch0[0],Ce=G.touch0[1];else return;G.zoom("touch",r(v(pe,we,Ce),G.extent,s))}}function M(U,...B){if(this.__zooming){var G=S(this,B).event(U),K=U.changedTouches,$=K.length,se,pe;for(hC(U),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),se=0;se<$;++se)pe=K[se],G.touch0&&G.touch0[2]===pe.identifier?delete G.touch0:G.touch1&&G.touch1[2]===pe.identifier&&delete G.touch1;if(G.touch1&&!G.touch0&&(G.touch0=G.touch1,delete G.touch1),G.touch0)G.touch0[1]=this.__zoom.invert(G.touch0[0]);else if(G.end(),G.taps===2&&(pe=Tu(pe,this),Math.hypot(d[0]-pe[0],d[1]-pe[1])<g)){var we=_n(this).on("dblclick.zoom");we&&we.apply(this,arguments)}}}return m.wheelDelta=function(U){return arguments.length?(n=typeof U=="function"?U:rR(+U),m):n},m.filter=function(U){return arguments.length?(t=typeof U=="function"?U:rR(!!U),m):t},m.touchable=function(U){return arguments.length?(i=typeof U=="function"?U:rR(!!U),m):i},m.extent=function(U){return arguments.length?(e=typeof U=="function"?U:rR([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),m):e},m.scaleExtent=function(U){return arguments.length?(a[0]=+U[0],a[1]=+U[1],m):[a[0],a[1]]},m.translateExtent=function(U){return arguments.length?(s[0][0]=+U[0][0],s[1][0]=+U[1][0],s[0][1]=+U[0][1],s[1][1]=+U[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(U){return arguments.length?(r=U,m):r},m.duration=function(U){return arguments.length?(o=+U,m):o},m.interpolate=function(U){return arguments.length?(c=U,m):c},m.on=function(){var U=u.on.apply(u,arguments);return U===u?m:U},m.clickDistance=function(U){return arguments.length?(_=(U=+U)*U,m):Math.sqrt(_)},m.tapDistance=function(U){return arguments.length?(g=+U,m):g},m}function pC(t,e,r){return r?t.length>24?t.slice(0,21)+"":t:vF(t,e)}function qQe(t,e,r){const n=[];if(t&&n.push(` @${t}`),e){const i=r?vF(e,r):e;n.push(` ^^${i}`)}return n.join("")}function UQe(t,e){const r=new Map,n=[];for(const a of t){r.set(a.subject,{label:pC(a.subject,e,!1),isLiteral:!1,prefixKey:oC(a.subject,e)});const s=a.objectLexicalValue??a.object,o=a.objectIsLiteral&&(a.objectLiteralLanguage||a.objectLiteralDatatype)?qQe(a.objectLiteralLanguage,a.objectLiteralDatatype,e):void 0;r.set(a.object,{label:pC(s,e,a.objectIsLiteral),isLiteral:a.objectIsLiteral,prefixKey:a.objectIsLiteral?"literal":oC(a.object,e),literalSuffix:o}),n.push({from:a.subject,to:a.object,label:pC(a.predicate,e,!1),predicateId:a.predicate,prefixKey:oC(a.predicate,e)})}return{nodes:Array.from(r.entries()).map(([a,s])=>({id:a,label:s.label,isLiteral:s.isLiteral,prefixKey:s.prefixKey,...s.literalSuffix!==void 0&&{literalSuffix:s.literalSuffix}})),edges:n}}function $f(t,e){return!e||e.trim()===""?!0:t.toLowerCase().includes(e.trim().toLowerCase())}function VQe(t,e){var c,u,l,d;const r=(c=e.text)==null?void 0:c.trim(),n=(u=e.subject)==null?void 0:u.trim(),i=(l=e.predicate)==null?void 0:l.trim(),a=(d=e.object)==null?void 0:d.trim();if(!(((r==null?void 0:r.length)??0)>0||((n==null?void 0:n.length)??0)>0||((i==null?void 0:i.length)??0)>0||((a==null?void 0:a.length)??0)>0))return t;const o=(r==null?void 0:r.toLowerCase())??"";return t.filter(f=>!(o&&!$f(f.subject,r??"")&&!$f(f.predicate,r??"")&&!$f(f.object,r??"")||n&&!$f(f.subject,n)||i&&!$f(f.predicate,i)||a&&!$f(f.object,a)))}const Zf={linkDistance:80,chargeStrength:-400},_C=20,mC=200,gC=-800,yC=-100,bC=.4,vC=2.5,AC=1;function qY(t){return typeof t=="string"?t:t.id}function Bxe(t,e){var n,i;const r=new Map;for(const a of t)r.set(a.id,new Set);for(const a of e){const s=qY(a.source),o=qY(a.target);(n=r.get(s))==null||n.add(o),(i=r.get(o))==null||i.add(s)}return r}function qxe(t,e){const r=new Set,n=[];for(const i of t){if(r.has(i.id))continue;const a=new Set,s=[i.id];for(r.add(i.id);s.length>0;){const o=s.shift();a.add(o);for(const c of e.get(o)??[])r.has(c)||(r.add(c),s.push(c))}n.push(a)}return n}function Uxe(t,e,r,n){const i=new Map,a=[r],s=new Set([r]);for(;a.length>0;){const c=a.shift();for(const u of e.get(c)??[])t.has(u)&&(s.has(u)||(s.add(u),i.set(u,c),a.push(u)))}function o(c){const u=n.get(c);if(!u)throw new Error(`Node ${c} not found`);const l=[...t].filter(d=>i.get(d)===c).map(o);return{node:u,children:l}}return t.has(r)?o(r):null}const GQe=220,HQe=90,eh=280,UY=100,kQe=.55;function VY(t,e,r,n,i=1){if(t.length===0)return;const a=new Map(t.map(g=>[g.id,g])),s=Bxe(t,e),o=qxe(t,s),c=Math.max(1,o.length),u=Math.ceil(Math.sqrt(c)),l=Math.ceil(c/u),d=Math.max(1,(r-(u+1)*eh)/u),f=Math.max(1,(n-(l+1)*eh)/l),h=GQe*i,p=HQe*i,_=jxe().nodeSize([p,h]).separation((g,m)=>g.parent===m.parent?1.6:1.2);o.forEach((g,m)=>{const y=[...g].sort()[0],v=Uxe(g,s,y,a);if(!v)return;const A=SF(v,pe=>pe.children);_(A);let T=1/0,S=-1/0,P=1/0,j=-1/0;A.each(pe=>{const we=pe.x??0,Ce=pe.y??0;T=Math.min(T,we),S=Math.max(S,we),P=Math.min(P,Ce),j=Math.max(j,Ce)});const F=S-T||1,N=j-P||1,R=Math.max(1,d-2*UY),C=Math.max(1,f-2*UY),M=Math.max(kQe,Math.min(R/F,C/N,1.2)),U=(T+S)/2,B=(P+j)/2,G=m%u,K=Math.floor(m/u),$=eh+G*(d+eh)+d/2,se=eh+K*(f+eh)+f/2;A.each(pe=>{const we=(pe.x??0)-U,Ce=(pe.y??0)-B;pe.data.node.x=$+we*M,pe.data.node.y=se+Ce*M})})}const th=280,GY=100,zQe=220;function HY(t,e,r,n,i=1){if(t.length===0)return;const a=new Map(t.map(m=>[m.id,m])),s=Bxe(t,e),o=qxe(t,s),c=Math.max(1,o.length),u=Math.ceil(Math.sqrt(c)),l=Math.ceil(c/u),d=Math.max(1,(r-(u+1)*th)/u),f=Math.max(1,(n-(l+1)*th)/l),h=Math.min(d-2*GY,f-2*GY)/2,_=Math.max(zQe,h*.92)*i,g=jxe().size([2*Math.PI,_]).separation((m,y)=>m.parent===y.parent?1.8:1.3);o.forEach((m,y)=>{const v=[...m].sort()[0],A=Uxe(m,s,v,a);if(!A)return;const T=SF(A,N=>N.children);g(T);const S=y%u,P=Math.floor(y/u),j=th+S*(d+th)+d/2,F=th+P*(f+th)+f/2;T.each(N=>{const R=N.x??0,C=N.y??0;N.data.node.x=j+C*Math.cos(R),N.data.node.y=F+C*Math.sin(R)})})}function p3(t,e,r){return r?t:vF(t,e)}function QQe(t,e){const r=t.objectLexicalValue??t.object,n=p3(r,e,t.objectIsLiteral);if(!t.objectIsLiteral)return n;const i=[];t.objectLiteralLanguage&&i.push(`@${t.objectLiteralLanguage}`),t.objectLiteralDatatype&&i.push(`^^${vF(t.objectLiteralDatatype,e)}`);const a=i.length?" "+i.join(" "):"";return n+a}function kY({t,prefixes:e}){const r=p3(t.subject,e,!1),n=p3(t.predicate,e,!1),i=t.objectIsLiteral?QQe(t,e):p3(t.object,e,!1);return Ve.jsxs("div",{className:"node-details-triple",children:[Ve.jsx("span",{className:"node-details-triple-subject",title:t.subject,children:r}),Ve.jsx("span",{className:"node-details-triple-predicate",title:t.predicate,children:n}),Ve.jsx("span",{className:`node-details-triple-object ${t.objectIsLiteral?"node-details-triple-object-literal":"node-details-triple-object-resource"}`,title:t.object,children:i})]})}function WQe({nodeId:t,triples:e,prefixes:r,onClose:n}){const[i,a]=yt.useState(!1),s=e.filter(u=>u.subject===t),o=e.filter(u=>u.object===t);yt.useEffect(()=>{if(!i)return;const u=setTimeout(()=>a(!1),2e3);return()=>clearTimeout(u)},[i]);const c=yt.useCallback(async()=>{try{await navigator.clipboard.writeText(t),a(!0)}catch{}},[t]);return Ve.jsxs("aside",{className:"node-details-panel",role:"dialog","aria-label":"Node details",children:[Ve.jsxs("div",{className:"node-details-header",children:[Ve.jsx("h3",{className:"node-details-title",children:"Node details"}),Ve.jsx("button",{type:"button",className:"node-details-close",onClick:n,"aria-label":"Close panel",children:""})]}),Ve.jsxs("div",{className:"node-details-iri-wrap",children:[Ve.jsx("label",{className:"node-details-label",children:"Full IRI"}),Ve.jsxs("div",{className:"node-details-iri-row",children:[Ve.jsx("code",{className:"node-details-iri",title:t,children:t}),Ve.jsx("button",{type:"button",className:"node-details-copy",onClick:c,title:"Copy IRI","aria-label":"Copy IRI to clipboard",children:i?"Copied":"Copy"})]})]}),Ve.jsxs("div",{className:"node-details-section",children:[Ve.jsxs("h4",{className:"node-details-section-title",children:["Outgoing (",s.length,")"]}),Ve.jsx("p",{className:"node-details-hint",children:"Triples where this node is subject"}),Ve.jsx("div",{className:"node-details-triples",children:s.length===0?Ve.jsx("span",{className:"node-details-empty",children:"None"}):s.map((u,l)=>Ve.jsx(kY,{t:u,prefixes:r},`out-${l}`))})]}),Ve.jsxs("div",{className:"node-details-section",children:[Ve.jsxs("h4",{className:"node-details-section-title",children:["Incoming (",o.length,")"]}),Ve.jsx("p",{className:"node-details-hint",children:"Triples where this node is object"}),Ve.jsx("div",{className:"node-details-triples",children:o.length===0?Ve.jsx("span",{className:"node-details-empty",children:"None"}):o.map((u,l)=>Ve.jsx(kY,{t:u,prefixes:r},`in-${l}`))})]})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vk="182",pp={ROTATE:0,DOLLY:1,PAN:2},tp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KQe=0,zY=1,XQe=2,_3=1,JQe=2,cE=3,wl=0,pa=1,Su=2,Fu=0,_p=1,QY=2,WY=3,KY=4,YQe=5,Cd=100,$Qe=101,ZQe=102,eWe=103,tWe=104,rWe=200,nWe=201,iWe=202,aWe=203,sV=204,oV=205,sWe=206,oWe=207,uWe=208,cWe=209,lWe=210,dWe=211,fWe=212,hWe=213,pWe=214,uV=0,cV=1,lV=2,Rp=3,dV=4,fV=5,hV=6,pV=7,Ak=0,_We=1,mWe=2,Co=0,Vxe=1,Gxe=2,Hxe=3,kxe=4,zxe=5,Qxe=6,Wxe=7,Kxe=300,yf=301,Pp=302,_V=303,mV=304,xF=306,gV=1e3,Ru=1001,yV=1002,si=1003,gWe=1004,nR=1005,xi=1006,TC=1007,Kd=1008,Ra=1009,Xxe=1010,Jxe=1011,SI=1012,Tk=1013,qo=1014,Oo=1015,Gu=1016,wk=1017,Sk=1018,xI=1020,Yxe=35902,$xe=35899,Zxe=1021,eEe=1022,Gs=1023,Hu=1026,Xd=1027,tEe=1028,xk=1029,Np=1030,Ek=1031,Ik=1033,m3=33776,g3=33777,y3=33778,b3=33779,bV=35840,vV=35841,AV=35842,TV=35843,wV=36196,SV=37492,xV=37496,EV=37488,IV=37489,OV=37490,RV=37491,PV=37808,NV=37809,FV=37810,MV=37811,DV=37812,CV=37813,LV=37814,jV=37815,BV=37816,qV=37817,UV=37818,VV=37819,GV=37820,HV=37821,kV=36492,zV=36494,QV=36495,WV=36283,KV=36284,XV=36285,JV=36286,yWe=3200,rEe=0,bWe=1,rl="",is="srgb",Fp="srgb-linear",MN="linear",Pr="srgb",rh=7680,XY=519,vWe=512,AWe=513,TWe=514,Ok=515,wWe=516,SWe=517,Rk=518,xWe=519,JY=35044,YY="300 es",Ro=2e3,DN=2001;function nEe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function CN(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function EWe(){const t=CN("canvas");return t.style.display="block",t}const $Y={};function ZY(...t){const e="THREE."+t.shift();console.log(e,...t)}function er(...t){const e="THREE."+t.shift();console.warn(e,...t)}function Ar(...t){const e="THREE."+t.shift();console.error(e,...t)}function EI(...t){const e=t.join(" ");e in $Y||($Y[e]=!0,er(...t))}function IWe(t,e,r){return new Promise(function(n,i){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(a,r);break;default:n()}}setTimeout(a,r)})}class Ef{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(r)===-1&&n[e].push(r)}hasEventListener(e,r){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(r)!==-1}removeEventListener(e,r){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const a=i.indexOf(r);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const r=this._listeners;if(r===void 0)return;const n=r[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}const bi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],v3=Math.PI/180,YV=180/Math.PI;function ZI(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(bi[t&255]+bi[t>>8&255]+bi[t>>16&255]+bi[t>>24&255]+"-"+bi[e&255]+bi[e>>8&255]+"-"+bi[e>>16&15|64]+bi[e>>24&255]+"-"+bi[r&63|128]+bi[r>>8&255]+"-"+bi[r>>16&255]+bi[r>>24&255]+bi[n&255]+bi[n>>8&255]+bi[n>>16&255]+bi[n>>24&255]).toLowerCase()}function hr(t,e,r){return Math.max(e,Math.min(r,t))}function OWe(t,e){return(t%e+e)%e}function wC(t,e,r){return(1-r)*t+r*e}function l_(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function na(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const RWe={DEG2RAD:v3};class tr{constructor(e=0,r=0){tr.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,n=this.y,i=e.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=hr(this.x,e.x,r.x),this.y=hr(this.y,e.y,r.y),this}clampScalar(e,r){return this.x=hr(this.x,e,r),this.y=hr(this.y,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hr(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(hr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y;return r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const n=Math.cos(r),i=Math.sin(r),a=this.x-e.x,s=this.y-e.y;return this.x=a*n-s*i+e.x,this.y=a*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Sl{constructor(e=0,r=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=n,this._w=i}static slerpFlat(e,r,n,i,a,s,o){let c=n[i+0],u=n[i+1],l=n[i+2],d=n[i+3],f=a[s+0],h=a[s+1],p=a[s+2],_=a[s+3];if(o<=0){e[r+0]=c,e[r+1]=u,e[r+2]=l,e[r+3]=d;return}if(o>=1){e[r+0]=f,e[r+1]=h,e[r+2]=p,e[r+3]=_;return}if(d!==_||c!==f||u!==h||l!==p){let g=c*f+u*h+l*p+d*_;g<0&&(f=-f,h=-h,p=-p,_=-_,g=-g);let m=1-o;if(g<.9995){const y=Math.acos(g),v=Math.sin(y);m=Math.sin(m*y)/v,o=Math.sin(o*y)/v,c=c*m+f*o,u=u*m+h*o,l=l*m+p*o,d=d*m+_*o}else{c=c*m+f*o,u=u*m+h*o,l=l*m+p*o,d=d*m+_*o;const y=1/Math.sqrt(c*c+u*u+l*l+d*d);c*=y,u*=y,l*=y,d*=y}}e[r]=c,e[r+1]=u,e[r+2]=l,e[r+3]=d}static multiplyQuaternionsFlat(e,r,n,i,a,s){const o=n[i],c=n[i+1],u=n[i+2],l=n[i+3],d=a[s],f=a[s+1],h=a[s+2],p=a[s+3];return e[r]=o*p+l*d+c*h-u*f,e[r+1]=c*p+l*f+u*d-o*h,e[r+2]=u*p+l*h+o*f-c*d,e[r+3]=l*p-o*d-c*f-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,n,i){return this._x=e,this._y=r,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const n=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,u=o(n/2),l=o(i/2),d=o(a/2),f=c(n/2),h=c(i/2),p=c(a/2);switch(s){case"XYZ":this._x=f*l*d+u*h*p,this._y=u*h*d-f*l*p,this._z=u*l*p+f*h*d,this._w=u*l*d-f*h*p;break;case"YXZ":this._x=f*l*d+u*h*p,this._y=u*h*d-f*l*p,this._z=u*l*p-f*h*d,this._w=u*l*d+f*h*p;break;case"ZXY":this._x=f*l*d-u*h*p,this._y=u*h*d+f*l*p,this._z=u*l*p+f*h*d,this._w=u*l*d-f*h*p;break;case"ZYX":this._x=f*l*d-u*h*p,this._y=u*h*d+f*l*p,this._z=u*l*p-f*h*d,this._w=u*l*d+f*h*p;break;case"YZX":this._x=f*l*d+u*h*p,this._y=u*h*d+f*l*p,this._z=u*l*p-f*h*d,this._w=u*l*d-f*h*p;break;case"XZY":this._x=f*l*d-u*h*p,this._y=u*h*d-f*l*p,this._z=u*l*p+f*h*d,this._w=u*l*d+f*h*p;break;default:er("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const n=r/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,n=r[0],i=r[4],a=r[8],s=r[1],o=r[5],c=r[9],u=r[2],l=r[6],d=r[10],f=n+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(l-c)*h,this._y=(a-u)*h,this._z=(s-i)*h}else if(n>o&&n>d){const h=2*Math.sqrt(1+n-o-d);this._w=(l-c)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(a+u)/h}else if(o>d){const h=2*Math.sqrt(1+o-n-d);this._w=(a-u)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(c+l)/h}else{const h=2*Math.sqrt(1+d-n-o);this._w=(s-i)/h,this._x=(a+u)/h,this._y=(c+l)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let n=e.dot(r)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hr(this.dot(e),-1,1)))}rotateTowards(e,r){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,r/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const n=e._x,i=e._y,a=e._z,s=e._w,o=r._x,c=r._y,u=r._z,l=r._w;return this._x=n*l+s*o+i*u-a*c,this._y=i*l+s*c+a*o-n*u,this._z=a*l+s*u+n*c-i*o,this._w=s*l-n*o-i*c-a*u,this._onChangeCallback(),this}slerp(e,r){if(r<=0)return this;if(r>=1)return this.copy(e);let n=e._x,i=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(n=-n,i=-i,a=-a,s=-s,o=-o);let c=1-r;if(o<.9995){const u=Math.acos(o),l=Math.sin(u);c=Math.sin(c*u)/l,r=Math.sin(r*u)/l,this._x=this._x*c+n*r,this._y=this._y*c+i*r,this._z=this._z*c+a*r,this._w=this._w*c+s*r,this._onChangeCallback()}else this._x=this._x*c+n*r,this._y=this._y*c+i*r,this._z=this._z*c+a*r,this._w=this._w*c+s*r,this.normalize();return this}slerpQuaternions(e,r,n){return this.copy(e).slerp(r,n)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(r),a*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ze{constructor(e=0,r=0,n=0){Ze.prototype.isVector3=!0,this.x=e,this.y=r,this.z=n}set(e,r,n){return n===void 0&&(n=this.z),this.x=e,this.y=r,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(e$.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(e$.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*r+a[3]*n+a[6]*i,this.y=a[1]*r+a[4]*n+a[7]*i,this.z=a[2]*r+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,n=this.y,i=this.z,a=e.elements,s=1/(a[3]*r+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*r+a[4]*n+a[8]*i+a[12])*s,this.y=(a[1]*r+a[5]*n+a[9]*i+a[13])*s,this.z=(a[2]*r+a[6]*n+a[10]*i+a[14])*s,this}applyQuaternion(e){const r=this.x,n=this.y,i=this.z,a=e.x,s=e.y,o=e.z,c=e.w,u=2*(s*i-o*n),l=2*(o*r-a*i),d=2*(a*n-s*r);return this.x=r+c*u+s*d-o*l,this.y=n+c*l+o*u-a*d,this.z=i+c*d+a*l-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*r+a[4]*n+a[8]*i,this.y=a[1]*r+a[5]*n+a[9]*i,this.z=a[2]*r+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=hr(this.x,e.x,r.x),this.y=hr(this.y,e.y,r.y),this.z=hr(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=hr(this.x,e,r),this.y=hr(this.y,e,r),this.z=hr(this.z,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hr(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const n=e.x,i=e.y,a=e.z,s=r.x,o=r.y,c=r.z;return this.x=i*c-a*o,this.y=a*s-n*c,this.z=n*o-i*s,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const n=e.dot(this)/r;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return SC.copy(this).projectOnVector(e),this.sub(SC)}reflect(e){return this.sub(SC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(hr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return r*r+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,n){const i=Math.sin(r)*e;return this.x=i*Math.sin(n),this.y=Math.cos(r)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,n){return this.x=e*Math.sin(r),this.y=n,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,n=Math.sqrt(1-r*r);return this.x=n*Math.cos(e),this.y=r,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const SC=new Ze,e$=new Sl;class cr{constructor(e,r,n,i,a,s,o,c,u){cr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,n,i,a,s,o,c,u)}set(e,r,n,i,a,s,o,c,u){const l=this.elements;return l[0]=e,l[1]=i,l[2]=o,l[3]=r,l[4]=a,l[5]=c,l[6]=n,l[7]=s,l[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(e,r,n){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,i=r.elements,a=this.elements,s=n[0],o=n[3],c=n[6],u=n[1],l=n[4],d=n[7],f=n[2],h=n[5],p=n[8],_=i[0],g=i[3],m=i[6],y=i[1],v=i[4],A=i[7],T=i[2],S=i[5],P=i[8];return a[0]=s*_+o*y+c*T,a[3]=s*g+o*v+c*S,a[6]=s*m+o*A+c*P,a[1]=u*_+l*y+d*T,a[4]=u*g+l*v+d*S,a[7]=u*m+l*A+d*P,a[2]=f*_+h*y+p*T,a[5]=f*g+h*v+p*S,a[8]=f*m+h*A+p*P,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],l=e[8];return r*s*l-r*o*u-n*a*l+n*o*c+i*a*u-i*s*c}invert(){const e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],l=e[8],d=l*s-o*u,f=o*c-l*a,h=u*a-s*c,p=r*d+n*f+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/p;return e[0]=d*_,e[1]=(i*u-l*n)*_,e[2]=(o*n-i*s)*_,e[3]=f*_,e[4]=(l*r-i*c)*_,e[5]=(i*a-o*r)*_,e[6]=h*_,e[7]=(n*c-u*r)*_,e[8]=(s*r-n*a)*_,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,n,i,a,s,o){const c=Math.cos(a),u=Math.sin(a);return this.set(n*c,n*u,-n*(c*s+u*o)+s+e,-i*u,i*c,-i*(-u*s+c*o)+o+r,0,0,1),this}scale(e,r){return this.premultiply(xC.makeScale(e,r)),this}rotate(e){return this.premultiply(xC.makeRotation(-e)),this}translate(e,r){return this.premultiply(xC.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,n,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,n=e.elements;for(let i=0;i<9;i++)if(r[i]!==n[i])return!1;return!0}fromArray(e,r=0){for(let n=0;n<9;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const xC=new cr,t$=new cr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),r$=new cr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function PWe(){const t={enabled:!0,workingColorSpace:Fp,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Pr&&(i.r=Mu(i.r),i.g=Mu(i.g),i.b=Mu(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Pr&&(i.r=mp(i.r),i.g=mp(i.g),i.b=mp(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===rl?MN:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return EI("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return EI("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],n=[.3127,.329];return t.define({[Fp]:{primaries:e,whitePoint:n,transfer:MN,toXYZ:t$,fromXYZ:r$,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:is},outputColorSpaceConfig:{drawingBufferColorSpace:is}},[is]:{primaries:e,whitePoint:n,transfer:Pr,toXYZ:t$,fromXYZ:r$,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:is}}}),t}const Tr=PWe();function Mu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function mp(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let nh;class NWe{static getDataURL(e,r="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{nh===void 0&&(nh=CN("canvas")),nh.width=e.width,nh.height=e.height;const i=nh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=nh}return n.toDataURL(r)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=CN("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Mu(a[s]/255)*255;return n.putImageData(i,0,0),r}else if(e.data){const r=e.data.slice(0);for(let n=0;n<r.length;n++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[n]=Math.floor(Mu(r[n]/255)*255):r[n]=Mu(r[n]);return{data:r,width:e.width,height:e.height}}else return er("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let FWe=0,Pk=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:FWe++}),this.uuid=ZI(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const r=this.data;return typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement?e.set(r.videoWidth,r.videoHeight,0):typeof VideoFrame<"u"&&r instanceof VideoFrame?e.set(r.displayHeight,r.displayWidth,0):r!==null?e.set(r.width,r.height,r.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(EC(i[s].image)):a.push(EC(i[s]))}else a=EC(i);n.url=a}return r||(e.images[this.uuid]=n),n}};function EC(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?NWe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(er("Texture: Unable to serialize Texture."),{})}let MWe=0;const IC=new Ze;class zi extends Ef{constructor(e=zi.DEFAULT_IMAGE,r=zi.DEFAULT_MAPPING,n=Ru,i=Ru,a=xi,s=Kd,o=Gs,c=Ra,u=zi.DEFAULT_ANISOTROPY,l=rl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:MWe++}),this.uuid=ZI(),this.name="",this.source=new Pk(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=c,this.offset=new tr(0,0),this.repeat=new tr(1,1),this.center=new tr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=l,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(IC).x}get height(){return this.source.getSize(IC).y}get depth(){return this.source.getSize(IC).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const r in e){const n=e[r];if(n===void 0){er(`Texture.setValues(): parameter '${r}' has value of undefined.`);continue}const i=this[r];if(i===void 0){er(`Texture.setValues(): property '${r}' does not exist.`);continue}i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[r]=n}}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Kxe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case gV:e.x=e.x-Math.floor(e.x);break;case Ru:e.x=e.x<0?0:1;break;case yV:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case gV:e.y=e.y-Math.floor(e.y);break;case Ru:e.y=e.y<0?0:1;break;case yV:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}zi.DEFAULT_IMAGE=null;zi.DEFAULT_MAPPING=Kxe;zi.DEFAULT_ANISOTROPY=1;class Tn{constructor(e=0,r=0,n=0,i=1){Tn.prototype.isVector4=!0,this.x=e,this.y=r,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,n,i){return this.x=e,this.y=r,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,n=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*r+s[4]*n+s[8]*i+s[12]*a,this.y=s[1]*r+s[5]*n+s[9]*i+s[13]*a,this.z=s[2]*r+s[6]*n+s[10]*i+s[14]*a,this.w=s[3]*r+s[7]*n+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,n,i,a;const c=e.elements,u=c[0],l=c[4],d=c[8],f=c[1],h=c[5],p=c[9],_=c[2],g=c[6],m=c[10];if(Math.abs(l-f)<.01&&Math.abs(d-_)<.01&&Math.abs(p-g)<.01){if(Math.abs(l+f)<.1&&Math.abs(d+_)<.1&&Math.abs(p+g)<.1&&Math.abs(u+h+m-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const v=(u+1)/2,A=(h+1)/2,T=(m+1)/2,S=(l+f)/4,P=(d+_)/4,j=(p+g)/4;return v>A&&v>T?v<.01?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(v),i=S/n,a=P/n):A>T?A<.01?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(A),n=S/i,a=j/i):T<.01?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(T),n=P/a,i=j/a),this.set(n,i,a,r),this}let y=Math.sqrt((g-p)*(g-p)+(d-_)*(d-_)+(f-l)*(f-l));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(d-_)/y,this.z=(f-l)/y,this.w=Math.acos((u+h+m-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=hr(this.x,e.x,r.x),this.y=hr(this.y,e.y,r.y),this.z=hr(this.z,e.z,r.z),this.w=hr(this.w,e.w,r.w),this}clampScalar(e,r){return this.x=hr(this.x,e,r),this.y=hr(this.y,e,r),this.z=hr(this.z,e,r),this.w=hr(this.w,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hr(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this.w=e.w+(r.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class DWe extends Ef{constructor(e=1,r=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:xi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=n.depth,this.scissor=new Tn(0,0,e,r),this.scissorTest=!1,this.viewport=new Tn(0,0,e,r);const i={width:e,height:r,depth:n.depth},a=new zi(i);this.textures=[];const s=n.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const r={minFilter:xi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(r.mapping=e.mapping),e.wrapS!==void 0&&(r.wrapS=e.wrapS),e.wrapT!==void 0&&(r.wrapT=e.wrapT),e.wrapR!==void 0&&(r.wrapR=e.wrapR),e.magFilter!==void 0&&(r.magFilter=e.magFilter),e.minFilter!==void 0&&(r.minFilter=e.minFilter),e.format!==void 0&&(r.format=e.format),e.type!==void 0&&(r.type=e.type),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(r.colorSpace=e.colorSpace),e.flipY!==void 0&&(r.flipY=e.flipY),e.generateMipmaps!==void 0&&(r.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(r.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(r)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,r,n=1){if(this.width!==e||this.height!==r||this.depth!==n){this.width=e,this.height=r,this.depth=n;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=r,this.textures[i].image.depth=n,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,n=e.textures.length;r<n;r++){this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const i=Object.assign({},e.textures[r].image);this.textures[r].source=new Pk(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Lo extends DWe{constructor(e=1,r=1,n={}){super(e,r,n),this.isWebGLRenderTarget=!0}}class iEe extends zi{constructor(e=null,r=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=si,this.minFilter=si,this.wrapR=Ru,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class CWe extends zi{constructor(e=null,r=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=si,this.minFilter=si,this.wrapR=Ru,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eO{constructor(e=new Ze(1/0,1/0,1/0),r=new Ze(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r+=3)this.expandByPoint(Is.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,n=e.count;r<n;r++)this.expandByPoint(Is.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const n=Is.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(r===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Is):Is.fromBufferAttribute(a,s),Is.applyMatrix4(e.matrixWorld),this.expandByPoint(Is);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),iR.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),iR.copy(n.boundingBox)),iR.applyMatrix4(e.matrixWorld),this.union(iR)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Is),Is.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,n;return e.normal.x>0?(r=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),r<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(d_),aR.subVectors(this.max,d_),ih.subVectors(e.a,d_),ah.subVectors(e.b,d_),sh.subVectors(e.c,d_),uc.subVectors(ah,ih),cc.subVectors(sh,ah),$l.subVectors(ih,sh);let r=[0,-uc.z,uc.y,0,-cc.z,cc.y,0,-$l.z,$l.y,uc.z,0,-uc.x,cc.z,0,-cc.x,$l.z,0,-$l.x,-uc.y,uc.x,0,-cc.y,cc.x,0,-$l.y,$l.x,0];return!OC(r,ih,ah,sh,aR)||(r=[1,0,0,0,1,0,0,0,1],!OC(r,ih,ah,sh,aR))?!1:(sR.crossVectors(uc,cc),r=[sR.x,sR.y,sR.z],OC(r,ih,ah,sh,aR))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Is).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Is).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(su[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),su[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),su[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),su[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),su[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),su[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),su[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),su[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(su),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const su=[new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze],Is=new Ze,iR=new eO,ih=new Ze,ah=new Ze,sh=new Ze,uc=new Ze,cc=new Ze,$l=new Ze,d_=new Ze,aR=new Ze,sR=new Ze,Zl=new Ze;function OC(t,e,r,n,i){for(let a=0,s=t.length-3;a<=s;a+=3){Zl.fromArray(t,a);const o=i.x*Math.abs(Zl.x)+i.y*Math.abs(Zl.y)+i.z*Math.abs(Zl.z),c=e.dot(Zl),u=r.dot(Zl),l=n.dot(Zl);if(Math.max(-Math.max(c,u,l),Math.min(c,u,l))>o)return!1}return!0}const LWe=new eO,f_=new Ze,RC=new Ze;class EF{constructor(e=new Ze,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const n=this.center;r!==void 0?n.copy(r):LWe.setFromPoints(e).getCenter(n);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const n=this.center.distanceToSquared(e);return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;f_.subVectors(e,this.center);const r=f_.lengthSq();if(r>this.radius*this.radius){const n=Math.sqrt(r),i=(n-this.radius)*.5;this.center.addScaledVector(f_,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(RC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(f_.copy(e.center).add(RC)),this.expandByPoint(f_.copy(e.center).sub(RC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ou=new Ze,PC=new Ze,oR=new Ze,lc=new Ze,NC=new Ze,uR=new Ze,FC=new Ze;class IF{constructor(e=new Ze,r=new Ze(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ou)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=ou.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(ou.copy(this.origin).addScaledVector(this.direction,r),ou.distanceToSquared(e))}distanceSqToSegment(e,r,n,i){PC.copy(e).add(r).multiplyScalar(.5),oR.copy(r).sub(e).normalize(),lc.copy(this.origin).sub(PC);const a=e.distanceTo(r)*.5,s=-this.direction.dot(oR),o=lc.dot(this.direction),c=-lc.dot(oR),u=lc.lengthSq(),l=Math.abs(1-s*s);let d,f,h,p;if(l>0)if(d=s*c-o,f=s*o-c,p=a*l,d>=0)if(f>=-p)if(f<=p){const _=1/l;d*=_,f*=_,h=d*(d+s*f+2*o)+f*(s*d+f+2*c)+u}else f=a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*c)+u;else f=-a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*c)+u;else f<=-p?(d=Math.max(0,-(-s*a+o)),f=d>0?-a:Math.min(Math.max(-a,-c),a),h=-d*d+f*(f+2*c)+u):f<=p?(d=0,f=Math.min(Math.max(-a,-c),a),h=f*(f+2*c)+u):(d=Math.max(0,-(s*a+o)),f=d>0?a:Math.min(Math.max(-a,-c),a),h=-d*d+f*(f+2*c)+u);else f=s>0?-a:a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*c)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(PC).addScaledVector(oR,f),h}intersectSphere(e,r){ou.subVectors(e.center,this.origin);const n=ou.dot(this.direction),i=ou.dot(ou)-n*n,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=n-s,c=n+s;return c<0?null:o<0?this.at(c,r):this.at(o,r)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/r;return n>=0?n:null}intersectPlane(e,r){const n=this.distanceToPlane(e);return n===null?null:this.at(n,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let n,i,a,s,o,c;const u=1/this.direction.x,l=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),l>=0?(a=(e.min.y-f.y)*l,s=(e.max.y-f.y)*l):(a=(e.max.y-f.y)*l,s=(e.min.y-f.y)*l),n>s||a>i||((a>n||isNaN(n))&&(n=a),(s<i||isNaN(i))&&(i=s),d>=0?(o=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),n>c||o>i)||((o>n||n!==n)&&(n=o),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,r)}intersectsBox(e){return this.intersectBox(e,ou)!==null}intersectTriangle(e,r,n,i,a){NC.subVectors(r,e),uR.subVectors(n,e),FC.crossVectors(NC,uR);let s=this.direction.dot(FC),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;lc.subVectors(this.origin,e);const c=o*this.direction.dot(uR.crossVectors(lc,uR));if(c<0)return null;const u=o*this.direction.dot(NC.cross(lc));if(u<0||c+u>s)return null;const l=-o*lc.dot(FC);return l<0?null:this.at(l/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class kr{constructor(e,r,n,i,a,s,o,c,u,l,d,f,h,p,_,g){kr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,n,i,a,s,o,c,u,l,d,f,h,p,_,g)}set(e,r,n,i,a,s,o,c,u,l,d,f,h,p,_,g){const m=this.elements;return m[0]=e,m[4]=r,m[8]=n,m[12]=i,m[1]=a,m[5]=s,m[9]=o,m[13]=c,m[2]=u,m[6]=l,m[10]=d,m[14]=f,m[3]=h,m[7]=p,m[11]=_,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new kr().fromArray(this.elements)}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(e){const r=this.elements,n=e.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,n){return this.determinant()===0?(e.set(1,0,0),r.set(0,1,0),n.set(0,0,1),this):(e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(e,r,n){return this.set(e.x,r.x,n.x,0,e.y,r.y,n.y,0,e.z,r.z,n.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const r=this.elements,n=e.elements,i=1/oh.setFromMatrixColumn(e,0).length(),a=1/oh.setFromMatrixColumn(e,1).length(),s=1/oh.setFromMatrixColumn(e,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[7]=0,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,n=e.x,i=e.y,a=e.z,s=Math.cos(n),o=Math.sin(n),c=Math.cos(i),u=Math.sin(i),l=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const f=s*l,h=s*d,p=o*l,_=o*d;r[0]=c*l,r[4]=-c*d,r[8]=u,r[1]=h+p*u,r[5]=f-_*u,r[9]=-o*c,r[2]=_-f*u,r[6]=p+h*u,r[10]=s*c}else if(e.order==="YXZ"){const f=c*l,h=c*d,p=u*l,_=u*d;r[0]=f+_*o,r[4]=p*o-h,r[8]=s*u,r[1]=s*d,r[5]=s*l,r[9]=-o,r[2]=h*o-p,r[6]=_+f*o,r[10]=s*c}else if(e.order==="ZXY"){const f=c*l,h=c*d,p=u*l,_=u*d;r[0]=f-_*o,r[4]=-s*d,r[8]=p+h*o,r[1]=h+p*o,r[5]=s*l,r[9]=_-f*o,r[2]=-s*u,r[6]=o,r[10]=s*c}else if(e.order==="ZYX"){const f=s*l,h=s*d,p=o*l,_=o*d;r[0]=c*l,r[4]=p*u-h,r[8]=f*u+_,r[1]=c*d,r[5]=_*u+f,r[9]=h*u-p,r[2]=-u,r[6]=o*c,r[10]=s*c}else if(e.order==="YZX"){const f=s*c,h=s*u,p=o*c,_=o*u;r[0]=c*l,r[4]=_-f*d,r[8]=p*d+h,r[1]=d,r[5]=s*l,r[9]=-o*l,r[2]=-u*l,r[6]=h*d+p,r[10]=f-_*d}else if(e.order==="XZY"){const f=s*c,h=s*u,p=o*c,_=o*u;r[0]=c*l,r[4]=-d,r[8]=u*l,r[1]=f*d+_,r[5]=s*l,r[9]=h*d-p,r[2]=p*d-h,r[6]=o*l,r[10]=_*d+f}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jWe,e,BWe)}lookAt(e,r,n){const i=this.elements;return Sa.subVectors(e,r),Sa.lengthSq()===0&&(Sa.z=1),Sa.normalize(),dc.crossVectors(n,Sa),dc.lengthSq()===0&&(Math.abs(n.z)===1?Sa.x+=1e-4:Sa.z+=1e-4,Sa.normalize(),dc.crossVectors(n,Sa)),dc.normalize(),cR.crossVectors(Sa,dc),i[0]=dc.x,i[4]=cR.x,i[8]=Sa.x,i[1]=dc.y,i[5]=cR.y,i[9]=Sa.y,i[2]=dc.z,i[6]=cR.z,i[10]=Sa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,i=r.elements,a=this.elements,s=n[0],o=n[4],c=n[8],u=n[12],l=n[1],d=n[5],f=n[9],h=n[13],p=n[2],_=n[6],g=n[10],m=n[14],y=n[3],v=n[7],A=n[11],T=n[15],S=i[0],P=i[4],j=i[8],F=i[12],N=i[1],R=i[5],C=i[9],M=i[13],U=i[2],B=i[6],G=i[10],K=i[14],$=i[3],se=i[7],pe=i[11],we=i[15];return a[0]=s*S+o*N+c*U+u*$,a[4]=s*P+o*R+c*B+u*se,a[8]=s*j+o*C+c*G+u*pe,a[12]=s*F+o*M+c*K+u*we,a[1]=l*S+d*N+f*U+h*$,a[5]=l*P+d*R+f*B+h*se,a[9]=l*j+d*C+f*G+h*pe,a[13]=l*F+d*M+f*K+h*we,a[2]=p*S+_*N+g*U+m*$,a[6]=p*P+_*R+g*B+m*se,a[10]=p*j+_*C+g*G+m*pe,a[14]=p*F+_*M+g*K+m*we,a[3]=y*S+v*N+A*U+T*$,a[7]=y*P+v*R+A*B+T*se,a[11]=y*j+v*C+A*G+T*pe,a[15]=y*F+v*M+A*K+T*we,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[4],i=e[8],a=e[12],s=e[1],o=e[5],c=e[9],u=e[13],l=e[2],d=e[6],f=e[10],h=e[14],p=e[3],_=e[7],g=e[11],m=e[15],y=c*h-u*f,v=o*h-u*d,A=o*f-c*d,T=s*h-u*l,S=s*f-c*l,P=s*d-o*l;return r*(_*y-g*v+m*A)-n*(p*y-g*T+m*S)+i*(p*v-_*T+m*P)-a*(p*A-_*S+g*P)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=r,i[14]=n),this}invert(){const e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],l=e[8],d=e[9],f=e[10],h=e[11],p=e[12],_=e[13],g=e[14],m=e[15],y=d*g*u-_*f*u+_*c*h-o*g*h-d*c*m+o*f*m,v=p*f*u-l*g*u-p*c*h+s*g*h+l*c*m-s*f*m,A=l*_*u-p*d*u+p*o*h-s*_*h-l*o*m+s*d*m,T=p*d*c-l*_*c-p*o*f+s*_*f+l*o*g-s*d*g,S=r*y+n*v+i*A+a*T;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/S;return e[0]=y*P,e[1]=(_*f*a-d*g*a-_*i*h+n*g*h+d*i*m-n*f*m)*P,e[2]=(o*g*a-_*c*a+_*i*u-n*g*u-o*i*m+n*c*m)*P,e[3]=(d*c*a-o*f*a-d*i*u+n*f*u+o*i*h-n*c*h)*P,e[4]=v*P,e[5]=(l*g*a-p*f*a+p*i*h-r*g*h-l*i*m+r*f*m)*P,e[6]=(p*c*a-s*g*a-p*i*u+r*g*u+s*i*m-r*c*m)*P,e[7]=(s*f*a-l*c*a+l*i*u-r*f*u-s*i*h+r*c*h)*P,e[8]=A*P,e[9]=(p*d*a-l*_*a-p*n*h+r*_*h+l*n*m-r*d*m)*P,e[10]=(s*_*a-p*o*a+p*n*u-r*_*u-s*n*m+r*o*m)*P,e[11]=(l*o*a-s*d*a-l*n*u+r*d*u+s*n*h-r*o*h)*P,e[12]=T*P,e[13]=(l*_*i-p*d*i+p*n*f-r*_*f-l*n*g+r*d*g)*P,e[14]=(p*o*i-s*_*i-p*n*c+r*_*c+s*n*g-r*o*g)*P,e[15]=(s*d*i-l*o*i+l*n*c-r*d*c-s*n*f+r*o*f)*P,this}scale(e){const r=this.elements,n=e.x,i=e.y,a=e.z;return r[0]*=n,r[4]*=i,r[8]*=a,r[1]*=n,r[5]*=i,r[9]*=a,r[2]*=n,r[6]*=i,r[10]*=a,r[3]*=n,r[7]*=i,r[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,n,i))}makeTranslation(e,r,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const n=Math.cos(r),i=Math.sin(r),a=1-n,s=e.x,o=e.y,c=e.z,u=a*s,l=a*o;return this.set(u*s+n,u*o-i*c,u*c+i*o,0,u*o+i*c,l*o+n,l*c-i*s,0,u*c-i*o,l*c+i*s,a*c*c+n,0,0,0,0,1),this}makeScale(e,r,n){return this.set(e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,r,n,i,a,s){return this.set(1,n,a,0,e,1,s,0,r,i,1,0,0,0,0,1),this}compose(e,r,n){const i=this.elements,a=r._x,s=r._y,o=r._z,c=r._w,u=a+a,l=s+s,d=o+o,f=a*u,h=a*l,p=a*d,_=s*l,g=s*d,m=o*d,y=c*u,v=c*l,A=c*d,T=n.x,S=n.y,P=n.z;return i[0]=(1-(_+m))*T,i[1]=(h+A)*T,i[2]=(p-v)*T,i[3]=0,i[4]=(h-A)*S,i[5]=(1-(f+m))*S,i[6]=(g+y)*S,i[7]=0,i[8]=(p+v)*P,i[9]=(g-y)*P,i[10]=(1-(f+_))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,r,n){const i=this.elements;if(e.x=i[12],e.y=i[13],e.z=i[14],this.determinant()===0)return n.set(1,1,1),r.identity(),this;let a=oh.set(i[0],i[1],i[2]).length();const s=oh.set(i[4],i[5],i[6]).length(),o=oh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),Os.copy(this);const u=1/a,l=1/s,d=1/o;return Os.elements[0]*=u,Os.elements[1]*=u,Os.elements[2]*=u,Os.elements[4]*=l,Os.elements[5]*=l,Os.elements[6]*=l,Os.elements[8]*=d,Os.elements[9]*=d,Os.elements[10]*=d,r.setFromRotationMatrix(Os),n.x=a,n.y=s,n.z=o,this}makePerspective(e,r,n,i,a,s,o=Ro,c=!1){const u=this.elements,l=2*a/(r-e),d=2*a/(n-i),f=(r+e)/(r-e),h=(n+i)/(n-i);let p,_;if(c)p=a/(s-a),_=s*a/(s-a);else if(o===Ro)p=-(s+a)/(s-a),_=-2*s*a/(s-a);else if(o===DN)p=-s/(s-a),_=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=l,u[4]=0,u[8]=f,u[12]=0,u[1]=0,u[5]=d,u[9]=h,u[13]=0,u[2]=0,u[6]=0,u[10]=p,u[14]=_,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,r,n,i,a,s,o=Ro,c=!1){const u=this.elements,l=2/(r-e),d=2/(n-i),f=-(r+e)/(r-e),h=-(n+i)/(n-i);let p,_;if(c)p=1/(s-a),_=s/(s-a);else if(o===Ro)p=-2/(s-a),_=-(s+a)/(s-a);else if(o===DN)p=-1/(s-a),_=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=l,u[4]=0,u[8]=0,u[12]=f,u[1]=0,u[5]=d,u[9]=0,u[13]=h,u[2]=0,u[6]=0,u[10]=p,u[14]=_,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const r=this.elements,n=e.elements;for(let i=0;i<16;i++)if(r[i]!==n[i])return!1;return!0}fromArray(e,r=0){for(let n=0;n<16;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e[r+9]=n[9],e[r+10]=n[10],e[r+11]=n[11],e[r+12]=n[12],e[r+13]=n[13],e[r+14]=n[14],e[r+15]=n[15],e}}const oh=new Ze,Os=new kr,jWe=new Ze(0,0,0),BWe=new Ze(1,1,1),dc=new Ze,cR=new Ze,Sa=new Ze,n$=new kr,i$=new Sl;class Uo{constructor(e=0,r=0,n=0,i=Uo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,n,i=this._order){return this._x=e,this._y=r,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,n=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],c=i[1],u=i[5],l=i[9],d=i[2],f=i[6],h=i[10];switch(r){case"XYZ":this._y=Math.asin(hr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-hr(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(hr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-hr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(hr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-hr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-l,h),this._y=0);break;default:er("Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,n){return n$.makeRotationFromQuaternion(e),this.setFromRotationMatrix(n$,r,n)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return i$.setFromEuler(this),this.setFromQuaternion(i$,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Uo.DEFAULT_ORDER="XYZ";class Nk{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let qWe=0;const a$=new Ze,uh=new Sl,uu=new kr,lR=new Ze,h_=new Ze,UWe=new Ze,VWe=new Sl,s$=new Ze(1,0,0),o$=new Ze(0,1,0),u$=new Ze(0,0,1),c$={type:"added"},GWe={type:"removed"},ch={type:"childadded",child:null},MC={type:"childremoved",child:null};class Zn extends Ef{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qWe++}),this.uuid=ZI(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zn.DEFAULT_UP.clone();const e=new Ze,r=new Uo,n=new Sl,i=new Ze(1,1,1);function a(){n.setFromEuler(r,!1)}function s(){r.setFromQuaternion(n,void 0,!1)}r._onChange(a),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new kr},normalMatrix:{value:new cr}}),this.matrix=new kr,this.matrixWorld=new kr,this.matrixAutoUpdate=Zn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Nk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return uh.setFromAxisAngle(e,r),this.quaternion.multiply(uh),this}rotateOnWorldAxis(e,r){return uh.setFromAxisAngle(e,r),this.quaternion.premultiply(uh),this}rotateX(e){return this.rotateOnAxis(s$,e)}rotateY(e){return this.rotateOnAxis(o$,e)}rotateZ(e){return this.rotateOnAxis(u$,e)}translateOnAxis(e,r){return a$.copy(e).applyQuaternion(this.quaternion),this.position.add(a$.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(s$,e)}translateY(e){return this.translateOnAxis(o$,e)}translateZ(e){return this.translateOnAxis(u$,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(uu.copy(this.matrixWorld).invert())}lookAt(e,r,n){e.isVector3?lR.copy(e):lR.set(e,r,n);const i=this.parent;this.updateWorldMatrix(!0,!1),h_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?uu.lookAt(h_,lR,this.up):uu.lookAt(lR,h_,this.up),this.quaternion.setFromRotationMatrix(uu),i&&(uu.extractRotation(i.matrixWorld),uh.setFromRotationMatrix(uu),this.quaternion.premultiply(uh.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(Ar("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(c$),ch.child=e,this.dispatchEvent(ch),ch.child=null):Ar("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(GWe),MC.child=e,this.dispatchEvent(MC),MC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),uu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),uu.multiply(e.parent.matrixWorld)),e.applyMatrix4(uu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(c$),ch.child=e,this.dispatchEvent(ch),ch.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n].getObjectByProperty(e,r);if(s!==void 0)return s}}getObjectsByProperty(e,r,n=[]){this[e]===r&&n.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,r,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(h_,e,UWe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(h_,VWe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].updateMatrixWorld(e)}updateWorldMatrix(e,r){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",n={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let u=0,l=c.length;u<l;u++){const d=c[u];a(e.shapes,d)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,u=this.material.length;c<u;c++)o.push(a(e.materials,this.material[c]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];i.animations.push(a(e.animations,c))}}if(r){const o=s(e.geometries),c=s(e.materials),u=s(e.textures),l=s(e.images),d=s(e.shapes),f=s(e.skeletons),h=s(e.animations),p=s(e.nodes);o.length>0&&(n.geometries=o),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),l.length>0&&(n.images=l),d.length>0&&(n.shapes=d),f.length>0&&(n.skeletons=f),h.length>0&&(n.animations=h),p.length>0&&(n.nodes=p)}return n.object=i,n;function s(o){const c=[];for(const u in o){const l=o[u];delete l.metadata,c.push(l)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Zn.DEFAULT_UP=new Ze(0,1,0);Zn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Rs=new Ze,cu=new Ze,DC=new Ze,lu=new Ze,lh=new Ze,dh=new Ze,l$=new Ze,CC=new Ze,LC=new Ze,jC=new Ze,BC=new Tn,qC=new Tn,UC=new Tn;class Vs{constructor(e=new Ze,r=new Ze,n=new Ze){this.a=e,this.b=r,this.c=n}static getNormal(e,r,n,i){i.subVectors(n,r),Rs.subVectors(e,r),i.cross(Rs);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,r,n,i,a){Rs.subVectors(i,r),cu.subVectors(n,r),DC.subVectors(e,r);const s=Rs.dot(Rs),o=Rs.dot(cu),c=Rs.dot(DC),u=cu.dot(cu),l=cu.dot(DC),d=s*u-o*o;if(d===0)return a.set(0,0,0),null;const f=1/d,h=(u*c-o*l)*f,p=(s*l-o*c)*f;return a.set(1-h-p,p,h)}static containsPoint(e,r,n,i){return this.getBarycoord(e,r,n,i,lu)===null?!1:lu.x>=0&&lu.y>=0&&lu.x+lu.y<=1}static getInterpolation(e,r,n,i,a,s,o,c){return this.getBarycoord(e,r,n,i,lu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,lu.x),c.addScaledVector(s,lu.y),c.addScaledVector(o,lu.z),c)}static getInterpolatedAttribute(e,r,n,i,a,s){return BC.setScalar(0),qC.setScalar(0),UC.setScalar(0),BC.fromBufferAttribute(e,r),qC.fromBufferAttribute(e,n),UC.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(BC,a.x),s.addScaledVector(qC,a.y),s.addScaledVector(UC,a.z),s}static isFrontFacing(e,r,n,i){return Rs.subVectors(n,r),cu.subVectors(e,r),Rs.cross(cu).dot(i)<0}set(e,r,n){return this.a.copy(e),this.b.copy(r),this.c.copy(n),this}setFromPointsAndIndices(e,r,n,i){return this.a.copy(e[r]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,r,n,i){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Rs.subVectors(this.c,this.b),cu.subVectors(this.a,this.b),Rs.cross(cu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return Vs.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,n,i,a){return Vs.getInterpolation(e,this.a,this.b,this.c,r,n,i,a)}containsPoint(e){return Vs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const n=this.a,i=this.b,a=this.c;let s,o;lh.subVectors(i,n),dh.subVectors(a,n),CC.subVectors(e,n);const c=lh.dot(CC),u=dh.dot(CC);if(c<=0&&u<=0)return r.copy(n);LC.subVectors(e,i);const l=lh.dot(LC),d=dh.dot(LC);if(l>=0&&d<=l)return r.copy(i);const f=c*d-l*u;if(f<=0&&c>=0&&l<=0)return s=c/(c-l),r.copy(n).addScaledVector(lh,s);jC.subVectors(e,a);const h=lh.dot(jC),p=dh.dot(jC);if(p>=0&&h<=p)return r.copy(a);const _=h*u-c*p;if(_<=0&&u>=0&&p<=0)return o=u/(u-p),r.copy(n).addScaledVector(dh,o);const g=l*p-h*d;if(g<=0&&d-l>=0&&h-p>=0)return l$.subVectors(a,i),o=(d-l)/(d-l+(h-p)),r.copy(i).addScaledVector(l$,o);const m=1/(g+_+f);return s=_*m,o=f*m,r.copy(n).addScaledVector(lh,s).addScaledVector(dh,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const aEe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fc={h:0,s:0,l:0},dR={h:0,s:0,l:0};function VC(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*6*(2/3-r):t}class br{constructor(e,r,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,n)}set(e,r,n){if(r===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,r,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tr.colorSpaceToWorking(this,r),this}setRGB(e,r,n,i=Tr.workingColorSpace){return this.r=e,this.g=r,this.b=n,Tr.colorSpaceToWorking(this,i),this}setHSL(e,r,n,i=Tr.workingColorSpace){if(e=OWe(e,1),r=hr(r,0,1),n=hr(n,0,1),r===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+r):n+r-n*r,s=2*n-a;this.r=VC(s,a,e+1/3),this.g=VC(s,a,e),this.b=VC(s,a,e-1/3)}return Tr.colorSpaceToWorking(this,i),this}setStyle(e,r=is){function n(a){a!==void 0&&parseFloat(a)<1&&er("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,r);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,r);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,r);break;default:er("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,r);if(s===6)return this.setHex(parseInt(a,16),r);er("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=is){const n=aEe[e.toLowerCase()];return n!==void 0?this.setHex(n,r):er("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Mu(e.r),this.g=Mu(e.g),this.b=Mu(e.b),this}copyLinearToSRGB(e){return this.r=mp(e.r),this.g=mp(e.g),this.b=mp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=is){return Tr.workingToColorSpace(vi.copy(this),e),Math.round(hr(vi.r*255,0,255))*65536+Math.round(hr(vi.g*255,0,255))*256+Math.round(hr(vi.b*255,0,255))}getHexString(e=is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=Tr.workingColorSpace){Tr.workingToColorSpace(vi.copy(this),r);const n=vi.r,i=vi.g,a=vi.b,s=Math.max(n,i,a),o=Math.min(n,i,a);let c,u;const l=(o+s)/2;if(o===s)c=0,u=0;else{const d=s-o;switch(u=l<=.5?d/(s+o):d/(2-s-o),s){case n:c=(i-a)/d+(i<a?6:0);break;case i:c=(a-n)/d+2;break;case a:c=(n-i)/d+4;break}c/=6}return e.h=c,e.s=u,e.l=l,e}getRGB(e,r=Tr.workingColorSpace){return Tr.workingToColorSpace(vi.copy(this),r),e.r=vi.r,e.g=vi.g,e.b=vi.b,e}getStyle(e=is){Tr.workingToColorSpace(vi.copy(this),e);const r=vi.r,n=vi.g,i=vi.b;return e!==is?`color(${e} ${r.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,r,n){return this.getHSL(fc),this.setHSL(fc.h+e,fc.s+r,fc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,n){return this.r=e.r+(r.r-e.r)*n,this.g=e.g+(r.g-e.g)*n,this.b=e.b+(r.b-e.b)*n,this}lerpHSL(e,r){this.getHSL(fc),e.getHSL(dR);const n=wC(fc.h,dR.h,r),i=wC(fc.s,dR.s,r),a=wC(fc.l,dR.l,r);return this.setHSL(n,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,n=this.g,i=this.b,a=e.elements;return this.r=a[0]*r+a[3]*n+a[6]*i,this.g=a[1]*r+a[4]*n+a[7]*i,this.b=a[2]*r+a[5]*n+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vi=new br;br.NAMES=aEe;let HWe=0;class e0 extends Ef{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:HWe++}),this.uuid=ZI(),this.name="",this.type="Material",this.blending=_p,this.side=wl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sV,this.blendDst=oV,this.blendEquation=Cd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new br(0,0,0),this.blendAlpha=0,this.depthFunc=Rp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=XY,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rh,this.stencilZFail=rh,this.stencilZPass=rh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const n=e[r];if(n===void 0){er(`Material: parameter '${r}' has value of undefined.`);continue}const i=this[r];if(i===void 0){er(`Material: '${r}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[r]=n}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_p&&(n.blending=this.blending),this.side!==wl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==sV&&(n.blendSrc=this.blendSrc),this.blendDst!==oV&&(n.blendDst=this.blendDst),this.blendEquation!==Cd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Rp&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==XY&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==rh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==rh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==rh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(r){const a=i(e.textures),s=i(e.images);a.length>0&&(n.textures=a),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let n=null;if(r!==null){const i=r.length;n=new Array(i);for(let a=0;a!==i;++a)n[a]=r[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Fk extends e0{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new br(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Uo,this.combine=Ak,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const On=new Ze,fR=new tr;let kWe=0;class jo{constructor(e,r,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:kWe++}),this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=n,this.usage=JY,this.updateRanges=[],this.gpuType=Oo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,n){e*=this.itemSize,n*=r.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=r.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,n=this.count;r<n;r++)fR.fromBufferAttribute(this,r),fR.applyMatrix3(e),this.setXY(r,fR.x,fR.y);else if(this.itemSize===3)for(let r=0,n=this.count;r<n;r++)On.fromBufferAttribute(this,r),On.applyMatrix3(e),this.setXYZ(r,On.x,On.y,On.z);return this}applyMatrix4(e){for(let r=0,n=this.count;r<n;r++)On.fromBufferAttribute(this,r),On.applyMatrix4(e),this.setXYZ(r,On.x,On.y,On.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)On.fromBufferAttribute(this,r),On.applyNormalMatrix(e),this.setXYZ(r,On.x,On.y,On.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)On.fromBufferAttribute(this,r),On.transformDirection(e),this.setXYZ(r,On.x,On.y,On.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let n=this.array[e*this.itemSize+r];return this.normalized&&(n=l_(n,this.array)),n}setComponent(e,r,n){return this.normalized&&(n=na(n,this.array)),this.array[e*this.itemSize+r]=n,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=l_(r,this.array)),r}setX(e,r){return this.normalized&&(r=na(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=l_(r,this.array)),r}setY(e,r){return this.normalized&&(r=na(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=l_(r,this.array)),r}setZ(e,r){return this.normalized&&(r=na(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=l_(r,this.array)),r}setW(e,r){return this.normalized&&(r=na(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,n){return e*=this.itemSize,this.normalized&&(r=na(r,this.array),n=na(n,this.array)),this.array[e+0]=r,this.array[e+1]=n,this}setXYZ(e,r,n,i){return e*=this.itemSize,this.normalized&&(r=na(r,this.array),n=na(n,this.array),i=na(i,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,r,n,i,a){return e*=this.itemSize,this.normalized&&(r=na(r,this.array),n=na(n,this.array),i=na(i,this.array),a=na(a,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==JY&&(e.usage=this.usage),e}}class sEe extends jo{constructor(e,r,n){super(new Uint16Array(e),r,n)}}class oEe extends jo{constructor(e,r,n){super(new Uint32Array(e),r,n)}}class Ei extends jo{constructor(e,r,n){super(new Float32Array(e),r,n)}}let zWe=0;const Xa=new kr,GC=new Zn,fh=new Ze,xa=new eO,p_=new eO,Wn=new Ze;class Ga extends Ef{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zWe++}),this.uuid=ZI(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nEe(e)?oEe:sEe)(e,1):this.index=e,this}setIndirect(e,r=0){return this.indirect=e,this.indirectOffset=r,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,n=0){this.groups.push({start:e,count:r,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new cr().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xa.makeRotationFromQuaternion(e),this.applyMatrix4(Xa),this}rotateX(e){return Xa.makeRotationX(e),this.applyMatrix4(Xa),this}rotateY(e){return Xa.makeRotationY(e),this.applyMatrix4(Xa),this}rotateZ(e){return Xa.makeRotationZ(e),this.applyMatrix4(Xa),this}translate(e,r,n){return Xa.makeTranslation(e,r,n),this.applyMatrix4(Xa),this}scale(e,r,n){return Xa.makeScale(e,r,n),this.applyMatrix4(Xa),this}lookAt(e){return GC.lookAt(e),GC.updateMatrix(),this.applyMatrix4(GC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fh).negate(),this.translate(fh.x,fh.y,fh.z),this}setFromPoints(e){const r=this.getAttribute("position");if(r===void 0){const n=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ei(n,3))}else{const n=Math.min(e.length,r.count);for(let i=0;i<n;i++){const a=e[i];r.setXYZ(i,a.x,a.y,a.z||0)}e.length>r.count&&er("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new eO);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ar("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ze(-1/0,-1/0,-1/0),new Ze(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let n=0,i=r.length;n<i;n++){const a=r[n];xa.setFromBufferAttribute(a),this.morphTargetsRelative?(Wn.addVectors(this.boundingBox.min,xa.min),this.boundingBox.expandByPoint(Wn),Wn.addVectors(this.boundingBox.max,xa.max),this.boundingBox.expandByPoint(Wn)):(this.boundingBox.expandByPoint(xa.min),this.boundingBox.expandByPoint(xa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Ar('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new EF);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ar("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ze,1/0);return}if(e){const n=this.boundingSphere.center;if(xa.setFromBufferAttribute(e),r)for(let a=0,s=r.length;a<s;a++){const o=r[a];p_.setFromBufferAttribute(o),this.morphTargetsRelative?(Wn.addVectors(xa.min,p_.min),xa.expandByPoint(Wn),Wn.addVectors(xa.max,p_.max),xa.expandByPoint(Wn)):(xa.expandByPoint(p_.min),xa.expandByPoint(p_.max))}xa.getCenter(n);let i=0;for(let a=0,s=e.count;a<s;a++)Wn.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(Wn));if(r)for(let a=0,s=r.length;a<s;a++){const o=r[a],c=this.morphTargetsRelative;for(let u=0,l=o.count;u<l;u++)Wn.fromBufferAttribute(o,u),c&&(fh.fromBufferAttribute(e,u),Wn.add(fh)),i=Math.max(i,n.distanceToSquared(Wn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Ar('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){Ar("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=r.position,i=r.normal,a=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jo(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let j=0;j<n.count;j++)o[j]=new Ze,c[j]=new Ze;const u=new Ze,l=new Ze,d=new Ze,f=new tr,h=new tr,p=new tr,_=new Ze,g=new Ze;function m(j,F,N){u.fromBufferAttribute(n,j),l.fromBufferAttribute(n,F),d.fromBufferAttribute(n,N),f.fromBufferAttribute(a,j),h.fromBufferAttribute(a,F),p.fromBufferAttribute(a,N),l.sub(u),d.sub(u),h.sub(f),p.sub(f);const R=1/(h.x*p.y-p.x*h.y);isFinite(R)&&(_.copy(l).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(R),g.copy(d).multiplyScalar(h.x).addScaledVector(l,-p.x).multiplyScalar(R),o[j].add(_),o[F].add(_),o[N].add(_),c[j].add(g),c[F].add(g),c[N].add(g))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let j=0,F=y.length;j<F;++j){const N=y[j],R=N.start,C=N.count;for(let M=R,U=R+C;M<U;M+=3)m(e.getX(M+0),e.getX(M+1),e.getX(M+2))}const v=new Ze,A=new Ze,T=new Ze,S=new Ze;function P(j){T.fromBufferAttribute(i,j),S.copy(T);const F=o[j];v.copy(F),v.sub(T.multiplyScalar(T.dot(F))).normalize(),A.crossVectors(S,F);const R=A.dot(c[j])<0?-1:1;s.setXYZW(j,v.x,v.y,v.z,R)}for(let j=0,F=y.length;j<F;++j){const N=y[j],R=N.start,C=N.count;for(let M=R,U=R+C;M<U;M+=3)P(e.getX(M+0)),P(e.getX(M+1)),P(e.getX(M+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new jo(new Float32Array(r.count*3),3),this.setAttribute("normal",n);else for(let f=0,h=n.count;f<h;f++)n.setXYZ(f,0,0,0);const i=new Ze,a=new Ze,s=new Ze,o=new Ze,c=new Ze,u=new Ze,l=new Ze,d=new Ze;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),_=e.getX(f+1),g=e.getX(f+2);i.fromBufferAttribute(r,p),a.fromBufferAttribute(r,_),s.fromBufferAttribute(r,g),l.subVectors(s,a),d.subVectors(i,a),l.cross(d),o.fromBufferAttribute(n,p),c.fromBufferAttribute(n,_),u.fromBufferAttribute(n,g),o.add(l),c.add(l),u.add(l),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(_,c.x,c.y,c.z),n.setXYZ(g,u.x,u.y,u.z)}else for(let f=0,h=r.count;f<h;f+=3)i.fromBufferAttribute(r,f+0),a.fromBufferAttribute(r,f+1),s.fromBufferAttribute(r,f+2),l.subVectors(s,a),d.subVectors(i,a),l.cross(d),n.setXYZ(f+0,l.x,l.y,l.z),n.setXYZ(f+1,l.x,l.y,l.z),n.setXYZ(f+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,n=e.count;r<n;r++)Wn.fromBufferAttribute(e,r),Wn.normalize(),e.setXYZ(r,Wn.x,Wn.y,Wn.z)}toNonIndexed(){function e(o,c){const u=o.array,l=o.itemSize,d=o.normalized,f=new u.constructor(c.length*l);let h=0,p=0;for(let _=0,g=c.length;_<g;_++){o.isInterleavedBufferAttribute?h=c[_]*o.data.stride+o.offset:h=c[_]*l;for(let m=0;m<l;m++)f[p++]=u[h++]}return new jo(f,l,d)}if(this.index===null)return er("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Ga,n=this.index.array,i=this.attributes;for(const o in i){const c=i[o],u=e(c,n);r.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const c=[],u=a[o];for(let l=0,d=u.length;l<d;l++){const f=u[l],h=e(f,n);c.push(h)}r.morphAttributes[o]=c}r.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const u=s[o];r.addGroup(u.start,u.count,u.materialIndex)}return r}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const n=this.attributes;for(const c in n){const u=n[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let a=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],l=[];for(let d=0,f=u.length;d<f;d++){const h=u[d];l.push(h.toJSON(e.data))}l.length>0&&(i[c]=l,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const u in i){const l=i[u];this.setAttribute(u,l.clone(r))}const a=e.morphAttributes;for(const u in a){const l=[],d=a[u];for(let f=0,h=d.length;f<h;f++)l.push(d[f].clone(r));this.morphAttributes[u]=l}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,l=s.length;u<l;u++){const d=s[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const d$=new kr,ed=new IF,hR=new EF,f$=new Ze,pR=new Ze,_R=new Ze,mR=new Ze,HC=new Ze,gR=new Ze,h$=new Ze,yR=new Ze;class Fa extends Zn{constructor(e=new Ga,r=new Fk){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,r){const n=this.geometry,i=n.attributes.position,a=n.morphAttributes.position,s=n.morphTargetsRelative;r.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){gR.set(0,0,0);for(let c=0,u=a.length;c<u;c++){const l=o[c],d=a[c];l!==0&&(HC.fromBufferAttribute(d,e),s?gR.addScaledVector(HC,l):gR.addScaledVector(HC.sub(r),l))}r.add(gR)}return r}raycast(e,r){const n=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),hR.copy(n.boundingSphere),hR.applyMatrix4(a),ed.copy(e.ray).recast(e.near),!(hR.containsPoint(ed.origin)===!1&&(ed.intersectSphere(hR,f$)===null||ed.origin.distanceToSquared(f$)>(e.far-e.near)**2))&&(d$.copy(a).invert(),ed.copy(e.ray).applyMatrix4(d$),!(n.boundingBox!==null&&ed.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,r,ed)))}_computeIntersections(e,r,n){let i;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,u=a.attributes.uv,l=a.attributes.uv1,d=a.attributes.normal,f=a.groups,h=a.drawRange;if(o!==null)if(Array.isArray(s))for(let p=0,_=f.length;p<_;p++){const g=f[p],m=s[g.materialIndex],y=Math.max(g.start,h.start),v=Math.min(o.count,Math.min(g.start+g.count,h.start+h.count));for(let A=y,T=v;A<T;A+=3){const S=o.getX(A),P=o.getX(A+1),j=o.getX(A+2);i=bR(this,m,e,n,u,l,d,S,P,j),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=g.materialIndex,r.push(i))}}else{const p=Math.max(0,h.start),_=Math.min(o.count,h.start+h.count);for(let g=p,m=_;g<m;g+=3){const y=o.getX(g),v=o.getX(g+1),A=o.getX(g+2);i=bR(this,s,e,n,u,l,d,y,v,A),i&&(i.faceIndex=Math.floor(g/3),r.push(i))}}else if(c!==void 0)if(Array.isArray(s))for(let p=0,_=f.length;p<_;p++){const g=f[p],m=s[g.materialIndex],y=Math.max(g.start,h.start),v=Math.min(c.count,Math.min(g.start+g.count,h.start+h.count));for(let A=y,T=v;A<T;A+=3){const S=A,P=A+1,j=A+2;i=bR(this,m,e,n,u,l,d,S,P,j),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=g.materialIndex,r.push(i))}}else{const p=Math.max(0,h.start),_=Math.min(c.count,h.start+h.count);for(let g=p,m=_;g<m;g+=3){const y=g,v=g+1,A=g+2;i=bR(this,s,e,n,u,l,d,y,v,A),i&&(i.faceIndex=Math.floor(g/3),r.push(i))}}}}function QWe(t,e,r,n,i,a,s,o){let c;if(e.side===pa?c=n.intersectTriangle(s,a,i,!0,o):c=n.intersectTriangle(i,a,s,e.side===wl,o),c===null)return null;yR.copy(o),yR.applyMatrix4(t.matrixWorld);const u=r.ray.origin.distanceTo(yR);return u<r.near||u>r.far?null:{distance:u,point:yR.clone(),object:t}}function bR(t,e,r,n,i,a,s,o,c,u){t.getVertexPosition(o,pR),t.getVertexPosition(c,_R),t.getVertexPosition(u,mR);const l=QWe(t,e,r,n,pR,_R,mR,h$);if(l){const d=new Ze;Vs.getBarycoord(h$,pR,_R,mR,d),i&&(l.uv=Vs.getInterpolatedAttribute(i,o,c,u,d,new tr)),a&&(l.uv1=Vs.getInterpolatedAttribute(a,o,c,u,d,new tr)),s&&(l.normal=Vs.getInterpolatedAttribute(s,o,c,u,d,new Ze),l.normal.dot(n.direction)>0&&l.normal.multiplyScalar(-1));const f={a:o,b:c,c:u,normal:new Ze,materialIndex:0};Vs.getNormal(pR,_R,mR,f.normal),l.face=f,l.barycoord=d}return l}class tO extends Ga{constructor(e=1,r=1,n=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:n,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const c=[],u=[],l=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,n,r,e,s,a,0),p("z","y","x",1,-1,n,r,-e,s,a,1),p("x","z","y",1,1,e,n,r,i,s,2),p("x","z","y",1,-1,e,n,-r,i,s,3),p("x","y","z",1,-1,e,r,n,i,a,4),p("x","y","z",-1,-1,e,r,-n,i,a,5),this.setIndex(c),this.setAttribute("position",new Ei(u,3)),this.setAttribute("normal",new Ei(l,3)),this.setAttribute("uv",new Ei(d,2));function p(_,g,m,y,v,A,T,S,P,j,F){const N=A/P,R=T/j,C=A/2,M=T/2,U=S/2,B=P+1,G=j+1;let K=0,$=0;const se=new Ze;for(let pe=0;pe<G;pe++){const we=pe*R-M;for(let Ce=0;Ce<B;Ce++){const Le=Ce*N-C;se[_]=Le*y,se[g]=we*v,se[m]=U,u.push(se.x,se.y,se.z),se[_]=0,se[g]=0,se[m]=S>0?1:-1,l.push(se.x,se.y,se.z),d.push(Ce/P),d.push(1-pe/j),K+=1}}for(let pe=0;pe<j;pe++)for(let we=0;we<P;we++){const Ce=f+we+B*pe,Le=f+we+B*(pe+1),Ie=f+(we+1)+B*(pe+1),Oe=f+(we+1)+B*pe;c.push(Ce,Le,Oe),c.push(Le,Ie,Oe),$+=6}o.addGroup(h,$,F),h+=$,f+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tO(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mp(t){const e={};for(const r in t){e[r]={};for(const n in t[r]){const i=t[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(er("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][n]=null):e[r][n]=i.clone():Array.isArray(i)?e[r][n]=i.slice():e[r][n]=i}}return e}function Ui(t){const e={};for(let r=0;r<t.length;r++){const n=Mp(t[r]);for(const i in n)e[i]=n[i]}return e}function WWe(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].clone());return e}function uEe(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Tr.workingColorSpace}const KWe={clone:Mp,merge:Ui};var XWe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,JWe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Vo extends e0{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=XWe,this.fragmentShader=JWe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mp(e.uniforms),this.uniformsGroups=WWe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?r.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?r.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?r.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?r.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?r.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?r.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?r.uniforms[i]={type:"m4",value:s.toArray()}:r.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(r.extensions=n),r}}class cEe extends Zn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new kr,this.projectionMatrix=new kr,this.projectionMatrixInverse=new kr,this.coordinateSystem=Ro,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const hc=new Ze,p$=new tr,_$=new tr;class os extends cEe{constructor(e=50,r=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=YV*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(v3*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return YV*2*Math.atan(Math.tan(v3*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,n){hc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(hc.x,hc.y).multiplyScalar(-e/hc.z),hc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(hc.x,hc.y).multiplyScalar(-e/hc.z)}getViewSize(e,r){return this.getViewBounds(e,p$,_$),r.subVectors(_$,p$)}setViewOffset(e,r,n,i,a,s){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(v3*.5*this.fov)/this.zoom,n=2*r,i=this.aspect*n,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/c,r-=s.offsetY*n/u,i*=s.width/c,n*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,r,r-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const hh=-90,ph=1;class YWe extends Zn{constructor(e,r,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new os(hh,ph,e,r);i.layers=this.layers,this.add(i);const a=new os(hh,ph,e,r);a.layers=this.layers,this.add(a);const s=new os(hh,ph,e,r);s.layers=this.layers,this.add(s);const o=new os(hh,ph,e,r);o.layers=this.layers,this.add(o);const c=new os(hh,ph,e,r);c.layers=this.layers,this.add(c);const u=new os(hh,ph,e,r);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[n,i,a,s,o,c]=r;for(const u of r)this.remove(u);if(e===Ro)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===DN)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of r)this.add(u),u.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,u,l]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(r,a),e.setRenderTarget(n,1,i),e.render(r,s),e.setRenderTarget(n,2,i),e.render(r,o),e.setRenderTarget(n,3,i),e.render(r,c),e.setRenderTarget(n,4,i),e.render(r,u),n.texture.generateMipmaps=_,e.setRenderTarget(n,5,i),e.render(r,l),e.setRenderTarget(d,f,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class lEe extends zi{constructor(e=[],r=yf,n,i,a,s,o,c,u,l){super(e,r,n,i,a,s,o,c,u,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class dEe extends Lo{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new lEe(i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new tO(5,5,5),a=new Vo({name:"CubemapFromEquirect",uniforms:Mp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:pa,blending:Fu});a.uniforms.tEquirect.value=r;const s=new Fa(i,a),o=r.minFilter;return r.minFilter===Kd&&(r.minFilter=xi),new YWe(1,10,this).update(e,s),r.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,r=!0,n=!0,i=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(r,n,i);e.setRenderTarget(a)}}class vR extends Zn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $We={type:"move"};class kC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new vR,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new vR,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ze,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ze),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new vR,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ze,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ze),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const n of e.hand.values())this._getHandJoint(r,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,n){let i=null,a=null,s=null;const o=this._targetRay,c=this._grip,u=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const _ of e.hand.values()){const g=r.getJointPose(_,n),m=this._getHandJoint(u,_);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const l=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=l.position.distanceTo(d.position),h=.02,p=.005;u.inputState.pinching&&f>h+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=h-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=r.getPose(e.gripSpace,n),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(i=r.getPose(e.targetRaySpace,n),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent($We)))}return o!==null&&(o.visible=i!==null),c!==null&&(c.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const n=new vR;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[r.jointName]=n,e.add(n)}return e.joints[r.jointName]}}class ZWe extends Zn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Uo,this.environmentIntensity=1,this.environmentRotation=new Uo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class eKe extends zi{constructor(e=null,r=1,n=1,i,a,s,o,c,u=si,l=si,d,f){super(null,s,o,c,u,l,i,a,d,f),this.isDataTexture=!0,this.image={data:e,width:r,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zC=new Ze,tKe=new Ze,rKe=new cr;class Yc{constructor(e=new Ze(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,n,i){return this.normal.set(e,r,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,n){const i=zC.subVectors(n,r).cross(tKe.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const n=e.delta(zC),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:r.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const r=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return r<0&&n>0||n<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const n=r||rKe.getNormalMatrix(e),i=this.coplanarPoint(zC).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const td=new EF,nKe=new tr(.5,.5),AR=new Ze;class Mk{constructor(e=new Yc,r=new Yc,n=new Yc,i=new Yc,a=new Yc,s=new Yc){this.planes=[e,r,n,i,a,s]}set(e,r,n,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(r),o[2].copy(n),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const r=this.planes;for(let n=0;n<6;n++)r[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,r=Ro,n=!1){const i=this.planes,a=e.elements,s=a[0],o=a[1],c=a[2],u=a[3],l=a[4],d=a[5],f=a[6],h=a[7],p=a[8],_=a[9],g=a[10],m=a[11],y=a[12],v=a[13],A=a[14],T=a[15];if(i[0].setComponents(u-s,h-l,m-p,T-y).normalize(),i[1].setComponents(u+s,h+l,m+p,T+y).normalize(),i[2].setComponents(u+o,h+d,m+_,T+v).normalize(),i[3].setComponents(u-o,h-d,m-_,T-v).normalize(),n)i[4].setComponents(c,f,g,A).normalize(),i[5].setComponents(u-c,h-f,m-g,T-A).normalize();else if(i[4].setComponents(u-c,h-f,m-g,T-A).normalize(),r===Ro)i[5].setComponents(u+c,h+f,m+g,T+A).normalize();else if(r===DN)i[5].setComponents(c,f,g,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),td.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),td.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(td)}intersectsSprite(e){td.center.set(0,0,0);const r=nKe.distanceTo(e.center);return td.radius=.7071067811865476+r,td.applyMatrix4(e.matrixWorld),this.intersectsSphere(td)}intersectsSphere(e){const r=this.planes,n=e.center,i=-e.radius;for(let a=0;a<6;a++)if(r[a].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const r=this.planes;for(let n=0;n<6;n++){const i=r[n];if(AR.x=i.normal.x>0?e.max.x:e.min.x,AR.y=i.normal.y>0?e.max.y:e.min.y,AR.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(AR)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let n=0;n<6;n++)if(r[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class fEe extends e0{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new br(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const LN=new Ze,jN=new Ze,m$=new kr,__=new IF,TR=new EF,QC=new Ze,g$=new Ze;class iKe extends Zn{constructor(e=new Ga,r=new fEe){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,n=[0];for(let i=1,a=r.count;i<a;i++)LN.fromBufferAttribute(r,i-1),jN.fromBufferAttribute(r,i),n[i]=n[i-1],n[i]+=LN.distanceTo(jN);e.setAttribute("lineDistance",new Ei(n,1))}else er("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),TR.copy(n.boundingSphere),TR.applyMatrix4(i),TR.radius+=a,e.ray.intersectsSphere(TR)===!1)return;m$.copy(i).invert(),__.copy(e.ray).applyMatrix4(m$);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=this.isLineSegments?2:1,l=n.index,f=n.attributes.position;if(l!==null){const h=Math.max(0,s.start),p=Math.min(l.count,s.start+s.count);for(let _=h,g=p-1;_<g;_+=u){const m=l.getX(_),y=l.getX(_+1),v=wR(this,e,__,c,m,y,_);v&&r.push(v)}if(this.isLineLoop){const _=l.getX(p-1),g=l.getX(h),m=wR(this,e,__,c,_,g,p-1);m&&r.push(m)}}else{const h=Math.max(0,s.start),p=Math.min(f.count,s.start+s.count);for(let _=h,g=p-1;_<g;_+=u){const m=wR(this,e,__,c,_,_+1,_);m&&r.push(m)}if(this.isLineLoop){const _=wR(this,e,__,c,p-1,h,p-1);_&&r.push(_)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function wR(t,e,r,n,i,a,s){const o=t.geometry.attributes.position;if(LN.fromBufferAttribute(o,i),jN.fromBufferAttribute(o,a),r.distanceSqToSegment(LN,jN,QC,g$)>n)return;QC.applyMatrix4(t.matrixWorld);const u=e.ray.origin.distanceTo(QC);if(!(u<e.near||u>e.far))return{distance:u,point:g$.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}class II extends zi{constructor(e,r,n=qo,i,a,s,o=si,c=si,u,l=Hu,d=1){if(l!==Hu&&l!==Xd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:r,depth:d};super(f,i,a,s,o,c,l,n,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Pk(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class aKe extends II{constructor(e,r=qo,n=yf,i,a,s=si,o=si,c,u=Hu){const l={width:e,height:e,depth:1},d=[l,l,l,l,l,l];super(e,e,r,n,i,a,s,o,c,u),this.image=d,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class hEe extends zi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Dk extends Ga{constructor(e=1,r=1,n=1,i=32,a=1,s=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:n,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c};const u=this;i=Math.floor(i),a=Math.floor(a);const l=[],d=[],f=[],h=[];let p=0;const _=[],g=n/2;let m=0;y(),s===!1&&(e>0&&v(!0),r>0&&v(!1)),this.setIndex(l),this.setAttribute("position",new Ei(d,3)),this.setAttribute("normal",new Ei(f,3)),this.setAttribute("uv",new Ei(h,2));function y(){const A=new Ze,T=new Ze;let S=0;const P=(r-e)/n;for(let j=0;j<=a;j++){const F=[],N=j/a,R=N*(r-e)+e;for(let C=0;C<=i;C++){const M=C/i,U=M*c+o,B=Math.sin(U),G=Math.cos(U);T.x=R*B,T.y=-N*n+g,T.z=R*G,d.push(T.x,T.y,T.z),A.set(B,P,G).normalize(),f.push(A.x,A.y,A.z),h.push(M,1-N),F.push(p++)}_.push(F)}for(let j=0;j<i;j++)for(let F=0;F<a;F++){const N=_[F][j],R=_[F+1][j],C=_[F+1][j+1],M=_[F][j+1];(e>0||F!==0)&&(l.push(N,R,M),S+=3),(r>0||F!==a-1)&&(l.push(R,C,M),S+=3)}u.addGroup(m,S,0),m+=S}function v(A){const T=p,S=new tr,P=new Ze;let j=0;const F=A===!0?e:r,N=A===!0?1:-1;for(let C=1;C<=i;C++)d.push(0,g*N,0),f.push(0,N,0),h.push(.5,.5),p++;const R=p;for(let C=0;C<=i;C++){const U=C/i*c+o,B=Math.cos(U),G=Math.sin(U);P.x=F*G,P.y=g*N,P.z=F*B,d.push(P.x,P.y,P.z),f.push(0,N,0),S.x=B*.5+.5,S.y=G*.5*N+.5,h.push(S.x,S.y),p++}for(let C=0;C<i;C++){const M=T+C,U=R+C;A===!0?l.push(U,U+1,M):l.push(U+1,U,M),j+=3}u.addGroup(m,j,A===!0?1:2),m+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dk(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ck extends Dk{constructor(e=1,r=1,n=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,r,n,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Ck(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class OF extends Ga{constructor(e=1,r=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:n,heightSegments:i};const a=e/2,s=r/2,o=Math.floor(n),c=Math.floor(i),u=o+1,l=c+1,d=e/o,f=r/c,h=[],p=[],_=[],g=[];for(let m=0;m<l;m++){const y=m*f-s;for(let v=0;v<u;v++){const A=v*d-a;p.push(A,-y,0),_.push(0,0,1),g.push(v/o),g.push(1-m/c)}}for(let m=0;m<c;m++)for(let y=0;y<o;y++){const v=y+u*m,A=y+u*(m+1),T=y+1+u*(m+1),S=y+1+u*m;h.push(v,A,S),h.push(A,T,S)}this.setIndex(h),this.setAttribute("position",new Ei(p,3)),this.setAttribute("normal",new Ei(_,3)),this.setAttribute("uv",new Ei(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OF(e.width,e.height,e.widthSegments,e.heightSegments)}}class Lk extends Ga{constructor(e=1,r=32,n=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:n,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},r=Math.max(3,Math.floor(r)),n=Math.max(2,Math.floor(n));const c=Math.min(s+o,Math.PI);let u=0;const l=[],d=new Ze,f=new Ze,h=[],p=[],_=[],g=[];for(let m=0;m<=n;m++){const y=[],v=m/n;let A=0;m===0&&s===0?A=.5/r:m===n&&c===Math.PI&&(A=-.5/r);for(let T=0;T<=r;T++){const S=T/r;d.x=-e*Math.cos(i+S*a)*Math.sin(s+v*o),d.y=e*Math.cos(s+v*o),d.z=e*Math.sin(i+S*a)*Math.sin(s+v*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),_.push(f.x,f.y,f.z),g.push(S+A,1-v),y.push(u++)}l.push(y)}for(let m=0;m<n;m++)for(let y=0;y<r;y++){const v=l[m][y+1],A=l[m][y],T=l[m+1][y],S=l[m+1][y+1];(m!==0||s>0)&&h.push(v,A,S),(m!==n-1||c<Math.PI)&&h.push(A,T,S)}this.setIndex(h),this.setAttribute("position",new Ei(p,3)),this.setAttribute("normal",new Ei(_,3)),this.setAttribute("uv",new Ei(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lk(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class sKe extends Vo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class oKe extends e0{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new br(16777215),this.specular=new br(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rEe,this.normalScale=new tr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Uo,this.combine=Ak,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uKe extends e0{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yWe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class cKe extends e0{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class pEe extends Zn{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new br(e),this.intensity=r}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,r}}const WC=new kr,y$=new Ze,b$=new Ze;class lKe{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tr(512,512),this.mapType=Ra,this.map=null,this.mapPass=null,this.matrix=new kr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Mk,this._frameExtents=new tr(1,1),this._viewportCount=1,this._viewports=[new Tn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,n=this.matrix;y$.setFromMatrixPosition(e.matrixWorld),r.position.copy(y$),b$.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(b$),r.updateMatrixWorld(),WC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WC,r.coordinateSystem,r.reversedDepth),r.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(WC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class jk extends cEe{constructor(e=-1,r=1,n=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=n,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,n,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=n-e,s=n+e,o=i+r,c=i-r;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=l*this.view.offsetY,c=o-l*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class dKe extends lKe{constructor(){super(new jk(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class fKe extends pEe{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Zn.DEFAULT_UP),this.updateMatrix(),this.target=new Zn,this.shadow=new dKe}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const r=super.toJSON(e);return r.object.shadow=this.shadow.toJSON(),r.object.target=this.target.uuid,r}}class hKe extends pEe{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class pKe extends os{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}const v$=new kr;class _Ke{constructor(e,r,n=0,i=1/0){this.ray=new IF(e,r),this.near=n,this.far=i,this.camera=null,this.layers=new Nk,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):Ar("Raycaster: Unsupported camera type: "+r.type)}setFromXRController(e){return v$.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(v$),this}intersectObject(e,r=!0,n=[]){return $V(e,this,n,r),n.sort(A$),n}intersectObjects(e,r=!0,n=[]){for(let i=0,a=e.length;i<a;i++)$V(e[i],this,n,r);return n.sort(A$),n}}function A$(t,e){return t.distance-e.distance}function $V(t,e,r,n){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,r)===!1&&(i=!1),i===!0&&n===!0){const a=t.children;for(let s=0,o=a.length;s<o;s++)$V(a[s],e,r,!0)}}class T${constructor(e=1,r=0,n=0){this.radius=e,this.phi=r,this.theta=n}set(e,r,n){return this.radius=e,this.phi=r,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=hr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,n){return this.radius=Math.sqrt(e*e+r*r+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(hr(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class mKe extends Ef{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){er("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function w$(t,e,r,n){const i=gKe(n);switch(r){case Zxe:return t*e;case tEe:return t*e/i.components*i.byteLength;case xk:return t*e/i.components*i.byteLength;case Np:return t*e*2/i.components*i.byteLength;case Ek:return t*e*2/i.components*i.byteLength;case eEe:return t*e*3/i.components*i.byteLength;case Gs:return t*e*4/i.components*i.byteLength;case Ik:return t*e*4/i.components*i.byteLength;case m3:case g3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case y3:case b3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case vV:case TV:return Math.max(t,16)*Math.max(e,8)/4;case bV:case AV:return Math.max(t,8)*Math.max(e,8)/2;case wV:case SV:case EV:case IV:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case xV:case OV:case RV:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case PV:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case NV:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case FV:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case MV:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case DV:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case CV:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case LV:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case jV:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case BV:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case qV:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case UV:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case VV:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case GV:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case HV:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case kV:case zV:case QV:return Math.ceil(t/4)*Math.ceil(e/4)*16;case WV:case KV:return Math.ceil(t/4)*Math.ceil(e/4)*8;case XV:case JV:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function gKe(t){switch(t){case Ra:case Xxe:return{byteLength:1,components:1};case SI:case Jxe:case Gu:return{byteLength:2,components:1};case wk:case Sk:return{byteLength:2,components:4};case qo:case Tk:case Oo:return{byteLength:4,components:1};case Yxe:case $xe:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vk}}));typeof window<"u"&&(window.__THREE__?er("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vk);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function _Ee(){let t=null,e=!1,r=null,n=null;function i(a,s){r(a,s),n=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&r!==null&&(n=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){r=a},setContext:function(a){t=a}}}function yKe(t){const e=new WeakMap;function r(o,c){const u=o.array,l=o.usage,d=u.byteLength,f=t.createBuffer();t.bindBuffer(c,f),t.bufferData(c,u,l),o.onUploadCallback();let h;if(u instanceof Float32Array)h=t.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)h=t.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?h=t.HALF_FLOAT:h=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)h=t.SHORT;else if(u instanceof Uint32Array)h=t.UNSIGNED_INT;else if(u instanceof Int32Array)h=t.INT;else if(u instanceof Int8Array)h=t.BYTE;else if(u instanceof Uint8Array)h=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)h=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:d}}function n(o,c,u){const l=c.array,d=c.updateRanges;if(t.bindBuffer(u,o),d.length===0)t.bufferSubData(u,0,l);else{d.sort((h,p)=>h.start-p.start);let f=0;for(let h=1;h<d.length;h++){const p=d[f],_=d[h];_.start<=p.start+p.count+1?p.count=Math.max(p.count,_.start+_.count-p.start):(++f,d[f]=_)}d.length=f+1;for(let h=0,p=d.length;h<p;h++){const _=d[h];t.bufferSubData(u,_.start*l.BYTES_PER_ELEMENT,l,_.start,_.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(t.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const l=e.get(o);(!l||l.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,r(o,c));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,o,c),u.version=o.version}}return{get:i,remove:a,update:s}}var bKe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,vKe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,AKe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,TKe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wKe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,SKe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xKe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,EKe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,IKe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,OKe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,RKe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,PKe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,NKe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,FKe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,MKe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,DKe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,CKe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LKe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jKe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,BKe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,qKe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,UKe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,VKe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,GKe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,HKe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kKe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,zKe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,QKe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,WKe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,KKe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,XKe="gl_FragColor = linearToOutputTexel( gl_FragColor );",JKe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,YKe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$Ke=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,ZKe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eXe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,tXe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rXe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nXe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,iXe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,aXe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sXe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,oXe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,uXe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,cXe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lXe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dXe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fXe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hXe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pXe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_Xe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,mXe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,gXe=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yXe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,bXe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,vXe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,AXe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TXe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wXe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SXe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xXe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,EXe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,IXe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,OXe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,RXe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,PXe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,NXe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,FXe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,MXe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,DXe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,CXe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LXe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,jXe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,BXe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qXe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UXe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,VXe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,GXe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,HXe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,kXe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,zXe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,QXe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,WXe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KXe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,XXe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JXe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,YXe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$Xe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZXe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,eJe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,tJe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rJe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,nJe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,iJe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,aJe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,sJe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,oJe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,uJe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,cJe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,lJe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dJe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fJe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,hJe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,pJe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_Je=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mJe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,gJe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yJe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,bJe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vJe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AJe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TJe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wJe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SJe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xJe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,EJe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,IJe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,OJe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,RJe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PJe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NJe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FJe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,MJe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DJe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CJe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LJe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,jJe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BJe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,qJe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,UJe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VJe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GJe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,HJe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kJe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zJe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QJe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,WJe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KJe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XJe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,JJe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YJe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,dr={alphahash_fragment:bKe,alphahash_pars_fragment:vKe,alphamap_fragment:AKe,alphamap_pars_fragment:TKe,alphatest_fragment:wKe,alphatest_pars_fragment:SKe,aomap_fragment:xKe,aomap_pars_fragment:EKe,batching_pars_vertex:IKe,batching_vertex:OKe,begin_vertex:RKe,beginnormal_vertex:PKe,bsdfs:NKe,iridescence_fragment:FKe,bumpmap_pars_fragment:MKe,clipping_planes_fragment:DKe,clipping_planes_pars_fragment:CKe,clipping_planes_pars_vertex:LKe,clipping_planes_vertex:jKe,color_fragment:BKe,color_pars_fragment:qKe,color_pars_vertex:UKe,color_vertex:VKe,common:GKe,cube_uv_reflection_fragment:HKe,defaultnormal_vertex:kKe,displacementmap_pars_vertex:zKe,displacementmap_vertex:QKe,emissivemap_fragment:WKe,emissivemap_pars_fragment:KKe,colorspace_fragment:XKe,colorspace_pars_fragment:JKe,envmap_fragment:YKe,envmap_common_pars_fragment:$Ke,envmap_pars_fragment:ZKe,envmap_pars_vertex:eXe,envmap_physical_pars_fragment:dXe,envmap_vertex:tXe,fog_vertex:rXe,fog_pars_vertex:nXe,fog_fragment:iXe,fog_pars_fragment:aXe,gradientmap_pars_fragment:sXe,lightmap_pars_fragment:oXe,lights_lambert_fragment:uXe,lights_lambert_pars_fragment:cXe,lights_pars_begin:lXe,lights_toon_fragment:fXe,lights_toon_pars_fragment:hXe,lights_phong_fragment:pXe,lights_phong_pars_fragment:_Xe,lights_physical_fragment:mXe,lights_physical_pars_fragment:gXe,lights_fragment_begin:yXe,lights_fragment_maps:bXe,lights_fragment_end:vXe,logdepthbuf_fragment:AXe,logdepthbuf_pars_fragment:TXe,logdepthbuf_pars_vertex:wXe,logdepthbuf_vertex:SXe,map_fragment:xXe,map_pars_fragment:EXe,map_particle_fragment:IXe,map_particle_pars_fragment:OXe,metalnessmap_fragment:RXe,metalnessmap_pars_fragment:PXe,morphinstance_vertex:NXe,morphcolor_vertex:FXe,morphnormal_vertex:MXe,morphtarget_pars_vertex:DXe,morphtarget_vertex:CXe,normal_fragment_begin:LXe,normal_fragment_maps:jXe,normal_pars_fragment:BXe,normal_pars_vertex:qXe,normal_vertex:UXe,normalmap_pars_fragment:VXe,clearcoat_normal_fragment_begin:GXe,clearcoat_normal_fragment_maps:HXe,clearcoat_pars_fragment:kXe,iridescence_pars_fragment:zXe,opaque_fragment:QXe,packing:WXe,premultiplied_alpha_fragment:KXe,project_vertex:XXe,dithering_fragment:JXe,dithering_pars_fragment:YXe,roughnessmap_fragment:$Xe,roughnessmap_pars_fragment:ZXe,shadowmap_pars_fragment:eJe,shadowmap_pars_vertex:tJe,shadowmap_vertex:rJe,shadowmask_pars_fragment:nJe,skinbase_vertex:iJe,skinning_pars_vertex:aJe,skinning_vertex:sJe,skinnormal_vertex:oJe,specularmap_fragment:uJe,specularmap_pars_fragment:cJe,tonemapping_fragment:lJe,tonemapping_pars_fragment:dJe,transmission_fragment:fJe,transmission_pars_fragment:hJe,uv_pars_fragment:pJe,uv_pars_vertex:_Je,uv_vertex:mJe,worldpos_vertex:gJe,background_vert:yJe,background_frag:bJe,backgroundCube_vert:vJe,backgroundCube_frag:AJe,cube_vert:TJe,cube_frag:wJe,depth_vert:SJe,depth_frag:xJe,distance_vert:EJe,distance_frag:IJe,equirect_vert:OJe,equirect_frag:RJe,linedashed_vert:PJe,linedashed_frag:NJe,meshbasic_vert:FJe,meshbasic_frag:MJe,meshlambert_vert:DJe,meshlambert_frag:CJe,meshmatcap_vert:LJe,meshmatcap_frag:jJe,meshnormal_vert:BJe,meshnormal_frag:qJe,meshphong_vert:UJe,meshphong_frag:VJe,meshphysical_vert:GJe,meshphysical_frag:HJe,meshtoon_vert:kJe,meshtoon_frag:zJe,points_vert:QJe,points_frag:WJe,shadow_vert:KJe,shadow_frag:XJe,sprite_vert:JJe,sprite_frag:YJe},It={common:{diffuse:{value:new br(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cr},alphaMap:{value:null},alphaMapTransform:{value:new cr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cr}},envmap:{envMap:{value:null},envMapRotation:{value:new cr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cr},normalScale:{value:new tr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new br(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new br(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cr},alphaTest:{value:0},uvTransform:{value:new cr}},sprite:{diffuse:{value:new br(16777215)},opacity:{value:1},center:{value:new tr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cr},alphaMap:{value:null},alphaMapTransform:{value:new cr},alphaTest:{value:0}}},So={basic:{uniforms:Ui([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.fog]),vertexShader:dr.meshbasic_vert,fragmentShader:dr.meshbasic_frag},lambert:{uniforms:Ui([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new br(0)}}]),vertexShader:dr.meshlambert_vert,fragmentShader:dr.meshlambert_frag},phong:{uniforms:Ui([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new br(0)},specular:{value:new br(1118481)},shininess:{value:30}}]),vertexShader:dr.meshphong_vert,fragmentShader:dr.meshphong_frag},standard:{uniforms:Ui([It.common,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.roughnessmap,It.metalnessmap,It.fog,It.lights,{emissive:{value:new br(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dr.meshphysical_vert,fragmentShader:dr.meshphysical_frag},toon:{uniforms:Ui([It.common,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.gradientmap,It.fog,It.lights,{emissive:{value:new br(0)}}]),vertexShader:dr.meshtoon_vert,fragmentShader:dr.meshtoon_frag},matcap:{uniforms:Ui([It.common,It.bumpmap,It.normalmap,It.displacementmap,It.fog,{matcap:{value:null}}]),vertexShader:dr.meshmatcap_vert,fragmentShader:dr.meshmatcap_frag},points:{uniforms:Ui([It.points,It.fog]),vertexShader:dr.points_vert,fragmentShader:dr.points_frag},dashed:{uniforms:Ui([It.common,It.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dr.linedashed_vert,fragmentShader:dr.linedashed_frag},depth:{uniforms:Ui([It.common,It.displacementmap]),vertexShader:dr.depth_vert,fragmentShader:dr.depth_frag},normal:{uniforms:Ui([It.common,It.bumpmap,It.normalmap,It.displacementmap,{opacity:{value:1}}]),vertexShader:dr.meshnormal_vert,fragmentShader:dr.meshnormal_frag},sprite:{uniforms:Ui([It.sprite,It.fog]),vertexShader:dr.sprite_vert,fragmentShader:dr.sprite_frag},background:{uniforms:{uvTransform:{value:new cr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:dr.background_vert,fragmentShader:dr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new cr}},vertexShader:dr.backgroundCube_vert,fragmentShader:dr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:dr.cube_vert,fragmentShader:dr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dr.equirect_vert,fragmentShader:dr.equirect_frag},distance:{uniforms:Ui([It.common,It.displacementmap,{referencePosition:{value:new Ze},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dr.distance_vert,fragmentShader:dr.distance_frag},shadow:{uniforms:Ui([It.lights,It.fog,{color:{value:new br(0)},opacity:{value:1}}]),vertexShader:dr.shadow_vert,fragmentShader:dr.shadow_frag}};So.physical={uniforms:Ui([So.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cr},clearcoatNormalScale:{value:new tr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cr},sheen:{value:0},sheenColor:{value:new br(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cr},transmissionSamplerSize:{value:new tr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cr},attenuationDistance:{value:0},attenuationColor:{value:new br(0)},specularColor:{value:new br(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cr},anisotropyVector:{value:new tr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cr}}]),vertexShader:dr.meshphysical_vert,fragmentShader:dr.meshphysical_frag};const SR={r:0,b:0,g:0},rd=new Uo,$Je=new kr;function ZJe(t,e,r,n,i,a,s){const o=new br(0);let c=a===!0?0:1,u,l,d=null,f=0,h=null;function p(v){let A=v.isScene===!0?v.background:null;return A&&A.isTexture&&(A=(v.backgroundBlurriness>0?r:e).get(A)),A}function _(v){let A=!1;const T=p(v);T===null?m(o,c):T&&T.isColor&&(m(T,1),A=!0);const S=t.xr.getEnvironmentBlendMode();S==="additive"?n.buffers.color.setClear(0,0,0,1,s):S==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(t.autoClear||A)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function g(v,A){const T=p(A);T&&(T.isCubeTexture||T.mapping===xF)?(l===void 0&&(l=new Fa(new tO(1,1,1),new Vo({name:"BackgroundCubeMaterial",uniforms:Mp(So.backgroundCube.uniforms),vertexShader:So.backgroundCube.vertexShader,fragmentShader:So.backgroundCube.fragmentShader,side:pa,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(S,P,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),rd.copy(A.backgroundRotation),rd.x*=-1,rd.y*=-1,rd.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(rd.y*=-1,rd.z*=-1),l.material.uniforms.envMap.value=T,l.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,l.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,l.material.uniforms.backgroundRotation.value.setFromMatrix4($Je.makeRotationFromEuler(rd)),l.material.toneMapped=Tr.getTransfer(T.colorSpace)!==Pr,(d!==T||f!==T.version||h!==t.toneMapping)&&(l.material.needsUpdate=!0,d=T,f=T.version,h=t.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null)):T&&T.isTexture&&(u===void 0&&(u=new Fa(new OF(2,2),new Vo({name:"BackgroundMaterial",uniforms:Mp(So.background.uniforms),vertexShader:So.background.vertexShader,fragmentShader:So.background.fragmentShader,side:wl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=T,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=Tr.getTransfer(T.colorSpace)!==Pr,T.matrixAutoUpdate===!0&&T.updateMatrix(),u.material.uniforms.uvTransform.value.copy(T.matrix),(d!==T||f!==T.version||h!==t.toneMapping)&&(u.material.needsUpdate=!0,d=T,f=T.version,h=t.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null))}function m(v,A){v.getRGB(SR,uEe(t)),n.buffers.color.setClear(SR.r,SR.g,SR.b,A,s)}function y(){l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(v,A=1){o.set(v),c=A,m(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(v){c=v,m(o,c)},render:_,addToRenderList:g,dispose:y}}function eYe(t,e){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),n={},i=f(null);let a=i,s=!1;function o(N,R,C,M,U){let B=!1;const G=d(M,C,R);a!==G&&(a=G,u(a.object)),B=h(N,M,C,U),B&&p(N,M,C,U),U!==null&&e.update(U,t.ELEMENT_ARRAY_BUFFER),(B||s)&&(s=!1,A(N,R,C,M),U!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(U).buffer))}function c(){return t.createVertexArray()}function u(N){return t.bindVertexArray(N)}function l(N){return t.deleteVertexArray(N)}function d(N,R,C){const M=C.wireframe===!0;let U=n[N.id];U===void 0&&(U={},n[N.id]=U);let B=U[R.id];B===void 0&&(B={},U[R.id]=B);let G=B[M];return G===void 0&&(G=f(c()),B[M]=G),G}function f(N){const R=[],C=[],M=[];for(let U=0;U<r;U++)R[U]=0,C[U]=0,M[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:C,attributeDivisors:M,object:N,attributes:{},index:null}}function h(N,R,C,M){const U=a.attributes,B=R.attributes;let G=0;const K=C.getAttributes();for(const $ in K)if(K[$].location>=0){const pe=U[$];let we=B[$];if(we===void 0&&($==="instanceMatrix"&&N.instanceMatrix&&(we=N.instanceMatrix),$==="instanceColor"&&N.instanceColor&&(we=N.instanceColor)),pe===void 0||pe.attribute!==we||we&&pe.data!==we.data)return!0;G++}return a.attributesNum!==G||a.index!==M}function p(N,R,C,M){const U={},B=R.attributes;let G=0;const K=C.getAttributes();for(const $ in K)if(K[$].location>=0){let pe=B[$];pe===void 0&&($==="instanceMatrix"&&N.instanceMatrix&&(pe=N.instanceMatrix),$==="instanceColor"&&N.instanceColor&&(pe=N.instanceColor));const we={};we.attribute=pe,pe&&pe.data&&(we.data=pe.data),U[$]=we,G++}a.attributes=U,a.attributesNum=G,a.index=M}function _(){const N=a.newAttributes;for(let R=0,C=N.length;R<C;R++)N[R]=0}function g(N){m(N,0)}function m(N,R){const C=a.newAttributes,M=a.enabledAttributes,U=a.attributeDivisors;C[N]=1,M[N]===0&&(t.enableVertexAttribArray(N),M[N]=1),U[N]!==R&&(t.vertexAttribDivisor(N,R),U[N]=R)}function y(){const N=a.newAttributes,R=a.enabledAttributes;for(let C=0,M=R.length;C<M;C++)R[C]!==N[C]&&(t.disableVertexAttribArray(C),R[C]=0)}function v(N,R,C,M,U,B,G){G===!0?t.vertexAttribIPointer(N,R,C,U,B):t.vertexAttribPointer(N,R,C,M,U,B)}function A(N,R,C,M){_();const U=M.attributes,B=C.getAttributes(),G=R.defaultAttributeValues;for(const K in B){const $=B[K];if($.location>=0){let se=U[K];if(se===void 0&&(K==="instanceMatrix"&&N.instanceMatrix&&(se=N.instanceMatrix),K==="instanceColor"&&N.instanceColor&&(se=N.instanceColor)),se!==void 0){const pe=se.normalized,we=se.itemSize,Ce=e.get(se);if(Ce===void 0)continue;const Le=Ce.buffer,Ie=Ce.type,Oe=Ce.bytesPerElement,ye=Ie===t.INT||Ie===t.UNSIGNED_INT||se.gpuType===Tk;if(se.isInterleavedBufferAttribute){const Me=se.data,W=Me.stride,ft=se.offset;if(Me.isInstancedInterleavedBuffer){for(let le=0;le<$.locationSize;le++)m($.location+le,Me.meshPerAttribute);N.isInstancedMesh!==!0&&M._maxInstanceCount===void 0&&(M._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let le=0;le<$.locationSize;le++)g($.location+le);t.bindBuffer(t.ARRAY_BUFFER,Le);for(let le=0;le<$.locationSize;le++)v($.location+le,we/$.locationSize,Ie,pe,W*Oe,(ft+we/$.locationSize*le)*Oe,ye)}else{if(se.isInstancedBufferAttribute){for(let Me=0;Me<$.locationSize;Me++)m($.location+Me,se.meshPerAttribute);N.isInstancedMesh!==!0&&M._maxInstanceCount===void 0&&(M._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Me=0;Me<$.locationSize;Me++)g($.location+Me);t.bindBuffer(t.ARRAY_BUFFER,Le);for(let Me=0;Me<$.locationSize;Me++)v($.location+Me,we/$.locationSize,Ie,pe,we*Oe,we/$.locationSize*Me*Oe,ye)}}else if(G!==void 0){const pe=G[K];if(pe!==void 0)switch(pe.length){case 2:t.vertexAttrib2fv($.location,pe);break;case 3:t.vertexAttrib3fv($.location,pe);break;case 4:t.vertexAttrib4fv($.location,pe);break;default:t.vertexAttrib1fv($.location,pe)}}}}y()}function T(){j();for(const N in n){const R=n[N];for(const C in R){const M=R[C];for(const U in M)l(M[U].object),delete M[U];delete R[C]}delete n[N]}}function S(N){if(n[N.id]===void 0)return;const R=n[N.id];for(const C in R){const M=R[C];for(const U in M)l(M[U].object),delete M[U];delete R[C]}delete n[N.id]}function P(N){for(const R in n){const C=n[R];if(C[N.id]===void 0)continue;const M=C[N.id];for(const U in M)l(M[U].object),delete M[U];delete C[N.id]}}function j(){F(),s=!0,a!==i&&(a=i,u(a.object))}function F(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:j,resetDefaultState:F,dispose:T,releaseStatesOfGeometry:S,releaseStatesOfProgram:P,initAttributes:_,enableAttribute:g,disableUnusedAttributes:y}}function tYe(t,e,r){let n;function i(u){n=u}function a(u,l){t.drawArrays(n,u,l),r.update(l,n,1)}function s(u,l,d){d!==0&&(t.drawArraysInstanced(n,u,l,d),r.update(l,n,d))}function o(u,l,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,l,0,d);let h=0;for(let p=0;p<d;p++)h+=l[p];r.update(h,n,1)}function c(u,l,d,f){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<u.length;p++)s(u[p],l[p],f[p]);else{h.multiDrawArraysInstancedWEBGL(n,u,0,l,0,f,0,d);let p=0;for(let _=0;_<d;_++)p+=l[_]*f[_];r.update(p,n,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function rYe(t,e,r,n){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){return!(P!==Gs&&n.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(P){const j=P===Gu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Ra&&n.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Oo&&!j)}function c(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=r.precision!==void 0?r.precision:"highp";const l=c(u);l!==u&&(er("WebGLRenderer:",u,"not supported, using",l,"instead."),u=l);const d=r.logarithmicDepthBuffer===!0,f=r.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),y=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),A=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=t.getParameter(t.MAX_SAMPLES),S=t.getParameter(t.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:d,reversedDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:_,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:A,maxSamples:T,samples:S}}function nYe(t){const e=this;let r=null,n=0,i=!1,a=!1;const s=new Yc,o=new cr,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||n!==0||i;return i=f,n=d.length,h},this.beginShadows=function(){a=!0,l(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,f){r=l(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,_=d.clipIntersection,g=d.clipShadows,m=t.get(d);if(!i||p===null||p.length===0||a&&!g)a?l(null):u();else{const y=a?0:n,v=y*4;let A=m.clippingState||null;c.value=A,A=l(p,f,v,h);for(let T=0;T!==v;++T)A[T]=r[T];m.clippingState=A,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=y}};function u(){c.value!==r&&(c.value=r,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(d,f,h,p){const _=d!==null?d.length:0;let g=null;if(_!==0){if(g=c.value,p!==!0||g===null){const m=h+_*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<m)&&(g=new Float32Array(m));for(let v=0,A=h;v!==_;++v,A+=4)s.copy(d[v]).applyMatrix4(y,o),s.normal.toArray(g,A),g[A+3]=s.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,g}}function iYe(t){let e=new WeakMap;function r(s,o){return o===_V?s.mapping=yf:o===mV&&(s.mapping=Pp),s}function n(s){if(s&&s.isTexture){const o=s.mapping;if(o===_V||o===mV)if(e.has(s)){const c=e.get(s).texture;return r(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const u=new dEe(c.height);return u.fromEquirectangularTexture(t,s),e.set(s,u),s.addEventListener("dispose",i),r(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const sl=4,S$=[.125,.215,.35,.446,.526,.582],Ld=20,aYe=256,m_=new jk,x$=new br;let KC=null,XC=0,JC=0,YC=!1;const sYe=new Ze;class E${constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,r=0,n=.1,i=100,a={}){const{size:s=256,position:o=sYe}=a;KC=this._renderer.getRenderTarget(),XC=this._renderer.getActiveCubeFace(),JC=this._renderer.getActiveMipmapLevel(),YC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,i,c,o),r>0&&this._blur(c,0,0,r),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=R$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=O$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(KC,XC,JC),this._renderer.xr.enabled=YC,e.scissorTest=!1,_h(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===yf||e.mapping===Pp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),KC=this._renderer.getRenderTarget(),XC=this._renderer.getActiveCubeFace(),JC=this._renderer.getActiveMipmapLevel(),YC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=r||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,n={magFilter:xi,minFilter:xi,generateMipmaps:!1,type:Gu,format:Gs,colorSpace:Fp,depthBuffer:!1},i=I$(e,r,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=I$(e,r,n);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=oYe(a)),this._blurMaterial=cYe(a,e,r),this._ggxMaterial=uYe(a,e,r)}return i}_compileMaterial(e){const r=new Fa(new Ga,e);this._renderer.compile(r,m_)}_sceneToCubeUV(e,r,n,i,a){const c=new os(90,1,r,n),u=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,h=d.toneMapping;d.getClearColor(x$),d.toneMapping=Co,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(i),d.clearDepth(),d.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Fa(new tO,new Fk({name:"PMREM.Background",side:pa,depthWrite:!1,depthTest:!1})));const _=this._backgroundBox,g=_.material;let m=!1;const y=e.background;y?y.isColor&&(g.color.copy(y),e.background=null,m=!0):(g.color.copy(x$),m=!0);for(let v=0;v<6;v++){const A=v%3;A===0?(c.up.set(0,u[v],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+l[v],a.y,a.z)):A===1?(c.up.set(0,0,u[v]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+l[v],a.z)):(c.up.set(0,u[v],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+l[v]));const T=this._cubeSize;_h(i,A*T,v>2?T:0,T,T),d.setRenderTarget(i),m&&d.render(_,c),d.render(e,c)}d.toneMapping=h,d.autoClear=f,e.background=y}_textureToCubeUV(e,r){const n=this._renderer,i=e.mapping===yf||e.mapping===Pp;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=R$()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=O$());const a=i?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;_h(r,0,0,3*c,2*c),n.setRenderTarget(r),n.render(s,m_)}_applyPMREM(e){const r=this._renderer,n=r.autoClear;r.autoClear=!1;const i=this._lodMeshes.length;for(let a=1;a<i;a++)this._applyGGXFilter(e,a-1,a);r.autoClear=n}_applyGGXFilter(e,r,n){const i=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[n];o.material=s;const c=s.uniforms,u=n/(this._lodMeshes.length-1),l=r/(this._lodMeshes.length-1),d=Math.sqrt(u*u-l*l),f=0+u*1.25,h=d*f,{_lodMax:p}=this,_=this._sizeLods[n],g=3*_*(n>p-sl?n-p+sl:0),m=4*(this._cubeSize-_);c.envMap.value=e.texture,c.roughness.value=h,c.mipInt.value=p-r,_h(a,g,m,3*_,2*_),i.setRenderTarget(a),i.render(o,m_),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=p-n,_h(e,g,m,3*_,2*_),i.setRenderTarget(e),i.render(o,m_)}_blur(e,r,n,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,r,n,i,"latitudinal",a),this._halfBlur(s,e,n,n,i,"longitudinal",a)}_halfBlur(e,r,n,i,a,s,o){const c=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&Ar("blur direction must be either latitudinal or longitudinal!");const l=3,d=this._lodMeshes[i];d.material=u;const f=u.uniforms,h=this._sizeLods[n]-1,p=isFinite(a)?Math.PI/(2*h):2*Math.PI/(2*Ld-1),_=a/p,g=isFinite(a)?1+Math.floor(l*_):Ld;g>Ld&&er(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ld}`);const m=[];let y=0;for(let P=0;P<Ld;++P){const j=P/_,F=Math.exp(-j*j/2);m.push(F),P===0?y+=F:P<g&&(y+=2*F)}for(let P=0;P<m.length;P++)m[P]=m[P]/y;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=m,f.latitudinal.value=s==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:v}=this;f.dTheta.value=p,f.mipInt.value=v-n;const A=this._sizeLods[i],T=3*A*(i>v-sl?i-v+sl:0),S=4*(this._cubeSize-A);_h(r,T,S,3*A,2*A),c.setRenderTarget(r),c.render(d,m_)}}function oYe(t){const e=[],r=[],n=[];let i=t;const a=t-sl+1+S$.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);e.push(o);let c=1/o;s>t-sl?c=S$[s-t+sl-1]:s===0&&(c=0),r.push(c);const u=1/(o-2),l=-u,d=1+u,f=[l,l,d,l,d,d,l,l,d,d,l,d],h=6,p=6,_=3,g=2,m=1,y=new Float32Array(_*p*h),v=new Float32Array(g*p*h),A=new Float32Array(m*p*h);for(let S=0;S<h;S++){const P=S%3*2/3-1,j=S>2?0:-1,F=[P,j,0,P+2/3,j,0,P+2/3,j+1,0,P,j,0,P+2/3,j+1,0,P,j+1,0];y.set(F,_*p*S),v.set(f,g*p*S);const N=[S,S,S,S,S,S];A.set(N,m*p*S)}const T=new Ga;T.setAttribute("position",new jo(y,_)),T.setAttribute("uv",new jo(v,g)),T.setAttribute("faceIndex",new jo(A,m)),n.push(new Fa(T,null)),i>sl&&i--}return{lodMeshes:n,sizeLods:e,sigmas:r}}function I$(t,e,r){const n=new Lo(t,e,r);return n.texture.mapping=xF,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function _h(t,e,r,n,i){t.viewport.set(e,r,n,i),t.scissor.set(e,r,n,i)}function uYe(t,e,r){return new Vo({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:aYe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:RF(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function cYe(t,e,r){const n=new Float32Array(Ld),i=new Ze(0,1,0);return new Vo({name:"SphericalGaussianBlur",defines:{n:Ld,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:RF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function O$(){return new Vo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:RF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function R$(){return new Vo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:RF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function RF(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lYe(t){let e=new WeakMap,r=null;function n(o){if(o&&o.isTexture){const c=o.mapping,u=c===_V||c===mV,l=c===yf||c===Pp;if(u||l){let d=e.get(o);const f=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return r===null&&(r=new E$(t)),d=u?r.fromEquirectangular(o,d):r.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const h=o.image;return u&&h&&h.height>0||l&&h&&i(h)?(r===null&&(r=new E$(t)),d=u?r.fromEquirectangular(o):r.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",a),d.texture):null}}}return o}function i(o){let c=0;const u=6;for(let l=0;l<u;l++)o[l]!==void 0&&c++;return c===u}function a(o){const c=o.target;c.removeEventListener("dispose",a);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function s(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:n,dispose:s}}function dYe(t){const e={};function r(n){if(e[n]!==void 0)return e[n];const i=t.getExtension(n);return e[n]=i,i}return{has:function(n){return r(n)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(n){const i=r(n);return i===null&&EI("WebGLRenderer: "+n+" extension not supported."),i}}}function fYe(t,e,r,n){const i={},a=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",s),delete i[f.id];const h=a.get(f);h&&(e.remove(h),a.delete(f)),n.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,r.memory.geometries--}function o(d,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,r.memory.geometries++),f}function c(d){const f=d.attributes;for(const h in f)e.update(f[h],t.ARRAY_BUFFER)}function u(d){const f=[],h=d.index,p=d.attributes.position;let _=0;if(h!==null){const y=h.array;_=h.version;for(let v=0,A=y.length;v<A;v+=3){const T=y[v+0],S=y[v+1],P=y[v+2];f.push(T,S,S,P,P,T)}}else if(p!==void 0){const y=p.array;_=p.version;for(let v=0,A=y.length/3-1;v<A;v+=3){const T=v+0,S=v+1,P=v+2;f.push(T,S,S,P,P,T)}}else return;const g=new(nEe(f)?oEe:sEe)(f,1);g.version=_;const m=a.get(d);m&&e.remove(m),a.set(d,g)}function l(d){const f=a.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&u(d)}else u(d);return a.get(d)}return{get:o,update:c,getWireframeAttribute:l}}function hYe(t,e,r){let n;function i(f){n=f}let a,s;function o(f){a=f.type,s=f.bytesPerElement}function c(f,h){t.drawElements(n,h,a,f*s),r.update(h,n,1)}function u(f,h,p){p!==0&&(t.drawElementsInstanced(n,h,a,f*s,p),r.update(h,n,p))}function l(f,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,h,0,a,f,0,p);let g=0;for(let m=0;m<p;m++)g+=h[m];r.update(g,n,1)}function d(f,h,p,_){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<f.length;m++)u(f[m]/s,h[m],_[m]);else{g.multiDrawElementsInstancedWEBGL(n,h,0,a,f,0,_,0,p);let m=0;for(let y=0;y<p;y++)m+=h[y]*_[y];r.update(m,n,1)}}this.setMode=i,this.setIndex=o,this.render=c,this.renderInstances=u,this.renderMultiDraw=l,this.renderMultiDrawInstances=d}function pYe(t){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,s,o){switch(r.calls++,s){case t.TRIANGLES:r.triangles+=o*(a/3);break;case t.LINES:r.lines+=o*(a/2);break;case t.LINE_STRIP:r.lines+=o*(a-1);break;case t.LINE_LOOP:r.lines+=o*a;break;case t.POINTS:r.points+=o*a;break;default:Ar("WebGLInfo: Unknown draw mode:",s);break}}function i(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:i,update:n}}function _Ye(t,e,r){const n=new WeakMap,i=new Tn;function a(s,o,c){const u=s.morphTargetInfluences,l=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=l!==void 0?l.length:0;let f=n.get(o);if(f===void 0||f.count!==d){let N=function(){j.dispose(),n.delete(o),o.removeEventListener("dispose",N)};var h=N;f!==void 0&&f.texture.dispose();const p=o.morphAttributes.position!==void 0,_=o.morphAttributes.normal!==void 0,g=o.morphAttributes.color!==void 0,m=o.morphAttributes.position||[],y=o.morphAttributes.normal||[],v=o.morphAttributes.color||[];let A=0;p===!0&&(A=1),_===!0&&(A=2),g===!0&&(A=3);let T=o.attributes.position.count*A,S=1;T>e.maxTextureSize&&(S=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const P=new Float32Array(T*S*4*d),j=new iEe(P,T,S,d);j.type=Oo,j.needsUpdate=!0;const F=A*4;for(let R=0;R<d;R++){const C=m[R],M=y[R],U=v[R],B=T*S*4*R;for(let G=0;G<C.count;G++){const K=G*F;p===!0&&(i.fromBufferAttribute(C,G),P[B+K+0]=i.x,P[B+K+1]=i.y,P[B+K+2]=i.z,P[B+K+3]=0),_===!0&&(i.fromBufferAttribute(M,G),P[B+K+4]=i.x,P[B+K+5]=i.y,P[B+K+6]=i.z,P[B+K+7]=0),g===!0&&(i.fromBufferAttribute(U,G),P[B+K+8]=i.x,P[B+K+9]=i.y,P[B+K+10]=i.z,P[B+K+11]=U.itemSize===4?i.w:1)}}f={count:d,texture:j,size:new tr(T,S)},n.set(o,f),o.addEventListener("dispose",N)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(t,"morphTexture",s.morphTexture,r);else{let p=0;for(let g=0;g<u.length;g++)p+=u[g];const _=o.morphTargetsRelative?1:1-p;c.getUniforms().setValue(t,"morphTargetBaseInfluence",_),c.getUniforms().setValue(t,"morphTargetInfluences",u)}c.getUniforms().setValue(t,"morphTargetsTexture",f.texture,r),c.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}return{update:a}}function mYe(t,e,r,n){let i=new WeakMap;function a(c){const u=n.render.frame,l=c.geometry,d=e.get(c,l);if(i.get(d)!==u&&(e.update(d),i.set(d,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),i.get(c)!==u&&(r.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&r.update(c.instanceColor,t.ARRAY_BUFFER),i.set(c,u))),c.isSkinnedMesh){const f=c.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return d}function s(){i=new WeakMap}function o(c){const u=c.target;u.removeEventListener("dispose",o),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:a,dispose:s}}const gYe={[Vxe]:"LINEAR_TONE_MAPPING",[Gxe]:"REINHARD_TONE_MAPPING",[Hxe]:"CINEON_TONE_MAPPING",[kxe]:"ACES_FILMIC_TONE_MAPPING",[Qxe]:"AGX_TONE_MAPPING",[Wxe]:"NEUTRAL_TONE_MAPPING",[zxe]:"CUSTOM_TONE_MAPPING"};function yYe(t,e,r,n,i){const a=new Lo(e,r,{type:t,depthBuffer:n,stencilBuffer:i}),s=new Lo(e,r,{type:Gu,depthBuffer:!1,stencilBuffer:!1}),o=new Ga;o.setAttribute("position",new Ei([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new Ei([0,2,0,0,2,0],2));const c=new sKe({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),u=new Fa(o,c),l=new jk(-1,1,1,-1,0,1);let d=null,f=null,h=!1,p,_=null,g=[],m=!1;this.setSize=function(y,v){a.setSize(y,v),s.setSize(y,v);for(let A=0;A<g.length;A++){const T=g[A];T.setSize&&T.setSize(y,v)}},this.setEffects=function(y){g=y,m=g.length>0&&g[0].isRenderPass===!0;const v=a.width,A=a.height;for(let T=0;T<g.length;T++){const S=g[T];S.setSize&&S.setSize(v,A)}},this.begin=function(y,v){if(h||y.toneMapping===Co&&g.length===0)return!1;if(_=v,v!==null){const A=v.width,T=v.height;(a.width!==A||a.height!==T)&&this.setSize(A,T)}return m===!1&&y.setRenderTarget(a),p=y.toneMapping,y.toneMapping=Co,!0},this.hasRenderPass=function(){return m},this.end=function(y,v){y.toneMapping=p,h=!0;let A=a,T=s;for(let S=0;S<g.length;S++){const P=g[S];if(P.enabled!==!1&&(P.render(y,T,A,v),P.needsSwap!==!1)){const j=A;A=T,T=j}}if(d!==y.outputColorSpace||f!==y.toneMapping){d=y.outputColorSpace,f=y.toneMapping,c.defines={},Tr.getTransfer(d)===Pr&&(c.defines.SRGB_TRANSFER="");const S=gYe[f];S&&(c.defines[S]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=A.texture,y.setRenderTarget(_),y.render(u,l),_=null,h=!1},this.isCompositing=function(){return h},this.dispose=function(){a.dispose(),s.dispose(),o.dispose(),c.dispose()}}const mEe=new zi,ZV=new II(1,1),gEe=new iEe,yEe=new CWe,bEe=new lEe,P$=[],N$=[],F$=new Float32Array(16),M$=new Float32Array(9),D$=new Float32Array(4);function t0(t,e,r){const n=t[0];if(n<=0||n>0)return t;const i=e*r;let a=P$[i];if(a===void 0&&(a=new Float32Array(i),P$[i]=a),e!==0){n.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=r,t[s].toArray(a,o)}return a}function Hn(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function kn(t,e){for(let r=0,n=e.length;r<n;r++)t[r]=e[r]}function PF(t,e){let r=N$[e];r===void 0&&(r=new Int32Array(e),N$[e]=r);for(let n=0;n!==e;++n)r[n]=t.allocateTextureUnit();return r}function bYe(t,e){const r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function vYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Hn(r,e))return;t.uniform2fv(this.addr,e),kn(r,e)}}function AYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(Hn(r,e))return;t.uniform3fv(this.addr,e),kn(r,e)}}function TYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Hn(r,e))return;t.uniform4fv(this.addr,e),kn(r,e)}}function wYe(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(Hn(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),kn(r,e)}else{if(Hn(r,n))return;D$.set(n),t.uniformMatrix2fv(this.addr,!1,D$),kn(r,n)}}function SYe(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(Hn(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),kn(r,e)}else{if(Hn(r,n))return;M$.set(n),t.uniformMatrix3fv(this.addr,!1,M$),kn(r,n)}}function xYe(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(Hn(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),kn(r,e)}else{if(Hn(r,n))return;F$.set(n),t.uniformMatrix4fv(this.addr,!1,F$),kn(r,n)}}function EYe(t,e){const r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function IYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Hn(r,e))return;t.uniform2iv(this.addr,e),kn(r,e)}}function OYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Hn(r,e))return;t.uniform3iv(this.addr,e),kn(r,e)}}function RYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Hn(r,e))return;t.uniform4iv(this.addr,e),kn(r,e)}}function PYe(t,e){const r=this.cache;r[0]!==e&&(t.uniform1ui(this.addr,e),r[0]=e)}function NYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Hn(r,e))return;t.uniform2uiv(this.addr,e),kn(r,e)}}function FYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Hn(r,e))return;t.uniform3uiv(this.addr,e),kn(r,e)}}function MYe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Hn(r,e))return;t.uniform4uiv(this.addr,e),kn(r,e)}}function DYe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i);let a;this.type===t.SAMPLER_2D_SHADOW?(ZV.compareFunction=r.isReversedDepthBuffer()?Rk:Ok,a=ZV):a=mEe,r.setTexture2D(e||a,i)}function CYe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(e||yEe,i)}function LYe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(e||bEe,i)}function jYe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(e||gEe,i)}function BYe(t){switch(t){case 5126:return bYe;case 35664:return vYe;case 35665:return AYe;case 35666:return TYe;case 35674:return wYe;case 35675:return SYe;case 35676:return xYe;case 5124:case 35670:return EYe;case 35667:case 35671:return IYe;case 35668:case 35672:return OYe;case 35669:case 35673:return RYe;case 5125:return PYe;case 36294:return NYe;case 36295:return FYe;case 36296:return MYe;case 35678:case 36198:case 36298:case 36306:case 35682:return DYe;case 35679:case 36299:case 36307:return CYe;case 35680:case 36300:case 36308:case 36293:return LYe;case 36289:case 36303:case 36311:case 36292:return jYe}}function qYe(t,e){t.uniform1fv(this.addr,e)}function UYe(t,e){const r=t0(e,this.size,2);t.uniform2fv(this.addr,r)}function VYe(t,e){const r=t0(e,this.size,3);t.uniform3fv(this.addr,r)}function GYe(t,e){const r=t0(e,this.size,4);t.uniform4fv(this.addr,r)}function HYe(t,e){const r=t0(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function kYe(t,e){const r=t0(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function zYe(t,e){const r=t0(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function QYe(t,e){t.uniform1iv(this.addr,e)}function WYe(t,e){t.uniform2iv(this.addr,e)}function KYe(t,e){t.uniform3iv(this.addr,e)}function XYe(t,e){t.uniform4iv(this.addr,e)}function JYe(t,e){t.uniform1uiv(this.addr,e)}function YYe(t,e){t.uniform2uiv(this.addr,e)}function $Ye(t,e){t.uniform3uiv(this.addr,e)}function ZYe(t,e){t.uniform4uiv(this.addr,e)}function e$e(t,e,r){const n=this.cache,i=e.length,a=PF(r,i);Hn(n,a)||(t.uniform1iv(this.addr,a),kn(n,a));let s;this.type===t.SAMPLER_2D_SHADOW?s=ZV:s=mEe;for(let o=0;o!==i;++o)r.setTexture2D(e[o]||s,a[o])}function t$e(t,e,r){const n=this.cache,i=e.length,a=PF(r,i);Hn(n,a)||(t.uniform1iv(this.addr,a),kn(n,a));for(let s=0;s!==i;++s)r.setTexture3D(e[s]||yEe,a[s])}function r$e(t,e,r){const n=this.cache,i=e.length,a=PF(r,i);Hn(n,a)||(t.uniform1iv(this.addr,a),kn(n,a));for(let s=0;s!==i;++s)r.setTextureCube(e[s]||bEe,a[s])}function n$e(t,e,r){const n=this.cache,i=e.length,a=PF(r,i);Hn(n,a)||(t.uniform1iv(this.addr,a),kn(n,a));for(let s=0;s!==i;++s)r.setTexture2DArray(e[s]||gEe,a[s])}function i$e(t){switch(t){case 5126:return qYe;case 35664:return UYe;case 35665:return VYe;case 35666:return GYe;case 35674:return HYe;case 35675:return kYe;case 35676:return zYe;case 5124:case 35670:return QYe;case 35667:case 35671:return WYe;case 35668:case 35672:return KYe;case 35669:case 35673:return XYe;case 5125:return JYe;case 36294:return YYe;case 36295:return $Ye;case 36296:return ZYe;case 35678:case 36198:case 36298:case 36306:case 35682:return e$e;case 35679:case 36299:case 36307:return t$e;case 35680:case 36300:case 36308:case 36293:return r$e;case 36289:case 36303:case 36311:case 36292:return n$e}}class a$e{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.setValue=BYe(r.type)}}class s$e{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=i$e(r.type)}}class o$e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,n){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,r[o.id],n)}}}const $C=/(\w+)(\])?(\[|\.)?/g;function C$(t,e){t.seq.push(e),t.map[e.id]=e}function u$e(t,e,r){const n=t.name,i=n.length;for($C.lastIndex=0;;){const a=$C.exec(n),s=$C.lastIndex;let o=a[1];const c=a[2]==="]",u=a[3];if(c&&(o=o|0),u===void 0||u==="["&&s+2===i){C$(r,u===void 0?new a$e(o,t,e):new s$e(o,t,e));break}else{let d=r.map[o];d===void 0&&(d=new o$e(o),C$(r,d)),r=d}}}class A3{constructor(e,r){this.seq=[],this.map={};const n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const o=e.getActiveUniform(r,s),c=e.getUniformLocation(r,o.name);u$e(o,c,this)}const i=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?i.push(s):a.push(s);i.length>0&&(this.seq=i.concat(a))}setValue(e,r,n,i){const a=this.map[r];a!==void 0&&a.setValue(e,n,i)}setOptional(e,r,n){const i=r[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,r,n,i){for(let a=0,s=r.length;a!==s;++a){const o=r[a],c=n[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,i)}}static seqWithValue(e,r){const n=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in r&&n.push(s)}return n}}function L$(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}const c$e=37297;let l$e=0;function d$e(t,e){const r=t.split(`
`),n=[],i=Math.max(e-6,0),a=Math.min(e+6,r.length);for(let s=i;s<a;s++){const o=s+1;n.push(`${o===e?">":" "} ${o}: ${r[s]}`)}return n.join(`
`)}const j$=new cr;function f$e(t){Tr._getMatrix(j$,Tr.workingColorSpace,t);const e=`mat3( ${j$.elements.map(r=>r.toFixed(4))} )`;switch(Tr.getTransfer(t)){case MN:return[e,"LinearTransferOETF"];case Pr:return[e,"sRGBTransferOETF"];default:return er("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function B$(t,e,r){const n=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(n&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return r.toUpperCase()+`

`+a+`

`+d$e(t.getShaderSource(e),o)}else return a}function h$e(t,e){const r=f$e(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}const p$e={[Vxe]:"Linear",[Gxe]:"Reinhard",[Hxe]:"Cineon",[kxe]:"ACESFilmic",[Qxe]:"AgX",[Wxe]:"Neutral",[zxe]:"Custom"};function _$e(t,e){const r=p$e[e];return r===void 0?(er("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+t+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const xR=new Ze;function m$e(){Tr.getLuminanceCoefficients(xR);const t=xR.x.toFixed(4),e=xR.y.toFixed(4),r=xR.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function g$e(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(lE).join(`
`)}function y$e(t){const e=[];for(const r in t){const n=t[r];n!==!1&&e.push("#define "+r+" "+n)}return e.join(`
`)}function b$e(t,e){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const a=t.getActiveAttrib(e,i),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),r[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return r}function lE(t){return t!==""}function q$(t,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function U$(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const v$e=/^[ \t]*#include +<([\w\d./]+)>/gm;function eG(t){return t.replace(v$e,T$e)}const A$e=new Map;function T$e(t,e){let r=dr[e];if(r===void 0){const n=A$e.get(e);if(n!==void 0)r=dr[n],er('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return eG(r)}const w$e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function V$(t){return t.replace(w$e,S$e)}function S$e(t,e,r,n){let i="";for(let a=parseInt(e);a<parseInt(r);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function G$(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const x$e={[_3]:"SHADOWMAP_TYPE_PCF",[cE]:"SHADOWMAP_TYPE_VSM"};function E$e(t){return x$e[t.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const I$e={[yf]:"ENVMAP_TYPE_CUBE",[Pp]:"ENVMAP_TYPE_CUBE",[xF]:"ENVMAP_TYPE_CUBE_UV"};function O$e(t){return t.envMap===!1?"ENVMAP_TYPE_CUBE":I$e[t.envMapMode]||"ENVMAP_TYPE_CUBE"}const R$e={[Pp]:"ENVMAP_MODE_REFRACTION"};function P$e(t){return t.envMap===!1?"ENVMAP_MODE_REFLECTION":R$e[t.envMapMode]||"ENVMAP_MODE_REFLECTION"}const N$e={[Ak]:"ENVMAP_BLENDING_MULTIPLY",[_We]:"ENVMAP_BLENDING_MIX",[mWe]:"ENVMAP_BLENDING_ADD"};function F$e(t){return t.envMap===!1?"ENVMAP_BLENDING_NONE":N$e[t.combine]||"ENVMAP_BLENDING_NONE"}function M$e(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:n,maxMip:r}}function D$e(t,e,r,n){const i=t.getContext(),a=r.defines;let s=r.vertexShader,o=r.fragmentShader;const c=E$e(r),u=O$e(r),l=P$e(r),d=F$e(r),f=M$e(r),h=g$e(r),p=y$e(a),_=i.createProgram();let g,m,y=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p].filter(lE).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p].filter(lE).join(`
`),m.length>0&&(m+=`
`)):(g=[G$(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",r.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(lE).join(`
`),m=[G$(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+l:"",r.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",r.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Co?"#define TONE_MAPPING":"",r.toneMapping!==Co?dr.tonemapping_pars_fragment:"",r.toneMapping!==Co?_$e("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",dr.colorspace_pars_fragment,h$e("linearToOutputTexel",r.outputColorSpace),m$e(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(lE).join(`
`)),s=eG(s),s=q$(s,r),s=U$(s,r),o=eG(o),o=q$(o,r),o=U$(o,r),s=V$(s),o=V$(o),r.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",r.glslVersion===YY?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===YY?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const v=y+g+s,A=y+m+o,T=L$(i,i.VERTEX_SHADER,v),S=L$(i,i.FRAGMENT_SHADER,A);i.attachShader(_,T),i.attachShader(_,S),r.index0AttributeName!==void 0?i.bindAttribLocation(_,0,r.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function P(R){if(t.debug.checkShaderErrors){const C=i.getProgramInfoLog(_)||"",M=i.getShaderInfoLog(T)||"",U=i.getShaderInfoLog(S)||"",B=C.trim(),G=M.trim(),K=U.trim();let $=!0,se=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if($=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,_,T,S);else{const pe=B$(i,T,"vertex"),we=B$(i,S,"fragment");Ar("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+B+`
`+pe+`
`+we)}else B!==""?er("WebGLProgram: Program Info Log:",B):(G===""||K==="")&&(se=!1);se&&(R.diagnostics={runnable:$,programLog:B,vertexShader:{log:G,prefix:g},fragmentShader:{log:K,prefix:m}})}i.deleteShader(T),i.deleteShader(S),j=new A3(i,_),F=b$e(i,_)}let j;this.getUniforms=function(){return j===void 0&&P(this),j};let F;this.getAttributes=function(){return F===void 0&&P(this),F};let N=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=i.getProgramParameter(_,c$e)),N},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=l$e++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=S,this}let C$e=0;class L$e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(r),a=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const n of r)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let n=r.get(e);return n===void 0&&(n=new Set,r.set(e,n)),n}_getShaderStage(e){const r=this.shaderCache;let n=r.get(e);return n===void 0&&(n=new j$e(e),r.set(e,n)),n}}class j$e{constructor(e){this.id=C$e++,this.code=e,this.usedTimes=0}}function B$e(t,e,r,n,i,a,s){const o=new Nk,c=new L$e,u=new Set,l=[],d=new Map,f=i.logarithmicDepthBuffer;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(F){return u.add(F),F===0?"uv":`uv${F}`}function g(F,N,R,C,M){const U=C.fog,B=M.geometry,G=F.isMeshStandardMaterial?C.environment:null,K=(F.isMeshStandardMaterial?r:e).get(F.envMap||G),$=K&&K.mapping===xF?K.image.height:null,se=p[F.type];F.precision!==null&&(h=i.getMaxPrecision(F.precision),h!==F.precision&&er("WebGLProgram.getParameters:",F.precision,"not supported, using",h,"instead."));const pe=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,we=pe!==void 0?pe.length:0;let Ce=0;B.morphAttributes.position!==void 0&&(Ce=1),B.morphAttributes.normal!==void 0&&(Ce=2),B.morphAttributes.color!==void 0&&(Ce=3);let Le,Ie,Oe,ye;if(se){const ne=So[se];Le=ne.vertexShader,Ie=ne.fragmentShader}else Le=F.vertexShader,Ie=F.fragmentShader,c.update(F),Oe=c.getVertexShaderID(F),ye=c.getFragmentShaderID(F);const Me=t.getRenderTarget(),W=t.state.buffers.depth.getReversed(),ft=M.isInstancedMesh===!0,le=M.isBatchedMesh===!0,me=!!F.map,Z=!!F.matcap,q=!!K,J=!!F.aoMap,re=!!F.lightMap,_e=!!F.bumpMap,he=!!F.normalMap,ue=!!F.displacementMap,Ue=!!F.emissiveMap,De=!!F.metalnessMap,Je=!!F.roughnessMap,ze=F.anisotropy>0,ve=F.clearcoat>0,de=F.dispersion>0,Ge=F.iridescence>0,it=F.sheen>0,ae=F.transmission>0,z=ze&&!!F.anisotropyMap,V=ve&&!!F.clearcoatMap,x=ve&&!!F.clearcoatNormalMap,O=ve&&!!F.clearcoatRoughnessMap,D=Ge&&!!F.iridescenceMap,H=Ge&&!!F.iridescenceThicknessMap,Y=it&&!!F.sheenColorMap,Q=it&&!!F.sheenRoughnessMap,ee=!!F.specularMap,ie=!!F.specularColorMap,Re=!!F.specularIntensityMap,oe=ae&&!!F.transmissionMap,Te=ae&&!!F.thicknessMap,We=!!F.gradientMap,Qe=!!F.alphaMap,Xe=F.alphaTest>0,Pe=!!F.alphaHash,He=!!F.extensions;let Ee=Co;F.toneMapped&&(Me===null||Me.isXRRenderTarget===!0)&&(Ee=t.toneMapping);const ce={shaderID:se,shaderType:F.type,shaderName:F.name,vertexShader:Le,fragmentShader:Ie,defines:F.defines,customVertexShaderID:Oe,customFragmentShaderID:ye,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:h,batching:le,batchingColor:le&&M._colorsTexture!==null,instancing:ft,instancingColor:ft&&M.instanceColor!==null,instancingMorph:ft&&M.morphTexture!==null,outputColorSpace:Me===null?t.outputColorSpace:Me.isXRRenderTarget===!0?Me.texture.colorSpace:Fp,alphaToCoverage:!!F.alphaToCoverage,map:me,matcap:Z,envMap:q,envMapMode:q&&K.mapping,envMapCubeUVHeight:$,aoMap:J,lightMap:re,bumpMap:_e,normalMap:he,displacementMap:ue,emissiveMap:Ue,normalMapObjectSpace:he&&F.normalMapType===bWe,normalMapTangentSpace:he&&F.normalMapType===rEe,metalnessMap:De,roughnessMap:Je,anisotropy:ze,anisotropyMap:z,clearcoat:ve,clearcoatMap:V,clearcoatNormalMap:x,clearcoatRoughnessMap:O,dispersion:de,iridescence:Ge,iridescenceMap:D,iridescenceThicknessMap:H,sheen:it,sheenColorMap:Y,sheenRoughnessMap:Q,specularMap:ee,specularColorMap:ie,specularIntensityMap:Re,transmission:ae,transmissionMap:oe,thicknessMap:Te,gradientMap:We,opaque:F.transparent===!1&&F.blending===_p&&F.alphaToCoverage===!1,alphaMap:Qe,alphaTest:Xe,alphaHash:Pe,combine:F.combine,mapUv:me&&_(F.map.channel),aoMapUv:J&&_(F.aoMap.channel),lightMapUv:re&&_(F.lightMap.channel),bumpMapUv:_e&&_(F.bumpMap.channel),normalMapUv:he&&_(F.normalMap.channel),displacementMapUv:ue&&_(F.displacementMap.channel),emissiveMapUv:Ue&&_(F.emissiveMap.channel),metalnessMapUv:De&&_(F.metalnessMap.channel),roughnessMapUv:Je&&_(F.roughnessMap.channel),anisotropyMapUv:z&&_(F.anisotropyMap.channel),clearcoatMapUv:V&&_(F.clearcoatMap.channel),clearcoatNormalMapUv:x&&_(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:O&&_(F.clearcoatRoughnessMap.channel),iridescenceMapUv:D&&_(F.iridescenceMap.channel),iridescenceThicknessMapUv:H&&_(F.iridescenceThicknessMap.channel),sheenColorMapUv:Y&&_(F.sheenColorMap.channel),sheenRoughnessMapUv:Q&&_(F.sheenRoughnessMap.channel),specularMapUv:ee&&_(F.specularMap.channel),specularColorMapUv:ie&&_(F.specularColorMap.channel),specularIntensityMapUv:Re&&_(F.specularIntensityMap.channel),transmissionMapUv:oe&&_(F.transmissionMap.channel),thicknessMapUv:Te&&_(F.thicknessMap.channel),alphaMapUv:Qe&&_(F.alphaMap.channel),vertexTangents:!!B.attributes.tangent&&(he||ze),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,pointsUvs:M.isPoints===!0&&!!B.attributes.uv&&(me||Qe),fog:!!U,useFog:F.fog===!0,fogExp2:!!U&&U.isFogExp2,flatShading:F.flatShading===!0&&F.wireframe===!1,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:f,reversedDepthBuffer:W,skinning:M.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:we,morphTextureStride:Ce,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:F.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ee,decodeVideoTexture:me&&F.map.isVideoTexture===!0&&Tr.getTransfer(F.map.colorSpace)===Pr,decodeVideoTextureEmissive:Ue&&F.emissiveMap.isVideoTexture===!0&&Tr.getTransfer(F.emissiveMap.colorSpace)===Pr,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===Su,flipSided:F.side===pa,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:He&&F.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(He&&F.extensions.multiDraw===!0||le)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return ce.vertexUv1s=u.has(1),ce.vertexUv2s=u.has(2),ce.vertexUv3s=u.has(3),u.clear(),ce}function m(F){const N=[];if(F.shaderID?N.push(F.shaderID):(N.push(F.customVertexShaderID),N.push(F.customFragmentShaderID)),F.defines!==void 0)for(const R in F.defines)N.push(R),N.push(F.defines[R]);return F.isRawShaderMaterial===!1&&(y(N,F),v(N,F),N.push(t.outputColorSpace)),N.push(F.customProgramCacheKey),N.join()}function y(F,N){F.push(N.precision),F.push(N.outputColorSpace),F.push(N.envMapMode),F.push(N.envMapCubeUVHeight),F.push(N.mapUv),F.push(N.alphaMapUv),F.push(N.lightMapUv),F.push(N.aoMapUv),F.push(N.bumpMapUv),F.push(N.normalMapUv),F.push(N.displacementMapUv),F.push(N.emissiveMapUv),F.push(N.metalnessMapUv),F.push(N.roughnessMapUv),F.push(N.anisotropyMapUv),F.push(N.clearcoatMapUv),F.push(N.clearcoatNormalMapUv),F.push(N.clearcoatRoughnessMapUv),F.push(N.iridescenceMapUv),F.push(N.iridescenceThicknessMapUv),F.push(N.sheenColorMapUv),F.push(N.sheenRoughnessMapUv),F.push(N.specularMapUv),F.push(N.specularColorMapUv),F.push(N.specularIntensityMapUv),F.push(N.transmissionMapUv),F.push(N.thicknessMapUv),F.push(N.combine),F.push(N.fogExp2),F.push(N.sizeAttenuation),F.push(N.morphTargetsCount),F.push(N.morphAttributeCount),F.push(N.numDirLights),F.push(N.numPointLights),F.push(N.numSpotLights),F.push(N.numSpotLightMaps),F.push(N.numHemiLights),F.push(N.numRectAreaLights),F.push(N.numDirLightShadows),F.push(N.numPointLightShadows),F.push(N.numSpotLightShadows),F.push(N.numSpotLightShadowsWithMaps),F.push(N.numLightProbes),F.push(N.shadowMapType),F.push(N.toneMapping),F.push(N.numClippingPlanes),F.push(N.numClipIntersection),F.push(N.depthPacking)}function v(F,N){o.disableAll(),N.instancing&&o.enable(0),N.instancingColor&&o.enable(1),N.instancingMorph&&o.enable(2),N.matcap&&o.enable(3),N.envMap&&o.enable(4),N.normalMapObjectSpace&&o.enable(5),N.normalMapTangentSpace&&o.enable(6),N.clearcoat&&o.enable(7),N.iridescence&&o.enable(8),N.alphaTest&&o.enable(9),N.vertexColors&&o.enable(10),N.vertexAlphas&&o.enable(11),N.vertexUv1s&&o.enable(12),N.vertexUv2s&&o.enable(13),N.vertexUv3s&&o.enable(14),N.vertexTangents&&o.enable(15),N.anisotropy&&o.enable(16),N.alphaHash&&o.enable(17),N.batching&&o.enable(18),N.dispersion&&o.enable(19),N.batchingColor&&o.enable(20),N.gradientMap&&o.enable(21),F.push(o.mask),o.disableAll(),N.fog&&o.enable(0),N.useFog&&o.enable(1),N.flatShading&&o.enable(2),N.logarithmicDepthBuffer&&o.enable(3),N.reversedDepthBuffer&&o.enable(4),N.skinning&&o.enable(5),N.morphTargets&&o.enable(6),N.morphNormals&&o.enable(7),N.morphColors&&o.enable(8),N.premultipliedAlpha&&o.enable(9),N.shadowMapEnabled&&o.enable(10),N.doubleSided&&o.enable(11),N.flipSided&&o.enable(12),N.useDepthPacking&&o.enable(13),N.dithering&&o.enable(14),N.transmission&&o.enable(15),N.sheen&&o.enable(16),N.opaque&&o.enable(17),N.pointsUvs&&o.enable(18),N.decodeVideoTexture&&o.enable(19),N.decodeVideoTextureEmissive&&o.enable(20),N.alphaToCoverage&&o.enable(21),F.push(o.mask)}function A(F){const N=p[F.type];let R;if(N){const C=So[N];R=KWe.clone(C.uniforms)}else R=F.uniforms;return R}function T(F,N){let R=d.get(N);return R!==void 0?++R.usedTimes:(R=new D$e(t,N,F,a),l.push(R),d.set(N,R)),R}function S(F){if(--F.usedTimes===0){const N=l.indexOf(F);l[N]=l[l.length-1],l.pop(),d.delete(F.cacheKey),F.destroy()}}function P(F){c.remove(F)}function j(){c.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:A,acquireProgram:T,releaseProgram:S,releaseShaderCache:P,programs:l,dispose:j}}function q$e(){let t=new WeakMap;function e(s){return t.has(s)}function r(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,c){t.get(s)[o]=c}function a(){t=new WeakMap}return{has:e,get:r,remove:n,update:i,dispose:a}}function U$e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function H$(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function k$(){const t=[];let e=0;const r=[],n=[],i=[];function a(){e=0,r.length=0,n.length=0,i.length=0}function s(d,f,h,p,_,g){let m=t[e];return m===void 0?(m={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:_,group:g},t[e]=m):(m.id=d.id,m.object=d,m.geometry=f,m.material=h,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=_,m.group=g),e++,m}function o(d,f,h,p,_,g){const m=s(d,f,h,p,_,g);h.transmission>0?n.push(m):h.transparent===!0?i.push(m):r.push(m)}function c(d,f,h,p,_,g){const m=s(d,f,h,p,_,g);h.transmission>0?n.unshift(m):h.transparent===!0?i.unshift(m):r.unshift(m)}function u(d,f){r.length>1&&r.sort(d||U$e),n.length>1&&n.sort(f||H$),i.length>1&&i.sort(f||H$)}function l(){for(let d=e,f=t.length;d<f;d++){const h=t[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:r,transmissive:n,transparent:i,init:a,push:o,unshift:c,finish:l,sort:u}}function V$e(){let t=new WeakMap;function e(n,i){const a=t.get(n);let s;return a===void 0?(s=new k$,t.set(n,[s])):i>=a.length?(s=new k$,a.push(s)):s=a[i],s}function r(){t=new WeakMap}return{get:e,dispose:r}}function G$e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new Ze,color:new br};break;case"SpotLight":r={position:new Ze,direction:new Ze,color:new br,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Ze,color:new br,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Ze,skyColor:new br,groundColor:new br};break;case"RectAreaLight":r={color:new br,position:new Ze,halfWidth:new Ze,halfHeight:new Ze};break}return t[e.id]=r,r}}}function H$e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tr};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tr};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tr,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=r,r}}}let k$e=0;function z$e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Q$e(t){const e=new G$e,r=H$e(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new Ze);const i=new Ze,a=new kr,s=new kr;function o(u){let l=0,d=0,f=0;for(let F=0;F<9;F++)n.probe[F].set(0,0,0);let h=0,p=0,_=0,g=0,m=0,y=0,v=0,A=0,T=0,S=0,P=0;u.sort(z$e);for(let F=0,N=u.length;F<N;F++){const R=u[F],C=R.color,M=R.intensity,U=R.distance;let B=null;if(R.shadow&&R.shadow.map&&(R.shadow.map.texture.format===Np?B=R.shadow.map.texture:B=R.shadow.map.depthTexture||R.shadow.map.texture),R.isAmbientLight)l+=C.r*M,d+=C.g*M,f+=C.b*M;else if(R.isLightProbe){for(let G=0;G<9;G++)n.probe[G].addScaledVector(R.sh.coefficients[G],M);P++}else if(R.isDirectionalLight){const G=e.get(R);if(G.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const K=R.shadow,$=r.get(R);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,n.directionalShadow[h]=$,n.directionalShadowMap[h]=B,n.directionalShadowMatrix[h]=R.shadow.matrix,y++}n.directional[h]=G,h++}else if(R.isSpotLight){const G=e.get(R);G.position.setFromMatrixPosition(R.matrixWorld),G.color.copy(C).multiplyScalar(M),G.distance=U,G.coneCos=Math.cos(R.angle),G.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),G.decay=R.decay,n.spot[_]=G;const K=R.shadow;if(R.map&&(n.spotLightMap[T]=R.map,T++,K.updateMatrices(R),R.castShadow&&S++),n.spotLightMatrix[_]=K.matrix,R.castShadow){const $=r.get(R);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,n.spotShadow[_]=$,n.spotShadowMap[_]=B,A++}_++}else if(R.isRectAreaLight){const G=e.get(R);G.color.copy(C).multiplyScalar(M),G.halfWidth.set(R.width*.5,0,0),G.halfHeight.set(0,R.height*.5,0),n.rectArea[g]=G,g++}else if(R.isPointLight){const G=e.get(R);if(G.color.copy(R.color).multiplyScalar(R.intensity),G.distance=R.distance,G.decay=R.decay,R.castShadow){const K=R.shadow,$=r.get(R);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,$.shadowCameraNear=K.camera.near,$.shadowCameraFar=K.camera.far,n.pointShadow[p]=$,n.pointShadowMap[p]=B,n.pointShadowMatrix[p]=R.shadow.matrix,v++}n.point[p]=G,p++}else if(R.isHemisphereLight){const G=e.get(R);G.skyColor.copy(R.color).multiplyScalar(M),G.groundColor.copy(R.groundColor).multiplyScalar(M),n.hemi[m]=G,m++}}g>0&&(t.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=It.LTC_FLOAT_1,n.rectAreaLTC2=It.LTC_FLOAT_2):(n.rectAreaLTC1=It.LTC_HALF_1,n.rectAreaLTC2=It.LTC_HALF_2)),n.ambient[0]=l,n.ambient[1]=d,n.ambient[2]=f;const j=n.hash;(j.directionalLength!==h||j.pointLength!==p||j.spotLength!==_||j.rectAreaLength!==g||j.hemiLength!==m||j.numDirectionalShadows!==y||j.numPointShadows!==v||j.numSpotShadows!==A||j.numSpotMaps!==T||j.numLightProbes!==P)&&(n.directional.length=h,n.spot.length=_,n.rectArea.length=g,n.point.length=p,n.hemi.length=m,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=v,n.pointShadowMap.length=v,n.spotShadow.length=A,n.spotShadowMap.length=A,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=v,n.spotLightMatrix.length=A+T-S,n.spotLightMap.length=T,n.numSpotLightShadowsWithMaps=S,n.numLightProbes=P,j.directionalLength=h,j.pointLength=p,j.spotLength=_,j.rectAreaLength=g,j.hemiLength=m,j.numDirectionalShadows=y,j.numPointShadows=v,j.numSpotShadows=A,j.numSpotMaps=T,j.numLightProbes=P,n.version=k$e++)}function c(u,l){let d=0,f=0,h=0,p=0,_=0;const g=l.matrixWorldInverse;for(let m=0,y=u.length;m<y;m++){const v=u[m];if(v.isDirectionalLight){const A=n.directional[d];A.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(g),d++}else if(v.isSpotLight){const A=n.spot[h];A.position.setFromMatrixPosition(v.matrixWorld),A.position.applyMatrix4(g),A.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(g),h++}else if(v.isRectAreaLight){const A=n.rectArea[p];A.position.setFromMatrixPosition(v.matrixWorld),A.position.applyMatrix4(g),s.identity(),a.copy(v.matrixWorld),a.premultiply(g),s.extractRotation(a),A.halfWidth.set(v.width*.5,0,0),A.halfHeight.set(0,v.height*.5,0),A.halfWidth.applyMatrix4(s),A.halfHeight.applyMatrix4(s),p++}else if(v.isPointLight){const A=n.point[f];A.position.setFromMatrixPosition(v.matrixWorld),A.position.applyMatrix4(g),f++}else if(v.isHemisphereLight){const A=n.hemi[_];A.direction.setFromMatrixPosition(v.matrixWorld),A.direction.transformDirection(g),_++}}}return{setup:o,setupView:c,state:n}}function z$(t){const e=new Q$e(t),r=[],n=[];function i(l){u.camera=l,r.length=0,n.length=0}function a(l){r.push(l)}function s(l){n.push(l)}function o(){e.setup(r)}function c(l){e.setupView(r,l)}const u={lightsArray:r,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function W$e(t){let e=new WeakMap;function r(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new z$(t),e.set(i,[o])):a>=s.length?(o=new z$(t),s.push(o)):o=s[a],o}function n(){e=new WeakMap}return{get:r,dispose:n}}const K$e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,X$e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,J$e=[new Ze(1,0,0),new Ze(-1,0,0),new Ze(0,1,0),new Ze(0,-1,0),new Ze(0,0,1),new Ze(0,0,-1)],Y$e=[new Ze(0,-1,0),new Ze(0,-1,0),new Ze(0,0,1),new Ze(0,0,-1),new Ze(0,-1,0),new Ze(0,-1,0)],Q$=new kr,g_=new Ze,ZC=new Ze;function $$e(t,e,r){let n=new Mk;const i=new tr,a=new tr,s=new Tn,o=new uKe,c=new cKe,u={},l=r.maxTextureSize,d={[wl]:pa,[pa]:wl,[Su]:Su},f=new Vo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tr},radius:{value:4}},vertexShader:K$e,fragmentShader:X$e}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new Ga;p.setAttribute("position",new jo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Fa(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_3;let m=this.type;this.render=function(S,P,j){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||S.length===0)return;S.type===JQe&&(er("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),S.type=_3);const F=t.getRenderTarget(),N=t.getActiveCubeFace(),R=t.getActiveMipmapLevel(),C=t.state;C.setBlending(Fu),C.buffers.depth.getReversed()===!0?C.buffers.color.setClear(0,0,0,0):C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);const M=m!==this.type;M&&P.traverse(function(U){U.material&&(Array.isArray(U.material)?U.material.forEach(B=>B.needsUpdate=!0):U.material.needsUpdate=!0)});for(let U=0,B=S.length;U<B;U++){const G=S[U],K=G.shadow;if(K===void 0){er("WebGLShadowMap:",G,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;i.copy(K.mapSize);const $=K.getFrameExtents();if(i.multiply($),a.copy(K.mapSize),(i.x>l||i.y>l)&&(i.x>l&&(a.x=Math.floor(l/$.x),i.x=a.x*$.x,K.mapSize.x=a.x),i.y>l&&(a.y=Math.floor(l/$.y),i.y=a.y*$.y,K.mapSize.y=a.y)),K.map===null||M===!0){if(K.map!==null&&(K.map.depthTexture!==null&&(K.map.depthTexture.dispose(),K.map.depthTexture=null),K.map.dispose()),this.type===cE){if(G.isPointLight){er("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}K.map=new Lo(i.x,i.y,{format:Np,type:Gu,minFilter:xi,magFilter:xi,generateMipmaps:!1}),K.map.texture.name=G.name+".shadowMap",K.map.depthTexture=new II(i.x,i.y,Oo),K.map.depthTexture.name=G.name+".shadowMapDepth",K.map.depthTexture.format=Hu,K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=si,K.map.depthTexture.magFilter=si}else{G.isPointLight?(K.map=new dEe(i.x),K.map.depthTexture=new aKe(i.x,qo)):(K.map=new Lo(i.x,i.y),K.map.depthTexture=new II(i.x,i.y,qo)),K.map.depthTexture.name=G.name+".shadowMap",K.map.depthTexture.format=Hu;const pe=t.state.buffers.depth.getReversed();this.type===_3?(K.map.depthTexture.compareFunction=pe?Rk:Ok,K.map.depthTexture.minFilter=xi,K.map.depthTexture.magFilter=xi):(K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=si,K.map.depthTexture.magFilter=si)}K.camera.updateProjectionMatrix()}const se=K.map.isWebGLCubeRenderTarget?6:1;for(let pe=0;pe<se;pe++){if(K.map.isWebGLCubeRenderTarget)t.setRenderTarget(K.map,pe),t.clear();else{pe===0&&(t.setRenderTarget(K.map),t.clear());const we=K.getViewport(pe);s.set(a.x*we.x,a.y*we.y,a.x*we.z,a.y*we.w),C.viewport(s)}if(G.isPointLight){const we=K.camera,Ce=K.matrix,Le=G.distance||we.far;Le!==we.far&&(we.far=Le,we.updateProjectionMatrix()),g_.setFromMatrixPosition(G.matrixWorld),we.position.copy(g_),ZC.copy(we.position),ZC.add(J$e[pe]),we.up.copy(Y$e[pe]),we.lookAt(ZC),we.updateMatrixWorld(),Ce.makeTranslation(-g_.x,-g_.y,-g_.z),Q$.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),K._frustum.setFromProjectionMatrix(Q$,we.coordinateSystem,we.reversedDepth)}else K.updateMatrices(G);n=K.getFrustum(),A(P,j,K.camera,G,this.type)}K.isPointLightShadow!==!0&&this.type===cE&&y(K,j),K.needsUpdate=!1}m=this.type,g.needsUpdate=!1,t.setRenderTarget(F,N,R)};function y(S,P){const j=e.update(_);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,h.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Lo(i.x,i.y,{format:Np,type:Gu})),f.uniforms.shadow_pass.value=S.map.depthTexture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,t.setRenderTarget(S.mapPass),t.clear(),t.renderBufferDirect(P,null,j,f,_,null),h.uniforms.shadow_pass.value=S.mapPass.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,t.setRenderTarget(S.map),t.clear(),t.renderBufferDirect(P,null,j,h,_,null)}function v(S,P,j,F){let N=null;const R=j.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(R!==void 0)N=R;else if(N=j.isPointLight===!0?c:o,t.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const C=N.uuid,M=P.uuid;let U=u[C];U===void 0&&(U={},u[C]=U);let B=U[M];B===void 0&&(B=N.clone(),U[M]=B,P.addEventListener("dispose",T)),N=B}if(N.visible=P.visible,N.wireframe=P.wireframe,F===cE?N.side=P.shadowSide!==null?P.shadowSide:P.side:N.side=P.shadowSide!==null?P.shadowSide:d[P.side],N.alphaMap=P.alphaMap,N.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,N.map=P.map,N.clipShadows=P.clipShadows,N.clippingPlanes=P.clippingPlanes,N.clipIntersection=P.clipIntersection,N.displacementMap=P.displacementMap,N.displacementScale=P.displacementScale,N.displacementBias=P.displacementBias,N.wireframeLinewidth=P.wireframeLinewidth,N.linewidth=P.linewidth,j.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const C=t.properties.get(N);C.light=j}return N}function A(S,P,j,F,N){if(S.visible===!1)return;if(S.layers.test(P.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&N===cE)&&(!S.frustumCulled||n.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,S.matrixWorld);const M=e.update(S),U=S.material;if(Array.isArray(U)){const B=M.groups;for(let G=0,K=B.length;G<K;G++){const $=B[G],se=U[$.materialIndex];if(se&&se.visible){const pe=v(S,se,F,N);S.onBeforeShadow(t,S,P,j,M,pe,$),t.renderBufferDirect(j,null,M,pe,S,$),S.onAfterShadow(t,S,P,j,M,pe,$)}}}else if(U.visible){const B=v(S,U,F,N);S.onBeforeShadow(t,S,P,j,M,B,null),t.renderBufferDirect(j,null,M,B,S,null),S.onAfterShadow(t,S,P,j,M,B,null)}}const C=S.children;for(let M=0,U=C.length;M<U;M++)A(C[M],P,j,F,N)}function T(S){S.target.removeEventListener("dispose",T);for(const j in u){const F=u[j],N=S.target.uuid;N in F&&(F[N].dispose(),delete F[N])}}}const Z$e={[uV]:cV,[lV]:hV,[dV]:pV,[Rp]:fV,[cV]:uV,[hV]:lV,[pV]:dV,[fV]:Rp};function eZe(t,e){function r(){let oe=!1;const Te=new Tn;let We=null;const Qe=new Tn(0,0,0,0);return{setMask:function(Xe){We!==Xe&&!oe&&(t.colorMask(Xe,Xe,Xe,Xe),We=Xe)},setLocked:function(Xe){oe=Xe},setClear:function(Xe,Pe,He,Ee,ce){ce===!0&&(Xe*=Ee,Pe*=Ee,He*=Ee),Te.set(Xe,Pe,He,Ee),Qe.equals(Te)===!1&&(t.clearColor(Xe,Pe,He,Ee),Qe.copy(Te))},reset:function(){oe=!1,We=null,Qe.set(-1,0,0,0)}}}function n(){let oe=!1,Te=!1,We=null,Qe=null,Xe=null;return{setReversed:function(Pe){if(Te!==Pe){const He=e.get("EXT_clip_control");Pe?He.clipControlEXT(He.LOWER_LEFT_EXT,He.ZERO_TO_ONE_EXT):He.clipControlEXT(He.LOWER_LEFT_EXT,He.NEGATIVE_ONE_TO_ONE_EXT),Te=Pe;const Ee=Xe;Xe=null,this.setClear(Ee)}},getReversed:function(){return Te},setTest:function(Pe){Pe?Me(t.DEPTH_TEST):W(t.DEPTH_TEST)},setMask:function(Pe){We!==Pe&&!oe&&(t.depthMask(Pe),We=Pe)},setFunc:function(Pe){if(Te&&(Pe=Z$e[Pe]),Qe!==Pe){switch(Pe){case uV:t.depthFunc(t.NEVER);break;case cV:t.depthFunc(t.ALWAYS);break;case lV:t.depthFunc(t.LESS);break;case Rp:t.depthFunc(t.LEQUAL);break;case dV:t.depthFunc(t.EQUAL);break;case fV:t.depthFunc(t.GEQUAL);break;case hV:t.depthFunc(t.GREATER);break;case pV:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Qe=Pe}},setLocked:function(Pe){oe=Pe},setClear:function(Pe){Xe!==Pe&&(Te&&(Pe=1-Pe),t.clearDepth(Pe),Xe=Pe)},reset:function(){oe=!1,We=null,Qe=null,Xe=null,Te=!1}}}function i(){let oe=!1,Te=null,We=null,Qe=null,Xe=null,Pe=null,He=null,Ee=null,ce=null;return{setTest:function(ne){oe||(ne?Me(t.STENCIL_TEST):W(t.STENCIL_TEST))},setMask:function(ne){Te!==ne&&!oe&&(t.stencilMask(ne),Te=ne)},setFunc:function(ne,xe,Be){(We!==ne||Qe!==xe||Xe!==Be)&&(t.stencilFunc(ne,xe,Be),We=ne,Qe=xe,Xe=Be)},setOp:function(ne,xe,Be){(Pe!==ne||He!==xe||Ee!==Be)&&(t.stencilOp(ne,xe,Be),Pe=ne,He=xe,Ee=Be)},setLocked:function(ne){oe=ne},setClear:function(ne){ce!==ne&&(t.clearStencil(ne),ce=ne)},reset:function(){oe=!1,Te=null,We=null,Qe=null,Xe=null,Pe=null,He=null,Ee=null,ce=null}}}const a=new r,s=new n,o=new i,c=new WeakMap,u=new WeakMap;let l={},d={},f=new WeakMap,h=[],p=null,_=!1,g=null,m=null,y=null,v=null,A=null,T=null,S=null,P=new br(0,0,0),j=0,F=!1,N=null,R=null,C=null,M=null,U=null;const B=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,K=0;const $=t.getParameter(t.VERSION);$.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec($)[1]),G=K>=1):$.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),G=K>=2);let se=null,pe={};const we=t.getParameter(t.SCISSOR_BOX),Ce=t.getParameter(t.VIEWPORT),Le=new Tn().fromArray(we),Ie=new Tn().fromArray(Ce);function Oe(oe,Te,We,Qe){const Xe=new Uint8Array(4),Pe=t.createTexture();t.bindTexture(oe,Pe),t.texParameteri(oe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(oe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let He=0;He<We;He++)oe===t.TEXTURE_3D||oe===t.TEXTURE_2D_ARRAY?t.texImage3D(Te,0,t.RGBA,1,1,Qe,0,t.RGBA,t.UNSIGNED_BYTE,Xe):t.texImage2D(Te+He,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Xe);return Pe}const ye={};ye[t.TEXTURE_2D]=Oe(t.TEXTURE_2D,t.TEXTURE_2D,1),ye[t.TEXTURE_CUBE_MAP]=Oe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ye[t.TEXTURE_2D_ARRAY]=Oe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ye[t.TEXTURE_3D]=Oe(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Me(t.DEPTH_TEST),s.setFunc(Rp),_e(!1),he(zY),Me(t.CULL_FACE),J(Fu);function Me(oe){l[oe]!==!0&&(t.enable(oe),l[oe]=!0)}function W(oe){l[oe]!==!1&&(t.disable(oe),l[oe]=!1)}function ft(oe,Te){return d[oe]!==Te?(t.bindFramebuffer(oe,Te),d[oe]=Te,oe===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=Te),oe===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=Te),!0):!1}function le(oe,Te){let We=h,Qe=!1;if(oe){We=f.get(Te),We===void 0&&(We=[],f.set(Te,We));const Xe=oe.textures;if(We.length!==Xe.length||We[0]!==t.COLOR_ATTACHMENT0){for(let Pe=0,He=Xe.length;Pe<He;Pe++)We[Pe]=t.COLOR_ATTACHMENT0+Pe;We.length=Xe.length,Qe=!0}}else We[0]!==t.BACK&&(We[0]=t.BACK,Qe=!0);Qe&&t.drawBuffers(We)}function me(oe){return p!==oe?(t.useProgram(oe),p=oe,!0):!1}const Z={[Cd]:t.FUNC_ADD,[$Qe]:t.FUNC_SUBTRACT,[ZQe]:t.FUNC_REVERSE_SUBTRACT};Z[eWe]=t.MIN,Z[tWe]=t.MAX;const q={[rWe]:t.ZERO,[nWe]:t.ONE,[iWe]:t.SRC_COLOR,[sV]:t.SRC_ALPHA,[lWe]:t.SRC_ALPHA_SATURATE,[uWe]:t.DST_COLOR,[sWe]:t.DST_ALPHA,[aWe]:t.ONE_MINUS_SRC_COLOR,[oV]:t.ONE_MINUS_SRC_ALPHA,[cWe]:t.ONE_MINUS_DST_COLOR,[oWe]:t.ONE_MINUS_DST_ALPHA,[dWe]:t.CONSTANT_COLOR,[fWe]:t.ONE_MINUS_CONSTANT_COLOR,[hWe]:t.CONSTANT_ALPHA,[pWe]:t.ONE_MINUS_CONSTANT_ALPHA};function J(oe,Te,We,Qe,Xe,Pe,He,Ee,ce,ne){if(oe===Fu){_===!0&&(W(t.BLEND),_=!1);return}if(_===!1&&(Me(t.BLEND),_=!0),oe!==YQe){if(oe!==g||ne!==F){if((m!==Cd||A!==Cd)&&(t.blendEquation(t.FUNC_ADD),m=Cd,A=Cd),ne)switch(oe){case _p:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case QY:t.blendFunc(t.ONE,t.ONE);break;case WY:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case KY:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:Ar("WebGLState: Invalid blending: ",oe);break}else switch(oe){case _p:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case QY:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case WY:Ar("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case KY:Ar("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ar("WebGLState: Invalid blending: ",oe);break}y=null,v=null,T=null,S=null,P.set(0,0,0),j=0,g=oe,F=ne}return}Xe=Xe||Te,Pe=Pe||We,He=He||Qe,(Te!==m||Xe!==A)&&(t.blendEquationSeparate(Z[Te],Z[Xe]),m=Te,A=Xe),(We!==y||Qe!==v||Pe!==T||He!==S)&&(t.blendFuncSeparate(q[We],q[Qe],q[Pe],q[He]),y=We,v=Qe,T=Pe,S=He),(Ee.equals(P)===!1||ce!==j)&&(t.blendColor(Ee.r,Ee.g,Ee.b,ce),P.copy(Ee),j=ce),g=oe,F=!1}function re(oe,Te){oe.side===Su?W(t.CULL_FACE):Me(t.CULL_FACE);let We=oe.side===pa;Te&&(We=!We),_e(We),oe.blending===_p&&oe.transparent===!1?J(Fu):J(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),s.setFunc(oe.depthFunc),s.setTest(oe.depthTest),s.setMask(oe.depthWrite),a.setMask(oe.colorWrite);const Qe=oe.stencilWrite;o.setTest(Qe),Qe&&(o.setMask(oe.stencilWriteMask),o.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),o.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),Ue(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Me(t.SAMPLE_ALPHA_TO_COVERAGE):W(t.SAMPLE_ALPHA_TO_COVERAGE)}function _e(oe){N!==oe&&(oe?t.frontFace(t.CW):t.frontFace(t.CCW),N=oe)}function he(oe){oe!==KQe?(Me(t.CULL_FACE),oe!==R&&(oe===zY?t.cullFace(t.BACK):oe===XQe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):W(t.CULL_FACE),R=oe}function ue(oe){oe!==C&&(G&&t.lineWidth(oe),C=oe)}function Ue(oe,Te,We){oe?(Me(t.POLYGON_OFFSET_FILL),(M!==Te||U!==We)&&(t.polygonOffset(Te,We),M=Te,U=We)):W(t.POLYGON_OFFSET_FILL)}function De(oe){oe?Me(t.SCISSOR_TEST):W(t.SCISSOR_TEST)}function Je(oe){oe===void 0&&(oe=t.TEXTURE0+B-1),se!==oe&&(t.activeTexture(oe),se=oe)}function ze(oe,Te,We){We===void 0&&(se===null?We=t.TEXTURE0+B-1:We=se);let Qe=pe[We];Qe===void 0&&(Qe={type:void 0,texture:void 0},pe[We]=Qe),(Qe.type!==oe||Qe.texture!==Te)&&(se!==We&&(t.activeTexture(We),se=We),t.bindTexture(oe,Te||ye[oe]),Qe.type=oe,Qe.texture=Te)}function ve(){const oe=pe[se];oe!==void 0&&oe.type!==void 0&&(t.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function de(){try{t.compressedTexImage2D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function Ge(){try{t.compressedTexImage3D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function it(){try{t.texSubImage2D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function ae(){try{t.texSubImage3D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function z(){try{t.compressedTexSubImage2D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function V(){try{t.compressedTexSubImage3D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function x(){try{t.texStorage2D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function O(){try{t.texStorage3D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function D(){try{t.texImage2D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function H(){try{t.texImage3D(...arguments)}catch(oe){Ar("WebGLState:",oe)}}function Y(oe){Le.equals(oe)===!1&&(t.scissor(oe.x,oe.y,oe.z,oe.w),Le.copy(oe))}function Q(oe){Ie.equals(oe)===!1&&(t.viewport(oe.x,oe.y,oe.z,oe.w),Ie.copy(oe))}function ee(oe,Te){let We=u.get(Te);We===void 0&&(We=new WeakMap,u.set(Te,We));let Qe=We.get(oe);Qe===void 0&&(Qe=t.getUniformBlockIndex(Te,oe.name),We.set(oe,Qe))}function ie(oe,Te){const Qe=u.get(Te).get(oe);c.get(Te)!==Qe&&(t.uniformBlockBinding(Te,Qe,oe.__bindingPointIndex),c.set(Te,Qe))}function Re(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),l={},se=null,pe={},d={},f=new WeakMap,h=[],p=null,_=!1,g=null,m=null,y=null,v=null,A=null,T=null,S=null,P=new br(0,0,0),j=0,F=!1,N=null,R=null,C=null,M=null,U=null,Le.set(0,0,t.canvas.width,t.canvas.height),Ie.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:Me,disable:W,bindFramebuffer:ft,drawBuffers:le,useProgram:me,setBlending:J,setMaterial:re,setFlipSided:_e,setCullFace:he,setLineWidth:ue,setPolygonOffset:Ue,setScissorTest:De,activeTexture:Je,bindTexture:ze,unbindTexture:ve,compressedTexImage2D:de,compressedTexImage3D:Ge,texImage2D:D,texImage3D:H,updateUBOMapping:ee,uniformBlockBinding:ie,texStorage2D:x,texStorage3D:O,texSubImage2D:it,texSubImage3D:ae,compressedTexSubImage2D:z,compressedTexSubImage3D:V,scissor:Y,viewport:Q,reset:Re}}function tZe(t,e,r,n,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new tr,l=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(ve,de){return h?new OffscreenCanvas(ve,de):CN("canvas")}function _(ve,de,Ge){let it=1;const ae=ze(ve);if((ae.width>Ge||ae.height>Ge)&&(it=Ge/Math.max(ae.width,ae.height)),it<1)if(typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ve instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ve instanceof ImageBitmap||typeof VideoFrame<"u"&&ve instanceof VideoFrame){const z=Math.floor(it*ae.width),V=Math.floor(it*ae.height);d===void 0&&(d=p(z,V));const x=de?p(z,V):d;return x.width=z,x.height=V,x.getContext("2d").drawImage(ve,0,0,z,V),er("WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+z+"x"+V+")."),x}else return"data"in ve&&er("WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),ve;return ve}function g(ve){return ve.generateMipmaps}function m(ve){t.generateMipmap(ve)}function y(ve){return ve.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:ve.isWebGL3DRenderTarget?t.TEXTURE_3D:ve.isWebGLArrayRenderTarget||ve.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function v(ve,de,Ge,it,ae=!1){if(ve!==null){if(t[ve]!==void 0)return t[ve];er("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let z=de;if(de===t.RED&&(Ge===t.FLOAT&&(z=t.R32F),Ge===t.HALF_FLOAT&&(z=t.R16F),Ge===t.UNSIGNED_BYTE&&(z=t.R8)),de===t.RED_INTEGER&&(Ge===t.UNSIGNED_BYTE&&(z=t.R8UI),Ge===t.UNSIGNED_SHORT&&(z=t.R16UI),Ge===t.UNSIGNED_INT&&(z=t.R32UI),Ge===t.BYTE&&(z=t.R8I),Ge===t.SHORT&&(z=t.R16I),Ge===t.INT&&(z=t.R32I)),de===t.RG&&(Ge===t.FLOAT&&(z=t.RG32F),Ge===t.HALF_FLOAT&&(z=t.RG16F),Ge===t.UNSIGNED_BYTE&&(z=t.RG8)),de===t.RG_INTEGER&&(Ge===t.UNSIGNED_BYTE&&(z=t.RG8UI),Ge===t.UNSIGNED_SHORT&&(z=t.RG16UI),Ge===t.UNSIGNED_INT&&(z=t.RG32UI),Ge===t.BYTE&&(z=t.RG8I),Ge===t.SHORT&&(z=t.RG16I),Ge===t.INT&&(z=t.RG32I)),de===t.RGB_INTEGER&&(Ge===t.UNSIGNED_BYTE&&(z=t.RGB8UI),Ge===t.UNSIGNED_SHORT&&(z=t.RGB16UI),Ge===t.UNSIGNED_INT&&(z=t.RGB32UI),Ge===t.BYTE&&(z=t.RGB8I),Ge===t.SHORT&&(z=t.RGB16I),Ge===t.INT&&(z=t.RGB32I)),de===t.RGBA_INTEGER&&(Ge===t.UNSIGNED_BYTE&&(z=t.RGBA8UI),Ge===t.UNSIGNED_SHORT&&(z=t.RGBA16UI),Ge===t.UNSIGNED_INT&&(z=t.RGBA32UI),Ge===t.BYTE&&(z=t.RGBA8I),Ge===t.SHORT&&(z=t.RGBA16I),Ge===t.INT&&(z=t.RGBA32I)),de===t.RGB&&(Ge===t.UNSIGNED_INT_5_9_9_9_REV&&(z=t.RGB9_E5),Ge===t.UNSIGNED_INT_10F_11F_11F_REV&&(z=t.R11F_G11F_B10F)),de===t.RGBA){const V=ae?MN:Tr.getTransfer(it);Ge===t.FLOAT&&(z=t.RGBA32F),Ge===t.HALF_FLOAT&&(z=t.RGBA16F),Ge===t.UNSIGNED_BYTE&&(z=V===Pr?t.SRGB8_ALPHA8:t.RGBA8),Ge===t.UNSIGNED_SHORT_4_4_4_4&&(z=t.RGBA4),Ge===t.UNSIGNED_SHORT_5_5_5_1&&(z=t.RGB5_A1)}return(z===t.R16F||z===t.R32F||z===t.RG16F||z===t.RG32F||z===t.RGBA16F||z===t.RGBA32F)&&e.get("EXT_color_buffer_float"),z}function A(ve,de){let Ge;return ve?de===null||de===qo||de===xI?Ge=t.DEPTH24_STENCIL8:de===Oo?Ge=t.DEPTH32F_STENCIL8:de===SI&&(Ge=t.DEPTH24_STENCIL8,er("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):de===null||de===qo||de===xI?Ge=t.DEPTH_COMPONENT24:de===Oo?Ge=t.DEPTH_COMPONENT32F:de===SI&&(Ge=t.DEPTH_COMPONENT16),Ge}function T(ve,de){return g(ve)===!0||ve.isFramebufferTexture&&ve.minFilter!==si&&ve.minFilter!==xi?Math.log2(Math.max(de.width,de.height))+1:ve.mipmaps!==void 0&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?de.mipmaps.length:1}function S(ve){const de=ve.target;de.removeEventListener("dispose",S),j(de),de.isVideoTexture&&l.delete(de)}function P(ve){const de=ve.target;de.removeEventListener("dispose",P),N(de)}function j(ve){const de=n.get(ve);if(de.__webglInit===void 0)return;const Ge=ve.source,it=f.get(Ge);if(it){const ae=it[de.__cacheKey];ae.usedTimes--,ae.usedTimes===0&&F(ve),Object.keys(it).length===0&&f.delete(Ge)}n.remove(ve)}function F(ve){const de=n.get(ve);t.deleteTexture(de.__webglTexture);const Ge=ve.source,it=f.get(Ge);delete it[de.__cacheKey],s.memory.textures--}function N(ve){const de=n.get(ve);if(ve.depthTexture&&(ve.depthTexture.dispose(),n.remove(ve.depthTexture)),ve.isWebGLCubeRenderTarget)for(let it=0;it<6;it++){if(Array.isArray(de.__webglFramebuffer[it]))for(let ae=0;ae<de.__webglFramebuffer[it].length;ae++)t.deleteFramebuffer(de.__webglFramebuffer[it][ae]);else t.deleteFramebuffer(de.__webglFramebuffer[it]);de.__webglDepthbuffer&&t.deleteRenderbuffer(de.__webglDepthbuffer[it])}else{if(Array.isArray(de.__webglFramebuffer))for(let it=0;it<de.__webglFramebuffer.length;it++)t.deleteFramebuffer(de.__webglFramebuffer[it]);else t.deleteFramebuffer(de.__webglFramebuffer);if(de.__webglDepthbuffer&&t.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&t.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer)for(let it=0;it<de.__webglColorRenderbuffer.length;it++)de.__webglColorRenderbuffer[it]&&t.deleteRenderbuffer(de.__webglColorRenderbuffer[it]);de.__webglDepthRenderbuffer&&t.deleteRenderbuffer(de.__webglDepthRenderbuffer)}const Ge=ve.textures;for(let it=0,ae=Ge.length;it<ae;it++){const z=n.get(Ge[it]);z.__webglTexture&&(t.deleteTexture(z.__webglTexture),s.memory.textures--),n.remove(Ge[it])}n.remove(ve)}let R=0;function C(){R=0}function M(){const ve=R;return ve>=i.maxTextures&&er("WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+i.maxTextures),R+=1,ve}function U(ve){const de=[];return de.push(ve.wrapS),de.push(ve.wrapT),de.push(ve.wrapR||0),de.push(ve.magFilter),de.push(ve.minFilter),de.push(ve.anisotropy),de.push(ve.internalFormat),de.push(ve.format),de.push(ve.type),de.push(ve.generateMipmaps),de.push(ve.premultiplyAlpha),de.push(ve.flipY),de.push(ve.unpackAlignment),de.push(ve.colorSpace),de.join()}function B(ve,de){const Ge=n.get(ve);if(ve.isVideoTexture&&De(ve),ve.isRenderTargetTexture===!1&&ve.isExternalTexture!==!0&&ve.version>0&&Ge.__version!==ve.version){const it=ve.image;if(it===null)er("WebGLRenderer: Texture marked for update but no image data found.");else if(it.complete===!1)er("WebGLRenderer: Texture marked for update but image is incomplete");else{ye(Ge,ve,de);return}}else ve.isExternalTexture&&(Ge.__webglTexture=ve.sourceTexture?ve.sourceTexture:null);r.bindTexture(t.TEXTURE_2D,Ge.__webglTexture,t.TEXTURE0+de)}function G(ve,de){const Ge=n.get(ve);if(ve.isRenderTargetTexture===!1&&ve.version>0&&Ge.__version!==ve.version){ye(Ge,ve,de);return}else ve.isExternalTexture&&(Ge.__webglTexture=ve.sourceTexture?ve.sourceTexture:null);r.bindTexture(t.TEXTURE_2D_ARRAY,Ge.__webglTexture,t.TEXTURE0+de)}function K(ve,de){const Ge=n.get(ve);if(ve.isRenderTargetTexture===!1&&ve.version>0&&Ge.__version!==ve.version){ye(Ge,ve,de);return}r.bindTexture(t.TEXTURE_3D,Ge.__webglTexture,t.TEXTURE0+de)}function $(ve,de){const Ge=n.get(ve);if(ve.isCubeDepthTexture!==!0&&ve.version>0&&Ge.__version!==ve.version){Me(Ge,ve,de);return}r.bindTexture(t.TEXTURE_CUBE_MAP,Ge.__webglTexture,t.TEXTURE0+de)}const se={[gV]:t.REPEAT,[Ru]:t.CLAMP_TO_EDGE,[yV]:t.MIRRORED_REPEAT},pe={[si]:t.NEAREST,[gWe]:t.NEAREST_MIPMAP_NEAREST,[nR]:t.NEAREST_MIPMAP_LINEAR,[xi]:t.LINEAR,[TC]:t.LINEAR_MIPMAP_NEAREST,[Kd]:t.LINEAR_MIPMAP_LINEAR},we={[vWe]:t.NEVER,[xWe]:t.ALWAYS,[AWe]:t.LESS,[Ok]:t.LEQUAL,[TWe]:t.EQUAL,[Rk]:t.GEQUAL,[wWe]:t.GREATER,[SWe]:t.NOTEQUAL};function Ce(ve,de){if(de.type===Oo&&e.has("OES_texture_float_linear")===!1&&(de.magFilter===xi||de.magFilter===TC||de.magFilter===nR||de.magFilter===Kd||de.minFilter===xi||de.minFilter===TC||de.minFilter===nR||de.minFilter===Kd)&&er("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(ve,t.TEXTURE_WRAP_S,se[de.wrapS]),t.texParameteri(ve,t.TEXTURE_WRAP_T,se[de.wrapT]),(ve===t.TEXTURE_3D||ve===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ve,t.TEXTURE_WRAP_R,se[de.wrapR]),t.texParameteri(ve,t.TEXTURE_MAG_FILTER,pe[de.magFilter]),t.texParameteri(ve,t.TEXTURE_MIN_FILTER,pe[de.minFilter]),de.compareFunction&&(t.texParameteri(ve,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ve,t.TEXTURE_COMPARE_FUNC,we[de.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(de.magFilter===si||de.minFilter!==nR&&de.minFilter!==Kd||de.type===Oo&&e.has("OES_texture_float_linear")===!1)return;if(de.anisotropy>1||n.get(de).__currentAnisotropy){const Ge=e.get("EXT_texture_filter_anisotropic");t.texParameterf(ve,Ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(de.anisotropy,i.getMaxAnisotropy())),n.get(de).__currentAnisotropy=de.anisotropy}}}function Le(ve,de){let Ge=!1;ve.__webglInit===void 0&&(ve.__webglInit=!0,de.addEventListener("dispose",S));const it=de.source;let ae=f.get(it);ae===void 0&&(ae={},f.set(it,ae));const z=U(de);if(z!==ve.__cacheKey){ae[z]===void 0&&(ae[z]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,Ge=!0),ae[z].usedTimes++;const V=ae[ve.__cacheKey];V!==void 0&&(ae[ve.__cacheKey].usedTimes--,V.usedTimes===0&&F(de)),ve.__cacheKey=z,ve.__webglTexture=ae[z].texture}return Ge}function Ie(ve,de,Ge){return Math.floor(Math.floor(ve/Ge)/de)}function Oe(ve,de,Ge,it){const z=ve.updateRanges;if(z.length===0)r.texSubImage2D(t.TEXTURE_2D,0,0,0,de.width,de.height,Ge,it,de.data);else{z.sort((H,Y)=>H.start-Y.start);let V=0;for(let H=1;H<z.length;H++){const Y=z[V],Q=z[H],ee=Y.start+Y.count,ie=Ie(Q.start,de.width,4),Re=Ie(Y.start,de.width,4);Q.start<=ee+1&&ie===Re&&Ie(Q.start+Q.count-1,de.width,4)===ie?Y.count=Math.max(Y.count,Q.start+Q.count-Y.start):(++V,z[V]=Q)}z.length=V+1;const x=t.getParameter(t.UNPACK_ROW_LENGTH),O=t.getParameter(t.UNPACK_SKIP_PIXELS),D=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,de.width);for(let H=0,Y=z.length;H<Y;H++){const Q=z[H],ee=Math.floor(Q.start/4),ie=Math.ceil(Q.count/4),Re=ee%de.width,oe=Math.floor(ee/de.width),Te=ie,We=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,Re),t.pixelStorei(t.UNPACK_SKIP_ROWS,oe),r.texSubImage2D(t.TEXTURE_2D,0,Re,oe,Te,We,Ge,it,de.data)}ve.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,x),t.pixelStorei(t.UNPACK_SKIP_PIXELS,O),t.pixelStorei(t.UNPACK_SKIP_ROWS,D)}}function ye(ve,de,Ge){let it=t.TEXTURE_2D;(de.isDataArrayTexture||de.isCompressedArrayTexture)&&(it=t.TEXTURE_2D_ARRAY),de.isData3DTexture&&(it=t.TEXTURE_3D);const ae=Le(ve,de),z=de.source;r.bindTexture(it,ve.__webglTexture,t.TEXTURE0+Ge);const V=n.get(z);if(z.version!==V.__version||ae===!0){r.activeTexture(t.TEXTURE0+Ge);const x=Tr.getPrimaries(Tr.workingColorSpace),O=de.colorSpace===rl?null:Tr.getPrimaries(de.colorSpace),D=de.colorSpace===rl||x===O?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,de.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,de.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,D);let H=_(de.image,!1,i.maxTextureSize);H=Je(de,H);const Y=a.convert(de.format,de.colorSpace),Q=a.convert(de.type);let ee=v(de.internalFormat,Y,Q,de.colorSpace,de.isVideoTexture);Ce(it,de);let ie;const Re=de.mipmaps,oe=de.isVideoTexture!==!0,Te=V.__version===void 0||ae===!0,We=z.dataReady,Qe=T(de,H);if(de.isDepthTexture)ee=A(de.format===Xd,de.type),Te&&(oe?r.texStorage2D(t.TEXTURE_2D,1,ee,H.width,H.height):r.texImage2D(t.TEXTURE_2D,0,ee,H.width,H.height,0,Y,Q,null));else if(de.isDataTexture)if(Re.length>0){oe&&Te&&r.texStorage2D(t.TEXTURE_2D,Qe,ee,Re[0].width,Re[0].height);for(let Xe=0,Pe=Re.length;Xe<Pe;Xe++)ie=Re[Xe],oe?We&&r.texSubImage2D(t.TEXTURE_2D,Xe,0,0,ie.width,ie.height,Y,Q,ie.data):r.texImage2D(t.TEXTURE_2D,Xe,ee,ie.width,ie.height,0,Y,Q,ie.data);de.generateMipmaps=!1}else oe?(Te&&r.texStorage2D(t.TEXTURE_2D,Qe,ee,H.width,H.height),We&&Oe(de,H,Y,Q)):r.texImage2D(t.TEXTURE_2D,0,ee,H.width,H.height,0,Y,Q,H.data);else if(de.isCompressedTexture)if(de.isCompressedArrayTexture){oe&&Te&&r.texStorage3D(t.TEXTURE_2D_ARRAY,Qe,ee,Re[0].width,Re[0].height,H.depth);for(let Xe=0,Pe=Re.length;Xe<Pe;Xe++)if(ie=Re[Xe],de.format!==Gs)if(Y!==null)if(oe){if(We)if(de.layerUpdates.size>0){const He=w$(ie.width,ie.height,de.format,de.type);for(const Ee of de.layerUpdates){const ce=ie.data.subarray(Ee*He/ie.data.BYTES_PER_ELEMENT,(Ee+1)*He/ie.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Xe,0,0,Ee,ie.width,ie.height,1,Y,ce)}de.clearLayerUpdates()}else r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Xe,0,0,0,ie.width,ie.height,H.depth,Y,ie.data)}else r.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Xe,ee,ie.width,ie.height,H.depth,0,ie.data,0,0);else er("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else oe?We&&r.texSubImage3D(t.TEXTURE_2D_ARRAY,Xe,0,0,0,ie.width,ie.height,H.depth,Y,Q,ie.data):r.texImage3D(t.TEXTURE_2D_ARRAY,Xe,ee,ie.width,ie.height,H.depth,0,Y,Q,ie.data)}else{oe&&Te&&r.texStorage2D(t.TEXTURE_2D,Qe,ee,Re[0].width,Re[0].height);for(let Xe=0,Pe=Re.length;Xe<Pe;Xe++)ie=Re[Xe],de.format!==Gs?Y!==null?oe?We&&r.compressedTexSubImage2D(t.TEXTURE_2D,Xe,0,0,ie.width,ie.height,Y,ie.data):r.compressedTexImage2D(t.TEXTURE_2D,Xe,ee,ie.width,ie.height,0,ie.data):er("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oe?We&&r.texSubImage2D(t.TEXTURE_2D,Xe,0,0,ie.width,ie.height,Y,Q,ie.data):r.texImage2D(t.TEXTURE_2D,Xe,ee,ie.width,ie.height,0,Y,Q,ie.data)}else if(de.isDataArrayTexture)if(oe){if(Te&&r.texStorage3D(t.TEXTURE_2D_ARRAY,Qe,ee,H.width,H.height,H.depth),We)if(de.layerUpdates.size>0){const Xe=w$(H.width,H.height,de.format,de.type);for(const Pe of de.layerUpdates){const He=H.data.subarray(Pe*Xe/H.data.BYTES_PER_ELEMENT,(Pe+1)*Xe/H.data.BYTES_PER_ELEMENT);r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Pe,H.width,H.height,1,Y,Q,He)}de.clearLayerUpdates()}else r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,H.width,H.height,H.depth,Y,Q,H.data)}else r.texImage3D(t.TEXTURE_2D_ARRAY,0,ee,H.width,H.height,H.depth,0,Y,Q,H.data);else if(de.isData3DTexture)oe?(Te&&r.texStorage3D(t.TEXTURE_3D,Qe,ee,H.width,H.height,H.depth),We&&r.texSubImage3D(t.TEXTURE_3D,0,0,0,0,H.width,H.height,H.depth,Y,Q,H.data)):r.texImage3D(t.TEXTURE_3D,0,ee,H.width,H.height,H.depth,0,Y,Q,H.data);else if(de.isFramebufferTexture){if(Te)if(oe)r.texStorage2D(t.TEXTURE_2D,Qe,ee,H.width,H.height);else{let Xe=H.width,Pe=H.height;for(let He=0;He<Qe;He++)r.texImage2D(t.TEXTURE_2D,He,ee,Xe,Pe,0,Y,Q,null),Xe>>=1,Pe>>=1}}else if(Re.length>0){if(oe&&Te){const Xe=ze(Re[0]);r.texStorage2D(t.TEXTURE_2D,Qe,ee,Xe.width,Xe.height)}for(let Xe=0,Pe=Re.length;Xe<Pe;Xe++)ie=Re[Xe],oe?We&&r.texSubImage2D(t.TEXTURE_2D,Xe,0,0,Y,Q,ie):r.texImage2D(t.TEXTURE_2D,Xe,ee,Y,Q,ie);de.generateMipmaps=!1}else if(oe){if(Te){const Xe=ze(H);r.texStorage2D(t.TEXTURE_2D,Qe,ee,Xe.width,Xe.height)}We&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,Y,Q,H)}else r.texImage2D(t.TEXTURE_2D,0,ee,Y,Q,H);g(de)&&m(it),V.__version=z.version,de.onUpdate&&de.onUpdate(de)}ve.__version=de.version}function Me(ve,de,Ge){if(de.image.length!==6)return;const it=Le(ve,de),ae=de.source;r.bindTexture(t.TEXTURE_CUBE_MAP,ve.__webglTexture,t.TEXTURE0+Ge);const z=n.get(ae);if(ae.version!==z.__version||it===!0){r.activeTexture(t.TEXTURE0+Ge);const V=Tr.getPrimaries(Tr.workingColorSpace),x=de.colorSpace===rl?null:Tr.getPrimaries(de.colorSpace),O=de.colorSpace===rl||V===x?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,de.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,de.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,O);const D=de.isCompressedTexture||de.image[0].isCompressedTexture,H=de.image[0]&&de.image[0].isDataTexture,Y=[];for(let Pe=0;Pe<6;Pe++)!D&&!H?Y[Pe]=_(de.image[Pe],!0,i.maxCubemapSize):Y[Pe]=H?de.image[Pe].image:de.image[Pe],Y[Pe]=Je(de,Y[Pe]);const Q=Y[0],ee=a.convert(de.format,de.colorSpace),ie=a.convert(de.type),Re=v(de.internalFormat,ee,ie,de.colorSpace),oe=de.isVideoTexture!==!0,Te=z.__version===void 0||it===!0,We=ae.dataReady;let Qe=T(de,Q);Ce(t.TEXTURE_CUBE_MAP,de);let Xe;if(D){oe&&Te&&r.texStorage2D(t.TEXTURE_CUBE_MAP,Qe,Re,Q.width,Q.height);for(let Pe=0;Pe<6;Pe++){Xe=Y[Pe].mipmaps;for(let He=0;He<Xe.length;He++){const Ee=Xe[He];de.format!==Gs?ee!==null?oe?We&&r.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He,0,0,Ee.width,Ee.height,ee,Ee.data):r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He,Re,Ee.width,Ee.height,0,Ee.data):er("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?We&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He,0,0,Ee.width,Ee.height,ee,ie,Ee.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He,Re,Ee.width,Ee.height,0,ee,ie,Ee.data)}}}else{if(Xe=de.mipmaps,oe&&Te){Xe.length>0&&Qe++;const Pe=ze(Y[0]);r.texStorage2D(t.TEXTURE_CUBE_MAP,Qe,Re,Pe.width,Pe.height)}for(let Pe=0;Pe<6;Pe++)if(H){oe?We&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,Y[Pe].width,Y[Pe].height,ee,ie,Y[Pe].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Re,Y[Pe].width,Y[Pe].height,0,ee,ie,Y[Pe].data);for(let He=0;He<Xe.length;He++){const ce=Xe[He].image[Pe].image;oe?We&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He+1,0,0,ce.width,ce.height,ee,ie,ce.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He+1,Re,ce.width,ce.height,0,ee,ie,ce.data)}}else{oe?We&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,ee,ie,Y[Pe]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Re,ee,ie,Y[Pe]);for(let He=0;He<Xe.length;He++){const Ee=Xe[He];oe?We&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He+1,0,0,ee,ie,Ee.image[Pe]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,He+1,Re,ee,ie,Ee.image[Pe])}}}g(de)&&m(t.TEXTURE_CUBE_MAP),z.__version=ae.version,de.onUpdate&&de.onUpdate(de)}ve.__version=de.version}function W(ve,de,Ge,it,ae,z){const V=a.convert(Ge.format,Ge.colorSpace),x=a.convert(Ge.type),O=v(Ge.internalFormat,V,x,Ge.colorSpace),D=n.get(de),H=n.get(Ge);if(H.__renderTarget=de,!D.__hasExternalTextures){const Y=Math.max(1,de.width>>z),Q=Math.max(1,de.height>>z);ae===t.TEXTURE_3D||ae===t.TEXTURE_2D_ARRAY?r.texImage3D(ae,z,O,Y,Q,de.depth,0,V,x,null):r.texImage2D(ae,z,O,Y,Q,0,V,x,null)}r.bindFramebuffer(t.FRAMEBUFFER,ve),Ue(de)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,it,ae,H.__webglTexture,0,ue(de)):(ae===t.TEXTURE_2D||ae>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&ae<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,it,ae,H.__webglTexture,z),r.bindFramebuffer(t.FRAMEBUFFER,null)}function ft(ve,de,Ge){if(t.bindRenderbuffer(t.RENDERBUFFER,ve),de.depthBuffer){const it=de.depthTexture,ae=it&&it.isDepthTexture?it.type:null,z=A(de.stencilBuffer,ae),V=de.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;Ue(de)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ue(de),z,de.width,de.height):Ge?t.renderbufferStorageMultisample(t.RENDERBUFFER,ue(de),z,de.width,de.height):t.renderbufferStorage(t.RENDERBUFFER,z,de.width,de.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,V,t.RENDERBUFFER,ve)}else{const it=de.textures;for(let ae=0;ae<it.length;ae++){const z=it[ae],V=a.convert(z.format,z.colorSpace),x=a.convert(z.type),O=v(z.internalFormat,V,x,z.colorSpace);Ue(de)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ue(de),O,de.width,de.height):Ge?t.renderbufferStorageMultisample(t.RENDERBUFFER,ue(de),O,de.width,de.height):t.renderbufferStorage(t.RENDERBUFFER,O,de.width,de.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function le(ve,de,Ge){const it=de.isWebGLCubeRenderTarget===!0;if(r.bindFramebuffer(t.FRAMEBUFFER,ve),!(de.depthTexture&&de.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ae=n.get(de.depthTexture);if(ae.__renderTarget=de,(!ae.__webglTexture||de.depthTexture.image.width!==de.width||de.depthTexture.image.height!==de.height)&&(de.depthTexture.image.width=de.width,de.depthTexture.image.height=de.height,de.depthTexture.needsUpdate=!0),it){if(ae.__webglInit===void 0&&(ae.__webglInit=!0,de.depthTexture.addEventListener("dispose",S)),ae.__webglTexture===void 0){ae.__webglTexture=t.createTexture(),r.bindTexture(t.TEXTURE_CUBE_MAP,ae.__webglTexture),Ce(t.TEXTURE_CUBE_MAP,de.depthTexture);const D=a.convert(de.depthTexture.format),H=a.convert(de.depthTexture.type);let Y;de.depthTexture.format===Hu?Y=t.DEPTH_COMPONENT24:de.depthTexture.format===Xd&&(Y=t.DEPTH24_STENCIL8);for(let Q=0;Q<6;Q++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,Y,de.width,de.height,0,D,H,null)}}else B(de.depthTexture,0);const z=ae.__webglTexture,V=ue(de),x=it?t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge:t.TEXTURE_2D,O=de.depthTexture.format===Xd?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(de.depthTexture.format===Hu)Ue(de)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,O,x,z,0,V):t.framebufferTexture2D(t.FRAMEBUFFER,O,x,z,0);else if(de.depthTexture.format===Xd)Ue(de)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,O,x,z,0,V):t.framebufferTexture2D(t.FRAMEBUFFER,O,x,z,0);else throw new Error("Unknown depthTexture format")}function me(ve){const de=n.get(ve),Ge=ve.isWebGLCubeRenderTarget===!0;if(de.__boundDepthTexture!==ve.depthTexture){const it=ve.depthTexture;if(de.__depthDisposeCallback&&de.__depthDisposeCallback(),it){const ae=()=>{delete de.__boundDepthTexture,delete de.__depthDisposeCallback,it.removeEventListener("dispose",ae)};it.addEventListener("dispose",ae),de.__depthDisposeCallback=ae}de.__boundDepthTexture=it}if(ve.depthTexture&&!de.__autoAllocateDepthBuffer)if(Ge)for(let it=0;it<6;it++)le(de.__webglFramebuffer[it],ve,it);else{const it=ve.texture.mipmaps;it&&it.length>0?le(de.__webglFramebuffer[0],ve,0):le(de.__webglFramebuffer,ve,0)}else if(Ge){de.__webglDepthbuffer=[];for(let it=0;it<6;it++)if(r.bindFramebuffer(t.FRAMEBUFFER,de.__webglFramebuffer[it]),de.__webglDepthbuffer[it]===void 0)de.__webglDepthbuffer[it]=t.createRenderbuffer(),ft(de.__webglDepthbuffer[it],ve,!1);else{const ae=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,z=de.__webglDepthbuffer[it];t.bindRenderbuffer(t.RENDERBUFFER,z),t.framebufferRenderbuffer(t.FRAMEBUFFER,ae,t.RENDERBUFFER,z)}}else{const it=ve.texture.mipmaps;if(it&&it.length>0?r.bindFramebuffer(t.FRAMEBUFFER,de.__webglFramebuffer[0]):r.bindFramebuffer(t.FRAMEBUFFER,de.__webglFramebuffer),de.__webglDepthbuffer===void 0)de.__webglDepthbuffer=t.createRenderbuffer(),ft(de.__webglDepthbuffer,ve,!1);else{const ae=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,z=de.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,z),t.framebufferRenderbuffer(t.FRAMEBUFFER,ae,t.RENDERBUFFER,z)}}r.bindFramebuffer(t.FRAMEBUFFER,null)}function Z(ve,de,Ge){const it=n.get(ve);de!==void 0&&W(it.__webglFramebuffer,ve,ve.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Ge!==void 0&&me(ve)}function q(ve){const de=ve.texture,Ge=n.get(ve),it=n.get(de);ve.addEventListener("dispose",P);const ae=ve.textures,z=ve.isWebGLCubeRenderTarget===!0,V=ae.length>1;if(V||(it.__webglTexture===void 0&&(it.__webglTexture=t.createTexture()),it.__version=de.version,s.memory.textures++),z){Ge.__webglFramebuffer=[];for(let x=0;x<6;x++)if(de.mipmaps&&de.mipmaps.length>0){Ge.__webglFramebuffer[x]=[];for(let O=0;O<de.mipmaps.length;O++)Ge.__webglFramebuffer[x][O]=t.createFramebuffer()}else Ge.__webglFramebuffer[x]=t.createFramebuffer()}else{if(de.mipmaps&&de.mipmaps.length>0){Ge.__webglFramebuffer=[];for(let x=0;x<de.mipmaps.length;x++)Ge.__webglFramebuffer[x]=t.createFramebuffer()}else Ge.__webglFramebuffer=t.createFramebuffer();if(V)for(let x=0,O=ae.length;x<O;x++){const D=n.get(ae[x]);D.__webglTexture===void 0&&(D.__webglTexture=t.createTexture(),s.memory.textures++)}if(ve.samples>0&&Ue(ve)===!1){Ge.__webglMultisampledFramebuffer=t.createFramebuffer(),Ge.__webglColorRenderbuffer=[],r.bindFramebuffer(t.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer);for(let x=0;x<ae.length;x++){const O=ae[x];Ge.__webglColorRenderbuffer[x]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Ge.__webglColorRenderbuffer[x]);const D=a.convert(O.format,O.colorSpace),H=a.convert(O.type),Y=v(O.internalFormat,D,H,O.colorSpace,ve.isXRRenderTarget===!0),Q=ue(ve);t.renderbufferStorageMultisample(t.RENDERBUFFER,Q,Y,ve.width,ve.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+x,t.RENDERBUFFER,Ge.__webglColorRenderbuffer[x])}t.bindRenderbuffer(t.RENDERBUFFER,null),ve.depthBuffer&&(Ge.__webglDepthRenderbuffer=t.createRenderbuffer(),ft(Ge.__webglDepthRenderbuffer,ve,!0)),r.bindFramebuffer(t.FRAMEBUFFER,null)}}if(z){r.bindTexture(t.TEXTURE_CUBE_MAP,it.__webglTexture),Ce(t.TEXTURE_CUBE_MAP,de);for(let x=0;x<6;x++)if(de.mipmaps&&de.mipmaps.length>0)for(let O=0;O<de.mipmaps.length;O++)W(Ge.__webglFramebuffer[x][O],ve,de,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+x,O);else W(Ge.__webglFramebuffer[x],ve,de,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+x,0);g(de)&&m(t.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(V){for(let x=0,O=ae.length;x<O;x++){const D=ae[x],H=n.get(D);let Y=t.TEXTURE_2D;(ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(Y=ve.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),r.bindTexture(Y,H.__webglTexture),Ce(Y,D),W(Ge.__webglFramebuffer,ve,D,t.COLOR_ATTACHMENT0+x,Y,0),g(D)&&m(Y)}r.unbindTexture()}else{let x=t.TEXTURE_2D;if((ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(x=ve.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),r.bindTexture(x,it.__webglTexture),Ce(x,de),de.mipmaps&&de.mipmaps.length>0)for(let O=0;O<de.mipmaps.length;O++)W(Ge.__webglFramebuffer[O],ve,de,t.COLOR_ATTACHMENT0,x,O);else W(Ge.__webglFramebuffer,ve,de,t.COLOR_ATTACHMENT0,x,0);g(de)&&m(x),r.unbindTexture()}ve.depthBuffer&&me(ve)}function J(ve){const de=ve.textures;for(let Ge=0,it=de.length;Ge<it;Ge++){const ae=de[Ge];if(g(ae)){const z=y(ve),V=n.get(ae).__webglTexture;r.bindTexture(z,V),m(z),r.unbindTexture()}}}const re=[],_e=[];function he(ve){if(ve.samples>0){if(Ue(ve)===!1){const de=ve.textures,Ge=ve.width,it=ve.height;let ae=t.COLOR_BUFFER_BIT;const z=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,V=n.get(ve),x=de.length>1;if(x)for(let D=0;D<de.length;D++)r.bindFramebuffer(t.FRAMEBUFFER,V.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+D,t.RENDERBUFFER,null),r.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+D,t.TEXTURE_2D,null,0);r.bindFramebuffer(t.READ_FRAMEBUFFER,V.__webglMultisampledFramebuffer);const O=ve.texture.mipmaps;O&&O.length>0?r.bindFramebuffer(t.DRAW_FRAMEBUFFER,V.__webglFramebuffer[0]):r.bindFramebuffer(t.DRAW_FRAMEBUFFER,V.__webglFramebuffer);for(let D=0;D<de.length;D++){if(ve.resolveDepthBuffer&&(ve.depthBuffer&&(ae|=t.DEPTH_BUFFER_BIT),ve.stencilBuffer&&ve.resolveStencilBuffer&&(ae|=t.STENCIL_BUFFER_BIT)),x){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,V.__webglColorRenderbuffer[D]);const H=n.get(de[D]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,H,0)}t.blitFramebuffer(0,0,Ge,it,0,0,Ge,it,ae,t.NEAREST),c===!0&&(re.length=0,_e.length=0,re.push(t.COLOR_ATTACHMENT0+D),ve.depthBuffer&&ve.resolveDepthBuffer===!1&&(re.push(z),_e.push(z),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,_e)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,re))}if(r.bindFramebuffer(t.READ_FRAMEBUFFER,null),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),x)for(let D=0;D<de.length;D++){r.bindFramebuffer(t.FRAMEBUFFER,V.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+D,t.RENDERBUFFER,V.__webglColorRenderbuffer[D]);const H=n.get(de[D]).__webglTexture;r.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+D,t.TEXTURE_2D,H,0)}r.bindFramebuffer(t.DRAW_FRAMEBUFFER,V.__webglMultisampledFramebuffer)}else if(ve.depthBuffer&&ve.resolveDepthBuffer===!1&&c){const de=ve.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[de])}}}function ue(ve){return Math.min(i.maxSamples,ve.samples)}function Ue(ve){const de=n.get(ve);return ve.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&de.__useRenderToTexture!==!1}function De(ve){const de=s.render.frame;l.get(ve)!==de&&(l.set(ve,de),ve.update())}function Je(ve,de){const Ge=ve.colorSpace,it=ve.format,ae=ve.type;return ve.isCompressedTexture===!0||ve.isVideoTexture===!0||Ge!==Fp&&Ge!==rl&&(Tr.getTransfer(Ge)===Pr?(it!==Gs||ae!==Ra)&&er("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Ar("WebGLTextures: Unsupported texture color space:",Ge)),de}function ze(ve){return typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement?(u.width=ve.naturalWidth||ve.width,u.height=ve.naturalHeight||ve.height):typeof VideoFrame<"u"&&ve instanceof VideoFrame?(u.width=ve.displayWidth,u.height=ve.displayHeight):(u.width=ve.width,u.height=ve.height),u}this.allocateTextureUnit=M,this.resetTextureUnits=C,this.setTexture2D=B,this.setTexture2DArray=G,this.setTexture3D=K,this.setTextureCube=$,this.rebindTextures=Z,this.setupRenderTarget=q,this.updateRenderTargetMipmap=J,this.updateMultisampleRenderTarget=he,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=W,this.useMultisampledRTT=Ue,this.isReversedDepthBuffer=function(){return r.buffers.depth.getReversed()}}function rZe(t,e){function r(n,i=rl){let a;const s=Tr.getTransfer(i);if(n===Ra)return t.UNSIGNED_BYTE;if(n===wk)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Sk)return t.UNSIGNED_SHORT_5_5_5_1;if(n===Yxe)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===$xe)return t.UNSIGNED_INT_10F_11F_11F_REV;if(n===Xxe)return t.BYTE;if(n===Jxe)return t.SHORT;if(n===SI)return t.UNSIGNED_SHORT;if(n===Tk)return t.INT;if(n===qo)return t.UNSIGNED_INT;if(n===Oo)return t.FLOAT;if(n===Gu)return t.HALF_FLOAT;if(n===Zxe)return t.ALPHA;if(n===eEe)return t.RGB;if(n===Gs)return t.RGBA;if(n===Hu)return t.DEPTH_COMPONENT;if(n===Xd)return t.DEPTH_STENCIL;if(n===tEe)return t.RED;if(n===xk)return t.RED_INTEGER;if(n===Np)return t.RG;if(n===Ek)return t.RG_INTEGER;if(n===Ik)return t.RGBA_INTEGER;if(n===m3||n===g3||n===y3||n===b3)if(s===Pr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===m3)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===g3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===y3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===b3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===m3)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===g3)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===y3)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===b3)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===bV||n===vV||n===AV||n===TV)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===bV)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===vV)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===AV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===TV)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===wV||n===SV||n===xV||n===EV||n===IV||n===OV||n===RV)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===wV||n===SV)return s===Pr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===xV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(n===EV)return a.COMPRESSED_R11_EAC;if(n===IV)return a.COMPRESSED_SIGNED_R11_EAC;if(n===OV)return a.COMPRESSED_RG11_EAC;if(n===RV)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===PV||n===NV||n===FV||n===MV||n===DV||n===CV||n===LV||n===jV||n===BV||n===qV||n===UV||n===VV||n===GV||n===HV)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===PV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===NV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===FV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===MV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===DV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===CV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===LV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===jV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===BV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===qV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===UV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===VV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===GV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===HV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===kV||n===zV||n===QV)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===kV)return s===Pr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===zV)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===QV)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===WV||n===KV||n===XV||n===JV)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===WV)return a.COMPRESSED_RED_RGTC1_EXT;if(n===KV)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===XV)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===JV)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===xI?t.UNSIGNED_INT_24_8:t[n]!==void 0?t[n]:null}return{convert:r}}const nZe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,iZe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class aZe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r){if(this.texture===null){const n=new hEe(e.texture);(e.depthNear!==r.depthNear||e.depthFar!==r.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,n=new Vo({vertexShader:nZe,fragmentShader:iZe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Fa(new OF(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class sZe extends Ef{constructor(e,r){super();const n=this;let i=null,a=1,s=null,o="local-floor",c=1,u=null,l=null,d=null,f=null,h=null,p=null;const _=typeof XRWebGLBinding<"u",g=new aZe,m={},y=r.getContextAttributes();let v=null,A=null;const T=[],S=[],P=new tr;let j=null;const F=new os;F.viewport=new Tn;const N=new os;N.viewport=new Tn;const R=[F,N],C=new pKe;let M=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ye){let Me=T[ye];return Me===void 0&&(Me=new kC,T[ye]=Me),Me.getTargetRaySpace()},this.getControllerGrip=function(ye){let Me=T[ye];return Me===void 0&&(Me=new kC,T[ye]=Me),Me.getGripSpace()},this.getHand=function(ye){let Me=T[ye];return Me===void 0&&(Me=new kC,T[ye]=Me),Me.getHandSpace()};function B(ye){const Me=S.indexOf(ye.inputSource);if(Me===-1)return;const W=T[Me];W!==void 0&&(W.update(ye.inputSource,ye.frame,u||s),W.dispatchEvent({type:ye.type,data:ye.inputSource}))}function G(){i.removeEventListener("select",B),i.removeEventListener("selectstart",B),i.removeEventListener("selectend",B),i.removeEventListener("squeeze",B),i.removeEventListener("squeezestart",B),i.removeEventListener("squeezeend",B),i.removeEventListener("end",G),i.removeEventListener("inputsourceschange",K);for(let ye=0;ye<T.length;ye++){const Me=S[ye];Me!==null&&(S[ye]=null,T[ye].disconnect(Me))}M=null,U=null,g.reset();for(const ye in m)delete m[ye];e.setRenderTarget(v),h=null,f=null,d=null,i=null,A=null,Oe.stop(),n.isPresenting=!1,e.setPixelRatio(j),e.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ye){a=ye,n.isPresenting===!0&&er("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ye){o=ye,n.isPresenting===!0&&er("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(ye){u=ye},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d===null&&_&&(d=new XRWebGLBinding(i,r)),d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(ye){if(i=ye,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",B),i.addEventListener("selectstart",B),i.addEventListener("selectend",B),i.addEventListener("squeeze",B),i.addEventListener("squeezestart",B),i.addEventListener("squeezeend",B),i.addEventListener("end",G),i.addEventListener("inputsourceschange",K),y.xrCompatible!==!0&&await r.makeXRCompatible(),j=e.getPixelRatio(),e.getSize(P),_&&"createProjectionLayer"in XRWebGLBinding.prototype){let W=null,ft=null,le=null;y.depth&&(le=y.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,W=y.stencil?Xd:Hu,ft=y.stencil?xI:qo);const me={colorFormat:r.RGBA8,depthFormat:le,scaleFactor:a};d=this.getBinding(),f=d.createProjectionLayer(me),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),A=new Lo(f.textureWidth,f.textureHeight,{format:Gs,type:Ra,depthTexture:new II(f.textureWidth,f.textureHeight,ft,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const W={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(i,r,W),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),A=new Lo(h.framebufferWidth,h.framebufferHeight,{format:Gs,type:Ra,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(c),u=null,s=await i.requestReferenceSpace(o),Oe.setContext(i),Oe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function K(ye){for(let Me=0;Me<ye.removed.length;Me++){const W=ye.removed[Me],ft=S.indexOf(W);ft>=0&&(S[ft]=null,T[ft].disconnect(W))}for(let Me=0;Me<ye.added.length;Me++){const W=ye.added[Me];let ft=S.indexOf(W);if(ft===-1){for(let me=0;me<T.length;me++)if(me>=S.length){S.push(W),ft=me;break}else if(S[me]===null){S[me]=W,ft=me;break}if(ft===-1)break}const le=T[ft];le&&le.connect(W)}}const $=new Ze,se=new Ze;function pe(ye,Me,W){$.setFromMatrixPosition(Me.matrixWorld),se.setFromMatrixPosition(W.matrixWorld);const ft=$.distanceTo(se),le=Me.projectionMatrix.elements,me=W.projectionMatrix.elements,Z=le[14]/(le[10]-1),q=le[14]/(le[10]+1),J=(le[9]+1)/le[5],re=(le[9]-1)/le[5],_e=(le[8]-1)/le[0],he=(me[8]+1)/me[0],ue=Z*_e,Ue=Z*he,De=ft/(-_e+he),Je=De*-_e;if(Me.matrixWorld.decompose(ye.position,ye.quaternion,ye.scale),ye.translateX(Je),ye.translateZ(De),ye.matrixWorld.compose(ye.position,ye.quaternion,ye.scale),ye.matrixWorldInverse.copy(ye.matrixWorld).invert(),le[10]===-1)ye.projectionMatrix.copy(Me.projectionMatrix),ye.projectionMatrixInverse.copy(Me.projectionMatrixInverse);else{const ze=Z+De,ve=q+De,de=ue-Je,Ge=Ue+(ft-Je),it=J*q/ve*ze,ae=re*q/ve*ze;ye.projectionMatrix.makePerspective(de,Ge,it,ae,ze,ve),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert()}}function we(ye,Me){Me===null?ye.matrixWorld.copy(ye.matrix):ye.matrixWorld.multiplyMatrices(Me.matrixWorld,ye.matrix),ye.matrixWorldInverse.copy(ye.matrixWorld).invert()}this.updateCamera=function(ye){if(i===null)return;let Me=ye.near,W=ye.far;g.texture!==null&&(g.depthNear>0&&(Me=g.depthNear),g.depthFar>0&&(W=g.depthFar)),C.near=N.near=F.near=Me,C.far=N.far=F.far=W,(M!==C.near||U!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),M=C.near,U=C.far),C.layers.mask=ye.layers.mask|6,F.layers.mask=C.layers.mask&3,N.layers.mask=C.layers.mask&5;const ft=ye.parent,le=C.cameras;we(C,ft);for(let me=0;me<le.length;me++)we(le[me],ft);le.length===2?pe(C,F,N):C.projectionMatrix.copy(F.projectionMatrix),Ce(ye,C,ft)};function Ce(ye,Me,W){W===null?ye.matrix.copy(Me.matrixWorld):(ye.matrix.copy(W.matrixWorld),ye.matrix.invert(),ye.matrix.multiply(Me.matrixWorld)),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.updateMatrixWorld(!0),ye.projectionMatrix.copy(Me.projectionMatrix),ye.projectionMatrixInverse.copy(Me.projectionMatrixInverse),ye.isPerspectiveCamera&&(ye.fov=YV*2*Math.atan(1/ye.projectionMatrix.elements[5]),ye.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(f===null&&h===null))return c},this.setFoveation=function(ye){c=ye,f!==null&&(f.fixedFoveation=ye),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=ye)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(C)},this.getCameraTexture=function(ye){return m[ye]};let Le=null;function Ie(ye,Me){if(l=Me.getViewerPose(u||s),p=Me,l!==null){const W=l.views;h!==null&&(e.setRenderTargetFramebuffer(A,h.framebuffer),e.setRenderTarget(A));let ft=!1;W.length!==C.cameras.length&&(C.cameras.length=0,ft=!0);for(let q=0;q<W.length;q++){const J=W[q];let re=null;if(h!==null)re=h.getViewport(J);else{const he=d.getViewSubImage(f,J);re=he.viewport,q===0&&(e.setRenderTargetTextures(A,he.colorTexture,he.depthStencilTexture),e.setRenderTarget(A))}let _e=R[q];_e===void 0&&(_e=new os,_e.layers.enable(q),_e.viewport=new Tn,R[q]=_e),_e.matrix.fromArray(J.transform.matrix),_e.matrix.decompose(_e.position,_e.quaternion,_e.scale),_e.projectionMatrix.fromArray(J.projectionMatrix),_e.projectionMatrixInverse.copy(_e.projectionMatrix).invert(),_e.viewport.set(re.x,re.y,re.width,re.height),q===0&&(C.matrix.copy(_e.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ft===!0&&C.cameras.push(_e)}const le=i.enabledFeatures;if(le&&le.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&_){d=n.getBinding();const q=d.getDepthInformation(W[0]);q&&q.isValid&&q.texture&&g.init(q,i.renderState)}if(le&&le.includes("camera-access")&&_){e.state.unbindTexture(),d=n.getBinding();for(let q=0;q<W.length;q++){const J=W[q].camera;if(J){let re=m[J];re||(re=new hEe,m[J]=re);const _e=d.getCameraImage(J);re.sourceTexture=_e}}}}for(let W=0;W<T.length;W++){const ft=S[W],le=T[W];ft!==null&&le!==void 0&&le.update(ft,Me,u||s)}Le&&Le(ye,Me),Me.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Me}),p=null}const Oe=new _Ee;Oe.setAnimationLoop(Ie),this.setAnimationLoop=function(ye){Le=ye},this.dispose=function(){}}}const nd=new Uo,oZe=new kr;function uZe(t,e){function r(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function n(g,m){m.color.getRGB(g.fogColor.value,uEe(t)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function i(g,m,y,v,A){m.isMeshBasicMaterial||m.isMeshLambertMaterial?a(g,m):m.isMeshToonMaterial?(a(g,m),d(g,m)):m.isMeshPhongMaterial?(a(g,m),l(g,m)):m.isMeshStandardMaterial?(a(g,m),f(g,m),m.isMeshPhysicalMaterial&&h(g,m,A)):m.isMeshMatcapMaterial?(a(g,m),p(g,m)):m.isMeshDepthMaterial?a(g,m):m.isMeshDistanceMaterial?(a(g,m),_(g,m)):m.isMeshNormalMaterial?a(g,m):m.isLineBasicMaterial?(s(g,m),m.isLineDashedMaterial&&o(g,m)):m.isPointsMaterial?c(g,m,y,v):m.isSpriteMaterial?u(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function a(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,r(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,r(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,r(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===pa&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,r(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===pa&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,r(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,r(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,r(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const y=e.get(m),v=y.envMap,A=y.envMapRotation;v&&(g.envMap.value=v,nd.copy(A),nd.x*=-1,nd.y*=-1,nd.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(nd.y*=-1,nd.z*=-1),g.envMapRotation.value.setFromMatrix4(oZe.makeRotationFromEuler(nd)),g.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,r(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,r(m.aoMap,g.aoMapTransform))}function s(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,r(m.map,g.mapTransform))}function o(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function c(g,m,y,v){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*y,g.scale.value=v*.5,m.map&&(g.map.value=m.map,r(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,r(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,r(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,r(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function l(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function d(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function f(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,r(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,r(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function h(g,m,y){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,r(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,r(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,r(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,r(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,r(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===pa&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,r(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,r(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=y.texture,g.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,r(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,r(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,r(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,r(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,r(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function _(g,m){const y=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(y.matrixWorld),g.nearDistance.value=y.shadow.camera.near,g.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function cZe(t,e,r,n){let i={},a={},s=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(y,v){const A=v.program;n.uniformBlockBinding(y,A)}function u(y,v){let A=i[y.id];A===void 0&&(p(y),A=l(y),i[y.id]=A,y.addEventListener("dispose",g));const T=v.program;n.updateUBOMapping(y,T);const S=e.render.frame;a[y.id]!==S&&(f(y),a[y.id]=S)}function l(y){const v=d();y.__bindingPointIndex=v;const A=t.createBuffer(),T=y.__size,S=y.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,T,S),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,v,A),A}function d(){for(let y=0;y<o;y++)if(s.indexOf(y)===-1)return s.push(y),y;return Ar("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const v=i[y.id],A=y.uniforms,T=y.__cache;t.bindBuffer(t.UNIFORM_BUFFER,v);for(let S=0,P=A.length;S<P;S++){const j=Array.isArray(A[S])?A[S]:[A[S]];for(let F=0,N=j.length;F<N;F++){const R=j[F];if(h(R,S,F,T)===!0){const C=R.__offset,M=Array.isArray(R.value)?R.value:[R.value];let U=0;for(let B=0;B<M.length;B++){const G=M[B],K=_(G);typeof G=="number"||typeof G=="boolean"?(R.__data[0]=G,t.bufferSubData(t.UNIFORM_BUFFER,C+U,R.__data)):G.isMatrix3?(R.__data[0]=G.elements[0],R.__data[1]=G.elements[1],R.__data[2]=G.elements[2],R.__data[3]=0,R.__data[4]=G.elements[3],R.__data[5]=G.elements[4],R.__data[6]=G.elements[5],R.__data[7]=0,R.__data[8]=G.elements[6],R.__data[9]=G.elements[7],R.__data[10]=G.elements[8],R.__data[11]=0):(G.toArray(R.__data,U),U+=K.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,C,R.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function h(y,v,A,T){const S=y.value,P=v+"_"+A;if(T[P]===void 0)return typeof S=="number"||typeof S=="boolean"?T[P]=S:T[P]=S.clone(),!0;{const j=T[P];if(typeof S=="number"||typeof S=="boolean"){if(j!==S)return T[P]=S,!0}else if(j.equals(S)===!1)return j.copy(S),!0}return!1}function p(y){const v=y.uniforms;let A=0;const T=16;for(let P=0,j=v.length;P<j;P++){const F=Array.isArray(v[P])?v[P]:[v[P]];for(let N=0,R=F.length;N<R;N++){const C=F[N],M=Array.isArray(C.value)?C.value:[C.value];for(let U=0,B=M.length;U<B;U++){const G=M[U],K=_(G),$=A%T,se=$%K.boundary,pe=$+se;A+=se,pe!==0&&T-pe<K.storage&&(A+=T-pe),C.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=A,A+=K.storage}}}const S=A%T;return S>0&&(A+=T-S),y.__size=A,y.__cache={},this}function _(y){const v={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(v.boundary=4,v.storage=4):y.isVector2?(v.boundary=8,v.storage=8):y.isVector3||y.isColor?(v.boundary=16,v.storage=12):y.isVector4?(v.boundary=16,v.storage=16):y.isMatrix3?(v.boundary=48,v.storage=48):y.isMatrix4?(v.boundary=64,v.storage=64):y.isTexture?er("WebGLRenderer: Texture samplers can not be part of an uniforms group."):er("WebGLRenderer: Unsupported uniform value type.",y),v}function g(y){const v=y.target;v.removeEventListener("dispose",g);const A=s.indexOf(v.__bindingPointIndex);s.splice(A,1),t.deleteBuffer(i[v.id]),delete i[v.id],delete a[v.id]}function m(){for(const y in i)t.deleteBuffer(i[y]);s=[],i={},a={}}return{bind:c,update:u,dispose:m}}const lZe=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let co=null;function dZe(){return co===null&&(co=new eKe(lZe,16,16,Np,Gu),co.name="DFG_LUT",co.minFilter=xi,co.magFilter=xi,co.wrapS=Ru,co.wrapT=Ru,co.generateMipmaps=!1,co.needsUpdate=!0),co}class fZe{constructor(e={}){const{canvas:r=EWe(),context:n=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:l="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:f=!1,outputBufferType:h=Ra}=e;this.isWebGLRenderer=!0;let p;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=s;const _=h,g=new Set([Ik,Ek,xk]),m=new Set([Ra,qo,SI,xI,wk,Sk]),y=new Uint32Array(4),v=new Int32Array(4);let A=null,T=null;const S=[],P=[];let j=null;this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Co,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const F=this;let N=!1;this._outputColorSpace=is;let R=0,C=0,M=null,U=-1,B=null;const G=new Tn,K=new Tn;let $=null;const se=new br(0);let pe=0,we=r.width,Ce=r.height,Le=1,Ie=null,Oe=null;const ye=new Tn(0,0,we,Ce),Me=new Tn(0,0,we,Ce);let W=!1;const ft=new Mk;let le=!1,me=!1;const Z=new kr,q=new Ze,J=new Tn,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let _e=!1;function he(){return M===null?Le:1}let ue=n;function Ue(Ae,Ke){return r.getContext(Ae,Ke)}try{const Ae={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:d};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${vk}`),r.addEventListener("webglcontextlost",Ee,!1),r.addEventListener("webglcontextrestored",ce,!1),r.addEventListener("webglcontextcreationerror",ne,!1),ue===null){const Ke="webgl2";if(ue=Ue(Ke,Ae),ue===null)throw Ue(Ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ae){throw Ar("WebGLRenderer: "+Ae.message),Ae}let De,Je,ze,ve,de,Ge,it,ae,z,V,x,O,D,H,Y,Q,ee,ie,Re,oe,Te,We,Qe,Xe;function Pe(){De=new dYe(ue),De.init(),We=new rZe(ue,De),Je=new rYe(ue,De,e,We),ze=new eZe(ue,De),Je.reversedDepthBuffer&&f&&ze.buffers.depth.setReversed(!0),ve=new pYe(ue),de=new q$e,Ge=new tZe(ue,De,ze,de,Je,We,ve),it=new iYe(F),ae=new lYe(F),z=new yKe(ue),Qe=new eYe(ue,z),V=new fYe(ue,z,ve,Qe),x=new mYe(ue,V,z,ve),Re=new _Ye(ue,Je,Ge),Q=new nYe(de),O=new B$e(F,it,ae,De,Je,Qe,Q),D=new uZe(F,de),H=new V$e,Y=new W$e(De),ie=new ZJe(F,it,ae,ze,x,p,c),ee=new $$e(F,x,Je),Xe=new cZe(ue,ve,Je,ze),oe=new tYe(ue,De,ve),Te=new hYe(ue,De,ve),ve.programs=O.programs,F.capabilities=Je,F.extensions=De,F.properties=de,F.renderLists=H,F.shadowMap=ee,F.state=ze,F.info=ve}Pe(),_!==Ra&&(j=new yYe(_,r.width,r.height,i,a));const He=new sZe(F,ue);this.xr=He,this.getContext=function(){return ue},this.getContextAttributes=function(){return ue.getContextAttributes()},this.forceContextLoss=function(){const Ae=De.get("WEBGL_lose_context");Ae&&Ae.loseContext()},this.forceContextRestore=function(){const Ae=De.get("WEBGL_lose_context");Ae&&Ae.restoreContext()},this.getPixelRatio=function(){return Le},this.setPixelRatio=function(Ae){Ae!==void 0&&(Le=Ae,this.setSize(we,Ce,!1))},this.getSize=function(Ae){return Ae.set(we,Ce)},this.setSize=function(Ae,Ke,st=!0){if(He.isPresenting){er("WebGLRenderer: Can't change size while VR device is presenting.");return}we=Ae,Ce=Ke,r.width=Math.floor(Ae*Le),r.height=Math.floor(Ke*Le),st===!0&&(r.style.width=Ae+"px",r.style.height=Ke+"px"),j!==null&&j.setSize(r.width,r.height),this.setViewport(0,0,Ae,Ke)},this.getDrawingBufferSize=function(Ae){return Ae.set(we*Le,Ce*Le).floor()},this.setDrawingBufferSize=function(Ae,Ke,st){we=Ae,Ce=Ke,Le=st,r.width=Math.floor(Ae*st),r.height=Math.floor(Ke*st),this.setViewport(0,0,Ae,Ke)},this.setEffects=function(Ae){if(_===Ra){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(Ae){for(let Ke=0;Ke<Ae.length;Ke++)if(Ae[Ke].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}j.setEffects(Ae||[])},this.getCurrentViewport=function(Ae){return Ae.copy(G)},this.getViewport=function(Ae){return Ae.copy(ye)},this.setViewport=function(Ae,Ke,st,at){Ae.isVector4?ye.set(Ae.x,Ae.y,Ae.z,Ae.w):ye.set(Ae,Ke,st,at),ze.viewport(G.copy(ye).multiplyScalar(Le).round())},this.getScissor=function(Ae){return Ae.copy(Me)},this.setScissor=function(Ae,Ke,st,at){Ae.isVector4?Me.set(Ae.x,Ae.y,Ae.z,Ae.w):Me.set(Ae,Ke,st,at),ze.scissor(K.copy(Me).multiplyScalar(Le).round())},this.getScissorTest=function(){return W},this.setScissorTest=function(Ae){ze.setScissorTest(W=Ae)},this.setOpaqueSort=function(Ae){Ie=Ae},this.setTransparentSort=function(Ae){Oe=Ae},this.getClearColor=function(Ae){return Ae.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor(...arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha(...arguments)},this.clear=function(Ae=!0,Ke=!0,st=!0){let at=0;if(Ae){let nt=!1;if(M!==null){const At=M.texture.format;nt=g.has(At)}if(nt){const At=M.texture.type,Rt=m.has(At),Tt=ie.getClearColor(),Nt=ie.getClearAlpha(),Bt=Tt.r,kt=Tt.g,Vt=Tt.b;Rt?(y[0]=Bt,y[1]=kt,y[2]=Vt,y[3]=Nt,ue.clearBufferuiv(ue.COLOR,0,y)):(v[0]=Bt,v[1]=kt,v[2]=Vt,v[3]=Nt,ue.clearBufferiv(ue.COLOR,0,v))}else at|=ue.COLOR_BUFFER_BIT}Ke&&(at|=ue.DEPTH_BUFFER_BIT),st&&(at|=ue.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ue.clear(at)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Ee,!1),r.removeEventListener("webglcontextrestored",ce,!1),r.removeEventListener("webglcontextcreationerror",ne,!1),ie.dispose(),H.dispose(),Y.dispose(),de.dispose(),it.dispose(),ae.dispose(),x.dispose(),Qe.dispose(),Xe.dispose(),O.dispose(),He.dispose(),He.removeEventListener("sessionstart",ut),He.removeEventListener("sessionend",Pt),Ot.stop()};function Ee(Ae){Ae.preventDefault(),ZY("WebGLRenderer: Context Lost."),N=!0}function ce(){ZY("WebGLRenderer: Context Restored."),N=!1;const Ae=ve.autoReset,Ke=ee.enabled,st=ee.autoUpdate,at=ee.needsUpdate,nt=ee.type;Pe(),ve.autoReset=Ae,ee.enabled=Ke,ee.autoUpdate=st,ee.needsUpdate=at,ee.type=nt}function ne(Ae){Ar("WebGLRenderer: A WebGL context could not be created. Reason: ",Ae.statusMessage)}function xe(Ae){const Ke=Ae.target;Ke.removeEventListener("dispose",xe),Be(Ke)}function Be(Ae){ht(Ae),de.remove(Ae)}function ht(Ae){const Ke=de.get(Ae).programs;Ke!==void 0&&(Ke.forEach(function(st){O.releaseProgram(st)}),Ae.isShaderMaterial&&O.releaseShaderCache(Ae))}this.renderBufferDirect=function(Ae,Ke,st,at,nt,At){Ke===null&&(Ke=re);const Rt=nt.isMesh&&nt.matrixWorld.determinant()<0,Tt=St(Ae,Ke,st,at,nt);ze.setMaterial(at,Rt);let Nt=st.index,Bt=1;if(at.wireframe===!0){if(Nt=V.getWireframeAttribute(st),Nt===void 0)return;Bt=2}const kt=st.drawRange,Vt=st.attributes.position;let lr=kt.start*Bt,xr=(kt.start+kt.count)*Bt;At!==null&&(lr=Math.max(lr,At.start*Bt),xr=Math.min(xr,(At.start+At.count)*Bt)),Nt!==null?(lr=Math.max(lr,0),xr=Math.min(xr,Nt.count)):Vt!=null&&(lr=Math.max(lr,0),xr=Math.min(xr,Vt.count));const Qr=xr-lr;if(Qr<0||Qr===1/0)return;Qe.setup(nt,at,Tt,st,Nt);let on,Er=oe;if(Nt!==null&&(on=z.get(Nt),Er=Te,Er.setIndex(on)),nt.isMesh)at.wireframe===!0?(ze.setLineWidth(at.wireframeLinewidth*he()),Er.setMode(ue.LINES)):Er.setMode(ue.TRIANGLES);else if(nt.isLine){let zt=at.linewidth;zt===void 0&&(zt=1),ze.setLineWidth(zt*he()),nt.isLineSegments?Er.setMode(ue.LINES):nt.isLineLoop?Er.setMode(ue.LINE_LOOP):Er.setMode(ue.LINE_STRIP)}else nt.isPoints?Er.setMode(ue.POINTS):nt.isSprite&&Er.setMode(ue.TRIANGLES);if(nt.isBatchedMesh)if(nt._multiDrawInstances!==null)EI("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Er.renderMultiDrawInstances(nt._multiDrawStarts,nt._multiDrawCounts,nt._multiDrawCount,nt._multiDrawInstances);else if(De.get("WEBGL_multi_draw"))Er.renderMultiDraw(nt._multiDrawStarts,nt._multiDrawCounts,nt._multiDrawCount);else{const zt=nt._multiDrawStarts,Sr=nt._multiDrawCounts,yr=nt._multiDrawCount,Ci=Nt?z.get(Nt).bytesPerElement:1,$u=de.get(at).currentProgram.getUniforms();for(let ti=0;ti<yr;ti++)$u.setValue(ue,"_gl_DrawID",ti),Er.render(zt[ti]/Ci,Sr[ti])}else if(nt.isInstancedMesh)Er.renderInstances(lr,Qr,nt.count);else if(st.isInstancedBufferGeometry){const zt=st._maxInstanceCount!==void 0?st._maxInstanceCount:1/0,Sr=Math.min(st.instanceCount,zt);Er.renderInstances(lr,Qr,Sr)}else Er.render(lr,Qr)};function Et(Ae,Ke,st){Ae.transparent===!0&&Ae.side===Su&&Ae.forceSinglePass===!1?(Ae.side=pa,Ae.needsUpdate=!0,Fe(Ae,Ke,st),Ae.side=wl,Ae.needsUpdate=!0,Fe(Ae,Ke,st),Ae.side=Su):Fe(Ae,Ke,st)}this.compile=function(Ae,Ke,st=null){st===null&&(st=Ae),T=Y.get(st),T.init(Ke),P.push(T),st.traverseVisible(function(nt){nt.isLight&&nt.layers.test(Ke.layers)&&(T.pushLight(nt),nt.castShadow&&T.pushShadow(nt))}),Ae!==st&&Ae.traverseVisible(function(nt){nt.isLight&&nt.layers.test(Ke.layers)&&(T.pushLight(nt),nt.castShadow&&T.pushShadow(nt))}),T.setupLights();const at=new Set;return Ae.traverse(function(nt){if(!(nt.isMesh||nt.isPoints||nt.isLine||nt.isSprite))return;const At=nt.material;if(At)if(Array.isArray(At))for(let Rt=0;Rt<At.length;Rt++){const Tt=At[Rt];Et(Tt,st,nt),at.add(Tt)}else Et(At,st,nt),at.add(At)}),T=P.pop(),at},this.compileAsync=function(Ae,Ke,st=null){const at=this.compile(Ae,Ke,st);return new Promise(nt=>{function At(){if(at.forEach(function(Rt){de.get(Rt).currentProgram.isReady()&&at.delete(Rt)}),at.size===0){nt(Ae);return}setTimeout(At,10)}De.get("KHR_parallel_shader_compile")!==null?At():setTimeout(At,10)})};let rt=null;function _t(Ae){rt&&rt(Ae)}function ut(){Ot.stop()}function Pt(){Ot.start()}const Ot=new _Ee;Ot.setAnimationLoop(_t),typeof self<"u"&&Ot.setContext(self),this.setAnimationLoop=function(Ae){rt=Ae,He.setAnimationLoop(Ae),Ae===null?Ot.stop():Ot.start()},He.addEventListener("sessionstart",ut),He.addEventListener("sessionend",Pt),this.render=function(Ae,Ke){if(Ke!==void 0&&Ke.isCamera!==!0){Ar("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;const st=He.enabled===!0&&He.isPresenting===!0,at=j!==null&&(M===null||st)&&j.begin(F,M);if(Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),Ke.parent===null&&Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(j===null||j.isCompositing()===!1)&&(He.cameraAutoUpdate===!0&&He.updateCamera(Ke),Ke=He.getCamera()),Ae.isScene===!0&&Ae.onBeforeRender(F,Ae,Ke,M),T=Y.get(Ae,P.length),T.init(Ke),P.push(T),Z.multiplyMatrices(Ke.projectionMatrix,Ke.matrixWorldInverse),ft.setFromProjectionMatrix(Z,Ro,Ke.reversedDepth),me=this.localClippingEnabled,le=Q.init(this.clippingPlanes,me),A=H.get(Ae,S.length),A.init(),S.push(A),He.enabled===!0&&He.isPresenting===!0){const Rt=F.xr.getDepthSensingMesh();Rt!==null&&or(Rt,Ke,-1/0,F.sortObjects)}or(Ae,Ke,0,F.sortObjects),A.finish(),F.sortObjects===!0&&A.sort(Ie,Oe),_e=He.enabled===!1||He.isPresenting===!1||He.hasDepthSensing()===!1,_e&&ie.addToRenderList(A,Ae),this.info.render.frame++,le===!0&&Q.beginShadows();const nt=T.state.shadowsArray;if(ee.render(nt,Ae,Ke),le===!0&&Q.endShadows(),this.info.autoReset===!0&&this.info.reset(),(at&&j.hasRenderPass())===!1){const Rt=A.opaque,Tt=A.transmissive;if(T.setupLights(),Ke.isArrayCamera){const Nt=Ke.cameras;if(Tt.length>0)for(let Bt=0,kt=Nt.length;Bt<kt;Bt++){const Vt=Nt[Bt];mt(Rt,Tt,Ae,Vt)}_e&&ie.render(Ae);for(let Bt=0,kt=Nt.length;Bt<kt;Bt++){const Vt=Nt[Bt];Qt(A,Ae,Vt,Vt.viewport)}}else Tt.length>0&&mt(Rt,Tt,Ae,Ke),_e&&ie.render(Ae),Qt(A,Ae,Ke)}M!==null&&C===0&&(Ge.updateMultisampleRenderTarget(M),Ge.updateRenderTargetMipmap(M)),at&&j.end(F),Ae.isScene===!0&&Ae.onAfterRender(F,Ae,Ke),Qe.resetDefaultState(),U=-1,B=null,P.pop(),P.length>0?(T=P[P.length-1],le===!0&&Q.setGlobalState(F.clippingPlanes,T.state.camera)):T=null,S.pop(),S.length>0?A=S[S.length-1]:A=null};function or(Ae,Ke,st,at){if(Ae.visible===!1)return;if(Ae.layers.test(Ke.layers)){if(Ae.isGroup)st=Ae.renderOrder;else if(Ae.isLOD)Ae.autoUpdate===!0&&Ae.update(Ke);else if(Ae.isLight)T.pushLight(Ae),Ae.castShadow&&T.pushShadow(Ae);else if(Ae.isSprite){if(!Ae.frustumCulled||ft.intersectsSprite(Ae)){at&&J.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(Z);const Rt=x.update(Ae),Tt=Ae.material;Tt.visible&&A.push(Ae,Rt,Tt,st,J.z,null)}}else if((Ae.isMesh||Ae.isLine||Ae.isPoints)&&(!Ae.frustumCulled||ft.intersectsObject(Ae))){const Rt=x.update(Ae),Tt=Ae.material;if(at&&(Ae.boundingSphere!==void 0?(Ae.boundingSphere===null&&Ae.computeBoundingSphere(),J.copy(Ae.boundingSphere.center)):(Rt.boundingSphere===null&&Rt.computeBoundingSphere(),J.copy(Rt.boundingSphere.center)),J.applyMatrix4(Ae.matrixWorld).applyMatrix4(Z)),Array.isArray(Tt)){const Nt=Rt.groups;for(let Bt=0,kt=Nt.length;Bt<kt;Bt++){const Vt=Nt[Bt],lr=Tt[Vt.materialIndex];lr&&lr.visible&&A.push(Ae,Rt,lr,st,J.z,Vt)}}else Tt.visible&&A.push(Ae,Rt,Tt,st,J.z,null)}}const At=Ae.children;for(let Rt=0,Tt=At.length;Rt<Tt;Rt++)or(At[Rt],Ke,st,at)}function Qt(Ae,Ke,st,at){const{opaque:nt,transmissive:At,transparent:Rt}=Ae;T.setupLightsView(st),le===!0&&Q.setGlobalState(F.clippingPlanes,st),at&&ze.viewport(G.copy(at)),nt.length>0&&wn(nt,Ke,st),At.length>0&&wn(At,Ke,st),Rt.length>0&&wn(Rt,Ke,st),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function mt(Ae,Ke,st,at){if((st.isScene===!0?st.overrideMaterial:null)!==null)return;if(T.state.transmissionRenderTarget[at.id]===void 0){const lr=De.has("EXT_color_buffer_half_float")||De.has("EXT_color_buffer_float");T.state.transmissionRenderTarget[at.id]=new Lo(1,1,{generateMipmaps:!0,type:lr?Gu:Ra,minFilter:Kd,samples:Je.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Tr.workingColorSpace})}const At=T.state.transmissionRenderTarget[at.id],Rt=at.viewport||G;At.setSize(Rt.z*F.transmissionResolutionScale,Rt.w*F.transmissionResolutionScale);const Tt=F.getRenderTarget(),Nt=F.getActiveCubeFace(),Bt=F.getActiveMipmapLevel();F.setRenderTarget(At),F.getClearColor(se),pe=F.getClearAlpha(),pe<1&&F.setClearColor(16777215,.5),F.clear(),_e&&ie.render(st);const kt=F.toneMapping;F.toneMapping=Co;const Vt=at.viewport;if(at.viewport!==void 0&&(at.viewport=void 0),T.setupLightsView(at),le===!0&&Q.setGlobalState(F.clippingPlanes,at),wn(Ae,st,at),Ge.updateMultisampleRenderTarget(At),Ge.updateRenderTargetMipmap(At),De.has("WEBGL_multisampled_render_to_texture")===!1){let lr=!1;for(let xr=0,Qr=Ke.length;xr<Qr;xr++){const on=Ke[xr],{object:Er,geometry:zt,material:Sr,group:yr}=on;if(Sr.side===Su&&Er.layers.test(at.layers)){const Ci=Sr.side;Sr.side=pa,Sr.needsUpdate=!0,gt(Er,st,at,zt,Sr,yr),Sr.side=Ci,Sr.needsUpdate=!0,lr=!0}}lr===!0&&(Ge.updateMultisampleRenderTarget(At),Ge.updateRenderTargetMipmap(At))}F.setRenderTarget(Tt,Nt,Bt),F.setClearColor(se,pe),Vt!==void 0&&(at.viewport=Vt),F.toneMapping=kt}function wn(Ae,Ke,st){const at=Ke.isScene===!0?Ke.overrideMaterial:null;for(let nt=0,At=Ae.length;nt<At;nt++){const Rt=Ae[nt],{object:Tt,geometry:Nt,group:Bt}=Rt;let kt=Rt.material;kt.allowOverride===!0&&at!==null&&(kt=at),Tt.layers.test(st.layers)&&gt(Tt,Ke,st,Nt,kt,Bt)}}function gt(Ae,Ke,st,at,nt,At){Ae.onBeforeRender(F,Ke,st,at,nt,At),Ae.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,Ae.matrixWorld),Ae.normalMatrix.getNormalMatrix(Ae.modelViewMatrix),nt.onBeforeRender(F,Ke,st,at,Ae,At),nt.transparent===!0&&nt.side===Su&&nt.forceSinglePass===!1?(nt.side=pa,nt.needsUpdate=!0,F.renderBufferDirect(st,Ke,at,nt,Ae,At),nt.side=wl,nt.needsUpdate=!0,F.renderBufferDirect(st,Ke,at,nt,Ae,At),nt.side=Su):F.renderBufferDirect(st,Ke,at,nt,Ae,At),Ae.onAfterRender(F,Ke,st,at,nt,At)}function Fe(Ae,Ke,st){Ke.isScene!==!0&&(Ke=re);const at=de.get(Ae),nt=T.state.lights,At=T.state.shadowsArray,Rt=nt.state.version,Tt=O.getParameters(Ae,nt.state,At,Ke,st),Nt=O.getProgramCacheKey(Tt);let Bt=at.programs;at.environment=Ae.isMeshStandardMaterial?Ke.environment:null,at.fog=Ke.fog,at.envMap=(Ae.isMeshStandardMaterial?ae:it).get(Ae.envMap||at.environment),at.envMapRotation=at.environment!==null&&Ae.envMap===null?Ke.environmentRotation:Ae.envMapRotation,Bt===void 0&&(Ae.addEventListener("dispose",xe),Bt=new Map,at.programs=Bt);let kt=Bt.get(Nt);if(kt!==void 0){if(at.currentProgram===kt&&at.lightsStateVersion===Rt)return tt(Ae,Tt),kt}else Tt.uniforms=O.getUniforms(Ae),Ae.onBeforeCompile(Tt,F),kt=O.acquireProgram(Tt,Nt),Bt.set(Nt,kt),at.uniforms=Tt.uniforms;const Vt=at.uniforms;return(!Ae.isShaderMaterial&&!Ae.isRawShaderMaterial||Ae.clipping===!0)&&(Vt.clippingPlanes=Q.uniform),tt(Ae,Tt),at.needsLights=ar(Ae),at.lightsStateVersion=Rt,at.needsLights&&(Vt.ambientLightColor.value=nt.state.ambient,Vt.lightProbe.value=nt.state.probe,Vt.directionalLights.value=nt.state.directional,Vt.directionalLightShadows.value=nt.state.directionalShadow,Vt.spotLights.value=nt.state.spot,Vt.spotLightShadows.value=nt.state.spotShadow,Vt.rectAreaLights.value=nt.state.rectArea,Vt.ltc_1.value=nt.state.rectAreaLTC1,Vt.ltc_2.value=nt.state.rectAreaLTC2,Vt.pointLights.value=nt.state.point,Vt.pointLightShadows.value=nt.state.pointShadow,Vt.hemisphereLights.value=nt.state.hemi,Vt.directionalShadowMap.value=nt.state.directionalShadowMap,Vt.directionalShadowMatrix.value=nt.state.directionalShadowMatrix,Vt.spotShadowMap.value=nt.state.spotShadowMap,Vt.spotLightMatrix.value=nt.state.spotLightMatrix,Vt.spotLightMap.value=nt.state.spotLightMap,Vt.pointShadowMap.value=nt.state.pointShadowMap,Vt.pointShadowMatrix.value=nt.state.pointShadowMatrix),at.currentProgram=kt,at.uniformsList=null,kt}function $e(Ae){if(Ae.uniformsList===null){const Ke=Ae.currentProgram.getUniforms();Ae.uniformsList=A3.seqWithValue(Ke.seq,Ae.uniforms)}return Ae.uniformsList}function tt(Ae,Ke){const st=de.get(Ae);st.outputColorSpace=Ke.outputColorSpace,st.batching=Ke.batching,st.batchingColor=Ke.batchingColor,st.instancing=Ke.instancing,st.instancingColor=Ke.instancingColor,st.instancingMorph=Ke.instancingMorph,st.skinning=Ke.skinning,st.morphTargets=Ke.morphTargets,st.morphNormals=Ke.morphNormals,st.morphColors=Ke.morphColors,st.morphTargetsCount=Ke.morphTargetsCount,st.numClippingPlanes=Ke.numClippingPlanes,st.numIntersection=Ke.numClipIntersection,st.vertexAlphas=Ke.vertexAlphas,st.vertexTangents=Ke.vertexTangents,st.toneMapping=Ke.toneMapping}function St(Ae,Ke,st,at,nt){Ke.isScene!==!0&&(Ke=re),Ge.resetTextureUnits();const At=Ke.fog,Rt=at.isMeshStandardMaterial?Ke.environment:null,Tt=M===null?F.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Fp,Nt=(at.isMeshStandardMaterial?ae:it).get(at.envMap||Rt),Bt=at.vertexColors===!0&&!!st.attributes.color&&st.attributes.color.itemSize===4,kt=!!st.attributes.tangent&&(!!at.normalMap||at.anisotropy>0),Vt=!!st.morphAttributes.position,lr=!!st.morphAttributes.normal,xr=!!st.morphAttributes.color;let Qr=Co;at.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Qr=F.toneMapping);const on=st.morphAttributes.position||st.morphAttributes.normal||st.morphAttributes.color,Er=on!==void 0?on.length:0,zt=de.get(at),Sr=T.state.lights;if(le===!0&&(me===!0||Ae!==B)){const ri=Ae===B&&at.id===U;Q.setState(at,Ae,ri)}let yr=!1;at.version===zt.__version?(zt.needsLights&&zt.lightsStateVersion!==Sr.state.version||zt.outputColorSpace!==Tt||nt.isBatchedMesh&&zt.batching===!1||!nt.isBatchedMesh&&zt.batching===!0||nt.isBatchedMesh&&zt.batchingColor===!0&&nt.colorTexture===null||nt.isBatchedMesh&&zt.batchingColor===!1&&nt.colorTexture!==null||nt.isInstancedMesh&&zt.instancing===!1||!nt.isInstancedMesh&&zt.instancing===!0||nt.isSkinnedMesh&&zt.skinning===!1||!nt.isSkinnedMesh&&zt.skinning===!0||nt.isInstancedMesh&&zt.instancingColor===!0&&nt.instanceColor===null||nt.isInstancedMesh&&zt.instancingColor===!1&&nt.instanceColor!==null||nt.isInstancedMesh&&zt.instancingMorph===!0&&nt.morphTexture===null||nt.isInstancedMesh&&zt.instancingMorph===!1&&nt.morphTexture!==null||zt.envMap!==Nt||at.fog===!0&&zt.fog!==At||zt.numClippingPlanes!==void 0&&(zt.numClippingPlanes!==Q.numPlanes||zt.numIntersection!==Q.numIntersection)||zt.vertexAlphas!==Bt||zt.vertexTangents!==kt||zt.morphTargets!==Vt||zt.morphNormals!==lr||zt.morphColors!==xr||zt.toneMapping!==Qr||zt.morphTargetsCount!==Er)&&(yr=!0):(yr=!0,zt.__version=at.version);let Ci=zt.currentProgram;yr===!0&&(Ci=Fe(at,Ke,nt));let $u=!1,ti=!1,kl=!1;const Rr=Ci.getUniforms(),hi=zt.uniforms;if(ze.useProgram(Ci.program)&&($u=!0,ti=!0,kl=!0),at.id!==U&&(U=at.id,ti=!0),$u||B!==Ae){ze.buffers.depth.getReversed()&&Ae.reversedDepth!==!0&&(Ae._reversedDepth=!0,Ae.updateProjectionMatrix()),Rr.setValue(ue,"projectionMatrix",Ae.projectionMatrix),Rr.setValue(ue,"viewMatrix",Ae.matrixWorldInverse);const qn=Rr.map.cameraPosition;qn!==void 0&&qn.setValue(ue,q.setFromMatrixPosition(Ae.matrixWorld)),Je.logarithmicDepthBuffer&&Rr.setValue(ue,"logDepthBufFC",2/(Math.log(Ae.far+1)/Math.LN2)),(at.isMeshPhongMaterial||at.isMeshToonMaterial||at.isMeshLambertMaterial||at.isMeshBasicMaterial||at.isMeshStandardMaterial||at.isShaderMaterial)&&Rr.setValue(ue,"isOrthographic",Ae.isOrthographicCamera===!0),B!==Ae&&(B=Ae,ti=!0,kl=!0)}if(zt.needsLights&&(Sr.state.directionalShadowMap.length>0&&Rr.setValue(ue,"directionalShadowMap",Sr.state.directionalShadowMap,Ge),Sr.state.spotShadowMap.length>0&&Rr.setValue(ue,"spotShadowMap",Sr.state.spotShadowMap,Ge),Sr.state.pointShadowMap.length>0&&Rr.setValue(ue,"pointShadowMap",Sr.state.pointShadowMap,Ge)),nt.isSkinnedMesh){Rr.setOptional(ue,nt,"bindMatrix"),Rr.setOptional(ue,nt,"bindMatrixInverse");const ri=nt.skeleton;ri&&(ri.boneTexture===null&&ri.computeBoneTexture(),Rr.setValue(ue,"boneTexture",ri.boneTexture,Ge))}nt.isBatchedMesh&&(Rr.setOptional(ue,nt,"batchingTexture"),Rr.setValue(ue,"batchingTexture",nt._matricesTexture,Ge),Rr.setOptional(ue,nt,"batchingIdTexture"),Rr.setValue(ue,"batchingIdTexture",nt._indirectTexture,Ge),Rr.setOptional(ue,nt,"batchingColorTexture"),nt._colorsTexture!==null&&Rr.setValue(ue,"batchingColorTexture",nt._colorsTexture,Ge));const Zi=st.morphAttributes;if((Zi.position!==void 0||Zi.normal!==void 0||Zi.color!==void 0)&&Re.update(nt,st,Ci),(ti||zt.receiveShadow!==nt.receiveShadow)&&(zt.receiveShadow=nt.receiveShadow,Rr.setValue(ue,"receiveShadow",nt.receiveShadow)),at.isMeshGouraudMaterial&&at.envMap!==null&&(hi.envMap.value=Nt,hi.flipEnvMap.value=Nt.isCubeTexture&&Nt.isRenderTargetTexture===!1?-1:1),at.isMeshStandardMaterial&&at.envMap===null&&Ke.environment!==null&&(hi.envMapIntensity.value=Ke.environmentIntensity),hi.dfgLUT!==void 0&&(hi.dfgLUT.value=dZe()),ti&&(Rr.setValue(ue,"toneMappingExposure",F.toneMappingExposure),zt.needsLights&&Ut(hi,kl),At&&at.fog===!0&&D.refreshFogUniforms(hi,At),D.refreshMaterialUniforms(hi,at,Le,Ce,T.state.transmissionRenderTarget[Ae.id]),A3.upload(ue,$e(zt),hi,Ge)),at.isShaderMaterial&&at.uniformsNeedUpdate===!0&&(A3.upload(ue,$e(zt),hi,Ge),at.uniformsNeedUpdate=!1),at.isSpriteMaterial&&Rr.setValue(ue,"center",nt.center),Rr.setValue(ue,"modelViewMatrix",nt.modelViewMatrix),Rr.setValue(ue,"normalMatrix",nt.normalMatrix),Rr.setValue(ue,"modelMatrix",nt.matrixWorld),at.isShaderMaterial||at.isRawShaderMaterial){const ri=at.uniformsGroups;for(let qn=0,A0=ri.length;qn<A0;qn++){const bs=ri[qn];Xe.update(bs,Ci),Xe.bind(bs,Ci)}}return Ci}function Ut(Ae,Ke){Ae.ambientLightColor.needsUpdate=Ke,Ae.lightProbe.needsUpdate=Ke,Ae.directionalLights.needsUpdate=Ke,Ae.directionalLightShadows.needsUpdate=Ke,Ae.pointLights.needsUpdate=Ke,Ae.pointLightShadows.needsUpdate=Ke,Ae.spotLights.needsUpdate=Ke,Ae.spotLightShadows.needsUpdate=Ke,Ae.rectAreaLights.needsUpdate=Ke,Ae.hemisphereLights.needsUpdate=Ke}function ar(Ae){return Ae.isMeshLambertMaterial||Ae.isMeshToonMaterial||Ae.isMeshPhongMaterial||Ae.isMeshStandardMaterial||Ae.isShadowMaterial||Ae.isShaderMaterial&&Ae.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Ae,Ke,st){const at=de.get(Ae);at.__autoAllocateDepthBuffer=Ae.resolveDepthBuffer===!1,at.__autoAllocateDepthBuffer===!1&&(at.__useRenderToTexture=!1),de.get(Ae.texture).__webglTexture=Ke,de.get(Ae.depthTexture).__webglTexture=at.__autoAllocateDepthBuffer?void 0:st,at.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Ae,Ke){const st=de.get(Ae);st.__webglFramebuffer=Ke,st.__useDefaultFramebuffer=Ke===void 0};const nr=ue.createFramebuffer();this.setRenderTarget=function(Ae,Ke=0,st=0){M=Ae,R=Ke,C=st;let at=null,nt=!1,At=!1;if(Ae){const Tt=de.get(Ae);if(Tt.__useDefaultFramebuffer!==void 0){ze.bindFramebuffer(ue.FRAMEBUFFER,Tt.__webglFramebuffer),G.copy(Ae.viewport),K.copy(Ae.scissor),$=Ae.scissorTest,ze.viewport(G),ze.scissor(K),ze.setScissorTest($),U=-1;return}else if(Tt.__webglFramebuffer===void 0)Ge.setupRenderTarget(Ae);else if(Tt.__hasExternalTextures)Ge.rebindTextures(Ae,de.get(Ae.texture).__webglTexture,de.get(Ae.depthTexture).__webglTexture);else if(Ae.depthBuffer){const kt=Ae.depthTexture;if(Tt.__boundDepthTexture!==kt){if(kt!==null&&de.has(kt)&&(Ae.width!==kt.image.width||Ae.height!==kt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ge.setupDepthRenderbuffer(Ae)}}const Nt=Ae.texture;(Nt.isData3DTexture||Nt.isDataArrayTexture||Nt.isCompressedArrayTexture)&&(At=!0);const Bt=de.get(Ae).__webglFramebuffer;Ae.isWebGLCubeRenderTarget?(Array.isArray(Bt[Ke])?at=Bt[Ke][st]:at=Bt[Ke],nt=!0):Ae.samples>0&&Ge.useMultisampledRTT(Ae)===!1?at=de.get(Ae).__webglMultisampledFramebuffer:Array.isArray(Bt)?at=Bt[st]:at=Bt,G.copy(Ae.viewport),K.copy(Ae.scissor),$=Ae.scissorTest}else G.copy(ye).multiplyScalar(Le).floor(),K.copy(Me).multiplyScalar(Le).floor(),$=W;if(st!==0&&(at=nr),ze.bindFramebuffer(ue.FRAMEBUFFER,at)&&ze.drawBuffers(Ae,at),ze.viewport(G),ze.scissor(K),ze.setScissorTest($),nt){const Tt=de.get(Ae.texture);ue.framebufferTexture2D(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,Tt.__webglTexture,st)}else if(At){const Tt=Ke;for(let Nt=0;Nt<Ae.textures.length;Nt++){const Bt=de.get(Ae.textures[Nt]);ue.framebufferTextureLayer(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0+Nt,Bt.__webglTexture,st,Tt)}}else if(Ae!==null&&st!==0){const Tt=de.get(Ae.texture);ue.framebufferTexture2D(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_2D,Tt.__webglTexture,st)}U=-1},this.readRenderTargetPixels=function(Ae,Ke,st,at,nt,At,Rt,Tt=0){if(!(Ae&&Ae.isWebGLRenderTarget)){Ar("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Nt=de.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&Rt!==void 0&&(Nt=Nt[Rt]),Nt){ze.bindFramebuffer(ue.FRAMEBUFFER,Nt);try{const Bt=Ae.textures[Tt],kt=Bt.format,Vt=Bt.type;if(!Je.textureFormatReadable(kt)){Ar("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Je.textureTypeReadable(Vt)){Ar("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ke>=0&&Ke<=Ae.width-at&&st>=0&&st<=Ae.height-nt&&(Ae.textures.length>1&&ue.readBuffer(ue.COLOR_ATTACHMENT0+Tt),ue.readPixels(Ke,st,at,nt,We.convert(kt),We.convert(Vt),At))}finally{const Bt=M!==null?de.get(M).__webglFramebuffer:null;ze.bindFramebuffer(ue.FRAMEBUFFER,Bt)}}},this.readRenderTargetPixelsAsync=async function(Ae,Ke,st,at,nt,At,Rt,Tt=0){if(!(Ae&&Ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Nt=de.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&Rt!==void 0&&(Nt=Nt[Rt]),Nt)if(Ke>=0&&Ke<=Ae.width-at&&st>=0&&st<=Ae.height-nt){ze.bindFramebuffer(ue.FRAMEBUFFER,Nt);const Bt=Ae.textures[Tt],kt=Bt.format,Vt=Bt.type;if(!Je.textureFormatReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Je.textureTypeReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const lr=ue.createBuffer();ue.bindBuffer(ue.PIXEL_PACK_BUFFER,lr),ue.bufferData(ue.PIXEL_PACK_BUFFER,At.byteLength,ue.STREAM_READ),Ae.textures.length>1&&ue.readBuffer(ue.COLOR_ATTACHMENT0+Tt),ue.readPixels(Ke,st,at,nt,We.convert(kt),We.convert(Vt),0);const xr=M!==null?de.get(M).__webglFramebuffer:null;ze.bindFramebuffer(ue.FRAMEBUFFER,xr);const Qr=ue.fenceSync(ue.SYNC_GPU_COMMANDS_COMPLETE,0);return ue.flush(),await IWe(ue,Qr,4),ue.bindBuffer(ue.PIXEL_PACK_BUFFER,lr),ue.getBufferSubData(ue.PIXEL_PACK_BUFFER,0,At),ue.deleteBuffer(lr),ue.deleteSync(Qr),At}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Ae,Ke=null,st=0){const at=Math.pow(2,-st),nt=Math.floor(Ae.image.width*at),At=Math.floor(Ae.image.height*at),Rt=Ke!==null?Ke.x:0,Tt=Ke!==null?Ke.y:0;Ge.setTexture2D(Ae,0),ue.copyTexSubImage2D(ue.TEXTURE_2D,st,0,0,Rt,Tt,nt,At),ze.unbindTexture()};const fi=ue.createFramebuffer(),Zo=ue.createFramebuffer();this.copyTextureToTexture=function(Ae,Ke,st=null,at=null,nt=0,At=null){At===null&&(nt!==0?(EI("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),At=nt,nt=0):At=0);let Rt,Tt,Nt,Bt,kt,Vt,lr,xr,Qr;const on=Ae.isCompressedTexture?Ae.mipmaps[At]:Ae.image;if(st!==null)Rt=st.max.x-st.min.x,Tt=st.max.y-st.min.y,Nt=st.isBox3?st.max.z-st.min.z:1,Bt=st.min.x,kt=st.min.y,Vt=st.isBox3?st.min.z:0;else{const Zi=Math.pow(2,-nt);Rt=Math.floor(on.width*Zi),Tt=Math.floor(on.height*Zi),Ae.isDataArrayTexture?Nt=on.depth:Ae.isData3DTexture?Nt=Math.floor(on.depth*Zi):Nt=1,Bt=0,kt=0,Vt=0}at!==null?(lr=at.x,xr=at.y,Qr=at.z):(lr=0,xr=0,Qr=0);const Er=We.convert(Ke.format),zt=We.convert(Ke.type);let Sr;Ke.isData3DTexture?(Ge.setTexture3D(Ke,0),Sr=ue.TEXTURE_3D):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?(Ge.setTexture2DArray(Ke,0),Sr=ue.TEXTURE_2D_ARRAY):(Ge.setTexture2D(Ke,0),Sr=ue.TEXTURE_2D),ue.pixelStorei(ue.UNPACK_FLIP_Y_WEBGL,Ke.flipY),ue.pixelStorei(ue.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ke.premultiplyAlpha),ue.pixelStorei(ue.UNPACK_ALIGNMENT,Ke.unpackAlignment);const yr=ue.getParameter(ue.UNPACK_ROW_LENGTH),Ci=ue.getParameter(ue.UNPACK_IMAGE_HEIGHT),$u=ue.getParameter(ue.UNPACK_SKIP_PIXELS),ti=ue.getParameter(ue.UNPACK_SKIP_ROWS),kl=ue.getParameter(ue.UNPACK_SKIP_IMAGES);ue.pixelStorei(ue.UNPACK_ROW_LENGTH,on.width),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,on.height),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,Bt),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,kt),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,Vt);const Rr=Ae.isDataArrayTexture||Ae.isData3DTexture,hi=Ke.isDataArrayTexture||Ke.isData3DTexture;if(Ae.isDepthTexture){const Zi=de.get(Ae),ri=de.get(Ke),qn=de.get(Zi.__renderTarget),A0=de.get(ri.__renderTarget);ze.bindFramebuffer(ue.READ_FRAMEBUFFER,qn.__webglFramebuffer),ze.bindFramebuffer(ue.DRAW_FRAMEBUFFER,A0.__webglFramebuffer);for(let bs=0;bs<Nt;bs++)Rr&&(ue.framebufferTextureLayer(ue.READ_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,de.get(Ae).__webglTexture,nt,Vt+bs),ue.framebufferTextureLayer(ue.DRAW_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,de.get(Ke).__webglTexture,At,Qr+bs)),ue.blitFramebuffer(Bt,kt,Rt,Tt,lr,xr,Rt,Tt,ue.DEPTH_BUFFER_BIT,ue.NEAREST);ze.bindFramebuffer(ue.READ_FRAMEBUFFER,null),ze.bindFramebuffer(ue.DRAW_FRAMEBUFFER,null)}else if(nt!==0||Ae.isRenderTargetTexture||de.has(Ae)){const Zi=de.get(Ae),ri=de.get(Ke);ze.bindFramebuffer(ue.READ_FRAMEBUFFER,fi),ze.bindFramebuffer(ue.DRAW_FRAMEBUFFER,Zo);for(let qn=0;qn<Nt;qn++)Rr?ue.framebufferTextureLayer(ue.READ_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,Zi.__webglTexture,nt,Vt+qn):ue.framebufferTexture2D(ue.READ_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_2D,Zi.__webglTexture,nt),hi?ue.framebufferTextureLayer(ue.DRAW_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ri.__webglTexture,At,Qr+qn):ue.framebufferTexture2D(ue.DRAW_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_2D,ri.__webglTexture,At),nt!==0?ue.blitFramebuffer(Bt,kt,Rt,Tt,lr,xr,Rt,Tt,ue.COLOR_BUFFER_BIT,ue.NEAREST):hi?ue.copyTexSubImage3D(Sr,At,lr,xr,Qr+qn,Bt,kt,Rt,Tt):ue.copyTexSubImage2D(Sr,At,lr,xr,Bt,kt,Rt,Tt);ze.bindFramebuffer(ue.READ_FRAMEBUFFER,null),ze.bindFramebuffer(ue.DRAW_FRAMEBUFFER,null)}else hi?Ae.isDataTexture||Ae.isData3DTexture?ue.texSubImage3D(Sr,At,lr,xr,Qr,Rt,Tt,Nt,Er,zt,on.data):Ke.isCompressedArrayTexture?ue.compressedTexSubImage3D(Sr,At,lr,xr,Qr,Rt,Tt,Nt,Er,on.data):ue.texSubImage3D(Sr,At,lr,xr,Qr,Rt,Tt,Nt,Er,zt,on):Ae.isDataTexture?ue.texSubImage2D(ue.TEXTURE_2D,At,lr,xr,Rt,Tt,Er,zt,on.data):Ae.isCompressedTexture?ue.compressedTexSubImage2D(ue.TEXTURE_2D,At,lr,xr,on.width,on.height,Er,on.data):ue.texSubImage2D(ue.TEXTURE_2D,At,lr,xr,Rt,Tt,Er,zt,on);ue.pixelStorei(ue.UNPACK_ROW_LENGTH,yr),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,Ci),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,$u),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,ti),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,kl),At===0&&Ke.generateMipmaps&&ue.generateMipmap(Sr),ze.unbindTexture()},this.initRenderTarget=function(Ae){de.get(Ae).__webglFramebuffer===void 0&&Ge.setupRenderTarget(Ae)},this.initTexture=function(Ae){Ae.isCubeTexture?Ge.setTextureCube(Ae,0):Ae.isData3DTexture?Ge.setTexture3D(Ae,0):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?Ge.setTexture2DArray(Ae,0):Ge.setTexture2D(Ae,0),ze.unbindTexture()},this.resetState=function(){R=0,C=0,M=null,ze.reset(),Qe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ro}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorSpace=Tr._getDrawingBufferColorSpace(e),r.unpackColorSpace=Tr._getUnpackColorSpace()}}const W$={type:"change"},Bk={type:"start"},vEe={type:"end"},ER=new IF,K$=new Yc,hZe=Math.cos(70*RWe.DEG2RAD),Un=new Ze,ia=2*Math.PI,Mr={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},eL=1e-6;class pZe extends mKe{constructor(e,r=null){super(e,r),this.state=Mr.NONE,this.target=new Ze,this.cursor=new Ze,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:pp.ROTATE,MIDDLE:pp.DOLLY,RIGHT:pp.PAN},this.touches={ONE:tp.ROTATE,TWO:tp.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Ze,this._lastQuaternion=new Sl,this._lastTargetPosition=new Ze,this._quat=new Sl().setFromUnitVectors(e.up,new Ze(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new T$,this._sphericalDelta=new T$,this._scale=1,this._panOffset=new Ze,this._rotateStart=new tr,this._rotateEnd=new tr,this._rotateDelta=new tr,this._panStart=new tr,this._panEnd=new tr,this._panDelta=new tr,this._dollyStart=new tr,this._dollyEnd=new tr,this._dollyDelta=new tr,this._dollyDirection=new Ze,this._mouse=new tr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=mZe.bind(this),this._onPointerDown=_Ze.bind(this),this._onPointerUp=gZe.bind(this),this._onContextMenu=SZe.bind(this),this._onMouseWheel=vZe.bind(this),this._onKeyDown=AZe.bind(this),this._onTouchStart=TZe.bind(this),this._onTouchMove=wZe.bind(this),this._onMouseDown=yZe.bind(this),this._onMouseMove=bZe.bind(this),this._interceptControlDown=xZe.bind(this),this._interceptControlUp=EZe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(W$),this.update(),this.state=Mr.NONE}update(e=null){const r=this.object.position;Un.copy(r).sub(this.target),Un.applyQuaternion(this._quat),this._spherical.setFromVector3(Un),this.autoRotate&&this.state===Mr.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=ia:n>Math.PI&&(n-=ia),i<-Math.PI?i+=ia:i>Math.PI&&(i-=ia),n<=i?this._spherical.theta=Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let a=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),a=s!=this._spherical.radius}if(Un.setFromSpherical(this._spherical),Un.applyQuaternion(this._quatInverse),r.copy(this.target).add(Un),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){const o=Un.length();s=this._clampDistance(o*this._scale);const c=o-s;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),a=!!c}else if(this.object.isOrthographicCamera){const o=new Ze(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),a=c!==this.object.zoom;const u=new Ze(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(o),this.object.updateMatrixWorld(),s=Un.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(ER.origin.copy(this.object.position),ER.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(ER.direction))<hZe?this.object.lookAt(this.target):(K$.setFromNormalAndCoplanarPoint(this.object.up,this.target),ER.intersectPlane(K$,this.target))))}else if(this.object.isOrthographicCamera){const s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),a=!0)}return this._scale=1,this._performCursorZoom=!1,a||this._lastPosition.distanceToSquared(this.object.position)>eL||8*(1-this._lastQuaternion.dot(this.object.quaternion))>eL||this._lastTargetPosition.distanceToSquared(this.target)>eL?(this.dispatchEvent(W$),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?ia/60*this.autoRotateSpeed*e:ia/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){Un.setFromMatrixColumn(r,0),Un.multiplyScalar(-e),this._panOffset.add(Un)}_panUp(e,r){this.screenSpacePanning===!0?Un.setFromMatrixColumn(r,1):(Un.setFromMatrixColumn(r,0),Un.crossVectors(this.object.up,Un)),Un.multiplyScalar(e),this._panOffset.add(Un)}_pan(e,r){const n=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Un.copy(i).sub(this.target);let a=Un.length();a*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*a/n.clientHeight,this.object.matrix),this._panUp(2*r*a/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),i=e-n.left,a=r-n.top,s=n.width,o=n.height;this._mouse.x=i/s*2-1,this._mouse.y=-(a/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(ia*this._rotateDelta.x/r.clientHeight),this._rotateUp(ia*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._panStart.set(n,i)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,i=e.pageY-r.y,a=Math.sqrt(n*n+i*i);this._dollyStart.set(0,a)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),a=.5*(e.pageY+n.y);this._rotateEnd.set(i,a)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(ia*this._rotateDelta.x/r.clientHeight),this._rotateUp(ia*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,i=e.pageY-r.y,a=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,a),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=(e.pageX+r.x)*.5,o=(e.pageY+r.y)*.5;this._updateZoomParameters(s,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new tr,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function _Ze(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function mZe(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function gZe(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(vEe),this.state=Mr.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function yZe(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case pp.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=Mr.DOLLY;break;case pp.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Mr.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Mr.ROTATE}break;case pp.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Mr.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Mr.PAN}break;default:this.state=Mr.NONE}this.state!==Mr.NONE&&this.dispatchEvent(Bk)}function bZe(t){switch(this.state){case Mr.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case Mr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case Mr.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function vZe(t){this.enabled===!1||this.enableZoom===!1||this.state!==Mr.NONE||(t.preventDefault(),this.dispatchEvent(Bk),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(vEe))}function AZe(t){this.enabled!==!1&&this._handleKeyDown(t)}function TZe(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case tp.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=Mr.TOUCH_ROTATE;break;case tp.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=Mr.TOUCH_PAN;break;default:this.state=Mr.NONE}break;case 2:switch(this.touches.TWO){case tp.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=Mr.TOUCH_DOLLY_PAN;break;case tp.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=Mr.TOUCH_DOLLY_ROTATE;break;default:this.state=Mr.NONE}break;default:this.state=Mr.NONE}this.state!==Mr.NONE&&this.dispatchEvent(Bk)}function wZe(t){switch(this._trackPointer(t),this.state){case Mr.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case Mr.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case Mr.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case Mr.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=Mr.NONE}}function SZe(t){this.enabled!==!1&&t.preventDefault()}function xZe(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function EZe(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class IZe extends Zn{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new tr(.5,.5),this.addEventListener("removed",function(){this.traverse(function(r){r.element&&r.element instanceof r.element.ownerDocument.defaultView.Element&&r.element.parentNode!==null&&r.element.remove()})})}copy(e,r){return super.copy(e,r),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const mh=new Ze,X$=new kr,J$=new kr,Y$=new Ze,$$=new Ze;class OZe{constructor(e={}){const r=this;let n,i,a,s;const o={objects:new WeakMap},c=e.element!==void 0?e.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.sortObjects=!0,this.getSize=function(){return{width:n,height:i}},this.render=function(p,_){p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),_.parent===null&&_.matrixWorldAutoUpdate===!0&&_.updateMatrixWorld(),X$.copy(_.matrixWorldInverse),J$.multiplyMatrices(_.projectionMatrix,X$),l(p,p,_),this.sortObjects&&h(p)},this.setSize=function(p,_){n=p,i=_,a=n/2,s=i/2,c.style.width=p+"px",c.style.height=_+"px"};function u(p){p.isCSS2DObject&&(p.element.style.display="none");for(let _=0,g=p.children.length;_<g;_++)u(p.children[_])}function l(p,_,g){if(p.visible===!1){u(p);return}if(p.isCSS2DObject){mh.setFromMatrixPosition(p.matrixWorld),mh.applyMatrix4(J$);const m=mh.z>=-1&&mh.z<=1&&p.layers.test(g.layers)===!0,y=p.element;y.style.display=m===!0?"":"none",m===!0&&(p.onBeforeRender(r,_,g),y.style.transform="translate("+-100*p.center.x+"%,"+-100*p.center.y+"%)translate("+(mh.x*a+a)+"px,"+(-mh.y*s+s)+"px)",y.parentNode!==c&&c.appendChild(y),p.onAfterRender(r,_,g));const v={distanceToCameraSquared:d(g,p)};o.objects.set(p,v)}for(let m=0,y=p.children.length;m<y;m++)l(p.children[m],_,g)}function d(p,_){return Y$.setFromMatrixPosition(p.matrixWorld),$$.setFromMatrixPosition(_.matrixWorld),Y$.distanceToSquared($$)}function f(p){const _=[];return p.traverseVisible(function(g){g.isCSS2DObject&&_.push(g)}),_}function h(p){const _=f(p).sort(function(m,y){if(m.renderOrder!==y.renderOrder)return y.renderOrder-m.renderOrder;const v=o.objects.get(m).distanceToCameraSquared,A=o.objects.get(y).distanceToCameraSquared;return v-A}),g=_.length;for(let m=0,y=_.length;m<y;m++)_[m].element.style.zIndex=g-m}}}const Z$="#607D8B",RZe=28,PZe=25,Ja=.4,IR=.5,NZe=1.2,FZe=400,eZ=3,MZe=.01,tZ=1e4;function tL(t,e,r){return Number.isFinite(t)&&Number.isFinite(e)&&Number.isFinite(r)}function AEe(t){Number.isFinite(t.x)||(t.x=0),Number.isFinite(t.y)||(t.y=0),Number.isFinite(t.z)||(t.z=0);const e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);if(e>tZ){const r=tZ/e;t.x*=r,t.y*=r,t.z*=r}}function DZe(t){return(t.label.length>RZe?t.label.slice(0,PZe)+"":t.label)+(t.literalSuffix??"")}function rL(t){return new br(t)}function CZe(t,e,r){for(let o=0;o<FZe;o++){for(const c of t)c.vx=0,c.vy=0,c.vz=0;for(let c=0;c<t.length;c++){const u=t[c];for(let l=c+1;l<t.length;l++){const d=t[l],f=u.x-d.x,h=u.y-d.y,p=u.z-d.z,_=f*f+h*h+p*p+.01,g=Math.max(Math.sqrt(_),MZe),y=2/(g*g*g),v=y*f,A=y*h,T=y*p;u.vx+=v,u.vy+=A,u.vz+=T,d.vx-=v,d.vy-=A,d.vz-=T}}for(const c of e){const u=r.get(c.from),l=r.get(c.to);if(!u||!l)continue;const d=l.x-u.x,f=l.y-u.y,h=l.z-u.z,p=Math.sqrt(d*d+f*f+h*h)||.001,g=(p-NZe)*.08,m=g*d/p,y=g*f/p,v=g*h/p;u.vx+=m,u.vy+=y,u.vz+=v,l.vx-=m,l.vy-=y,l.vz-=v}for(const c of t)c.vx-=c.x*.01,c.vy-=c.y*.01,c.vz-=c.z*.01;for(const c of t)c.x+=c.vx*.85,c.y+=c.vy*.85,c.z+=c.vz*.85,AEe(c)}}function LZe({graphData:t,enabledPrefixes:e,onSelectNode:r,selectedNodeId:n,fitRef:i}){const a=yt.useRef(null),s=yt.useRef(null),o=yt.useRef(null),{graph:c,colourMap:u}=t,l=e.size===0,d=yt.useMemo(()=>new ZWe,[]),f=yt.useRef(new Map),h=yt.useRef(new Map),p=yt.useRef(new Map),_=yt.useRef([]),g=yt.useRef([]),m=yt.useRef(null),y=yt.useRef(null);return yt.useEffect(()=>{var ft,le,me;const v=a.current,A=s.current,T=o.current;if(!v||!A||!T)return;const S=v.clientWidth,P=v.clientHeight,j=new os(50,S/P,.01,1e6);j.position.set(0,0,8),y.current=j;const F=new fZe({canvas:A,antialias:!0,alpha:!0});F.setSize(S,P),F.setPixelRatio(Math.min(2,window.devicePixelRatio??1)),F.setClearColor(0,0);const N=new OZe;N.setSize(S,P),N.domElement.style.position="absolute",N.domElement.style.top="0",N.domElement.style.left="0",N.domElement.style.pointerEvents="none",T.appendChild(N.domElement);const R=new pZe(j,A);R.enableDamping=!0,R.dampingFactor=.05,m.current=R;const C=[];d.traverse(Z=>{var q;(q=Z.userData)!=null&&q.graphObject&&C.push(Z)}),C.forEach(Z=>{if(Z.parent&&Z.parent.remove(Z),Z instanceof Fa&&Z.geometry&&Z.geometry.dispose(),Z instanceof Fa&&Z.material){const q=Z.material;Array.isArray(q)?q.forEach(J=>J.dispose()):q.dispose()}}),_.current.forEach(Z=>{Z.geometry.dispose(),Z.material.dispose(),d.remove(Z)}),_.current=[],g.current.forEach(Z=>{Z.geometry.dispose(),Z.material.dispose(),d.remove(Z)}),g.current=[],h.current.clear(),p.current.forEach(Z=>Z.remove()),p.current.clear(),f.current.clear();const M=c.nodes.map((Z,q)=>{const J=q/Math.max(1,c.nodes.length)*Math.PI*2,re=eZ*(.5+Math.random()*.5);return{...Z,x:Math.cos(J)*re*.6,y:(Math.random()-.5)*eZ,z:Math.sin(J)*re*.6,vx:0,vy:0,vz:0}}),U=new Map(M.map(Z=>[Z.id,Z]));f.current=U,CZe(M,c.edges,U);for(const Z of M)AEe(Z);const B=new hKe(16777215,.6);B.userData.graphObject=!0,d.add(B);const G=new fKe(16777215,.8);G.position.set(5,5,10),G.userData.graphObject=!0,d.add(G);const K=new Lk(1,32,24);for(const Z of M){const q=((ft=u.get(Z.prefixKey))==null?void 0:ft.fill)??Z$,J=rL(q),re=new oKe({color:J,transparent:!0,opacity:.82,emissive:J.clone().multiplyScalar(.2)}),_e=new Fa(K.clone(),re);_e.scale.set(Ja,Ja*IR,Ja),_e.position.set(Z.x,Z.y,Z.z),_e.userData={nodeId:Z.id,graphObject:!0},d.add(_e),h.current.set(Z.id,_e);const he=document.createElement("div");he.className="graph-3d-label",he.textContent=DZe(Z),he.style.color=((le=u.get(Z.prefixKey))==null?void 0:le.text)??"#111",he.style.backgroundColor=q,he.style.visibility="hidden";const ue=new IZe(he);ue.position.set(Z.x,Z.y,Z.z),ue.userData={graphObject:!0,nodeId:Z.id},d.add(ue),p.current.set(Z.id,he)}K.dispose();const $=new Ck(.08,.2,8);for(const Z of c.edges){const q=U.get(Z.from),J=U.get(Z.to);if(!q||!J||!tL(q.x,q.y,q.z)||!tL(J.x,J.y,J.z))continue;const re=((me=u.get(Z.prefixKey))==null?void 0:me.fill)??Z$,_e=new Ze(q.x,q.y,q.z),he=new Ze(J.x,J.y,J.z),ue=new Ze().subVectors(he,_e);if(ue.length()>.001){ue.normalize();const De=new Ze(Ja,Ja*IR,Ja),Je=new Ze(-ue.x/De.x,-ue.y/De.y,-ue.z/De.z).normalize(),ze=new Ze(_e.x+Je.x*De.x,_e.y+Je.y*De.y,_e.z+Je.z*De.z),ve=new Ze(Ja,Ja*IR,Ja),de=new Ze(ue.x/ve.x,ue.y/ve.y,ue.z/ve.z).normalize(),Ge=new Ze(he.x-de.x*ve.x,he.y-de.y*ve.y,he.z-de.z*ve.z),it=[ze,Ge],ae=new Ga().setFromPoints(it),z=new fEe({color:rL(re),opacity:.9,transparent:!0}),V=new iKe(ae,z);V.userData={graphObject:!0,from:Z.from,to:Z.to},d.add(V),_.current.push(V);const x=new Ze().subVectors(Ge,ze).normalize(),O=new Fk({color:rL(re),opacity:.9,transparent:!0}),D=new Fa($.clone(),O),H=x.clone().multiplyScalar(-.1);D.position.copy(Ge).add(H);const Y=new Ze(0,1,0),Q=new Sl().setFromUnitVectors(Y,x);D.setRotationFromQuaternion(Q),D.userData={graphObject:!0,from:Z.from,to:Z.to},d.add(D),g.current.push(D)}}$.dispose();const se=new _Ke,pe=new tr;se.params.Line={threshold:8};function we(Z){p.current.forEach((q,J)=>{const re=f.current.get(J),_e=!re||l||e.has(re.prefixKey);q.style.visibility=Z.has(J)&&_e?"visible":"hidden"})}const Ce=Z=>{var he,ue,Ue;if(!v)return;const q=v.getBoundingClientRect();pe.x=(Z.clientX-q.left)/q.width*2-1,pe.y=-((Z.clientY-q.top)/q.height)*2+1,se.setFromCamera(pe,j);const J=[...Array.from(h.current.values()),..._.current],re=se.intersectObjects(J),_e=new Set;if(re.length>0){const De=re[0].object;(he=De.userData)!=null&&he.nodeId?_e.add(De.userData.nodeId):((ue=De.userData)==null?void 0:ue.from)!=null&&((Ue=De.userData)==null?void 0:Ue.to)!=null&&(_e.add(De.userData.from),_e.add(De.userData.to))}we(_e)},Le=()=>{we(new Set)},Ie=()=>{var J;se.setFromCamera(pe,j);const Z=Array.from(h.current.values()),q=se.intersectObjects(Z);q.length>0&&((J=q[0].object.userData)!=null&&J.nodeId)?r(q[0].object.userData.nodeId):r(null)};A.addEventListener("pointermove",Ce),A.addEventListener("pointerleave",Le),A.addEventListener("pointerdown",Ie),i.current=()=>{if(M.length===0)return;let Z=1/0,q=1/0,J=1/0,re=-1/0,_e=-1/0,he=-1/0;for(const ze of M)tL(ze.x,ze.y,ze.z)&&(Z=Math.min(Z,ze.x),q=Math.min(q,ze.y),J=Math.min(J,ze.z),re=Math.max(re,ze.x),_e=Math.max(_e,ze.y),he=Math.max(he,ze.z));if(Z===1/0)return;const ue=(Z+re)/2,Ue=(q+_e)/2,De=(J+he)/2,Je=Math.max(re-Z,_e-q,he-J,2)*.8;j.position.set(ue+Je,Ue+Je*.5,De+Je),j.lookAt(ue,Ue,De),R.target.set(ue,Ue,De)},i.current();let Oe=0;const ye=()=>{Oe=requestAnimationFrame(ye),R.update(),F.render(d,j),N.render(d,j)};ye();const Me=()=>{if(!v)return;const Z=v.clientWidth,q=v.clientHeight;j.aspect=Z/q,j.updateProjectionMatrix(),F.setSize(Z,q),N.setSize(Z,q)},W=new ResizeObserver(Me);return W.observe(v),()=>{cancelAnimationFrame(Oe),i.current=null,W.disconnect(),A.removeEventListener("pointermove",Ce),A.removeEventListener("pointerleave",Le),A.removeEventListener("pointerdown",Ie),R.dispose(),N.domElement.remove(),F.dispose(),K.dispose(),h.current.forEach(Z=>{Z.geometry.dispose(),Z.material.dispose()}),h.current.clear(),_.current.forEach(Z=>{Z.geometry.dispose(),Z.material.dispose()}),_.current=[],g.current.forEach(Z=>{Z.geometry.dispose(),Z.material.dispose()}),g.current=[],p.current.forEach(Z=>Z.remove()),p.current.clear()}},[t,r]),yt.useEffect(()=>{for(const[T,S]of h.current){const P=f.current.get(T);if(!P)continue;const j=l||e.has(P.prefixKey);S.visible=j}o.current&&p.current.forEach((T,S)=>{const P=f.current.get(S);if(!P)return;const j=l||e.has(P.prefixKey);T.style.display=j?"":"none"});const A=new Set(c.nodes.filter(T=>l||e.has(T.prefixKey)).map(T=>T.id));c.edges.forEach((T,S)=>{const P=_.current[S],j=g.current[S],F=A.has(T.from)&&A.has(T.to)&&(l||e.has(T.prefixKey));P&&(P.visible=F),j&&(j.visible=F)})},[e,l,c.nodes,c.edges]),yt.useEffect(()=>{for(const[v,A]of h.current){const T=A.material,S=n===v;A.scale.set(Ja*(S?1.15:1),Ja*IR*(S?1.15:1),Ja*(S?1.15:1)),T.emissive&&(S?T.emissive.setHex(4474111):T.emissive.copy(T.color).multiplyScalar(.2))}},[n]),Ve.jsxs("div",{ref:a,className:"graph-3d-container",children:[Ve.jsx("canvas",{ref:s,className:"graph-3d-canvas"}),Ve.jsx("div",{ref:o,className:"graph-3d-labels","aria-hidden":"true"})]})}const y_="ttl-vis-layout",rZ="ttl-vis-view-mode",jZe=180;function nL(t){return`${t.from}|${t.predicateId}|${t.to}`}const nZ=["#E53935","#D81B60","#8E24AA","#5E35B1","#3949AB","#1E88E5","#00897B","#43A047","#7CB342","#C0CA33","#FDD835","#FB8C00","#F4511E","#6D4C41","#546E7A"],dE="#607D8B";function BZe(t){const e=parseInt(t.slice(1),16);return[e>>16&255,e>>8&255,e&255]}function qZe(t){const[e,r,n]=BZe(t).map(a=>{const s=a/255;return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)});return .2126*e+.7152*r+.0722*n>.45?"#111111":"#ffffff"}function UZe(t){const e=new Map;return t.forEach((r,n)=>{const i=nZ[n%nZ.length]??dE;e.set(r,{fill:i,text:qZe(i)})}),e}const VZe=28,GZe=25,HZe=10,kZe=6,iZ=48,zZe=`
.graph-links line { stroke-opacity: 0.95; }
.graph-links text { font-size: 10px; font-family: JetBrains Mono, monospace; }
.graph-nodes .node-label { font-size: 11px; font-family: JetBrains Mono, monospace; }
`;function TEe(t){const e=new Date,r=u=>String(u).padStart(2,"0"),n=e.getFullYear(),i=r(e.getMonth()+1),a=r(e.getDate()),s=r(e.getHours()),o=r(e.getMinutes()),c=r(e.getSeconds());return`ttl-graph-${n}-${i}-${a}-${s}${o}${c}.${t}`}function wEe(t,e){const r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=e,n.click(),URL.revokeObjectURL(r)}function SEe(t){const e=t.cloneNode(!0),r=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=document.createElementNS("http://www.w3.org/2000/svg","style");n.textContent=zZe,r.appendChild(n);const i=t.querySelector("defs");return i&&i.querySelectorAll("marker").forEach(s=>{const o=s.cloneNode(!0);r.appendChild(o)}),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),e}function QZe(t){const e=SEe(t);let n=new XMLSerializer().serializeToString(e);n=`<?xml version="1.0" encoding="UTF-8"?>
`+n;const i=new Blob([n],{type:"image/svg+xml"});wEe(i,TEe("svg"))}function WZe(t){const e=SEe(t),n=new XMLSerializer().serializeToString(e),i="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n))),a=new Image;a.onload=()=>{const s=t.clientWidth,o=t.clientHeight,c=Math.min(2,Math.max(1,window.devicePixelRatio??1)),u=document.createElement("canvas");u.width=s*c,u.height=o*c;const l=u.getContext("2d");l&&(l.scale(c,c),l.drawImage(a,0,0,s,o),u.toBlob(d=>{d&&wEe(d,TEe("png"))},"image/png",1))},a.onerror=()=>console.error("PNG export: failed to load SVG image"),a.src=i}function KZe(t){return(t.label.length>VZe?t.label.slice(0,GZe)+"":t.label)+(t.literalSuffix??"")}function tG({triples:t,prefixes:e}){const r=yt.useRef(null),n=yt.useRef(null),i=yt.useRef(null),a=yt.useRef(null),s=yt.useRef(!1),[o,c]=yt.useState(0),[u,l]=yt.useState(""),[d,f]=yt.useState(""),[h,p]=yt.useState(""),[_,g]=yt.useState(null),m=yt.useRef(g);m.current=g,yt.useEffect(()=>{const Oe=setTimeout(()=>p(d),jZe);return()=>clearTimeout(Oe)},[d]);const y=yt.useMemo(()=>VQe(t,{text:u}),[t,u]),v=yt.useMemo(()=>{if(y.length===0)return null;const Oe=UQe(y,e),ye=[...new Set([...Oe.nodes.map(Me=>Me.prefixKey),...Oe.edges.map(Me=>Me.prefixKey)])].sort();return{graph:Oe,prefixKeys:ye,colourMap:UZe(ye)}},[y,e]),A=h.trim().length>0,T=yt.useMemo(()=>{const Oe=new Set,ye=new Set;if(!v||!A)return{matchedNodeIds:Oe,matchedLinkIds:ye};const Me=h.trim().toLowerCase();for(const W of v.graph.nodes)(W.id.toLowerCase().includes(Me)||W.label.toLowerCase().includes(Me))&&Oe.add(W.id);for(const W of v.graph.edges)(W.label.toLowerCase().includes(Me)||W.predicateId.toLowerCase().includes(Me)||W.from.toLowerCase().includes(Me)||W.to.toLowerCase().includes(Me))&&ye.add(nL(W));return{matchedNodeIds:Oe,matchedLinkIds:ye}},[v,h,A]),[S,P]=yt.useState(new Set),[j,F]=yt.useState(!1),N=yt.useRef(null),[R,C]=yt.useState(()=>{try{const Oe=localStorage.getItem(y_);if(!Oe)return"force";const ye=JSON.parse(Oe);return ye.type==="tree"||ye.type==="radial"?ye.type:"force"}catch{return"force"}}),[M,U]=yt.useState(()=>{try{const Oe=localStorage.getItem(y_);if(!Oe)return Zf.linkDistance;const Me=JSON.parse(Oe).linkDistance;return typeof Me=="number"&&Me>=_C&&Me<=mC?Me:Zf.linkDistance}catch{return Zf.linkDistance}}),[B,G]=yt.useState(()=>{try{const Oe=localStorage.getItem(y_);if(!Oe)return Zf.chargeStrength;const Me=JSON.parse(Oe).chargeStrength;return typeof Me=="number"&&Me>=gC&&Me<=yC?Me:Zf.chargeStrength}catch{return Zf.chargeStrength}}),[K,$]=yt.useState(()=>{try{const Oe=localStorage.getItem(y_);if(!Oe)return AC;const Me=JSON.parse(Oe).treeRadialEdgeLength;return typeof Me=="number"&&Me>=bC&&Me<=vC?Me:AC}catch{return AC}}),[se,pe]=yt.useState(()=>{try{const Oe=localStorage.getItem(rZ);return Oe==="2d"||Oe==="3d"?Oe:"2d"}catch{return"2d"}});yt.useEffect(()=>{try{localStorage.setItem(rZ,se)}catch{}},[se]),yt.useEffect(()=>{try{localStorage.setItem(y_,JSON.stringify({type:R,linkDistance:M,chargeStrength:B,treeRadialEdgeLength:K}))}catch{}},[R,M,B,K]),yt.useEffect(()=>{if(!j)return;const Oe=ye=>{N.current&&!N.current.contains(ye.target)&&F(!1)};return document.addEventListener("click",Oe),()=>document.removeEventListener("click",Oe)},[j]),yt.useEffect(()=>{v&&P(new Set(v.prefixKeys))},[v]),yt.useEffect(()=>{if(!_)return;const Oe=ye=>{ye.key==="Escape"&&g(null)};return window.addEventListener("keydown",Oe),()=>window.removeEventListener("keydown",Oe)},[_]);const we=Oe=>{P(ye=>{const Me=new Set(ye);return Me.has(Oe)?Me.delete(Oe):Me.add(Oe),Me})};if(yt.useEffect(()=>{const Oe=r.current,ye=n.current;if(!Oe||!ye||y.length===0||!v)return;const Me=!s.current,{graph:W,colourMap:ft}=v,le=W.nodes.map(V=>({...V})),me=new Map(le.map(V=>[V.id,V])),Z=W.edges.map(V=>({...V,source:me.get(V.from),target:me.get(V.to)})),q=Oe.clientWidth,J=Oe.clientHeight;_n(ye).selectAll("*").remove(),ye.setAttribute("width",String(q)),ye.setAttribute("height",String(J));const re=_n(ye).append("g");re.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","context-stroke");const he=BQe().on("zoom",V=>{re.attr("transform",V.transform)});_n(ye).call(he);function ue(){if(!Oe||!ye||le.length===0)return;const V=Oe.clientWidth,x=Oe.clientHeight;if(V<=0||x<=0)return;let O=1/0,D=1/0,H=-1/0,Y=-1/0;for(const Pe of le){const He=Pe.x??0,Ee=Pe.y??0,ce=Pe.rx??24,ne=Pe.ry??12;O=Math.min(O,He-ce),D=Math.min(D,Ee-ne),H=Math.max(H,He+ce),Y=Math.max(Y,Ee+ne)}const Q=iZ,ee=H-O||1,ie=Y-D||1,Re=Math.min((V-2*Q)/ee,(x-2*Q)/ie),oe=(O+H)/2,Te=(D+Y)/2,We=V/2-Re*oe,Qe=x/2-Re*Te,Xe=FN.translate(We,Qe).scale(Re);he.transform(_n(ye),Xe)}i.current=ue;function Ue(V){if(!Oe||!ye||V.size===0)return;const x=Oe.clientWidth,O=Oe.clientHeight;if(x<=0||O<=0)return;let D=1/0,H=1/0,Y=-1/0,Q=-1/0;for(const He of le){if(!V.has(He.id))continue;const Ee=He.x??0,ce=He.y??0,ne=He.rx??24,xe=He.ry??12;D=Math.min(D,Ee-ne),H=Math.min(H,ce-xe),Y=Math.max(Y,Ee+ne),Q=Math.max(Q,ce+xe)}if(D===1/0)return;const ee=iZ,ie=Y-D||1,Re=Q-H||1,oe=Math.min((x-2*ee)/ie,(O-2*ee)/Re),Te=(D+Y)/2,We=(H+Q)/2,Qe=x/2-oe*Te,Xe=O/2-oe*We,Pe=FN.translate(Qe,Xe).scale(oe);he.transform(_n(ye),Pe)}a.current=Ue;const De=re.append("g").attr("class","graph-links").selectAll("g").data(Z).join("g");De.append("line").attr("class","graph-link-line").attr("stroke",V=>{var x;return((x=ft.get(V.prefixKey))==null?void 0:x.fill)??dE}).attr("stroke-width",2).attr("marker-end","url(#arrowhead)"),De.append("text").attr("class","graph-link-text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("pointer-events","none").attr("fill",V=>{var x;return((x=ft.get(V.prefixKey))==null?void 0:x.text)??"#111"}).text(V=>V.label);let Je=null;const ze=WHe().on("start",V=>{Je?(V.active||Je.alphaTarget(.3).restart(),V.subject.fx=V.subject.x,V.subject.fy=V.subject.y):(V.subject.x=V.x,V.subject.y=V.y)}).on("drag",V=>{Je?(V.subject.fx=V.x,V.subject.fy=V.y):(V.subject.x=V.x,V.subject.y=V.y,ae())}).on("end",V=>{Je&&!V.active&&Je.alphaTarget(0),Je&&(V.subject.fx=null,V.subject.fy=null)}),ve=re.append("g").attr("class","graph-nodes").selectAll("g").data(le).join("g").attr("cursor","pointer").call(ze);ve.on("click",(V,x)=>{V.stopPropagation(),m.current(x.id)}),ve.append("title").text(V=>V.literalSuffix?V.label+V.literalSuffix:V.id),ve.append("ellipse").attr("class",V=>V.isLiteral?"node-literal":"node-resource").attr("rx",24).attr("ry",12).attr("stroke-width",2).attr("fill",V=>{var x;return((x=ft.get(V.prefixKey))==null?void 0:x.fill)??dE}).attr("stroke",V=>{var O,D;const x=((O=ft.get(V.prefixKey))==null?void 0:O.fill)??dE;return((D=Ip(x))==null?void 0:D.darker(.4).toString())??x}),ve.append("text").attr("class","node-label").attr("text-anchor","middle").attr("dominant-baseline","central").attr("pointer-events","none").attr("fill",V=>{var x;return((x=ft.get(V.prefixKey))==null?void 0:x.text)??"#111"}).text(V=>KZe(V));let de=!1;function Ge(){de||(ve.each(function(V){const x=_n(this).select("text").node();if(!x)return;const O=x.getBBox(),D=O.width/2+HZe,H=O.height/2+kZe;V.rx=D,V.ry=H,_n(this).select("ellipse").attr("rx",D).attr("ry",H)}),de=!0)}function it(V,x,O,D,H,Y,Q,ee){const ie=H-V,Re=Y-x,oe=ie/O,Te=Re/D,We=oe*oe+Te*Te;if(We===0)return[V,x];const Qe=Math.sqrt(We),Xe=oe/Qe,Pe=Te/Qe;return[V+Xe*O,x+Pe*D]}function ae(){De.each(function(V){const x=V.source,O=V.target,D=x.x??0,H=x.y??0,Y=O.x??0,Q=O.y??0,ee=x.rx??24,ie=x.ry??12,Re=O.rx??24,oe=O.ry??12,[Te,We]=it(D,H,ee,ie,Y,Q),[Qe,Xe]=it(Y,Q,Re,oe,D,H),Pe=(Te+Qe)/2,He=(We+Xe)/2;_n(this).select("line").attr("x1",Te).attr("y1",We).attr("x2",Qe).attr("y2",Xe),_n(this).select("text").attr("x",Pe).attr("y",He)}),ve.attr("transform",V=>`translate(${V.x??0},${V.y??0})`),Ge()}if(R==="tree"?VY(le,Z,q,J,K):R==="radial"&&HY(le,Z,q,J,K),R==="force")if(Je=aQe(le).force("link",Yze(Z).id(V=>V.id).distance(M)).force("charge",sQe().strength(B)).force("center",DY(q/2,J/2)).force("collision",Xze().radius(V=>Math.max(V.rx??24,V.ry??12)+4)).on("tick",ae),Me)s.current=!0;else{Je.alpha(0);for(let V=0;V<300;V++)Je.tick();Je.stop(),ae()}else ae(),Me&&(s.current=!0);const z=new ResizeObserver(()=>{const V=Oe.clientWidth,x=Oe.clientHeight;if(ye.setAttribute("width",String(V)),ye.setAttribute("height",String(x)),Je){if(Je.force("center",DY(V/2,x/2)),s.current){Je.alpha(0);for(let O=0;O<150;O++)Je.tick();Je.stop(),ae()}}else R==="tree"?VY(le,Z,V,x,K):R==="radial"&&HY(le,Z,V,x,K),ae()});return z.observe(Oe),()=>{i.current=null,a.current=null,z.disconnect(),Je==null||Je.stop(),_n(ye).selectAll("*").remove()}},[y,e,v,R,M,B,K,o]),yt.useEffect(()=>{const Oe=n.current;if(!Oe||!v)return;const ye=S.size===0;_n(Oe).selectAll(".graph-nodes > g").attr("visibility",Me=>ye||S.has(Me.prefixKey)?"visible":"hidden"),_n(Oe).selectAll(".graph-links > g").attr("visibility",Me=>{if(ye)return"visible";const W=Me.source,ft=Me.target;return S.has(Me.prefixKey)&&S.has(W.prefixKey)&&S.has(ft.prefixKey)?"visible":"hidden"})},[S,v]),yt.useEffect(()=>{const Oe=n.current;if(!Oe||!v)return;const ye=A?h.trim():"",{matchedNodeIds:Me,matchedLinkIds:W}=T;_n(Oe).selectAll(".graph-nodes > g").classed("node-match",ft=>ye.length>0&&Me.has(ft.id)).classed("node-dim",ft=>ye.length>0&&!Me.has(ft.id)),_n(Oe).selectAll(".graph-links > g").classed("link-match",ft=>ye.length>0&&W.has(nL(ft))).classed("link-dim",ft=>ye.length>0&&!W.has(nL(ft)))},[v,A,h,T]),t.length===0)return Ve.jsx("div",{className:"graph-empty",children:Ve.jsx("p",{children:"Parse some triples to see the network graph."})});const Ce=T.matchedNodeIds.size>0,Le=!A||!Ce,Ie=y.length===0;return Ve.jsxs("div",{ref:r,className:"graph-wrap graph-wrap-with-panel",children:[Ve.jsxs("div",{className:"graph-top-bar","aria-label":"Graph filter and layout",children:[Ve.jsxs("div",{className:"graph-filter-wrap","aria-label":"Filter which triples are in the graph",children:[Ve.jsx("input",{type:"search",className:"graph-filter-input",placeholder:"Filter triples",value:u,onChange:Oe=>l(Oe.target.value),"aria-label":"Include only triples containing this text",title:"Include only triples where subject, predicate, or object contains this text. Leave empty to show all."}),u.length>0&&Ve.jsx("button",{type:"button",className:"graph-filter-clear",onClick:()=>l(""),title:"Clear triple filter","aria-label":"Clear triple filter",children:""})]}),Ve.jsxs("div",{className:"graph-search-wrap","aria-label":"Search nodes and edges by label or IRI",children:[Ve.jsx("input",{type:"search",className:"graph-search-input",placeholder:"Search",value:d,onChange:Oe=>f(Oe.target.value),"aria-label":"Search nodes and edges by label or IRI",title:"Search by label or IRI"}),d.length>0&&Ve.jsx("button",{type:"button",className:"graph-search-clear",onClick:()=>f(""),title:"Clear search","aria-label":"Clear search",children:""})]}),v&&Ve.jsxs("div",{className:"graph-layout-controls","aria-label":"Graph layout options",children:[Ve.jsxs("div",{className:"graph-view-mode-buttons",role:"group","aria-label":"View mode",children:[Ve.jsx("button",{type:"button",className:`graph-layout-btn ${se==="2d"?"graph-layout-btn-active":""}`,onClick:()=>pe("2d"),"aria-pressed":se==="2d",title:"2D view","aria-label":"2D view",children:"2D"}),Ve.jsx("button",{type:"button",className:`graph-layout-btn ${se==="3d"?"graph-layout-btn-active":""}`,onClick:()=>pe("3d"),"aria-pressed":se==="3d",title:"3D view","aria-label":"3D view",children:"3D"})]}),se==="2d"&&Ve.jsxs(Ve.Fragment,{children:[Ve.jsx("button",{type:"button",className:"graph-layout-btn graph-layout-btn-icon",onClick:()=>{s.current=!1,c(Oe=>Oe+1)},title:"Redraw graph with animation","aria-label":"Redraw graph with animation",children:Ve.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("path",{d:"M23 4v6h-6"}),Ve.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]})}),Ve.jsx("div",{className:"graph-layout-buttons",role:"group","aria-label":"Layout type",children:["force","tree","radial"].map(Oe=>Ve.jsxs("button",{type:"button",className:`graph-layout-btn graph-layout-btn-icon ${R===Oe?"graph-layout-btn-active":""}`,onClick:()=>C(Oe),"aria-pressed":R===Oe,title:`${Oe.charAt(0).toUpperCase()+Oe.slice(1)} layout`,"aria-label":`${Oe.charAt(0).toUpperCase()+Oe.slice(1)} layout`,children:[Oe==="force"&&Ve.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("circle",{cx:"12",cy:"12",r:"2"}),Ve.jsx("path",{d:"M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"}),Ve.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),Ve.jsx("circle",{cx:"12",cy:"19",r:"1.5"}),Ve.jsx("circle",{cx:"5",cy:"12",r:"1.5"}),Ve.jsx("circle",{cx:"19",cy:"12",r:"1.5"})]}),Oe==="tree"&&Ve.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("path",{d:"M12 3v4"}),Ve.jsx("path",{d:"M8 11h8"}),Ve.jsx("path",{d:"M6 19h4"}),Ve.jsx("path",{d:"M14 19h4"}),Ve.jsx("path",{d:"M12 7v4"}),Ve.jsx("path",{d:"M10 11v4"}),Ve.jsx("path",{d:"M14 11v4"})]}),Oe==="radial"&&Ve.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("circle",{cx:"12",cy:"12",r:"3"}),Ve.jsx("path",{d:"M12 2v3M12 19v3M2 12h3M19 12h3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12"})]})]},Oe))}),R==="force"&&Ve.jsxs("div",{className:"graph-force-params",role:"group","aria-label":"Force layout parameters",children:[Ve.jsxs("label",{className:"graph-force-param",title:"Link distance",children:[Ve.jsx("span",{className:"graph-force-param-label",children:"Link"}),Ve.jsx("input",{type:"range",min:_C,max:mC,value:M,onChange:Oe=>{s.current=!1,U(Number(Oe.target.value))},"aria-valuemin":_C,"aria-valuemax":mC,"aria-valuenow":M,"aria-label":"Link distance"}),Ve.jsx("span",{className:"graph-force-param-value","aria-hidden":!0,children:M})]}),Ve.jsxs("label",{className:"graph-force-param",title:"Charge strength",children:[Ve.jsx("span",{className:"graph-force-param-label",children:"Charge"}),Ve.jsx("input",{type:"range",min:gC,max:yC,value:B,onChange:Oe=>{s.current=!1,G(Number(Oe.target.value))},"aria-valuemin":gC,"aria-valuemax":yC,"aria-valuenow":B,"aria-label":"Charge strength"}),Ve.jsx("span",{className:"graph-force-param-value","aria-hidden":!0,children:B})]})]}),(R==="tree"||R==="radial")&&Ve.jsx("div",{className:"graph-force-params",role:"group","aria-label":"Edge length",children:Ve.jsxs("label",{className:"graph-force-param",title:"Edge length for tree/radial layout",children:[Ve.jsx("span",{className:"graph-force-param-label",children:"Edge"}),Ve.jsx("input",{type:"range",min:bC,max:vC,step:.1,value:K,onChange:Oe=>$(Number(Oe.target.value)),"aria-valuemin":bC,"aria-valuemax":vC,"aria-valuenow":K,"aria-label":"Edge length"}),Ve.jsx("span",{className:"graph-force-param-value","aria-hidden":!0,children:K.toFixed(1)})]})})]})]})]}),Ie?Ve.jsxs("div",{className:"graph-empty graph-empty-filtered",children:[Ve.jsx("p",{children:"No triples match the filter. Try loosening the filter."}),Ve.jsx("button",{type:"button",className:"graph-filter-clear-btn",onClick:()=>l(""),children:"Clear filter"})]}):se==="3d"&&v?Ve.jsx(LZe,{graphData:v,enabledPrefixes:S,onSelectNode:g,selectedNodeId:_,fitRef:i}):Ve.jsx("svg",{ref:n,className:"graph-svg"}),v&&v.prefixKeys.length>0&&Ve.jsxs("div",{className:"graph-legend","aria-label":"Filter by IRI prefix",children:[Ve.jsx("span",{className:"graph-legend-title",children:"Show prefix"}),v.prefixKeys.map(Oe=>{const{fill:ye,text:Me}=v.colourMap.get(Oe)??{fill:dE,text:"#111"},W=S.has(Oe);return Ve.jsxs("label",{className:"graph-legend-item",children:[Ve.jsx("input",{type:"checkbox",className:"graph-legend-checkbox",checked:W,onChange:()=>we(Oe),"aria-label":`Show or hide ${Oe} nodes and edges`}),Ve.jsx("span",{className:"graph-legend-swatch",style:{backgroundColor:ye,color:Me,opacity:W?1:.4},"aria-hidden":!0,children:W?"":""}),Ve.jsx("span",{className:"graph-legend-label",children:Oe})]},Oe)})]}),v&&Ve.jsxs("div",{className:"graph-overlay-buttons",ref:N,children:[se==="2d"&&Ve.jsxs(Ve.Fragment,{children:[Ve.jsx("button",{type:"button",className:"graph-export-btn",onClick:()=>F(Oe=>!Oe),title:"Export graph","aria-label":"Export graph","aria-expanded":j,"aria-haspopup":"true",children:Ve.jsx("svg",{className:"graph-export-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Ve.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}),j&&Ve.jsxs("div",{className:"graph-export-menu",role:"menu",children:[Ve.jsx("button",{type:"button",role:"menuitem",className:"graph-export-menuitem",onClick:()=>{n.current&&QZe(n.current),F(!1)},children:"Export as SVG"}),Ve.jsx("button",{type:"button",role:"menuitem",className:"graph-export-menuitem",onClick:()=>{n.current&&WZe(n.current),F(!1)},children:"Export as PNG"})]})]}),Ve.jsx("button",{type:"button",className:"graph-fit-btn",onClick:()=>{var Oe;return(Oe=i.current)==null?void 0:Oe.call(i)},title:"Fit to window","aria-label":"Fit to window",children:Ve.jsx("svg",{className:"graph-fit-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Ve.jsx("path",{d:"M4 4v5h5M4 4l5 5M20 4h-5v5M20 4l-5 5M20 20v-5h-5M20 20l-5-5M4 20h5v-5M4 20l5-5"})})}),se==="2d"&&Ve.jsx("button",{type:"button",className:"graph-focus-matches-btn graph-focus-matches-btn-icon",onClick:()=>{var Oe;return(Oe=a.current)==null?void 0:Oe.call(a,T.matchedNodeIds)},disabled:Le,title:Le?"Enter a search and get matches to focus":"Focus on search matches","aria-label":"Focus on search matches",children:Ve.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("circle",{cx:"11",cy:"11",r:"8"}),Ve.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]}),_&&v&&Ve.jsx(WQe,{nodeId:_,triples:y,prefixes:e,onClose:()=>g(null)})]})}const aZ="ttl-vis-sparql-query";function XZe({isOpen:t,onClose:e,onExecute:r,initialQuery:n}){const[i,a]=yt.useState(()=>{try{return localStorage.getItem(aZ)||n||""}catch{return n||""}}),[s,o]=yt.useState(!1),[c,u]=yt.useState(null),l=yt.useRef(null);yt.useEffect(()=>{t&&l.current&&l.current.focus()},[t]),yt.useEffect(()=>{try{i&&localStorage.setItem(aZ,i)}catch{}},[i]);const d=async()=>{if(!i.trim()){u("Please enter a SPARQL query");return}o(!0),u(null);try{await r(i)}catch(p){u(p instanceof Error?p.message:"Failed to execute query")}finally{o(!1)}},f=async()=>{await d(),c||e()},h=p=>{p.key==="Escape"?e():p.key==="Enter"&&(p.metaKey||p.ctrlKey)&&(p.preventDefault(),d())};return t?Ve.jsx("div",{className:"sparql-modal-overlay",onClick:e,children:Ve.jsxs("div",{className:"sparql-modal",onClick:p=>p.stopPropagation(),children:[Ve.jsxs("div",{className:"sparql-modal-header",children:[Ve.jsx("h2",{className:"sparql-modal-title",children:"SPARQL Query"}),Ve.jsx("button",{type:"button",className:"sparql-modal-close",onClick:e,"aria-label":"Close",title:"Close (Esc)",children:""})]}),Ve.jsxs("div",{className:"sparql-modal-body",children:[Ve.jsx("textarea",{ref:l,className:"sparql-modal-textarea",value:i,onChange:p=>{a(p.target.value),u(null)},onKeyDown:h,placeholder:"Enter SPARQL query (e.g., SELECT * WHERE { ?s ?p ?o } LIMIT 10)",spellCheck:!1,rows:12}),c&&Ve.jsxs("div",{className:"sparql-modal-error",role:"alert",children:[Ve.jsx("strong",{children:"Error:"})," ",c]})]}),Ve.jsxs("div",{className:"sparql-modal-footer",children:[Ve.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,disabled:s,children:"Close"}),Ve.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,disabled:s||!i.trim(),"aria-busy":s,children:s?"Running":"Run"}),Ve.jsx("button",{type:"button",className:"btn btn-primary",onClick:f,disabled:s||!i.trim(),"aria-busy":s,children:"Run & Close"})]})]})}):null}const JZe=new Set(["subject","predicate","object"]);function YZe(t){if(t.length!==3||!t.map(n=>n.toLowerCase()).every(n=>JZe.has(n)))return null;const r={};return t.forEach(n=>r[n.toLowerCase()]=n),{subject:r.subject,predicate:r.predicate,object:r.object}}function $Ze(t){const e=(t||"").trim();return e.length>0&&!e.startsWith("http://")&&!e.startsWith("https://")&&!e.startsWith("_:")}function ZZe(t){const e=t||"";if(!$Ze(e))return{object:e,objectIsLiteral:!1};let n,i,a,s=e;const o=e.match(/@([a-zA-Z][a-zA-Z0-9-]*)$/);o&&(n=o[1],s=e.slice(0,-o[0].length));const c=s.match(/\^\^(.+)$/);return c&&(i=c[1],s=s.slice(0,-c[0].length)),(n||i)&&(a=s),{object:e,objectIsLiteral:!0,...n&&{objectLiteralLanguage:n},...i&&{objectLiteralDatatype:i},...a!==void 0&&{objectLexicalValue:a}}}function eet(t,e){return t.map(r=>{const n=r[e.subject]??"",i=r[e.predicate]??"",a=r[e.object]??"",s=ZZe(a);return{subject:n,predicate:i,...s}})}function tet({result:t}){if(!t)return Ve.jsx("div",{className:"query-results-empty",children:Ve.jsx("p",{children:"Run a SPARQL query to see results here."})});if(t.type==="triples")return t.triples.length===0?Ve.jsx("div",{className:"query-results-empty",children:Ve.jsx("p",{children:"Query returned no triples."})}):Ve.jsx("div",{className:"query-results-graph",children:Ve.jsx(tG,{triples:t.triples,prefixes:t.prefixes})});if(t.rows.length===0)return Ve.jsx("div",{className:"query-results-empty",children:Ve.jsx("p",{children:"Query returned no results."})});const e=YZe(t.variables);if(e){const r=eet(t.rows,e);return Ve.jsx("div",{className:"query-results-graph",children:Ve.jsx(tG,{triples:r,prefixes:t.prefixes})})}return Ve.jsxs("div",{className:"query-results-table-wrap",children:[Ve.jsxs("table",{className:"query-results-table",children:[Ve.jsx("thead",{children:Ve.jsx("tr",{children:t.variables.map(r=>Ve.jsx("th",{className:"query-results-th",children:r},r))})}),Ve.jsx("tbody",{children:t.rows.map((r,n)=>Ve.jsx("tr",{className:"query-results-tr",children:t.variables.map(i=>Ve.jsx("td",{className:"query-results-td",children:r[i]||""},i))},n))})]}),Ve.jsxs("div",{className:"query-results-count",children:[t.rows.length," ",t.rows.length===1?"result":"results"]})]})}var xEe={},NF={},qk={},rO={},EEe={},FF={},iL={},id={};/**
 * @license
 * MIT License
 * 
 * Copyright (c) 2014-present, Lee Byron and other contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var BN="@@__IMMUTABLE_INDEXED__@@";function _a(t){return!!(t&&t[BN])}var qN="@@__IMMUTABLE_KEYED__@@";function Gr(t){return!!(t&&t[qN])}function MF(t){return Gr(t)||_a(t)}var IEe="@@__IMMUTABLE_ITERABLE__@@";function ma(t){return!!(t&&t[IEe])}var ei=function(e){return ma(e)?e:Ri(e)},ms=function(t){function e(r){return Gr(r)?r:jl(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ei),If=function(t){function e(r){return _a(r)?r:ys(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ei),r0=function(t){function e(r){return ma(r)&&!MF(r)?r:s0(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ei);ei.Keyed=ms;ei.Indexed=If;ei.Set=r0;var n0=0,Ba=1,qa=2,rG=typeof Symbol=="function"&&Symbol.iterator,OEe="@@iterator",DF=rG||OEe,vr=function(e){this.next=e};vr.prototype.toString=function(){return"[Iterator]"};vr.KEYS=n0;vr.VALUES=Ba;vr.ENTRIES=qa;vr.prototype.inspect=vr.prototype.toSource=function(){return this.toString()};vr.prototype[DF]=function(){return this};function an(t,e,r,n){var i=t===n0?e:t===Ba?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function Oi(){return{value:void 0,done:!0}}function Uk(t){return Array.isArray(t)?!0:!!CF(t)}function sZ(t){return!!(t&&typeof t.next=="function")}function nG(t){var e=CF(t);return e&&e.call(t)}function CF(t){var e=t&&(rG&&t[rG]||t[OEe]);if(typeof e=="function")return e}function ret(t){var e=CF(t);return e&&e===t.entries}function net(t){var e=CF(t);return e&&e===t.keys}var nO="delete",Lr=5,Ma=1<<Lr,Hi=Ma-1,gr={};function iG(){return{value:!1}}function cs(t){t&&(t.value=!0)}function Vk(){}function Dp(t){return t.size===void 0&&(t.size=t.__iterate(REe)),t.size}function xl(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r}return e<0?Dp(t)+e:e}function REe(){return!0}function iO(t,e,r){return(t===0&&!NEe(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function i0(t,e){return PEe(t,e,0)}function aO(t,e){return PEe(t,e,e)}function PEe(t,e,r){return t===void 0?r:NEe(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function NEe(t){return t<0||t===0&&1/t===-1/0}var FEe="@@__IMMUTABLE_RECORD__@@";function Ll(t){return!!(t&&t[FEe])}function gs(t){return ma(t)||Ll(t)}var El="@@__IMMUTABLE_ORDERED__@@";function zs(t){return!!(t&&t[El])}var MEe="@@__IMMUTABLE_SEQ__@@";function LF(t){return!!(t&&t[MEe])}var a0=Object.prototype.hasOwnProperty;function Gk(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var Ri=function(t){function e(r){return r==null?kk():gs(r)?r.toSeq():aet(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,i){var a=this._cache;if(a){for(var s=a.length,o=0;o!==s;){var c=a[i?s-++o:o++];if(n(c[1],c[0],this)===!1)break}return o}return this.__iterateUncached(n,i)},e.prototype.__iterator=function(n,i){var a=this._cache;if(a){var s=a.length,o=0;return new vr(function(){if(o===s)return Oi();var c=a[i?s-++o:o++];return an(n,c[0],c[1])})}return this.__iteratorUncached(n,i)},e}(ei),jl=function(t){function e(r){return r==null?kk().toKeyedSeq():ma(r)?Gr(r)?r.toSeq():r.fromEntrySeq():Ll(r)?r.toSeq():zk(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Ri),ys=function(t){function e(r){return r==null?kk():ma(r)?Gr(r)?r.entrySeq():r.toIndexedSeq():Ll(r)?r.toSeq().entrySeq():DEe(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Ri),s0=function(t){function e(r){return(ma(r)&&!MF(r)?r:ys(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Ri);Ri.isSeq=LF;Ri.Keyed=jl;Ri.Set=s0;Ri.Indexed=ys;Ri.prototype[MEe]=!0;var Cp=function(t){function e(r){this._array=r,this.size=r.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,i){return this.has(n)?this._array[xl(this,n)]:i},e.prototype.__iterate=function(n,i){for(var a=this._array,s=a.length,o=0;o!==s;){var c=i?s-++o:o++;if(n(a[c],c,this)===!1)break}return o},e.prototype.__iterator=function(n,i){var a=this._array,s=a.length,o=0;return new vr(function(){if(o===s)return Oi();var c=i?s-++o:o++;return an(n,c,a[c])})},e}(ys),Hk=function(t){function e(r){var n=Object.keys(r).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r):[]);this._object=r,this._keys=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,i){return i!==void 0&&!this.has(n)?i:this._object[n]},e.prototype.has=function(n){return a0.call(this._object,n)},e.prototype.__iterate=function(n,i){for(var a=this._object,s=this._keys,o=s.length,c=0;c!==o;){var u=s[i?o-++c:c++];if(n(a[u],u,this)===!1)break}return c},e.prototype.__iterator=function(n,i){var a=this._object,s=this._keys,o=s.length,c=0;return new vr(function(){if(c===o)return Oi();var u=s[i?o-++c:c++];return an(n,u,a[u])})},e}(jl);Hk.prototype[El]=!0;var iet=function(t){function e(r){this._collection=r,this.size=r.length||r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,i){if(i)return this.cacheResult().__iterate(n,i);var a=this._collection,s=nG(a),o=0;if(sZ(s))for(var c;!(c=s.next()).done&&n(c.value,o++,this)!==!1;);return o},e.prototype.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var a=this._collection,s=nG(a);if(!sZ(s))return new vr(Oi);var o=0;return new vr(function(){var c=s.next();return c.done?c:an(n,o++,c.value)})},e}(ys),oZ;function kk(){return oZ||(oZ=new Cp([]))}function zk(t){var e=Qk(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new Hk(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function DEe(t){var e=Qk(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function aet(t){var e=Qk(t);if(e)return ret(t)?e.fromEntrySeq():net(t)?e.toSetSeq():e;if(typeof t=="object")return new Hk(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function Qk(t){return Gk(t)?new Cp(t):Uk(t)?new iet(t):void 0}function sO(){return this.__ensureOwner()}function oO(){return this.__ownerID?this:this.__ensureOwner(new Vk)}var b_=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,i=r&65535;return n*i+((e>>>16)*i+n*(r>>>16)<<16>>>0)|0};function jF(t){return t>>>1&1073741824|t&3221225471}var set=Object.prototype.valueOf;function ua(t){if(t==null)return uZ(t);if(typeof t.hashCode=="function")return jF(t.hashCode(t));var e=het(t);if(e==null)return uZ(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return oet(e);case"string":return e.length>pet?uet(e):aG(e);case"object":case"function":return det(e);case"symbol":return cet(e);default:if(typeof e.toString=="function")return aG(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function uZ(t){return t===null?1108378658:1108378659}function oet(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return jF(e)}function uet(t){var e=oL[t];return e===void 0&&(e=aG(t),sL===_et&&(sL=0,oL={}),sL++,oL[t]=e),e}function aG(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return jF(e)}function cet(t){var e=dZ[t];return e!==void 0||(e=CEe(),dZ[t]=e),e}function det(t){var e;if(sG&&(e=oG.get(t),e!==void 0)||(e=t[jd],e!==void 0)||!lZ&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[jd],e!==void 0||(e=fet(t),e!==void 0)))return e;if(e=CEe(),sG)oG.set(t,e);else{if(cZ!==void 0&&cZ(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(lZ)Object.defineProperty(t,jd,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[jd]=e;else if(t.nodeType!==void 0)t[jd]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var cZ=Object.isExtensible,lZ=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function fet(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function het(t){return t.valueOf!==set&&typeof t.valueOf=="function"?t.valueOf(t):t}function CEe(){var t=++aL;return aL&1073741824&&(aL=0),t}var sG=typeof WeakMap=="function",oG;sG&&(oG=new WeakMap);var dZ=Object.create(null),aL=0,jd="__immutablehash__";typeof Symbol=="function"&&(jd=Symbol(jd));var pet=16,_et=255,sL=0,oL={},BF=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,i){return this._iter.get(n,i)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,i=Wk(this,!0);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().reverse()}),i},e.prototype.map=function(n,i){var a=this,s=UEe(this,n,i);return this._useKeys||(s.valueSeq=function(){return a._iter.toSeq().map(n,i)}),s},e.prototype.__iterate=function(n,i){var a=this;return this._iter.__iterate(function(s,o){return n(s,o,a)},i)},e.prototype.__iterator=function(n,i){return this._iter.__iterator(n,i)},e}(jl);BF.prototype[El]=!0;var LEe=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,i){var a=this,s=0;return i&&Dp(this),this._iter.__iterate(function(o){return n(o,i?a.size-++s:s++,a)},i)},e.prototype.__iterator=function(n,i){var a=this,s=this._iter.__iterator(Ba,i),o=0;return i&&Dp(this),new vr(function(){var c=s.next();return c.done?c:an(n,i?a.size-++o:o++,c.value,c)})},e}(ys),jEe=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,i){var a=this;return this._iter.__iterate(function(s){return n(s,s,a)},i)},e.prototype.__iterator=function(n,i){var a=this._iter.__iterator(Ba,i);return new vr(function(){var s=a.next();return s.done?s:an(n,s.value,s.value,s)})},e}(s0),BEe=function(t){function e(r){this._iter=r,this.size=r.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,i){var a=this;return this._iter.__iterate(function(s){if(s){hZ(s);var o=ma(s);return n(o?s.get(1):s[1],o?s.get(0):s[0],a)}},i)},e.prototype.__iterator=function(n,i){var a=this._iter.__iterator(Ba,i);return new vr(function(){for(;;){var s=a.next();if(s.done)return s;var o=s.value;if(o){hZ(o);var c=ma(o);return an(n,c?o.get(0):o[0],c?o.get(1):o[1],s)}}})},e}(jl);LEe.prototype.cacheResult=BF.prototype.cacheResult=jEe.prototype.cacheResult=BEe.prototype.cacheResult=Jk;function qEe(t){var e=Qo(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=Jk,e.__iterateUncached=function(r,n){var i=this;return t.__iterate(function(a,s){return r(s,a,i)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===qa){var i=t.__iterator(r,n);return new vr(function(){var a=i.next();if(!a.done){var s=a.value[0];a.value[0]=a.value[1],a.value[1]=s}return a})}return t.__iterator(r===Ba?n0:Ba,n)},e}function UEe(t,e,r){var n=Qo(t);return n.size=t.size,n.has=function(i){return t.has(i)},n.get=function(i,a){var s=t.get(i,gr);return s===gr?a:e.call(r,s,i,t)},n.__iterateUncached=function(i,a){var s=this;return t.__iterate(function(o,c,u){return i(e.call(r,o,c,u),c,s)!==!1},a)},n.__iteratorUncached=function(i,a){var s=t.__iterator(qa,a);return new vr(function(){var o=s.next();if(o.done)return o;var c=o.value,u=c[0];return an(i,u,e.call(r,c[1],u,t),o)})},n}function Wk(t,e){var r=this,n=Qo(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var i=qEe(t);return i.reverse=function(){return t.flip()},i}),n.get=function(i,a){return t.get(e?i:-1-i,a)},n.has=function(i){return t.has(e?i:-1-i)},n.includes=function(i){return t.includes(i)},n.cacheResult=Jk,n.__iterate=function(i,a){var s=this,o=0;return a&&Dp(t),t.__iterate(function(c,u){return i(c,e?u:a?s.size-++o:o++,s)},!a)},n.__iterator=function(i,a){var s=0;a&&Dp(t);var o=t.__iterator(qa,!a);return new vr(function(){var c=o.next();if(c.done)return c;var u=c.value;return an(i,e?u[0]:a?r.size-++s:s++,u[1],c)})},n}function VEe(t,e,r,n){var i=Qo(t);return n&&(i.has=function(a){var s=t.get(a,gr);return s!==gr&&!!e.call(r,s,a,t)},i.get=function(a,s){var o=t.get(a,gr);return o!==gr&&e.call(r,o,a,t)?o:s}),i.__iterateUncached=function(a,s){var o=this,c=0;return t.__iterate(function(u,l,d){if(e.call(r,u,l,d))return c++,a(u,n?l:c-1,o)},s),c},i.__iteratorUncached=function(a,s){var o=t.__iterator(qa,s),c=0;return new vr(function(){for(;;){var u=o.next();if(u.done)return u;var l=u.value,d=l[0],f=l[1];if(e.call(r,f,d,t))return an(a,n?d:c++,f,u)}})},i}function met(t,e,r){var n=Of().asMutable();return t.__iterate(function(i,a){n.update(e.call(r,i,a,t),0,function(s){return s+1})}),n.asImmutable()}function get(t,e,r){var n=Gr(t),i=(zs(t)?Go():Of()).asMutable();t.__iterate(function(s,o){i.update(e.call(r,s,o,t),function(c){return c=c||[],c.push(n?[o,s]:s),c})});var a=Xk(t);return i.map(function(s){return Cr(t,a(s))}).asImmutable()}function yet(t,e,r){var n=Gr(t),i=[[],[]];t.__iterate(function(s,o){i[e.call(r,s,o,t)?1:0].push(n?[o,s]:s)});var a=Xk(t);return i.map(function(s){return Cr(t,a(s))})}function Kk(t,e,r,n){var i=t.size;if(iO(e,r,i))return t;if(typeof i>"u"&&(e<0||r<0))return Kk(t.toSeq().cacheResult(),e,r,n);var a=i0(e,i),s=aO(r,i),o=s-a,c;o===o&&(c=o<0?0:o);var u=Qo(t);return u.size=c===0?c:t.size&&c||void 0,!n&&LF(t)&&c>=0&&(u.get=function(l,d){return l=xl(this,l),l>=0&&l<c?t.get(l+a,d):d}),u.__iterateUncached=function(l,d){var f=this;if(c===0)return 0;if(d)return this.cacheResult().__iterate(l,d);var h=0,p=!0,_=0;return t.__iterate(function(g,m){if(!(p&&(p=h++<a)))return _++,l(g,n?m:_-1,f)!==!1&&_!==c}),_},u.__iteratorUncached=function(l,d){if(c!==0&&d)return this.cacheResult().__iterator(l,d);if(c===0)return new vr(Oi);var f=t.__iterator(l,d),h=0,p=0;return new vr(function(){for(;h++<a;)f.next();if(++p>c)return Oi();var _=f.next();return n||l===Ba||_.done?_:l===n0?an(l,p-1,void 0,_):an(l,p-1,_.value[1],_)})},u}function bet(t,e,r){var n=Qo(t);return n.__iterateUncached=function(i,a){var s=this;if(a)return this.cacheResult().__iterate(i,a);var o=0;return t.__iterate(function(c,u,l){return e.call(r,c,u,l)&&++o&&i(c,u,s)}),o},n.__iteratorUncached=function(i,a){var s=this;if(a)return this.cacheResult().__iterator(i,a);var o=t.__iterator(qa,a),c=!0;return new vr(function(){if(!c)return Oi();var u=o.next();if(u.done)return u;var l=u.value,d=l[0],f=l[1];return e.call(r,f,d,s)?i===qa?u:an(i,d,f,u):(c=!1,Oi())})},n}function GEe(t,e,r,n){var i=Qo(t);return i.__iterateUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterate(a,s);var c=!0,u=0;return t.__iterate(function(l,d,f){if(!(c&&(c=e.call(r,l,d,f))))return u++,a(l,n?d:u-1,o)}),u},i.__iteratorUncached=function(a,s){var o=this;if(s)return this.cacheResult().__iterator(a,s);var c=t.__iterator(qa,s),u=!0,l=0;return new vr(function(){var d,f,h;do{if(d=c.next(),d.done)return n||a===Ba?d:a===n0?an(a,l++,void 0,d):an(a,l++,d.value[1],d);var p=d.value;f=p[0],h=p[1],u&&(u=e.call(r,h,f,o))}while(u);return a===qa?d:an(a,f,h,d)})},i}var vet=function(t){function e(r){this._wrappedIterables=r.flatMap(function(n){return n._wrappedIterables?n._wrappedIterables:[n]}),this.size=this._wrappedIterables.reduce(function(n,i){if(n!==void 0){var a=i.size;if(a!==void 0)return n+a}},0),this[qN]=this._wrappedIterables[0][qN],this[BN]=this._wrappedIterables[0][BN],this[El]=this._wrappedIterables[0][El]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,i){if(this._wrappedIterables.length!==0){if(i)return this.cacheResult().__iterate(n,i);for(var a=0,s=Gr(this),o=s?qa:Ba,c=this._wrappedIterables[a].__iterator(o,i),u=!0,l=0;u;){for(var d=c.next();d.done;){if(a++,a===this._wrappedIterables.length)return l;c=this._wrappedIterables[a].__iterator(o,i),d=c.next()}var f=s?n(d.value[1],d.value[0],this):n(d.value,l,this);u=f!==!1,l++}return l}},e.prototype.__iteratorUncached=function(n,i){var a=this;if(this._wrappedIterables.length===0)return new vr(Oi);if(i)return this.cacheResult().__iterator(n,i);var s=0,o=this._wrappedIterables[s].__iterator(n,i);return new vr(function(){for(var c=o.next();c.done;){if(s++,s===a._wrappedIterables.length)return c;o=a._wrappedIterables[s].__iterator(n,i),c=o.next()}return c})},e}(Ri);function Aet(t,e){var r=Gr(t),n=[t].concat(e).map(function(a){return ma(a)?r&&(a=ms(a)):a=r?zk(a):DEe(Array.isArray(a)?a:[a]),a}).filter(function(a){return a.size!==0});if(n.length===0)return t;if(n.length===1){var i=n[0];if(i===t||r&&Gr(i)||_a(t)&&_a(i))return i}return new vet(n)}function HEe(t,e,r){var n=Qo(t);return n.__iterateUncached=function(i,a){if(a)return this.cacheResult().__iterate(i,a);var s=0,o=!1;function c(u,l){u.__iterate(function(d,f){return(!e||l<e)&&ma(d)?c(d,l+1):(s++,i(d,r?f:s-1,n)===!1&&(o=!0)),!o},a)}return c(t,0),s},n.__iteratorUncached=function(i,a){if(a)return this.cacheResult().__iterator(i,a);var s=t.__iterator(i,a),o=[],c=0;return new vr(function(){for(;s;){var u=s.next();if(u.done!==!1){s=o.pop();continue}var l=u.value;if(i===qa&&(l=l[1]),(!e||o.length<e)&&ma(l))o.push(s),s=l.__iterator(i,a);else return r?u:an(i,c++,l,u)}return Oi()})},n}function Tet(t,e,r){var n=Xk(t);return t.toSeq().map(function(i,a){return n(e.call(r,i,a,t))}).flatten(!0)}function wet(t,e){var r=Qo(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,i){var a=this,s=0;return t.__iterate(function(o){return(!s||n(e,s++,a)!==!1)&&n(o,s++,a)!==!1},i),s},r.__iteratorUncached=function(n,i){var a=t.__iterator(Ba,i),s=0,o;return new vr(function(){return(!o||s%2)&&(o=a.next(),o.done)?o:s%2?an(n,s++,e):an(n,s++,o.value,o)})},r}function Lp(t,e,r){e||(e=kEe);var n=Gr(t),i=0,a=t.toSeq().map(function(s,o){return[o,s,i++,r?r(s,o,t):s]}).valueSeq().toArray();return a.sort(function(s,o){return e(s[3],o[3])||s[2]-o[2]}).forEach(n?function(s,o){a[o].length=2}:function(s,o){a[o]=s[1]}),n?jl(a):_a(t)?ys(a):s0(a)}function OR(t,e,r){if(e||(e=kEe),r){var n=t.toSeq().map(function(i,a){return[i,r(i,a,t)]}).reduce(function(i,a){return fZ(e,i[1],a[1])?a:i});return n&&n[0]}return t.reduce(function(i,a){return fZ(e,i,a)?a:i})}function fZ(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function RR(t,e,r,n){var i=Qo(t),a=new Cp(r).map(function(s){return s.size});return i.size=n?a.max():a.min(),i.__iterate=function(s,o){for(var c=this.__iterator(Ba,o),u,l=0;!(u=c.next()).done&&s(u.value,l++,this)!==!1;);return l},i.__iteratorUncached=function(s,o){var c=r.map(function(d){return d=ei(d),nG(o?d.reverse():d)}),u=0,l=!1;return new vr(function(){var d;return l||(d=c.map(function(f){return f.next()}),l=n?d.every(function(f){return f.done}):d.some(function(f){return f.done})),l?Oi():an(s,u++,e.apply(null,d.map(function(f){return f.value})))})},i}function Cr(t,e){return t===e?t:LF(t)?e:t.constructor(e)}function hZ(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Xk(t){return Gr(t)?ms:_a(t)?If:r0}function Qo(t){return Object.create((Gr(t)?jl:_a(t)?ys:s0).prototype)}function Jk(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Ri.prototype.cacheResult.call(this)}function kEe(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function uG(t){return!!(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function Yn(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(uG(t)&&uG(e)&&t.equals(e))}function Yk(t,e,r,n){return Rf(t,[e],r,n)}function zEe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return WEe(this,t)}function QEe(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return WEe(this,e,t)}function WEe(t,e,r){for(var n=[],i=0;i<e.length;i++){var a=ms(e[i]);a.size!==0&&n.push(a)}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?Ll(t)?t:t.constructor(n[0]):t.withMutations(function(s){for(var o=r?function(u,l){Yk(s,l,gr,function(d){return d===gr?u:r(d,u,l)})}:function(u,l){s.set(l,u)},c=0;c<n.length;c++)n[c].forEach(o)})}var xet=Object.prototype.toString;function $k(t){if(!t||typeof t!="object"||xet.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e,n=Object.getPrototypeOf(e);n!==null;)r=n,n=Object.getPrototypeOf(r);return r===e}function Il(t){return typeof t=="object"&&(gs(t)||Array.isArray(t)||$k(t))}function Io(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function UN(t){if(Array.isArray(t))return Io(t);var e={};for(var r in t)a0.call(t,r)&&(e[r]=t[r]);return e}function Eet(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return cO(t,e)}function Iet(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return cO(e,r,t)}function Oet(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return uO(t,e)}function Ret(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return uO(e,r,t)}function uO(t,e,r){return cO(t,e,Pet(r))}function cO(t,e,r){if(!Il(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(gs(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),i=t,a=n?If:ms,s=n?function(c){i===t&&(i=UN(i)),i.push(c)}:function(c,u){var l=a0.call(i,u),d=l&&r?r(i[u],c,u):c;(!l||d!==i[u])&&(i===t&&(i=UN(i)),i[u]=d)},o=0;o<e.length;o++)a(e[o]).forEach(s);return i}function Pet(t){function e(r,n,i){return Il(r)&&Il(n)&&Net(r,n)?cO(r,[n],e):t?t(r,n,i):n}return e}function Net(t,e){var r=Ri(t),n=Ri(e);return _a(r)===_a(n)&&Gr(r)===Gr(n)}function KEe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return uO(this,t)}function XEe(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return uO(this,e,t)}function Zk(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Rf(this,t,Po(),function(n){return uO(n,e)})}function ez(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Rf(this,t,Po(),function(n){return cO(n,e)})}function JEe(t,e,r){return Rf(t,e,gr,function(){return r})}function tz(t,e){return JEe(this,t,e)}function rz(t,e,r){return arguments.length===1?t(this):Yk(this,t,e,r)}function nz(t,e,r){return Rf(this,t,e,r)}function iz(){return this.__altered}function lO(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}var YEe="@@__IMMUTABLE_MAP__@@";function qF(t){return!!(t&&t[YEe])}function KE(t,e){if(!t)throw new Error(e)}function Pa(t){KE(t!==1/0,"Cannot perform this action with an infinite size.")}var Of=function(t){function e(r){return r==null?Po():qF(r)&&!zs(r)?r:Po().withMutations(function(n){var i=t(r);Pa(i.size),i.forEach(function(a,s){return n.set(s,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,i){return this._root?this._root.get(0,void 0,n,i):i},e.prototype.set=function(n,i){return mZ(this,n,i)},e.prototype.remove=function(n){return mZ(this,n,gr)},e.prototype.deleteAll=function(n){var i=ei(n);return i.size===0?this:this.withMutations(function(a){i.forEach(function(s){return a.remove(s)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Po()},e.prototype.sort=function(n){return Go(Lp(this,n))},e.prototype.sortBy=function(n,i){return Go(Lp(this,i,n))},e.prototype.map=function(n,i){var a=this;return this.withMutations(function(s){s.forEach(function(o,c){s.set(c,n.call(i,o,c,a))})})},e.prototype.__iterator=function(n,i){return new Fet(this,n,i)},e.prototype.__iterate=function(n,i){var a=this,s=0;return this._root&&this._root.iterate(function(o){return s++,n(o[1],o[0],a)},i),s},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?az(this.size,this._root,n,this.__hash):this.size===0?Po():(this.__ownerID=n,this.__altered=!1,this)},e}(ms);Of.isMap=qF;var sn=Of.prototype;sn[YEe]=!0;sn[nO]=sn.remove;sn.removeAll=sn.deleteAll;sn.setIn=tz;sn.removeIn=sn.deleteIn=cz;sn.update=rz;sn.updateIn=nz;sn.merge=sn.concat=zEe;sn.mergeWith=QEe;sn.mergeDeep=KEe;sn.mergeDeepWith=XEe;sn.mergeIn=ez;sn.mergeDeepIn=Zk;sn.withMutations=lO;sn.wasAltered=iz;sn.asImmutable=sO;sn["@@transducer/init"]=sn.asMutable=oO;sn["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};sn["@@transducer/result"]=function(t){return t.asImmutable()};var OI=function(e,r){this.ownerID=e,this.entries=r};OI.prototype.get=function(e,r,n,i){for(var a=this.entries,s=0,o=a.length;s<o;s++)if(Yn(n,a[s][0]))return a[s][1];return i};OI.prototype.update=function(e,r,n,i,a,s,o){for(var c=a===gr,u=this.entries,l=0,d=u.length;l<d&&!Yn(i,u[l][0]);l++);var f=l<d;if(f?u[l][1]===a:c)return this;if(cs(o),(c||!f)&&cs(s),!(c&&u.length===1)){if(!f&&!c&&u.length>=Bet)return Met(e,u,i,a);var h=e&&e===this.ownerID,p=h?u:Io(u);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[i,a]:p.push([i,a]),h?(this.entries=p,this):new OI(e,p)}};var jp=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n};jp.prototype.get=function(e,r,n,i){r===void 0&&(r=ua(n));var a=1<<((e===0?r:r>>>e)&Hi),s=this.bitmap;return s&a?this.nodes[$Ee(s&a-1)].get(e+Lr,r,n,i):i};jp.prototype.update=function(e,r,n,i,a,s,o){n===void 0&&(n=ua(i));var c=(r===0?n:n>>>r)&Hi,u=1<<c,l=this.bitmap,d=(l&u)!==0;if(!d&&a===gr)return this;var f=$Ee(l&u-1),h=this.nodes,p=d?h[f]:void 0,_=sz(p,e,r+Lr,n,i,a,s,o);if(_===p)return this;if(!d&&_&&h.length>=qet)return Cet(e,h,l,c,_);if(d&&!_&&h.length===2&&gZ(h[f^1]))return h[f^1];if(d&&_&&h.length===1&&gZ(_))return _;var g=e&&e===this.ownerID,m=d?_?l:l^u:l|u,y=d?_?ZEe(h,f,_,g):jet(h,f,g):Let(h,f,_,g);return g?(this.bitmap=m,this.nodes=y,this):new jp(e,m,y)};var RI=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n};RI.prototype.get=function(e,r,n,i){r===void 0&&(r=ua(n));var a=(e===0?r:r>>>e)&Hi,s=this.nodes[a];return s?s.get(e+Lr,r,n,i):i};RI.prototype.update=function(e,r,n,i,a,s,o){n===void 0&&(n=ua(i));var c=(r===0?n:n>>>r)&Hi,u=a===gr,l=this.nodes,d=l[c];if(u&&!d)return this;var f=sz(d,e,r+Lr,n,i,a,s,o);if(f===d)return this;var h=this.count;if(!d)h++;else if(!f&&(h--,h<Uet))return Det(e,l,h,c);var p=e&&e===this.ownerID,_=ZEe(l,c,f,p);return p?(this.count=h,this.nodes=_,this):new RI(e,h,_)};var Bp=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n};Bp.prototype.get=function(e,r,n,i){for(var a=this.entries,s=0,o=a.length;s<o;s++)if(Yn(n,a[s][0]))return a[s][1];return i};Bp.prototype.update=function(e,r,n,i,a,s,o){n===void 0&&(n=ua(i));var c=a===gr;if(n!==this.keyHash)return c?this:(cs(o),cs(s),oz(this,e,r,n,[i,a]));for(var u=this.entries,l=0,d=u.length;l<d&&!Yn(i,u[l][0]);l++);var f=l<d;if(f?u[l][1]===a:c)return this;if(cs(o),(c||!f)&&cs(s),c&&d===2)return new ku(e,this.keyHash,u[l^1]);var h=e&&e===this.ownerID,p=h?u:Io(u);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[i,a]:p.push([i,a]),h?(this.entries=p,this):new Bp(e,this.keyHash,p)};var ku=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n};ku.prototype.get=function(e,r,n,i){return Yn(n,this.entry[0])?this.entry[1]:i};ku.prototype.update=function(e,r,n,i,a,s,o){var c=a===gr,u=Yn(i,this.entry[0]);if(u?a===this.entry[1]:c)return this;if(cs(o),c){cs(s);return}return u?e&&e===this.ownerID?(this.entry[1]=a,this):new ku(e,this.keyHash,[i,a]):(cs(s),oz(this,e,r,ua(i),[i,a]))};OI.prototype.iterate=Bp.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(t(r[e?i-n:n])===!1)return!1};jp.prototype.iterate=RI.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var a=r[e?i-n:n];if(a&&a.iterate(t,e)===!1)return!1}};ku.prototype.iterate=function(t,e){return t(this.entry)};var Fet=function(t){function e(r,n,i){this._type=n,this._reverse=i,this._stack=r._root&&pZ(r._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,i=this._stack;i;){var a=i.node,s=i.index++,o=void 0;if(a.entry){if(s===0)return uL(n,a.entry)}else if(a.entries){if(o=a.entries.length-1,s<=o)return uL(n,a.entries[this._reverse?o-s:s])}else if(o=a.nodes.length-1,s<=o){var c=a.nodes[this._reverse?o-s:s];if(c){if(c.entry)return uL(n,c.entry);i=this._stack=pZ(c,i)}continue}i=this._stack=this._stack.__prev}return Oi()},e}(vr);function uL(t,e){return an(t,e[0],e[1])}function pZ(t,e){return{node:t,index:0,__prev:e}}function az(t,e,r,n){var i=Object.create(sn);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var _Z;function Po(){return _Z||(_Z=az(0))}function mZ(t,e,r){var n,i;if(t._root){var a=iG(),s=iG();if(n=sz(t._root,t.__ownerID,0,void 0,e,r,a,s),!s.value)return t;i=t.size+(a.value?r===gr?-1:1:0)}else{if(r===gr)return t;i=1,n=new OI(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?az(i,n):Po()}function sz(t,e,r,n,i,a,s,o){return t?t.update(e,r,n,i,a,s,o):a===gr?t:(cs(o),cs(s),new ku(e,n,[i,a]))}function gZ(t){return t.constructor===ku||t.constructor===Bp}function oz(t,e,r,n,i){if(t.keyHash===n)return new Bp(e,n,[t.entry,i]);var a=(r===0?t.keyHash:t.keyHash>>>r)&Hi,s=(r===0?n:n>>>r)&Hi,o,c=a===s?[oz(t,e,r+Lr,n,i)]:(o=new ku(e,n,i),a<s?[t,o]:[o,t]);return new jp(e,1<<a|1<<s,c)}function Met(t,e,r,n){t||(t=new Vk);for(var i=new ku(t,ua(r),[r,n]),a=0;a<e.length;a++){var s=e[a];i=i.update(t,0,void 0,s[0],s[1])}return i}function Det(t,e,r,n){for(var i=0,a=0,s=new Array(r),o=0,c=1,u=e.length;o<u;o++,c<<=1){var l=e[o];l!==void 0&&o!==n&&(i|=c,s[a++]=l)}return new jp(t,i,s)}function Cet(t,e,r,n,i){for(var a=0,s=new Array(Ma),o=0;r!==0;o++,r>>>=1)s[o]=r&1?e[a++]:void 0;return s[n]=i,new RI(t,a+1,s)}function $Ee(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function ZEe(t,e,r,n){var i=n?t:Io(t);return i[e]=r,i}function Let(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var a=new Array(i),s=0,o=0;o<i;o++)o===e?(a[o]=r,s=-1):a[o]=t[o+s];return a}function jet(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),a=0,s=0;s<n;s++)s===e&&(a=1),i[s]=t[s+a];return i}var Bet=Ma/4,qet=Ma/2,Uet=Ma/4;function eIe(t){if(Gk(t)&&typeof t!="string")return t;if(zs(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function PI(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function tIe(t,e){return gs(t)?t.has(e):Il(t)&&a0.call(t,e)}function uz(t,e,r){return gs(t)?t.get(e,r):tIe(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function rIe(t,e){if(!Il(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(gs(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!a0.call(t,e))return t;var r=UN(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function nIe(t,e,r){if(!Il(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(gs(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(a0.call(t,e)&&r===t[e])return t;var n=UN(t);return n[e]=r,n}function Rf(t,e,r,n){n||(n=r,r=void 0);var i=iIe(gs(t),t,eIe(e),0,r,n);return i===gr?r:i}function iIe(t,e,r,n,i,a){var s=e===gr;if(n===r.length){var o=s?i:e,c=a(o);return c===o?e:c}if(!s&&!Il(e))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(r).slice(0,n).map(PI)+"]: "+e);var u=r[n],l=s?gr:uz(e,u,gr),d=iIe(l===gr?t:gs(l),l,r,n+1,i,a);return d===l?e:d===gr?rIe(e,u):nIe(s?t?Po():{}:e,u,d)}function aIe(t,e){return Rf(t,e,function(){return gr})}function cz(t){return aIe(this,t)}var sIe="@@__IMMUTABLE_LIST__@@";function lz(t){return!!(t&&t[sIe])}var dO=function(t){function e(r){var n=T3();if(r==null)return n;if(lz(r))return r;var i=t(r),a=i.size;return a===0?n:(Pa(a),a>0&&a<Ma?NI(0,a,Lr,null,new vl(i.toArray())):n.withMutations(function(s){s.setSize(a),i.forEach(function(o,c){return s.set(c,o)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,i){if(n=xl(this,n),n>=0&&n<this.size){n+=this._origin;var a=oIe(this,n);return a&&a.array[n&Hi]}return i},e.prototype.set=function(n,i){return Vet(this,n,i)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,i){return this.splice(n,0,i)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Lr,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):T3()},e.prototype.push=function(){var n=arguments,i=this.size;return this.withMutations(function(a){$c(a,0,i+n.length);for(var s=0;s<n.length;s++)a.set(i+s,n[s])})},e.prototype.pop=function(){return $c(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(i){$c(i,-n.length);for(var a=0;a<n.length;a++)i.set(a,n[a])})},e.prototype.shift=function(){return $c(this,1)},e.prototype.shuffle=function(n){return n===void 0&&(n=Math.random),this.withMutations(function(i){for(var a=i.size,s,o;a;)s=Math.floor(n()*a--),o=i.get(s),i.set(s,i.get(a)),i.set(a,o)})},e.prototype.concat=function(){for(var n=arguments,i=[],a=0;a<arguments.length;a++){var s=n[a],o=t(typeof s!="string"&&Uk(s)?s:[s]);o.size!==0&&i.push(o)}return i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(c){i.forEach(function(u){return u.forEach(function(l){return c.push(l)})})})},e.prototype.setSize=function(n){return $c(this,0,n)},e.prototype.map=function(n,i){var a=this;return this.withMutations(function(s){for(var o=0;o<a.size;o++)s.set(o,n.call(i,s.get(o),o,a))})},e.prototype.slice=function(n,i){var a=this.size;return iO(n,i,a)?this:$c(this,i0(n,a),aO(i,a))},e.prototype.__iterator=function(n,i){var a=i?this.size:0,s=yZ(this,i);return new vr(function(){var o=s();return o===XE?Oi():an(n,i?--a:a++,o)})},e.prototype.__iterate=function(n,i){for(var a=i?this.size:0,s=yZ(this,i),o;(o=s())!==XE&&n(o,i?--a:a++,this)!==!1;);return a},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?NI(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?T3():(this.__ownerID=n,this.__altered=!1,this)},e}(If);dO.isList=lz;var jn=dO.prototype;jn[sIe]=!0;jn[nO]=jn.remove;jn.merge=jn.concat;jn.setIn=tz;jn.deleteIn=jn.removeIn=cz;jn.update=rz;jn.updateIn=nz;jn.mergeIn=ez;jn.mergeDeepIn=Zk;jn.withMutations=lO;jn.wasAltered=iz;jn.asImmutable=sO;jn["@@transducer/init"]=jn.asMutable=oO;jn["@@transducer/step"]=function(t,e){return t.push(e)};jn["@@transducer/result"]=function(t){return t.asImmutable()};var vl=function(e,r){this.array=e,this.ownerID=r};vl.prototype.removeBefore=function(e,r,n){if(!(n&(1<<r+Lr)-1)||this.array.length===0)return this;var i=n>>>r&Hi;if(i>=this.array.length)return new vl([],e);var a=i===0,s;if(r>0){var o=this.array[i];if(s=o&&o.removeBefore(e,r-Lr,n),s===o&&a)return this}if(a&&!s)return this;var c=qp(this,e);if(!a)for(var u=0;u<i;u++)c.array[u]=void 0;return s&&(c.array[i]=s),c};vl.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r+Lr:Ma)||this.array.length===0)return this;var i=n-1>>>r&Hi;if(i>=this.array.length)return this;var a;if(r>0){var s=this.array[i];if(a=s&&s.removeAfter(e,r-Lr,n),a===s&&i===this.array.length-1)return this}var o=qp(this,e);return o.array.splice(i+1),a&&(o.array[i]=a),o};var XE={};function yZ(t,e){var r=t._origin,n=t._capacity,i=FI(n),a=t._tail;return s(t._root,t._level,0);function s(u,l,d){return l===0?o(u,d):c(u,l,d)}function o(u,l){var d=l===i?a&&a.array:u&&u.array,f=l>r?0:r-l,h=n-l;return h>Ma&&(h=Ma),function(){if(f===h)return XE;var p=e?--h:f++;return d&&d[p]}}function c(u,l,d){var f,h=u&&u.array,p=d>r?0:r-d>>l,_=(n-d>>l)+1;return _>Ma&&(_=Ma),function(){for(;;){if(f){var g=f();if(g!==XE)return g;f=null}if(p===_)return XE;var m=e?--_:p++;f=s(h&&h[m],l-Lr,d+(m<<l))}}}}function NI(t,e,r,n,i,a,s){var o=Object.create(jn);return o.size=e-t,o._origin=t,o._capacity=e,o._level=r,o._root=n,o._tail=i,o.__ownerID=a,o.__hash=s,o.__altered=!1,o}function T3(){return NI(0,0,Lr)}function Vet(t,e,r){if(e=xl(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(s){e<0?$c(s,e).set(0,r):$c(s,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,a=iG();return e>=FI(t._capacity)?n=cG(n,t.__ownerID,0,e,r,a):i=cG(i,t.__ownerID,t._level,e,r,a),a.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):NI(t._origin,t._capacity,t._level,i,n):t}function cG(t,e,r,n,i,a){var s=n>>>r&Hi,o=t&&s<t.array.length;if(!o&&i===void 0)return t;var c;if(r>0){var u=t&&t.array[s],l=cG(u,e,r-Lr,n,i,a);return l===u?t:(c=qp(t,e),c.array[s]=l,c)}return o&&t.array[s]===i?t:(a&&cs(a),c=qp(t,e),i===void 0&&s===c.array.length-1?c.array.pop():c.array[s]=i,c)}function qp(t,e){return e&&t&&e===t.ownerID?t:new vl(t?t.array.slice():[],e)}function oIe(t,e){if(e>=FI(t._capacity))return t._tail;if(e<1<<t._level+Lr){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&Hi],n-=Lr;return r}}function $c(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new Vk,i=t._origin,a=t._capacity,s=i+e,o=r===void 0?a:r<0?a+r:i+r;if(s===i&&o===a)return t;if(s>=o)return t.clear();for(var c=t._level,u=t._root,l=0;s+l<0;)u=new vl(u&&u.array.length?[void 0,u]:[],n),c+=Lr,l+=1<<c;l&&(s+=l,i+=l,o+=l,a+=l);for(var d=FI(a),f=FI(o);f>=1<<c+Lr;)u=new vl(u&&u.array.length?[u]:[],n),c+=Lr;var h=t._tail,p=f<d?oIe(t,o-1):f>d?new vl([],n):h;if(h&&f>d&&s<a&&h.array.length){u=qp(u,n);for(var _=u,g=c;g>Lr;g-=Lr){var m=d>>>g&Hi;_=_.array[m]=qp(_.array[m],n)}_.array[d>>>Lr&Hi]=h}if(o<a&&(p=p&&p.removeAfter(n,0,o)),s>=f)s-=f,o-=f,c=Lr,u=null,p=p&&p.removeBefore(n,0,s);else if(s>i||f<d){for(l=0;u;){var y=s>>>c&Hi;if(y!==f>>>c&Hi)break;y&&(l+=(1<<c)*y),c-=Lr,u=u.array[y]}u&&s>i&&(u=u.removeBefore(n,c,s-l)),u&&f<d&&(u=u.removeAfter(n,c,f-l)),l&&(s-=l,o-=l)}return t.__ownerID?(t.size=o-s,t._origin=s,t._capacity=o,t._level=c,t._root=u,t._tail=p,t.__hash=void 0,t.__altered=!0,t):NI(s,o,c,u,p)}function FI(t){return t<Ma?0:t-1>>>Lr<<Lr}function dz(t){return qF(t)&&zs(t)}var Go=function(t){function e(r){return r==null?fE():dz(r)?r:fE().withMutations(function(n){var i=ms(r);Pa(i.size),i.forEach(function(a,s){return n.set(s,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,i){var a=this._map.get(n);return a!==void 0?this._list.get(a)[1]:i},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):fE()},e.prototype.set=function(n,i){return vZ(this,n,i)},e.prototype.remove=function(n){return vZ(this,n,gr)},e.prototype.__iterate=function(n,i){var a=this;return this._list.__iterate(function(s){return s&&n(s[1],s[0],a)},i)},e.prototype.__iterator=function(n,i){return this._list.fromEntrySeq().__iterator(n,i)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var i=this._map.__ensureOwner(n),a=this._list.__ensureOwner(n);return n?fz(i,a,n,this.__hash):this.size===0?fE():(this.__ownerID=n,this.__altered=!1,this._map=i,this._list=a,this)},e}(Of);Go.isOrderedMap=dz;Go.prototype[El]=!0;Go.prototype[nO]=Go.prototype.remove;function fz(t,e,r,n){var i=Object.create(Go.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var bZ;function fE(){return bZ||(bZ=fz(Po(),T3()))}function vZ(t,e,r){var n=t._map,i=t._list,a=n.get(e),s=a!==void 0,o,c;if(r===gr){if(!s)return t;i.size>=Ma&&i.size>=n.size*2?(c=i.filter(function(u,l){return u!==void 0&&a!==l}),o=c.toKeyedSeq().map(function(u){return u[0]}).flip().toMap(),t.__ownerID&&(o.__ownerID=c.__ownerID=t.__ownerID)):(o=n.remove(e),c=a===i.size-1?i.pop():i.set(a,void 0))}else if(s){if(r===i.get(a)[1])return t;o=n,c=i.set(a,[e,r])}else o=n.set(e,i.size),c=i.set(i.size,[e,r]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=c,t.__hash=void 0,t.__altered=!0,t):fz(o,c)}var uIe="@@__IMMUTABLE_STACK__@@";function VN(t){return!!(t&&t[uIe])}var UF=function(t){function e(r){return r==null?PR():VN(r)?r:PR().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,i){var a=this._head;for(n=xl(this,n);a&&n--;)a=a.next;return a?a.value:i},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var i=this.size+arguments.length,a=this._head,s=arguments.length-1;s>=0;s--)a={value:n[s],next:a};return this.__ownerID?(this.size=i,this._head=a,this.__hash=void 0,this.__altered=!0,this):hE(i,a)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&VN(n))return n;Pa(n.size);var i=this.size,a=this._head;return n.__iterate(function(s){i++,a={value:s,next:a}},!0),this.__ownerID?(this.size=i,this._head=a,this.__hash=void 0,this.__altered=!0,this):hE(i,a)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):PR()},e.prototype.slice=function(n,i){if(iO(n,i,this.size))return this;var a=i0(n,this.size),s=aO(i,this.size);if(s!==this.size)return t.prototype.slice.call(this,n,i);for(var o=this.size-a,c=this._head;a--;)c=c.next;return this.__ownerID?(this.size=o,this._head=c,this.__hash=void 0,this.__altered=!0,this):hE(o,c)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?hE(this.size,this._head,n,this.__hash):this.size===0?PR():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,i){var a=this;if(i)return new Cp(this.toArray()).__iterate(function(c,u){return n(c,u,a)},i);for(var s=0,o=this._head;o&&n(o.value,s++,this)!==!1;)o=o.next;return s},e.prototype.__iterator=function(n,i){if(i)return new Cp(this.toArray()).__iterator(n,i);var a=0,s=this._head;return new vr(function(){if(s){var o=s.value;return s=s.next,an(n,a++,o)}return Oi()})},e}(If);UF.isStack=VN;var Qi=UF.prototype;Qi[uIe]=!0;Qi.shift=Qi.pop;Qi.unshift=Qi.push;Qi.unshiftAll=Qi.pushAll;Qi.withMutations=lO;Qi.wasAltered=iz;Qi.asImmutable=sO;Qi["@@transducer/init"]=Qi.asMutable=oO;Qi["@@transducer/step"]=function(t,e){return t.unshift(e)};Qi["@@transducer/result"]=function(t){return t.asImmutable()};function hE(t,e,r,n){var i=Object.create(Qi);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}var AZ;function PR(){return AZ||(AZ=hE(0))}function TZ(t,e,r,n,i,a){return Pa(t.size),t.__iterate(function(s,o,c){i?(i=!1,r=s):r=e.call(n,r,s,o,c)},a),r}function Get(t,e){return e}function Het(t,e){return[e,t]}function cL(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return!t.apply(this,e)}}function wZ(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return-t.apply(this,e)}}function SZ(t,e){return t<e?1:t>e?-1:0}function hz(t,e){if(t===e)return!0;if(!ma(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||Gr(t)!==Gr(e)||_a(t)!==_a(e)||zs(t)!==zs(e))return!1;if(t.size===0&&e.size===0)return!0;var r=!MF(t);if(zs(t)){var n=t.entries();return e.every(function(c,u){var l=n.next().value;return l&&Yn(l[1],c)&&(r||Yn(l[0],u))})&&n.next().done}var i=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{i=!0;var a=t;t=e,e=a}var s=!0,o=e.__iterate(function(c,u){if(r?!t.has(c):i?!Yn(c,t.get(u,gr)):!Yn(t.get(u,gr),c))return s=!1,!1});return s&&t.size===o}var cIe=function(t){function e(r,n,i){if(i===void 0&&(i=1),!(this instanceof e))return new e(r,n,i);if(KE(i!==0,"Cannot step a Range by 0"),KE(r!==void 0,"You must define a start value when using Range"),KE(n!==void 0,"You must define an end value when using Range"),i=Math.abs(i),n<r&&(i=-i),this._start=r,this._end=n,this._step=i,this.size=Math.max(0,Math.ceil((n-r)/i-1)+1),this.size===0){if(lL)return lL;lL=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,i){return this.has(n)?this._start+xl(this,n)*this._step:i},e.prototype.includes=function(n){var i=(n-this._start)/this._step;return i>=0&&i<this.size&&i===Math.floor(i)},e.prototype.slice=function(n,i){return iO(n,i,this.size)?this:(n=i0(n,this.size),i=aO(i,this.size),i<=n?new e(0,0):new e(this.get(n,this._end),this.get(i,this._end),this._step))},e.prototype.indexOf=function(n){var i=n-this._start;if(i%this._step===0){var a=i/this._step;if(a>=0&&a<this.size)return a}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,i){for(var a=this.size,s=this._step,o=i?this._start+(a-1)*s:this._start,c=0;c!==a&&n(o,i?a-++c:c++,this)!==!1;)o+=i?-s:s;return c},e.prototype.__iterator=function(n,i){var a=this.size,s=this._step,o=i?this._start+(a-1)*s:this._start,c=0;return new vr(function(){if(c===a)return Oi();var u=o;return o+=i?-s:s,an(n,i?a-++c:c++,u)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:hz(this,n)},e}(ys),lL,lIe="@@__IMMUTABLE_SET__@@";function VF(t){return!!(t&&t[lIe])}var fO=function(t){function e(r){return r==null?pE():VF(r)&&!zs(r)?r:pE().withMutations(function(n){var i=t(r);Pa(i.size),i.forEach(function(a){return n.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(ms(n).keySeq())},e.intersect=function(n){return n=ei(n).toArray(),n.length?ui.intersect.apply(e(n.pop()),n):pE()},e.union=function(n){return n=ei(n).toArray(),n.length?ui.union.apply(e(n.pop()),n):pE()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return NR(this,this._map.set(n,n))},e.prototype.remove=function(n){return NR(this,this._map.remove(n))},e.prototype.clear=function(){return NR(this,this._map.clear())},e.prototype.map=function(n,i){var a=this,s=!1,o=NR(this,this._map.mapEntries(function(c){var u=c[1],l=n.call(i,u,u,a);return l!==u&&(s=!0),[l,l]},i));return s?o:this},e.prototype.union=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return n=n.filter(function(a){return a.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(a){for(var s=0;s<n.length;s++)typeof n[s]=="string"?a.add(n[s]):t(n[s]).forEach(function(o){return a.add(o)})})},e.prototype.intersect=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length===0)return this;n=n.map(function(s){return t(s)});var a=[];return this.forEach(function(s){n.every(function(o){return o.includes(s)})||a.push(s)}),this.withMutations(function(s){a.forEach(function(o){s.remove(o)})})},e.prototype.subtract=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length===0)return this;n=n.map(function(s){return t(s)});var a=[];return this.forEach(function(s){n.some(function(o){return o.includes(s)})&&a.push(s)}),this.withMutations(function(s){a.forEach(function(o){s.remove(o)})})},e.prototype.sort=function(n){return Vp(Lp(this,n))},e.prototype.sortBy=function(n,i){return Vp(Lp(this,i,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,i){var a=this;return this._map.__iterate(function(s){return n(s,s,a)},i)},e.prototype.__iterator=function(n,i){return this._map.__iterator(n,i)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var i=this._map.__ensureOwner(n);return n?this.__make(i,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=i,this)},e}(r0);fO.isSet=VF;var ui=fO.prototype;ui[lIe]=!0;ui[nO]=ui.remove;ui.merge=ui.concat=ui.union;ui.withMutations=lO;ui.asImmutable=sO;ui["@@transducer/init"]=ui.asMutable=oO;ui["@@transducer/step"]=function(t,e){return t.add(e)};ui["@@transducer/result"]=function(t){return t.asImmutable()};ui.__empty=pE;ui.__make=dIe;function NR(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function dIe(t,e){var r=Object.create(ui);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var xZ;function pE(){return xZ||(xZ=dIe(Po()))}function pz(t,e,r){for(var n=eIe(e),i=0;i!==n.length;)if(t=uz(t,n[i++],gr),t===gr)return r;return t}function fIe(t,e){return pz(this,t,e)}function hIe(t,e){return pz(t,e,gr)!==gr}function ket(t){return hIe(this,t)}function pIe(){Pa(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}function GN(t){if(!t||typeof t!="object")return t;if(!ma(t)){if(!Il(t))return t;t=Ri(t)}if(Gr(t)){var e={};return t.__iterate(function(n,i){e[i]=GN(n)}),e}var r=[];return t.__iterate(function(n){r.push(GN(n))}),r}function zet(t){if(t.size===1/0)return 0;var e=zs(t),r=Gr(t),n=e?1:0;return t.__iterate(r?e?function(i,a){n=31*n+EZ(ua(i),ua(a))|0}:function(i,a){n=n+EZ(ua(i),ua(a))|0}:e?function(i){n=31*n+ua(i)|0}:function(i){n=n+ua(i)|0}),Qet(t.size,n)}function Qet(t,e){return e=b_(e,3432918353),e=b_(e<<15|e>>>-15,461845907),e=b_(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=b_(e^e>>>16,2246822507),e=b_(e^e>>>13,3266489909),e=jF(e^e>>>16),e}function EZ(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}function Pf(t,e){var r=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}ei.Iterator=vr;Pf(ei,{toArray:function(){Pa(this.size);var e=new Array(this.size||0),r=Gr(this),n=0;return this.__iterate(function(i,a){e[n++]=r?[a,i]:i}),e},toIndexedSeq:function(){return new LEe(this)},toJS:function(){return GN(this)},toKeyedSeq:function(){return new BF(this,!0)},toMap:function(){return Of(this.toKeyedSeq())},toObject:pIe,toOrderedMap:function(){return Go(this.toKeyedSeq())},toOrderedSet:function(){return Vp(Gr(this)?this.valueSeq():this)},toSet:function(){return fO(Gr(this)?this.valueSeq():this)},toSetSeq:function(){return new jEe(this)},toSeq:function(){return _a(this)?this.toIndexedSeq():Gr(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return UF(Gr(this)?this.valueSeq():this)},toList:function(){return dO(Gr(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Cr(this,Aet(this,e))},includes:function(e){return this.some(function(r){return Yn(r,e)})},entries:function(){return this.__iterator(qa)},every:function(e,r){Pa(this.size);var n=!0;return this.__iterate(function(i,a,s){if(!e.call(r,i,a,s))return n=!1,!1}),n},filter:function(e,r){return Cr(this,VEe(this,e,r,!0))},partition:function(e,r){return yet(this,e,r)},find:function(e,r,n){var i=this.findEntry(e,r);return i?i[1]:n},forEach:function(e,r){return Pa(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){Pa(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(i){n?n=!1:r+=e,r+=i!=null?i.toString():""}),r},keys:function(){return this.__iterator(n0)},map:function(e,r){return Cr(this,UEe(this,e,r))},reduce:function(e,r,n){return TZ(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return TZ(this,e,r,n,arguments.length<2,!0)},reverse:function(){return Cr(this,Wk(this,!0))},slice:function(e,r){return Cr(this,Kk(this,e,r,!0))},some:function(e,r){Pa(this.size);var n=!1;return this.__iterate(function(i,a,s){if(e.call(r,i,a,s))return n=!0,!1}),n},sort:function(e){return Cr(this,Lp(this,e))},values:function(){return this.__iterator(Ba)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,r){return Dp(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return met(this,e,r)},equals:function(e){return hz(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Cp(e._cache);var r=e.toSeq().map(Het).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(cL(e),r)},findEntry:function(e,r,n){var i=n;return this.__iterate(function(a,s,o){if(e.call(r,a,s,o))return i=[s,a],!1}),i},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(REe,null,e)},flatMap:function(e,r){return Cr(this,Tet(this,e,r))},flatten:function(e){return Cr(this,HEe(this,e,!0))},fromEntrySeq:function(){return new BEe(this)},get:function(e,r){return this.find(function(n,i){return Yn(i,e)},void 0,r)},getIn:fIe,groupBy:function(e,r){return get(this,e,r)},has:function(e){return this.get(e,gr)!==gr},hasIn:ket,isSubset:function(e){return e=typeof e.includes=="function"?e:ei(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:ei(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return Yn(r,e)})},keySeq:function(){return this.toSeq().map(Get).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return OR(this,e)},maxBy:function(e,r){return OR(this,r,e)},min:function(e){return OR(this,e?wZ(e):SZ)},minBy:function(e,r){return OR(this,r?wZ(r):SZ,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return Cr(this,GEe(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(cL(e),r)},sortBy:function(e,r){return Cr(this,Lp(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return Cr(this,bet(this,e,r))},takeUntil:function(e,r){return this.takeWhile(cL(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=zet(this))}});var Pi=ei.prototype;Pi[IEe]=!0;Pi[DF]=Pi.values;Pi.toJSON=Pi.toArray;Pi.__toStringMapper=PI;Pi.inspect=Pi.toSource=function(){return this.toString()};Pi.chain=Pi.flatMap;Pi.contains=Pi.includes;Pf(ms,{flip:function(){return Cr(this,qEe(this))},mapEntries:function(e,r){var n=this,i=0;return Cr(this,this.toSeq().map(function(a,s){return e.call(r,[s,a],i++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return Cr(this,this.toSeq().flip().map(function(i,a){return e.call(r,i,a,n)}).flip())}});var hO=ms.prototype;hO[qN]=!0;hO[DF]=Pi.entries;hO.toJSON=pIe;hO.__toStringMapper=function(t,e){return PI(e)+": "+PI(t)};Pf(If,{toKeyedSeq:function(){return new BF(this,!1)},filter:function(e,r){return Cr(this,VEe(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return Cr(this,Wk(this,!1))},slice:function(e,r){return Cr(this,Kk(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=i0(e,e<0?this.count():this.size);var i=this.slice(0,e);return Cr(this,n===1?i:i.concat(Io(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Cr(this,HEe(this,e,!1))},get:function(e,r){return e=xl(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,i){return i===e},void 0,r)},has:function(e){return e=xl(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return Cr(this,wet(this,e))},interleave:function(){var e=[this].concat(Io(arguments)),r=RR(this.toSeq(),ys.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),Cr(this,n)},keySeq:function(){return cIe(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return Cr(this,GEe(this,e,r,!1))},zip:function(){var e=[this].concat(Io(arguments));return Cr(this,RR(this,IZ,e))},zipAll:function(){var e=[this].concat(Io(arguments));return Cr(this,RR(this,IZ,e,!0))},zipWith:function(e){var r=Io(arguments);return r[0]=this,Cr(this,RR(this,e,r))}});var o0=If.prototype;o0[BN]=!0;o0[El]=!0;Pf(r0,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Up=r0.prototype;Up.has=Pi.includes;Up.contains=Up.includes;Up.keys=Up.values;Pf(jl,hO);Pf(ys,o0);Pf(s0,Up);function IZ(){return Io(arguments)}function _z(t){return VF(t)&&zs(t)}var Vp=function(t){function e(r){return r==null?lG():_z(r)?r:lG().withMutations(function(n){var i=r0(r);Pa(i.size),i.forEach(function(a){return n.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(ms(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(fO);Vp.isOrderedSet=_z;var Nf=Vp.prototype;Nf[El]=!0;Nf.zip=o0.zip;Nf.zipWith=o0.zipWith;Nf.zipAll=o0.zipAll;Nf.__empty=lG;Nf.__make=_Ie;function _Ie(t,e){var r=Object.create(Nf);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var OZ;function lG(){return OZ||(OZ=_Ie(fE()))}var Wet={LeftThenRight:-1,RightThenLeft:1};function Ket(t){if(Ll(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(gs(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var zn=function(e,r){var n;Ket(e);var i=function(o){var c=this;if(o instanceof i)return o;if(!(this instanceof i))return new i(o);if(!n){n=!0;var u=Object.keys(e),l=a._indices={};a._name=r,a._keys=u,a._defaultValues=e;for(var d=0;d<u.length;d++){var f=u[d];l[f]=d,a[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+gz(this)+' with property "'+f+'" since that property name is part of the Record API.'):Xet(a,f)}}return this.__ownerID=void 0,this._values=dO().withMutations(function(h){h.setSize(c._keys.length),ms(o).forEach(function(p,_){h.set(c._indices[_],p===c._defaultValues[_]?void 0:p)})}),this},a=i.prototype=Object.create(zr);return a.constructor=i,r&&(i.displayName=r),i};zn.prototype.toString=function(){for(var e=gz(this)+" { ",r=this._keys,n,i=0,a=r.length;i!==a;i++)n=r[i],e+=(i?", ":"")+n+": "+PI(this.get(n));return e+" }"};zn.prototype.equals=function(e){return this===e||Ll(e)&&Gp(this).equals(Gp(e))};zn.prototype.hashCode=function(){return Gp(this).hashCode()};zn.prototype.has=function(e){return this._indices.hasOwnProperty(e)};zn.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],i=this._values.get(n);return i===void 0?this._defaultValues[e]:i};zn.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return mz(this,n)}return this};zn.prototype.remove=function(e){return this.set(e)};zn.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:mz(this,e)};zn.prototype.wasAltered=function(){return this._values.wasAltered()};zn.prototype.toSeq=function(){return Gp(this)};zn.prototype.toJS=function(){return GN(this)};zn.prototype.entries=function(){return this.__iterator(qa)};zn.prototype.__iterator=function(e,r){return Gp(this).__iterator(e,r)};zn.prototype.__iterate=function(e,r){return Gp(this).__iterate(e,r)};zn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?mz(this,r,e):(this.__ownerID=e,this._values=r,this)};zn.isRecord=Ll;zn.getDescriptiveName=gz;var zr=zn.prototype;zr[FEe]=!0;zr[nO]=zr.remove;zr.deleteIn=zr.removeIn=cz;zr.getIn=fIe;zr.hasIn=Pi.hasIn;zr.merge=zEe;zr.mergeWith=QEe;zr.mergeIn=ez;zr.mergeDeep=KEe;zr.mergeDeepWith=XEe;zr.mergeDeepIn=Zk;zr.setIn=tz;zr.update=rz;zr.updateIn=nz;zr.withMutations=lO;zr.asMutable=oO;zr.asImmutable=sO;zr[DF]=zr.entries;zr.toJSON=zr.toObject=Pi.toObject;zr.inspect=zr.toSource=function(){return this.toString()};function mz(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function gz(t){return t.constructor.displayName||t.constructor.name||"Record"}function Gp(t){return zk(t._keys.map(function(e){return[e,t.get(e)]}))}function Xet(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){KE(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r)}})}catch{}}var Jet=function(t){function e(r,n){if(!(this instanceof e))return new e(r,n);if(this._value=r,this.size=n===void 0?1/0:Math.max(0,n),this.size===0){if(dL)return dL;dL=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(n,i){return this.has(n)?this._value:i},e.prototype.includes=function(n){return Yn(this._value,n)},e.prototype.slice=function(n,i){var a=this.size;return iO(n,i,a)?this:new e(this._value,aO(i,a)-i0(n,a))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(n){return Yn(this._value,n)?0:-1},e.prototype.lastIndexOf=function(n){return Yn(this._value,n)?this.size:-1},e.prototype.__iterate=function(n,i){for(var a=this.size,s=0;s!==a&&n(this._value,i?a-++s:s++,this)!==!1;);return s},e.prototype.__iterator=function(n,i){var a=this,s=this.size,o=0;return new vr(function(){return o===s?Oi():an(n,i?s-++o:o++,a._value)})},e.prototype.equals=function(n){return n instanceof e?Yn(this._value,n._value):hz(this,n)},e}(ys),dL;function Yet(t,e){return mIe([],e||$et,t,"",e&&e.length>2?[]:void 0,{"":t})}function mIe(t,e,r,n,i,a){if(typeof r!="string"&&!gs(r)&&(Gk(r)||Uk(r)||$k(r))){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),i&&n!==""&&i.push(n);var s=e.call(a,n,Ri(r).map(function(o,c){return mIe(t,e,o,c,i,r)}),i&&i.slice());return t.pop(),i&&i.pop(),s}return r}function $et(t,e){return _a(e)?e.toList():Gr(e)?e.toMap():e.toSet()}var Zet="5.1.4",ett=ei;const ttt=Object.freeze(Object.defineProperty({__proto__:null,Collection:ei,Iterable:ett,List:dO,Map:Of,OrderedMap:Go,OrderedSet:Vp,PairSorting:Wet,Range:cIe,Record:zn,Repeat:Jet,Seq:Ri,Set:fO,Stack:UF,fromJS:Yet,get:uz,getIn:pz,has:tIe,hasIn:hIe,hash:ua,is:Yn,isAssociative:MF,isCollection:ma,isImmutable:gs,isIndexed:_a,isKeyed:Gr,isList:lz,isMap:qF,isOrdered:zs,isOrderedMap:dz,isOrderedSet:_z,isPlainObject:$k,isRecord:Ll,isSeq:LF,isSet:VF,isStack:VN,isValueObject:uG,merge:Eet,mergeDeep:Oet,mergeDeepWith:Ret,mergeWith:Iet,remove:rIe,removeIn:aIe,set:nIe,setIn:JEe,update:Yk,updateIn:Rf,version:Zet},Symbol.toStringTag,{value:"Module"})),yz=Pl(ttt);var RZ;function gIe(){if(RZ)return id;RZ=1,Object.defineProperty(id,"__esModule",{value:!0}),id.ActionContextKey=id.ActionContext=void 0;const t=yz;let e=class _E{constructor(i={}){k(this,"map");this.map=(0,t.Map)(i)}setDefault(i,a){return this.has(i)?this:this.set(i,a)}set(i,a){return this.setRaw(i.name,a)}setRaw(i,a){return new _E(this.map.set(i,a))}delete(i){return new _E(this.map.delete(i.name))}get(i){return this.getRaw(i.name)}getRaw(i){return this.map.get(i)}getSafe(i){if(!this.has(i))throw new Error(`Context entry ${i.name} is required but not available`);return this.get(i)}has(i){return this.hasRaw(i.name)}hasRaw(i){return this.map.has(i)}merge(...i){let a=this;for(const s of i)for(const o of s.keys())a=a.set(o,s.get(o));return a}keys(){return[...this.map.keys()].map(i=>new r(i))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(i){return i instanceof _E||i&&"map"in i?i:new _E((0,t.Map)(i??{}))}};id.ActionContext=e;class r{constructor(i){k(this,"name");k(this,"dummy");this.name=i}}return id.ActionContextKey=r,id}var v_={},PZ;function yIe(){if(PZ)return v_;PZ=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.Bus=void 0;let t=class{constructor(r){k(this,"name");k(this,"actors",[]);k(this,"observers",[]);k(this,"dependencyLinks",new Map);k(this,"failMessage");this.name=r.name,this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(r){this.actors.push(r),this.reorderForDependencies()}subscribeObserver(r){this.observers.push(r)}unsubscribe(r){const n=this.actors.indexOf(r);return n>=0?(this.actors.splice(n,1),!0):!1}unsubscribeObserver(r){const n=this.observers.indexOf(r);return n>=0?(this.observers.splice(n,1),!0):!1}publish(r){return this.actors.map(n=>({actor:n,reply:n.test(r)}))}onRun(r,n,i){for(const a of this.observers)a.onRun(r,n,i)}addDependencies(r,n){for(const i of n){let a=this.dependencyLinks.get(i);a||(a=[],this.dependencyLinks.set(i,a)),a.push(r)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const r=[];for(const n of this.dependencyLinks.keys()){const i=this.actors.indexOf(n);i>=0&&(this.actors.splice(i,1),r.push(n))}for(;r.length>0;){let n=-1;for(let a=0;a<r.length;a++){let s=!0;for(const o of this.dependencyLinks.get(r[a]))if(!this.actors.includes(o)&&r.includes(o)){s=!1;break}if(s){n=a;break}}if(n<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const i=r.splice(n,1)[0];this.actors.push(i)}}}};return v_.Bus=t,v_}var A_={},NZ;function rtt(){if(NZ)return A_;NZ=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.BusIndexed=void 0;const t=yIe();let e=class extends t.Bus{constructor(i){super(i);k(this,"actorsIndex",{});k(this,"actorIdentifierFields");k(this,"actionIdentifierFields");this.actorIdentifierFields=i.actorIdentifierFields,this.actionIdentifierFields=i.actionIdentifierFields}subscribe(i){const a=this.getActorIdentifiers(i)??["_undefined_"];for(const s of a){let o=this.actorsIndex[s];o||(o=this.actorsIndex[s]=[]),o.push(i),super.subscribe(i)}}unsubscribe(i){const a=this.getActorIdentifiers(i)??["_undefined_"];let s=!1;for(const o of a){const c=this.actorsIndex[o];if(c){const u=c.indexOf(i);u>=0&&c.splice(u,1),c.length===0&&delete this.actorsIndex[o]}s=s||super.unsubscribe(i)}return s}publish(i){const a=this.getActionIdentifier(i);return a?[...this.actorsIndex[a]||[],...this.actorsIndex._undefined_||[]].map(o=>({actor:o,reply:o.test(i)})):super.publish(i)}getActorIdentifiers(i){const a=this.actorIdentifierFields.reduce((s,o)=>s[o],i);if(a)return Array.isArray(a)?a:[a]}getActionIdentifier(i){return this.actionIdentifierFields.reduce((a,s)=>a[s],i)}};return A_.BusIndexed=e,A_}var T_={},FZ;function bIe(){if(FZ)return T_;FZ=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.CONTEXT_KEY_LOGGER=void 0;const t=gIe();return T_.CONTEXT_KEY_LOGGER=new t.ActionContextKey("@comunica/core:log"),T_}var w_={},MZ;function ntt(){if(MZ)return w_;MZ=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.ActionObserver=void 0;let t=class{constructor(r){k(this,"name");k(this,"bus");this.name=r.name,this.bus=r.bus}};return w_.ActionObserver=t,w_}var S_={},DZ;function itt(){if(DZ)return S_;DZ=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.Actor=void 0;const t=bIe();let e=class Od{constructor(n){k(this,"name");k(this,"bus");k(this,"beforeActors",[]);Object.assign(this,n),this.name=n.name,this.bus=n.bus,this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),n.busFailMessage&&(this.bus.failMessage=n.busFailMessage)}static getContextLogger(n){return n.get(t.CONTEXT_KEY_LOGGER)}runObservable(n,i){const a=this.run(n,i);return this.bus.onRun(this,n,a),a}getDefaultLogData(n,i){const a=i?i():{};return a.actor=this.name,a}logTrace(n,i,a){const s=Od.getContextLogger(n);s&&s.trace(i,this.getDefaultLogData(n,a))}logDebug(n,i,a){const s=Od.getContextLogger(n);s&&s.debug(i,this.getDefaultLogData(n,a))}logInfo(n,i,a){const s=Od.getContextLogger(n);s&&s.info(i,this.getDefaultLogData(n,a))}logWarn(n,i,a){const s=Od.getContextLogger(n);s&&s.warn(i,this.getDefaultLogData(n,a))}logError(n,i,a){const s=Od.getContextLogger(n);s&&s.error(i,this.getDefaultLogData(n,a))}logFatal(n,i,a){const s=Od.getContextLogger(n);s&&s.fatal(i,this.getDefaultLogData(n,a))}};return S_.Actor=e,S_}var x_={},CZ;function att(){if(CZ)return x_;CZ=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.Mediator=void 0;let t=class dG{constructor(r){k(this,"name");k(this,"bus");this.name=r.name,this.bus=r.bus}publish(r){const n=this.bus.publish(r);if(n.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return n}async mediateActor(r){return await this.mediateWith(r,this.publish(r))}async mediateTestable(r){return(await this.mediateActor(r)).mapAsync((i,a)=>i.runObservable(r,a))}async mediate(r){return(await this.mediateTestable(r)).getOrThrow()}constructFailureMessage(r,n){const i=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(s,o)=>dG.getObjectValue({action:r},o.split("."))||s)}
    Error messages of failing actors:${i}${n.join(i)}`}static getObjectValue(r,n){if(n.length===0)return r;if(r)return dG.getObjectValue(r[n[0]],n.slice(1))}};return x_.Mediator=t,x_}var Ya={},LZ;function stt(){if(LZ)return Ya;LZ=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.TestResultFailed=Ya.TestResultPassed=void 0,Ya.passTest=t,Ya.passTestVoid=e,Ya.passTestWithSideData=r,Ya.passTestVoidWithSideData=n,Ya.failTest=i;function t(o){return new a(o,void 0)}function e(){return new a(!0,void 0)}function r(o,c){return new a(o,c)}function n(o){return new a(!0,o)}function i(o){return new s(o)}class a{constructor(c,u){k(this,"value");k(this,"sideData");this.value=c,this.sideData=u}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(c){return new a(c(this.value,this.sideData),this.sideData)}async mapAsync(c){return new a(await c(this.value,this.sideData),this.sideData)}}Ya.TestResultPassed=a;class s{constructor(c){k(this,"failMessage");this.failMessage=c}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return Ya.TestResultFailed=s,Ya}var jZ;function ke(){return jZ||(jZ=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(gIe(),t),r(yIe(),t),r(rtt(),t),r(bIe(),t),r(ntt(),t),r(itt(),t),r(att(),t),r(stt(),t)}(iL)),iL}Object.defineProperty(FF,"__esModule",{value:!0});FF.ActorInit=void 0;const ott=ke();class utt extends ott.Actor{constructor(e){super(e)}}FF.ActorInit=utt;(function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(FF,t)})(EEe);Object.defineProperty(rO,"__esModule",{value:!0});rO.ActorInitQueryBase=void 0;const ctt=EEe,ltt=ke();class dtt extends ctt.ActorInit{constructor(r){super(r);k(this,"mediatorQueryResultSerialize");k(this,"mediatorQueryResultSerializeMediaTypeCombiner");k(this,"mediatorQueryResultSerializeMediaTypeFormatCombiner");k(this,"mediatorHttpInvalidate");k(this,"mediatorQueryProcess");k(this,"queryString");k(this,"defaultQueryInputFormat");k(this,"allowNoSources");k(this,"context");this.mediatorQueryResultSerialize=r.mediatorQueryResultSerialize,this.mediatorQueryResultSerializeMediaTypeCombiner=r.mediatorQueryResultSerializeMediaTypeCombiner,this.mediatorQueryResultSerializeMediaTypeFormatCombiner=r.mediatorQueryResultSerializeMediaTypeFormatCombiner,this.mediatorHttpInvalidate=r.mediatorHttpInvalidate,this.mediatorQueryProcess=r.mediatorQueryProcess,this.queryString=r.queryString,this.defaultQueryInputFormat=r.defaultQueryInputFormat,this.allowNoSources=r.allowNoSources,this.context=r.context}async test(r){return(0,ltt.passTestVoid)()}async run(r){throw new Error("ActorInitSparql#run is not supported in the browser.")}}rO.ActorInitQueryBase=dtt;var GF={};Object.defineProperty(GF,"__esModule",{value:!0});GF.ActorInitQuery=void 0;const ftt=rO;typeof process>"u"&&(globalThis.process=Dl);class htt extends ftt.ActorInitQueryBase{}GF.ActorInitQuery=htt;var HF={},dt={},mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.KeysStatistics=mr.KeysRdfJoin=mr.KeysMergeBindingsContext=mr.KeysRdfUpdateQuads=mr.KeysQuerySourceIdentify=mr.KeysRdfSerialize=mr.KeysRdfParseHtmlScript=mr.KeysRdfParseJsonLd=mr.KeysQueryOperation=mr.KeysExpressionEvaluator=mr.KeysInitQuery=mr.KeysHttpProxy=mr.KeysHttpMemento=mr.KeysHttpWayback=mr.KeysHttp=mr.KeysCore=void 0;const Ct=ke();mr.KeysCore={log:Ct.CONTEXT_KEY_LOGGER};mr.KeysHttp={includeCredentials:new Ct.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new Ct.ActionContextKey("@comunica/bus-http:auth"),fetch:new Ct.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new Ct.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new Ct.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new Ct.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new Ct.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new Ct.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new Ct.ActionContextKey("@comunica/bus-http:http-retry-status-codes"),httpAbortSignal:new Ct.ActionContextKey("@comunica/bus-http:http-abort-controller"),httpCache:new Ct.ActionContextKey("@comunica/bus-http:httpCache")};mr.KeysHttpWayback={recoverBrokenLinks:new Ct.ActionContextKey("@comunica/bus-http:recover-broken-links")};mr.KeysHttpMemento={datetime:new Ct.ActionContextKey("@comunica/actor-http-memento:datetime")};mr.KeysHttpProxy={httpProxyHandler:new Ct.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")};mr.KeysInitQuery={querySourcesUnidentified:new Ct.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new Ct.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new Ct.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new Ct.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new Ct.ActionContextKey("@comunica/actor-init-query:lenient"),parseUnsupportedVersions:new Ct.ActionContextKey("@comunica/actor-init-query:parseUnsupportedVersions"),queryString:new Ct.ActionContextKey("@comunica/actor-init-query:queryString"),query:new Ct.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new Ct.ActionContextKey("@comunica/actor-init-query:baseIRI"),fileBaseIRI:new Ct.ActionContextKey("@comunica/actor-init-query:fileBaseIRI"),functionArgumentsCache:new Ct.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new Ct.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new Ct.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new Ct.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new Ct.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),extensionFunctionsAlwaysPushdown:new Ct.ActionContextKey("@comunica/actor-init-query:extensionFunctionsAlwaysPushdown"),cliArgsHandlers:new Ct.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new Ct.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new Ct.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new Ct.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new Ct.ActionContextKey("@context"),invalidateCache:new Ct.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new Ct.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new Ct.ActionContextKey("@comunica/actor-init-query:distinctConstruct")};mr.KeysExpressionEvaluator={extensionFunctionCreator:new Ct.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new Ct.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new Ct.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new Ct.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")};mr.KeysQueryOperation={operation:new Ct.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new Ct.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new Ct.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new Ct.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new Ct.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new Ct.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new Ct.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new Ct.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new Ct.ActionContextKey("@comunica/bus-query-operation:querySources"),serviceSources:new Ct.ActionContextKey("@comunica/bus-query-operation:serviceSources")};mr.KeysRdfParseJsonLd={documentLoader:new Ct.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new Ct.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new Ct.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")};mr.KeysRdfParseHtmlScript={processingHtmlScript:new Ct.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new Ct.ActionContextKey("extractAllScripts")};mr.KeysRdfSerialize={rdfSerializationPrefixes:new Ct.ActionContextKey("@comunica/bus-rdf-serialize:rdfSerializationPrefixes")};mr.KeysQuerySourceIdentify={sourceIds:new Ct.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),traverse:new Ct.ActionContextKey("@comunica/bus-query-source-identify:traverse")};mr.KeysRdfUpdateQuads={destination:new Ct.ActionContextKey("@comunica/bus-rdf-update-quads:destination")};mr.KeysMergeBindingsContext={sourcesBinding:new Ct.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")};mr.KeysRdfJoin={lastPhysicalJoin:new Ct.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")};mr.KeysStatistics={discoveredLinks:new Ct.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new Ct.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new Ct.ActionContextKey("@comunica/statistic:intermediateResults")};(function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mr,t)})(dt);Object.defineProperty(HF,"__esModule",{value:!0});HF.QueryEngineBase=void 0;const ptt=dt,E_=ke();class HN{constructor(e){k(this,"actorInitQuery");this.actorInitQuery=e}async queryBindings(e,r){return this.queryOfType(e,r,"bindings")}async queryQuads(e,r){return this.queryOfType(e,r,"quads")}async queryBoolean(e,r){return this.queryOfType(e,r,"boolean")}async queryVoid(e,r){return this.queryOfType(e,r,"void")}async queryOfType(e,r,n){const i=await this.query(e,r);if(i.resultType===n)return await i.execute();throw new Error(`Query result type '${n}' was expected, while '${i.resultType}' was found.`)}async query(e,r){const n=await this.queryOrExplain(e,r);if("explain"in n)throw new Error("Tried to explain a query when in query-only mode");return n}async explain(e,r,n){return r.explain=n,await this.queryOrExplain(e,r)}async queryOrExplain(e,r){const n=E_.ActionContext.ensureActionContext(r);n.get(ptt.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:i}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:e,context:n});return"explain"in i?i:HN.internalToFinalResult(i)}async getResultMediaTypes(e){return e=E_.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(e){return e=E_.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(e,r,n){if(n=E_.ActionContext.ensureActionContext(n),!r)switch(e.resultType){case"bindings":r="application/json";break;case"quads":r="application/trig";break;default:r="simple";break}const i={...await HN.finalToInternalResult(e),context:n};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:n,handle:i,handleMediaType:r})).handle}invalidateHttpCache(e,r){return r=E_.ActionContext.ensureActionContext(r),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:e,context:r})}static internalToFinalResult(e){switch(e.type){case"bindings":return{resultType:"bindings",execute:async()=>e.bindingsStream,metadata:async()=>{const r=await e.metadata();return r.variables=r.variables.map(n=>n.variable),r},context:e.context};case"quads":return{resultType:"quads",execute:async()=>e.quadStream,metadata:async()=>await e.metadata(),context:e.context};case"boolean":return{resultType:"boolean",execute:async()=>e.execute(),context:e.context};case"void":return{resultType:"void",execute:async()=>e.execute(),context:e.context}}}static async finalToInternalResult(e){switch(e.resultType){case"bindings":return{type:"bindings",bindingsStream:await e.execute(),metadata:async()=>{const r=await e.metadata();return r.variables=r.variables.map(n=>({variable:n,canBeUndef:!1})),r}};case"quads":return{type:"quads",quadStream:await e.execute(),metadata:async()=>await e.metadata()};case"boolean":return{type:"boolean",execute:()=>e.execute()};case"void":return{type:"void",execute:()=>e.execute()}}}}HF.QueryEngineBase=HN;(function(t){var e=E&&E.__createBinding||(Object.create?function(i,a,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(a,s);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,o,c)}:function(i,a,s,o){o===void 0&&(o=s),i[o]=a[s]}),r=E&&E.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryEngineBase=void 0,r(rO,t),r(GF,t);var n=HF;Object.defineProperty(t,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})})(qk);var fL={},I_={},hL={},pL={},BZ;function _tt(){return BZ||(BZ=1,Object.defineProperty(pL,"__esModule",{value:!0})),pL}var _L={},qZ;function mtt(){return qZ||(qZ=1,Object.defineProperty(_L,"__esModule",{value:!0})),_L}var mL={},UZ;function gtt(){return UZ||(UZ=1,Object.defineProperty(mL,"__esModule",{value:!0})),mL}var gL={},VZ;function ytt(){return VZ||(VZ=1,Object.defineProperty(gL,"__esModule",{value:!0})),gL}var yL={},GZ;function btt(){return GZ||(GZ=1,Object.defineProperty(yL,"__esModule",{value:!0})),yL}var bL={},HZ;function vtt(){return HZ||(HZ=1,Object.defineProperty(bL,"__esModule",{value:!0})),bL}var vL={},kZ;function Att(){return kZ||(kZ=1,Object.defineProperty(vL,"__esModule",{value:!0})),vL}var AL={},zZ;function Ttt(){return zZ||(zZ=1,Object.defineProperty(AL,"__esModule",{value:!0})),AL}var TL={},QZ;function wtt(){return QZ||(QZ=1,Object.defineProperty(TL,"__esModule",{value:!0})),TL}var wL={},WZ;function Stt(){return WZ||(WZ=1,Object.defineProperty(wL,"__esModule",{value:!0})),wL}var SL={},KZ;function xtt(){return KZ||(KZ=1,Object.defineProperty(SL,"__esModule",{value:!0})),SL}var xL={},XZ;function Ett(){return XZ||(XZ=1,Object.defineProperty(xL,"__esModule",{value:!0})),xL}var EL={},JZ;function Itt(){return JZ||(JZ=1,Object.defineProperty(EL,"__esModule",{value:!0})),EL}var IL={},YZ;function Ott(){return YZ||(YZ=1,Object.defineProperty(IL,"__esModule",{value:!0})),IL}var OL={},$Z;function Rtt(){return $Z||($Z=1,Object.defineProperty(OL,"__esModule",{value:!0})),OL}var RL={},ZZ;function Ptt(){return ZZ||(ZZ=1,Object.defineProperty(RL,"__esModule",{value:!0})),RL}var PL={},eee;function Ntt(){return eee||(eee=1,Object.defineProperty(PL,"__esModule",{value:!0})),PL}var NL={},tee;function Ftt(){return tee||(tee=1,Object.defineProperty(NL,"__esModule",{value:!0})),NL}var FL={},ree;function Mtt(){return ree||(ree=1,Object.defineProperty(FL,"__esModule",{value:!0})),FL}var ML={},nee;function Dtt(){return nee||(nee=1,Object.defineProperty(ML,"__esModule",{value:!0})),ML}var O_={},iee;function Ctt(){var e;if(iee)return O_;iee=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.Logger=void 0;let t=(e=class{static getLevelOrdinal(n){return e.LEVELS[n]}},k(e,"LEVELS",{trace:0,debug:1,info:2,warn:3,error:4,fatal:5}),e);return O_.Logger=t,O_}var R_={},aee;function Ltt(){if(aee)return R_;aee=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.ExpressionType=void 0;var t;return function(e){e.Aggregate="aggregate",e.Existence="existence",e.Operator="operator",e.Term="term",e.Variable="variable"}(t||(R_.ExpressionType=t={})),R_}var see;function Bl(){return see||(see=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(_tt(),t),r(mtt(),t),r(gtt(),t),r(ytt(),t),r(btt(),t),r(vtt(),t),r(Att(),t),r(Ttt(),t),r(wtt(),t),r(Stt(),t),r(xtt(),t),r(Ett(),t),r(Itt(),t),r(Ott(),t),r(Rtt(),t),r(Ptt(),t),r(Ntt(),t),r(Ftt(),t),r(Mtt(),t),r(Dtt(),t),r(Ctt(),t),r(Ltt(),t)}(hL)),hL}var oee;function jtt(){if(oee)return I_;oee=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.LoggerVoid=void 0;const t=Bl();let e=class extends t.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return I_.LoggerVoid=e,I_}var uee;function Btt(){return uee||(uee=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(jtt(),t)}(fL)),fL}var DL={},ad={},cee;function vIe(){if(cee)return ad;cee=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.MediatorFunctionFactory=ad.ActorFunctionFactory=void 0;const t=ke();let e=class extends t.Actor{constructor(i){super(i)}};ad.ActorFunctionFactory=e;class r extends t.Mediator{}return ad.MediatorFunctionFactory=r,ad}var P_={},lee;function qtt(){if(lee)return P_;lee=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.ActorFunctionFactoryDedicated=void 0;const t=ke(),e=vIe();let r=class extends e.ActorFunctionFactory{constructor(a){super(a);k(this,"functionNames");k(this,"termFunction");this.functionNames=a.functionNames,this.termFunction=a.termFunction}async test(a){return this.functionNames.includes(a.functionName)&&(this.termFunction||!a.requireTermExpression)?(0,t.passTestVoid)():(0,t.failTest)(`Actor ${this.name} can not provide implementation for "${a.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return P_.ActorFunctionFactoryDedicated=r,P_}var N_={},dee;function Utt(){if(dee)return N_;dee=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.BusFunctionFactory=void 0;const t=ke();let e=class extends t.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return N_.BusFunctionFactory=e,N_}var sd={},CL={},F_={},LL={},jL={},BL={},qL={},UL={},VL={},GL={},HL,fee;function Vtt(){return fee||(fee=1,HL=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var s=a[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}),HL}var kL={},zL={},QL={},WL={},KL={},XL={},JL={},hee;function Gtt(){return hee||(hee=1,Object.defineProperty(JL,"__esModule",{value:!0})),JL}var M_={},D_={},C_={},pee;function AIe(){if(pee)return C_;pee=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.AstCoreFactory=void 0;let t=class{constructor(r={}){k(this,"tracksSourceLocation");this.tracksSourceLocation=r.tracksSourceLocation??!0}wrap(r,n){return{val:r,loc:n}}isLocalized(r){return typeof r=="object"&&r!==null&&"loc"in r&&typeof r.loc=="object"&&r.loc!==null&&"sourceLocationType"in r.loc}sourceLocation(...r){if(!this.tracksSourceLocation)return this.gen();const n=r.filter(o=>o!==void 0);if(n.length===0)return this.sourceLocationNoMaterialize();const i=n.filter(o=>!this.isLocalized(o)||this.isSourceLocationSource(o.loc)||this.isSourceLocationStringReplace(o.loc)||this.isSourceLocationNodeReplace(o.loc));if(i.length===0)return this.gen();const a=i.at(0),s=i.at(-1);return{sourceLocationType:"source",start:this.isLocalized(a)?a.loc.start:a.startOffset,end:this.isLocalized(s)?s.loc.end:s.endOffset+1}}sourceLocationNoMaterialize(){return this.tracksSourceLocation?{sourceLocationType:"noMaterialize"}:this.gen()}dematerialized(r){return{...r,loc:this.sourceLocationNoMaterialize()}}safeObjectTransform(r,n){return r&&typeof r=="object"?Array.isArray(r)?r.map(i=>this.safeObjectTransform(i,n)):n(r):r}forcedAutoGenTree(r){const n={...r};for(const[i,a]of Object.entries(n))n[i]=this.safeObjectTransform(a,s=>this.forcedAutoGenTree(s));return this.isLocalized(n)&&(n.loc=this.gen()),n}forceMaterialized(r){return this.isSourceLocationNoMaterialize(r.loc)?this.forcedAutoGenTree(r):{...r}}isSourceLocation(r){return"sourceLocationType"in r}sourceLocationSource(r,n){return{sourceLocationType:"source",start:r,end:n}}sourceLocationInlinedSource(r,n,i,a,s=0,o=r.length){return this.tracksSourceLocation?(this.isSourceLocationSource(n)&&(s=n.start,o=n.end),{sourceLocationType:"inlinedSource",newSource:r,start:i,end:a,loc:n,startOnNew:s,endOnNew:o}):this.gen()}isSourceLocationInlinedSource(r){return this.isSourceLocation(r)&&r.sourceLocationType==="inlinedSource"}gen(){return{sourceLocationType:"autoGenerate"}}isSourceLocationSource(r){return this.isSourceLocation(r)&&r.sourceLocationType==="source"}sourceLocationStringReplace(r,n,i){return this.tracksSourceLocation?{sourceLocationType:"stringReplace",newSource:r,start:n,end:i}:this.gen()}isSourceLocationStringReplace(r){return this.isSourceLocation(r)&&r.sourceLocationType==="stringReplace"}sourceLocationNodeReplaceUnsafe(r){if(this.isSourceLocationSource(r))return this.sourceLocationNodeReplace(r);if(this.isSourceLocationInlinedSource(r))return this.sourceLocationNodeReplaceUnsafe(r.loc);throw new Error(`Cannot convert SourceLocation of type ${r.sourceLocationType} to SourceLocationNodeReplace`)}sourceLocationNodeReplace(r,n){let i,a;return typeof r=="number"?(i=r,a=n):(i=r.start,a=r.end),{sourceLocationType:"nodeReplace",start:i,end:a}}isSourceLocationNodeReplace(r){return this.isSourceLocation(r)&&r.sourceLocationType==="nodeReplace"}isSourceLocationNodeAutoGenerate(r){return this.isSourceLocation(r)&&r.sourceLocationType==="autoGenerate"}isPrintingLoc(r){return this.isSourceLocationNodeReplace(r)||this.isSourceLocationNodeAutoGenerate(r)||this.isSourceLocationInlinedSource(r)&&this.isPrintingLoc(r.loc)}printFilter(r,n){this.isPrintingLoc(r.loc)&&n()}isSourceLocationNoMaterialize(r){return this.isSourceLocation(r)&&r.sourceLocationType==="noMaterialize"}isOfType(r,n){return r.type===n}isOfSubType(r,n,i){const a=r;return a.type===n&&a.subType===i}};return C_.AstCoreFactory=t,C_}var du={},mE={exports:{}};mE.exports;var _ee;function kF(){return _ee||(_ee=1,function(t,e){var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(b,I)=>{for(var L in I)r(b,L,{get:I[L],enumerable:!0})},o=(b,I,L,X)=>{if(I&&typeof I=="object"||typeof I=="function")for(let te of i(I))!a.call(b,te)&&te!==L&&r(b,te,{get:()=>I[te],enumerable:!(X=n(I,te))||X.enumerable});return b},c=b=>o(r({},"__esModule",{value:!0}),b),u={};s(u,{Alternation:()=>Wa,Alternative:()=>Bi,CstParser:()=>EBe,EMPTY_ALT:()=>xBe,EOF:()=>rc,EarlyExitException:()=>GK,EmbeddedActionsParser:()=>IBe,GAstVisitor:()=>ec,LLkLookaheadStrategy:()=>QK,Lexer:()=>Ta,LexerDefinitionErrorType:()=>dn,MismatchedTokenException:()=>rD,NoViableAltException:()=>UK,NonTerminal:()=>ji,NotAllInputParsedException:()=>VK,Option:()=>qi,Parser:()=>GBe,ParserDefinitionErrorType:()=>pi,Repetition:()=>In,RepetitionMandatory:()=>ws,RepetitionMandatoryWithSeparator:()=>Ss,RepetitionWithSeparator:()=>Qa,Rule:()=>Wl,Terminal:()=>un,VERSION:()=>l,clearCache:()=>VBe,createSyntaxDiagramsCode:()=>UBe,createToken:()=>XM,createTokenInstance:()=>f2,defaultLexerErrorProvider:()=>_K,defaultParserErrorProvider:()=>JM,generateCstDts:()=>qBe,getLookaheadPaths:()=>O8e,isRecognitionException:()=>G0,serializeGrammar:()=>YW,serializeProduction:()=>D0,tokenLabel:()=>Qf,tokenMatcher:()=>xK,tokenName:()=>g8e}),t.exports=c(u);var l="11.0.3",d=typeof E=="object"&&E&&E.Object===Object&&E,f=d,h=typeof self=="object"&&self&&self.Object===Object&&self,p=f||h||Function("return this")(),_=p,g=_.Symbol,m=g,y=Object.prototype,v=y.hasOwnProperty,A=y.toString,T=m?m.toStringTag:void 0;function S(b){var I=v.call(b,T),L=b[T];try{b[T]=void 0;var X=!0}catch{}var te=A.call(b);return X&&(I?b[T]=L:delete b[T]),te}var P=S,j=Object.prototype,F=j.toString;function N(b){return F.call(b)}var R=N,C="[object Null]",M="[object Undefined]",U=m?m.toStringTag:void 0;function B(b){return b==null?b===void 0?M:C:U&&U in Object(b)?P(b):R(b)}var G=B;function K(b){return b!=null&&typeof b=="object"}var $=K,se="[object Symbol]";function pe(b){return typeof b=="symbol"||$(b)&&G(b)==se}var we=pe;function Ce(b,I){for(var L=-1,X=b==null?0:b.length,te=Array(X);++L<X;)te[L]=I(b[L],L,b);return te}var Le=Ce,Ie=Array.isArray,Oe=Ie,ye=m?m.prototype:void 0,Me=ye?ye.toString:void 0;function W(b){if(typeof b=="string")return b;if(Oe(b))return Le(b,W)+"";if(we(b))return Me?Me.call(b):"";var I=b+"";return I=="0"&&1/b==-1/0?"-0":I}var ft=W,le=/\s/;function me(b){for(var I=b.length;I--&&le.test(b.charAt(I)););return I}var Z=me,q=/^\s+/;function J(b){return b&&b.slice(0,Z(b)+1).replace(q,"")}var re=J;function _e(b){var I=typeof b;return b!=null&&(I=="object"||I=="function")}var he=_e,ue=NaN,Ue=/^[-+]0x[0-9a-f]+$/i,De=/^0b[01]+$/i,Je=/^0o[0-7]+$/i,ze=parseInt;function ve(b){if(typeof b=="number")return b;if(we(b))return ue;if(he(b)){var I=typeof b.valueOf=="function"?b.valueOf():b;b=he(I)?I+"":I}if(typeof b!="string")return b===0?b:+b;b=re(b);var L=De.test(b);return L||Je.test(b)?ze(b.slice(2),L?2:8):Ue.test(b)?ue:+b}var de=ve,Ge=1/0,it=17976931348623157e292;function ae(b){if(!b)return b===0?b:0;if(b=de(b),b===Ge||b===-Ge){var I=b<0?-1:1;return I*it}return b===b?b:0}var z=ae;function V(b){var I=z(b),L=I%1;return I===I?L?I-L:I:0}var x=V;function O(b){return b}var D=O,H="[object AsyncFunction]",Y="[object Function]",Q="[object GeneratorFunction]",ee="[object Proxy]";function ie(b){if(!he(b))return!1;var I=G(b);return I==Y||I==Q||I==H||I==ee}var Re=ie,oe=_["__core-js_shared__"],Te=oe,We=function(){var b=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}();function Qe(b){return!!We&&We in b}var Xe=Qe,Pe=Function.prototype,He=Pe.toString;function Ee(b){if(b!=null){try{return He.call(b)}catch{}try{return b+""}catch{}}return""}var ce=Ee,ne=/[\\^$.*+?()[\]{}|]/g,xe=/^\[object .+?Constructor\]$/,Be=Function.prototype,ht=Object.prototype,Et=Be.toString,rt=ht.hasOwnProperty,_t=RegExp("^"+Et.call(rt).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ut(b){if(!he(b)||Xe(b))return!1;var I=Re(b)?_t:xe;return I.test(ce(b))}var Pt=ut;function Ot(b,I){return b==null?void 0:b[I]}var or=Ot;function Qt(b,I){var L=or(b,I);return Pt(L)?L:void 0}var mt=Qt,wn=mt(_,"WeakMap"),gt=wn,Fe=Object.create,$e=function(){function b(){}return function(I){if(!he(I))return{};if(Fe)return Fe(I);b.prototype=I;var L=new b;return b.prototype=void 0,L}}(),tt=$e;function St(b,I,L){switch(L.length){case 0:return b.call(I);case 1:return b.call(I,L[0]);case 2:return b.call(I,L[0],L[1]);case 3:return b.call(I,L[0],L[1],L[2])}return b.apply(I,L)}var Ut=St;function ar(){}var nr=ar;function fi(b,I){var L=-1,X=b.length;for(I||(I=Array(X));++L<X;)I[L]=b[L];return I}var Zo=fi,Ae=800,Ke=16,st=Date.now;function at(b){var I=0,L=0;return function(){var X=st(),te=Ke-(X-L);if(L=X,te>0){if(++I>=Ae)return arguments[0]}else I=0;return b.apply(void 0,arguments)}}var nt=at;function At(b){return function(){return b}}var Rt=At,Tt=function(){try{var b=mt(Object,"defineProperty");return b({},"",{}),b}catch{}}(),Nt=Tt,Bt=Nt?function(b,I){return Nt(b,"toString",{configurable:!0,enumerable:!1,value:Rt(I),writable:!0})}:D,kt=Bt,Vt=nt(kt),lr=Vt;function xr(b,I){for(var L=-1,X=b==null?0:b.length;++L<X&&I(b[L],L,b)!==!1;);return b}var Qr=xr;function on(b,I,L,X){for(var te=b.length,ge=L+(X?1:-1);X?ge--:++ge<te;)if(I(b[ge],ge,b))return ge;return-1}var Er=on;function zt(b){return b!==b}var Sr=zt;function yr(b,I,L){for(var X=L-1,te=b.length;++X<te;)if(b[X]===I)return X;return-1}var Ci=yr;function $u(b,I,L){return I===I?Ci(b,I,L):Er(b,Sr,L)}var ti=$u;function kl(b,I){var L=b==null?0:b.length;return!!L&&ti(b,I,0)>-1}var Rr=kl,hi=9007199254740991,Zi=/^(?:0|[1-9]\d*)$/;function ri(b,I){var L=typeof b;return I=I??hi,!!I&&(L=="number"||L!="symbol"&&Zi.test(b))&&b>-1&&b%1==0&&b<I}var qn=ri;function A0(b,I,L){I=="__proto__"&&Nt?Nt(b,I,{configurable:!0,enumerable:!0,value:L,writable:!0}):b[I]=L}var bs=A0;function X3e(b,I){return b===I||b!==b&&I!==I}var T0=X3e,J3e=Object.prototype,Y3e=J3e.hasOwnProperty;function $3e(b,I,L){var X=b[I];(!(Y3e.call(b,I)&&T0(X,L))||L===void 0&&!(I in b))&&bs(b,I,L)}var BO=$3e;function Z3e(b,I,L,X){var te=!L;L||(L={});for(var ge=-1,Se=I.length;++ge<Se;){var Ne=I[ge],je=X?X(L[Ne],b[Ne],Ne,L,b):void 0;je===void 0&&(je=b[Ne]),te?bs(L,Ne,je):BO(L,Ne,je)}return L}var w0=Z3e,qQ=Math.max;function eNe(b,I,L){return I=qQ(I===void 0?b.length-1:I,0),function(){for(var X=arguments,te=-1,ge=qQ(X.length-I,0),Se=Array(ge);++te<ge;)Se[te]=X[I+te];te=-1;for(var Ne=Array(I+1);++te<I;)Ne[te]=X[te];return Ne[I]=L(Se),Ut(b,this,Ne)}}var tNe=eNe;function rNe(b,I){return lr(tNe(b,I,D),b+"")}var yM=rNe,nNe=9007199254740991;function iNe(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=nNe}var bM=iNe;function aNe(b){return b!=null&&bM(b.length)&&!Re(b)}var no=aNe;function sNe(b,I,L){if(!he(L))return!1;var X=typeof I;return(X=="number"?no(L)&&qn(I,L.length):X=="string"&&I in L)?T0(L[I],b):!1}var qO=sNe;function oNe(b){return yM(function(I,L){var X=-1,te=L.length,ge=te>1?L[te-1]:void 0,Se=te>2?L[2]:void 0;for(ge=b.length>3&&typeof ge=="function"?(te--,ge):void 0,Se&&qO(L[0],L[1],Se)&&(ge=te<3?void 0:ge,te=1),I=Object(I);++X<te;){var Ne=L[X];Ne&&b(I,Ne,X,ge)}return I})}var uNe=oNe,cNe=Object.prototype;function lNe(b){var I=b&&b.constructor,L=typeof I=="function"&&I.prototype||cNe;return b===L}var S0=lNe;function dNe(b,I){for(var L=-1,X=Array(b);++L<b;)X[L]=I(L);return X}var fNe=dNe,hNe="[object Arguments]";function pNe(b){return $(b)&&G(b)==hNe}var UQ=pNe,VQ=Object.prototype,_Ne=VQ.hasOwnProperty,mNe=VQ.propertyIsEnumerable,gNe=UQ(function(){return arguments}())?UQ:function(b){return $(b)&&_Ne.call(b,"callee")&&!mNe.call(b,"callee")},UO=gNe;function yNe(){return!1}var bNe=yNe,GQ=e&&!e.nodeType&&e,HQ=GQ&&!0&&t&&!t.nodeType&&t,vNe=HQ&&HQ.exports===GQ,kQ=vNe?_.Buffer:void 0,ANe=kQ?kQ.isBuffer:void 0,TNe=ANe||bNe,x0=TNe,wNe="[object Arguments]",SNe="[object Array]",xNe="[object Boolean]",ENe="[object Date]",INe="[object Error]",ONe="[object Function]",RNe="[object Map]",PNe="[object Number]",NNe="[object Object]",FNe="[object RegExp]",MNe="[object Set]",DNe="[object String]",CNe="[object WeakMap]",LNe="[object ArrayBuffer]",jNe="[object DataView]",BNe="[object Float32Array]",qNe="[object Float64Array]",UNe="[object Int8Array]",VNe="[object Int16Array]",GNe="[object Int32Array]",HNe="[object Uint8Array]",kNe="[object Uint8ClampedArray]",zNe="[object Uint16Array]",QNe="[object Uint32Array]",Wr={};Wr[BNe]=Wr[qNe]=Wr[UNe]=Wr[VNe]=Wr[GNe]=Wr[HNe]=Wr[kNe]=Wr[zNe]=Wr[QNe]=!0,Wr[wNe]=Wr[SNe]=Wr[LNe]=Wr[xNe]=Wr[jNe]=Wr[ENe]=Wr[INe]=Wr[ONe]=Wr[RNe]=Wr[PNe]=Wr[NNe]=Wr[FNe]=Wr[MNe]=Wr[DNe]=Wr[CNe]=!1;function WNe(b){return $(b)&&bM(b.length)&&!!Wr[G(b)]}var KNe=WNe;function XNe(b){return function(I){return b(I)}}var E0=XNe,zQ=e&&!e.nodeType&&e,I0=zQ&&!0&&t&&!t.nodeType&&t,JNe=I0&&I0.exports===zQ,vM=JNe&&f.process,YNe=function(){try{var b=I0&&I0.require&&I0.require("util").types;return b||vM&&vM.binding&&vM.binding("util")}catch{}}(),Zu=YNe,QQ=Zu&&Zu.isTypedArray,$Ne=QQ?E0(QQ):KNe,AM=$Ne,ZNe=Object.prototype,eFe=ZNe.hasOwnProperty;function tFe(b,I){var L=Oe(b),X=!L&&UO(b),te=!L&&!X&&x0(b),ge=!L&&!X&&!te&&AM(b),Se=L||X||te||ge,Ne=Se?fNe(b.length,String):[],je=Ne.length;for(var ot in b)(I||eFe.call(b,ot))&&!(Se&&(ot=="length"||te&&(ot=="offset"||ot=="parent")||ge&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||qn(ot,je)))&&Ne.push(ot);return Ne}var WQ=tFe;function rFe(b,I){return function(L){return b(I(L))}}var KQ=rFe,nFe=KQ(Object.keys,Object),iFe=nFe,aFe=Object.prototype,sFe=aFe.hasOwnProperty;function oFe(b){if(!S0(b))return iFe(b);var I=[];for(var L in Object(b))sFe.call(b,L)&&L!="constructor"&&I.push(L);return I}var XQ=oFe;function uFe(b){return no(b)?WQ(b):XQ(b)}var va=uFe,cFe=Object.prototype,lFe=cFe.hasOwnProperty,dFe=uNe(function(b,I){if(S0(I)||no(I)){w0(I,va(I),b);return}for(var L in I)lFe.call(I,L)&&BO(b,L,I[L])}),ea=dFe;function fFe(b){var I=[];if(b!=null)for(var L in Object(b))I.push(L);return I}var hFe=fFe,pFe=Object.prototype,_Fe=pFe.hasOwnProperty;function mFe(b){if(!he(b))return hFe(b);var I=S0(b),L=[];for(var X in b)X=="constructor"&&(I||!_Fe.call(b,X))||L.push(X);return L}var gFe=mFe;function yFe(b){return no(b)?WQ(b,!0):gFe(b)}var VO=yFe,bFe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vFe=/^\w*$/;function AFe(b,I){if(Oe(b))return!1;var L=typeof b;return L=="number"||L=="symbol"||L=="boolean"||b==null||we(b)?!0:vFe.test(b)||!bFe.test(b)||I!=null&&b in Object(I)}var TM=AFe,TFe=mt(Object,"create"),O0=TFe;function wFe(){this.__data__=O0?O0(null):{},this.size=0}var SFe=wFe;function xFe(b){var I=this.has(b)&&delete this.__data__[b];return this.size-=I?1:0,I}var EFe=xFe,IFe="__lodash_hash_undefined__",OFe=Object.prototype,RFe=OFe.hasOwnProperty;function PFe(b){var I=this.__data__;if(O0){var L=I[b];return L===IFe?void 0:L}return RFe.call(I,b)?I[b]:void 0}var NFe=PFe,FFe=Object.prototype,MFe=FFe.hasOwnProperty;function DFe(b){var I=this.__data__;return O0?I[b]!==void 0:MFe.call(I,b)}var CFe=DFe,LFe="__lodash_hash_undefined__";function jFe(b,I){var L=this.__data__;return this.size+=this.has(b)?0:1,L[b]=O0&&I===void 0?LFe:I,this}var BFe=jFe;function jf(b){var I=-1,L=b==null?0:b.length;for(this.clear();++I<L;){var X=b[I];this.set(X[0],X[1])}}jf.prototype.clear=SFe,jf.prototype.delete=EFe,jf.prototype.get=NFe,jf.prototype.has=CFe,jf.prototype.set=BFe;var JQ=jf;function qFe(){this.__data__=[],this.size=0}var UFe=qFe;function VFe(b,I){for(var L=b.length;L--;)if(T0(b[L][0],I))return L;return-1}var GO=VFe,GFe=Array.prototype,HFe=GFe.splice;function kFe(b){var I=this.__data__,L=GO(I,b);if(L<0)return!1;var X=I.length-1;return L==X?I.pop():HFe.call(I,L,1),--this.size,!0}var zFe=kFe;function QFe(b){var I=this.__data__,L=GO(I,b);return L<0?void 0:I[L][1]}var WFe=QFe;function KFe(b){return GO(this.__data__,b)>-1}var XFe=KFe;function JFe(b,I){var L=this.__data__,X=GO(L,b);return X<0?(++this.size,L.push([b,I])):L[X][1]=I,this}var YFe=JFe;function Bf(b){var I=-1,L=b==null?0:b.length;for(this.clear();++I<L;){var X=b[I];this.set(X[0],X[1])}}Bf.prototype.clear=UFe,Bf.prototype.delete=zFe,Bf.prototype.get=WFe,Bf.prototype.has=XFe,Bf.prototype.set=YFe;var HO=Bf,$Fe=mt(_,"Map"),R0=$Fe;function ZFe(){this.size=0,this.__data__={hash:new JQ,map:new(R0||HO),string:new JQ}}var eMe=ZFe;function tMe(b){var I=typeof b;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?b!=="__proto__":b===null}var rMe=tMe;function nMe(b,I){var L=b.__data__;return rMe(I)?L[typeof I=="string"?"string":"hash"]:L.map}var kO=nMe;function iMe(b){var I=kO(this,b).delete(b);return this.size-=I?1:0,I}var aMe=iMe;function sMe(b){return kO(this,b).get(b)}var oMe=sMe;function uMe(b){return kO(this,b).has(b)}var cMe=uMe;function lMe(b,I){var L=kO(this,b),X=L.size;return L.set(b,I),this.size+=L.size==X?0:1,this}var dMe=lMe;function qf(b){var I=-1,L=b==null?0:b.length;for(this.clear();++I<L;){var X=b[I];this.set(X[0],X[1])}}qf.prototype.clear=eMe,qf.prototype.delete=aMe,qf.prototype.get=oMe,qf.prototype.has=cMe,qf.prototype.set=dMe;var zO=qf,fMe="Expected a function";function wM(b,I){if(typeof b!="function"||I!=null&&typeof I!="function")throw new TypeError(fMe);var L=function(){var X=arguments,te=I?I.apply(this,X):X[0],ge=L.cache;if(ge.has(te))return ge.get(te);var Se=b.apply(this,X);return L.cache=ge.set(te,Se)||ge,Se};return L.cache=new(wM.Cache||zO),L}wM.Cache=zO;var hMe=wM,pMe=500;function _Me(b){var I=hMe(b,function(X){return L.size===pMe&&L.clear(),X}),L=I.cache;return I}var mMe=_Me,gMe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yMe=/\\(\\)?/g,bMe=mMe(function(b){var I=[];return b.charCodeAt(0)===46&&I.push(""),b.replace(gMe,function(L,X,te,ge){I.push(te?ge.replace(yMe,"$1"):X||L)}),I}),vMe=bMe;function AMe(b){return b==null?"":ft(b)}var YQ=AMe;function TMe(b,I){return Oe(b)?b:TM(b,I)?[b]:vMe(YQ(b))}var QO=TMe;function wMe(b){if(typeof b=="string"||we(b))return b;var I=b+"";return I=="0"&&1/b==-1/0?"-0":I}var P0=wMe;function SMe(b,I){I=QO(I,b);for(var L=0,X=I.length;b!=null&&L<X;)b=b[P0(I[L++])];return L&&L==X?b:void 0}var SM=SMe;function xMe(b,I,L){var X=b==null?void 0:SM(b,I);return X===void 0?L:X}var EMe=xMe;function IMe(b,I){for(var L=-1,X=I.length,te=b.length;++L<X;)b[te+L]=I[L];return b}var xM=IMe,$Q=m?m.isConcatSpreadable:void 0;function OMe(b){return Oe(b)||UO(b)||!!($Q&&b&&b[$Q])}var RMe=OMe;function ZQ(b,I,L,X,te){var ge=-1,Se=b.length;for(L||(L=RMe),te||(te=[]);++ge<Se;){var Ne=b[ge];I>0&&L(Ne)?I>1?ZQ(Ne,I-1,L,X,te):xM(te,Ne):X||(te[te.length]=Ne)}return te}var EM=ZQ;function PMe(b){var I=b==null?0:b.length;return I?EM(b,1):[]}var Aa=PMe,NMe=KQ(Object.getPrototypeOf,Object),eW=NMe;function FMe(b,I,L){var X=-1,te=b.length;I<0&&(I=-I>te?0:te+I),L=L>te?te:L,L<0&&(L+=te),te=I>L?0:L-I>>>0,I>>>=0;for(var ge=Array(te);++X<te;)ge[X]=b[X+I];return ge}var IM=FMe;function MMe(b,I,L){var X=b.length;return L=L===void 0?X:L,!I&&L>=X?b:IM(b,I,L)}var DMe=MMe,CMe="\\ud800-\\udfff",LMe="\\u0300-\\u036f",jMe="\\ufe20-\\ufe2f",BMe="\\u20d0-\\u20ff",qMe=LMe+jMe+BMe,UMe="\\ufe0e\\ufe0f",VMe="\\u200d",GMe=RegExp("["+VMe+CMe+qMe+UMe+"]");function HMe(b){return GMe.test(b)}var tW=HMe;function kMe(b){return b.split("")}var zMe=kMe,rW="\\ud800-\\udfff",QMe="\\u0300-\\u036f",WMe="\\ufe20-\\ufe2f",KMe="\\u20d0-\\u20ff",XMe=QMe+WMe+KMe,JMe="\\ufe0e\\ufe0f",YMe="["+rW+"]",OM="["+XMe+"]",RM="\\ud83c[\\udffb-\\udfff]",$Me="(?:"+OM+"|"+RM+")",nW="[^"+rW+"]",iW="(?:\\ud83c[\\udde6-\\uddff]){2}",aW="[\\ud800-\\udbff][\\udc00-\\udfff]",ZMe="\\u200d",sW=$Me+"?",oW="["+JMe+"]?",eDe="(?:"+ZMe+"(?:"+[nW,iW,aW].join("|")+")"+oW+sW+")*",tDe=oW+sW+eDe,rDe="(?:"+[nW+OM+"?",OM,iW,aW,YMe].join("|")+")",nDe=RegExp(RM+"(?="+RM+")|"+rDe+tDe,"g");function iDe(b){return b.match(nDe)||[]}var aDe=iDe;function sDe(b){return tW(b)?aDe(b):zMe(b)}var oDe=sDe;function uDe(b){return function(I){I=YQ(I);var L=tW(I)?oDe(I):void 0,X=L?L[0]:I.charAt(0),te=L?DMe(L,1).join(""):I.slice(1);return X[b]()+te}}var cDe=uDe,lDe=cDe("toUpperCase"),uW=lDe;function dDe(b,I,L,X){var te=-1,ge=b==null?0:b.length;for(X&&ge&&(L=b[++te]);++te<ge;)L=I(L,b[te],te,b);return L}var fDe=dDe;function hDe(){this.__data__=new HO,this.size=0}var pDe=hDe;function _De(b){var I=this.__data__,L=I.delete(b);return this.size=I.size,L}var mDe=_De;function gDe(b){return this.__data__.get(b)}var yDe=gDe;function bDe(b){return this.__data__.has(b)}var vDe=bDe,ADe=200;function TDe(b,I){var L=this.__data__;if(L instanceof HO){var X=L.__data__;if(!R0||X.length<ADe-1)return X.push([b,I]),this.size=++L.size,this;L=this.__data__=new zO(X)}return L.set(b,I),this.size=L.size,this}var wDe=TDe;function Uf(b){var I=this.__data__=new HO(b);this.size=I.size}Uf.prototype.clear=pDe,Uf.prototype.delete=mDe,Uf.prototype.get=yDe,Uf.prototype.has=vDe,Uf.prototype.set=wDe;var N0=Uf;function SDe(b,I){return b&&w0(I,va(I),b)}var xDe=SDe;function EDe(b,I){return b&&w0(I,VO(I),b)}var IDe=EDe,cW=e&&!e.nodeType&&e,lW=cW&&!0&&t&&!t.nodeType&&t,ODe=lW&&lW.exports===cW,dW=ODe?_.Buffer:void 0,fW=dW?dW.allocUnsafe:void 0;function RDe(b,I){if(I)return b.slice();var L=b.length,X=fW?fW(L):new b.constructor(L);return b.copy(X),X}var PDe=RDe;function NDe(b,I){for(var L=-1,X=b==null?0:b.length,te=0,ge=[];++L<X;){var Se=b[L];I(Se,L,b)&&(ge[te++]=Se)}return ge}var PM=NDe;function FDe(){return[]}var hW=FDe,MDe=Object.prototype,DDe=MDe.propertyIsEnumerable,pW=Object.getOwnPropertySymbols,CDe=pW?function(b){return b==null?[]:(b=Object(b),PM(pW(b),function(I){return DDe.call(b,I)}))}:hW,NM=CDe;function LDe(b,I){return w0(b,NM(b),I)}var jDe=LDe,BDe=Object.getOwnPropertySymbols,qDe=BDe?function(b){for(var I=[];b;)xM(I,NM(b)),b=eW(b);return I}:hW,_W=qDe;function UDe(b,I){return w0(b,_W(b),I)}var VDe=UDe;function GDe(b,I,L){var X=I(b);return Oe(b)?X:xM(X,L(b))}var mW=GDe;function HDe(b){return mW(b,va,NM)}var FM=HDe;function kDe(b){return mW(b,VO,_W)}var gW=kDe,zDe=mt(_,"DataView"),MM=zDe,QDe=mt(_,"Promise"),DM=QDe,WDe=mt(_,"Set"),Vf=WDe,yW="[object Map]",KDe="[object Object]",bW="[object Promise]",vW="[object Set]",AW="[object WeakMap]",TW="[object DataView]",XDe=ce(MM),JDe=ce(R0),YDe=ce(DM),$De=ce(Vf),ZDe=ce(gt),zl=G;(MM&&zl(new MM(new ArrayBuffer(1)))!=TW||R0&&zl(new R0)!=yW||DM&&zl(DM.resolve())!=bW||Vf&&zl(new Vf)!=vW||gt&&zl(new gt)!=AW)&&(zl=function(b){var I=G(b),L=I==KDe?b.constructor:void 0,X=L?ce(L):"";if(X)switch(X){case XDe:return TW;case JDe:return yW;case YDe:return bW;case $De:return vW;case ZDe:return AW}return I});var Gf=zl,eCe=Object.prototype,tCe=eCe.hasOwnProperty;function rCe(b){var I=b.length,L=new b.constructor(I);return I&&typeof b[0]=="string"&&tCe.call(b,"index")&&(L.index=b.index,L.input=b.input),L}var nCe=rCe,iCe=_.Uint8Array,WO=iCe;function aCe(b){var I=new b.constructor(b.byteLength);return new WO(I).set(new WO(b)),I}var CM=aCe;function sCe(b,I){var L=I?CM(b.buffer):b.buffer;return new b.constructor(L,b.byteOffset,b.byteLength)}var oCe=sCe,uCe=/\w*$/;function cCe(b){var I=new b.constructor(b.source,uCe.exec(b));return I.lastIndex=b.lastIndex,I}var lCe=cCe,wW=m?m.prototype:void 0,SW=wW?wW.valueOf:void 0;function dCe(b){return SW?Object(SW.call(b)):{}}var fCe=dCe;function hCe(b,I){var L=I?CM(b.buffer):b.buffer;return new b.constructor(L,b.byteOffset,b.length)}var pCe=hCe,_Ce="[object Boolean]",mCe="[object Date]",gCe="[object Map]",yCe="[object Number]",bCe="[object RegExp]",vCe="[object Set]",ACe="[object String]",TCe="[object Symbol]",wCe="[object ArrayBuffer]",SCe="[object DataView]",xCe="[object Float32Array]",ECe="[object Float64Array]",ICe="[object Int8Array]",OCe="[object Int16Array]",RCe="[object Int32Array]",PCe="[object Uint8Array]",NCe="[object Uint8ClampedArray]",FCe="[object Uint16Array]",MCe="[object Uint32Array]";function DCe(b,I,L){var X=b.constructor;switch(I){case wCe:return CM(b);case _Ce:case mCe:return new X(+b);case SCe:return oCe(b,L);case xCe:case ECe:case ICe:case OCe:case RCe:case PCe:case NCe:case FCe:case MCe:return pCe(b,L);case gCe:return new X;case yCe:case ACe:return new X(b);case bCe:return lCe(b);case vCe:return new X;case TCe:return fCe(b)}}var CCe=DCe;function LCe(b){return typeof b.constructor=="function"&&!S0(b)?tt(eW(b)):{}}var jCe=LCe,BCe="[object Map]";function qCe(b){return $(b)&&Gf(b)==BCe}var UCe=qCe,xW=Zu&&Zu.isMap,VCe=xW?E0(xW):UCe,GCe=VCe,HCe="[object Set]";function kCe(b){return $(b)&&Gf(b)==HCe}var zCe=kCe,EW=Zu&&Zu.isSet,QCe=EW?E0(EW):zCe,WCe=QCe,KCe=1,XCe=2,JCe=4,IW="[object Arguments]",YCe="[object Array]",$Ce="[object Boolean]",ZCe="[object Date]",eLe="[object Error]",OW="[object Function]",tLe="[object GeneratorFunction]",rLe="[object Map]",nLe="[object Number]",RW="[object Object]",iLe="[object RegExp]",aLe="[object Set]",sLe="[object String]",oLe="[object Symbol]",uLe="[object WeakMap]",cLe="[object ArrayBuffer]",lLe="[object DataView]",dLe="[object Float32Array]",fLe="[object Float64Array]",hLe="[object Int8Array]",pLe="[object Int16Array]",_Le="[object Int32Array]",mLe="[object Uint8Array]",gLe="[object Uint8ClampedArray]",yLe="[object Uint16Array]",bLe="[object Uint32Array]",Ur={};Ur[IW]=Ur[YCe]=Ur[cLe]=Ur[lLe]=Ur[$Ce]=Ur[ZCe]=Ur[dLe]=Ur[fLe]=Ur[hLe]=Ur[pLe]=Ur[_Le]=Ur[rLe]=Ur[nLe]=Ur[RW]=Ur[iLe]=Ur[aLe]=Ur[sLe]=Ur[oLe]=Ur[mLe]=Ur[gLe]=Ur[yLe]=Ur[bLe]=!0,Ur[eLe]=Ur[OW]=Ur[uLe]=!1;function KO(b,I,L,X,te,ge){var Se,Ne=I&KCe,je=I&XCe,ot=I&JCe;if(L&&(Se=te?L(b,X,te,ge):L(b)),Se!==void 0)return Se;if(!he(b))return b;var ct=Oe(b);if(ct){if(Se=nCe(b),!Ne)return Zo(b,Se)}else{var pt=Gf(b),wt=pt==OW||pt==tLe;if(x0(b))return PDe(b,Ne);if(pt==RW||pt==IW||wt&&!te){if(Se=je||wt?{}:jCe(b),!Ne)return je?VDe(b,IDe(Se,b)):jDe(b,xDe(Se,b))}else{if(!Ur[pt])return te?b:{};Se=CCe(b,pt,Ne)}}ge||(ge=new N0);var Mt=ge.get(b);if(Mt)return Mt;ge.set(b,Se),WCe(b)?b.forEach(function(Ht){Se.add(KO(Ht,I,L,Ht,b,ge))}):GCe(b)&&b.forEach(function(Ht,Dt){Se.set(Dt,KO(Ht,I,L,Dt,b,ge))});var Jt=ot?je?gW:FM:je?VO:va,Xt=ct?void 0:Jt(b);return Qr(Xt||b,function(Ht,Dt){Xt&&(Dt=Ht,Ht=b[Dt]),BO(Se,Dt,KO(Ht,I,L,Dt,b,ge))}),Se}var vLe=KO,ALe=4;function TLe(b){return vLe(b,ALe)}var Qn=TLe;function wLe(b){for(var I=-1,L=b==null?0:b.length,X=0,te=[];++I<L;){var ge=b[I];ge&&(te[X++]=ge)}return te}var F0=wLe,SLe="__lodash_hash_undefined__";function xLe(b){return this.__data__.set(b,SLe),this}var ELe=xLe;function ILe(b){return this.__data__.has(b)}var OLe=ILe;function XO(b){var I=-1,L=b==null?0:b.length;for(this.__data__=new zO;++I<L;)this.add(b[I])}XO.prototype.add=XO.prototype.push=ELe,XO.prototype.has=OLe;var LM=XO;function RLe(b,I){for(var L=-1,X=b==null?0:b.length;++L<X;)if(I(b[L],L,b))return!0;return!1}var PW=RLe;function PLe(b,I){return b.has(I)}var jM=PLe,NLe=1,FLe=2;function MLe(b,I,L,X,te,ge){var Se=L&NLe,Ne=b.length,je=I.length;if(Ne!=je&&!(Se&&je>Ne))return!1;var ot=ge.get(b),ct=ge.get(I);if(ot&&ct)return ot==I&&ct==b;var pt=-1,wt=!0,Mt=L&FLe?new LM:void 0;for(ge.set(b,I),ge.set(I,b);++pt<Ne;){var Jt=b[pt],Xt=I[pt];if(X)var Ht=Se?X(Xt,Jt,pt,I,b,ge):X(Jt,Xt,pt,b,I,ge);if(Ht!==void 0){if(Ht)continue;wt=!1;break}if(Mt){if(!PW(I,function(Dt,Gt){if(!jM(Mt,Gt)&&(Jt===Dt||te(Jt,Dt,L,X,ge)))return Mt.push(Gt)})){wt=!1;break}}else if(!(Jt===Xt||te(Jt,Xt,L,X,ge))){wt=!1;break}}return ge.delete(b),ge.delete(I),wt}var NW=MLe;function DLe(b){var I=-1,L=Array(b.size);return b.forEach(function(X,te){L[++I]=[te,X]}),L}var CLe=DLe;function LLe(b){var I=-1,L=Array(b.size);return b.forEach(function(X){L[++I]=X}),L}var BM=LLe,jLe=1,BLe=2,qLe="[object Boolean]",ULe="[object Date]",VLe="[object Error]",GLe="[object Map]",HLe="[object Number]",kLe="[object RegExp]",zLe="[object Set]",QLe="[object String]",WLe="[object Symbol]",KLe="[object ArrayBuffer]",XLe="[object DataView]",FW=m?m.prototype:void 0,qM=FW?FW.valueOf:void 0;function JLe(b,I,L,X,te,ge,Se){switch(L){case XLe:if(b.byteLength!=I.byteLength||b.byteOffset!=I.byteOffset)return!1;b=b.buffer,I=I.buffer;case KLe:return!(b.byteLength!=I.byteLength||!ge(new WO(b),new WO(I)));case qLe:case ULe:case HLe:return T0(+b,+I);case VLe:return b.name==I.name&&b.message==I.message;case kLe:case QLe:return b==I+"";case GLe:var Ne=CLe;case zLe:var je=X&jLe;if(Ne||(Ne=BM),b.size!=I.size&&!je)return!1;var ot=Se.get(b);if(ot)return ot==I;X|=BLe,Se.set(b,I);var ct=NW(Ne(b),Ne(I),X,te,ge,Se);return Se.delete(b),ct;case WLe:if(qM)return qM.call(b)==qM.call(I)}return!1}var YLe=JLe,$Le=1,ZLe=Object.prototype,eje=ZLe.hasOwnProperty;function tje(b,I,L,X,te,ge){var Se=L&$Le,Ne=FM(b),je=Ne.length,ot=FM(I),ct=ot.length;if(je!=ct&&!Se)return!1;for(var pt=je;pt--;){var wt=Ne[pt];if(!(Se?wt in I:eje.call(I,wt)))return!1}var Mt=ge.get(b),Jt=ge.get(I);if(Mt&&Jt)return Mt==I&&Jt==b;var Xt=!0;ge.set(b,I),ge.set(I,b);for(var Ht=Se;++pt<je;){wt=Ne[pt];var Dt=b[wt],Gt=I[wt];if(X)var bt=Se?X(Gt,Dt,wt,I,b,ge):X(Dt,Gt,wt,b,I,ge);if(!(bt===void 0?Dt===Gt||te(Dt,Gt,L,X,ge):bt)){Xt=!1;break}Ht||(Ht=wt=="constructor")}if(Xt&&!Ht){var sr=b.constructor,Kr=I.constructor;sr!=Kr&&"constructor"in b&&"constructor"in I&&!(typeof sr=="function"&&sr instanceof sr&&typeof Kr=="function"&&Kr instanceof Kr)&&(Xt=!1)}return ge.delete(b),ge.delete(I),Xt}var rje=tje,nje=1,MW="[object Arguments]",DW="[object Array]",JO="[object Object]",ije=Object.prototype,CW=ije.hasOwnProperty;function aje(b,I,L,X,te,ge){var Se=Oe(b),Ne=Oe(I),je=Se?DW:Gf(b),ot=Ne?DW:Gf(I);je=je==MW?JO:je,ot=ot==MW?JO:ot;var ct=je==JO,pt=ot==JO,wt=je==ot;if(wt&&x0(b)){if(!x0(I))return!1;Se=!0,ct=!1}if(wt&&!ct)return ge||(ge=new N0),Se||AM(b)?NW(b,I,L,X,te,ge):YLe(b,I,je,L,X,te,ge);if(!(L&nje)){var Mt=ct&&CW.call(b,"__wrapped__"),Jt=pt&&CW.call(I,"__wrapped__");if(Mt||Jt){var Xt=Mt?b.value():b,Ht=Jt?I.value():I;return ge||(ge=new N0),te(Xt,Ht,L,X,ge)}}return wt?(ge||(ge=new N0),rje(b,I,L,X,te,ge)):!1}var sje=aje;function LW(b,I,L,X,te){return b===I?!0:b==null||I==null||!$(b)&&!$(I)?b!==b&&I!==I:sje(b,I,L,X,LW,te)}var jW=LW,oje=1,uje=2;function cje(b,I,L,X){var te=L.length,ge=te,Se=!X;if(b==null)return!ge;for(b=Object(b);te--;){var Ne=L[te];if(Se&&Ne[2]?Ne[1]!==b[Ne[0]]:!(Ne[0]in b))return!1}for(;++te<ge;){Ne=L[te];var je=Ne[0],ot=b[je],ct=Ne[1];if(Se&&Ne[2]){if(ot===void 0&&!(je in b))return!1}else{var pt=new N0;if(X)var wt=X(ot,ct,je,b,I,pt);if(!(wt===void 0?jW(ct,ot,oje|uje,X,pt):wt))return!1}}return!0}var lje=cje;function dje(b){return b===b&&!he(b)}var BW=dje;function fje(b){for(var I=va(b),L=I.length;L--;){var X=I[L],te=b[X];I[L]=[X,te,BW(te)]}return I}var hje=fje;function pje(b,I){return function(L){return L==null?!1:L[b]===I&&(I!==void 0||b in Object(L))}}var qW=pje;function _je(b){var I=hje(b);return I.length==1&&I[0][2]?qW(I[0][0],I[0][1]):function(L){return L===b||lje(L,b,I)}}var mje=_je;function gje(b,I){return b!=null&&I in Object(b)}var yje=gje;function bje(b,I,L){I=QO(I,b);for(var X=-1,te=I.length,ge=!1;++X<te;){var Se=P0(I[X]);if(!(ge=b!=null&&L(b,Se)))break;b=b[Se]}return ge||++X!=te?ge:(te=b==null?0:b.length,!!te&&bM(te)&&qn(Se,te)&&(Oe(b)||UO(b)))}var UW=bje;function vje(b,I){return b!=null&&UW(b,I,yje)}var Aje=vje,Tje=1,wje=2;function Sje(b,I){return TM(b)&&BW(I)?qW(P0(b),I):function(L){var X=EMe(L,b);return X===void 0&&X===I?Aje(L,b):jW(I,X,Tje|wje)}}var xje=Sje;function Eje(b){return function(I){return I==null?void 0:I[b]}}var Ije=Eje;function Oje(b){return function(I){return SM(I,b)}}var Rje=Oje;function Pje(b){return TM(b)?Ije(P0(b)):Rje(b)}var Nje=Pje;function Fje(b){return typeof b=="function"?b:b==null?D:typeof b=="object"?Oe(b)?xje(b[0],b[1]):mje(b):Nje(b)}var io=Fje;function Mje(b,I,L,X){for(var te=-1,ge=b==null?0:b.length;++te<ge;){var Se=b[te];I(X,Se,L(Se),b)}return X}var Dje=Mje;function Cje(b){return function(I,L,X){for(var te=-1,ge=Object(I),Se=X(I),Ne=Se.length;Ne--;){var je=Se[b?Ne:++te];if(L(ge[je],je,ge)===!1)break}return I}}var Lje=Cje,jje=Lje(),Bje=jje;function qje(b,I){return b&&Bje(b,I,va)}var Uje=qje;function Vje(b,I){return function(L,X){if(L==null)return L;if(!no(L))return b(L,X);for(var te=L.length,ge=I?te:-1,Se=Object(L);(I?ge--:++ge<te)&&X(Se[ge],ge,Se)!==!1;);return L}}var Gje=Vje,Hje=Gje(Uje),Ql=Hje;function kje(b,I,L,X){return Ql(b,function(te,ge,Se){I(X,te,L(te),Se)}),X}var zje=kje;function Qje(b,I){return function(L,X){var te=Oe(L)?Dje:zje,ge=I?I():{};return te(L,b,io(X),ge)}}var Wje=Qje,VW=Object.prototype,Kje=VW.hasOwnProperty,Xje=yM(function(b,I){b=Object(b);var L=-1,X=I.length,te=X>2?I[2]:void 0;for(te&&qO(I[0],I[1],te)&&(X=1);++L<X;)for(var ge=I[L],Se=VO(ge),Ne=-1,je=Se.length;++Ne<je;){var ot=Se[Ne],ct=b[ot];(ct===void 0||T0(ct,VW[ot])&&!Kje.call(b,ot))&&(b[ot]=ge[ot])}return b}),UM=Xje;function Jje(b){return $(b)&&no(b)}var GW=Jje;function Yje(b,I,L){for(var X=-1,te=b==null?0:b.length;++X<te;)if(L(I,b[X]))return!0;return!1}var HW=Yje,$je=200;function Zje(b,I,L,X){var te=-1,ge=Rr,Se=!0,Ne=b.length,je=[],ot=I.length;if(!Ne)return je;L&&(I=Le(I,E0(L))),X?(ge=HW,Se=!1):I.length>=$je&&(ge=jM,Se=!1,I=new LM(I));e:for(;++te<Ne;){var ct=b[te],pt=L==null?ct:L(ct);if(ct=X||ct!==0?ct:0,Se&&pt===pt){for(var wt=ot;wt--;)if(I[wt]===pt)continue e;je.push(ct)}else ge(I,pt,X)||je.push(ct)}return je}var e6e=Zje,t6e=yM(function(b,I){return GW(b)?e6e(b,EM(I,1,GW,!0)):[]}),YO=t6e;function r6e(b){var I=b==null?0:b.length;return I?b[I-1]:void 0}var Hf=r6e;function n6e(b,I,L){var X=b==null?0:b.length;return X?(I=L||I===void 0?1:x(I),IM(b,I<0?0:I,X)):[]}var ni=n6e;function i6e(b,I,L){var X=b==null?0:b.length;return X?(I=L||I===void 0?1:x(I),I=X-I,IM(b,0,I<0?0:I)):[]}var M0=i6e;function a6e(b){return typeof b=="function"?b:D}var s6e=a6e;function o6e(b,I){var L=Oe(b)?Qr:Ql;return L(b,s6e(I))}var Yt=o6e;function u6e(b,I){for(var L=-1,X=b==null?0:b.length;++L<X;)if(!I(b[L],L,b))return!1;return!0}var c6e=u6e;function l6e(b,I){var L=!0;return Ql(b,function(X,te,ge){return L=!!I(X,te,ge),L}),L}var d6e=l6e;function f6e(b,I,L){var X=Oe(b)?c6e:d6e;return L&&qO(b,I,L)&&(I=void 0),X(b,io(I))}var vs=f6e;function h6e(b,I){var L=[];return Ql(b,function(X,te,ge){I(X,te,ge)&&L.push(X)}),L}var kW=h6e;function p6e(b,I){var L=Oe(b)?PM:kW;return L(b,io(I))}var ka=p6e;function _6e(b){return function(I,L,X){var te=Object(I);if(!no(I)){var ge=io(L);I=va(I),L=function(Ne){return ge(te[Ne],Ne,te)}}var Se=b(I,L,X);return Se>-1?te[ge?I[Se]:Se]:void 0}}var m6e=_6e,g6e=Math.max;function y6e(b,I,L){var X=b==null?0:b.length;if(!X)return-1;var te=L==null?0:x(L);return te<0&&(te=g6e(X+te,0)),Er(b,io(I),te)}var b6e=y6e,v6e=m6e(b6e),kf=v6e;function A6e(b){return b&&b.length?b[0]:void 0}var As=A6e;function T6e(b,I){var L=-1,X=no(b)?Array(b.length):[];return Ql(b,function(te,ge,Se){X[++L]=I(te,ge,Se)}),X}var w6e=T6e;function S6e(b,I){var L=Oe(b)?Le:w6e;return L(b,io(I))}var Lt=S6e;function x6e(b,I){return EM(Lt(b,I),1)}var za=x6e,E6e=Object.prototype,I6e=E6e.hasOwnProperty,O6e=Wje(function(b,I,L){I6e.call(b,L)?b[L].push(I):bs(b,L,[I])}),zW=O6e,R6e=Object.prototype,P6e=R6e.hasOwnProperty;function N6e(b,I){return b!=null&&P6e.call(b,I)}var F6e=N6e;function M6e(b,I){return b!=null&&UW(b,I,F6e)}var Kt=M6e,D6e="[object String]";function C6e(b){return typeof b=="string"||!Oe(b)&&$(b)&&G(b)==D6e}var ta=C6e;function L6e(b,I){return Le(I,function(L){return b[L]})}var j6e=L6e;function B6e(b){return b==null?[]:j6e(b,va(b))}var En=B6e,q6e=Math.max;function U6e(b,I,L,X){b=no(b)?b:En(b),L=L&&!X?x(L):0;var te=b.length;return L<0&&(L=q6e(te+L,0)),ta(b)?L<=te&&b.indexOf(I,L)>-1:!!te&&ti(b,I,L)>-1}var Li=U6e,V6e=Math.max;function G6e(b,I,L){var X=b==null?0:b.length;if(!X)return-1;var te=L==null?0:x(L);return te<0&&(te=V6e(X+te,0)),ti(b,I,te)}var QW=G6e,H6e="[object Map]",k6e="[object Set]",z6e=Object.prototype,Q6e=z6e.hasOwnProperty;function W6e(b){if(b==null)return!0;if(no(b)&&(Oe(b)||typeof b=="string"||typeof b.splice=="function"||x0(b)||AM(b)||UO(b)))return!b.length;var I=Gf(b);if(I==H6e||I==k6e)return!b.size;if(S0(b))return!XQ(b).length;for(var L in b)if(Q6e.call(b,L))return!1;return!0}var Vr=W6e,K6e="[object RegExp]";function X6e(b){return $(b)&&G(b)==K6e}var J6e=X6e,WW=Zu&&Zu.isRegExp,Y6e=WW?E0(WW):J6e,eu=Y6e;function $6e(b){return b===void 0}var tu=$6e,Z6e="Expected a function";function e4e(b){if(typeof b!="function")throw new TypeError(Z6e);return function(){var I=arguments;switch(I.length){case 0:return!b.call(this);case 1:return!b.call(this,I[0]);case 2:return!b.call(this,I[0],I[1]);case 3:return!b.call(this,I[0],I[1],I[2])}return!b.apply(this,I)}}var t4e=e4e;function r4e(b,I,L,X){if(!he(b))return b;I=QO(I,b);for(var te=-1,ge=I.length,Se=ge-1,Ne=b;Ne!=null&&++te<ge;){var je=P0(I[te]),ot=L;if(je==="__proto__"||je==="constructor"||je==="prototype")return b;if(te!=Se){var ct=Ne[je];ot=X?X(ct,je,Ne):void 0,ot===void 0&&(ot=he(ct)?ct:qn(I[te+1])?[]:{})}BO(Ne,je,ot),Ne=Ne[je]}return b}var n4e=r4e;function i4e(b,I,L){for(var X=-1,te=I.length,ge={};++X<te;){var Se=I[X],Ne=SM(b,Se);L(Ne,Se)&&n4e(ge,QO(Se,b),Ne)}return ge}var a4e=i4e;function s4e(b,I){if(b==null)return{};var L=Le(gW(b),function(X){return[X]});return I=io(I),a4e(b,L,function(X,te){return I(X,te[0])})}var Ts=s4e;function o4e(b,I,L,X,te){return te(b,function(ge,Se,Ne){L=X?(X=!1,ge):I(L,ge,Se,Ne)}),L}var u4e=o4e;function c4e(b,I,L){var X=Oe(b)?fDe:u4e,te=arguments.length<3;return X(b,io(I),L,te,Ql)}var ra=c4e;function l4e(b,I){var L=Oe(b)?PM:kW;return L(b,t4e(io(I)))}var $O=l4e;function d4e(b,I){var L;return Ql(b,function(X,te,ge){return L=I(X,te,ge),!L}),!!L}var f4e=d4e;function h4e(b,I,L){var X=Oe(b)?PW:f4e;return L&&qO(b,I,L)&&(I=void 0),X(b,io(I))}var VM=h4e,p4e=1/0,_4e=Vf&&1/BM(new Vf([,-0]))[1]==p4e?function(b){return new Vf(b)}:nr,m4e=_4e,g4e=200;function y4e(b,I,L){var X=-1,te=Rr,ge=b.length,Se=!0,Ne=[],je=Ne;if(L)Se=!1,te=HW;else if(ge>=g4e){var ot=I?null:m4e(b);if(ot)return BM(ot);Se=!1,te=jM,je=new LM}else je=I?[]:Ne;e:for(;++X<ge;){var ct=b[X],pt=I?I(ct):ct;if(ct=L||ct!==0?ct:0,Se&&pt===pt){for(var wt=je.length;wt--;)if(je[wt]===pt)continue e;I&&je.push(pt),Ne.push(ct)}else te(je,pt,L)||(je!==Ne&&je.push(pt),Ne.push(ct))}return Ne}var b4e=y4e;function v4e(b){return b&&b.length?b4e(b):[]}var ZO=v4e;function GM(b){console&&console.error&&console.error(`Error: ${b}`)}function KW(b){console&&console.warn&&console.warn(`Warning: ${b}`)}function XW(b){const I=new Date().getTime(),L=b();return{time:new Date().getTime()-I,value:L}}function JW(b){function I(){}I.prototype=b;const L=new I;function X(){return typeof L.bar}return X(),X(),b}function A4e(b){return T4e(b)?b.LABEL:b.name}function T4e(b){return ta(b.LABEL)&&b.LABEL!==""}var ao=class{get definition(){return this._definition}set definition(b){this._definition=b}constructor(b){this._definition=b}accept(b){b.visit(this),Yt(this.definition,I=>{I.accept(b)})}},ji=class extends ao{constructor(b){super([]),this.idx=1,ea(this,Ts(b,I=>I!==void 0))}set definition(b){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(b){b.visit(this)}},Wl=class extends ao{constructor(b){super(b.definition),this.orgText="",ea(this,Ts(b,I=>I!==void 0))}},Bi=class extends ao{constructor(b){super(b.definition),this.ignoreAmbiguities=!1,ea(this,Ts(b,I=>I!==void 0))}},qi=class extends ao{constructor(b){super(b.definition),this.idx=1,ea(this,Ts(b,I=>I!==void 0))}},ws=class extends ao{constructor(b){super(b.definition),this.idx=1,ea(this,Ts(b,I=>I!==void 0))}},Ss=class extends ao{constructor(b){super(b.definition),this.idx=1,ea(this,Ts(b,I=>I!==void 0))}},In=class extends ao{constructor(b){super(b.definition),this.idx=1,ea(this,Ts(b,I=>I!==void 0))}},Qa=class extends ao{constructor(b){super(b.definition),this.idx=1,ea(this,Ts(b,I=>I!==void 0))}},Wa=class extends ao{get definition(){return this._definition}set definition(b){this._definition=b}constructor(b){super(b.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,ea(this,Ts(b,I=>I!==void 0))}},un=class{constructor(b){this.idx=1,ea(this,Ts(b,I=>I!==void 0))}accept(b){b.visit(this)}};function YW(b){return Lt(b,D0)}function D0(b){function I(L){return Lt(L,D0)}if(b instanceof ji){const L={type:"NonTerminal",name:b.nonTerminalName,idx:b.idx};return ta(b.label)&&(L.label=b.label),L}else{if(b instanceof Bi)return{type:"Alternative",definition:I(b.definition)};if(b instanceof qi)return{type:"Option",idx:b.idx,definition:I(b.definition)};if(b instanceof ws)return{type:"RepetitionMandatory",idx:b.idx,definition:I(b.definition)};if(b instanceof Ss)return{type:"RepetitionMandatoryWithSeparator",idx:b.idx,separator:D0(new un({terminalType:b.separator})),definition:I(b.definition)};if(b instanceof Qa)return{type:"RepetitionWithSeparator",idx:b.idx,separator:D0(new un({terminalType:b.separator})),definition:I(b.definition)};if(b instanceof In)return{type:"Repetition",idx:b.idx,definition:I(b.definition)};if(b instanceof Wa)return{type:"Alternation",idx:b.idx,definition:I(b.definition)};if(b instanceof un){const L={type:"Terminal",name:b.terminalType.name,label:A4e(b.terminalType),idx:b.idx};ta(b.label)&&(L.terminalLabel=b.label);const X=b.terminalType.PATTERN;return b.terminalType.PATTERN&&(L.pattern=eu(X)?X.source:X),L}else{if(b instanceof Wl)return{type:"Rule",name:b.name,orgText:b.orgText,definition:I(b.definition)};throw Error("non exhaustive match")}}}var ec=class{visit(b){const I=b;switch(I.constructor){case ji:return this.visitNonTerminal(I);case Bi:return this.visitAlternative(I);case qi:return this.visitOption(I);case ws:return this.visitRepetitionMandatory(I);case Ss:return this.visitRepetitionMandatoryWithSeparator(I);case Qa:return this.visitRepetitionWithSeparator(I);case In:return this.visitRepetition(I);case Wa:return this.visitAlternation(I);case un:return this.visitTerminal(I);case Wl:return this.visitRule(I);default:throw Error("non exhaustive match")}}visitNonTerminal(b){}visitAlternative(b){}visitOption(b){}visitRepetition(b){}visitRepetitionMandatory(b){}visitRepetitionMandatoryWithSeparator(b){}visitRepetitionWithSeparator(b){}visitAlternation(b){}visitTerminal(b){}visitRule(b){}};function w4e(b){return b instanceof Bi||b instanceof qi||b instanceof In||b instanceof ws||b instanceof Ss||b instanceof Qa||b instanceof un||b instanceof Wl}function e2(b,I=[]){return b instanceof qi||b instanceof In||b instanceof Qa?!0:b instanceof Wa?VM(b.definition,X=>e2(X,I)):b instanceof ji&&Li(I,b)?!1:b instanceof ao?(b instanceof ji&&I.push(b),vs(b.definition,X=>e2(X,I))):!1}function S4e(b){return b instanceof Wa}function so(b){if(b instanceof ji)return"SUBRULE";if(b instanceof qi)return"OPTION";if(b instanceof Wa)return"OR";if(b instanceof ws)return"AT_LEAST_ONE";if(b instanceof Ss)return"AT_LEAST_ONE_SEP";if(b instanceof Qa)return"MANY_SEP";if(b instanceof In)return"MANY";if(b instanceof un)return"CONSUME";throw Error("non exhaustive match")}var t2=class{walk(b,I=[]){Yt(b.definition,(L,X)=>{const te=ni(b.definition,X+1);if(L instanceof ji)this.walkProdRef(L,te,I);else if(L instanceof un)this.walkTerminal(L,te,I);else if(L instanceof Bi)this.walkFlat(L,te,I);else if(L instanceof qi)this.walkOption(L,te,I);else if(L instanceof ws)this.walkAtLeastOne(L,te,I);else if(L instanceof Ss)this.walkAtLeastOneSep(L,te,I);else if(L instanceof Qa)this.walkManySep(L,te,I);else if(L instanceof In)this.walkMany(L,te,I);else if(L instanceof Wa)this.walkOr(L,te,I);else throw Error("non exhaustive match")})}walkTerminal(b,I,L){}walkProdRef(b,I,L){}walkFlat(b,I,L){const X=I.concat(L);this.walk(b,X)}walkOption(b,I,L){const X=I.concat(L);this.walk(b,X)}walkAtLeastOne(b,I,L){const X=[new qi({definition:b.definition})].concat(I,L);this.walk(b,X)}walkAtLeastOneSep(b,I,L){const X=$W(b,I,L);this.walk(b,X)}walkMany(b,I,L){const X=[new qi({definition:b.definition})].concat(I,L);this.walk(b,X)}walkManySep(b,I,L){const X=$W(b,I,L);this.walk(b,X)}walkOr(b,I,L){const X=I.concat(L);Yt(b.definition,te=>{const ge=new Bi({definition:[te]});this.walk(ge,X)})}};function $W(b,I,L){return[new qi({definition:[new un({terminalType:b.separator})].concat(b.definition)})].concat(I,L)}function C0(b){if(b instanceof ji)return C0(b.referencedRule);if(b instanceof un)return I4e(b);if(w4e(b))return x4e(b);if(S4e(b))return E4e(b);throw Error("non exhaustive match")}function x4e(b){let I=[];const L=b.definition;let X=0,te=L.length>X,ge,Se=!0;for(;te&&Se;)ge=L[X],Se=e2(ge),I=I.concat(C0(ge)),X=X+1,te=L.length>X;return ZO(I)}function E4e(b){const I=Lt(b.definition,L=>C0(L));return ZO(Aa(I))}function I4e(b){return[b.terminalType]}var ZW="_~IN~_",O4e=class extends t2{constructor(b){super(),this.topProd=b,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(b,I,L){}walkProdRef(b,I,L){const X=P4e(b.referencedRule,b.idx)+this.topProd.name,te=I.concat(L),ge=new Bi({definition:te}),Se=C0(ge);this.follows[X]=Se}};function R4e(b){const I={};return Yt(b,L=>{const X=new O4e(L).startWalking();ea(I,X)}),I}function P4e(b,I){return b.name+I+ZW}function Zt(b){return b.charCodeAt(0)}function HM(b,I){Array.isArray(b)?b.forEach(function(L){I.push(L)}):I.push(b)}function L0(b,I){if(b[I]===!0)throw"duplicate flag "+I;b[I],b[I]=!0}function zf(b){if(b===void 0)throw Error("Internal Error - Should never get here!");return!0}function N4e(){throw Error("Internal Error - Should never get here!")}function eK(b){return b.type==="Character"}var r2=[];for(let b=Zt("0");b<=Zt("9");b++)r2.push(b);var n2=[Zt("_")].concat(r2);for(let b=Zt("a");b<=Zt("z");b++)n2.push(b);for(let b=Zt("A");b<=Zt("Z");b++)n2.push(b);var tK=[Zt(" "),Zt("\f"),Zt(`
`),Zt("\r"),Zt("	"),Zt("\v"),Zt("	"),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt(""),Zt("\u2028"),Zt("\u2029"),Zt(""),Zt(""),Zt(""),Zt("\uFEFF")],F4e=/[0-9a-fA-F]/,i2=/[0-9]/,M4e=/[1-9]/,D4e=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(b){this.idx=b.idx,this.input=b.input,this.groupIdx=b.groupIdx}pattern(b){this.idx=0,this.input=b,this.groupIdx=0,this.consumeChar("/");const I=this.disjunction();this.consumeChar("/");const L={type:"Flags",loc:{begin:this.idx,end:b.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":L0(L,"global");break;case"i":L0(L,"ignoreCase");break;case"m":L0(L,"multiLine");break;case"u":L0(L,"unicode");break;case"y":L0(L,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:L,value:I,loc:this.loc(0)}}disjunction(){const b=[],I=this.idx;for(b.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),b.push(this.alternative());return{type:"Disjunction",value:b,loc:this.loc(I)}}alternative(){const b=[],I=this.idx;for(;this.isTerm();)b.push(this.term());return{type:"Alternative",value:b,loc:this.loc(I)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const b=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(b)};case"$":return{type:"EndAnchor",loc:this.loc(b)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(b)};case"B":return{type:"NonWordBoundary",loc:this.loc(b)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let I;switch(this.popChar()){case"=":I="Lookahead";break;case"!":I="NegativeLookahead";break}zf(I);const L=this.disjunction();return this.consumeChar(")"),{type:I,value:L,loc:this.loc(b)}}return N4e()}quantifier(b=!1){let I;const L=this.idx;switch(this.popChar()){case"*":I={atLeast:0,atMost:1/0};break;case"+":I={atLeast:1,atMost:1/0};break;case"?":I={atLeast:0,atMost:1};break;case"{":const X=this.integerIncludingZero();switch(this.popChar()){case"}":I={atLeast:X,atMost:X};break;case",":let te;this.isDigit()?(te=this.integerIncludingZero(),I={atLeast:X,atMost:te}):I={atLeast:X,atMost:1/0},this.consumeChar("}");break}if(b===!0&&I===void 0)return;zf(I);break}if(!(b===!0&&I===void 0)&&zf(I))return this.peekChar(0)==="?"?(this.consumeChar("?"),I.greedy=!1):I.greedy=!0,I.type="Quantifier",I.loc=this.loc(L),I}atom(){let b;const I=this.idx;switch(this.peekChar()){case".":b=this.dotAll();break;case"\\":b=this.atomEscape();break;case"[":b=this.characterClass();break;case"(":b=this.group();break}if(b===void 0&&this.isPatternCharacter()&&(b=this.patternCharacter()),zf(b))return b.loc=this.loc(I),this.isQuantifier()&&(b.quantifier=this.quantifier()),b}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[Zt(`
`),Zt("\r"),Zt("\u2028"),Zt("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let b,I=!1;switch(this.popChar()){case"d":b=r2;break;case"D":b=r2,I=!0;break;case"s":b=tK;break;case"S":b=tK,I=!0;break;case"w":b=n2;break;case"W":b=n2,I=!0;break}if(zf(b))return{type:"Set",value:b,complement:I}}controlEscapeAtom(){let b;switch(this.popChar()){case"f":b=Zt("\f");break;case"n":b=Zt(`
`);break;case"r":b=Zt("\r");break;case"t":b=Zt("	");break;case"v":b=Zt("\v");break}if(zf(b))return{type:"Character",value:b}}controlLetterEscapeAtom(){this.consumeChar("c");const b=this.popChar();if(/[a-zA-Z]/.test(b)===!1)throw Error("Invalid ");return{type:"Character",value:b.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:Zt("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const b=this.popChar();return{type:"Character",value:Zt(b)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const b=this.popChar();return{type:"Character",value:Zt(b)}}}characterClass(){const b=[];let I=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),I=!0);this.isClassAtom();){const L=this.classAtom();if(L.type,eK(L)&&this.isRangeDash()){this.consumeChar("-");const X=this.classAtom();if(X.type,eK(X)){if(X.value<L.value)throw Error("Range out of order in character class");b.push({from:L.value,to:X.value})}else HM(L.value,b),b.push(Zt("-")),HM(X.value,b)}else HM(L.value,b)}return this.consumeChar("]"),{type:"Set",complement:I,value:b}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:Zt("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let b=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),b=!1;break;default:this.groupIdx++;break}const I=this.disjunction();this.consumeChar(")");const L={type:"Group",capturing:b,value:I};return b&&(L.idx=this.groupIdx),L}positiveInteger(){let b=this.popChar();if(M4e.test(b)===!1)throw Error("Expecting a positive integer");for(;i2.test(this.peekChar(0));)b+=this.popChar();return parseInt(b,10)}integerIncludingZero(){let b=this.popChar();if(i2.test(b)===!1)throw Error("Expecting an integer");for(;i2.test(this.peekChar(0));)b+=this.popChar();return parseInt(b,10)}patternCharacter(){const b=this.popChar();switch(b){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:Zt(b)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return i2.test(this.peekChar(0))}isClassAtom(b=0){switch(this.peekChar(b)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const b=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(b)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(b){let I="";for(let X=0;X<b;X++){const te=this.popChar();if(F4e.test(te)===!1)throw Error("Expecting a HexDecimal digits");I+=te}return{type:"Character",value:parseInt(I,16)}}peekChar(b=0){return this.input[this.idx+b]}popChar(){const b=this.peekChar(0);return this.consumeChar(void 0),b}consumeChar(b){if(b!==void 0&&this.input[this.idx]!==b)throw Error("Expected: '"+b+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(b){return{begin:b,end:this.idx}}},kM=class{visitChildren(b){for(const I in b){const L=b[I];b.hasOwnProperty(I)&&(L.type!==void 0?this.visit(L):Array.isArray(L)&&L.forEach(X=>{this.visit(X)},this))}}visit(b){switch(b.type){case"Pattern":this.visitPattern(b);break;case"Flags":this.visitFlags(b);break;case"Disjunction":this.visitDisjunction(b);break;case"Alternative":this.visitAlternative(b);break;case"StartAnchor":this.visitStartAnchor(b);break;case"EndAnchor":this.visitEndAnchor(b);break;case"WordBoundary":this.visitWordBoundary(b);break;case"NonWordBoundary":this.visitNonWordBoundary(b);break;case"Lookahead":this.visitLookahead(b);break;case"NegativeLookahead":this.visitNegativeLookahead(b);break;case"Character":this.visitCharacter(b);break;case"Set":this.visitSet(b);break;case"Group":this.visitGroup(b);break;case"GroupBackReference":this.visitGroupBackReference(b);break;case"Quantifier":this.visitQuantifier(b);break}this.visitChildren(b)}visitPattern(b){}visitFlags(b){}visitDisjunction(b){}visitAlternative(b){}visitStartAnchor(b){}visitEndAnchor(b){}visitWordBoundary(b){}visitNonWordBoundary(b){}visitLookahead(b){}visitNegativeLookahead(b){}visitCharacter(b){}visitSet(b){}visitGroup(b){}visitGroupBackReference(b){}visitQuantifier(b){}},a2={},C4e=new D4e;function s2(b){const I=b.toString();if(a2.hasOwnProperty(I))return a2[I];{const L=C4e.pattern(I);return a2[I]=L,L}}function L4e(){a2={}}var rK="Complement Sets are not supported for first char optimization",o2=`Unable to use "first char" lexer optimizations:
`;function j4e(b,I=!1){try{const L=s2(b);return zM(L.value,{},L.flags.ignoreCase)}catch(L){if(L.message===rK)I&&KW(`${o2}	Unable to optimize: < ${b.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let X="";I&&(X=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),GM(`${o2}
	Failed parsing: < ${b.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+X)}}return[]}function zM(b,I,L){switch(b.type){case"Disjunction":for(let te=0;te<b.value.length;te++)zM(b.value[te],I,L);break;case"Alternative":const X=b.value;for(let te=0;te<X.length;te++){const ge=X[te];switch(ge.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const Se=ge;switch(Se.type){case"Character":u2(Se.value,I,L);break;case"Set":if(Se.complement===!0)throw Error(rK);Yt(Se.value,je=>{if(typeof je=="number")u2(je,I,L);else{const ot=je;if(L===!0)for(let ct=ot.from;ct<=ot.to;ct++)u2(ct,I,L);else{for(let ct=ot.from;ct<=ot.to&&ct<B0;ct++)u2(ct,I,L);if(ot.to>=B0){const ct=ot.from>=B0?ot.from:B0,pt=ot.to,wt=tc(ct),Mt=tc(pt);for(let Jt=wt;Jt<=Mt;Jt++)I[Jt]=Jt}}}});break;case"Group":zM(Se.value,I,L);break;default:throw Error("Non Exhaustive Match")}const Ne=Se.quantifier!==void 0&&Se.quantifier.atLeast===0;if(Se.type==="Group"&&QM(Se)===!1||Se.type!=="Group"&&Ne===!1)break}break;default:throw Error("non exhaustive match!")}return En(I)}function u2(b,I,L){const X=tc(b);I[X]=X,L===!0&&B4e(b,I)}function B4e(b,I){const L=String.fromCharCode(b),X=L.toUpperCase();if(X!==L){const te=tc(X.charCodeAt(0));I[te]=te}else{const te=L.toLowerCase();if(te!==L){const ge=tc(te.charCodeAt(0));I[ge]=ge}}}function nK(b,I){return kf(b.value,L=>{if(typeof L=="number")return Li(I,L);{const X=L;return kf(I,te=>X.from<=te&&te<=X.to)!==void 0}})}function QM(b){const I=b.quantifier;return I&&I.atLeast===0?!0:b.value?Oe(b.value)?vs(b.value,QM):QM(b.value):!1}var q4e=class extends kM{constructor(b){super(),this.targetCharCodes=b,this.found=!1}visitChildren(b){if(this.found!==!0){switch(b.type){case"Lookahead":this.visitLookahead(b);return;case"NegativeLookahead":this.visitNegativeLookahead(b);return}super.visitChildren(b)}}visitCharacter(b){Li(this.targetCharCodes,b.value)&&(this.found=!0)}visitSet(b){b.complement?nK(b,this.targetCharCodes)===void 0&&(this.found=!0):nK(b,this.targetCharCodes)!==void 0&&(this.found=!0)}};function WM(b,I){if(I instanceof RegExp){const L=s2(I),X=new q4e(b);return X.visit(L),X.found}else return kf(I,L=>Li(b,L.charCodeAt(0)))!==void 0}var Kl="PATTERN",j0="defaultMode",c2="modes",iK=typeof new RegExp("(?:)").sticky=="boolean";function U4e(b,I){I=UM(I,{useSticky:iK,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(Gt,bt)=>bt()});const L=I.tracer;L("initCharCodeToOptimizedIndexMap",()=>{c8e()});let X;L("Reject Lexer.NA",()=>{X=$O(b,Gt=>Gt[Kl]===Ta.NA)});let te=!1,ge;L("Transform Patterns",()=>{te=!1,ge=Lt(X,Gt=>{const bt=Gt[Kl];if(eu(bt)){const sr=bt.source;return sr.length===1&&sr!=="^"&&sr!=="$"&&sr!=="."&&!bt.ignoreCase?sr:sr.length===2&&sr[0]==="\\"&&!Li(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],sr[1])?sr[1]:I.useSticky?sK(bt):aK(bt)}else{if(Re(bt))return te=!0,{exec:bt};if(typeof bt=="object")return te=!0,bt;if(typeof bt=="string"){if(bt.length===1)return bt;{const sr=bt.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),Kr=new RegExp(sr);return I.useSticky?sK(Kr):aK(Kr)}}else throw Error("non exhaustive match")}})});let Se,Ne,je,ot,ct;L("misc mapping",()=>{Se=Lt(X,Gt=>Gt.tokenTypeIdx),Ne=Lt(X,Gt=>{const bt=Gt.GROUP;if(bt!==Ta.SKIPPED){if(ta(bt))return bt;if(tu(bt))return!1;throw Error("non exhaustive match")}}),je=Lt(X,Gt=>{const bt=Gt.LONGER_ALT;if(bt)return Oe(bt)?Lt(bt,Kr=>QW(X,Kr)):[QW(X,bt)]}),ot=Lt(X,Gt=>Gt.PUSH_MODE),ct=Lt(X,Gt=>Kt(Gt,"POP_MODE"))});let pt;L("Line Terminator Handling",()=>{const Gt=cK(I.lineTerminatorCharacters);pt=Lt(X,bt=>!1),I.positionTracking!=="onlyOffset"&&(pt=Lt(X,bt=>Kt(bt,"LINE_BREAKS")?!!bt.LINE_BREAKS:uK(bt,Gt)===!1&&WM(Gt,bt.PATTERN)))});let wt,Mt,Jt,Xt;L("Misc Mapping #2",()=>{wt=Lt(X,oK),Mt=Lt(ge,s8e),Jt=ra(X,(Gt,bt)=>{const sr=bt.GROUP;return ta(sr)&&sr!==Ta.SKIPPED&&(Gt[sr]=[]),Gt},{}),Xt=Lt(ge,(Gt,bt)=>({pattern:ge[bt],longerAlt:je[bt],canLineTerminator:pt[bt],isCustom:wt[bt],short:Mt[bt],group:Ne[bt],push:ot[bt],pop:ct[bt],tokenTypeIdx:Se[bt],tokenType:X[bt]}))});let Ht=!0,Dt=[];return I.safeMode||L("First Char Optimization",()=>{Dt=ra(X,(Gt,bt,sr)=>{if(typeof bt.PATTERN=="string"){const Kr=bt.PATTERN.charCodeAt(0),_i=tc(Kr);KM(Gt,_i,Xt[sr])}else if(Oe(bt.START_CHARS_HINT)){let Kr;Yt(bt.START_CHARS_HINT,_i=>{const k0=typeof _i=="string"?_i.charCodeAt(0):_i,ru=tc(k0);Kr!==ru&&(Kr=ru,KM(Gt,ru,Xt[sr]))})}else if(eu(bt.PATTERN))if(bt.PATTERN.unicode)Ht=!1,I.ensureOptimizations&&GM(`${o2}	Unable to analyze < ${bt.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const Kr=j4e(bt.PATTERN,I.ensureOptimizations);Vr(Kr)&&(Ht=!1),Yt(Kr,_i=>{KM(Gt,_i,Xt[sr])})}else I.ensureOptimizations&&GM(`${o2}	TokenType: <${bt.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),Ht=!1;return Gt},[])}),{emptyGroups:Jt,patternIdxToConfig:Xt,charCodeToPatternIdxToConfig:Dt,hasCustom:te,canBeOptimized:Ht}}function V4e(b,I){let L=[];const X=H4e(b);L=L.concat(X.errors);const te=k4e(X.valid),ge=te.valid;return L=L.concat(te.errors),L=L.concat(G4e(ge)),L=L.concat($4e(ge)),L=L.concat(Z4e(ge,I)),L=L.concat(e8e(ge)),L}function G4e(b){let I=[];const L=ka(b,X=>eu(X[Kl]));return I=I.concat(Q4e(L)),I=I.concat(X4e(L)),I=I.concat(J4e(L)),I=I.concat(Y4e(L)),I=I.concat(W4e(L)),I}function H4e(b){const I=ka(b,te=>!Kt(te,Kl)),L=Lt(I,te=>({message:"Token Type: ->"+te.name+"<- missing static 'PATTERN' property",type:dn.MISSING_PATTERN,tokenTypes:[te]})),X=YO(b,I);return{errors:L,valid:X}}function k4e(b){const I=ka(b,te=>{const ge=te[Kl];return!eu(ge)&&!Re(ge)&&!Kt(ge,"exec")&&!ta(ge)}),L=Lt(I,te=>({message:"Token Type: ->"+te.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:dn.INVALID_PATTERN,tokenTypes:[te]})),X=YO(b,I);return{errors:L,valid:X}}var z4e=/[^\\][$]/;function Q4e(b){class I extends kM{constructor(){super(...arguments),this.found=!1}visitEndAnchor(ge){this.found=!0}}const L=ka(b,te=>{const ge=te.PATTERN;try{const Se=s2(ge),Ne=new I;return Ne.visit(Se),Ne.found}catch{return z4e.test(ge.source)}});return Lt(L,te=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+te.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:dn.EOI_ANCHOR_FOUND,tokenTypes:[te]}))}function W4e(b){const I=ka(b,X=>X.PATTERN.test(""));return Lt(I,X=>({message:"Token Type: ->"+X.name+"<- static 'PATTERN' must not match an empty string",type:dn.EMPTY_MATCH_PATTERN,tokenTypes:[X]}))}var K4e=/[^\\[][\^]|^\^/;function X4e(b){class I extends kM{constructor(){super(...arguments),this.found=!1}visitStartAnchor(ge){this.found=!0}}const L=ka(b,te=>{const ge=te.PATTERN;try{const Se=s2(ge),Ne=new I;return Ne.visit(Se),Ne.found}catch{return K4e.test(ge.source)}});return Lt(L,te=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+te.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:dn.SOI_ANCHOR_FOUND,tokenTypes:[te]}))}function J4e(b){const I=ka(b,X=>{const te=X[Kl];return te instanceof RegExp&&(te.multiline||te.global)});return Lt(I,X=>({message:"Token Type: ->"+X.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:dn.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[X]}))}function Y4e(b){const I=[];let L=Lt(b,ge=>ra(b,(Se,Ne)=>(ge.PATTERN.source===Ne.PATTERN.source&&!Li(I,Ne)&&Ne.PATTERN!==Ta.NA&&(I.push(Ne),Se.push(Ne)),Se),[]));L=F0(L);const X=ka(L,ge=>ge.length>1);return Lt(X,ge=>{const Se=Lt(ge,je=>je.name);return{message:`The same RegExp pattern ->${As(ge).PATTERN}<-has been used in all of the following Token Types: ${Se.join(", ")} <-`,type:dn.DUPLICATE_PATTERNS_FOUND,tokenTypes:ge}})}function $4e(b){const I=ka(b,X=>{if(!Kt(X,"GROUP"))return!1;const te=X.GROUP;return te!==Ta.SKIPPED&&te!==Ta.NA&&!ta(te)});return Lt(I,X=>({message:"Token Type: ->"+X.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:dn.INVALID_GROUP_TYPE_FOUND,tokenTypes:[X]}))}function Z4e(b,I){const L=ka(b,te=>te.PUSH_MODE!==void 0&&!Li(I,te.PUSH_MODE));return Lt(L,te=>({message:`Token Type: ->${te.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${te.PUSH_MODE}<-which does not exist`,type:dn.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[te]}))}function e8e(b){const I=[],L=ra(b,(X,te,ge)=>{const Se=te.PATTERN;return Se===Ta.NA||(ta(Se)?X.push({str:Se,idx:ge,tokenType:te}):eu(Se)&&r8e(Se)&&X.push({str:Se.source,idx:ge,tokenType:te})),X},[]);return Yt(b,(X,te)=>{Yt(L,({str:ge,idx:Se,tokenType:Ne})=>{if(te<Se&&t8e(ge,X.PATTERN)){const je=`Token: ->${Ne.name}<- can never be matched.
Because it appears AFTER the Token Type ->${X.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;I.push({message:je,type:dn.UNREACHABLE_PATTERN,tokenTypes:[X,Ne]})}})}),I}function t8e(b,I){if(eu(I)){const L=I.exec(b);return L!==null&&L.index===0}else{if(Re(I))return I(b,0,[],{});if(Kt(I,"exec"))return I.exec(b,0,[],{});if(typeof I=="string")return I===b;throw Error("non exhaustive match")}}function r8e(b){return kf([".","\\","[","]","|","^","$","(",")","?","*","+","{"],L=>b.source.indexOf(L)!==-1)===void 0}function aK(b){const I=b.ignoreCase?"i":"";return new RegExp(`^(?:${b.source})`,I)}function sK(b){const I=b.ignoreCase?"iy":"y";return new RegExp(`${b.source}`,I)}function n8e(b,I,L){const X=[];return Kt(b,j0)||X.push({message:"A MultiMode Lexer cannot be initialized without a <"+j0+`> property in its definition
`,type:dn.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Kt(b,c2)||X.push({message:"A MultiMode Lexer cannot be initialized without a <"+c2+`> property in its definition
`,type:dn.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Kt(b,c2)&&Kt(b,j0)&&!Kt(b.modes,b.defaultMode)&&X.push({message:`A MultiMode Lexer cannot be initialized with a ${j0}: <${b.defaultMode}>which does not exist
`,type:dn.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Kt(b,c2)&&Yt(b.modes,(te,ge)=>{Yt(te,(Se,Ne)=>{if(tu(Se))X.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${ge}> at index: <${Ne}>
`,type:dn.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Kt(Se,"LONGER_ALT")){const je=Oe(Se.LONGER_ALT)?Se.LONGER_ALT:[Se.LONGER_ALT];Yt(je,ot=>{!tu(ot)&&!Li(te,ot)&&X.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${ot.name}> on token <${Se.name}> outside of mode <${ge}>
`,type:dn.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),X}function i8e(b,I,L){const X=[];let te=!1;const ge=F0(Aa(En(b.modes))),Se=$O(ge,je=>je[Kl]===Ta.NA),Ne=cK(L);return I&&Yt(Se,je=>{const ot=uK(je,Ne);if(ot!==!1){const pt={message:u8e(je,ot),type:ot.issue,tokenType:je};X.push(pt)}else Kt(je,"LINE_BREAKS")?je.LINE_BREAKS===!0&&(te=!0):WM(Ne,je.PATTERN)&&(te=!0)}),I&&!te&&X.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:dn.NO_LINE_BREAKS_FLAGS}),X}function a8e(b){const I={},L=va(b);return Yt(L,X=>{const te=b[X];if(Oe(te))I[X]=[];else throw Error("non exhaustive match")}),I}function oK(b){const I=b.PATTERN;if(eu(I))return!1;if(Re(I))return!0;if(Kt(I,"exec"))return!0;if(ta(I))return!1;throw Error("non exhaustive match")}function s8e(b){return ta(b)&&b.length===1?b.charCodeAt(0):!1}var o8e={test:function(b){const I=b.length;for(let L=this.lastIndex;L<I;L++){const X=b.charCodeAt(L);if(X===10)return this.lastIndex=L+1,!0;if(X===13)return b.charCodeAt(L+1)===10?this.lastIndex=L+2:this.lastIndex=L+1,!0}return!1},lastIndex:0};function uK(b,I){if(Kt(b,"LINE_BREAKS"))return!1;if(eu(b.PATTERN)){try{WM(I,b.PATTERN)}catch(L){return{issue:dn.IDENTIFY_TERMINATOR,errMsg:L.message}}return!1}else{if(ta(b.PATTERN))return!1;if(oK(b))return{issue:dn.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function u8e(b,I){if(I.issue===dn.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${b.name}> Token Type
	 Root cause: ${I.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(I.issue===dn.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${b.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function cK(b){return Lt(b,L=>ta(L)?L.charCodeAt(0):L)}function KM(b,I,L){b[I]===void 0?b[I]=[L]:b[I].push(L)}var B0=256,l2=[];function tc(b){return b<B0?b:l2[b]}function c8e(){if(Vr(l2)){l2=new Array(65536);for(let b=0;b<65536;b++)l2[b]=b>255?255+~~(b/255):b}}function q0(b,I){const L=b.tokenTypeIdx;return L===I.tokenTypeIdx?!0:I.isParent===!0&&I.categoryMatchesMap[L]===!0}function d2(b,I){return b.tokenTypeIdx===I.tokenTypeIdx}var lK=1,dK={};function U0(b){const I=l8e(b);d8e(I),h8e(I),f8e(I),Yt(I,L=>{L.isParent=L.categoryMatches.length>0})}function l8e(b){let I=Qn(b),L=b,X=!0;for(;X;){L=F0(Aa(Lt(L,ge=>ge.CATEGORIES)));const te=YO(L,I);I=I.concat(te),Vr(te)?X=!1:L=te}return I}function d8e(b){Yt(b,I=>{hK(I)||(dK[lK]=I,I.tokenTypeIdx=lK++),pK(I)&&!Oe(I.CATEGORIES)&&(I.CATEGORIES=[I.CATEGORIES]),pK(I)||(I.CATEGORIES=[]),p8e(I)||(I.categoryMatches=[]),_8e(I)||(I.categoryMatchesMap={})})}function f8e(b){Yt(b,I=>{I.categoryMatches=[],Yt(I.categoryMatchesMap,(L,X)=>{I.categoryMatches.push(dK[X].tokenTypeIdx)})})}function h8e(b){Yt(b,I=>{fK([],I)})}function fK(b,I){Yt(b,L=>{I.categoryMatchesMap[L.tokenTypeIdx]=!0}),Yt(I.CATEGORIES,L=>{const X=b.concat(I);Li(X,L)||fK(X,L)})}function hK(b){return Kt(b,"tokenTypeIdx")}function pK(b){return Kt(b,"CATEGORIES")}function p8e(b){return Kt(b,"categoryMatches")}function _8e(b){return Kt(b,"categoryMatchesMap")}function m8e(b){return Kt(b,"tokenTypeIdx")}var _K={buildUnableToPopLexerModeMessage(b){return`Unable to pop Lexer Mode after encountering Token ->${b.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(b,I,L,X,te){return`unexpected character: ->${b.charAt(I)}<- at offset: ${I}, skipped ${L} characters.`}},dn;(function(b){b[b.MISSING_PATTERN=0]="MISSING_PATTERN",b[b.INVALID_PATTERN=1]="INVALID_PATTERN",b[b.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",b[b.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",b[b.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",b[b.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",b[b.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",b[b.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",b[b.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",b[b.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",b[b.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",b[b.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",b[b.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",b[b.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",b[b.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",b[b.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",b[b.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",b[b.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(dn||(dn={}));var V0={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:_K,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(V0);var Ta=class{constructor(b,I=V0){if(this.lexerDefinition=b,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(X,te)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const ge=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${ge}--> <${X}>`);const{time:Se,value:Ne}=XW(te),je=Se>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&je(`${ge}<-- <${X}> time: ${Se}ms`),this.traceInitIndent--,Ne}else return te()},typeof I=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=ea({},V0,I);const L=this.config.traceInitPerf;L===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof L=="number"&&(this.traceInitMaxIdent=L,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let X,te=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===V0.lineTerminatorsPattern)this.config.lineTerminatorsPattern=o8e;else if(this.config.lineTerminatorCharacters===V0.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(I.safeMode&&I.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Oe(b)?X={modes:{defaultMode:Qn(b)},defaultMode:j0}:(te=!1,X=Qn(b))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(n8e(X,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(i8e(X,this.trackStartLines,this.config.lineTerminatorCharacters))})),X.modes=X.modes?X.modes:{},Yt(X.modes,(Se,Ne)=>{X.modes[Ne]=$O(Se,je=>tu(je))});const ge=va(X.modes);if(Yt(X.modes,(Se,Ne)=>{this.TRACE_INIT(`Mode: <${Ne}> processing`,()=>{if(this.modes.push(Ne),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(V4e(Se,ge))}),Vr(this.lexerDefinitionErrors)){U0(Se);let je;this.TRACE_INIT("analyzeTokenTypes",()=>{je=U4e(Se,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:I.positionTracking,ensureOptimizations:I.ensureOptimizations,safeMode:I.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[Ne]=je.patternIdxToConfig,this.charCodeToPatternIdxToConfig[Ne]=je.charCodeToPatternIdxToConfig,this.emptyGroups=ea({},this.emptyGroups,je.emptyGroups),this.hasCustom=je.hasCustom||this.hasCustom,this.canModeBeOptimized[Ne]=je.canBeOptimized}})}),this.defaultMode=X.defaultMode,!Vr(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const Ne=Lt(this.lexerDefinitionErrors,je=>je.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+Ne)}Yt(this.lexerDefinitionWarning,Se=>{KW(Se.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(iK?(this.chopInput=D,this.match=this.matchWithTest):(this.updateLastIndex=nr,this.match=this.matchWithExec),te&&(this.handleModes=nr),this.trackStartLines===!1&&(this.computeNewColumn=D),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=nr),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const Se=ra(this.canModeBeOptimized,(Ne,je,ot)=>(je===!1&&Ne.push(ot),Ne),[]);if(I.ensureOptimizations&&!Vr(Se))throw Error(`Lexer Modes: < ${Se.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{L4e()}),this.TRACE_INIT("toFastProperties",()=>{JW(this)})})}tokenize(b,I=this.defaultMode){if(!Vr(this.lexerDefinitionErrors)){const X=Lt(this.lexerDefinitionErrors,te=>te.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+X)}return this.tokenizeInternal(b,I)}tokenizeInternal(b,I){let L,X,te,ge,Se,Ne,je,ot,ct,pt,wt,Mt,Jt,Xt,Ht;const Dt=b,Gt=Dt.length;let bt=0,sr=0;const Kr=this.hasCustom?0:Math.floor(b.length/10),_i=new Array(Kr),k0=[];let ru=this.trackStartLines?1:void 0,ic=this.trackStartLines?1:void 0;const z0=a8e(this.emptyGroups),HBe=this.trackStartLines,lD=this.config.lineTerminatorsPattern;let E2=0,ac=[],Q0=[];const I2=[],nX=[];Object.freeze(nX);let W0;function iX(){return ac}function aX(mi){const Ka=tc(mi),Wf=Q0[Ka];return Wf===void 0?nX:Wf}const kBe=mi=>{if(I2.length===1&&mi.tokenType.PUSH_MODE===void 0){const Ka=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(mi);k0.push({offset:mi.startOffset,line:mi.startLine,column:mi.startColumn,length:mi.image.length,message:Ka})}else{I2.pop();const Ka=Hf(I2);ac=this.patternIdxToConfig[Ka],Q0=this.charCodeToPatternIdxToConfig[Ka],E2=ac.length;const Wf=this.canModeBeOptimized[Ka]&&this.config.safeMode===!1;Q0&&Wf?W0=aX:W0=iX}};function sX(mi){I2.push(mi),Q0=this.charCodeToPatternIdxToConfig[mi],ac=this.patternIdxToConfig[mi],E2=ac.length,E2=ac.length;const Ka=this.canModeBeOptimized[mi]&&this.config.safeMode===!1;Q0&&Ka?W0=aX:W0=iX}sX.call(this,I);let xs;const oX=this.config.recoveryEnabled;for(;bt<Gt;){Ne=null;const mi=Dt.charCodeAt(bt),Ka=W0(mi),Wf=Ka.length;for(L=0;L<Wf;L++){xs=Ka[L];const wa=xs.pattern;je=null;const nu=xs.short;if(nu!==!1?mi===nu&&(Ne=wa):xs.isCustom===!0?(Ht=wa.exec(Dt,bt,_i,z0),Ht!==null?(Ne=Ht[0],Ht.payload!==void 0&&(je=Ht.payload)):Ne=null):(this.updateLastIndex(wa,bt),Ne=this.match(wa,b,bt)),Ne!==null){if(Se=xs.longerAlt,Se!==void 0){const sc=Se.length;for(te=0;te<sc;te++){const iu=ac[Se[te]],Jl=iu.pattern;if(ot=null,iu.isCustom===!0?(Ht=Jl.exec(Dt,bt,_i,z0),Ht!==null?(ge=Ht[0],Ht.payload!==void 0&&(ot=Ht.payload)):ge=null):(this.updateLastIndex(Jl,bt),ge=this.match(Jl,b,bt)),ge&&ge.length>Ne.length){Ne=ge,je=ot,xs=iu;break}}}break}}if(Ne!==null){if(ct=Ne.length,pt=xs.group,pt!==void 0&&(wt=xs.tokenTypeIdx,Mt=this.createTokenInstance(Ne,bt,wt,xs.tokenType,ru,ic,ct),this.handlePayload(Mt,je),pt===!1?sr=this.addToken(_i,sr,Mt):z0[pt].push(Mt)),b=this.chopInput(b,ct),bt=bt+ct,ic=this.computeNewColumn(ic,ct),HBe===!0&&xs.canLineTerminator===!0){let wa=0,nu,sc;lD.lastIndex=0;do nu=lD.test(Ne),nu===!0&&(sc=lD.lastIndex-1,wa++);while(nu===!0);wa!==0&&(ru=ru+wa,ic=ct-sc,this.updateTokenEndLineColumnLocation(Mt,pt,sc,wa,ru,ic,ct))}this.handleModes(xs,kBe,sX,Mt)}else{const wa=bt,nu=ru,sc=ic;let iu=oX===!1;for(;iu===!1&&bt<Gt;)for(b=this.chopInput(b,1),bt++,X=0;X<E2;X++){const Jl=ac[X],dD=Jl.pattern,uX=Jl.short;if(uX!==!1?Dt.charCodeAt(bt)===uX&&(iu=!0):Jl.isCustom===!0?iu=dD.exec(Dt,bt,_i,z0)!==null:(this.updateLastIndex(dD,bt),iu=dD.exec(b)!==null),iu===!0)break}if(Jt=bt-wa,ic=this.computeNewColumn(ic,Jt),Xt=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(Dt,wa,Jt,nu,sc),k0.push({offset:wa,line:nu,column:sc,length:Jt,message:Xt}),oX===!1)break}}return this.hasCustom||(_i.length=sr),{tokens:_i,groups:z0,errors:k0}}handleModes(b,I,L,X){if(b.pop===!0){const te=b.push;I(X),te!==void 0&&L.call(this,te)}else b.push!==void 0&&L.call(this,b.push)}chopInput(b,I){return b.substring(I)}updateLastIndex(b,I){b.lastIndex=I}updateTokenEndLineColumnLocation(b,I,L,X,te,ge,Se){let Ne,je;I!==void 0&&(Ne=L===Se-1,je=Ne?-1:0,X===1&&Ne===!0||(b.endLine=te+je,b.endColumn=ge-1+-je))}computeNewColumn(b,I){return b+I}createOffsetOnlyToken(b,I,L,X){return{image:b,startOffset:I,tokenTypeIdx:L,tokenType:X}}createStartOnlyToken(b,I,L,X,te,ge){return{image:b,startOffset:I,startLine:te,startColumn:ge,tokenTypeIdx:L,tokenType:X}}createFullToken(b,I,L,X,te,ge,Se){return{image:b,startOffset:I,endOffset:I+Se-1,startLine:te,endLine:te,startColumn:ge,endColumn:ge+Se-1,tokenTypeIdx:L,tokenType:X}}addTokenUsingPush(b,I,L){return b.push(L),I}addTokenUsingMemberAccess(b,I,L){return b[I]=L,I++,I}handlePayloadNoCustom(b,I){}handlePayloadWithCustom(b,I){I!==null&&(b.payload=I)}matchWithTest(b,I,L){return b.test(I)===!0?I.substring(L,b.lastIndex):null}matchWithExec(b,I){const L=b.exec(I);return L!==null?L[0]:null}};Ta.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Ta.NA=/NOT_APPLICABLE/;function Qf(b){return mK(b)?b.LABEL:b.name}function g8e(b){return b.name}function mK(b){return ta(b.LABEL)&&b.LABEL!==""}var y8e="parent",gK="categories",yK="label",bK="group",vK="push_mode",AK="pop_mode",TK="longer_alt",wK="line_breaks",SK="start_chars_hint";function XM(b){return b8e(b)}function b8e(b){const I=b.pattern,L={};if(L.name=b.name,tu(I)||(L.PATTERN=I),Kt(b,y8e))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return Kt(b,gK)&&(L.CATEGORIES=b[gK]),U0([L]),Kt(b,yK)&&(L.LABEL=b[yK]),Kt(b,bK)&&(L.GROUP=b[bK]),Kt(b,AK)&&(L.POP_MODE=b[AK]),Kt(b,vK)&&(L.PUSH_MODE=b[vK]),Kt(b,TK)&&(L.LONGER_ALT=b[TK]),Kt(b,wK)&&(L.LINE_BREAKS=b[wK]),Kt(b,SK)&&(L.START_CHARS_HINT=b[SK]),L}var rc=XM({name:"EOF",pattern:Ta.NA});U0([rc]);function f2(b,I,L,X,te,ge,Se,Ne){return{image:I,startOffset:L,endOffset:X,startLine:te,endLine:ge,startColumn:Se,endColumn:Ne,tokenTypeIdx:b.tokenTypeIdx,tokenType:b}}function xK(b,I){return q0(b,I)}var JM={buildMismatchTokenMessage({expected:b,actual:I,previous:L,ruleName:X}){return`Expecting ${mK(b)?`--> ${Qf(b)} <--`:`token of type --> ${b.name} <--`} but found --> '${I.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:b,ruleName:I}){return"Redundant input, expecting EOF but found: "+b.image},buildNoViableAltMessage({expectedPathsPerAlt:b,actual:I,previous:L,customUserDescription:X,ruleName:te}){const ge="Expecting: ",Ne=`
but found: '`+As(I).image+"'";if(X)return ge+X+Ne;{const je=ra(b,(wt,Mt)=>wt.concat(Mt),[]),ot=Lt(je,wt=>`[${Lt(wt,Mt=>Qf(Mt)).join(", ")}]`),pt=`one of these possible Token sequences:
${Lt(ot,(wt,Mt)=>`  ${Mt+1}. ${wt}`).join(`
`)}`;return ge+pt+Ne}},buildEarlyExitMessage({expectedIterationPaths:b,actual:I,customUserDescription:L,ruleName:X}){const te="Expecting: ",Se=`
but found: '`+As(I).image+"'";if(L)return te+L+Se;{const je=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${Lt(b,ot=>`[${Lt(ot,ct=>Qf(ct)).join(",")}]`).join(" ,")}>`;return te+je+Se}}};Object.freeze(JM);var v8e={buildRuleNotFoundError(b,I){return"Invalid grammar, reference to a rule which is not defined: ->"+I.nonTerminalName+`<-
inside top level rule: ->`+b.name+"<-"}},Xl={buildDuplicateFoundError(b,I){function L(ct){return ct instanceof un?ct.terminalType.name:ct instanceof ji?ct.nonTerminalName:""}const X=b.name,te=As(I),ge=te.idx,Se=so(te),Ne=L(te),je=ge>0;let ot=`->${Se}${je?ge:""}<- ${Ne?`with argument: ->${Ne}<-`:""}
                  appears more than once (${I.length} times) in the top level rule: ->${X}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return ot=ot.replace(/[ \t]+/g," "),ot=ot.replace(/\s\s+/g,`
`),ot},buildNamespaceConflictError(b){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${b.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(b){const I=Lt(b.prefixPath,te=>Qf(te)).join(", "),L=b.alternation.idx===0?"":b.alternation.idx;return`Ambiguous alternatives: <${b.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${L}> inside <${b.topLevelRule.name}> Rule,
<${I}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(b){const I=Lt(b.prefixPath,te=>Qf(te)).join(", "),L=b.alternation.idx===0?"":b.alternation.idx;let X=`Ambiguous Alternatives Detected: <${b.ambiguityIndices.join(" ,")}> in <OR${L}> inside <${b.topLevelRule.name}> Rule,
<${I}> may appears as a prefix path in all these alternatives.
`;return X=X+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,X},buildEmptyRepetitionError(b){let I=so(b.repetition);return b.repetition.idx!==0&&(I+=b.repetition.idx),`The repetition <${I}> within Rule <${b.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(b){return"deprecated"},buildEmptyAlternationError(b){return`Ambiguous empty alternative: <${b.emptyChoiceIdx+1}> in <OR${b.alternation.idx}> inside <${b.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(b){return`An Alternation cannot have more than 256 alternatives:
<OR${b.alternation.idx}> inside <${b.topLevelRule.name}> Rule.
 has ${b.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(b){const I=b.topLevelRule.name,L=Lt(b.leftRecursionPath,ge=>ge.name),X=`${I} --> ${L.concat([I]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${I}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${X}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(b){return"deprecated"},buildDuplicateRuleNameError(b){let I;return b.topLevelRule instanceof Wl?I=b.topLevelRule.name:I=b.topLevelRule,`Duplicate definition, rule: ->${I}<- is already defined in the grammar: ->${b.grammarName}<-`}};function A8e(b,I){const L=new T8e(b,I);return L.resolveRefs(),L.errors}var T8e=class extends ec{constructor(b,I){super(),this.nameToTopRule=b,this.errMsgProvider=I,this.errors=[]}resolveRefs(){Yt(En(this.nameToTopRule),b=>{this.currTopLevel=b,b.accept(this)})}visitNonTerminal(b){const I=this.nameToTopRule[b.nonTerminalName];if(I)b.referencedRule=I;else{const L=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,b);this.errors.push({message:L,type:pi.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:b.nonTerminalName})}}},w8e=class extends t2{constructor(b,I){super(),this.topProd=b,this.path=I,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Qn(this.path.ruleStack).reverse(),this.occurrenceStack=Qn(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(b,I=[]){this.found||super.walk(b,I)}walkProdRef(b,I,L){if(b.referencedRule.name===this.nextProductionName&&b.idx===this.nextProductionOccurrence){const X=I.concat(L);this.updateExpectedNext(),this.walk(b.referencedRule,X)}}updateExpectedNext(){Vr(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},S8e=class extends w8e{constructor(b,I){super(b,I),this.path=I,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(b,I,L){if(this.isAtEndOfPath&&b.terminalType.name===this.nextTerminalName&&b.idx===this.nextTerminalOccurrence&&!this.found){const X=I.concat(L),te=new Bi({definition:X});this.possibleTokTypes=C0(te),this.found=!0}}},h2=class extends t2{constructor(b,I){super(),this.topRule=b,this.occurrence=I,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},x8e=class extends h2{walkMany(b,I,L){if(b.idx===this.occurrence){const X=As(I.concat(L));this.result.isEndOfRule=X===void 0,X instanceof un&&(this.result.token=X.terminalType,this.result.occurrence=X.idx)}else super.walkMany(b,I,L)}},EK=class extends h2{walkManySep(b,I,L){if(b.idx===this.occurrence){const X=As(I.concat(L));this.result.isEndOfRule=X===void 0,X instanceof un&&(this.result.token=X.terminalType,this.result.occurrence=X.idx)}else super.walkManySep(b,I,L)}},E8e=class extends h2{walkAtLeastOne(b,I,L){if(b.idx===this.occurrence){const X=As(I.concat(L));this.result.isEndOfRule=X===void 0,X instanceof un&&(this.result.token=X.terminalType,this.result.occurrence=X.idx)}else super.walkAtLeastOne(b,I,L)}},IK=class extends h2{walkAtLeastOneSep(b,I,L){if(b.idx===this.occurrence){const X=As(I.concat(L));this.result.isEndOfRule=X===void 0,X instanceof un&&(this.result.token=X.terminalType,this.result.occurrence=X.idx)}else super.walkAtLeastOneSep(b,I,L)}};function YM(b,I,L=[]){L=Qn(L);let X=[],te=0;function ge(Ne){return Ne.concat(ni(b,te+1))}function Se(Ne){const je=YM(ge(Ne),I,L);return X.concat(je)}for(;L.length<I&&te<b.length;){const Ne=b[te];if(Ne instanceof Bi)return Se(Ne.definition);if(Ne instanceof ji)return Se(Ne.definition);if(Ne instanceof qi)X=Se(Ne.definition);else if(Ne instanceof ws){const je=Ne.definition.concat([new In({definition:Ne.definition})]);return Se(je)}else if(Ne instanceof Ss){const je=[new Bi({definition:Ne.definition}),new In({definition:[new un({terminalType:Ne.separator})].concat(Ne.definition)})];return Se(je)}else if(Ne instanceof Qa){const je=Ne.definition.concat([new In({definition:[new un({terminalType:Ne.separator})].concat(Ne.definition)})]);X=Se(je)}else if(Ne instanceof In){const je=Ne.definition.concat([new In({definition:Ne.definition})]);X=Se(je)}else{if(Ne instanceof Wa)return Yt(Ne.definition,je=>{Vr(je.definition)===!1&&(X=Se(je.definition))}),X;if(Ne instanceof un)L.push(Ne.terminalType);else throw Error("non exhaustive match")}te++}return X.push({partialPath:L,suffixDef:ni(b,te)}),X}function OK(b,I,L,X){const te="EXIT_NONE_TERMINAL",ge=[te],Se="EXIT_ALTERNATIVE";let Ne=!1;const je=I.length,ot=je-X-1,ct=[],pt=[];for(pt.push({idx:-1,def:b,ruleStack:[],occurrenceStack:[]});!Vr(pt);){const wt=pt.pop();if(wt===Se){Ne&&Hf(pt).idx<=ot&&pt.pop();continue}const Mt=wt.def,Jt=wt.idx,Xt=wt.ruleStack,Ht=wt.occurrenceStack;if(Vr(Mt))continue;const Dt=Mt[0];if(Dt===te){const Gt={idx:Jt,def:ni(Mt),ruleStack:M0(Xt),occurrenceStack:M0(Ht)};pt.push(Gt)}else if(Dt instanceof un)if(Jt<je-1){const Gt=Jt+1,bt=I[Gt];if(L(bt,Dt.terminalType)){const sr={idx:Gt,def:ni(Mt),ruleStack:Xt,occurrenceStack:Ht};pt.push(sr)}}else if(Jt===je-1)ct.push({nextTokenType:Dt.terminalType,nextTokenOccurrence:Dt.idx,ruleStack:Xt,occurrenceStack:Ht}),Ne=!0;else throw Error("non exhaustive match");else if(Dt instanceof ji){const Gt=Qn(Xt);Gt.push(Dt.nonTerminalName);const bt=Qn(Ht);bt.push(Dt.idx);const sr={idx:Jt,def:Dt.definition.concat(ge,ni(Mt)),ruleStack:Gt,occurrenceStack:bt};pt.push(sr)}else if(Dt instanceof qi){const Gt={idx:Jt,def:ni(Mt),ruleStack:Xt,occurrenceStack:Ht};pt.push(Gt),pt.push(Se);const bt={idx:Jt,def:Dt.definition.concat(ni(Mt)),ruleStack:Xt,occurrenceStack:Ht};pt.push(bt)}else if(Dt instanceof ws){const Gt=new In({definition:Dt.definition,idx:Dt.idx}),bt=Dt.definition.concat([Gt],ni(Mt)),sr={idx:Jt,def:bt,ruleStack:Xt,occurrenceStack:Ht};pt.push(sr)}else if(Dt instanceof Ss){const Gt=new un({terminalType:Dt.separator}),bt=new In({definition:[Gt].concat(Dt.definition),idx:Dt.idx}),sr=Dt.definition.concat([bt],ni(Mt)),Kr={idx:Jt,def:sr,ruleStack:Xt,occurrenceStack:Ht};pt.push(Kr)}else if(Dt instanceof Qa){const Gt={idx:Jt,def:ni(Mt),ruleStack:Xt,occurrenceStack:Ht};pt.push(Gt),pt.push(Se);const bt=new un({terminalType:Dt.separator}),sr=new In({definition:[bt].concat(Dt.definition),idx:Dt.idx}),Kr=Dt.definition.concat([sr],ni(Mt)),_i={idx:Jt,def:Kr,ruleStack:Xt,occurrenceStack:Ht};pt.push(_i)}else if(Dt instanceof In){const Gt={idx:Jt,def:ni(Mt),ruleStack:Xt,occurrenceStack:Ht};pt.push(Gt),pt.push(Se);const bt=new In({definition:Dt.definition,idx:Dt.idx}),sr=Dt.definition.concat([bt],ni(Mt)),Kr={idx:Jt,def:sr,ruleStack:Xt,occurrenceStack:Ht};pt.push(Kr)}else if(Dt instanceof Wa)for(let Gt=Dt.definition.length-1;Gt>=0;Gt--){const bt=Dt.definition[Gt],sr={idx:Jt,def:bt.definition.concat(ni(Mt)),ruleStack:Xt,occurrenceStack:Ht};pt.push(sr),pt.push(Se)}else if(Dt instanceof Bi)pt.push({idx:Jt,def:Dt.definition.concat(ni(Mt)),ruleStack:Xt,occurrenceStack:Ht});else if(Dt instanceof Wl)pt.push(I8e(Dt,Jt,Xt,Ht));else throw Error("non exhaustive match")}return ct}function I8e(b,I,L,X){const te=Qn(L);te.push(b.name);const ge=Qn(X);return ge.push(1),{idx:I,def:b.definition,ruleStack:te,occurrenceStack:ge}}var fn;(function(b){b[b.OPTION=0]="OPTION",b[b.REPETITION=1]="REPETITION",b[b.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",b[b.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",b[b.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",b[b.ALTERNATION=5]="ALTERNATION"})(fn||(fn={}));function $M(b){if(b instanceof qi||b==="Option")return fn.OPTION;if(b instanceof In||b==="Repetition")return fn.REPETITION;if(b instanceof ws||b==="RepetitionMandatory")return fn.REPETITION_MANDATORY;if(b instanceof Ss||b==="RepetitionMandatoryWithSeparator")return fn.REPETITION_MANDATORY_WITH_SEPARATOR;if(b instanceof Qa||b==="RepetitionWithSeparator")return fn.REPETITION_WITH_SEPARATOR;if(b instanceof Wa||b==="Alternation")return fn.ALTERNATION;throw Error("non exhaustive match")}function O8e(b){const{occurrence:I,rule:L,prodType:X,maxLookahead:te}=b,ge=$M(X);return ge===fn.ALTERNATION?p2(I,L,te):_2(I,L,ge,te)}function R8e(b,I,L,X,te,ge){const Se=p2(b,I,L),Ne=FK(Se)?d2:q0;return ge(Se,X,Ne,te)}function P8e(b,I,L,X,te,ge){const Se=_2(b,I,te,L),Ne=FK(Se)?d2:q0;return ge(Se[0],Ne,X)}function N8e(b,I,L,X){const te=b.length,ge=vs(b,Se=>vs(Se,Ne=>Ne.length===1));if(I)return function(Se){const Ne=Lt(Se,je=>je.GATE);for(let je=0;je<te;je++){const ot=b[je],ct=ot.length,pt=Ne[je];if(!(pt!==void 0&&pt.call(this)===!1))e:for(let wt=0;wt<ct;wt++){const Mt=ot[wt],Jt=Mt.length;for(let Xt=0;Xt<Jt;Xt++){const Ht=this.LA(Xt+1);if(L(Ht,Mt[Xt])===!1)continue e}return je}}};if(ge&&!X){const Se=Lt(b,je=>Aa(je)),Ne=ra(Se,(je,ot,ct)=>(Yt(ot,pt=>{Kt(je,pt.tokenTypeIdx)||(je[pt.tokenTypeIdx]=ct),Yt(pt.categoryMatches,wt=>{Kt(je,wt)||(je[wt]=ct)})}),je),{});return function(){const je=this.LA(1);return Ne[je.tokenTypeIdx]}}else return function(){for(let Se=0;Se<te;Se++){const Ne=b[Se],je=Ne.length;e:for(let ot=0;ot<je;ot++){const ct=Ne[ot],pt=ct.length;for(let wt=0;wt<pt;wt++){const Mt=this.LA(wt+1);if(L(Mt,ct[wt])===!1)continue e}return Se}}}}function F8e(b,I,L){const X=vs(b,ge=>ge.length===1),te=b.length;if(X&&!L){const ge=Aa(b);if(ge.length===1&&Vr(ge[0].categoryMatches)){const Ne=ge[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===Ne}}else{const Se=ra(ge,(Ne,je,ot)=>(Ne[je.tokenTypeIdx]=!0,Yt(je.categoryMatches,ct=>{Ne[ct]=!0}),Ne),[]);return function(){const Ne=this.LA(1);return Se[Ne.tokenTypeIdx]===!0}}}else return function(){e:for(let ge=0;ge<te;ge++){const Se=b[ge],Ne=Se.length;for(let je=0;je<Ne;je++){const ot=this.LA(je+1);if(I(ot,Se[je])===!1)continue e}return!0}return!1}}var M8e=class extends t2{constructor(b,I,L){super(),this.topProd=b,this.targetOccurrence=I,this.targetProdType=L}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(b,I,L,X){return b.idx===this.targetOccurrence&&this.targetProdType===I?(this.restDef=L.concat(X),!0):!1}walkOption(b,I,L){this.checkIsTarget(b,fn.OPTION,I,L)||super.walkOption(b,I,L)}walkAtLeastOne(b,I,L){this.checkIsTarget(b,fn.REPETITION_MANDATORY,I,L)||super.walkOption(b,I,L)}walkAtLeastOneSep(b,I,L){this.checkIsTarget(b,fn.REPETITION_MANDATORY_WITH_SEPARATOR,I,L)||super.walkOption(b,I,L)}walkMany(b,I,L){this.checkIsTarget(b,fn.REPETITION,I,L)||super.walkOption(b,I,L)}walkManySep(b,I,L){this.checkIsTarget(b,fn.REPETITION_WITH_SEPARATOR,I,L)||super.walkOption(b,I,L)}},RK=class extends ec{constructor(b,I,L){super(),this.targetOccurrence=b,this.targetProdType=I,this.targetRef=L,this.result=[]}checkIsTarget(b,I){b.idx===this.targetOccurrence&&this.targetProdType===I&&(this.targetRef===void 0||b===this.targetRef)&&(this.result=b.definition)}visitOption(b){this.checkIsTarget(b,fn.OPTION)}visitRepetition(b){this.checkIsTarget(b,fn.REPETITION)}visitRepetitionMandatory(b){this.checkIsTarget(b,fn.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(b){this.checkIsTarget(b,fn.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(b){this.checkIsTarget(b,fn.REPETITION_WITH_SEPARATOR)}visitAlternation(b){this.checkIsTarget(b,fn.ALTERNATION)}};function PK(b){const I=new Array(b);for(let L=0;L<b;L++)I[L]=[];return I}function ZM(b){let I=[""];for(let L=0;L<b.length;L++){const X=b[L],te=[];for(let ge=0;ge<I.length;ge++){const Se=I[ge];te.push(Se+"_"+X.tokenTypeIdx);for(let Ne=0;Ne<X.categoryMatches.length;Ne++){const je="_"+X.categoryMatches[Ne];te.push(Se+je)}}I=te}return I}function D8e(b,I,L){for(let X=0;X<b.length;X++){if(X===L)continue;const te=b[X];for(let ge=0;ge<I.length;ge++){const Se=I[ge];if(te[Se]===!0)return!1}}return!0}function NK(b,I){const L=Lt(b,Se=>YM([Se],1)),X=PK(L.length),te=Lt(L,Se=>{const Ne={};return Yt(Se,je=>{const ot=ZM(je.partialPath);Yt(ot,ct=>{Ne[ct]=!0})}),Ne});let ge=L;for(let Se=1;Se<=I;Se++){const Ne=ge;ge=PK(Ne.length);for(let je=0;je<Ne.length;je++){const ot=Ne[je];for(let ct=0;ct<ot.length;ct++){const pt=ot[ct].partialPath,wt=ot[ct].suffixDef,Mt=ZM(pt);if(D8e(te,Mt,je)||Vr(wt)||pt.length===I){const Xt=X[je];if(eD(Xt,pt)===!1){Xt.push(pt);for(let Ht=0;Ht<Mt.length;Ht++){const Dt=Mt[Ht];te[je][Dt]=!0}}}else{const Xt=YM(wt,Se+1,pt);ge[je]=ge[je].concat(Xt),Yt(Xt,Ht=>{const Dt=ZM(Ht.partialPath);Yt(Dt,Gt=>{te[je][Gt]=!0})})}}}}return X}function p2(b,I,L,X){const te=new RK(b,fn.ALTERNATION,X);return I.accept(te),NK(te.result,L)}function _2(b,I,L,X){const te=new RK(b,L);I.accept(te);const ge=te.result,Ne=new M8e(I,b,L).startWalking(),je=new Bi({definition:ge}),ot=new Bi({definition:Ne});return NK([je,ot],X)}function eD(b,I){e:for(let L=0;L<b.length;L++){const X=b[L];if(X.length===I.length){for(let te=0;te<X.length;te++){const ge=I[te],Se=X[te];if((ge===Se||Se.categoryMatchesMap[ge.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function C8e(b,I){return b.length<I.length&&vs(b,(L,X)=>{const te=I[X];return L===te||te.categoryMatchesMap[L.tokenTypeIdx]})}function FK(b){return vs(b,I=>vs(I,L=>vs(L,X=>Vr(X.categoryMatches))))}function L8e(b){const I=b.lookaheadStrategy.validate({rules:b.rules,tokenTypes:b.tokenTypes,grammarName:b.grammarName});return Lt(I,L=>Object.assign({type:pi.CUSTOM_LOOKAHEAD_VALIDATION},L))}function j8e(b,I,L,X){const te=za(b,je=>B8e(je,L)),ge=J8e(b,I,L),Se=za(b,je=>Q8e(je,L)),Ne=za(b,je=>V8e(je,b,X,L));return te.concat(ge,Se,Ne)}function B8e(b,I){const L=new U8e;b.accept(L);const X=L.allProductions,te=zW(X,q8e),ge=Ts(te,Ne=>Ne.length>1);return Lt(En(ge),Ne=>{const je=As(Ne),ot=I.buildDuplicateFoundError(b,Ne),ct=so(je),pt={message:ot,type:pi.DUPLICATE_PRODUCTIONS,ruleName:b.name,dslName:ct,occurrence:je.idx},wt=MK(je);return wt&&(pt.parameter=wt),pt})}function q8e(b){return`${so(b)}_#_${b.idx}_#_${MK(b)}`}function MK(b){return b instanceof un?b.terminalType.name:b instanceof ji?b.nonTerminalName:""}var U8e=class extends ec{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(b){this.allProductions.push(b)}visitOption(b){this.allProductions.push(b)}visitRepetitionWithSeparator(b){this.allProductions.push(b)}visitRepetitionMandatory(b){this.allProductions.push(b)}visitRepetitionMandatoryWithSeparator(b){this.allProductions.push(b)}visitRepetition(b){this.allProductions.push(b)}visitAlternation(b){this.allProductions.push(b)}visitTerminal(b){this.allProductions.push(b)}};function V8e(b,I,L,X){const te=[];if(ra(I,(Se,Ne)=>Ne.name===b.name?Se+1:Se,0)>1){const Se=X.buildDuplicateRuleNameError({topLevelRule:b,grammarName:L});te.push({message:Se,type:pi.DUPLICATE_RULE_NAME,ruleName:b.name})}return te}function G8e(b,I,L){const X=[];let te;return Li(I,b)||(te=`Invalid rule override, rule: ->${b}<- cannot be overridden in the grammar: ->${L}<-as it is not defined in any of the super grammars `,X.push({message:te,type:pi.INVALID_RULE_OVERRIDE,ruleName:b})),X}function DK(b,I,L,X=[]){const te=[],ge=m2(I.definition);if(Vr(ge))return[];{const Se=b.name;Li(ge,b)&&te.push({message:L.buildLeftRecursionError({topLevelRule:b,leftRecursionPath:X}),type:pi.LEFT_RECURSION,ruleName:Se});const je=YO(ge,X.concat([b])),ot=za(je,ct=>{const pt=Qn(X);return pt.push(ct),DK(b,ct,L,pt)});return te.concat(ot)}}function m2(b){let I=[];if(Vr(b))return I;const L=As(b);if(L instanceof ji)I.push(L.referencedRule);else if(L instanceof Bi||L instanceof qi||L instanceof ws||L instanceof Ss||L instanceof Qa||L instanceof In)I=I.concat(m2(L.definition));else if(L instanceof Wa)I=Aa(Lt(L.definition,ge=>m2(ge.definition)));else if(!(L instanceof un))throw Error("non exhaustive match");const X=e2(L),te=b.length>1;if(X&&te){const ge=ni(b);return I.concat(m2(ge))}else return I}var tD=class extends ec{constructor(){super(...arguments),this.alternations=[]}visitAlternation(b){this.alternations.push(b)}};function H8e(b,I){const L=new tD;b.accept(L);const X=L.alternations;return za(X,ge=>{const Se=M0(ge.definition);return za(Se,(Ne,je)=>{const ot=OK([Ne],[],q0,1);return Vr(ot)?[{message:I.buildEmptyAlternationError({topLevelRule:b,alternation:ge,emptyChoiceIdx:je}),type:pi.NONE_LAST_EMPTY_ALT,ruleName:b.name,occurrence:ge.idx,alternative:je+1}]:[]})})}function k8e(b,I,L){const X=new tD;b.accept(X);let te=X.alternations;return te=$O(te,Se=>Se.ignoreAmbiguities===!0),za(te,Se=>{const Ne=Se.idx,je=Se.maxLookahead||I,ot=p2(Ne,b,je,Se),ct=K8e(ot,Se,b,L),pt=X8e(ot,Se,b,L);return ct.concat(pt)})}var z8e=class extends ec{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(b){this.allProductions.push(b)}visitRepetitionMandatory(b){this.allProductions.push(b)}visitRepetitionMandatoryWithSeparator(b){this.allProductions.push(b)}visitRepetition(b){this.allProductions.push(b)}};function Q8e(b,I){const L=new tD;b.accept(L);const X=L.alternations;return za(X,ge=>ge.definition.length>255?[{message:I.buildTooManyAlternativesError({topLevelRule:b,alternation:ge}),type:pi.TOO_MANY_ALTS,ruleName:b.name,occurrence:ge.idx}]:[])}function W8e(b,I,L){const X=[];return Yt(b,te=>{const ge=new z8e;te.accept(ge);const Se=ge.allProductions;Yt(Se,Ne=>{const je=$M(Ne),ot=Ne.maxLookahead||I,ct=Ne.idx,wt=_2(ct,te,je,ot)[0];if(Vr(Aa(wt))){const Mt=L.buildEmptyRepetitionError({topLevelRule:te,repetition:Ne});X.push({message:Mt,type:pi.NO_NON_EMPTY_LOOKAHEAD,ruleName:te.name})}})}),X}function K8e(b,I,L,X){const te=[],ge=ra(b,(Ne,je,ot)=>(I.definition[ot].ignoreAmbiguities===!0||Yt(je,ct=>{const pt=[ot];Yt(b,(wt,Mt)=>{ot!==Mt&&eD(wt,ct)&&I.definition[Mt].ignoreAmbiguities!==!0&&pt.push(Mt)}),pt.length>1&&!eD(te,ct)&&(te.push(ct),Ne.push({alts:pt,path:ct}))}),Ne),[]);return Lt(ge,Ne=>{const je=Lt(Ne.alts,ct=>ct+1);return{message:X.buildAlternationAmbiguityError({topLevelRule:L,alternation:I,ambiguityIndices:je,prefixPath:Ne.path}),type:pi.AMBIGUOUS_ALTS,ruleName:L.name,occurrence:I.idx,alternatives:Ne.alts}})}function X8e(b,I,L,X){const te=ra(b,(Se,Ne,je)=>{const ot=Lt(Ne,ct=>({idx:je,path:ct}));return Se.concat(ot)},[]);return F0(za(te,Se=>{if(I.definition[Se.idx].ignoreAmbiguities===!0)return[];const je=Se.idx,ot=Se.path,ct=ka(te,wt=>I.definition[wt.idx].ignoreAmbiguities!==!0&&wt.idx<je&&C8e(wt.path,ot));return Lt(ct,wt=>{const Mt=[wt.idx+1,je+1],Jt=I.idx===0?"":I.idx;return{message:X.buildAlternationPrefixAmbiguityError({topLevelRule:L,alternation:I,ambiguityIndices:Mt,prefixPath:wt.path}),type:pi.AMBIGUOUS_PREFIX_ALTS,ruleName:L.name,occurrence:Jt,alternatives:Mt}})}))}function J8e(b,I,L){const X=[],te=Lt(I,ge=>ge.name);return Yt(b,ge=>{const Se=ge.name;if(Li(te,Se)){const Ne=L.buildNamespaceConflictError(ge);X.push({message:Ne,type:pi.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:Se})}}),X}function Y8e(b){const I=UM(b,{errMsgProvider:v8e}),L={};return Yt(b.rules,X=>{L[X.name]=X}),A8e(L,I.errMsgProvider)}function $8e(b){return b=UM(b,{errMsgProvider:Xl}),j8e(b.rules,b.tokenTypes,b.errMsgProvider,b.grammarName)}var CK="MismatchedTokenException",LK="NoViableAltException",jK="EarlyExitException",BK="NotAllInputParsedException",qK=[CK,LK,jK,BK];Object.freeze(qK);function G0(b){return Li(qK,b.name)}var g2=class extends Error{constructor(b,I){super(b),this.token=I,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},rD=class extends g2{constructor(b,I,L){super(b,I),this.previousToken=L,this.name=CK}},UK=class extends g2{constructor(b,I,L){super(b,I),this.previousToken=L,this.name=LK}},VK=class extends g2{constructor(b,I){super(b,I),this.name=BK}},GK=class extends g2{constructor(b,I,L){super(b,I),this.previousToken=L,this.name=jK}},nD={},HK="InRuleRecoveryException",Z8e=class extends Error{constructor(b){super(b),this.name=HK}},eBe=class{initRecoverable(b){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Kt(b,"recoveryEnabled")?b.recoveryEnabled:oo.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=tBe)}getTokenToInsert(b){const I=f2(b,"",NaN,NaN,NaN,NaN,NaN,NaN);return I.isInsertedInRecovery=!0,I}canTokenTypeBeInsertedInRecovery(b){return!0}canTokenTypeBeDeletedInRecovery(b){return!0}tryInRepetitionRecovery(b,I,L,X){const te=this.findReSyncTokenType(),ge=this.exportLexerState(),Se=[];let Ne=!1;const je=this.LA(1);let ot=this.LA(1);const ct=()=>{const pt=this.LA(0),wt=this.errorMessageProvider.buildMismatchTokenMessage({expected:X,actual:je,previous:pt,ruleName:this.getCurrRuleFullName()}),Mt=new rD(wt,je,this.LA(0));Mt.resyncedTokens=M0(Se),this.SAVE_ERROR(Mt)};for(;!Ne;)if(this.tokenMatcher(ot,X)){ct();return}else if(L.call(this)){ct(),b.apply(this,I);return}else this.tokenMatcher(ot,te)?Ne=!0:(ot=this.SKIP_TOKEN(),this.addToResyncTokens(ot,Se));this.importLexerState(ge)}shouldInRepetitionRecoveryBeTried(b,I,L){return!(L===!1||this.tokenMatcher(this.LA(1),b)||this.isBackTracking()||this.canPerformInRuleRecovery(b,this.getFollowsForInRuleRecovery(b,I)))}getFollowsForInRuleRecovery(b,I){const L=this.getCurrentGrammarPath(b,I);return this.getNextPossibleTokenTypes(L)}tryInRuleRecovery(b,I){if(this.canRecoverWithSingleTokenInsertion(b,I))return this.getTokenToInsert(b);if(this.canRecoverWithSingleTokenDeletion(b)){const L=this.SKIP_TOKEN();return this.consumeToken(),L}throw new Z8e("sad sad panda")}canPerformInRuleRecovery(b,I){return this.canRecoverWithSingleTokenInsertion(b,I)||this.canRecoverWithSingleTokenDeletion(b)}canRecoverWithSingleTokenInsertion(b,I){if(!this.canTokenTypeBeInsertedInRecovery(b)||Vr(I))return!1;const L=this.LA(1);return kf(I,te=>this.tokenMatcher(L,te))!==void 0}canRecoverWithSingleTokenDeletion(b){return this.canTokenTypeBeDeletedInRecovery(b)?this.tokenMatcher(this.LA(2),b):!1}isInCurrentRuleReSyncSet(b){const I=this.getCurrFollowKey(),L=this.getFollowSetFromFollowKey(I);return Li(L,b)}findReSyncTokenType(){const b=this.flattenFollowSet();let I=this.LA(1),L=2;for(;;){const X=kf(b,te=>xK(I,te));if(X!==void 0)return X;I=this.LA(L),L++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return nD;const b=this.getLastExplicitRuleShortName(),I=this.getLastExplicitRuleOccurrenceIndex(),L=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(b),idxInCallingRule:I,inRule:this.shortRuleNameToFullName(L)}}buildFullFollowKeyStack(){const b=this.RULE_STACK,I=this.RULE_OCCURRENCE_STACK;return Lt(b,(L,X)=>X===0?nD:{ruleName:this.shortRuleNameToFullName(L),idxInCallingRule:I[X],inRule:this.shortRuleNameToFullName(b[X-1])})}flattenFollowSet(){const b=Lt(this.buildFullFollowKeyStack(),I=>this.getFollowSetFromFollowKey(I));return Aa(b)}getFollowSetFromFollowKey(b){if(b===nD)return[rc];const I=b.ruleName+b.idxInCallingRule+ZW+b.inRule;return this.resyncFollows[I]}addToResyncTokens(b,I){return this.tokenMatcher(b,rc)||I.push(b),I}reSyncTo(b){const I=[];let L=this.LA(1);for(;this.tokenMatcher(L,b)===!1;)L=this.SKIP_TOKEN(),this.addToResyncTokens(L,I);return M0(I)}attemptInRepetitionRecovery(b,I,L,X,te,ge,Se){}getCurrentGrammarPath(b,I){const L=this.getHumanReadableRuleStack(),X=Qn(this.RULE_OCCURRENCE_STACK);return{ruleStack:L,occurrenceStack:X,lastTok:b,lastTokOccurrence:I}}getHumanReadableRuleStack(){return Lt(this.RULE_STACK,b=>this.shortRuleNameToFullName(b))}};function tBe(b,I,L,X,te,ge,Se){const Ne=this.getKeyForAutomaticLookahead(X,te);let je=this.firstAfterRepMap[Ne];if(je===void 0){const wt=this.getCurrRuleFullName(),Mt=this.getGAstProductions()[wt];je=new ge(Mt,te).startWalking(),this.firstAfterRepMap[Ne]=je}let ot=je.token,ct=je.occurrence;const pt=je.isEndOfRule;this.RULE_STACK.length===1&&pt&&ot===void 0&&(ot=rc,ct=1),!(ot===void 0||ct===void 0)&&this.shouldInRepetitionRecoveryBeTried(ot,ct,Se)&&this.tryInRepetitionRecovery(b,I,L,ot)}var rBe=4,nc=8,kK=1<<nc,zK=2<<nc,iD=3<<nc,aD=4<<nc,sD=5<<nc,y2=6<<nc;function oD(b,I,L){return L|I|b}var QK=class{constructor(b){var I;this.maxLookahead=(I=b==null?void 0:b.maxLookahead)!==null&&I!==void 0?I:oo.maxLookahead}validate(b){const I=this.validateNoLeftRecursion(b.rules);if(Vr(I)){const L=this.validateEmptyOrAlternatives(b.rules),X=this.validateAmbiguousAlternationAlternatives(b.rules,this.maxLookahead),te=this.validateSomeNonEmptyLookaheadPath(b.rules,this.maxLookahead);return[...I,...L,...X,...te]}return I}validateNoLeftRecursion(b){return za(b,I=>DK(I,I,Xl))}validateEmptyOrAlternatives(b){return za(b,I=>H8e(I,Xl))}validateAmbiguousAlternationAlternatives(b,I){return za(b,L=>k8e(L,I,Xl))}validateSomeNonEmptyLookaheadPath(b,I){return W8e(b,I,Xl)}buildLookaheadForAlternation(b){return R8e(b.prodOccurrence,b.rule,b.maxLookahead,b.hasPredicates,b.dynamicTokensEnabled,N8e)}buildLookaheadForOptional(b){return P8e(b.prodOccurrence,b.rule,b.maxLookahead,b.dynamicTokensEnabled,$M(b.prodType),F8e)}},nBe=class{initLooksAhead(b){this.dynamicTokensEnabled=Kt(b,"dynamicTokensEnabled")?b.dynamicTokensEnabled:oo.dynamicTokensEnabled,this.maxLookahead=Kt(b,"maxLookahead")?b.maxLookahead:oo.maxLookahead,this.lookaheadStrategy=Kt(b,"lookaheadStrategy")?b.lookaheadStrategy:new QK({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(b){Yt(b,I=>{this.TRACE_INIT(`${I.name} Rule Lookahead`,()=>{const{alternation:L,repetition:X,option:te,repetitionMandatory:ge,repetitionMandatoryWithSeparator:Se,repetitionWithSeparator:Ne}=aBe(I);Yt(L,je=>{const ot=je.idx===0?"":je.idx;this.TRACE_INIT(`${so(je)}${ot}`,()=>{const ct=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:je.idx,rule:I,maxLookahead:je.maxLookahead||this.maxLookahead,hasPredicates:je.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),pt=oD(this.fullRuleNameToShort[I.name],kK,je.idx);this.setLaFuncCache(pt,ct)})}),Yt(X,je=>{this.computeLookaheadFunc(I,je.idx,iD,"Repetition",je.maxLookahead,so(je))}),Yt(te,je=>{this.computeLookaheadFunc(I,je.idx,zK,"Option",je.maxLookahead,so(je))}),Yt(ge,je=>{this.computeLookaheadFunc(I,je.idx,aD,"RepetitionMandatory",je.maxLookahead,so(je))}),Yt(Se,je=>{this.computeLookaheadFunc(I,je.idx,y2,"RepetitionMandatoryWithSeparator",je.maxLookahead,so(je))}),Yt(Ne,je=>{this.computeLookaheadFunc(I,je.idx,sD,"RepetitionWithSeparator",je.maxLookahead,so(je))})})})}computeLookaheadFunc(b,I,L,X,te,ge){this.TRACE_INIT(`${ge}${I===0?"":I}`,()=>{const Se=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:I,rule:b,maxLookahead:te||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:X}),Ne=oD(this.fullRuleNameToShort[b.name],L,I);this.setLaFuncCache(Ne,Se)})}getKeyForAutomaticLookahead(b,I){const L=this.getLastExplicitRuleShortName();return oD(L,b,I)}getLaFuncFromCache(b){return this.lookAheadFuncsCache.get(b)}setLaFuncCache(b,I){this.lookAheadFuncsCache.set(b,I)}},iBe=class extends ec{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(b){this.dslMethods.option.push(b)}visitRepetitionWithSeparator(b){this.dslMethods.repetitionWithSeparator.push(b)}visitRepetitionMandatory(b){this.dslMethods.repetitionMandatory.push(b)}visitRepetitionMandatoryWithSeparator(b){this.dslMethods.repetitionMandatoryWithSeparator.push(b)}visitRepetition(b){this.dslMethods.repetition.push(b)}visitAlternation(b){this.dslMethods.alternation.push(b)}},b2=new iBe;function aBe(b){b2.reset(),b.accept(b2);const I=b2.dslMethods;return b2.reset(),I}function WK(b,I){isNaN(b.startOffset)===!0?(b.startOffset=I.startOffset,b.endOffset=I.endOffset):b.endOffset<I.endOffset&&(b.endOffset=I.endOffset)}function KK(b,I){isNaN(b.startOffset)===!0?(b.startOffset=I.startOffset,b.startColumn=I.startColumn,b.startLine=I.startLine,b.endOffset=I.endOffset,b.endColumn=I.endColumn,b.endLine=I.endLine):b.endOffset<I.endOffset&&(b.endOffset=I.endOffset,b.endColumn=I.endColumn,b.endLine=I.endLine)}function sBe(b,I,L){b.children[L]===void 0?b.children[L]=[I]:b.children[L].push(I)}function oBe(b,I,L){b.children[I]===void 0?b.children[I]=[L]:b.children[I].push(L)}var uBe="name";function XK(b,I){Object.defineProperty(b,uBe,{enumerable:!1,configurable:!0,writable:!1,value:I})}function cBe(b,I){const L=va(b),X=L.length;for(let te=0;te<X;te++){const ge=L[te],Se=b[ge],Ne=Se.length;for(let je=0;je<Ne;je++){const ot=Se[je];ot.tokenTypeIdx===void 0&&this[ot.name](ot.children,I)}}}function lBe(b,I){const L=function(){};XK(L,b+"BaseSemantics");const X={visit:function(te,ge){if(Oe(te)&&(te=te[0]),!tu(te))return this[te.name](te.children,ge)},validateVisitor:function(){const te=fBe(this,I);if(!Vr(te)){const ge=Lt(te,Se=>Se.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${ge.join(`

`).replace(/\n/g,`
	`)}`)}}};return L.prototype=X,L.prototype.constructor=L,L._RULE_NAMES=I,L}function dBe(b,I,L){const X=function(){};XK(X,b+"BaseSemanticsWithDefaults");const te=Object.create(L.prototype);return Yt(I,ge=>{te[ge]=cBe}),X.prototype=te,X.prototype.constructor=X,X}var uD;(function(b){b[b.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",b[b.MISSING_METHOD=1]="MISSING_METHOD"})(uD||(uD={}));function fBe(b,I){return hBe(b,I)}function hBe(b,I){const L=ka(I,te=>Re(b[te])===!1),X=Lt(L,te=>({msg:`Missing visitor method: <${te}> on ${b.constructor.name} CST Visitor.`,type:uD.MISSING_METHOD,methodName:te}));return F0(X)}var pBe=class{initTreeBuilder(b){if(this.CST_STACK=[],this.outputCst=b.outputCst,this.nodeLocationTracking=Kt(b,"nodeLocationTracking")?b.nodeLocationTracking:oo.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=nr,this.cstFinallyStateUpdate=nr,this.cstPostTerminal=nr,this.cstPostNonTerminal=nr,this.cstPostRule=nr;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=KK,this.setNodeLocationFromNode=KK,this.cstPostRule=nr,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=nr,this.setNodeLocationFromNode=nr,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=WK,this.setNodeLocationFromNode=WK,this.cstPostRule=nr,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=nr,this.setNodeLocationFromNode=nr,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=nr,this.setNodeLocationFromNode=nr,this.cstPostRule=nr,this.setInitialNodeLocation=nr;else throw Error(`Invalid <nodeLocationTracking> config option: "${b.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(b){b.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(b){b.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(b){b.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(b){const I=this.LA(1);b.location={startOffset:I.startOffset,startLine:I.startLine,startColumn:I.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(b){const I={name:b,children:Object.create(null)};this.setInitialNodeLocation(I),this.CST_STACK.push(I)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(b){const I=this.LA(0),L=b.location;L.startOffset<=I.startOffset?(L.endOffset=I.endOffset,L.endLine=I.endLine,L.endColumn=I.endColumn):(L.startOffset=NaN,L.startLine=NaN,L.startColumn=NaN)}cstPostRuleOnlyOffset(b){const I=this.LA(0),L=b.location;L.startOffset<=I.startOffset?L.endOffset=I.endOffset:L.startOffset=NaN}cstPostTerminal(b,I){const L=this.CST_STACK[this.CST_STACK.length-1];sBe(L,I,b),this.setNodeLocationFromToken(L.location,I)}cstPostNonTerminal(b,I){const L=this.CST_STACK[this.CST_STACK.length-1];oBe(L,I,b),this.setNodeLocationFromNode(L.location,b.location)}getBaseCstVisitorConstructor(){if(tu(this.baseCstVisitorConstructor)){const b=lBe(this.className,va(this.gastProductionsCache));return this.baseCstVisitorConstructor=b,b}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(tu(this.baseCstVisitorWithDefaultsConstructor)){const b=dBe(this.className,va(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=b,b}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const b=this.RULE_STACK;return b[b.length-1]}getPreviousExplicitRuleShortName(){const b=this.RULE_STACK;return b[b.length-2]}getLastExplicitRuleOccurrenceIndex(){const b=this.RULE_OCCURRENCE_STACK;return b[b.length-1]}},_Be=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(b){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=b,this.tokVectorLength=b.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):T2}LA(b){const I=this.currIdx+b;return I<0||this.tokVectorLength<=I?T2:this.tokVector[I]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(b){this.currIdx=b}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},mBe=class{ACTION(b){return b.call(this)}consume(b,I,L){return this.consumeInternal(I,b,L)}subrule(b,I,L){return this.subruleInternal(I,b,L)}option(b,I){return this.optionInternal(I,b)}or(b,I){return this.orInternal(I,b)}many(b,I){return this.manyInternal(b,I)}atLeastOne(b,I){return this.atLeastOneInternal(b,I)}CONSUME(b,I){return this.consumeInternal(b,0,I)}CONSUME1(b,I){return this.consumeInternal(b,1,I)}CONSUME2(b,I){return this.consumeInternal(b,2,I)}CONSUME3(b,I){return this.consumeInternal(b,3,I)}CONSUME4(b,I){return this.consumeInternal(b,4,I)}CONSUME5(b,I){return this.consumeInternal(b,5,I)}CONSUME6(b,I){return this.consumeInternal(b,6,I)}CONSUME7(b,I){return this.consumeInternal(b,7,I)}CONSUME8(b,I){return this.consumeInternal(b,8,I)}CONSUME9(b,I){return this.consumeInternal(b,9,I)}SUBRULE(b,I){return this.subruleInternal(b,0,I)}SUBRULE1(b,I){return this.subruleInternal(b,1,I)}SUBRULE2(b,I){return this.subruleInternal(b,2,I)}SUBRULE3(b,I){return this.subruleInternal(b,3,I)}SUBRULE4(b,I){return this.subruleInternal(b,4,I)}SUBRULE5(b,I){return this.subruleInternal(b,5,I)}SUBRULE6(b,I){return this.subruleInternal(b,6,I)}SUBRULE7(b,I){return this.subruleInternal(b,7,I)}SUBRULE8(b,I){return this.subruleInternal(b,8,I)}SUBRULE9(b,I){return this.subruleInternal(b,9,I)}OPTION(b){return this.optionInternal(b,0)}OPTION1(b){return this.optionInternal(b,1)}OPTION2(b){return this.optionInternal(b,2)}OPTION3(b){return this.optionInternal(b,3)}OPTION4(b){return this.optionInternal(b,4)}OPTION5(b){return this.optionInternal(b,5)}OPTION6(b){return this.optionInternal(b,6)}OPTION7(b){return this.optionInternal(b,7)}OPTION8(b){return this.optionInternal(b,8)}OPTION9(b){return this.optionInternal(b,9)}OR(b){return this.orInternal(b,0)}OR1(b){return this.orInternal(b,1)}OR2(b){return this.orInternal(b,2)}OR3(b){return this.orInternal(b,3)}OR4(b){return this.orInternal(b,4)}OR5(b){return this.orInternal(b,5)}OR6(b){return this.orInternal(b,6)}OR7(b){return this.orInternal(b,7)}OR8(b){return this.orInternal(b,8)}OR9(b){return this.orInternal(b,9)}MANY(b){this.manyInternal(0,b)}MANY1(b){this.manyInternal(1,b)}MANY2(b){this.manyInternal(2,b)}MANY3(b){this.manyInternal(3,b)}MANY4(b){this.manyInternal(4,b)}MANY5(b){this.manyInternal(5,b)}MANY6(b){this.manyInternal(6,b)}MANY7(b){this.manyInternal(7,b)}MANY8(b){this.manyInternal(8,b)}MANY9(b){this.manyInternal(9,b)}MANY_SEP(b){this.manySepFirstInternal(0,b)}MANY_SEP1(b){this.manySepFirstInternal(1,b)}MANY_SEP2(b){this.manySepFirstInternal(2,b)}MANY_SEP3(b){this.manySepFirstInternal(3,b)}MANY_SEP4(b){this.manySepFirstInternal(4,b)}MANY_SEP5(b){this.manySepFirstInternal(5,b)}MANY_SEP6(b){this.manySepFirstInternal(6,b)}MANY_SEP7(b){this.manySepFirstInternal(7,b)}MANY_SEP8(b){this.manySepFirstInternal(8,b)}MANY_SEP9(b){this.manySepFirstInternal(9,b)}AT_LEAST_ONE(b){this.atLeastOneInternal(0,b)}AT_LEAST_ONE1(b){return this.atLeastOneInternal(1,b)}AT_LEAST_ONE2(b){this.atLeastOneInternal(2,b)}AT_LEAST_ONE3(b){this.atLeastOneInternal(3,b)}AT_LEAST_ONE4(b){this.atLeastOneInternal(4,b)}AT_LEAST_ONE5(b){this.atLeastOneInternal(5,b)}AT_LEAST_ONE6(b){this.atLeastOneInternal(6,b)}AT_LEAST_ONE7(b){this.atLeastOneInternal(7,b)}AT_LEAST_ONE8(b){this.atLeastOneInternal(8,b)}AT_LEAST_ONE9(b){this.atLeastOneInternal(9,b)}AT_LEAST_ONE_SEP(b){this.atLeastOneSepFirstInternal(0,b)}AT_LEAST_ONE_SEP1(b){this.atLeastOneSepFirstInternal(1,b)}AT_LEAST_ONE_SEP2(b){this.atLeastOneSepFirstInternal(2,b)}AT_LEAST_ONE_SEP3(b){this.atLeastOneSepFirstInternal(3,b)}AT_LEAST_ONE_SEP4(b){this.atLeastOneSepFirstInternal(4,b)}AT_LEAST_ONE_SEP5(b){this.atLeastOneSepFirstInternal(5,b)}AT_LEAST_ONE_SEP6(b){this.atLeastOneSepFirstInternal(6,b)}AT_LEAST_ONE_SEP7(b){this.atLeastOneSepFirstInternal(7,b)}AT_LEAST_ONE_SEP8(b){this.atLeastOneSepFirstInternal(8,b)}AT_LEAST_ONE_SEP9(b){this.atLeastOneSepFirstInternal(9,b)}RULE(b,I,L=w2){if(Li(this.definedRulesNames,b)){const ge={message:Xl.buildDuplicateRuleNameError({topLevelRule:b,grammarName:this.className}),type:pi.DUPLICATE_RULE_NAME,ruleName:b};this.definitionErrors.push(ge)}this.definedRulesNames.push(b);const X=this.defineRule(b,I,L);return this[b]=X,X}OVERRIDE_RULE(b,I,L=w2){const X=G8e(b,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(X);const te=this.defineRule(b,I,L);return this[b]=te,te}BACKTRACK(b,I){return function(){this.isBackTrackingStack.push(1);const L=this.saveRecogState();try{return b.apply(this,I),!0}catch(X){if(G0(X))return!1;throw X}finally{this.reloadRecogState(L),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return YW(En(this.gastProductionsCache))}},gBe=class{initRecognizerEngine(b,I){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=d2,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Kt(I,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Oe(b)){if(Vr(b))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof b[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Oe(b))this.tokensMap=ra(b,(te,ge)=>(te[ge.name]=ge,te),{});else if(Kt(b,"modes")&&vs(Aa(En(b.modes)),m8e)){const te=Aa(En(b.modes)),ge=ZO(te);this.tokensMap=ra(ge,(Se,Ne)=>(Se[Ne.name]=Ne,Se),{})}else if(he(b))this.tokensMap=Qn(b);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=rc;const L=Kt(b,"modes")?Aa(En(b.modes)):En(b),X=vs(L,te=>Vr(te.categoryMatches));this.tokenMatcher=X?d2:q0,U0(En(this.tokensMap))}defineRule(b,I,L){if(this.selfAnalysisDone)throw Error(`Grammar rule <${b}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const X=Kt(L,"resyncEnabled")?L.resyncEnabled:w2.resyncEnabled,te=Kt(L,"recoveryValueFunc")?L.recoveryValueFunc:w2.recoveryValueFunc,ge=this.ruleShortNameIdx<<rBe+nc;this.ruleShortNameIdx++,this.shortRuleNameToFull[ge]=b,this.fullRuleNameToShort[b]=ge;let Se;return this.outputCst===!0?Se=function(...ot){try{this.ruleInvocationStateUpdate(ge,b,this.subruleIdx),I.apply(this,ot);const ct=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(ct),ct}catch(ct){return this.invokeRuleCatch(ct,X,te)}finally{this.ruleFinallyStateUpdate()}}:Se=function(...ot){try{return this.ruleInvocationStateUpdate(ge,b,this.subruleIdx),I.apply(this,ot)}catch(ct){return this.invokeRuleCatch(ct,X,te)}finally{this.ruleFinallyStateUpdate()}},Object.assign(Se,{ruleName:b,originalGrammarAction:I})}invokeRuleCatch(b,I,L){const X=this.RULE_STACK.length===1,te=I&&!this.isBackTracking()&&this.recoveryEnabled;if(G0(b)){const ge=b;if(te){const Se=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(Se))if(ge.resyncedTokens=this.reSyncTo(Se),this.outputCst){const Ne=this.CST_STACK[this.CST_STACK.length-1];return Ne.recoveredNode=!0,Ne}else return L(b);else{if(this.outputCst){const Ne=this.CST_STACK[this.CST_STACK.length-1];Ne.recoveredNode=!0,ge.partialCstResult=Ne}throw ge}}else{if(X)return this.moveToTerminatedState(),L(b);throw ge}}else throw b}optionInternal(b,I){const L=this.getKeyForAutomaticLookahead(zK,I);return this.optionInternalLogic(b,I,L)}optionInternalLogic(b,I,L){let X=this.getLaFuncFromCache(L),te;if(typeof b!="function"){te=b.DEF;const ge=b.GATE;if(ge!==void 0){const Se=X;X=()=>ge.call(this)&&Se.call(this)}}else te=b;if(X.call(this)===!0)return te.call(this)}atLeastOneInternal(b,I){const L=this.getKeyForAutomaticLookahead(aD,b);return this.atLeastOneInternalLogic(b,I,L)}atLeastOneInternalLogic(b,I,L){let X=this.getLaFuncFromCache(L),te;if(typeof I!="function"){te=I.DEF;const ge=I.GATE;if(ge!==void 0){const Se=X;X=()=>ge.call(this)&&Se.call(this)}}else te=I;if(X.call(this)===!0){let ge=this.doSingleRepetition(te);for(;X.call(this)===!0&&ge===!0;)ge=this.doSingleRepetition(te)}else throw this.raiseEarlyExitException(b,fn.REPETITION_MANDATORY,I.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[b,I],X,aD,b,E8e)}atLeastOneSepFirstInternal(b,I){const L=this.getKeyForAutomaticLookahead(y2,b);this.atLeastOneSepFirstInternalLogic(b,I,L)}atLeastOneSepFirstInternalLogic(b,I,L){const X=I.DEF,te=I.SEP;if(this.getLaFuncFromCache(L).call(this)===!0){X.call(this);const Se=()=>this.tokenMatcher(this.LA(1),te);for(;this.tokenMatcher(this.LA(1),te)===!0;)this.CONSUME(te),X.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[b,te,Se,X,IK],Se,y2,b,IK)}else throw this.raiseEarlyExitException(b,fn.REPETITION_MANDATORY_WITH_SEPARATOR,I.ERR_MSG)}manyInternal(b,I){const L=this.getKeyForAutomaticLookahead(iD,b);return this.manyInternalLogic(b,I,L)}manyInternalLogic(b,I,L){let X=this.getLaFuncFromCache(L),te;if(typeof I!="function"){te=I.DEF;const Se=I.GATE;if(Se!==void 0){const Ne=X;X=()=>Se.call(this)&&Ne.call(this)}}else te=I;let ge=!0;for(;X.call(this)===!0&&ge===!0;)ge=this.doSingleRepetition(te);this.attemptInRepetitionRecovery(this.manyInternal,[b,I],X,iD,b,x8e,ge)}manySepFirstInternal(b,I){const L=this.getKeyForAutomaticLookahead(sD,b);this.manySepFirstInternalLogic(b,I,L)}manySepFirstInternalLogic(b,I,L){const X=I.DEF,te=I.SEP;if(this.getLaFuncFromCache(L).call(this)===!0){X.call(this);const Se=()=>this.tokenMatcher(this.LA(1),te);for(;this.tokenMatcher(this.LA(1),te)===!0;)this.CONSUME(te),X.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[b,te,Se,X,EK],Se,sD,b,EK)}}repetitionSepSecondInternal(b,I,L,X,te){for(;L();)this.CONSUME(I),X.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[b,I,L,X,te],L,y2,b,te)}doSingleRepetition(b){const I=this.getLexerPosition();return b.call(this),this.getLexerPosition()>I}orInternal(b,I){const L=this.getKeyForAutomaticLookahead(kK,I),X=Oe(b)?b:b.DEF,ge=this.getLaFuncFromCache(L).call(this,X);if(ge!==void 0)return X[ge].ALT.call(this);this.raiseNoAltException(I,b.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const b=this.LA(1),I=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:b,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new VK(I,b))}}subruleInternal(b,I,L){let X;try{const te=L!==void 0?L.ARGS:void 0;return this.subruleIdx=I,X=b.apply(this,te),this.cstPostNonTerminal(X,L!==void 0&&L.LABEL!==void 0?L.LABEL:b.ruleName),X}catch(te){throw this.subruleInternalError(te,L,b.ruleName)}}subruleInternalError(b,I,L){throw G0(b)&&b.partialCstResult!==void 0&&(this.cstPostNonTerminal(b.partialCstResult,I!==void 0&&I.LABEL!==void 0?I.LABEL:L),delete b.partialCstResult),b}consumeInternal(b,I,L){let X;try{const te=this.LA(1);this.tokenMatcher(te,b)===!0?(this.consumeToken(),X=te):this.consumeInternalError(b,te,L)}catch(te){X=this.consumeInternalRecovery(b,I,te)}return this.cstPostTerminal(L!==void 0&&L.LABEL!==void 0?L.LABEL:b.name,X),X}consumeInternalError(b,I,L){let X;const te=this.LA(0);throw L!==void 0&&L.ERR_MSG?X=L.ERR_MSG:X=this.errorMessageProvider.buildMismatchTokenMessage({expected:b,actual:I,previous:te,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new rD(X,I,te))}consumeInternalRecovery(b,I,L){if(this.recoveryEnabled&&L.name==="MismatchedTokenException"&&!this.isBackTracking()){const X=this.getFollowsForInRuleRecovery(b,I);try{return this.tryInRuleRecovery(b,X)}catch(te){throw te.name===HK?L:te}}else throw L}saveRecogState(){const b=this.errors,I=Qn(this.RULE_STACK);return{errors:b,lexerState:this.exportLexerState(),RULE_STACK:I,CST_STACK:this.CST_STACK}}reloadRecogState(b){this.errors=b.errors,this.importLexerState(b.lexerState),this.RULE_STACK=b.RULE_STACK}ruleInvocationStateUpdate(b,I,L){this.RULE_OCCURRENCE_STACK.push(L),this.RULE_STACK.push(b),this.cstInvocationStateUpdate(I)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const b=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[b]}shortRuleNameToFullName(b){return this.shortRuleNameToFull[b]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),rc)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},yBe=class{initErrorHandler(b){this._errors=[],this.errorMessageProvider=Kt(b,"errorMessageProvider")?b.errorMessageProvider:oo.errorMessageProvider}SAVE_ERROR(b){if(G0(b))return b.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Qn(this.RULE_OCCURRENCE_STACK)},this._errors.push(b),b;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Qn(this._errors)}set errors(b){this._errors=b}raiseEarlyExitException(b,I,L){const X=this.getCurrRuleFullName(),te=this.getGAstProductions()[X],Se=_2(b,te,I,this.maxLookahead)[0],Ne=[];for(let ot=1;ot<=this.maxLookahead;ot++)Ne.push(this.LA(ot));const je=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:Se,actual:Ne,previous:this.LA(0),customUserDescription:L,ruleName:X});throw this.SAVE_ERROR(new GK(je,this.LA(1),this.LA(0)))}raiseNoAltException(b,I){const L=this.getCurrRuleFullName(),X=this.getGAstProductions()[L],te=p2(b,X,this.maxLookahead),ge=[];for(let je=1;je<=this.maxLookahead;je++)ge.push(this.LA(je));const Se=this.LA(0),Ne=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:te,actual:ge,previous:Se,customUserDescription:I,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new UK(Ne,this.LA(1),Se))}},bBe=class{initContentAssist(){}computeContentAssist(b,I){const L=this.gastProductionsCache[b];if(tu(L))throw Error(`Rule ->${b}<- does not exist in this grammar.`);return OK([L],I,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(b){const I=As(b.ruleStack),X=this.getGAstProductions()[I];return new S8e(X,b).startWalking()}},v2={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(v2);var JK=!0,YK=Math.pow(2,nc)-1,$K=XM({name:"RECORDING_PHASE_TOKEN",pattern:Ta.NA});U0([$K]);var ZK=f2($K,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(ZK);var vBe={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},ABe=class{initGastRecorder(b){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let b=0;b<10;b++){const I=b>0?b:"";this[`CONSUME${I}`]=function(L,X){return this.consumeInternalRecord(L,b,X)},this[`SUBRULE${I}`]=function(L,X){return this.subruleInternalRecord(L,b,X)},this[`OPTION${I}`]=function(L){return this.optionInternalRecord(L,b)},this[`OR${I}`]=function(L){return this.orInternalRecord(L,b)},this[`MANY${I}`]=function(L){this.manyInternalRecord(b,L)},this[`MANY_SEP${I}`]=function(L){this.manySepFirstInternalRecord(b,L)},this[`AT_LEAST_ONE${I}`]=function(L){this.atLeastOneInternalRecord(b,L)},this[`AT_LEAST_ONE_SEP${I}`]=function(L){this.atLeastOneSepFirstInternalRecord(b,L)}}this.consume=function(b,I,L){return this.consumeInternalRecord(I,b,L)},this.subrule=function(b,I,L){return this.subruleInternalRecord(I,b,L)},this.option=function(b,I){return this.optionInternalRecord(I,b)},this.or=function(b,I){return this.orInternalRecord(I,b)},this.many=function(b,I){this.manyInternalRecord(b,I)},this.atLeastOne=function(b,I){this.atLeastOneInternalRecord(b,I)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const b=this;for(let I=0;I<10;I++){const L=I>0?I:"";delete b[`CONSUME${L}`],delete b[`SUBRULE${L}`],delete b[`OPTION${L}`],delete b[`OR${L}`],delete b[`MANY${L}`],delete b[`MANY_SEP${L}`],delete b[`AT_LEAST_ONE${L}`],delete b[`AT_LEAST_ONE_SEP${L}`]}delete b.consume,delete b.subrule,delete b.option,delete b.or,delete b.many,delete b.atLeastOne,delete b.ACTION,delete b.BACKTRACK,delete b.LA})}ACTION_RECORD(b){}BACKTRACK_RECORD(b,I){return()=>!0}LA_RECORD(b){return T2}topLevelRuleRecord(b,I){try{const L=new Wl({definition:[],name:b});return L.name=b,this.recordingProdStack.push(L),I.call(this),this.recordingProdStack.pop(),L}catch(L){if(L.KNOWN_RECORDER_ERROR!==!0)try{L.message=L.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw L}throw L}}optionInternalRecord(b,I){return H0.call(this,qi,b,I)}atLeastOneInternalRecord(b,I){H0.call(this,ws,I,b)}atLeastOneSepFirstInternalRecord(b,I){H0.call(this,Ss,I,b,JK)}manyInternalRecord(b,I){H0.call(this,In,I,b)}manySepFirstInternalRecord(b,I){H0.call(this,Qa,I,b,JK)}orInternalRecord(b,I){return TBe.call(this,b,I)}subruleInternalRecord(b,I,L){if(A2(I),!b||Kt(b,"ruleName")===!1){const Se=new Error(`<SUBRULE${eX(I)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(b)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw Se.KNOWN_RECORDER_ERROR=!0,Se}const X=Hf(this.recordingProdStack),te=b.ruleName,ge=new ji({idx:I,nonTerminalName:te,label:L==null?void 0:L.LABEL,referencedRule:void 0});return X.definition.push(ge),this.outputCst?vBe:v2}consumeInternalRecord(b,I,L){if(A2(I),!hK(b)){const ge=new Error(`<CONSUME${eX(I)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(b)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw ge.KNOWN_RECORDER_ERROR=!0,ge}const X=Hf(this.recordingProdStack),te=new un({idx:I,terminalType:b,label:L==null?void 0:L.LABEL});return X.definition.push(te),ZK}};function H0(b,I,L,X=!1){A2(L);const te=Hf(this.recordingProdStack),ge=Re(I)?I:I.DEF,Se=new b({definition:[],idx:L});return X&&(Se.separator=I.SEP),Kt(I,"MAX_LOOKAHEAD")&&(Se.maxLookahead=I.MAX_LOOKAHEAD),this.recordingProdStack.push(Se),ge.call(this),te.definition.push(Se),this.recordingProdStack.pop(),v2}function TBe(b,I){A2(I);const L=Hf(this.recordingProdStack),X=Oe(b)===!1,te=X===!1?b:b.DEF,ge=new Wa({definition:[],idx:I,ignoreAmbiguities:X&&b.IGNORE_AMBIGUITIES===!0});Kt(b,"MAX_LOOKAHEAD")&&(ge.maxLookahead=b.MAX_LOOKAHEAD);const Se=VM(te,Ne=>Re(Ne.GATE));return ge.hasPredicates=Se,L.definition.push(ge),Yt(te,Ne=>{const je=new Bi({definition:[]});ge.definition.push(je),Kt(Ne,"IGNORE_AMBIGUITIES")?je.ignoreAmbiguities=Ne.IGNORE_AMBIGUITIES:Kt(Ne,"GATE")&&(je.ignoreAmbiguities=!0),this.recordingProdStack.push(je),Ne.ALT.call(this),this.recordingProdStack.pop()}),v2}function eX(b){return b===0?"":`${b}`}function A2(b){if(b<0||b>YK){const I=new Error(`Invalid DSL Method idx value: <${b}>
	Idx value must be a none negative value smaller than ${YK+1}`);throw I.KNOWN_RECORDER_ERROR=!0,I}}var wBe=class{initPerformanceTracer(b){if(Kt(b,"traceInitPerf")){const I=b.traceInitPerf,L=typeof I=="number";this.traceInitMaxIdent=L?I:1/0,this.traceInitPerf=L?I>0:I}else this.traceInitMaxIdent=0,this.traceInitPerf=oo.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(b,I){if(this.traceInitPerf===!0){this.traceInitIndent++;const L=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${L}--> <${b}>`);const{time:X,value:te}=XW(I),ge=X>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&ge(`${L}<-- <${b}> time: ${X}ms`),this.traceInitIndent--,te}else return I()}};function SBe(b,I){I.forEach(L=>{const X=L.prototype;Object.getOwnPropertyNames(X).forEach(te=>{if(te==="constructor")return;const ge=Object.getOwnPropertyDescriptor(X,te);ge&&(ge.get||ge.set)?Object.defineProperty(b.prototype,te,ge):b.prototype[te]=L.prototype[te]})})}var T2=f2(rc,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(T2);var oo=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:JM,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),w2=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),pi;(function(b){b[b.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",b[b.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",b[b.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",b[b.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",b[b.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",b[b.LEFT_RECURSION=5]="LEFT_RECURSION",b[b.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",b[b.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",b[b.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",b[b.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",b[b.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",b[b.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",b[b.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",b[b.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(pi||(pi={}));function xBe(b=void 0){return function(){return b}}var S2=class TIe{static performSelfAnalysis(I){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let I;this.selfAnalysisDone=!0;const L=this.className;this.TRACE_INIT("toFastProps",()=>{JW(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),Yt(this.definedRulesNames,te=>{const Se=this[te].originalGrammarAction;let Ne;this.TRACE_INIT(`${te} Rule`,()=>{Ne=this.topLevelRuleRecord(te,Se)}),this.gastProductionsCache[te]=Ne})}finally{this.disableRecording()}});let X=[];if(this.TRACE_INIT("Grammar Resolving",()=>{X=Y8e({rules:En(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(X)}),this.TRACE_INIT("Grammar Validations",()=>{if(Vr(X)&&this.skipValidations===!1){const te=$8e({rules:En(this.gastProductionsCache),tokenTypes:En(this.tokensMap),errMsgProvider:Xl,grammarName:L}),ge=L8e({lookaheadStrategy:this.lookaheadStrategy,rules:En(this.gastProductionsCache),tokenTypes:En(this.tokensMap),grammarName:L});this.definitionErrors=this.definitionErrors.concat(te,ge)}}),Vr(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const te=R4e(En(this.gastProductionsCache));this.resyncFollows=te}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var te,ge;(ge=(te=this.lookaheadStrategy).initialize)===null||ge===void 0||ge.call(te,{rules:En(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(En(this.gastProductionsCache))})),!TIe.DEFER_DEFINITION_ERRORS_HANDLING&&!Vr(this.definitionErrors))throw I=Lt(this.definitionErrors,te=>te.message),new Error(`Parser Definition Errors detected:
 ${I.join(`
-------------------------------
`)}`)})}constructor(I,L){this.definitionErrors=[],this.selfAnalysisDone=!1;const X=this;if(X.initErrorHandler(L),X.initLexerAdapter(),X.initLooksAhead(L),X.initRecognizerEngine(I,L),X.initRecoverable(L),X.initTreeBuilder(L),X.initContentAssist(),X.initGastRecorder(L),X.initPerformanceTracer(L),Kt(L,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=Kt(L,"skipValidations")?L.skipValidations:oo.skipValidations}};S2.DEFER_DEFINITION_ERRORS_HANDLING=!1,SBe(S2,[eBe,nBe,pBe,_Be,gBe,mBe,yBe,bBe,ABe,wBe]);var EBe=class extends S2{constructor(b,I=oo){const L=Qn(I);L.outputCst=!0,super(b,L)}},IBe=class extends S2{constructor(b,I=oo){const L=Qn(I);L.outputCst=!1,super(b,L)}};function OBe(b){const I=new RBe,L=En(b);return Lt(L,X=>I.visitRule(X))}var RBe=class extends ec{visitRule(b){const I=this.visitEach(b.definition),L=zW(I,te=>te.propertyName),X=Lt(L,(te,ge)=>{const Se=!VM(te,je=>!je.canBeNull);let Ne=te[0].type;return te.length>1&&(Ne=Lt(te,je=>je.type)),{name:ge,type:Ne,optional:Se}});return{name:b.name,properties:X}}visitAlternative(b){return this.visitEachAndOverrideWith(b.definition,{canBeNull:!0})}visitOption(b){return this.visitEachAndOverrideWith(b.definition,{canBeNull:!0})}visitRepetition(b){return this.visitEachAndOverrideWith(b.definition,{canBeNull:!0})}visitRepetitionMandatory(b){return this.visitEach(b.definition)}visitRepetitionMandatoryWithSeparator(b){return this.visitEach(b.definition).concat({propertyName:b.separator.name,canBeNull:!0,type:x2(b.separator)})}visitRepetitionWithSeparator(b){return this.visitEachAndOverrideWith(b.definition,{canBeNull:!0}).concat({propertyName:b.separator.name,canBeNull:!0,type:x2(b.separator)})}visitAlternation(b){return this.visitEachAndOverrideWith(b.definition,{canBeNull:!0})}visitTerminal(b){return[{propertyName:b.label||b.terminalType.name,canBeNull:!1,type:x2(b)}]}visitNonTerminal(b){return[{propertyName:b.label||b.nonTerminalName,canBeNull:!1,type:x2(b)}]}visitEachAndOverrideWith(b,I){return Lt(this.visitEach(b),L=>ea({},L,I))}visitEach(b){return Aa(Lt(b,I=>this.visit(I)))}};function x2(b){return b instanceof ji?{kind:"rule",name:b.referencedRule.name}:{kind:"token"}}function PBe(b,I){let L=[];return L=L.concat('import type { CstNode, ICstVisitor, IToken } from "chevrotain";'),L=L.concat(Aa(Lt(b,X=>NBe(X)))),I.includeVisitorInterface&&(L=L.concat(CBe(I.visitorInterfaceName,b))),L.join(`

`)+`
`}function NBe(b){const I=FBe(b),L=MBe(b);return[I,L]}function FBe(b){const I=rX(b.name),L=cD(b.name);return`export interface ${I} extends CstNode {
  name: "${b.name}";
  children: ${L};
}`}function MBe(b){return`export type ${cD(b.name)} = {
  ${Lt(b.properties,L=>DBe(L)).join(`
  `)}
};`}function DBe(b){const I=jBe(b.type);return`${b.name}${b.optional?"?":""}: ${I}[];`}function CBe(b,I){return`export interface ${b}<IN, OUT> extends ICstVisitor<IN, OUT> {
  ${Lt(I,L=>LBe(L)).join(`
  `)}
}`}function LBe(b){const I=cD(b.name);return`${b.name}(children: ${I}, param?: IN): OUT;`}function jBe(b){if(Oe(b)){const I=ZO(Lt(b,X=>tX(X)));return"("+ra(I,(X,te)=>X+" | "+te)+")"}else return tX(b)}function tX(b){return b.kind==="token"?"IToken":rX(b.name)}function rX(b){return uW(b)+"CstNode"}function cD(b){return uW(b)+"CstChildren"}var BBe={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function qBe(b,I){const L=Object.assign(Object.assign({},BBe),I),X=OBe(b);return PBe(X,L)}function UBe(b,{resourceBase:I=`https://unpkg.com/chevrotain@${l}/diagrams/`,css:L=`https://unpkg.com/chevrotain@${l}/diagrams/diagrams.css`}={}){const X=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,te=`
<link rel='stylesheet' href='${L}'>
`,ge=`
<script src='${I}vendor/railroad-diagrams.js'><\/script>
<script src='${I}src/diagrams_builder.js'><\/script>
<script src='${I}src/diagrams_behavior.js'><\/script>
<script src='${I}src/main.js'><\/script>
`,Se=`
<div id="diagrams" align="center"></div>    
`,Ne=`
<script>
    window.serializedGrammar = ${JSON.stringify(b,null,"  ")};
<\/script>
`;return X+te+ge+Se+Ne+`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`}function VBe(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}var GBe=class{constructor(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}};/*! Bundled license information:

		lodash-es/lodash.js:
		  (**
		   * @license
		   * Lodash (Custom Build) <https://lodash.com/>
		   * Build: `lodash modularize exports="es" -o ./`
		   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
		   * Released under MIT license <https://lodash.com/license>
		   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
		   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
		   *)
		*/}(mE,mE.exports)),mE.exports}var mee;function wIe(){if(mee)return du;mee=1,Object.defineProperty(du,"__esModule",{value:!0}),du.traqulaNewlineAlternative=du.traqulaIndentation=void 0,du.unCapitalize=e,du.createToken=r;const t=kF();function e(n){return n.charAt(0).toLowerCase()+n.slice(1)}function r(n){return(0,t.createToken)(n)}return du.traqulaIndentation="When you use this string, you expect traqula to handle indentation after every newline",du.traqulaNewlineAlternative="When you use this string, you expect that the core generator of Traqula does prints a given string instead of a ewline when NEW_LINE printing is disabled through traqulaIndentation",du}var gee;function Htt(){if(gee)return D_;gee=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.DynamicGenerator=void 0;const t=AIe(),e=wIe();class r{constructor(i){k(this,"rules");k(this,"factory",new t.AstCoreFactory);k(this,"__context");k(this,"origSource","");k(this,"handledInlineSource");k(this,"generatedUntil",0);k(this,"toEnsure",[]);k(this,"stringBuilder",[]);k(this,"subrule",(i,a,...s)=>{const o=this.rules[i.name];if(!o)throw new Error(`Rule ${i.name} not found`);const c=()=>o.gImpl({SUBRULE:this.subrule,PRINT:this.print,ENSURE:this.ensure,ENSURE_EITHER:this.ensureEither,NEW_LINE:this.newLine,HANDLE_LOC:this.handleLoc,CATCHUP:this.catchup,PRINT_WORD:this.printWord,PRINT_WORDS:this.printWords,PRINT_ON_EMPTY:this.printOnEmpty,PRINT_ON_OWN_LINE:this.printOnOwnLine})(a,this.getSafeContext(),...s);this.factory.isLocalized(a)?this.handleLoc(a,c):c()});k(this,"handleLoc",(i,a)=>{if(this.factory.isSourceLocationNoMaterialize(i.loc))return;if(this.factory.isSourceLocationStringReplace(i.loc)){this.catchup(i.loc.start),this.print(i.loc.newSource),this.generatedUntil=i.loc.end;return}if(this.factory.isSourceLocationNodeReplace(i.loc)&&(this.catchup(i.loc.start),this.generatedUntil=i.loc.end),this.factory.isSourceLocationSource(i.loc)&&this.catchup(i.loc.start),this.factory.isSourceLocationInlinedSource(i.loc)&&this.handledInlineSource!==i.loc){this.handledInlineSource=i.loc,this.catchup(i.loc.start);const o=this.origSource,c=this.generatedUntil;this.origSource=i.loc.newSource,this.generatedUntil=0,this.catchup(i.loc.startOnNew),this.handleLoc(i.loc,a),this.generatedUntil=i.loc.endOnNew,this.catchup(this.origSource.length),this.origSource=o,this.generatedUntil=Math.max(c,i.loc.end);return}const s=a();return this.factory.isSourceLocationSource(i.loc)&&this.catchup(i.loc.end),s});k(this,"catchup",i=>{const a=this.generatedUntil;a<i&&this.print(this.origSource.slice(a,i)),this.generatedUntil=Math.max(this.generatedUntil,i)});k(this,"print",(...i)=>{const a=i.join("");this.handeEnsured(a),this.stringBuilder.push(a)});k(this,"ensure",(...i)=>{const a=i.join("");this.doesEndWith(a)||this.toEnsure.push(s=>{!s.startsWith(a)&&!this.doesEndWith(a)&&this.stringBuilder.push(a)})});k(this,"ensureEither",(...i)=>{i.length===1?this.ensure(...i):i.length>1&&!i.some(a=>this.doesEndWith(a))&&this.toEnsure.push(a=>{!i.some(s=>a.startsWith(s))&&!i.some(s=>this.doesEndWith(s))&&this.stringBuilder.push(i[0])})});k(this,"newLine",i=>{const a=this.getSafeContext()[e.traqulaIndentation]??0,s=(i==null?void 0:i.force)??!1;if(a<0){const o=this.getSafeContext()[e.traqulaNewlineAlternative];o!==void 0&&(s||this.stringBuilder.at(-1)!==o)&&this.print(o);return}if(this.pruneEndingBlanks(),s)this.print(`
`," ".repeat(a));else{let o="";for(;!o.includes(`
`)&&this.stringBuilder.length>0;)o=this.stringBuilder.pop()+o;/\n[ \t]*$/u.test(o)?(o=o.replace(/\n[ \t]*$/u,`
${" ".repeat(a)}`),this.print(o)):this.print(o,`
`," ".repeat(a))}});k(this,"printWord",(...i)=>{this.ensureEither(" ",`
`),this.print(...i),this.ensureEither(" ",`
`)});k(this,"printWords",(...i)=>{for(const a of i)this.printWord(a)});k(this,"printOnEmpty",(...i)=>{this.newLine(),this.print(...i)});k(this,"printOnOwnLine",(...i)=>{this.newLine(),this.print(...i),this.newLine()});this.rules=i;for(const a of Object.values(i))this[a.name]=(s,o,c)=>(this.stringBuilder.length=0,this.origSource=o.origSource,this.generatedUntil=(o==null?void 0:o.offset)??0,this.setContext(o),this.subrule(a,s,c),this.catchup(this.origSource.length),this.stringBuilder.join(""))}setContext(i){this.__context=i}getSafeContext(){return this.__context}handeEnsured(i){for(const a of this.toEnsure)a(i);this.toEnsure.length=0}doesEndWith(i){const a=i.length;let s="";for(;s.length<a&&this.stringBuilder.length>0;)s=this.stringBuilder.pop()+s;return this.stringBuilder.push(s),s.endsWith(i)}pruneEndingBlanks(){let i="";for(;/^[ \t]*$/u.test(i)&&this.stringBuilder.length>0;)i=this.stringBuilder.pop()+i;this.print(i.trimEnd())}}return D_.DynamicGenerator=r,D_}var yee;function ktt(){if(yee)return M_;yee=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.GeneratorBuilder=void 0;const t=Htt();function e(n){const i={};for(const a of n)i[a.name]=a;return i}class r{constructor(i){k(this,"rules");this.rules=i}static create(i){return Array.isArray(i)?new r(e(i)):new r({...i.rules})}widenContext(){return this}typePatch(){return this}patchRule(i){const a=this;return a.rules[i.name]=i,a}addRuleRedundant(i){const a=this,s=a.rules;if(s[i.name]!==void 0&&s[i.name]!==i)throw new Error(`Rule ${i.name} already exists in the GeneratorBuilder`);return s[i.name]=i,a}addRule(i){return this.addRuleRedundant(i)}addMany(...i){return this.rules={...this.rules,...e(i)},this}deleteRule(i){return delete this.rules[i],this}getRule(i){return this.rules[i]}merge(i,a){const s={...i.rules},o=this.rules;for(const c of Object.values(o))if(s[c.name]===void 0)s[c.name]=c;else if(s[c.name]!==c){const l=a.find(d=>d.name===c.name);if(l)s[c.name]=l;else throw new Error(`Rule with name "${c.name}" already exists in the GeneratorBuilder, specify an override to resolve conflict`)}return this.rules=s,this}build(){return new t.DynamicGenerator(this.rules)}}return M_.GeneratorBuilder=r,M_}var YL={},bee;function ztt(){return bee||(bee=1,Object.defineProperty(YL,"__esModule",{value:!0})),YL}var FR={},vee;function SIe(){if(vee)return FR;vee=1,Object.defineProperty(FR,"__esModule",{value:!0}),FR.listToIndirectionMap=t;function t(e){const r={};for(const n of e)r[n.name]=n;return r}return FR}var L_={},j_={},Aee;function Qtt(){if(Aee)return j_;Aee=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.DynamicIndirect=void 0;class t{constructor(r){k(this,"rules");k(this,"__context");k(this,"subrule",(r,...n)=>{const i=this.rules[r.name];if(!i)throw new Error(`Rule ${r.name} not found`);return i.fun({SUBRULE:this.subrule})(this.getSafeContext(),...n)});this.rules=r;for(const n of Object.values(r))this[n.name]=(i,...a)=>(this.setContext(i),this.subrule(n,...a))}setContext(r){this.__context=r}getSafeContext(){return this.__context}}return j_.DynamicIndirect=t,j_}var Tee;function Wtt(){if(Tee)return L_;Tee=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.IndirBuilder=void 0;const t=Qtt(),e=SIe();let r=class fG{constructor(i){k(this,"rules");this.rules=i}static create(i){return Array.isArray(i)?new fG((0,e.listToIndirectionMap)(i)):new fG({...i.rules})}widenContext(){return this}typePatch(){return this}patchRule(i){const a=this;return a.rules[i.name]=i,a}addRuleRedundant(i){const a=this,s=a.rules;if(s[i.name]!==void 0&&s[i.name]!==i)throw new Error(`Function ${i.name} already exists in the builder`);return s[i.name]=i,a}addRule(i){return this.addRuleRedundant(i)}addMany(...i){return this.rules={...this.rules,...(0,e.listToIndirectionMap)(i)},this}deleteRule(i){return delete this.rules[i],this}getRule(i){return this.rules[i]}build(){return new t.DynamicIndirect(this.rules)}};return L_.IndirBuilder=r,L_}var B_={},wee;function EIe(){if(wee)return B_;wee=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.LexerBuilder=void 0;const t=kF();let e=class xIe{constructor(n){k(this,"tokens");this.tokens=n!=null&&n.tokens?[...n.tokens]:[]}static create(n){return new xIe(n)}merge(n,i=[]){const a=n.tokens.filter(s=>{if(i.find(u=>u.name===s.name))return!1;const c=this.tokens.find(u=>u.name===s.name);if(c){if(c!==s)throw new Error(`Token with name ${s.name} already exists. Implementation is different and no overwrite was provided.`);return!1}return!0});return this.tokens.push(...a),this}add(...n){return this.tokens.push(...n),this}addBefore(n,...i){const a=this.tokens.indexOf(n);if(a===-1)throw new Error("Token not found");return this.tokens.splice(a,0,...i),this}moveBeforeOrAfter(n,i,...a){const s=this.tokens.indexOf(i)+(n==="before"?0:1);if(s===-1)throw new Error("BeforeToken not found");for(const o of a){const c=this.tokens.indexOf(o);if(c===-1)throw new Error("Token not found");this.tokens.splice(c,1),this.tokens.splice(s,0,o)}return this}moveBefore(n,...i){return this.moveBeforeOrAfter("before",n,...i)}moveAfter(n,...i){return this.moveBeforeOrAfter("after",n,...i)}addAfter(n,...i){const a=this.tokens.indexOf(n);if(a===-1)throw new Error("Token not found");return this.tokens.splice(a+1,0,...i),this}delete(...n){for(const i of n){const a=this.tokens.indexOf(i);if(a===-1)throw new Error("Token not found");this.tokens.splice(a,1)}return this}build(n){return new t.Lexer(this.tokens,{positionTracking:"onlyStart",recoveryEnabled:!1,ensureOptimizations:!0,...n})}get tokenVocabulary(){return this.tokens}};return B_.LexerBuilder=e,B_}var $L={},See;function Ktt(){return See||(See=1,Object.defineProperty($L,"__esModule",{value:!0})),$L}var q_={},U_={},xee;function Xtt(){if(xee)return U_;xee=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.DynamicParser=void 0;const t=kF();class e extends t.EmbeddedActionsParser{constructor(i,a,s={}){super(a,{maxLookahead:1,skipValidations:!0,dynamicTokensEnabled:!1,...s});k(this,"context");this.context=void 0;const c={...this.constructSelfRef(),cache:new WeakMap};for(const u of Object.values(i))this[u.name]=this.RULE(u.name,u.impl(c));this.performSelfAnalysis()}setContext(i){this.context=i}constructSelfRef(){const i=a=>(s,...o)=>a(this[s.name],{ARGS:[this.context,...o]});return{CONSUME:(a,s)=>this.CONSUME(a,s),CONSUME1:(a,s)=>this.CONSUME1(a,s),CONSUME2:(a,s)=>this.CONSUME2(a,s),CONSUME3:(a,s)=>this.CONSUME3(a,s),CONSUME4:(a,s)=>this.CONSUME4(a,s),CONSUME5:(a,s)=>this.CONSUME5(a,s),CONSUME6:(a,s)=>this.CONSUME6(a,s),CONSUME7:(a,s)=>this.CONSUME7(a,s),CONSUME8:(a,s)=>this.CONSUME8(a,s),CONSUME9:(a,s)=>this.CONSUME9(a,s),OPTION:a=>this.OPTION(a),OPTION1:a=>this.OPTION1(a),OPTION2:a=>this.OPTION2(a),OPTION3:a=>this.OPTION3(a),OPTION4:a=>this.OPTION4(a),OPTION5:a=>this.OPTION5(a),OPTION6:a=>this.OPTION6(a),OPTION7:a=>this.OPTION7(a),OPTION8:a=>this.OPTION8(a),OPTION9:a=>this.OPTION9(a),OR:a=>this.OR(a),OR1:a=>this.OR1(a),OR2:a=>this.OR2(a),OR3:a=>this.OR3(a),OR4:a=>this.OR4(a),OR5:a=>this.OR5(a),OR6:a=>this.OR6(a),OR7:a=>this.OR7(a),OR8:a=>this.OR8(a),OR9:a=>this.OR9(a),MANY:a=>this.MANY(a),MANY1:a=>this.MANY1(a),MANY2:a=>this.MANY2(a),MANY3:a=>this.MANY3(a),MANY4:a=>this.MANY4(a),MANY5:a=>this.MANY5(a),MANY6:a=>this.MANY6(a),MANY7:a=>this.MANY7(a),MANY8:a=>this.MANY8(a),MANY9:a=>this.MANY9(a),MANY_SEP:a=>this.MANY_SEP(a),MANY_SEP1:a=>this.MANY_SEP1(a),MANY_SEP2:a=>this.MANY_SEP2(a),MANY_SEP3:a=>this.MANY_SEP3(a),MANY_SEP4:a=>this.MANY_SEP4(a),MANY_SEP5:a=>this.MANY_SEP5(a),MANY_SEP6:a=>this.MANY_SEP6(a),MANY_SEP7:a=>this.MANY_SEP7(a),MANY_SEP8:a=>this.MANY_SEP8(a),MANY_SEP9:a=>this.MANY_SEP9(a),AT_LEAST_ONE:a=>this.AT_LEAST_ONE(a),AT_LEAST_ONE1:a=>this.AT_LEAST_ONE1(a),AT_LEAST_ONE2:a=>this.AT_LEAST_ONE2(a),AT_LEAST_ONE3:a=>this.AT_LEAST_ONE3(a),AT_LEAST_ONE4:a=>this.AT_LEAST_ONE4(a),AT_LEAST_ONE5:a=>this.AT_LEAST_ONE5(a),AT_LEAST_ONE6:a=>this.AT_LEAST_ONE6(a),AT_LEAST_ONE7:a=>this.AT_LEAST_ONE7(a),AT_LEAST_ONE8:a=>this.AT_LEAST_ONE8(a),AT_LEAST_ONE9:a=>this.AT_LEAST_ONE9(a),AT_LEAST_ONE_SEP:a=>this.AT_LEAST_ONE_SEP(a),AT_LEAST_ONE_SEP1:a=>this.AT_LEAST_ONE_SEP1(a),AT_LEAST_ONE_SEP2:a=>this.AT_LEAST_ONE_SEP2(a),AT_LEAST_ONE_SEP3:a=>this.AT_LEAST_ONE_SEP3(a),AT_LEAST_ONE_SEP4:a=>this.AT_LEAST_ONE_SEP4(a),AT_LEAST_ONE_SEP5:a=>this.AT_LEAST_ONE_SEP5(a),AT_LEAST_ONE_SEP6:a=>this.AT_LEAST_ONE_SEP6(a),AT_LEAST_ONE_SEP7:a=>this.AT_LEAST_ONE_SEP7(a),AT_LEAST_ONE_SEP8:a=>this.AT_LEAST_ONE_SEP8(a),AT_LEAST_ONE_SEP9:a=>this.AT_LEAST_ONE_SEP9(a),ACTION:a=>this.ACTION(a),BACKTRACK:(a,...s)=>this.BACKTRACK(this[a.name],{ARGS:s}),SUBRULE:i((a,s)=>this.SUBRULE(a,s)),SUBRULE1:i((a,s)=>this.SUBRULE1(a,s)),SUBRULE2:i((a,s)=>this.SUBRULE2(a,s)),SUBRULE3:i((a,s)=>this.SUBRULE3(a,s)),SUBRULE4:i((a,s)=>this.SUBRULE4(a,s)),SUBRULE5:i((a,s)=>this.SUBRULE5(a,s)),SUBRULE6:i((a,s)=>this.SUBRULE6(a,s)),SUBRULE7:i((a,s)=>this.SUBRULE7(a,s)),SUBRULE8:i((a,s)=>this.SUBRULE8(a,s)),SUBRULE9:i((a,s)=>this.SUBRULE9(a,s))}}}return U_.DynamicParser=e,U_}var Eee;function Jtt(){if(Eee)return q_;Eee=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.ParserBuilder=void 0;const t=EIe(),e=Xtt();function r(i){const a={};for(const s of i)a[s.name]=s;return a}class n{constructor(a){k(this,"rules");this.rules=a}static create(a){return Array.isArray(a)?new n(r(a)):new n({...a.rules})}widenContext(){return this}typePatch(){return this}patchRule(a){const s=this;return s.rules[a.name]=a,s}addRuleRedundant(a){const s=this,o=s.rules;if(o[a.name]!==void 0&&o[a.name]!==a)throw new Error(`Rule ${a.name} already exists in the builder`);return o[a.name]=a,s}addRule(a){return this.addRuleRedundant(a)}addMany(...a){return this.rules={...this.rules,...r(a)},this}deleteRule(a){return delete this.rules[a],this}getRule(a){return this.rules[a]}merge(a,s){const o={...a.rules},c=this.rules;for(const u of Object.values(c))if(o[u.name]===void 0)o[u.name]=u;else if(o[u.name]!==u){const d=s.find(f=>f.name===u.name);if(d)o[u.name]=d;else throw new Error(`Rule with name "${u.name}" already exists in the builder, specify an override to resolve conflict`)}return this.rules=o,this}defaultErrorHandler(a,s){const o=s[0],c=["Parse error"],u=o.token.startLine;if(u!==void 0&&!Number.isNaN(u)){const l=a.split(`
`)[u-1];c.push(` on line ${u}
${l}`);const d=o.token.startColumn;d!==void 0&&c.push(`
${"-".repeat(d-1)}^`)}throw c.push(`
${o.message}`),new Error(c.join(""))}build({tokenVocabulary:a,parserConfig:s={},lexerConfig:o={},queryPreProcessor:c=l=>l,errorHandler:u}){const l=t.LexerBuilder.create().add(...a).build({positionTracking:"onlyOffset",recoveryEnabled:!1,ensureOptimizations:!0,safeMode:!1,skipValidations:!0,...o}),d=this.consume({tokenVocabulary:a,config:s}),f={};for(const h of Object.values(this.rules))f[h.name]=(p,_,...g)=>{const m=c(p),y=l.tokenize(m);d.input=y.tokens,d.setContext(_);const v=d[h.name](_,...g);return d.errors.length>0&&(u?u(d.errors):this.defaultErrorHandler(m,d.errors)),v};return f}consume({tokenVocabulary:a,config:s={}}){return new e.DynamicParser(this.rules,a,s)}}return q_.ParserBuilder=n,q_}var ZL={},Iee;function Ytt(){return Iee||(Iee=1,Object.defineProperty(ZL,"__esModule",{value:!0})),ZL}var ej={},Oee;function $tt(){return Oee||(Oee=1,Object.defineProperty(ej,"__esModule",{value:!0})),ej}var V_={},Ree;function OIe(){if(Ree)return V_;Ree=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.TransformerObject=void 0;let t=class IIe{constructor(r={}){k(this,"defaultContext");k(this,"maxStackSize",1e6);this.defaultContext=r}clone(r={}){return new IIe({...this.defaultContext,...r})}cloneObj(r){if(r===null||typeof r!="object")return r;const n=Object.getPrototypeOf(r);return n===Object.prototype||n===null?{...r}:Object.assign(Object.create(n),r)}transformObject(r,n,i=()=>({})){const a=this.defaultContext,s=a.copy??!0,o=a.continue??!0,c=a.ignoreKeys,u=a.shallowKeys,l=a.shortcut??!1;let d=!1;const f={res:r},h=[r],p=[f],_=["res"],g=[],m=[],y=[],v=[],A=[];function T(){for(;h.length===g.at(-1);){g.pop();const S=m.pop(),P=y.pop(),j=v.pop(),F=A.pop();j[F]=n(S,P)}}for(;h.length>0&&h.length<this.maxStackSize;){const S=h.pop(),P=p.pop(),j=_.pop();if(!d){if(Array.isArray(S)){const B=[...S];g.push(h.length),m.push(B),y.push(S),v.push(P),A.push(j);for(let G=S.length-1;G>=0;G--){const K=S[G];K!==null&&typeof K=="object"&&(h.push(K),p.push(B),_.push(G.toString()))}T();continue}const F=i(S),N=F.copy??s,R=F.continue??o,C=F.ignoreKeys??c,M=F.shallowKeys??u;d=F.shortcut??l;const U=N?this.cloneObj(S):S;if(g.push(h.length),m.push(U),y.push(S),v.push(P),A.push(j),R&&!d)for(const B in U){if(!Object.hasOwn(U,B))continue;const G=U[B],K=M&&(M==null?void 0:M.has(B));K&&(U[B]=this.cloneObj(G)),!(C&&C.has(B))&&!K&&G!==null&&typeof G=="object"&&(h.push(G),_.push(B),p.push(U))}}T()}if(h.length>=this.maxStackSize)throw new Error("Transform object stack overflowed");return T(),f.res}visitObject(r,n,i=()=>({})){const a=this.defaultContext,s=a.continue??!0,o=a.ignoreKeys,c=a.shortcut??!1;let u=!1;const l=[r],d=[],f=[];function h(){for(;l.length===d.at(-1);){d.pop();const p=f.pop();n(p)}}for(;l.length>0&&l.length<this.maxStackSize;){const p=l.pop();if(!u){if(Array.isArray(p)){for(let y=p.length-1;y>=0;y--)l.push(p[y]);h();continue}const _=i(p);u=_.shortcut??c;const g=_.continue??s,m=_.ignoreKeys??o;if(d.push(l.length),f.push(p),g&&!u)for(const y in p){if(!Object.hasOwn(p,y)||m&&m.has(y))continue;const v=p[y];v&&typeof v=="object"&&l.push(v)}}h()}if(l.length>=this.maxStackSize)throw new Error("Transform object stack overflowed");h()}};return V_.TransformerObject=t,V_}var G_={},Pee;function PIe(){if(Pee)return G_;Pee=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.TransformerTyped=void 0;const t=OIe();let e=class RIe extends t.TransformerObject{constructor(i={},a={}){super(i);k(this,"defaultNodePreVisitor");this.defaultNodePreVisitor=a}clone(i={},a={}){return new RIe({...this.defaultContext,...i},{...this.defaultNodePreVisitor,...a})}transformNode(i,a){const s=(u,l)=>{var h;let d;const f=u;return f.type&&(d=(h=a[f.type])==null?void 0:h.transform),d?d(f,l):u},o=this.defaultNodePreVisitor,c=u=>{var h;let l,d={};const f=u;return f.type&&(l=(h=a[f.type])==null?void 0:h.preVisitor,d=o[f.type]??d),l?{...d,...l(f)}:d};return this.transformObject(i,s,c)}visitNode(i,a){const s=u=>{var d;const l=u;if(l.type){const f=(d=a[l.type])==null?void 0:d.visitor;f&&f(l)}},o=this.defaultNodePreVisitor,c=u=>{var h;let l,d={};const f=u;return f.type&&(l=(h=a[f.type])==null?void 0:h.preVisitor,d=o[f.type]??d),l?{...d,...l(f)}:d};return this.visitObject(i,s,c)}};return G_.TransformerTyped=e,G_}var H_={},Nee;function Ztt(){if(Nee)return H_;Nee=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.TransformerSubTyped=void 0;const t=PIe();let e=class NIe extends t.TransformerTyped{constructor(n={},i={}){super(n,i)}clone(n={},i={}){return new NIe({...this.defaultContext,...n},{...this.defaultNodePreVisitor,...i})}transformNodeSpecific(n,i,a){const s=(c,u)=>{var f,h;let l;const d=c;if(d.type&&d.subType){const p=a[d.type];p&&(l=(f=p[d.subType])==null?void 0:f.transform),l||(l=(h=i[d.type])==null?void 0:h.transform)}return l?l(d,u):c},o=c=>{var d,f;let u;const l=c;if(l.type&&l.subType){const h=a[l.type];h&&(u=(d=h[l.subType])==null?void 0:d.preVisitor),u||(u=(f=i[l.type])==null?void 0:f.preVisitor)}return u?u(l):{}};return this.transformObject(n,s,o)}visitNodeSpecific(n,i,a){const s=c=>{var d,f;let u;const l=c;if(l.type&&l.subType){const h=a[l.type];h&&(u=(d=h[l.subType])==null?void 0:d.visitor),u||(u=(f=i[l.type])==null?void 0:f.visitor)}u&&u(l)},o=c=>{var d,f;let u;const l=c;if(l.type&&l.subType){const h=a[l.type];h&&(u=(d=h[l.subType])==null?void 0:d.preVisitor),u||(u=(f=i[l.type])==null?void 0:f.preVisitor)}return u?u(l):{}};this.visitObject(n,s,o)}};return H_.TransformerSubTyped=e,H_}var Fee;function _r(){return Fee||(Fee=1,function(t){var e=E&&E.__createBinding||(Object.create?function(s,o,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(o,c);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(s,u,l)}:function(s,o,c,u){u===void 0&&(u=c),s[u]=o[c]}),r=E&&E.__exportStar||function(s,o){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&e(o,s,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.TransformerSubTyped=t.TransformerTyped=t.TransformerObject=void 0,r(Gtt(),t),r(ktt(),t),r(ztt(),t),r(SIe(),t),r(Wtt(),t),r(EIe(),t),r(Ktt(),t),r(Jtt(),t),r(Ytt(),t),r(wIe(),t),r(AIe(),t),r($tt(),t);var n=OIe();Object.defineProperty(t,"TransformerObject",{enumerable:!0,get:function(){return n.TransformerObject}});var i=PIe();Object.defineProperty(t,"TransformerTyped",{enumerable:!0,get:function(){return i.TransformerTyped}});var a=Ztt();Object.defineProperty(t,"TransformerSubTyped",{enumerable:!0,get:function(){return a.TransformerSubTyped}})}(XL)),XL}var Mee;function FIe(){return Mee||(Mee=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isnumeric=t.isliteral=t.isblank=t.isuri=t.isiri=t.sameterm=t.strdt=t.strlang=t.if_=t.coalesce=t.sha512=t.sha384=t.sha256=t.sha1=t.md5=t.struuid=t.uuid=t.now=t.tz=t.timezone=t.seconds=t.minutes=t.hours=t.day=t.month=t.year=t.strafter=t.strbefore=t.strends=t.strstarts=t.contains=t.encode_for_uri=t.lcase=t.ucase=t.strlen=t.concat=t.round=t.floor=t.ceil=t.abs=t.rand=t.bnode=t.uri=t.iri=t.bound=t.datatype=t.langmatches=t.lang=t.str=t.BuiltInCalls=void 0,t.allBuiltInCalls=t.groupConcat=t.sample=t.avg=t.max=t.min=t.sum=t.count=t.notexists=t.exists=t.replace=t.substr=t.regex=void 0;const e=_r();var r;(function(i){i.Str="builtInStr",i.Lang="builtInLang",i.Langmatches="builtInLangmatches",i.Datatype="builtInDatatype",i.Bound="builtInBound",i.Iri="builtInIri",i.Uri="builtInUri",i.Bnode="builtInBnode",i.Rand="builtInRand",i.Abs="builtInAbs",i.Ceil="builtInCeil",i.Floor="builtInFloor",i.Round="builtInRound",i.Concat="builtInConcat",i.Strlen="builtInStrlen",i.Ucase="builtInUcase",i.Lcase="builtInLcase",i.Encode_for_uri="builtInEncode_for_uri",i.Contains="builtInContains",i.Strstarts="builtInStrstarts",i.Strends="builtInStrends",i.Strbefore="builtInStrbefore",i.Strafter="builtInStrafter",i.Year="builtInYear",i.Month="builtInMonth",i.Day="builtInDay",i.Hours="builtInHours",i.Minutes="builtInMinutes",i.Seconds="builtInSeconds",i.Timezone="builtInTimezone",i.Tz="builtInTz",i.Now="builtInNow",i.Uuid="builtInUuid",i.Struuid="builtInStruuid",i.Md5="builtInMd5",i.Sha1="builtInSha1",i.Sha256="builtInSha256",i.Sha384="builtInSha384",i.Sha512="builtInSha512",i.Coalesce="builtInCoalesce",i.If="builtInIf",i.Strlang="builtInStrlang",i.Strdt="builtInStrdt",i.Sameterm="builtInSameterm",i.Isiri="builtInIsiri",i.Isuri="builtInIsuri",i.Isblank="builtInIsblank",i.Isliteral="builtInIsliteral",i.Isnumeric="builtInIsnumeric",i.Regex="builtInRegex",i.Substr="builtInSubstr",i.Replace="builtInReplace",i.Exists="builtInExists",i.Notexists="builtInNotexists",i.Count="builtInCount",i.Sum="builtInSum",i.Min="builtInMin",i.Max="builtInMax",i.Avg="builtInAvg",i.Sample="builtInSample",i.Group_concat="builtInGroup_concat"})(r||(t.BuiltInCalls=r={}));function n(i){return i.charAt(0).toUpperCase()+i.slice(1)}t.str=(0,e.createToken)({name:n(r.Str),pattern:/str/i,label:"STR"}),t.lang=(0,e.createToken)({name:n(r.Lang),pattern:/lang/i,label:"LANG"}),t.langmatches=(0,e.createToken)({name:n(r.Langmatches),pattern:/langmatches/i,label:"LANGMATCHES"}),t.datatype=(0,e.createToken)({name:n(r.Datatype),pattern:/datatype/i,label:"DATATYPE"}),t.bound=(0,e.createToken)({name:n(r.Bound),pattern:/bound/i,label:"BOUND"}),t.iri=(0,e.createToken)({name:n(r.Iri),pattern:/iri/i,label:"IRI"}),t.uri=(0,e.createToken)({name:n(r.Uri),pattern:/uri/i,label:"URI"}),t.bnode=(0,e.createToken)({name:n(r.Bnode),pattern:/bnode/i,label:"BNODE"}),t.rand=(0,e.createToken)({name:n(r.Rand),pattern:/rand/i,label:"RAND"}),t.abs=(0,e.createToken)({name:n(r.Abs),pattern:/abs/i,label:"ABS"}),t.ceil=(0,e.createToken)({name:n(r.Ceil),pattern:/ceil/i,label:"CEIL"}),t.floor=(0,e.createToken)({name:n(r.Floor),pattern:/floor/i,label:"FLOOR"}),t.round=(0,e.createToken)({name:n(r.Round),pattern:/round/i,label:"ROUND"}),t.concat=(0,e.createToken)({name:n(r.Concat),pattern:/concat/i,label:"CONCAT"}),t.strlen=(0,e.createToken)({name:n(r.Strlen),pattern:/strlen/i,label:"STRLEN"}),t.ucase=(0,e.createToken)({name:n(r.Ucase),pattern:/ucase/i,label:"UCASE"}),t.lcase=(0,e.createToken)({name:n(r.Lcase),pattern:/lcase/i,label:"LCASE"}),t.encode_for_uri=(0,e.createToken)({name:n(r.Encode_for_uri),pattern:/encode_for_uri/i,label:"ENCODE_FOR_URI"}),t.contains=(0,e.createToken)({name:n(r.Contains),pattern:/contains/i,label:"CONTAINS"}),t.strstarts=(0,e.createToken)({name:n(r.Strstarts),pattern:/strstarts/i,label:"STRSTARTS"}),t.strends=(0,e.createToken)({name:n(r.Strends),pattern:/strends/i,label:"STRENDS"}),t.strbefore=(0,e.createToken)({name:n(r.Strbefore),pattern:/strbefore/i,label:"STRBEFORE"}),t.strafter=(0,e.createToken)({name:n(r.Strafter),pattern:/strafter/i,label:"STRAFTER"}),t.year=(0,e.createToken)({name:n(r.Year),pattern:/year/i,label:"YEAR"}),t.month=(0,e.createToken)({name:n(r.Month),pattern:/month/i,label:"MONTH"}),t.day=(0,e.createToken)({name:n(r.Day),pattern:/day/i,label:"DAY"}),t.hours=(0,e.createToken)({name:n(r.Hours),pattern:/hours/i,label:"HOURS"}),t.minutes=(0,e.createToken)({name:n(r.Minutes),pattern:/minutes/i,label:"MINUTES"}),t.seconds=(0,e.createToken)({name:n(r.Seconds),pattern:/seconds/i,label:"SECONDS"}),t.timezone=(0,e.createToken)({name:n(r.Timezone),pattern:/timezone/i,label:"TIMEZONE"}),t.tz=(0,e.createToken)({name:n(r.Tz),pattern:/tz/i,label:"TZ"}),t.now=(0,e.createToken)({name:n(r.Now),pattern:/now/i,label:"NOW"}),t.uuid=(0,e.createToken)({name:n(r.Uuid),pattern:/uuid/i,label:"UUID"}),t.struuid=(0,e.createToken)({name:n(r.Struuid),pattern:/struuid/i,label:"STRUUID"}),t.md5=(0,e.createToken)({name:n(r.Md5),pattern:/md5/i,label:"MD5"}),t.sha1=(0,e.createToken)({name:n(r.Sha1),pattern:/sha1/i,label:"SHA1"}),t.sha256=(0,e.createToken)({name:n(r.Sha256),pattern:/sha256/i,label:"SHA256"}),t.sha384=(0,e.createToken)({name:n(r.Sha384),pattern:/sha384/i,label:"SHA384"}),t.sha512=(0,e.createToken)({name:n(r.Sha512),pattern:/sha512/i,label:"SHA512"}),t.coalesce=(0,e.createToken)({name:n(r.Coalesce),pattern:/coalesce/i,label:"COALESCE"}),t.if_=(0,e.createToken)({name:n(r.If),pattern:/if/i,label:"IF"}),t.strlang=(0,e.createToken)({name:n(r.Strlang),pattern:/strlang/i,label:"STRLANG"}),t.strdt=(0,e.createToken)({name:n(r.Strdt),pattern:/strdt/i,label:"STRDT"}),t.sameterm=(0,e.createToken)({name:n(r.Sameterm),pattern:/sameterm/i,label:"SAMETERM"}),t.isiri=(0,e.createToken)({name:n(r.Isiri),pattern:/isiri/i,label:"ISIRI"}),t.isuri=(0,e.createToken)({name:n(r.Isuri),pattern:/isuri/i,label:"ISURI"}),t.isblank=(0,e.createToken)({name:n(r.Isblank),pattern:/isblank/i,label:"ISBLANK"}),t.isliteral=(0,e.createToken)({name:n(r.Isliteral),pattern:/isliteral/i,label:"ISLITERAL"}),t.isnumeric=(0,e.createToken)({name:n(r.Isnumeric),pattern:/isnumeric/i,label:"ISNUMERIC"}),t.regex=(0,e.createToken)({name:n(r.Regex),pattern:/regex/i,label:"REGEX"}),t.substr=(0,e.createToken)({name:n(r.Substr),pattern:/substr/i,label:"SUBSTR"}),t.replace=(0,e.createToken)({name:n(r.Replace),pattern:/replace/i,label:"REPLACE"}),t.exists=(0,e.createToken)({name:n(r.Exists),pattern:/exists/i,label:"EXISTS"}),t.notexists=(0,e.createToken)({name:n(r.Notexists),pattern:/not exists/i,label:"NOT EXISTS"}),t.count=(0,e.createToken)({name:n(r.Count),pattern:/count/i,label:"COUNT"}),t.sum=(0,e.createToken)({name:n(r.Sum),pattern:/sum/i,label:"SUM"}),t.min=(0,e.createToken)({name:n(r.Min),pattern:/min/i,label:"MIN"}),t.max=(0,e.createToken)({name:n(r.Max),pattern:/max/i,label:"MAX"}),t.avg=(0,e.createToken)({name:n(r.Avg),pattern:/avg/i,label:"AVG"}),t.sample=(0,e.createToken)({name:n(r.Sample),pattern:/sample/i,label:"SAMPLE"}),t.groupConcat=(0,e.createToken)({name:n(r.Group_concat),pattern:/group_concat/i,label:"GROUP_CONCAT"}),t.allBuiltInCalls=e.LexerBuilder.create().add(t.langmatches,t.datatype,t.lang,t.bound,t.iri,t.uri,t.bnode,t.rand,t.abs,t.ceil,t.floor,t.round,t.concat,t.strlen,t.ucase,t.lcase,t.encode_for_uri,t.contains,t.strstarts,t.strends,t.strbefore,t.strafter,t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.timezone,t.tz,t.now,t.uuid,t.struuid,t.md5,t.sha1,t.sha256,t.sha384,t.sha512,t.coalesce,t.if_,t.strlang,t.strdt,t.sameterm,t.isiri,t.isuri,t.isblank,t.isliteral,t.isnumeric,t.regex,t.substr,t.replace,t.exists,t.notexists,t.count,t.sum,t.min,t.max,t.avg,t.sample,t.groupConcat,t.str)}(KL)),KL}var tj={},Dee;function MIe(){return Dee||(Dee=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allGraphTokens=t.graphAll=t.graph=t.default_=t.named=void 0;const e=_r();t.named=(0,e.createToken)({name:"NamedGraph",pattern:/named/i,label:"NAMED"}),t.default_=(0,e.createToken)({name:"DefaultGraph",pattern:/default/i,label:"DEFAULT"}),t.graph=(0,e.createToken)({name:"Graph",pattern:/graph/i,label:"GRAPH"}),t.graphAll=(0,e.createToken)({name:"GraphAll",pattern:/all/i,label:"ALL"}),t.allGraphTokens=e.LexerBuilder.create().add(t.named,t.default_,t.graph,t.graphAll)}(tj)),tj}var rj={},nj={},Cee;function DIe(){return Cee||(Cee=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.atLeastOneBlankPattern=t.commentPattern=t.anonPattern=t.nilPattern=t.wsPattern=t.stringLiteralLong2Pattern=t.stringLiteralLong1Pattern=t.stringLiteral2Pattern=t.stringLiteral1Pattern=t.echarPattern=t.doubleNegativePattern=t.decimalNegativePattern=t.integerNegativePattern=t.doublePositivePattern=t.decimalPositivePattern=t.integerPositivePattern=t.doublePattern=t.exponentPattern=t.decimalPattern=t.integerPattern=t.langTagPattern=t.var2Pattern=t.var1Pattern=t.blankNodeLabelPattern=t.pNameLnPattern=t.pnLocalPattern=t.plxPattern=t.pnLocalEscPattern=t.percentPattern=t.pNameNsPattern=t.pnPrefixPattern=t.pnCharsPattern=t.iriRefPattern=t.varNamePattern=t.pnCharsUPattern=t.pnCharsBasePattern=void 0,t.pnCharsBasePattern=/[A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF]/,t.pnCharsUPattern=new RegExp(`${t.pnCharsBasePattern.source}|_`),t.varNamePattern=new RegExp(`((${t.pnCharsUPattern.source})|[0-9])((${t.pnCharsUPattern.source})|[0-9]|[--])*`),t.iriRefPattern=/<([^\u0000-\u0020"<>\\^`{|}])*>/,t.pnCharsPattern=new RegExp(`(${t.pnCharsUPattern.source})|[\\-0-9--]`),t.pnPrefixPattern=new RegExp(`(${t.pnCharsBasePattern.source})(((${t.pnCharsPattern.source})|\\.)*(${t.pnCharsPattern.source}))?`),t.pNameNsPattern=new RegExp(`(${t.pnPrefixPattern.source})?:`),t.percentPattern=/%[\dA-Fa-f]{2}/,t.pnLocalEscPattern=/\\[!#$%&'()*+,./;=?@\\_~-]/,t.plxPattern=new RegExp(`(${t.percentPattern.source})|(${t.pnLocalEscPattern.source})`),t.pnLocalPattern=new RegExp(`((${t.pnCharsUPattern.source})|:|[0-9]|(${t.plxPattern.source}))(((${t.pnCharsPattern.source})|\\.|:|(${t.plxPattern.source}))*((${t.pnCharsPattern.source})|:|(${t.plxPattern.source})))?`),t.pNameLnPattern=new RegExp(`(${t.pNameNsPattern.source})(${t.pnLocalPattern.source})`),t.blankNodeLabelPattern=new RegExp(`_:((${t.pnCharsUPattern.source})|[0-9])(((${t.pnCharsPattern.source})|\\.)*(${t.pnCharsPattern.source}))?`),t.var1Pattern=new RegExp(`\\?(${t.varNamePattern.source})`),t.var2Pattern=new RegExp(`\\$(${t.varNamePattern.source})`),t.langTagPattern=/@[A-Za-z]+(-[\dA-Za-z]+)*/,t.integerPattern=/\d+/,t.decimalPattern=/\d+\.\d+/,t.exponentPattern=/[Ee][+-]?\d+/,t.doublePattern=new RegExp(`([0-9]+\\.[0-9]*(${t.exponentPattern.source}))|(\\.[0-9]+(${t.exponentPattern.source}))|([0-9]+(${t.exponentPattern.source}))`),t.integerPositivePattern=new RegExp(`\\+${t.integerPattern.source}`),t.decimalPositivePattern=new RegExp(`\\+${t.decimalPattern.source}`),t.doublePositivePattern=new RegExp(`\\+${t.doublePattern.source}`),t.integerNegativePattern=new RegExp(`-${t.integerPattern.source}`),t.decimalNegativePattern=new RegExp(`-${t.decimalPattern.source}`),t.doubleNegativePattern=new RegExp(`-${t.doublePattern.source}`),t.echarPattern=/\\[\\"'bfnrt]/u,t.stringLiteral1Pattern=new RegExp(`'(([^\\u0027\\u005C\\u000A\r])|(${t.echarPattern.source}))*'`),t.stringLiteral2Pattern=new RegExp(`"(([^\\u0022\\u005C\\u000A\\u000D])|(${t.echarPattern.source}))*"`),t.stringLiteralLong1Pattern=new RegExp(`'''(('|(''))?([^'\\\\]|(${t.echarPattern.source})))*'''`),t.stringLiteralLong2Pattern=new RegExp(`"""(("|(""))?([^"\\\\]|(${t.echarPattern.source})))*"""`),t.wsPattern=/[\u0009\u000A\u000D ]/,t.nilPattern=new RegExp(`\\((${t.wsPattern.source})*\\)`),t.anonPattern=new RegExp(`\\[(${t.wsPattern.source})*\\]`),t.commentPattern=/#[^\n]*\n/,t.atLeastOneBlankPattern=new RegExp(`((${t.wsPattern.source}+)|(${t.commentPattern.source}))+`)}(nj)),nj}var ij={},Lee;function CIe(){return Lee||(Lee=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allSymbols=t.hathat=t.greaterThanEqual=t.lessThanEqual=t.greaterThan=t.lessThan=t.notEqual=t.equal=t.logicOr=t.logicAnd=t.exclamation=t.opMinus=t.opPlus=t.star=t.question=t.hat=t.slash=t.pipe=t.RSquare=t.LSquare=t.RParen=t.LParen=t.semi=t.comma=t.dot=t.RCurly=t.LCurly=void 0;const e=_r();t.LCurly=(0,e.createToken)({name:"LCurly",pattern:"{",label:"{"}),t.RCurly=(0,e.createToken)({name:"RCurly",pattern:"}",label:"}"}),t.dot=(0,e.createToken)({name:"Dot",pattern:".",label:"."}),t.comma=(0,e.createToken)({name:"Comma",pattern:",",label:","}),t.semi=(0,e.createToken)({name:"Semi",pattern:";",label:";"}),t.LParen=(0,e.createToken)({name:"LParen",pattern:"(",label:"("}),t.RParen=(0,e.createToken)({name:"RParen",pattern:")",label:")"}),t.LSquare=(0,e.createToken)({name:"LSquare",pattern:"[",label:"["}),t.RSquare=(0,e.createToken)({name:"RSquare",pattern:"]",label:"]"}),t.pipe=(0,e.createToken)({name:"Pipe",pattern:"|",label:"|"}),t.slash=(0,e.createToken)({name:"Slash",pattern:"/",label:"/"}),t.hat=(0,e.createToken)({name:"Hat",pattern:"^",label:"^"}),t.question=(0,e.createToken)({name:"Question",pattern:"?",label:"?"}),t.star=(0,e.createToken)({name:"Star",pattern:"*",label:"*"}),t.opPlus=(0,e.createToken)({name:"OpPlus",pattern:"+",label:"+"}),t.opMinus=(0,e.createToken)({name:"OpMinus",pattern:"-",label:"-"}),t.exclamation=(0,e.createToken)({name:"Exclamation",pattern:"!",label:"!"}),t.logicAnd=(0,e.createToken)({name:"LogicAnd",pattern:"&&",label:"&&"}),t.logicOr=(0,e.createToken)({name:"LogicOr",pattern:"||",label:"||"}),t.equal=(0,e.createToken)({name:"Equal",pattern:"=",label:"="}),t.notEqual=(0,e.createToken)({name:"NotEqual",pattern:"!=",label:"!="}),t.lessThan=(0,e.createToken)({name:"LessThan",pattern:"<",label:"<"}),t.greaterThan=(0,e.createToken)({name:"GreaterThan",pattern:">",label:">"}),t.lessThanEqual=(0,e.createToken)({name:"LessThanEqual",pattern:"<=",label:"<="}),t.greaterThanEqual=(0,e.createToken)({name:"GreaterThanEqual",pattern:">=",label:">="}),t.hathat=(0,e.createToken)({name:"Hathat",pattern:"^^",label:"^^"}),t.allSymbols=e.LexerBuilder.create().add(t.logicAnd,t.logicOr,t.notEqual,t.lessThanEqual,t.greaterThanEqual,t.LCurly,t.RCurly,t.dot,t.comma,t.semi,t.LParen,t.RParen,t.LSquare,t.RSquare,t.pipe,t.slash,t.hathat,t.hat,t.question,t.star,t.opPlus,t.opMinus,t.exclamation,t.equal,t.lessThan,t.greaterThan)}(ij)),ij}var aj={},jee;function LIe(){return jee||(jee=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allTerminals=t.anon=t.nil=t.comment=t.ws=t.stringLiteralLong2=t.stringLiteralLong1=t.stringLiteral2=t.stringLiteral1=t.doubleNegative=t.decimalNegative=t.integerNegative=t.doublePositive=t.decimalPositive=t.integerPositive=t.double=t.decimal=t.integer=t.langTag=t.var2=t.var1=t.blankNodeLabel=t.pNameNs=t.pNameLn=t.iriRef=void 0;const e=kF(),r=_r(),n=DIe();t.iriRef=(0,r.createToken)({name:"IriRef",pattern:n.iriRefPattern}),t.pNameLn=(0,r.createToken)({name:"PNameLn",pattern:n.pNameLnPattern}),t.pNameNs=(0,r.createToken)({name:"PNameNs",pattern:n.pNameNsPattern,longer_alt:[t.pNameLn]}),t.blankNodeLabel=(0,r.createToken)({name:"BlankNodeLabel",pattern:n.blankNodeLabelPattern}),t.var1=(0,r.createToken)({name:"Var1",pattern:n.var1Pattern}),t.var2=(0,r.createToken)({name:"Var2",pattern:n.var2Pattern}),t.langTag=(0,r.createToken)({name:"LangTag",pattern:n.langTagPattern}),t.integer=(0,r.createToken)({name:"Integer",pattern:n.integerPattern}),t.decimal=(0,r.createToken)({name:"Decimal",pattern:n.decimalPattern}),t.double=(0,r.createToken)({name:"Double",pattern:n.doublePattern}),t.integerPositive=(0,r.createToken)({name:"IntegerPositive",pattern:n.integerPositivePattern}),t.decimalPositive=(0,r.createToken)({name:"DecimalPositive",pattern:n.decimalPositivePattern}),t.doublePositive=(0,r.createToken)({name:"DoublePositive",pattern:n.doublePositivePattern}),t.integerNegative=(0,r.createToken)({name:"IntegerNegative",pattern:n.integerNegativePattern}),t.decimalNegative=(0,r.createToken)({name:"DecimalNegative",pattern:n.decimalNegativePattern}),t.doubleNegative=(0,r.createToken)({name:"DoubleNegative",pattern:n.doubleNegativePattern}),t.stringLiteral1=(0,r.createToken)({name:"StringLiteral1",pattern:n.stringLiteral1Pattern}),t.stringLiteral2=(0,r.createToken)({name:"StringLiteral2",pattern:n.stringLiteral2Pattern}),t.stringLiteralLong1=(0,r.createToken)({name:"StringLiteralLong1",pattern:n.stringLiteralLong1Pattern}),t.stringLiteralLong2=(0,r.createToken)({name:"StringLiteralLong2",pattern:n.stringLiteralLong2Pattern}),t.ws=(0,r.createToken)({name:"Ws",pattern:n.wsPattern,group:e.Lexer.SKIPPED}),t.comment=(0,r.createToken)({name:"Comment",pattern:n.commentPattern,group:e.Lexer.SKIPPED}),t.nil=(0,r.createToken)({name:"Nil",pattern:n.nilPattern}),t.anon=(0,r.createToken)({name:"Anon",pattern:n.anonPattern}),t.allTerminals=r.LexerBuilder.create().add(t.iriRef,t.pNameNs,t.pNameLn,t.blankNodeLabel,t.var1,t.var2,t.langTag,t.double,t.decimal,t.integer,t.doublePositive,t.decimalPositive,t.integerPositive,t.doubleNegative,t.decimalNegative,t.integerNegative,t.stringLiteralLong1,t.stringLiteralLong2,t.stringLiteral1,t.stringLiteral2,t.ws,t.comment,t.nil,t.anon)}(aj)),aj}var Bee;function ert(){return Bee||(Bee=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.separator=t.notIn=t.in_=t.false_=t.true_=t.a=t.filter=t.union=t.minus=t.undef=t.bind=t.service=t.optional=t.usingClause=t.insertClause=t.insertDataClause=t.deleteClause=t.deleteWhereClause=t.deleteDataClause=t.modifyWith=t.copy=t.move=t.to=t.add=t.create=t.drop=t.clear=t.loadInto=t.silent=t.load=t.values=t.offset=t.limit=t.orderDesc=t.orderAsc=t.order=t.having=t.by=t.groupByGroup=t.where=t.from=t.ask=t.describe=t.construct=t.as=t.reduced=t.distinct=t.select=t.prefixDecl=t.baseDecl=void 0,t.sparql11LexerBuilder=t.allBaseTokens=void 0;const e=_r(),r=FIe(),n=MIe(),i=DIe(),a=CIe(),s=LIe();t.baseDecl=(0,e.createToken)({name:"BaseDecl",pattern:/base/i,label:"BASE"}),t.prefixDecl=(0,e.createToken)({name:"PrefixDecl",pattern:/prefix/i,label:"PREFIX"}),t.select=(0,e.createToken)({name:"Select",pattern:/select/i,label:"SELECT"}),t.distinct=(0,e.createToken)({name:"Distinct",pattern:/distinct/i,label:"DISTINCT"}),t.reduced=(0,e.createToken)({name:"Reduced",pattern:/reduced/i,label:"REDUCED"}),t.as=(0,e.createToken)({name:"As",pattern:/as/i,label:"AS"}),t.construct=(0,e.createToken)({name:"Construct",pattern:/construct/i,label:"CONSTRUCT"}),t.describe=(0,e.createToken)({name:"Describe",pattern:/describe/i,label:"DESCRIBE"}),t.ask=(0,e.createToken)({name:"Ask",pattern:/ask/i,label:"ASK"}),t.from=(0,e.createToken)({name:"From",pattern:/from/i,label:"FROM"}),t.where=(0,e.createToken)({name:"Where",pattern:/where/i,label:"WHERE"}),t.groupByGroup=(0,e.createToken)({name:"GroupByGroup",pattern:/group/i,label:"_GROUP_ BY"}),t.by=(0,e.createToken)({name:"By",pattern:/by/i,label:"BY"}),t.having=(0,e.createToken)({name:"Having",pattern:/having/i,label:"HAVING"}),t.order=(0,e.createToken)({name:"Order",pattern:/order/i,label:"_ORDER_ BY"}),t.orderAsc=(0,e.createToken)({name:"OrderAsc",pattern:/asc/i,label:"ASC"}),t.orderDesc=(0,e.createToken)({name:"OrderDesc",pattern:/desc/i,label:"DESC"}),t.limit=(0,e.createToken)({name:"Limit",pattern:/limit/i,label:"LIMIT"}),t.offset=(0,e.createToken)({name:"Offset",pattern:/offset/i,label:"OFFSET"}),t.values=(0,e.createToken)({name:"Values",pattern:/values/i,label:"VALUES"}),t.load=(0,e.createToken)({name:"Load",pattern:/load/i,label:"LOAD"}),t.silent=(0,e.createToken)({name:"Silent",pattern:/silent/i,label:"SILENT"}),t.loadInto=(0,e.createToken)({name:"LoadInto",pattern:/into/i,label:"INTO"}),t.clear=(0,e.createToken)({name:"Clear",pattern:/clear/i,label:"CLEAR"}),t.drop=(0,e.createToken)({name:"Drop",pattern:/drop/i,label:"DROP"}),t.create=(0,e.createToken)({name:"Create",pattern:/create/i,label:"CREATE"}),t.add=(0,e.createToken)({name:"Add",pattern:/add/i,label:"ADD"}),t.to=(0,e.createToken)({name:"To",pattern:/to/i,label:"TO"}),t.move=(0,e.createToken)({name:"Move",pattern:/move/i,label:"MOVE"}),t.copy=(0,e.createToken)({name:"Copy",pattern:/copy/i,label:"COPY"}),t.modifyWith=(0,e.createToken)({name:"ModifyWith",pattern:/with/i,label:"WITH"}),t.deleteDataClause=(0,e.createToken)({name:"DeleteDataClause",pattern:new RegExp(`delete(${i.atLeastOneBlankPattern.source})data`,"i"),label:"DELETE DATA"}),t.deleteWhereClause=(0,e.createToken)({name:"DeleteWhereClause",pattern:new RegExp(`delete(${i.atLeastOneBlankPattern.source})where`,"i"),label:"DELETE WHERE"}),t.deleteClause=(0,e.createToken)({name:"DeleteClause",pattern:/delete/i,label:"DELETE"}),t.insertDataClause=(0,e.createToken)({name:"InsertDataClause",pattern:new RegExp(`insert(${i.atLeastOneBlankPattern.source})data`,"i"),label:"INSERT DATA"}),t.insertClause=(0,e.createToken)({name:"InsertClause",pattern:/insert/i,label:"insert"}),t.usingClause=(0,e.createToken)({name:"UsingClause",pattern:/using/i,label:"USING"}),t.optional=(0,e.createToken)({name:"Optional",pattern:/optional/i,label:"OPTIONAL"}),t.service=(0,e.createToken)({name:"Service",pattern:/service/i,label:"SERVICE"}),t.bind=(0,e.createToken)({name:"Bind",pattern:/bind/i,label:"BIND"}),t.undef=(0,e.createToken)({name:"Undef",pattern:/undef/i,label:"UNDEF"}),t.minus=(0,e.createToken)({name:"Minus",pattern:/minus/i,label:"MINUS"}),t.union=(0,e.createToken)({name:"Union",pattern:/union/i,label:"UNION"}),t.filter=(0,e.createToken)({name:"Filter",pattern:/filter/i,label:"FILTER"}),t.a=(0,e.createToken)({name:"a",pattern:"a",label:"type declaration 'a'"}),t.true_=(0,e.createToken)({name:"True",pattern:/true/i,label:"true"}),t.false_=(0,e.createToken)({name:"False",pattern:/false/i,label:"false"}),t.in_=(0,e.createToken)({name:"In",pattern:/in/i,label:"IN"}),t.notIn=(0,e.createToken)({name:"NotIn",pattern:/not[\u0020\u0009\u000D\u000A]+in/i,label:"NOT IN"}),t.separator=(0,e.createToken)({name:"Separator",pattern:/separator/i,label:"SEPARATOR"}),t.allBaseTokens=e.LexerBuilder.create().add(t.baseDecl,t.prefixDecl,t.select,t.distinct,t.reduced,t.construct,t.describe,t.ask,t.from,t.where,t.having,t.groupByGroup,t.by,t.order,t.orderAsc,t.orderDesc,t.limit,t.offset,t.values,t.load,t.silent,t.loadInto,t.clear,t.drop,t.create,t.add,t.to,t.move,t.copy,t.modifyWith,t.deleteWhereClause,t.deleteDataClause,t.deleteClause,t.insertDataClause,t.insertClause,t.usingClause,t.optional,t.service,t.bind,t.undef,t.minus,t.union,t.filter,t.as,t.a,t.true_,t.false_,t.in_,t.notIn,t.separator),t.sparql11LexerBuilder=e.LexerBuilder.create(s.allTerminals).merge(t.allBaseTokens).merge(r.allBuiltInCalls).merge(n.allGraphTokens).merge(a.allSymbols).moveAfter(r.avg,t.a).moveBefore(t.a,n.graphAll).moveAfter(r.groupConcat,t.groupByGroup)}(rj)),rj}var qee;function ya(){return qee||(qee=1,function(t){var e=E&&E.__createBinding||(Object.create?function(a,s,o,c){c===void 0&&(c=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,c,u)}:function(a,s,o,c){c===void 0&&(c=o),a[c]=s[o]}),r=E&&E.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),n=E&&E.__importStar||function(){var a=function(s){return a=Object.getOwnPropertyNames||function(o){var c=[];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(c[c.length]=u);return c},a(s)};return function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var c=a(s),u=0;u<c.length;u++)c[u]!=="default"&&e(o,s,c[u]);return r(o,s),o}}(),i=E&&E.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.terminals=t.symbols=t.graph=t.builtIn=void 0,t.builtIn=n(FIe()),t.graph=n(MIe()),i(ert(),t),t.symbols=n(CIe()),t.terminals=n(LIe())}(WL)),WL}var od={},k_={},MR={},Uee;function trt(){if(Uee)return MR;Uee=1,Object.defineProperty(MR,"__esModule",{value:!0}),MR.ContextFactoryMixin=e;const t="contextDef";function e(r){return class extends r{contextDefinitionPrefix(i,a,s){return{type:t,subType:"prefix",key:a,value:s,loc:i}}isContextDefinitionPrefix(i){return this.isOfSubType(i,t,"prefix")}contextDefinitionBase(i,a){return{type:"contextDef",subType:"base",value:a,loc:i}}isContextDefinitionBase(i){return this.isOfSubType(i,t,"base")}}}return MR}var DR={},Vee;function rrt(){if(Vee)return DR;Vee=1,Object.defineProperty(DR,"__esModule",{value:!0}),DR.ExpressionFactoryMixin=e;const t="expression";function e(r){return class extends r{isExpressionPure(i){return this.isOfType(i,t)}formatOperator(i){return i.toLowerCase().replaceAll(" ","")}expressionOperation(i,a,s){return{type:t,subType:"operation",operator:this.formatOperator(i),args:a,loc:s}}isExpressionOperator(i){return this.isOfSubType(i,t,"operation")}expressionFunctionCall(i,a,s,o){return{type:"expression",subType:"functionCall",function:i,args:a,distinct:s,loc:o}}isExpressionFunctionCall(i){return this.isOfSubType(i,t,"functionCall")}expressionPatternOperation(i,a,s){return{type:t,subType:"patternOperation",operator:this.formatOperator(i),args:a,loc:s}}isExpressionPatternOperation(i){return this.isOfSubType(i,t,"patternOperation")}aggregate(i,a,s,o,c){const u={type:"expression",subType:"aggregate",aggregation:this.formatOperator(i),distinct:a,loc:c};return this.isOfType(s,"wildcard")?{...u,expression:[s]}:o===void 0?{...u,expression:[s]}:{...u,expression:[s],separator:o}}isExpressionAggregate(i){return this.isOfSubType(i,t,"aggregate")}isExpressionAggregateSeparator(i){return this.isOfSubType(i,t,"aggregate")&&typeof i.separator=="string"}isExpressionAggregateOnWildcard(i){const a=i;return this.isOfSubType(i,t,"aggregate")&&Array.isArray(a.expression)&&a.expression.length===1&&this.isOfType(a.expression[0],"wildcard")}isExpressionAggregateDefault(i){const a=i;return this.isOfSubType(i,t,"operation")&&Array.isArray(a.expression)&&a.expression.length===1&&!this.isOfType(a.expression[0],"wildcard")}}}return DR}var CR={},Gee;function nrt(){if(Gee)return CR;Gee=1,Object.defineProperty(CR,"__esModule",{value:!0}),CR.GraphRefFactoryMixin=e;const t="graphRef";function e(r){return class extends r{isGraphRef(i){return this.isOfType(i,t)}graphRefDefault(i){return{type:t,subType:"default",loc:i}}isGraphRefDefault(i){return this.isOfSubType(i,t,"default")}graphRefNamed(i){return{type:t,subType:"named",loc:i}}isGraphRefNamed(i){return this.isOfSubType(i,t,"named")}graphRefAll(i){return{type:t,subType:"all",loc:i}}isGraphRefAll(i){return this.isOfSubType(i,t,"all")}graphRefSpecific(i,a){return{type:t,subType:"specific",graph:i,loc:a}}isGraphRefSpecific(i){return this.isOfSubType(i,t,"specific")}}}return CR}var LR={},Hee;function irt(){if(Hee)return LR;Hee=1,Object.defineProperty(LR,"__esModule",{value:!0}),LR.asArg=t;function t(r){return new e(r)}class e{constructor(n){k(this,"input");this.input=n}call(n){return this.input=n(this.input),this}returns(){return this.input}}return LR}var jR={},kee;function art(){if(kee)return jR;kee=1,Object.defineProperty(jR,"__esModule",{value:!0}),jR.PathFactoryMixin=e;const t="path";function e(r){return class extends r{isPathPure(i){return this.isOfType(i,t)}path(i,a,s){const o={type:t,loc:s,items:a};if(i==="|"||i==="/")return{...o,subType:i};if((i==="?"||i==="*"||i==="+"||i==="^")&&a.length===1)return{...o,subType:i,items:a};if(i==="^"&&a.length===1&&!this.isPathPure(a[0]))return{...o,subType:i,items:a};if(i==="!"&&a.length===1&&(this.isPathAlternativeLimited(a[0])||!this.isPathPure(a[0])||this.isPathNegatedElt(a[0])))return{...o,subType:i,items:a};throw new Error("Invalid path type")}isPathOfType(i,a){return this.isOfType(i,t)&&a.includes(i.subType)}isPathChain(i){return this.isOfSubType(i,t,"/")||this.isOfSubType(i,t,"|")}isPathModified(i){return this.isOfSubType(i,t,"?")||this.isOfSubType(i,t,"*")||this.isOfSubType(i,t,"+")||this.isOfSubType(i,t,"^")}isPathNegatedElt(i){const a=i;return this.isOfSubType(i,t,"^")&&Array.isArray(a.items)&&a.items.length===1&&typeof a.items[0]=="object"&&(a.items[0]??!1)&&!this.isPathPure(a.items[0])}isPathNegated(i){return this.isOfSubType(i,t,"!")}isPathAlternativeLimited(i){const a=i;return this.isOfSubType(i,t,"|")&&Array.isArray(a.items)&&a.items.every(s=>!this.isPathPure(s)||this.isPathNegatedElt(s))}}}return jR}var BR={},zee;function srt(){if(zee)return BR;zee=1,Object.defineProperty(BR,"__esModule",{value:!0}),BR.PatternFactoryMixin=e;const t="pattern";function e(r){return class extends r{isPattern(i){return this.isOfType(i,t)}patternBgp(i,a){return{type:t,subType:"bgp",triples:i,loc:a}}isPatternBgp(i){return this.isOfSubType(i,t,"bgp")}patternGroup(i,a){return{type:t,subType:"group",patterns:i,loc:a}}isPatternGroup(i){return this.isOfSubType(i,t,"group")}patternGraph(i,a,s){return{type:t,subType:"graph",name:i,patterns:a,loc:s}}isPatternGraph(i){return this.isOfSubType(i,t,"graph")}patternOptional(i,a){return{type:t,subType:"optional",patterns:i,loc:a}}isPatternOptional(i){return this.isOfSubType(i,t,"optional")}patternValues(i,a,s){return{type:t,subType:"values",variables:i,values:a,loc:s}}isPatternValues(i){return this.isOfSubType(i,t,"values")}patternFilter(i,a){return{type:t,subType:"filter",expression:i,loc:a}}isPatternFilter(i){return this.isOfSubType(i,t,"filter")}patternBind(i,a,s){return{type:t,subType:"bind",expression:i,variable:a,loc:s}}isPatternBind(i){return this.isOfSubType(i,t,"bind")}patternUnion(i,a){return{type:t,subType:"union",patterns:i,loc:a}}isPatternUnion(i){return this.isOfSubType(i,t,"union")}patternMinus(i,a){return{type:t,subType:"minus",patterns:i,loc:a}}isPatternMinus(i){return this.isOfSubType(i,t,"minus")}patternService(i,a,s,o){return{type:t,subType:"service",silent:s,name:i,patterns:a,loc:o}}isPatternService(i){return this.isOfSubType(i,t,"service")}}}return BR}var qR={},Qee;function ort(){if(Qee)return qR;Qee=1,Object.defineProperty(qR,"__esModule",{value:!0}),qR.QueryFactoryMixin=e;const t="query";function e(r){return class extends r{isQuery(i){return this.isOfType(i,t)}isQuerySelect(i){return this.isOfSubType(i,t,"select")}queryConstruct(i,a,s,o,c,u,l){return{type:"query",subType:"construct",context:a,template:s,where:o,solutionModifiers:c,datasets:u,values:l,loc:i}}isQueryConstruct(i){return this.isOfSubType(i,t,"construct")}isQueryDescribe(i){return this.isOfSubType(i,t,"describe")}isQueryAsk(i){return this.isOfSubType(i,t,"ask")}querySelect(i,a){return{type:t,subType:"select",...i,loc:a}}}}return qR}var UR={},Wee;function urt(){if(Wee)return UR;Wee=1,Object.defineProperty(UR,"__esModule",{value:!0}),UR.SolutionModifiersFactoryMixin=e;const t="solutionModifier";function e(r){return class extends r{isSolutionModifier(i){return this.isOfType(i,t)}solutionModifierHaving(i,a){return{type:t,subType:"having",having:i,loc:a}}isSolutionModifierHaving(i){return this.isOfSubType(i,t,"having")}solutionModifierOrder(i,a){return{type:t,subType:"order",orderDefs:i,loc:a}}isSolutionModifierOrder(i){return this.isOfSubType(i,t,"order")}solutionModifierLimitOffset(i,a,s){return{type:t,subType:"limitOffset",limit:i,offset:a,loc:s}}isSolutionModifierLimitOffset(i){return this.isOfSubType(i,t,"limitOffset")}solutionModifierGroup(i,a){return{type:"solutionModifier",subType:"group",groupings:i,loc:a}}isSolutionModifierGroup(i){return this.isOfSubType(i,t,"group")}}}return UR}var VR={},Kee;function crt(){if(Kee)return VR;Kee=1,Object.defineProperty(VR,"__esModule",{value:!0}),VR.TermFactoryMixin=e;const t="term";function e(r){return class extends r{constructor(){super(...arguments);k(this,"__blankNodeCounter",0)}resetBlankNodeCounter(){this.__blankNodeCounter=0}isTerm(a){return this.isOfType(a,"term")}termBlank(a,s){const o={type:"term",subType:"blankNode",loc:s};return a===void 0?{...o,label:`g_${this.__blankNodeCounter++}`}:{...o,label:`e_${a}`}}isTermBlank(a){return this.isOfSubType(a,t,"blankNode")}termLiteral(a,s,o){return{type:t,subType:"literal",value:s,langOrIri:o,loc:a}}isTermLiteral(a){return this.isOfSubType(a,t,"literal")}isTermLiteralLangStr(a){return this.isTermLiteral(a)&&typeof a.langOrIri=="string"}isTermLiteralStr(a){return this.isTermLiteral(a)&&typeof a.langOrIri>"u"}isTermLiteralTyped(a){const s=a;return this.isTermLiteral(a)&&typeof s.langOrIri=="object"&&s.langOrIri!==null&&this.isTermNamed(s.langOrIri)}termVariable(a,s){return{type:t,subType:"variable",value:a,loc:s}}isTermVariable(a){return this.isOfSubType(a,t,"variable")}termNamed(a,s,o){const c={type:t,subType:"namedNode",value:s,loc:a};return o===void 0?c:{...c,prefix:o}}isTermNamed(a){return this.isOfSubType(a,t,"namedNode")}isTermNamedPrefixed(a){const s=a;return this.isTermNamed(a)&&typeof s.prefix=="string"}}}return VR}var GR={},Xee;function lrt(){if(Xee)return GR;Xee=1,Object.defineProperty(GR,"__esModule",{value:!0}),GR.UpdateOperationFactoryMixin=e;const t="updateOperation";function e(r){return class extends r{isUpdateOperation(i){return this.isOfType(i,t)}updateOperationLoad(i,a,s,o){return{type:t,subType:"load",silent:s,source:a,...o&&{destination:o},loc:i}}isUpdateOperationLoad(i){return this.isOfSubType(i,t,"load")}updateOperationClearDrop(i,a,s,o){return{type:"updateOperation",subType:i,silent:a,destination:s,loc:o}}updateOperationClear(i,a,s){return this.updateOperationClearDrop("clear",a,i,s)}isUpdateOperationClear(i){return this.isOfSubType(i,t,"clear")}updateOperationDrop(i,a,s){return this.updateOperationClearDrop("drop",a,i,s)}isUpdateOperationDrop(i){return this.isOfSubType(i,t,"drop")}updateOperationCreate(i,a,s){return{type:"updateOperation",subType:"create",silent:a,destination:i,loc:s}}isUpdateOperationCreate(i){return this.isOfSubType(i,t,"create")}updateOperationAddMoveCopy(i,a,s,o,c){return{type:"updateOperation",subType:i,silent:o,source:a,destination:s,loc:c}}updateOperationAdd(i,a,s,o){return this.updateOperationAddMoveCopy("add",i,a,s,o)}isUpdateOperationAdd(i){return this.isOfSubType(i,t,"add")}updateOperationMove(i,a,s,o){return this.updateOperationAddMoveCopy("move",i,a,s,o)}isUpdateOperationMove(i){return this.isOfSubType(i,t,"move")}updateOperationCopy(i,a,s,o){return this.updateOperationAddMoveCopy("copy",i,a,s,o)}isUpdateOperationCopy(i){return this.isOfSubType(i,t,"copy")}updateOperationInsDelDataWhere(i,a,s){return{type:"updateOperation",subType:i,data:a,loc:s}}updateOperationInsertData(i,a){return this.updateOperationInsDelDataWhere("insertdata",i,a)}isUpdateOperationInsertData(i){return this.isOfSubType(i,t,"insertdata")}updateOperationDeleteData(i,a){return this.updateOperationInsDelDataWhere("deletedata",i,a)}isUpdateOperationDeleteData(i){return this.isOfSubType(i,t,"deletedata")}updateOperationDeleteWhere(i,a){return this.updateOperationInsDelDataWhere("deletewhere",i,a)}isUpdateOperationDeleteWhere(i){return this.isOfSubType(i,t,"deletewhere")}updateOperationModify(i,a,s,o,c,u){return{type:"updateOperation",subType:"modify",insert:a??[],delete:s??[],graph:u,where:o,from:c,loc:i}}isUpdateOperationModify(i){return this.isOfSubType(i,t,"modify")}}}return GR}var Jee;function bz(){if(Jee)return k_;Jee=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.AstFactory=void 0;const t=_r(),e=trt(),r=rrt(),n=nrt(),i=irt(),a=art(),s=srt(),o=ort(),c=urt(),u=crt(),l=lrt();class d extends(0,i.asArg)(t.AstCoreFactory).call(e.ContextFactoryMixin).call(r.ExpressionFactoryMixin).call(n.GraphRefFactoryMixin).call(a.PathFactoryMixin).call(s.PatternFactoryMixin).call(o.QueryFactoryMixin).call(c.SolutionModifiersFactoryMixin).call(u.TermFactoryMixin).call(l.UpdateOperationFactoryMixin).returns(){alwaysSparql11(h){return!0}isPath(h){return this.isPathPure(h)||this.isTermNamed(h)}isExpression(h){return this.isExpressionPure(h)||this.isTermNamed(h)||this.isTermVariable(h)||this.isTermLiteral(h)}graphNodeIdentifier(h){return h.type==="tripleCollection"?h.identifier:h}triple(h,p,_,g){return{type:"triple",subject:h,predicate:p,object:_,loc:g??this.sourceLocation(h,p,_)}}isTriple(h){return this.isOfType(h,"triple")}datasetClauses(h,p){return{type:"datasetClauses",clauses:h,loc:p}}isDatasetClauses(h){return this.isOfType(h,"datasetClauses")}wildcard(h){return{type:"wildcard",loc:h}}isWildcard(h){return this.isOfType(h,"wildcard")}isTripleCollection(h){return this.isOfType(h,"tripleCollection")}tripleCollectionBlankNodeProperties(h,p,_){return{type:"tripleCollection",subType:"blankNodeProperties",identifier:h,triples:p,loc:_}}isTripleCollectionBlankNodeProperties(h){return this.isOfSubType(h,"tripleCollection","blankNodeProperties")}tripleCollectionList(h,p,_){return{type:"tripleCollection",subType:"list",identifier:h,triples:p,loc:_}}isTripleCollectionList(h){return this.isOfSubType(h,"tripleCollection","list")}graphQuads(h,p,_){return{type:"graph",graph:h,triples:p,loc:_}}isGraphQuads(h){return super.isOfType(h,"graph")}isUpdate(h){return super.isOfType(h,"update")}}return k_.AstFactory=d,k_}var pc={},Yee;function pO(){if(Yee)return pc;Yee=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.AstTransformer=pc.CommonIRIs=void 0,pc.sparqlCodepointEscape=e;const t=_r();function e(i){const a=i.replaceAll(/\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{8})/gu,(s,o,c)=>{if(o){const d=Number.parseInt(o,16);return String.fromCodePoint(d)}const u=Number.parseInt(c,16);if(u<65535)return String.fromCodePoint(u);const l=u-65536;return String.fromCodePoint(55296+(l>>10),56320+(l&1023))});if(/[\uD800-\uDBFF](?:[^\uDC00-\uDFFF]|$)/u.test(a))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint");return a}var r;(function(i){i.BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",i.INTEGER="http://www.w3.org/2001/XMLSchema#integer",i.DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",i.DOUBLE="http://www.w3.org/2001/XMLSchema#double",i.STRING="http://www.w3.org/2001/XMLSchema#string",i.FIRST="http://www.w3.org/1999/02/22-rdf-syntax-ns#first",i.REST="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",i.NIL="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",i.TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"})(r||(pc.CommonIRIs=r={}));class n extends t.TransformerSubTyped{}return pc.AstTransformer=n,pc}var $ee;function _O(){if($ee)return od;$ee=1,Object.defineProperty(od,"__esModule",{value:!0}),od.queryProjectionIsGood=o,od.findPatternBoundedVars=c,od.checkNote13=u,od.updateNoReuseBlankNodeLabels=l;const t=bz(),e=pO(),r=new t.AstFactory,n=new e.AstTransformer;function i(d){if(r.isExpressionAggregate(d))return[d];if(r.isExpressionOperator(d)){const f=[];for(const h of d.args)f.push(...i(h));return f}return[]}function a(d){return r.isTerm(d)&&r.isTermVariable(d)?d.value:r.isExpression(d)?r.isExpressionAggregate(d)&&r.isTermVariable(d.expression[0])?d.expression[0].value:void 0:d.variable.value}function s(d,f){if(r.isExpressionOperator(d))for(const h of d.args)s(h,f);else r.isTerm(d)&&r.isTermVariable(d)&&f.add(d.value)}function o(d){if(d.variables.length===1&&r.isWildcard(d.variables[0])){if(d.solutionModifiers.group!==void 0)throw new Error("GROUP BY not allowed with wildcard");return}const f=d.variables,h=f.flatMap(g=>r.isTerm(g)?[]:i(g.expression)).some(g=>g.aggregation==="count"&&!g.expression.some(m=>r.isWildcard(m))),p=d.solutionModifiers.group;if(h||p){for(const g of f)if(r.isTerm(g)){if(!p||!p.groupings.map(m=>a(m)).includes(a(g)))throw new Error("Variable not allowed in projection")}else if(i(g.expression).length===0){const m=new Set;s(g.expression,m);for(const y of m)if(!p||!p.groupings.map(v=>a(v)).includes(y))throw new Error(`Use of ungrouped variable in projection of operation (?${y})`)}}const _=d.where.patterns.filter(g=>g.type==="query");if(_.length>0){const g=new Set;for(const v of f)"variable"in v&&g.add(v.variable.value);const m=_.flatMap(v=>v.variables).map(v=>r.isTerm(v)?v.value:r.isWildcard(v)?"*":v.variable.value),y=new Set(m);for(const v of g)if(y.has(v))throw new Error(`Target id of 'AS' (?${v}) already used in subquery`)}}function c(d,f){function h(p){c(p,f)}if(d!==void 0)if(Array.isArray(d))for(const p of d)h(p);else if(r.isQuery(d))r.isQuerySelect(d)||r.isQueryDescribe(d)?h([...d.variables.some(p=>r.isWildcard(p))?[d.where]:d.variables,d.solutionModifiers.group,d.values]):h(d.solutionModifiers.group);else if(r.isTriple(d))h([d.subject,d.predicate,d.object]);else if(r.isPathPure(d))h(d.items);else if(r.isTripleCollection(d))h([d.identifier,...d.triples]);else if(r.isSolutionModifierGroup(d))h(d.groupings.filter(p=>"variable"in p).map(p=>p.variable));else if(r.isSolutionModifierHaving(d))h(d.having);else if(r.isSolutionModifierOrder(d))h(d.orderDefs.map(p=>p.expression));else if(r.isPatternValues(d))for(const p of Object.keys(d.values.at(0)??{}))f.add(p);else r.isPatternBgp(d)?h(d.triples):r.isPatternGroup(d)||r.isPatternUnion(d)||r.isPatternOptional(d)?h(d.patterns):r.isPatternService(d)||r.isPatternGraph(d)?h([d.name,...d.patterns]):r.isPatternBind(d)?h(d.variable):r.isTermVariable(d)&&f.add(d.value)}function u(d){for(const[h,p]of d.entries())if(r.isPatternBind(p)&&h>0&&r.isPatternBgp(d[h-1])){const _=d[h-1],g=[];if(n.visitNodeSpecific(_,{},{term:{variable:{visitor:m=>{g.push(m)}}}}),g.some(m=>m.value===p.variable.value))throw new Error(`Variable used to bind is already bound (?${p.variable.value})`)}const f=new Set;for(const h of d)if(r.isPatternBind(h)){if(f.has(h.variable.value))throw new Error(`Variable used to bind is already bound (?${h.variable.value})`)}else c(h,f)}function l(d){const f=new Set;for(const h of d.updates){if(!h.operation)continue;const p=h.operation;if(p.subType==="insertdata"){const _=new Set;n.visitNodeSpecific(p,{},{term:{blankNode:{visitor:g=>{if(_.add(g.label),f.has(g.label))throw new Error("Detected reuse blank node across different INSERT DATA clauses")}}}});for(const g of _)f.add(g)}}}return od}var sj={},oj={},Zee;function ql(){return Zee||(Zee=1,function(t){var e=E&&E.__createBinding||(Object.create?function(o,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(o,l,d)}:function(o,c,u,l){l===void 0&&(l=u),o[l]=c[u]}),r=E&&E.__setModuleDefault||(Object.create?function(o,c){Object.defineProperty(o,"default",{enumerable:!0,value:c})}:function(o,c){o.default=c}),n=E&&E.__importStar||function(){var o=function(c){return o=Object.getOwnPropertyNames||function(u){var l=[];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[l.length]=d);return l},o(c)};return function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var l=o(c),d=0;d<l.length;d++)l[d]!=="default"&&e(u,c,l[d]);return r(u,c),u}}();Object.defineProperty(t,"__esModule",{value:!0}),t.verbA=t.blankNode=t.canCreateBlankNodes=t.prefixedName=t.iriFull=t.iri=t.string=t.booleanLiteral=t.numericLiteralNegative=t.numericLiteralPositive=t.numericLiteralUnsigned=t.numericLiteral=t.rdfLiteral=void 0,t.stringEscapedLexical=s;const i=n(ya()),a=pO();function s(o){return`"${o.replaceAll(/["\\\t\n\r\b\f]/gu,u=>{switch(u){case"	":return"\\t";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"\f":return"\\f";case'"':return'\\"';case"\\":return"\\\\";default:return u}})}"`}t.rdfLiteral={name:"rdfLiteral",impl:({ACTION:o,SUBRULE1:c,CONSUME:u,OPTION:l,OR:d})=>f=>{const h=c(t.string);return l(()=>d([{ALT:()=>{const p=u(i.terminals.langTag);return o(()=>f.astFactory.termLiteral(f.astFactory.sourceLocation(h,p),h.value,p.image.slice(1).toLowerCase()))}},{ALT:()=>{u(i.symbols.hathat);const p=c(t.iri);return o(()=>f.astFactory.termLiteral(f.astFactory.sourceLocation(h,p),h.value,p))}}]))??h},gImpl:({SUBRULE:o,PRINT:c,PRINT_WORD:u})=>(l,{astFactory:d})=>{!l.langOrIri||typeof l.langOrIri=="string"?(d.printFilter(l,()=>{u(""),c(s(l.value))}),typeof l.langOrIri=="string"&&d.printFilter(l,()=>c("@",l.langOrIri))):d.isSourceLocationNoMaterialize(l.langOrIri.loc)?d.printFilter(l,()=>{u(l.value)}):(d.printFilter(l,()=>{u(""),c(s(l.value),"^^")}),o(t.iri,l.langOrIri))}},t.numericLiteral={name:"numericLiteral",impl:({SUBRULE:o,OR:c})=>()=>c([{ALT:()=>o(t.numericLiteralUnsigned)},{ALT:()=>o(t.numericLiteralPositive)},{ALT:()=>o(t.numericLiteralNegative)}])},t.numericLiteralUnsigned={name:"numericLiteralUnsigned",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{const d=u([{ALT:()=>[c(i.terminals.integer),a.CommonIRIs.INTEGER]},{ALT:()=>[c(i.terminals.decimal),a.CommonIRIs.DECIMAL]},{ALT:()=>[c(i.terminals.double),a.CommonIRIs.DOUBLE]}]);return o(()=>l.astFactory.termLiteral(l.astFactory.sourceLocation(d[0]),d[0].image,l.astFactory.termNamed(l.astFactory.sourceLocation(),d[1])))}},t.numericLiteralPositive={name:"numericLiteralPositive",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{const d=u([{ALT:()=>[c(i.terminals.integerPositive),a.CommonIRIs.INTEGER]},{ALT:()=>[c(i.terminals.decimalPositive),a.CommonIRIs.DECIMAL]},{ALT:()=>[c(i.terminals.doublePositive),a.CommonIRIs.DOUBLE]}]);return o(()=>l.astFactory.termLiteral(l.astFactory.sourceLocation(d[0]),d[0].image,l.astFactory.termNamed(l.astFactory.sourceLocation(),d[1])))}},t.numericLiteralNegative={name:"numericLiteralNegative",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{const d=u([{ALT:()=>[c(i.terminals.integerNegative),a.CommonIRIs.INTEGER]},{ALT:()=>[c(i.terminals.decimalNegative),a.CommonIRIs.DECIMAL]},{ALT:()=>[c(i.terminals.doubleNegative),a.CommonIRIs.DOUBLE]}]);return o(()=>l.astFactory.termLiteral(l.astFactory.sourceLocation(d[0]),d[0].image,l.astFactory.termNamed(l.astFactory.sourceLocation(),d[1])))}},t.booleanLiteral={name:"booleanLiteral",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{const d=u([{ALT:()=>c(i.true_)},{ALT:()=>c(i.false_)}]);return o(()=>l.astFactory.termLiteral(l.astFactory.sourceLocation(d),d.image.toLowerCase(),l.astFactory.termNamed(l.astFactory.sourceLocation(),a.CommonIRIs.BOOLEAN)))}},t.string={name:"string",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{const d=u([{ALT:()=>{const f=c(i.terminals.stringLiteral1);return[f,f.image.slice(1,-1)]}},{ALT:()=>{const f=c(i.terminals.stringLiteral2);return[f,f.image.slice(1,-1)]}},{ALT:()=>{const f=c(i.terminals.stringLiteralLong1);return[f,f.image.slice(3,-3)]}},{ALT:()=>{const f=c(i.terminals.stringLiteralLong2);return[f,f.image.slice(3,-3)]}}]);return o(()=>{const f=l.astFactory,h=d[1].replaceAll(/\\([tnrbf"'\\])/gu,(p,_)=>{switch(_){case"t":return"	";case"n":return`
`;case"r":return"\r";case"b":return"\b";case"f":return"\f";default:return _}});return f.termLiteral(f.sourceLocation(d[0]),h)})}},t.iri={name:"iri",impl:({SUBRULE:o,OR:c})=>()=>c([{ALT:()=>o(t.iriFull)},{ALT:()=>o(t.prefixedName)}]),gImpl:({SUBRULE:o})=>(c,{astFactory:u})=>u.isTermNamedPrefixed(c)?o(t.prefixedName,c):o(t.iriFull,c)},t.iriFull={name:"iriFull",impl:({ACTION:o,CONSUME:c})=>u=>{const l=c(i.terminals.iriRef);return o(()=>u.astFactory.termNamed(u.astFactory.sourceLocation(l),l.image.slice(1,-1)))},gImpl:({PRINT:o})=>(c,{astFactory:u})=>{u.printFilter(c,()=>o("<",c.value,">"))}},t.prefixedName={name:"prefixedName",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{function d(f){if(!l.skipValidation&&l.prefixes[f]===void 0)throw new Error(`Unknown prefix: ${f}`)}return u([{ALT:()=>{const f=c(i.terminals.pNameLn);return o(()=>{const[h,p]=f.image.split(":");return d(h),l.astFactory.termNamed(l.astFactory.sourceLocation(f),p,h)})}},{ALT:()=>{const f=c(i.terminals.pNameNs);return o(()=>{const h=f.image.slice(0,-1);return d(h),l.astFactory.termNamed(l.astFactory.sourceLocation(f),"",h)})}}])},gImpl:({PRINT:o})=>(c,{astFactory:u})=>{u.printFilter(c,()=>o(c.prefix,":",c.value))}},t.canCreateBlankNodes=Symbol("canCreateBlankNodes"),t.blankNode={name:"blankNode",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{const d=u([{ALT:()=>{const f=c(i.terminals.blankNodeLabel);return o(()=>l.astFactory.termBlank(f.image.slice(2),l.astFactory.sourceLocation(f)))}},{ALT:()=>{const f=c(i.terminals.anon);return o(()=>l.astFactory.termBlank(void 0,l.astFactory.sourceLocation(f)))}}]);return o(()=>{if(!l.parseMode.has("canCreateBlankNodes"))throw new Error("Blank nodes are not allowed in this context")}),d},gImpl:({PRINT:o})=>(c,{astFactory:u})=>{u.printFilter(c,()=>o("_:",c.label.replace(/^e_/u,"")))}},t.verbA={name:"VerbA",impl:({ACTION:o,CONSUME:c})=>u=>{const l=c(i.a);return o(()=>u.astFactory.termNamed(u.astFactory.sourceLocation(l),a.CommonIRIs.TYPE,void 0))}}}(oj)),oj}var ete;function Ol(){return ete||(ete=1,function(t){var e=E&&E.__createBinding||(Object.create?function(o,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(o,l,d)}:function(o,c,u,l){l===void 0&&(l=u),o[l]=c[u]}),r=E&&E.__setModuleDefault||(Object.create?function(o,c){Object.defineProperty(o,"default",{enumerable:!0,value:c})}:function(o,c){o.default=c}),n=E&&E.__importStar||function(){var o=function(c){return o=Object.getOwnPropertyNames||function(u){var l=[];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[l.length]=d);return l},o(c)};return function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var l=o(c),d=0;d<l.length;d++)l[d]!=="default"&&e(u,c,l[d]);return r(u,c),u}}();Object.defineProperty(t,"__esModule",{value:!0}),t.graphTerm=t.var_=t.varOrIri=t.varOrTerm=t.verb=t.prefixDecl=t.baseDecl=t.prologue=void 0;const i=n(ya()),a=pO(),s=ql();t.prologue={name:"prologue",impl:({SUBRULE:o,MANY:c,OR:u})=>()=>{const l=[];return c(()=>u([{ALT:()=>l.push(o(t.baseDecl))},{ALT:()=>l.push(o(t.prefixDecl))}])),l},gImpl:({SUBRULE:o})=>(c,{astFactory:u})=>{for(const l of c)u.isContextDefinitionBase(l)?o(t.baseDecl,l):u.isContextDefinitionPrefix(l)&&o(t.prefixDecl,l)}},t.baseDecl={name:"baseDecl",impl:({ACTION:o,CONSUME:c,SUBRULE:u})=>l=>{const d=c(i.baseDecl),f=u(s.iriFull);return o(()=>l.astFactory.contextDefinitionBase(l.astFactory.sourceLocation(d,f),f))},gImpl:({SUBRULE:o,PRINT_ON_EMPTY:c,NEW_LINE:u})=>(l,{astFactory:d})=>{d.printFilter(l,()=>c("BASE ")),o(s.iri,l.value),d.printFilter(l,()=>u())}},t.prefixDecl={name:"prefixDecl",impl:({ACTION:o,CONSUME:c,SUBRULE:u})=>l=>{const d=c(i.prefixDecl),f=c(i.terminals.pNameNs).image.slice(0,-1),h=u(s.iriFull);return o(()=>(l.prefixes[f]=h.value,l.astFactory.contextDefinitionPrefix(l.astFactory.sourceLocation(d,h),f,h)))},gImpl:({SUBRULE:o,PRINT_ON_EMPTY:c,NEW_LINE:u})=>(l,{astFactory:d})=>{d.printFilter(l,()=>{c("PREFIX ",`${l.key}: `)}),o(s.iri,l.value),d.printFilter(l,()=>u())}},t.verb={name:"verb",impl:({SUBRULE:o,OR:c})=>()=>c([{ALT:()=>o(t.varOrIri)},{ALT:()=>o(s.verbA)}])},t.varOrTerm={name:"varOrTerm",impl:({SUBRULE:o,OR:c})=>u=>c([{GATE:()=>u.parseMode.has("canParseVars"),ALT:()=>o(t.var_)},{ALT:()=>o(t.graphTerm)}]),gImpl:({SUBRULE:o})=>(c,{astFactory:u})=>u.isTermVariable(c)?o(t.var_,c):o(t.graphTerm,c)},t.varOrIri={name:"varOrIri",impl:({SUBRULE:o,OR:c})=>u=>c([{GATE:()=>u.parseMode.has("canParseVars"),ALT:()=>o(t.var_)},{ALT:()=>o(s.iri)}])},t.var_={name:"var",impl:({ACTION:o,CONSUME:c,OR:u})=>l=>{const d=u([{ALT:()=>c(i.terminals.var1)},{ALT:()=>c(i.terminals.var2)}]);return o(()=>l.astFactory.termVariable(d.image.slice(1),l.astFactory.sourceLocation(d)))},gImpl:({PRINT:o})=>(c,{astFactory:u})=>{u.printFilter(c,()=>o(`?${c.value}`))}},t.graphTerm={name:"graphTerm",impl:({ACTION:o,SUBRULE:c,CONSUME:u,OR:l})=>d=>l([{ALT:()=>c(s.iri)},{ALT:()=>c(s.rdfLiteral)},{ALT:()=>c(s.numericLiteral)},{ALT:()=>c(s.booleanLiteral)},{GATE:()=>d.parseMode.has("canCreateBlankNodes"),ALT:()=>c(s.blankNode)},{ALT:()=>{const f=u(i.terminals.nil);return o(()=>d.astFactory.termNamed(d.astFactory.sourceLocation(f),a.CommonIRIs.NIL))}}]),gImpl:({SUBRULE:o})=>(c,{astFactory:u})=>{u.isTermNamed(c)?o(s.iri,c):u.isTermLiteral(c)?o(s.rdfLiteral,c):u.isTermBlank(c)&&o(s.blankNode,c)}}}(sj)),sj}var uj={},cj={},tte;function vz(){return tte||(tte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(u,l);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,f)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),r=E&&E.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),n=E&&E.__importStar||function(){var c=function(u){return c=Object.getOwnPropertyNames||function(l){var d=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(d[d.length]=f);return d},c(u)};return function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d=c(u),f=0;f<d.length;f++)d[f]!=="default"&&e(l,u,d[f]);return r(l,u),l}}();Object.defineProperty(t,"__esModule",{value:!0}),t.sourceSelector=t.namedGraphClause=t.usingClauseStar=t.datasetClauseStar=t.usingClause=t.defaultGraphClause=t.datasetClause=void 0,t.datasetClauseUsing=s,t.datasetClauseUsingStar=o;const i=n(ya()),a=ql();function s(c,u){return{name:c,impl:({ACTION:l,SUBRULE:d,CONSUME:f,OR:h})=>p=>{const _=f(u);return h([{ALT:()=>{const g=d(t.defaultGraphClause);return l(()=>p.astFactory.wrap({clauseType:"default",value:g},p.astFactory.sourceLocation(_,g)))}},{ALT:()=>{const g=d(t.namedGraphClause);return l(()=>p.astFactory.wrap({clauseType:"named",value:g.val},p.astFactory.sourceLocation(_,g)))}}])}}}t.datasetClause=s("datasetClause",i.from),t.defaultGraphClause={name:"defaultGraphClause",impl:({SUBRULE:c})=>()=>c(t.sourceSelector)},t.usingClause=s("usingClause",i.usingClause);function o(c,u,l){return{name:c,impl:({ACTION:d,MANY:f,SUBRULE:h})=>p=>{const _=[];return f(()=>{const g=h(u);_.push(g)}),d(()=>p.astFactory.datasetClauses(_.map(g=>g.val),p.astFactory.sourceLocation(..._)))},gImpl:({SUBRULE:d,PRINT_WORD:f})=>(h,{astFactory:p})=>{for(const _ of h.clauses)p.printFilter(h,()=>f(l)),_.clauseType==="named"&&p.printFilter(h,()=>f("NAMED")),d(a.iri,_.value)}}}t.datasetClauseStar=o("datasetClauses",t.datasetClause,"FROM"),t.usingClauseStar=o("usingClauses",t.usingClause,"USING"),t.namedGraphClause={name:"namedGraphClause",impl:({ACTION:c,SUBRULE:u,CONSUME:l})=>d=>{const f=l(i.graph.named),h=u(t.sourceSelector);return c(()=>d.astFactory.wrap(h,d.astFactory.sourceLocation(f,h)))}},t.sourceSelector={name:"sourceSelector",impl:({SUBRULE:c})=>()=>c(a.iri)}}(cj)),cj}var lj={},dj={},aa={},rte;function Az(){if(rte)return aa;rte=1;var t=E&&E.__createBinding||(Object.create?function(m,y,v,A){A===void 0&&(A=v);var T=Object.getOwnPropertyDescriptor(y,v);(!T||("get"in T?!y.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return y[v]}}),Object.defineProperty(m,A,T)}:function(m,y,v,A){A===void 0&&(A=v),m[A]=y[v]}),e=E&&E.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),r=E&&E.__importStar||function(){var m=function(y){return m=Object.getOwnPropertyNames||function(v){var A=[];for(var T in v)Object.prototype.hasOwnProperty.call(v,T)&&(A[A.length]=T);return A},m(y)};return function(y){if(y&&y.__esModule)return y;var v={};if(y!=null)for(var A=m(y),T=0;T<A.length;T++)A[T]!=="default"&&t(v,y,A[T]);return e(v,y),v}}();Object.defineProperty(aa,"__esModule",{value:!0}),aa.funcExpr1=s,aa.funcExpr2=o,aa.funcExpr3=c,aa.funcVar1=u,aa.funcExprOrNil1=l,aa.funcNil1=d,aa.funcExprList1=f,aa.funcExpr2or3=h,aa.funcExpr3or4=p,aa.funcGroupGraphPattern=_,aa.baseAggregateFunc=g;const n=_r(),i=qIe(),a=r(ya());function s(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,SUBRULE:v,CONSUME:A})=>T=>{const S=A(m);A(a.symbols.LParen);const P=v(i.expression),j=A(a.symbols.RParen);return y(()=>T.astFactory.expressionOperation(S.image,[P],T.astFactory.sourceLocation(S,j)))}}}function o(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v,SUBRULE1:A,SUBRULE2:T})=>S=>{const P=v(m);v(a.symbols.LParen);const j=A(i.expression);v(a.symbols.comma);const F=T(i.expression),N=v(a.symbols.RParen);return y(()=>S.astFactory.expressionOperation(P.image,[j,F],S.astFactory.sourceLocation(P,N)))}}}function c(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v,CONSUME1:A,CONSUME2:T,SUBRULE1:S,SUBRULE2:P,SUBRULE3:j})=>F=>{const N=v(m);v(a.symbols.LParen);const R=S(i.expression);A(a.symbols.comma);const C=P(i.expression);T(a.symbols.comma);const M=j(i.expression),U=v(a.symbols.RParen);return y(()=>F.astFactory.expressionOperation(N.image,[R,C,M],F.astFactory.sourceLocation(N,U)))}}}function u(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,SUBRULE:v,CONSUME:A})=>T=>{const S=A(m);A(a.symbols.LParen);const P=v(i.var_),j=A(a.symbols.RParen);return y(()=>T.astFactory.expressionOperation(S.image,[P],T.astFactory.sourceLocation(S,j)))}}}function l(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v,OR:A,SUBRULE:T})=>S=>{const P=v(m);return A([{ALT:()=>{v(a.symbols.LParen);const j=T(i.expression),F=v(a.symbols.RParen);return y(()=>S.astFactory.expressionOperation(P.image,[j],S.astFactory.sourceLocation(P,F)))}},{ALT:()=>{const j=v(a.terminals.nil);return y(()=>S.astFactory.expressionOperation(P.image,[],S.astFactory.sourceLocation(P,j)))}}])}}}function d(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v})=>A=>{const T=v(m),S=v(a.terminals.nil);return y(()=>A.astFactory.expressionOperation(T.image,[],A.astFactory.sourceLocation(T,S)))}}}function f(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v,SUBRULE:A})=>T=>{const S=v(m),P=A(i.expressionList);return y(()=>T.astFactory.expressionOperation(S.image,P.val,T.astFactory.sourceLocation(S,P)))}}}function h(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v,SUBRULE1:A,SUBRULE2:T,SUBRULE3:S,CONSUME1:P,OPTION:j,CONSUME2:F})=>N=>{const R=v(m);v(a.symbols.LParen);const C=A(i.expression);P(a.symbols.comma);const M=T(i.expression),U=j(()=>(F(a.symbols.comma),S(i.expression))),B=v(a.symbols.RParen);return y(()=>N.astFactory.expressionOperation(R.image,U?[C,M,U]:[C,M],N.astFactory.sourceLocation(R,B)))}}}function p(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v,SUBRULE1:A,SUBRULE2:T,SUBRULE3:S,SUBRULE4:P,CONSUME1:j,OPTION:F,CONSUME2:N,CONSUME3:R})=>C=>{const M=v(m);v(a.symbols.LParen);const U=A(i.expression);j(a.symbols.comma);const B=T(i.expression);N(a.symbols.comma);const G=S(i.expression),K=F(()=>(R(a.symbols.comma),P(i.expression))),$=v(a.symbols.RParen);return y(()=>C.astFactory.expressionOperation(M.image,K?[U,B,G,K]:[U,B,G],C.astFactory.sourceLocation(M,$)))}}}function _(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,SUBRULE:v,CONSUME:A})=>T=>{const S=A(m),P=v(i.groupGraphPattern);return y(()=>T.astFactory.expressionPatternOperation(S.image,P,T.astFactory.sourceLocation(S,P)))}}}function g(m){return{name:(0,n.unCapitalize)(m.name),impl:({ACTION:y,CONSUME:v,SUBRULE:A,OPTION:T})=>S=>{const P=v(m);v(a.symbols.LParen);const j=T(()=>v(a.distinct)),F=A(i.expression),N=v(a.symbols.RParen);return y(()=>S.astFactory.aggregate(P.image,j!==void 0,F,void 0,S.astFactory.sourceLocation(P,N)))}}}return aa}var nte;function zF(){return nte||(nte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(l,d,f,h){h===void 0&&(h=f);var p=Object.getOwnPropertyDescriptor(d,f);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(l,h,p)}:function(l,d,f,h){h===void 0&&(h=f),l[h]=d[f]}),r=E&&E.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),n=E&&E.__importStar||function(){var l=function(d){return l=Object.getOwnPropertyNames||function(f){var h=[];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(h[h.length]=p);return h},l(d)};return function(d){if(d&&d.__esModule)return d;var f={};if(d!=null)for(var h=l(d),p=0;p<h.length;p++)h[p]!=="default"&&e(f,d,h[p]);return r(f,d),f}}();Object.defineProperty(t,"__esModule",{value:!0}),t.builtInCall=t.builtInIsnumeric=t.builtInIsliteral=t.builtInIsblank=t.builtInIsuri=t.builtInIsiri=t.builtInSameterm=t.builtInStrdt=t.builtInStrlang=t.builtInIf=t.builtInCoalesce=t.builtInSha512=t.builtInSha384=t.builtInSha256=t.builtInSha1=t.builtInMd5=t.builtInStruuid=t.builtInUuid=t.builtInNow=t.builtInTz=t.builtInTimezone=t.builtInSeconds=t.builtInMinutes=t.builtInHours=t.builtInDay=t.builtInMonth=t.builtInYear=t.builtInStrafter=t.builtInStrbefore=t.builtInStrends=t.builtInStrstarts=t.builtInContains=t.builtInEncode_for_uri=t.builtInLcase=t.builtInUcase=t.builtInStrlen=t.builtInConcat=t.builtInRound=t.builtInFloor=t.builtInCeil=t.builtInAbs=t.builtInRand=t.builtInBnodeSparqlJs=t.builtInUri=t.builtInIri=t.builtInBound=t.builtInDatatype=t.builtInLangmatches=t.builtInLang=t.builtInStr=void 0,t.aggregate=t.aggregateGroup_concat=t.aggregateSample=t.aggregateAvg=t.aggregateMax=t.aggregateMin=t.aggregateSum=t.aggregateCount=t.notExistsFunc=t.existsFunc=t.strReplaceExpression=t.substringExpression=t.regexExpression=void 0,t.builtInCallList=u;const i=_r(),a=Az(),s=n(ya()),o=gO(),c=ql();t.builtInStr=(0,a.funcExpr1)(s.builtIn.str),t.builtInLang=(0,a.funcExpr1)(s.builtIn.lang),t.builtInLangmatches=(0,a.funcExpr2)(s.builtIn.langmatches),t.builtInDatatype=(0,a.funcExpr1)(s.builtIn.datatype),t.builtInBound=(0,a.funcVar1)(s.builtIn.bound),t.builtInIri=(0,a.funcExpr1)(s.builtIn.iri),t.builtInUri=(0,a.funcExpr1)(s.builtIn.uri),t.builtInBnodeSparqlJs=(0,a.funcExprOrNil1)(s.builtIn.bnode),t.builtInRand=(0,a.funcNil1)(s.builtIn.rand),t.builtInAbs=(0,a.funcExpr1)(s.builtIn.abs),t.builtInCeil=(0,a.funcExpr1)(s.builtIn.ceil),t.builtInFloor=(0,a.funcExpr1)(s.builtIn.floor),t.builtInRound=(0,a.funcExpr1)(s.builtIn.round),t.builtInConcat=(0,a.funcExprList1)(s.builtIn.concat),t.builtInStrlen=(0,a.funcExpr1)(s.builtIn.strlen),t.builtInUcase=(0,a.funcExpr1)(s.builtIn.ucase),t.builtInLcase=(0,a.funcExpr1)(s.builtIn.lcase),t.builtInEncode_for_uri=(0,a.funcExpr1)(s.builtIn.encode_for_uri),t.builtInContains=(0,a.funcExpr2)(s.builtIn.contains),t.builtInStrstarts=(0,a.funcExpr2)(s.builtIn.strstarts),t.builtInStrends=(0,a.funcExpr2)(s.builtIn.strends),t.builtInStrbefore=(0,a.funcExpr2)(s.builtIn.strbefore),t.builtInStrafter=(0,a.funcExpr2)(s.builtIn.strafter),t.builtInYear=(0,a.funcExpr1)(s.builtIn.year),t.builtInMonth=(0,a.funcExpr1)(s.builtIn.month),t.builtInDay=(0,a.funcExpr1)(s.builtIn.day),t.builtInHours=(0,a.funcExpr1)(s.builtIn.hours),t.builtInMinutes=(0,a.funcExpr1)(s.builtIn.minutes),t.builtInSeconds=(0,a.funcExpr1)(s.builtIn.seconds),t.builtInTimezone=(0,a.funcExpr1)(s.builtIn.timezone),t.builtInTz=(0,a.funcExpr1)(s.builtIn.tz),t.builtInNow=(0,a.funcNil1)(s.builtIn.now),t.builtInUuid=(0,a.funcNil1)(s.builtIn.uuid),t.builtInStruuid=(0,a.funcNil1)(s.builtIn.struuid),t.builtInMd5=(0,a.funcExpr1)(s.builtIn.md5),t.builtInSha1=(0,a.funcExpr1)(s.builtIn.sha1),t.builtInSha256=(0,a.funcExpr1)(s.builtIn.sha256),t.builtInSha384=(0,a.funcExpr1)(s.builtIn.sha384),t.builtInSha512=(0,a.funcExpr1)(s.builtIn.sha512),t.builtInCoalesce=(0,a.funcExprList1)(s.builtIn.coalesce),t.builtInIf=(0,a.funcExpr3)(s.builtIn.if_),t.builtInStrlang=(0,a.funcExpr2)(s.builtIn.strlang),t.builtInStrdt=(0,a.funcExpr2)(s.builtIn.strdt),t.builtInSameterm=(0,a.funcExpr2)(s.builtIn.sameterm),t.builtInIsiri=(0,a.funcExpr1)(s.builtIn.isiri),t.builtInIsuri=(0,a.funcExpr1)(s.builtIn.isuri),t.builtInIsblank=(0,a.funcExpr1)(s.builtIn.isblank),t.builtInIsliteral=(0,a.funcExpr1)(s.builtIn.isliteral),t.builtInIsnumeric=(0,a.funcExpr1)(s.builtIn.isnumeric);function u(l){return[{ALT:()=>l(t.aggregate)},{ALT:()=>l(t.builtInStr)},{ALT:()=>l(t.builtInLang)},{ALT:()=>l(t.builtInLangmatches)},{ALT:()=>l(t.builtInDatatype)},{ALT:()=>l(t.builtInBound)},{ALT:()=>l(t.builtInIri)},{ALT:()=>l(t.builtInUri)},{ALT:()=>l(t.builtInBnodeSparqlJs)},{ALT:()=>l(t.builtInRand)},{ALT:()=>l(t.builtInAbs)},{ALT:()=>l(t.builtInCeil)},{ALT:()=>l(t.builtInFloor)},{ALT:()=>l(t.builtInRound)},{ALT:()=>l(t.builtInConcat)},{ALT:()=>l(t.substringExpression)},{ALT:()=>l(t.builtInStrlen)},{ALT:()=>l(t.strReplaceExpression)},{ALT:()=>l(t.builtInUcase)},{ALT:()=>l(t.builtInLcase)},{ALT:()=>l(t.builtInEncode_for_uri)},{ALT:()=>l(t.builtInContains)},{ALT:()=>l(t.builtInStrstarts)},{ALT:()=>l(t.builtInStrends)},{ALT:()=>l(t.builtInStrbefore)},{ALT:()=>l(t.builtInStrafter)},{ALT:()=>l(t.builtInYear)},{ALT:()=>l(t.builtInMonth)},{ALT:()=>l(t.builtInDay)},{ALT:()=>l(t.builtInHours)},{ALT:()=>l(t.builtInMinutes)},{ALT:()=>l(t.builtInSeconds)},{ALT:()=>l(t.builtInTimezone)},{ALT:()=>l(t.builtInTz)},{ALT:()=>l(t.builtInNow)},{ALT:()=>l(t.builtInUuid)},{ALT:()=>l(t.builtInStruuid)},{ALT:()=>l(t.builtInMd5)},{ALT:()=>l(t.builtInSha1)},{ALT:()=>l(t.builtInSha256)},{ALT:()=>l(t.builtInSha384)},{ALT:()=>l(t.builtInSha512)},{ALT:()=>l(t.builtInCoalesce)},{ALT:()=>l(t.builtInIf)},{ALT:()=>l(t.builtInStrlang)},{ALT:()=>l(t.builtInStrdt)},{ALT:()=>l(t.builtInSameterm)},{ALT:()=>l(t.builtInIsiri)},{ALT:()=>l(t.builtInIsuri)},{ALT:()=>l(t.builtInIsblank)},{ALT:()=>l(t.builtInIsliteral)},{ALT:()=>l(t.builtInIsnumeric)},{ALT:()=>l(t.regexExpression)},{ALT:()=>l(t.existsFunc)},{ALT:()=>l(t.notExistsFunc)}]}t.builtInCall={name:"builtInCall",impl:({OR:l,SUBRULE:d,cache:f})=>()=>{const h=f.get(t.builtInCall);if(h)return l(h);const p=u(d);return f.set(t.builtInCall,p),l(p)}},t.regexExpression=(0,a.funcExpr2or3)(s.builtIn.regex),t.substringExpression=(0,a.funcExpr2or3)(s.builtIn.substr),t.strReplaceExpression=(0,a.funcExpr3or4)(s.builtIn.replace),t.existsFunc=(0,a.funcGroupGraphPattern)(s.builtIn.exists),t.notExistsFunc=(0,a.funcGroupGraphPattern)(s.builtIn.notexists),t.aggregateCount={name:(0,i.unCapitalize)(s.builtIn.count.name),impl:({ACTION:l,CONSUME:d,SUBRULE:f,OR:h,OPTION:p})=>_=>{const g=d(s.builtIn.count);d(s.symbols.LParen);const m=p(()=>d(s.distinct)),y=h([{ALT:()=>{const A=d(s.symbols.star);return l(()=>_.astFactory.wildcard(_.astFactory.sourceLocation(A)))}},{ALT:()=>f(o.expression)}]),v=d(s.symbols.RParen);return l(()=>{const A=_.astFactory;return _.astFactory.isWildcard(y),A.aggregate(g.image,!!m,y,void 0,_.astFactory.sourceLocation(g,v))})}},t.aggregateSum=(0,a.baseAggregateFunc)(s.builtIn.sum),t.aggregateMin=(0,a.baseAggregateFunc)(s.builtIn.min),t.aggregateMax=(0,a.baseAggregateFunc)(s.builtIn.max),t.aggregateAvg=(0,a.baseAggregateFunc)(s.builtIn.avg),t.aggregateSample=(0,a.baseAggregateFunc)(s.builtIn.sample),t.aggregateGroup_concat={name:(0,i.unCapitalize)(s.builtIn.groupConcat.name),impl:({ACTION:l,CONSUME:d,OPTION1:f,SUBRULE:h,OPTION2:p})=>_=>{const g=d(s.builtIn.groupConcat);d(s.symbols.LParen);const m=f(()=>d(s.distinct)),y=h(o.expression),v=p(()=>(d(s.symbols.semi),d(s.separator),d(s.symbols.equal),h(c.string))),A=d(s.symbols.RParen);return l(()=>{const T=_.astFactory;return T.aggregate(g.image,!!m,y,(v==null?void 0:v.value)??" ",T.sourceLocation(g,A))})}},t.aggregate={name:"aggregate",impl:({ACTION:l,SUBRULE:d,OR:f})=>h=>{const p=l(()=>h.parseMode.has("inAggregate"));l(()=>h.parseMode.add("inAggregate"));const _=f([{ALT:()=>d(t.aggregateCount)},{ALT:()=>d(t.aggregateSum)},{ALT:()=>d(t.aggregateMin)},{ALT:()=>d(t.aggregateMax)},{ALT:()=>d(t.aggregateAvg)},{ALT:()=>d(t.aggregateSample)},{ALT:()=>d(t.aggregateGroup_concat)}]);return l(()=>!p&&h.parseMode.delete("inAggregate")),l(()=>{if(!h.parseMode.has("canParseAggregate"))throw new Error("Aggregates are only allowed in SELECT, HAVING, and ORDER BY clauses.");if(h.parseMode.has("inAggregate"))throw new Error("An aggregate function is not allowed within an aggregate function.")}),_},gImpl:({SUBRULE:l,PRINT_WORD:d})=>(f,{astFactory:h})=>{h.printFilter(f,()=>{d(f.aggregation.toUpperCase(),"("),f.distinct&&d("DISTINCT")});const p=f.expression[0];h.isWildcard(p)?h.printFilter(f,()=>d("*")):l(o.expression,p),h.isExpressionAggregateSeparator(f)&&h.printFilter(f,()=>d(";","SEPARATOR","=",(0,c.stringEscapedLexical)(f.separator))),h.printFilter(f,()=>d(")"))}}}(dj)),dj}var fj={},hj={},pj={},ite;function jIe(){return ite||(ite=1,function(t){var e=E&&E.__createBinding||(Object.create?function(o,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(o,l,d)}:function(o,c,u,l){l===void 0&&(l=u),o[l]=c[u]}),r=E&&E.__setModuleDefault||(Object.create?function(o,c){Object.defineProperty(o,"default",{enumerable:!0,value:c})}:function(o,c){o.default=c}),n=E&&E.__importStar||function(){var o=function(c){return o=Object.getOwnPropertyNames||function(u){var l=[];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[l.length]=d);return l},o(c)};return function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var l=o(c),d=0;d<l.length;d++)l[d]!=="default"&&e(u,c,l[d]);return r(u,c),u}}();Object.defineProperty(t,"__esModule",{value:!0}),t.pathOneInPropertySet=t.pathNegatedPropertySet=t.pathPrimary=t.pathMod=t.pathElt=t.pathAlternative=t.pathSequence=t.pathEltOrInverse=t.pathGenerator=t.path=void 0,t.pathChainHelper=s;const i=n(ya()),a=ql();t.path={name:"path",impl:({SUBRULE:o})=>()=>o(t.pathAlternative)},t.pathGenerator={name:"path",gImpl:({PRINT:o,SUBRULE:c})=>(u,{astFactory:l},d=!0)=>{if(l.isTerm(u)&&l.isTermNamed(u))c(a.iri,u);else{switch(l.printFilter(u,()=>d&&o("(")),u.subType){case"|":case"/":{const[f,...h]=u.items;c(t.pathGenerator,f,d);for(const p of h)l.printFilter(u,()=>o(u.subType)),c(t.pathGenerator,p,d);break}case"^":l.printFilter(u,()=>o("^")),c(t.pathGenerator,u.items[0],d);break;case"?":case"*":case"+":c(t.pathGenerator,u.items[0],d),l.printFilter(u,()=>o(u.subType));break;case"!":l.printFilter(u,()=>o("!")),l.printFilter(u,()=>o("(")),c(t.pathGenerator,u.items[0],!1),l.printFilter(u,()=>o(")"));break}l.printFilter(u,()=>d&&o(")"))}}};function s(o,c,u,l){return{name:o,impl:({ACTION:d,CONSUME:f,SUBRULE1:h,SUBRULE2:p,MANY:_})=>g=>{const m=h(l);let y=m;const v=[];return _(()=>{f(c),y=p(l),v.push(y)}),d(()=>v.length===0?m:g.astFactory.path(u,[m,...v],g.astFactory.sourceLocation(m,y)))}}}t.pathEltOrInverse={name:"pathEltOrInverse",impl:({ACTION:o,CONSUME:c,SUBRULE1:u,SUBRULE2:l,OR:d})=>f=>d([{ALT:()=>u(t.pathElt)},{ALT:()=>{const h=c(i.symbols.hat),p=l(t.pathElt);return o(()=>f.astFactory.path("^",[p],f.astFactory.sourceLocation(h,p)))}}])},t.pathSequence=s("pathSequence",i.symbols.slash,"/",t.pathEltOrInverse),t.pathAlternative=s("pathAlternative",i.symbols.pipe,"|",t.pathSequence),t.pathElt={name:"pathElt",impl:({ACTION:o,SUBRULE:c,OPTION:u})=>l=>{const d=c(t.pathPrimary),f=u(()=>c(t.pathMod));return o(()=>f===void 0?d:l.astFactory.path(f.image,[d],l.astFactory.sourceLocation(d,f)))}},t.pathMod={name:"pathMod",impl:({CONSUME:o,OR:c})=>()=>c([{ALT:()=>o(i.symbols.question)},{ALT:()=>o(i.symbols.star)},{ALT:()=>o(i.symbols.opPlus)}])},t.pathPrimary={name:"pathPrimary",impl:({SUBRULE:o,CONSUME:c,OR:u})=>()=>u([{ALT:()=>o(a.iri)},{ALT:()=>o(a.verbA)},{ALT:()=>o(t.pathNegatedPropertySet)},{ALT:()=>{c(i.symbols.LParen);const l=o(t.path);return c(i.symbols.RParen),l}}])},t.pathNegatedPropertySet={name:"pathNegatedPropertySet",impl:({ACTION:o,CONSUME:c,SUBRULE1:u,SUBRULE2:l,SUBRULE3:d,OR:f,MANY:h})=>p=>{const _=c(i.symbols.exclamation);return f([{ALT:()=>{const g=u(t.pathOneInPropertySet);return o(()=>p.astFactory.path("!",[g],p.astFactory.sourceLocation(_,g)))}},{ALT:()=>{const g=c(i.symbols.LParen),m=l(t.pathOneInPropertySet),y=[];h(()=>{c(i.symbols.pipe);const A=d(t.pathOneInPropertySet);y.push(A)});const v=c(i.symbols.RParen);return o(()=>{const A=p.astFactory;return y.length===0?A.path("!",[m],A.sourceLocation(_,v)):A.path("!",[A.path("|",[m,...y],A.sourceLocation(g,v))],A.sourceLocation(_,v))})}}])}},t.pathOneInPropertySet={name:"pathOneInPropertySet",impl:({ACTION:o,CONSUME:c,SUBRULE1:u,SUBRULE2:l,OR1:d,OR2:f})=>h=>d([{ALT:()=>u(a.iri)},{ALT:()=>u(a.verbA)},{ALT:()=>{const p=c(i.symbols.hat),_=f([{ALT:()=>l(a.iri)},{ALT:()=>l(a.verbA)}]);return o(()=>h.astFactory.path("^",[_],h.astFactory.sourceLocation(p,_)))}}])}}(pj)),pj}var ate;function QF(){return ate||(ate=1,function(t){var e=E&&E.__createBinding||(Object.create?function(v,A,T,S){S===void 0&&(S=T);var P=Object.getOwnPropertyDescriptor(A,T);(!P||("get"in P?!A.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return A[T]}}),Object.defineProperty(v,S,P)}:function(v,A,T,S){S===void 0&&(S=T),v[S]=A[T]}),r=E&&E.__setModuleDefault||(Object.create?function(v,A){Object.defineProperty(v,"default",{enumerable:!0,value:A})}:function(v,A){v.default=A}),n=E&&E.__importStar||function(){var v=function(A){return v=Object.getOwnPropertyNames||function(T){var S=[];for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(S[S.length]=P);return S},v(A)};return function(A){if(A&&A.__esModule)return A;var T={};if(A!=null)for(var S=v(A),P=0;P<S.length;P++)S[P]!=="default"&&e(T,A,S[P]);return r(T,A),T}}();Object.defineProperty(t,"__esModule",{value:!0}),t.graphNodePath=t.graphNode=t.blankNodePropertyListPath=t.blankNodePropertyList=t.triplesNodePath=t.triplesNode=t.collectionPath=t.collection=t.objectPath=t.object=t.objectListPath=t.objectList=t.verbSimple=t.verbPath=t.propertyListPathNotEmpty=t.propertyListNotEmpty=t.propertyListPath=t.propertyList=t.triplesTemplate=t.triplesSameSubjectPath=t.triplesSameSubject=t.triplesBlock=void 0;const i=_r(),a=n(ya()),s=pO(),o=Ol(),c=jIe();function u(v){return({ACTION:A,AT_LEAST_ONE:T,SUBRULE:S,CONSUME:P,OPTION:j})=>F=>{const N=[];let R=!0,C;return T({GATE:()=>R,DEF:()=>{R=!1;const M=S(v);A(()=>{N.push(...M)}),j(()=>{C=P(a.symbols.dot),R=!0})}}),A(()=>F.astFactory.patternBgp(N,F.astFactory.sourceLocation(...N,C)))}}t.triplesBlock={name:"triplesBlock",impl:v=>A=>u(t.triplesSameSubjectPath)(v)(A),gImpl:({SUBRULE:v,PRINT_WORD:A,HANDLE_LOC:T,NEW_LINE:S})=>(P,{astFactory:j})=>{for(const[F,N]of P.triples.entries())T(N,()=>{const R=P.triples.at(F+1);j.isTripleCollection(N)?(v(t.graphNodePath,N),(R==null?void 0:R.type)==="triple"&&j.isSourceLocationNoMaterialize(R.subject.loc)||j.printFilter(N,()=>{A("."),S()})):(v(t.graphNodePath,N.subject),j.printFilter(N,()=>A("")),j.isTerm(N.predicate)&&j.isTermVariable(N.predicate)?v(o.varOrTerm,N.predicate):v(c.pathGenerator,N.predicate,void 0),j.printFilter(N,()=>A("")),v(t.graphNodePath,N.object),R===void 0||j.isTripleCollection(R)||!j.isSourceLocationNoMaterialize(R.subject.loc)?j.printFilter(P,()=>{A("."),S()}):j.isSourceLocationNoMaterialize(R.predicate.loc)?j.printFilter(P,()=>A(",")):j.printFilter(P,()=>{A(";"),S()}))})}};function l(v,A){return{name:v,impl:({ACTION:T,SUBRULE:S,OR:P})=>j=>P([{ALT:()=>{const F=S(o.varOrTerm),N=S(A?t.propertyListPathNotEmpty:t.propertyListNotEmpty,T(()=>j.astFactory.dematerialized(F)));return T(()=>(N.length>0&&(N[0].subject=F,N[0].loc=j.astFactory.sourceLocation(F,N[0])),N))}},{ALT:()=>{const F=S(A?t.triplesNodePath:t.triplesNode),N=S(A?t.propertyListPath:t.propertyList,T(()=>j.astFactory.graphNodeIdentifier(F)));return T(()=>N.length===0?[F]:(N[0].subject=F,N[0].loc=j.astFactory.sourceLocation(F,N[0]),N))}}])}}t.triplesSameSubject=l("triplesSameSubject",!1),t.triplesSameSubjectPath=l("triplesSameSubjectPath",!0),t.triplesTemplate={name:"triplesTemplate",impl:u(t.triplesSameSubject)};function d(v,A){return{name:v,impl:({SUBRULE:T,OPTION:S})=>(P,j)=>S(()=>T(A?t.propertyListPathNotEmpty:t.propertyListNotEmpty,j))??[]}}t.propertyList=d("propertyList",!1),t.propertyListPath=d("propertyListPath",!0);function f(v,A){return{name:v,impl:({ACTION:T,CONSUME:S,AT_LEAST_ONE:P,SUBRULE1:j,MANY2:F,OR1:N})=>(R,C)=>{const M=[];let U=!0;return P({GATE:()=>U,DEF:()=>{U=!1;const B=A?N([{ALT:()=>j(t.verbPath)},{ALT:()=>j(t.verbSimple)}]):j(o.verb),G=j(A?t.objectListPath:t.objectList,C,B);F(()=>{S(a.symbols.semi),U=!0}),T(()=>{M.push(...G)})}}),M}}}t.propertyListNotEmpty=f("propertyListNotEmpty",!1),t.propertyListPathNotEmpty=f("propertyListPathNotEmpty",!0),t.verbPath={name:"verbPath",impl:({SUBRULE:v})=>()=>v(c.path)},t.verbSimple={name:"verbSimple",impl:({SUBRULE:v})=>()=>v(o.var_)};function h(v,A){return{name:v,impl:({ACTION:T,SUBRULE:S,AT_LEAST_ONE_SEP:P})=>(j,F,N)=>{const R=[];return P({SEP:a.symbols.comma,DEF:()=>{const C=S(A?t.objectPath:t.object,F,N);T(()=>{R.push(C)})}}),R}}}t.objectList=h("objectList",!1),t.objectListPath=h("objectListPath",!0);function p(v,A){return{name:v,impl:({ACTION:T,SUBRULE:S})=>(P,j,F)=>{const N=S(A?t.graphNodePath:t.graphNode);return T(()=>P.astFactory.triple(j,F,N))}}}t.object=p("object",!1),t.objectPath=p("objectPath",!0);function _(v,A){return{name:v,impl:({ACTION:T,AT_LEAST_ONE:S,SUBRULE:P,CONSUME:j})=>F=>{const N=[],R=j(a.symbols.LParen);S(()=>{N.push(P(A?t.graphNodePath:t.graphNode))});const C=j(a.symbols.RParen);return T(()=>{const M=F.astFactory,U=[],B=M.termNamed(M.sourceLocation(),s.CommonIRIs.FIRST,void 0),G=M.termNamed(M.sourceLocation(),s.CommonIRIs.REST,void 0),K=M.termNamed(M.sourceLocation(),s.CommonIRIs.NIL,void 0),$=M.termBlank(void 0,M.sourceLocation());let se=$;for(const[pe,we]of N.entries()){const Ce=pe===N.length-1,Le=M.triple(se,B,we);if(U.push(Le),Ce){const Ie=M.triple(se,G,K);U.push(Ie)}else{const Ie=M.termBlank(void 0,M.sourceLocation()),Oe=M.triple(se,G,Ie);U.push(Oe),se=Ie}}return M.tripleCollectionList($,U,M.sourceLocation(R,C))})},gImpl:({SUBRULE:T,PRINT_WORD:S})=>(P,{astFactory:j})=>{j.printFilter(P,()=>S("("));for(const[F,N]of P.triples.entries())F%2===0&&T(A?t.graphNodePath:t.graphNode,N.object);j.printFilter(P,()=>S(")"))}}}t.collection=_("collection",!1),t.collectionPath=_("collectionPath",!0);function g(v,A){return{name:v,impl:({SUBRULE:T,OR:S})=>()=>S([{ALT:()=>T(A?t.collectionPath:t.collection)},{ALT:()=>T(A?t.blankNodePropertyListPath:t.blankNodePropertyList)}]),gImpl:({SUBRULE:T})=>S=>S.subType==="list"?T(A?t.collectionPath:t.collection,S):T(A?t.blankNodePropertyListPath:t.blankNodePropertyList,S)}}t.triplesNode=g("triplesNode",!1),t.triplesNodePath=g("triplesNodePath",!0);function m(v,A){const T=A?t.propertyListPathNotEmpty:t.propertyListNotEmpty;return{name:v,impl:({ACTION:S,SUBRULE:P,CONSUME:j})=>F=>{const N=j(a.symbols.LSquare),R=S(()=>F.astFactory.termBlank(void 0,F.astFactory.sourceLocation())),C=P(T,R),M=j(a.symbols.RSquare);return S(()=>F.astFactory.tripleCollectionBlankNodeProperties(R,C,F.astFactory.sourceLocation(N,M)))},gImpl:({SUBRULE:S,PRINT:P,PRINT_WORD:j,HANDLE_LOC:F,PRINT_ON_EMPTY:N,NEW_LINE:R})=>(C,M)=>{const{astFactory:U,indentInc:B}=M;U.printFilter(C,()=>{M[i.traqulaIndentation]+=B,P("["),R()});for(const G of C.triples)F(G,()=>{U.isTerm(G.predicate)&&U.isTermVariable(G.predicate)?S(o.varOrTerm,G.predicate):S(c.pathGenerator,G.predicate,void 0),U.printFilter(G,()=>j("")),S(t.graphNodePath,G.object),U.printFilter(C,()=>{j(";"),R()})});U.printFilter(C,()=>{M[i.traqulaIndentation]-=B,N("]")})}}}t.blankNodePropertyList=m("blankNodePropertyList",!1),t.blankNodePropertyListPath=m("blankNodePropertyListPath",!0);function y(v,A){const T=A?t.triplesNodePath:t.triplesNode;return{name:v,impl:({SUBRULE:S,OR:P})=>j=>P([{ALT:()=>S(o.varOrTerm)},{GATE:()=>j.parseMode.has("canCreateBlankNodes"),ALT:()=>S(T)}]),gImpl:({SUBRULE:S})=>(P,{astFactory:j})=>{j.isTerm(P)?S(o.varOrTerm,P):S(T,P)}}}t.graphNode=y("graphNode",!1),t.graphNodePath=y("graphNodePath",!0)}(hj)),hj}var ste;function mO(){return ste||(ste=1,function(t){var e=E&&E.__createBinding||(Object.create?function(h,p,_,g){g===void 0&&(g=_);var m=Object.getOwnPropertyDescriptor(p,_);(!m||("get"in m?!p.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return p[_]}}),Object.defineProperty(h,g,m)}:function(h,p,_,g){g===void 0&&(g=_),h[g]=p[_]}),r=E&&E.__setModuleDefault||(Object.create?function(h,p){Object.defineProperty(h,"default",{enumerable:!0,value:p})}:function(h,p){h.default=p}),n=E&&E.__importStar||function(){var h=function(p){return h=Object.getOwnPropertyNames||function(_){var g=[];for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(g[g.length]=m);return g},h(p)};return function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var g=h(p),m=0;m<g.length;m++)g[m]!=="default"&&e(_,p,g[m]);return r(_,p),_}}();Object.defineProperty(t,"__esModule",{value:!0}),t.functionCall=t.constraint=t.filter=t.groupOrUnionGraphPattern=t.minusGraphPattern=t.dataBlockValue=t.inlineDataFull=t.inlineDataOneVar=t.dataBlock=t.inlineData=t.bind=t.serviceGraphPattern=t.graphGraphPattern=t.optionalGraphPattern=t.graphPatternNotTriples=t.groupGraphPatternSub=t.generatePattern=t.groupGraphPattern=t.whereClause=void 0;const i=_r(),a=n(ya()),s=_O(),o=zF(),c=gO(),u=Ol(),l=ql(),d=hG(),f=QF();t.whereClause={name:"whereClause",impl:({ACTION:h,SUBRULE:p,CONSUME:_,OPTION:g})=>m=>{const y=g(()=>_(a.where)),v=p(t.groupGraphPattern);return h(()=>m.astFactory.wrap(v,m.astFactory.sourceLocation(y,v)))},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>p("WHERE")),h(t.groupGraphPattern,_.val)}},t.groupGraphPattern={name:"groupGraphPattern",impl:({ACTION:h,SUBRULE:p,CONSUME:_,OR:g})=>m=>{const y=_(a.symbols.LCurly),v=g([{ALT:()=>[p(d.subSelect)]},{ALT:()=>p(t.groupGraphPatternSub)}]),A=_(a.symbols.RCurly);return h(()=>m.astFactory.patternGroup(v,m.astFactory.sourceLocation(y,A)))},gImpl:({SUBRULE:h,PRINT_WORD:p,NEW_LINE:_,PRINT_ON_OWN_LINE:g})=>(m,y)=>{const{astFactory:v,indentInc:A}=y;v.printFilter(m,()=>{y[i.traqulaIndentation]+=A,p("{"),_()});for(const T of m.patterns)h(t.generatePattern,T);v.printFilter(m,()=>{y[i.traqulaIndentation]-=A,g("}")})}},t.generatePattern={name:"generatePattern",gImpl:({SUBRULE:h})=>(p,{astFactory:_})=>{p.type==="query"?h(d.query,_.querySelect({context:[],datasets:_.datasetClauses([],_.sourceLocation()),where:p.where,variables:p.variables,solutionModifiers:p.solutionModifiers,values:p.values,distinct:p.distinct,reduced:p.reduced},p.loc)):p.subType==="group"?h(t.groupGraphPattern,p):p.subType==="bgp"?h(f.triplesBlock,p):h(t.graphPatternNotTriples,p)}},t.groupGraphPatternSub={name:"groupGraphPatternSub",impl:({ACTION:h,SUBRULE:p,CONSUME:_,MANY:g,SUBRULE1:m,SUBRULE2:y,OPTION1:v,OPTION2:A,OPTION3:T})=>S=>{const P=[],j=v(()=>m(f.triplesBlock));return j&&P.push(j),g(()=>{const F=p(t.graphPatternNotTriples);P.push(F),A(()=>_(a.symbols.dot));const N=T(()=>y(f.triplesBlock));N&&P.push(N)}),h(()=>!S.skipValidation&&(0,s.checkNote13)(P)),P}},t.graphPatternNotTriples={name:"graphPatternNotTriples",impl:({SUBRULE:h,OR:p})=>()=>p([{ALT:()=>h(t.groupOrUnionGraphPattern)},{ALT:()=>h(t.optionalGraphPattern)},{ALT:()=>h(t.minusGraphPattern)},{ALT:()=>h(t.graphGraphPattern)},{ALT:()=>h(t.serviceGraphPattern)},{ALT:()=>h(t.filter)},{ALT:()=>h(t.bind)},{ALT:()=>h(t.inlineData)}]),gImpl:({SUBRULE:h})=>p=>{switch(p.subType){case"group":case"union":h(t.groupOrUnionGraphPattern,p);break;case"optional":h(t.optionalGraphPattern,p);break;case"minus":h(t.minusGraphPattern,p);break;case"graph":h(t.graphGraphPattern,p);break;case"service":h(t.serviceGraphPattern,p);break;case"filter":h(t.filter,p);break;case"bind":h(t.bind,p);break;case"values":h(t.inlineData,p);break}}},t.optionalGraphPattern={name:"optionalGraphPattern",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(a.optional),y=p(t.groupGraphPattern);return h(()=>g.astFactory.patternOptional(y.patterns,g.astFactory.sourceLocation(m,y)))},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>p("OPTIONAL")),h(t.groupGraphPattern,g.patternGroup(_.patterns,_.loc))}},t.graphGraphPattern={name:"graphGraphPattern",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(a.graph.graph),y=p(u.varOrIri),v=p(t.groupGraphPattern);return h(()=>g.astFactory.patternGraph(y,v.patterns,g.astFactory.sourceLocation(m,v)))},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>p("GRAPH")),h(u.varOrTerm,_.name),h(t.groupGraphPattern,g.patternGroup(_.patterns,_.loc))}},t.serviceGraphPattern={name:"serviceGraphPattern",impl:({ACTION:h,SUBRULE1:p,CONSUME:_,OPTION:g})=>m=>{const y=_(a.service),v=g(()=>(_(a.silent),!0))??!1,A=p(u.varOrIri),T=p(t.groupGraphPattern);return h(()=>m.astFactory.patternService(A,T.patterns,v,m.astFactory.sourceLocation(y,T)))},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>{p("SERVICE"),_.silent&&p("SILENT")}),h(u.varOrTerm,_.name),h(t.groupGraphPattern,g.patternGroup(_.patterns,_.loc))}},t.bind={name:"bind",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(a.bind);_(a.symbols.LParen);const y=p(c.expression);_(a.as);const v=p(u.var_),A=_(a.symbols.RParen);return h(()=>g.astFactory.patternBind(y,v,g.astFactory.sourceLocation(m,A)))},gImpl:({SUBRULE:h,PRINT_WORD:p,NEW_LINE:_})=>(g,{astFactory:m})=>{m.printFilter(g,()=>p("BIND","(")),h(c.expression,g.expression),m.printFilter(g,()=>p("AS")),h(u.var_,g.variable),m.printFilter(g,()=>{p(")"),_()})}},t.inlineData={name:"inlineData",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(a.values),y=p(t.dataBlock);return h(()=>(y.loc=g.astFactory.sourceLocation(m,y),y))},gImpl:({SUBRULE:h,PRINT_WORD:p,PRINT_ON_EMPTY:_,NEW_LINE:g,PRINT_ON_OWN_LINE:m})=>(y,v)=>{const{astFactory:A,indentInc:T}=v,S=y.variables,P=S.length===1;A.printFilter(y,()=>{_("VALUES",P?"":"( ")});for(const j of S)A.printFilter(y,()=>p("")),h(u.varOrTerm,j),A.printFilter(y,()=>p(""));A.printFilter(y,()=>{v[i.traqulaIndentation]+=T,p(P?"":")","{"),g()});for(const j of y.values){A.printFilter(y,()=>!P&&p("("));for(const F of S){const N=F.value;j[N]===void 0?A.printFilter(y,()=>p("UNDEF")):h(f.graphNodePath,j[N])}A.printFilter(y,()=>{p(P?"":")"),g()})}A.printFilter(y,()=>{v[i.traqulaIndentation]-=T,m("}")})}},t.dataBlock={name:"dataBlock",impl:({SUBRULE:h,OR:p})=>()=>p([{ALT:()=>h(t.inlineDataOneVar)},{ALT:()=>h(t.inlineDataFull)}])},t.inlineDataOneVar={name:"inlineDataOneVar",impl:({ACTION:h,SUBRULE:p,CONSUME:_,MANY:g})=>m=>{const y=[],v=p(u.var_);_(a.symbols.LCurly),g(()=>{const T=p(t.dataBlockValue);h(()=>{y.push({[v.value]:T})})});const A=_(a.symbols.RCurly);return h(()=>m.astFactory.patternValues([v],y,m.astFactory.sourceLocation(v,A)))}},t.inlineDataFull={name:"inlineDataFull",impl:({ACTION:h,OR:p,MANY1:_,MANY2:g,MANY3:m,MANY4:y,SUBRULE:v,CONSUME1:A,CONSUME2:T})=>S=>{const P=[],j=[];return p([{ALT:()=>{const F=A(a.terminals.nil);A(a.symbols.LCurly),_(()=>{T(a.terminals.nil),P.push({})});const N=A(a.symbols.RCurly);return h(()=>S.astFactory.patternValues(j,P,S.astFactory.sourceLocation(F,N)))}},{ALT:()=>{const F=A(a.symbols.LParen);g(()=>{j.push(v(u.var_))}),A(a.symbols.RParen),T(a.symbols.LCurly),m(()=>{let R=0;const C={};T(a.symbols.LParen),y(()=>{h(()=>{if(!S.skipValidation&&R>=j.length)throw new Error("Number of dataBlockValues does not match number of variables. Too much values.")});const M=v(t.dataBlockValue);h(()=>{C[j[R].value]=M,R++})}),T(a.symbols.RParen),h(()=>{if(P.push(C),!S.skipValidation&&j.length!==R)throw new Error("Number of dataBlockValues does not match number of variables. Too few values.")})});const N=T(a.symbols.RCurly);return h(()=>S.astFactory.patternValues(j,P,S.astFactory.sourceLocation(F,N)))}}])}},t.dataBlockValue={name:"dataBlockValue",impl:({SUBRULE:h,CONSUME:p,OR:_})=>()=>_([{ALT:()=>h(l.iri)},{ALT:()=>h(l.rdfLiteral)},{ALT:()=>h(l.numericLiteral)},{ALT:()=>h(l.booleanLiteral)},{ALT:()=>{p(a.undef)}}])},t.minusGraphPattern={name:"minusGraphPattern",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(a.minus),y=p(t.groupGraphPattern);return h(()=>g.astFactory.patternMinus(y.patterns,g.astFactory.sourceLocation(m,y)))},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>p("MINUS")),h(t.groupGraphPattern,g.patternGroup(_.patterns,_.loc))}},t.groupOrUnionGraphPattern={name:"groupOrUnionGraphPattern",impl:({ACTION:h,MANY:p,SUBRULE1:_,SUBRULE2:g,CONSUME:m})=>y=>{const v=[],A=_(t.groupGraphPattern);return v.push(A),p(()=>{m(a.union);const T=g(t.groupGraphPattern);v.push(T)}),h(()=>v.length===1?v[0]:y.astFactory.patternUnion(v,y.astFactory.sourceLocation(A,v.at(-1))))},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{if(g.isPatternUnion(_)){const[m,...y]=_.patterns;h(t.groupGraphPattern,m);for(const v of y)g.printFilter(_,()=>p("UNION")),h(t.groupGraphPattern,v)}else h(t.groupGraphPattern,_)}},t.filter={name:"filter",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(a.filter),y=p(t.constraint);return h(()=>g.astFactory.patternFilter(y,g.astFactory.sourceLocation(m,y)))},gImpl:({SUBRULE:h,PRINT_WORD:p,NEW_LINE:_})=>(g,{astFactory:m})=>{m.printFilter(g,()=>p("FILTER (")),h(c.expression,g.expression),m.printFilter(g,()=>{p(")"),_()})}},t.constraint={name:"constraint",impl:({SUBRULE:h,OR:p})=>()=>p([{ALT:()=>h(c.brackettedExpression)},{ALT:()=>h(o.builtInCall)},{ALT:()=>h(t.functionCall)}])},t.functionCall={name:"functionCall",impl:({ACTION:h,SUBRULE:p})=>_=>{const g=p(l.iri),m=p(c.argList);return h(()=>_.astFactory.expressionFunctionCall(g,m.val.args,m.val.distinct,_.astFactory.sourceLocation(g,m)))}}}(fj)),fj}var ote;function gO(){return ote||(ote=1,function(t){var e=E&&E.__createBinding||(Object.create?function(f,h,p,_){_===void 0&&(_=p);var g=Object.getOwnPropertyDescriptor(h,p);(!g||("get"in g?!h.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,_,g)}:function(f,h,p,_){_===void 0&&(_=p),f[_]=h[p]}),r=E&&E.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),n=E&&E.__importStar||function(){var f=function(h){return f=Object.getOwnPropertyNames||function(p){var _=[];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(_[_.length]=g);return _},f(h)};return function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var _=f(h),g=0;g<_.length;g++)_[g]!=="default"&&e(p,h,_[g]);return r(p,h),p}}();Object.defineProperty(t,"__esModule",{value:!0}),t.iriOrFunction=t.brackettedExpression=t.primaryExpression=t.unaryExpression=t.multiplicativeExpression=t.additiveExpression=t.numericExpression=t.relationalExpression=t.valueLogical=t.conditionalAndExpression=t.conditionalOrExpression=t.expression=t.expressionList=t.argList=void 0;const i=n(ya()),a=zF(),s=Ol(),o=ql(),c=mO();t.argList={name:"argList",impl:({ACTION:f,CONSUME:h,SUBRULE1:p,OPTION:_,OR:g,AT_LEAST_ONE_SEP:m})=>y=>g([{ALT:()=>{const v=h(i.terminals.nil);return f(()=>y.astFactory.wrap({args:[],distinct:!1},y.astFactory.sourceLocation(v)))}},{ALT:()=>{const v=[],A=h(i.symbols.LParen),T=_(()=>(h(i.distinct),!0))??!1;m({SEP:i.symbols.comma,DEF:()=>{const P=p(t.expression);v.push(P)}});const S=h(i.symbols.RParen);return f(()=>y.astFactory.wrap({args:v,distinct:T},y.astFactory.sourceLocation(A,S)))}}]),gImpl:({SUBRULE:f,PRINT_WORD:h})=>(p,{astFactory:_})=>{_.printFilter(p,()=>{h("("),p.val.distinct&&h("DISTINCT")});const[g,...m]=p.val.args;g&&f(t.expression,g);for(const y of m)_.printFilter(p,()=>h(",")),f(t.expression,y);_.printFilter(p,()=>h(")"))}},t.expressionList={name:"expressionList",impl:({ACTION:f,CONSUME:h,MANY:p,OR:_,SUBRULE1:g,SUBRULE2:m})=>y=>_([{ALT:()=>{const v=h(i.terminals.nil);return f(()=>y.astFactory.wrap([],y.astFactory.sourceLocation(v)))}},{ALT:()=>{const v=h(i.symbols.LParen),T=[g(t.expression)];p(()=>{h(i.symbols.comma);const P=m(t.expression);T.push(P)});const S=h(i.symbols.RParen);return f(()=>y.astFactory.wrap(T,y.astFactory.sourceLocation(v,S)))}}])};const u=new Set(["in","notin","||","&&","=","!=","<",">","<=",">=","+","-","*","/"]),l={"!":"",uplus:"+",uminus:"-"};t.expression={name:"expression",impl:({SUBRULE:f})=>()=>f(t.conditionalOrExpression),gImpl:({SUBRULE:f,PRINT_WORD:h})=>(p,{astFactory:_})=>{if(_.isTerm(p))f(s.varOrTerm,p);else if(_.isExpressionOperator(p))if(u.has(p.operator)){const[g,...m]=p.args;_.printFilter(p,()=>h("(")),f(t.expression,g),_.printFilter(p,()=>{p.operator==="notin"?h("NOT IN"):p.operator==="in"?h("IN"):h(p.operator.toUpperCase())}),m.length===1?f(t.expression,m[0]):f(t.argList,_.wrap({args:m,distinct:!1},p.loc)),_.printFilter(p,()=>h(")"))}else if(typeof l[p.operator]=="string"){const[g]=p.args;_.printFilter(p,()=>h(l[p.operator]||p.operator.toUpperCase())),f(t.expression,g)}else{_.printFilter(p,()=>h(p.operator.toUpperCase(),"("));const[g,...m]=p.args;g&&f(t.expression,g);for(const y of m)_.printFilter(p,()=>h(",")),f(t.expression,y);_.printFilter(p,()=>h(")"))}else if(_.isExpressionPatternOperation(p)){const g=p.args;_.printFilter(p,()=>h(p.operator==="exists"?"EXISTS":"NOT EXISTS")),f(c.groupGraphPattern,g)}else _.isExpressionFunctionCall(p)?f(t.iriOrFunction,p):_.isExpressionAggregate(p)&&f(a.aggregate,p)}};function d(f,h,p,_){let g=f();return _(()=>{const m=h();p(()=>{g=m(g)})}),g}t.conditionalOrExpression={name:"conditionalOrExpression",impl:({ACTION:f,MANY:h,CONSUME:p,SUBRULE1:_,SUBRULE2:g})=>m=>d(()=>_(t.conditionalAndExpression),()=>{p(i.symbols.logicOr);const y=g(t.conditionalAndExpression);return v=>f(()=>m.astFactory.expressionOperation("||",[v,y],m.astFactory.sourceLocation(v,y)))},f,h)},t.conditionalAndExpression={name:"conditionalAndExpression",impl:({ACTION:f,MANY:h,SUBRULE1:p,SUBRULE2:_,CONSUME:g})=>m=>d(()=>p(t.valueLogical),()=>{g(i.symbols.logicAnd);const y=_(t.valueLogical);return v=>f(()=>m.astFactory.expressionOperation("&&",[v,y],m.astFactory.sourceLocation(v,y)))},f,h)},t.valueLogical={name:"valueLogical",impl:({SUBRULE:f})=>()=>f(t.relationalExpression)},t.relationalExpression={name:"relationalExpression",impl:({ACTION:f,CONSUME:h,SUBRULE1:p,SUBRULE2:_,OPTION:g,OR1:m,OR2:y,OR3:v})=>A=>{const T=p(t.numericExpression);return g(()=>m([{ALT:()=>{const P=y([{ALT:()=>h(i.symbols.equal)},{ALT:()=>h(i.symbols.notEqual)},{ALT:()=>h(i.symbols.lessThan)},{ALT:()=>h(i.symbols.greaterThan)},{ALT:()=>h(i.symbols.lessThanEqual)},{ALT:()=>h(i.symbols.greaterThanEqual)}]),j=_(t.numericExpression);return f(()=>A.astFactory.expressionOperation(P.image,[T,j],A.astFactory.sourceLocation(T,j)))}},{ALT:()=>{const P=v([{ALT:()=>h(i.in_)},{ALT:()=>h(i.notIn)}]),j=p(t.expressionList);return f(()=>A.astFactory.expressionOperation(P.image,[T,...j.val],A.astFactory.sourceLocation(T,j)))}}]))??T}},t.numericExpression={name:"numericExpression",impl:({SUBRULE:f})=>()=>f(t.additiveExpression)},t.additiveExpression={name:"additiveExpression",impl:({ACTION:f,SUBRULE:h,CONSUME:p,SUBRULE1:_,SUBRULE2:g,MANY1:m,MANY2:y,OR1:v,OR2:A,OR3:T,OR4:S})=>P=>d(()=>_(t.multiplicativeExpression),()=>v([{ALT:()=>{const j=A([{ALT:()=>p(i.symbols.opPlus)},{ALT:()=>p(i.symbols.opMinus)}]),F=g(t.multiplicativeExpression);return f(()=>N=>P.astFactory.expressionOperation(j.image,[N,F],P.astFactory.sourceLocation(N,F)))}},{ALT:()=>{const{operator:j,startInt:F}=T([{ALT:()=>{const R=h(o.numericLiteralPositive);return f(()=>(R.value=R.value.replace(/^\+/u,""),{operator:"+",startInt:R}))}},{ALT:()=>{const R=h(o.numericLiteralNegative);return f(()=>(R.value=R.value.replace(/^-/u,""),{operator:"-",startInt:R}))}}]),N=d(()=>f(()=>F),()=>{const R=S([{ALT:()=>p(i.symbols.star)},{ALT:()=>p(i.symbols.slash)}]),C=_(t.unaryExpression);return f(()=>M=>P.astFactory.expressionOperation(R.image,[M,C],P.astFactory.sourceLocation(M,C)))},f,y);return R=>P.astFactory.expressionOperation(j,[R,N],P.astFactory.sourceLocation(R,N))}}]),f,m)},t.multiplicativeExpression={name:"multiplicativeExpression",impl:({ACTION:f,CONSUME:h,MANY:p,SUBRULE1:_,SUBRULE2:g,OR:m})=>y=>d(()=>_(t.unaryExpression),()=>{const v=m([{ALT:()=>h(i.symbols.star)},{ALT:()=>h(i.symbols.slash)}]),A=g(t.unaryExpression);return T=>({type:"expression",subType:"operation",operator:v.image,args:[T,A],loc:y.astFactory.sourceLocation(T,A)})},f,p)},t.unaryExpression={name:"unaryExpression",impl:({ACTION:f,CONSUME:h,SUBRULE1:p,SUBRULE2:_,OR1:g,OR2:m})=>y=>g([{ALT:()=>p(t.primaryExpression)},{ALT:()=>{const v=m([{ALT:()=>h(i.symbols.exclamation)},{ALT:()=>h(i.symbols.opPlus)},{ALT:()=>h(i.symbols.opMinus)}]),A=_(t.primaryExpression);return f(()=>y.astFactory.expressionOperation(v.image==="!"?"!":v.image==="+"?"UPLUS":"UMINUS",[A],y.astFactory.sourceLocation(v,A)))}}])},t.primaryExpression={name:"primaryExpression",impl:({SUBRULE:f,OR:h})=>()=>h([{ALT:()=>f(t.brackettedExpression)},{ALT:()=>f(a.builtInCall)},{ALT:()=>f(t.iriOrFunction)},{ALT:()=>f(o.rdfLiteral)},{ALT:()=>f(o.numericLiteral)},{ALT:()=>f(o.booleanLiteral)},{ALT:()=>f(s.var_)}])},t.brackettedExpression={name:"brackettedExpression",impl:({ACTION:f,SUBRULE:h,CONSUME:p})=>_=>{const g=p(i.symbols.LParen),m=h(t.expression),y=p(i.symbols.RParen);return f(()=>(m.loc=_.astFactory.sourceLocation(g,y),m))}},t.iriOrFunction={name:"iriOrFunction",impl:({ACTION:f,SUBRULE:h,OPTION:p})=>_=>{const g=h(o.iri);return p(()=>{const y=h(t.argList);return f(()=>{const v=y.val.distinct;if(!_.parseMode.has("canParseAggregate")&&v)throw new Error("DISTINCT implies that this function is an aggregated function, which is not allowed in this context.");return{type:"expression",subType:"functionCall",function:g,args:y.val.args,distinct:v,loc:_.astFactory.sourceLocation(g,y)}})})??g},gImpl:({SUBRULE:f})=>(h,{astFactory:p})=>{p.isTermNamed(h)?f(o.iri,h):(f(o.iri,h.function),f(t.argList,p.wrap({args:h.args,distinct:h.distinct},h.loc)))}}}(lj)),lj}var _j={},ute;function BIe(){return ute||(ute=1,function(t){var e=E&&E.__createBinding||(Object.create?function(u,l,d,f){f===void 0&&(f=d);var h=Object.getOwnPropertyDescriptor(l,d);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(u,f,h)}:function(u,l,d,f){f===void 0&&(f=d),u[f]=l[d]}),r=E&&E.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=E&&E.__importStar||function(){var u=function(l){return u=Object.getOwnPropertyNames||function(d){var f=[];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(f[f.length]=h);return f},u(l)};return function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var f=u(l),h=0;h<f.length;h++)f[h]!=="default"&&e(d,l,f[h]);return r(d,l),d}}();Object.defineProperty(t,"__esModule",{value:!0}),t.offsetClause=t.limitClause=t.limitOffsetClauses=t.orderCondition=t.orderClause=t.havingCondition=t.havingClause=t.groupCondition=t.groupClause=t.solutionModifier=void 0;const i=n(ya()),a=zF(),s=gO(),o=Ol(),c=mO();t.solutionModifier={name:"solutionModifier",impl:({ACTION:u,SUBRULE:l,OPTION1:d,OPTION2:f,OPTION3:h,OPTION4:p})=>()=>{const _=d(()=>l(t.groupClause)),g=f(()=>l(t.havingClause)),m=h(()=>l(t.orderClause)),y=p(()=>l(t.limitOffsetClauses));return u(()=>({...y&&{limitOffset:y},..._&&{group:_},...g&&{having:g},...m&&{order:m}}))},gImpl:({SUBRULE:u})=>l=>{l.group&&u(t.groupClause,l.group),l.having&&u(t.havingClause,l.having),l.order&&u(t.orderClause,l.order),l.limitOffset&&u(t.limitOffsetClauses,l.limitOffset)}},t.groupClause={name:"groupClause",impl:({ACTION:u,AT_LEAST_ONE:l,SUBRULE1:d,CONSUME:f})=>h=>{const p=[],_=f(i.groupByGroup);return f(i.by),l(()=>{p.push(d(t.groupCondition))}),u(()=>({type:"solutionModifier",subType:"group",groupings:p,loc:h.astFactory.sourceLocation(_,p.at(-1))}))},gImpl:({PRINT_WORDS:u,SUBRULE:l,PRINT_ON_EMPTY:d})=>(f,{astFactory:h})=>{h.printFilter(f,()=>{d("GROUP BY ")});for(const p of f.groupings)h.isExpression(p)?l(s.expression,p):(h.printFilter(f,()=>u("(")),l(s.expression,p.value),h.printFilter(f,()=>u("AS")),l(o.var_,p.variable),h.printFilter(f,()=>u(")")))}},t.groupCondition={name:"groupCondition",impl:({ACTION:u,SUBRULE:l,CONSUME:d,SUBRULE1:f,SUBRULE2:h,OPTION:p,OR:_})=>g=>_([{ALT:()=>l(a.builtInCall)},{ALT:()=>l(c.functionCall)},{ALT:()=>h(o.var_)},{ALT:()=>{const m=d(i.symbols.LParen),y=l(s.expression),v=p(()=>(d(i.as),f(o.var_))),A=d(i.symbols.RParen);return u(()=>v!==void 0?{variable:v,value:y,loc:g.astFactory.sourceLocation(m,A)}:y)}}])},t.havingClause={name:"havingClause",impl:({ACTION:u,AT_LEAST_ONE:l,SUBRULE:d,CONSUME:f})=>h=>{const p=f(i.having),_=[],g=u(()=>h.parseMode.has("canParseAggregate")||!h.parseMode.add("canParseAggregate"));return l(()=>{_.push(d(t.havingCondition))}),u(()=>!g&&h.parseMode.delete("canParseAggregate")),u(()=>h.astFactory.solutionModifierHaving(_,h.astFactory.sourceLocation(p,_.at(-1))))},gImpl:({PRINT_ON_EMPTY:u,SUBRULE:l})=>(d,{astFactory:f})=>{f.printFilter(d,()=>{u("HAVING ")});for(const h of d.having)l(s.expression,h)}},t.havingCondition={name:"havingCondition",impl:({SUBRULE:u})=>()=>u(c.constraint)},t.orderClause={name:"orderClause",impl:({ACTION:u,AT_LEAST_ONE:l,SUBRULE1:d,CONSUME:f})=>h=>{const p=f(i.order);f(i.by);const _=[],g=u(()=>h.parseMode.has("canParseAggregate")||!h.parseMode.add("canParseAggregate"));return l(()=>{_.push(d(t.orderCondition))}),u(()=>!g&&h.parseMode.delete("canParseAggregate")),u(()=>h.astFactory.solutionModifierOrder(_,h.astFactory.sourceLocation(p,_.at(-1))))},gImpl:({PRINT_WORDS:u,PRINT_ON_EMPTY:l,SUBRULE:d})=>(f,{astFactory:h})=>{h.printFilter(f,()=>{l("ORDER BY ")});for(const p of f.orderDefs)p.descending?h.printFilter(f,()=>u("DESC")):h.printFilter(f,()=>u("ASC")),h.printFilter(f,()=>u("(")),d(s.expression,p.expression),h.printFilter(f,()=>u(")"))}},t.orderCondition={name:"orderCondition",impl:({ACTION:u,SUBRULE:l,CONSUME:d,OR1:f,OR2:h})=>p=>f([{ALT:()=>{const _=h([{ALT:()=>[!1,d(i.orderAsc)]},{ALT:()=>[!0,d(i.orderDesc)]}]),g=l(s.brackettedExpression);return u(()=>({expression:g,descending:_[0],loc:p.astFactory.sourceLocation(_[1],g)}))}},{ALT:()=>{const _=l(c.constraint);return u(()=>({expression:_,descending:!1,loc:_.loc}))}},{ALT:()=>{const _=l(o.var_);return u(()=>({expression:_,descending:!1,loc:_.loc}))}}])},t.limitOffsetClauses={name:"limitOffsetClauses",impl:({ACTION:u,SUBRULE1:l,SUBRULE2:d,OPTION1:f,OPTION2:h,OR:p})=>_=>p([{ALT:()=>{const g=l(t.limitClause),m=f(()=>l(t.offsetClause));return u(()=>_.astFactory.solutionModifierLimitOffset(g.val,m==null?void 0:m.val,_.astFactory.sourceLocation(g,...m?[m]:[])))}},{ALT:()=>{const g=d(t.offsetClause),m=h(()=>d(t.limitClause));return u(()=>_.astFactory.solutionModifierLimitOffset(m==null?void 0:m.val,g.val,_.astFactory.sourceLocation(g,m)))}}]),gImpl:({PRINT_WORDS:u,NEW_LINE:l})=>(d,{astFactory:f})=>{f.printFilter(d,()=>{l(),d.limit&&u("LIMIT",String(d.limit)),d.offset&&u("OFFSET",String(d.offset))})}},t.limitClause={name:"limitClause",impl:({ACTION:u,CONSUME:l})=>d=>{const f=l(i.limit),h=l(i.terminals.integer),p=Number.parseInt(h.image,10);return u(()=>d.astFactory.wrap(p,d.astFactory.sourceLocation(f,h)))}},t.offsetClause={name:"offsetClause",impl:({CONSUME:u,ACTION:l})=>d=>{const f=u(i.offset),h=u(i.terminals.integer),p=Number.parseInt(h.image,10);return l(()=>d.astFactory.wrap(p,d.astFactory.sourceLocation(f,h)))}}}(_j)),_j}var cte;function hG(){return cte||(cte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(h,p,_,g){g===void 0&&(g=_);var m=Object.getOwnPropertyDescriptor(p,_);(!m||("get"in m?!p.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return p[_]}}),Object.defineProperty(h,g,m)}:function(h,p,_,g){g===void 0&&(g=_),h[g]=p[_]}),r=E&&E.__setModuleDefault||(Object.create?function(h,p){Object.defineProperty(h,"default",{enumerable:!0,value:p})}:function(h,p){h.default=p}),n=E&&E.__importStar||function(){var h=function(p){return h=Object.getOwnPropertyNames||function(_){var g=[];for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(g[g.length]=m);return g},h(p)};return function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var g=h(p),m=0;m<g.length;m++)g[m]!=="default"&&e(_,p,g[m]);return r(_,p),_}}();Object.defineProperty(t,"__esModule",{value:!0}),t.constructTriples=t.constructTemplate=t.valuesClause=t.askQuery=t.describeQuery=t.constructQuery=t.selectClause=t.subSelect=t.selectQuery=t.query=t.queryUnit=void 0;const i=_r(),a=n(ya()),s=_O(),o=vz(),c=gO(),u=Ol(),l=BIe(),d=QF(),f=mO();t.queryUnit={name:"queryUnit",impl:({SUBRULE:h})=>()=>h(t.query)},t.query={name:"query",impl:({ACTION:h,SUBRULE:p,OR:_})=>g=>{const m=p(u.prologue),y=_([{ALT:()=>p(t.selectQuery)},{ALT:()=>p(t.constructQuery)},{ALT:()=>p(t.describeQuery)},{ALT:()=>p(t.askQuery)}]),v=p(t.valuesClause);return h(()=>({context:m,...y,type:"query",...v&&{values:v},loc:g.astFactory.sourceLocation(m.at(0),y,v)}))},gImpl:({SUBRULE:h})=>(p,{astFactory:_})=>{h(u.prologue,p.context),_.isQuerySelect(p)?h(t.selectQuery,p):_.isQueryConstruct(p)?h(t.constructQuery,p):_.isQueryDescribe(p)?h(t.describeQuery,p):_.isQueryAsk(p)&&h(t.askQuery,p),p.values&&h(f.inlineData,p.values)}},t.selectQuery={name:"selectQuery",impl:({ACTION:h,SUBRULE:p})=>_=>{const g=p(t.selectClause),m=p(o.datasetClauseStar),y=p(f.whereClause),v=p(l.solutionModifier);return h(()=>{const A={subType:"select",where:y.val,solutionModifiers:v,datasets:m,...g.val,loc:_.astFactory.sourceLocation(g,y,v.group,v.having,v.order,v.limitOffset)};return _.skipValidation||(0,s.queryProjectionIsGood)(A),A})},gImpl:({SUBRULE:h})=>(p,{astFactory:_})=>{h(t.selectClause,_.wrap({variables:p.variables,distinct:p.distinct,reduced:p.reduced},_.sourceLocation(...p.variables))),h(o.datasetClauseStar,p.datasets),h(f.whereClause,_.wrap(p.where,p.where.loc)),h(l.solutionModifier,p.solutionModifiers)}},t.subSelect={name:"subSelect",impl:({ACTION:h,SUBRULE:p})=>_=>{const g=p(t.selectClause),m=p(f.whereClause),y=p(l.solutionModifier),v=p(t.valuesClause);return h(()=>_.astFactory.querySelect({where:m.val,datasets:_.astFactory.datasetClauses([],_.astFactory.sourceLocation()),context:[],solutionModifiers:y,...g.val,...v&&{values:v}},_.astFactory.sourceLocation(g,m,y.group,y.having,y.order,y.limitOffset,v)))}},t.selectClause={name:"selectClause",impl:({ACTION:h,AT_LEAST_ONE:p,SUBRULE1:_,SUBRULE2:g,CONSUME:m,OPTION:y,OR1:v,OR2:A,OR3:T})=>S=>{const P=m(a.select),j=h(()=>S.parseMode.has("canParseAggregate")||!S.parseMode.add("canParseAggregate")),F=y(()=>v([{ALT:()=>(m(a.distinct),[!0,!1])},{ALT:()=>(m(a.reduced),[!1,!0])}]))??[!1,!1],N=h(()=>{const[M,U]=F;return{...M&&{distinct:M},...U&&{reduced:U}}});let R;const C=A([{ALT:()=>{const M=m(a.symbols.star);return h(()=>(R=M,{variables:[S.astFactory.wildcard(S.astFactory.sourceLocation(M))],...N}))}},{ALT:()=>{const M=[],U=[];return p(()=>T([{ALT:()=>{const B=_(u.var_);h(()=>{if(!S.skipValidation&&M.some(G=>G.value===B.value))throw new Error(`Variable ${B.value} used more than once in SELECT clause`);M.push(B),U.push(B),R=B})}},{ALT:()=>{const B=m(a.symbols.LParen),G=_(c.expression);m(a.as);const K=g(u.var_),$=m(a.symbols.RParen);h(()=>{if(R=$,!S.skipValidation&&M.some(se=>se.value===K.value))throw new Error(`Variable ${K.value} used more than once in SELECT clause`);M.push(K),U.push(S.astFactory.patternBind(G,K,S.astFactory.sourceLocation(B,R)))})}}])),{variables:U,...N}}}]);return h(()=>!j&&S.parseMode.delete("canParseAggregate")),h(()=>S.astFactory.wrap(C,S.astFactory.sourceLocation(P,R)))},gImpl:({SUBRULE:h,PRINT_WORD:p,PRINT_ON_EMPTY:_})=>(g,{astFactory:m})=>{m.printFilter(g,()=>{_("SELECT "),g.val.distinct?p("DISTINCT"):g.val.reduced&&p("REDUCED")});for(const y of g.val.variables)m.isWildcard(y)?m.printFilter(g,()=>p("*")):m.isTerm(y)?h(u.var_,y):(m.printFilter(g,()=>p("(")),h(c.expression,y.expression),m.printFilter(g,()=>p("AS")),h(u.var_,y.variable),m.printFilter(g,()=>p(")"))),m.printFilter(g,()=>p(""));m.printFilter(g,()=>p(""))}},t.constructQuery={name:"constructQuery",impl:({ACTION:h,SUBRULE1:p,SUBRULE2:_,CONSUME:g,OR:m})=>y=>{const v=g(a.construct);return m([{ALT:()=>{const A=p(t.constructTemplate),T=p(o.datasetClauseStar),S=p(f.whereClause),P=p(l.solutionModifier);return h(()=>({subType:"construct",template:A.val,datasets:T,where:S.val,solutionModifiers:P,loc:y.astFactory.sourceLocation(v,S,P.group,P.having,P.order,P.limitOffset)}))}},{ALT:()=>{const A=_(o.datasetClauseStar);g(a.where);const T=_(t.constructTemplate),S=_(l.solutionModifier);return h(()=>({subType:"construct",template:T.val,datasets:A,where:y.astFactory.patternGroup([T.val],y.astFactory.sourceLocation()),solutionModifiers:S,loc:y.astFactory.sourceLocation(v,T,S.group,S.having,S.order,S.limitOffset)}))}}])},gImpl:({SUBRULE:h,PRINT_WORD:p,PRINT_ON_EMPTY:_,PRINT_ON_OWN_LINE:g,NEW_LINE:m})=>(y,v)=>{const{astFactory:A,indentInc:T}=v;A.printFilter(y,()=>_("CONSTRUCT ")),A.isSourceLocationNoMaterialize(y.where.loc)||(A.printFilter(y,()=>{v[i.traqulaIndentation]+=T,p("{"),m()}),h(d.triplesBlock,y.template),A.printFilter(y,()=>{v[i.traqulaIndentation]-=T,g("}")})),h(o.datasetClauseStar,y.datasets),A.isSourceLocationNoMaterialize(y.where.loc)?h(f.whereClause,A.wrap(A.patternGroup([y.template],y.template.loc),y.template.loc)):h(f.whereClause,A.wrap(y.where,y.where.loc)),h(l.solutionModifier,y.solutionModifiers)}},t.describeQuery={name:"describeQuery",impl:({ACTION:h,AT_LEAST_ONE:p,SUBRULE1:_,CONSUME:g,OPTION:m,OR:y})=>v=>{const A=g(a.describe),T=y([{ALT:()=>{const F=[];return p(()=>{F.push(_(u.varOrIri))}),F}},{ALT:()=>{const F=g(a.symbols.star);return[h(()=>v.astFactory.wildcard(v.astFactory.sourceLocation(F)))]}}]),S=_(o.datasetClauseStar),P=m(()=>_(f.whereClause)),j=_(l.solutionModifier);return h(()=>({subType:"describe",variables:T,datasets:S,...P&&{where:P.val},solutionModifiers:j,loc:v.astFactory.sourceLocation(A,...T,S,P,j.group,j.having,j.order,j.limitOffset)}))},gImpl:({SUBRULE:h,PRINT_WORD:p,PRINT_ON_EMPTY:_})=>(g,{astFactory:m})=>{if(m.printFilter(g,()=>_("DESCRIBE ")),m.isWildcard(g.variables[0]))m.printFilter(g,()=>p("*"));else for(const y of g.variables)h(u.varOrTerm,y);h(o.datasetClauseStar,g.datasets),g.where&&h(f.whereClause,m.wrap(g.where,g.loc)),h(l.solutionModifier,g.solutionModifiers)}},t.askQuery={name:"askQuery",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(a.ask),y=p(o.datasetClauseStar),v=p(f.whereClause),A=p(l.solutionModifier);return h(()=>({subType:"ask",datasets:y,where:v.val,solutionModifiers:A,loc:g.astFactory.sourceLocation(m,y,v,A.group,A.having,A.order,A.limitOffset)}))},gImpl:({SUBRULE:h,PRINT_ON_EMPTY:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>p("ASK ")),h(o.datasetClauseStar,_.datasets),h(f.whereClause,g.wrap(_.where,_.loc)),h(l.solutionModifier,_.solutionModifiers)}},t.valuesClause={name:"valuesClause",impl:({OPTION:h,SUBRULE:p})=>()=>h(()=>p(f.inlineData))},t.constructTemplate={name:"constructTemplate",impl:({ACTION:h,SUBRULE1:p,CONSUME:_,OPTION:g})=>m=>{const y=_(a.symbols.LCurly),v=g(()=>p(t.constructTriples)),A=_(a.symbols.RCurly);return h(()=>m.astFactory.wrap(v??m.astFactory.patternBgp([],m.astFactory.sourceLocation()),m.astFactory.sourceLocation(y,A)))}},t.constructTriples={name:"constructTriples",impl:d.triplesTemplate.impl}}(uj)),uj}var mj={},lte;function dte(){return lte||(lte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(_,g,m,y){y===void 0&&(y=m);var v=Object.getOwnPropertyDescriptor(g,m);(!v||("get"in v?!g.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(_,y,v)}:function(_,g,m,y){y===void 0&&(y=m),_[y]=g[m]}),r=E&&E.__setModuleDefault||(Object.create?function(_,g){Object.defineProperty(_,"default",{enumerable:!0,value:g})}:function(_,g){_.default=g}),n=E&&E.__importStar||function(){var _=function(g){return _=Object.getOwnPropertyNames||function(m){var y=[];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(y[y.length]=v);return y},_(g)};return function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var y=_(g),v=0;v<y.length;v++)y[v]!=="default"&&e(m,g,y[v]);return r(m,g),m}}();Object.defineProperty(t,"__esModule",{value:!0}),t.quadsNotTriples=t.quads=t.graphRefAll=t.graphRef=t.graphOrDefault=t.insertClause=t.deleteClause=t.modify=t.deleteWhere=t.deleteData=t.insertData=t.quadData=t.quadPattern=t.copy=t.move=t.add=t.create=t.drop=t.clear=t.load=t.update1=t.update=t.updateUnit=void 0;const i=_r(),a=n(ya()),s=_O(),o=vz(),c=Ol(),u=ql(),l=QF(),d=mO();t.updateUnit={name:"updateUnit",impl:({SUBRULE:_})=>()=>_(t.update)},t.update={name:"update",impl:({ACTION:_,SUBRULE:g,SUBRULE1:m,SUBRULE2:y,CONSUME:v,OPTION1:A,MANY:T})=>S=>{const P=[],j=m(c.prologue);P.push({context:j});let F=!0;return T({GATE:()=>F,DEF:()=>{F=!1,P.at(-1).operation=g(t.update1),A(()=>{v(a.symbols.semi),F=!0;const N=y(c.prologue);P.push({context:N})})}}),_(()=>{const N={type:"update",updates:P,loc:S.astFactory.sourceLocation(...P.flatMap(R=>[...R.context,R.operation]))};return S.skipValidation||(0,s.updateNoReuseBlankNodeLabels)(N),N})},gImpl:({SUBRULE:_,PRINT:g,NEW_LINE:m})=>(y,{astFactory:v})=>{const[A,...T]=y.updates;A&&(_(c.prologue,A.context),A.operation&&_(t.update1,A.operation));for(const S of T)v.printFilter(y,()=>{g(";"),m()}),_(c.prologue,S.context),S.operation&&_(t.update1,S.operation)}},t.update1={name:"update1",impl:({SUBRULE:_,OR:g})=>()=>g([{ALT:()=>_(t.load)},{ALT:()=>_(t.clear)},{ALT:()=>_(t.drop)},{ALT:()=>_(t.add)},{ALT:()=>_(t.move)},{ALT:()=>_(t.copy)},{ALT:()=>_(t.create)},{ALT:()=>_(t.insertData)},{ALT:()=>_(t.deleteData)},{ALT:()=>_(t.deleteWhere)},{ALT:()=>_(t.modify)}]),gImpl:({SUBRULE:_})=>g=>{switch(g.subType){case"load":_(t.load,g);break;case"clear":_(t.clear,g);break;case"drop":_(t.drop,g);break;case"add":_(t.add,g);break;case"move":_(t.move,g);break;case"copy":_(t.copy,g);break;case"create":_(t.create,g);break;case"insertdata":_(t.insertData,g);break;case"deletedata":_(t.deleteData,g);break;case"deletewhere":_(t.deleteWhere,g);break;case"modify":_(t.modify,g);break}}},t.load={name:"load",impl:({ACTION:_,SUBRULE1:g,CONSUME:m,OPTION1:y,OPTION2:v})=>A=>{const T=m(a.load),S=y(()=>m(a.silent)),P=g(u.iri),j=v(()=>(m(a.loadInto),g(t.graphRef)));return _(()=>A.astFactory.updateOperationLoad(A.astFactory.sourceLocation(T,P,j),P,!!S,j))},gImpl:({SUBRULE:_,PRINT_WORD:g,PRINT_ON_EMPTY:m})=>(y,{astFactory:v})=>{v.printFilter(y,()=>{m("LOAD "),y.silent&&g("SILENT")}),_(u.iri,y.source),y.destination&&(v.printFilter(y,()=>g("INTO")),_(t.graphRefAll,y.destination))}};function f(_){return{name:(0,i.unCapitalize)(_.name),impl:({ACTION:g,SUBRULE1:m,CONSUME:y,OPTION:v})=>A=>{const T=y(_),S=v(()=>y(a.silent)),P=m(t.graphRefAll);return g(()=>A.astFactory.updateOperationClearDrop((0,i.unCapitalize)(_.name),!!S,P,A.astFactory.sourceLocation(T,P)))},gImpl:({SUBRULE:g,PRINT_WORD:m,PRINT_ON_EMPTY:y})=>(v,{astFactory:A})=>{A.printFilter(v,()=>{y(_.name.toUpperCase()," "),v.silent&&m("SILENT")}),g(t.graphRefAll,v.destination)}}}t.clear=f(a.clear),t.drop=f(a.drop),t.create={name:"create",impl:({ACTION:_,SUBRULE1:g,CONSUME:m,OPTION:y})=>v=>{const A=m(a.create),T=y(()=>m(a.silent)),S=g(t.graphRef);return _(()=>v.astFactory.updateOperationCreate(S,!!T,v.astFactory.sourceLocation(A,S)))},gImpl:({SUBRULE:_,PRINT_WORD:g,PRINT_ON_EMPTY:m})=>(y,{astFactory:v})=>{v.printFilter(y,()=>{m("CREATE "),y.silent&&g("SILENT")}),_(t.graphRefAll,y.destination)}};function h(_){return{name:(0,i.unCapitalize)(_.name),impl:({ACTION:g,CONSUME:m,SUBRULE1:y,SUBRULE2:v,OPTION:A})=>T=>{const S=m(_),P=A(()=>m(a.silent)),j=y(t.graphOrDefault);m(a.to);const F=v(t.graphOrDefault);return g(()=>T.astFactory.updateOperationAddMoveCopy((0,i.unCapitalize)(_.name),j,F,!!P,T.astFactory.sourceLocation(S,F)))},gImpl:({SUBRULE:g,PRINT_WORD:m,PRINT_ON_EMPTY:y})=>(v,{astFactory:A})=>{A.printFilter(v,()=>{y(_.name.toUpperCase()," "),v.silent&&m("SILENT")}),g(t.graphRefAll,v.source),A.printFilter(v,()=>m("TO")),g(t.graphRefAll,v.destination)}}}t.add=h(a.add),t.move=h(a.move),t.copy=h(a.copy),t.quadPattern={name:"quadPattern",impl:({ACTION:_,SUBRULE1:g,CONSUME:m})=>y=>{const v=m(a.symbols.LCurly),A=g(t.quads),T=m(a.symbols.RCurly);return _(()=>y.astFactory.wrap(A.val,y.astFactory.sourceLocation(v,T)))}},t.quadData={name:"quadData",impl:({ACTION:_,SUBRULE1:g,CONSUME:m})=>y=>{const v=m(a.symbols.LCurly),A=_(()=>y.parseMode.delete("canParseVars")),T=g(t.quads);_(()=>A&&y.parseMode.add("canParseVars"));const S=m(a.symbols.RCurly);return _(()=>y.astFactory.wrap(T.val,y.astFactory.sourceLocation(v,S)))}};function p(_,g,m,y){return{name:_,impl:({ACTION:v,SUBRULE1:A,CONSUME:T})=>S=>{const P=T(m);let j=!0;_!=="insertData"&&(j=v(()=>S.parseMode.delete("canCreateBlankNodes")));const F=A(y);return _!=="insertData"&&v(()=>j&&S.parseMode.add("canCreateBlankNodes")),v(()=>S.astFactory.updateOperationInsDelDataWhere(g,F.val,S.astFactory.sourceLocation(P,F)))},gImpl:({SUBRULE:v,PRINT_WORD:A,PRINT_ON_EMPTY:T,PRINT_ON_OWN_LINE:S,NEW_LINE:P})=>(j,F)=>{const{astFactory:N,indentInc:R}=F;N.printFilter(j,()=>{g==="insertdata"?T("INSERT DATA "):g==="deletedata"?T("DELETE DATA "):g==="deletewhere"&&T("DELETE WHERE "),F[i.traqulaIndentation]+=R,A("{"),P()}),v(t.quads,N.wrap(j.data,j.loc)),N.printFilter(j,()=>{F[i.traqulaIndentation]-=R,S("}")})}}}t.insertData=p("insertData","insertdata",a.insertDataClause,t.quadData),t.deleteData=p("deleteData","deletedata",a.deleteDataClause,t.quadData),t.deleteWhere=p("deleteWhere","deletewhere",a.deleteWhereClause,t.quadPattern),t.modify={name:"modify",impl:({ACTION:_,CONSUME:g,SUBRULE1:m,SUBRULE2:y,OPTION1:v,OPTION2:A,OR:T})=>S=>{const P=v(()=>{const C=g(a.modifyWith),M=m(u.iri);return{withToken:C,graph:M}}),{insert:j,del:F}=T([{ALT:()=>{const C=m(t.deleteClause),M=A(()=>m(t.insertClause));return{del:C,insert:M}}},{ALT:()=>({insert:y(t.insertClause),del:void 0})}]),N=m(o.usingClauseStar);g(a.where);const R=m(d.groupGraphPattern);return _(()=>S.astFactory.updateOperationModify(S.astFactory.sourceLocation(P==null?void 0:P.withToken,F,j,R),(j==null?void 0:j.val)??[],(F==null?void 0:F.val)??[],R,N,P==null?void 0:P.graph))},gImpl:({SUBRULE:_,PRINT_WORDS:g,PRINT_ON_EMPTY:m,NEW_LINE:y})=>(v,A)=>{const{astFactory:T,indentInc:S}=A;v.graph&&(T.printFilter(v,()=>g("WITH")),_(u.iri,v.graph)),v.delete.length>0&&(T.printFilter(v,()=>{A[i.traqulaIndentation]+=S,g("DELETE","{"),y()}),_(t.quads,T.wrap(v.delete,v.loc)),T.printFilter(v,()=>{A[i.traqulaIndentation]-=S,m("}"),y()})),v.insert.length>0&&(T.printFilter(v,()=>{A[i.traqulaIndentation]+=S,g("INSERT","{"),y()}),_(t.quads,T.wrap(v.insert,v.loc)),T.printFilter(v,()=>{A[i.traqulaIndentation]-=S,m("} "),y()})),_(o.usingClauseStar,v.from),T.printFilter(v,()=>g("WHERE")),_(d.groupGraphPattern,v.where)}},t.deleteClause={name:"deleteClause",impl:({ACTION:_,SUBRULE:g,CONSUME:m})=>y=>{const v=m(a.deleteClause),A=_(()=>y.parseMode.delete("canCreateBlankNodes")),T=g(t.quadPattern);return _(()=>A&&y.parseMode.add("canCreateBlankNodes")),_(()=>y.astFactory.wrap(T.val,y.astFactory.sourceLocation(v,T)))}},t.insertClause={name:"insertClause",impl:({ACTION:_,SUBRULE:g,CONSUME:m})=>y=>{const v=m(a.insertClause),A=g(t.quadPattern);return _(()=>y.astFactory.wrap(A.val,y.astFactory.sourceLocation(v,A)))}},t.graphOrDefault={name:"graphOrDefault",impl:({ACTION:_,SUBRULE1:g,CONSUME:m,OPTION:y,OR:v})=>A=>v([{ALT:()=>{const T=m(a.graph.default_);return _(()=>A.astFactory.graphRefDefault(A.astFactory.sourceLocation(T)))}},{ALT:()=>{const T=y(()=>m(a.graph.graph)),S=g(u.iri);return _(()=>A.astFactory.graphRefSpecific(S,A.astFactory.sourceLocation(T,S)))}}])},t.graphRef={name:"graphRef",impl:({ACTION:_,SUBRULE:g,CONSUME:m})=>y=>{const v=m(a.graph.graph),A=g(u.iri);return _(()=>y.astFactory.graphRefSpecific(A,y.astFactory.sourceLocation(v,A)))},gImpl:({SUBRULE:_,PRINT_WORD:g})=>(m,{astFactory:y})=>{y.printFilter(m,()=>g("GRAPH")),_(u.iri,m.graph)}},t.graphRefAll={name:"graphRefAll",impl:({ACTION:_,SUBRULE:g,CONSUME:m,OR:y})=>v=>y([{ALT:()=>g(t.graphRef)},{ALT:()=>{const A=m(a.graph.default_);return _(()=>v.astFactory.graphRefDefault(v.astFactory.sourceLocation(A)))}},{ALT:()=>{const A=m(a.graph.named);return _(()=>v.astFactory.graphRefNamed(v.astFactory.sourceLocation(A)))}},{ALT:()=>{const A=m(a.graph.graphAll);return _(()=>v.astFactory.graphRefAll(v.astFactory.sourceLocation(A)))}}]),gImpl:({SUBRULE:_,PRINT_WORD:g})=>(m,{astFactory:y})=>{y.isGraphRefSpecific(m)?_(t.graphRef,m):y.isGraphRefDefault(m)?y.printFilter(m,()=>g("DEFAULT")):y.isGraphRefNamed(m)?y.printFilter(m,()=>g("NAMED")):y.isGraphRefAll(m)&&y.printFilter(m,()=>g("ALL"))}},t.quads={name:"quads",impl:({ACTION:_,SUBRULE:g,CONSUME:m,MANY:y,SUBRULE1:v,SUBRULE2:A,OPTION1:T,OPTION2:S,OPTION3:P})=>j=>{const F=[];let N;return T(()=>{const R=v(l.triplesTemplate);N=R,_(()=>F.push(R))}),y(()=>{const R=g(t.quadsNotTriples);N=R,F.push(R),S(()=>{const C=m(a.symbols.dot);return N=C,C}),P(()=>{const C=A(l.triplesTemplate);N=C,_(()=>F.push(C))})}),_(()=>j.astFactory.wrap(F,j.astFactory.sourceLocation(F.at(0),N)))},gImpl:({SUBRULE:_})=>(g,{astFactory:m})=>{for(const y of g.val)m.isPattern(y)?_(l.triplesBlock,y):_(t.quadsNotTriples,y)}},t.quadsNotTriples={name:"quadsNotTriples",impl:({ACTION:_,SUBRULE1:g,CONSUME:m,OPTION:y})=>v=>{const A=m(a.graph.graph),T=g(c.varOrIri);m(a.symbols.LCurly);const S=y(()=>g(l.triplesTemplate)),P=m(a.symbols.RCurly);return _(()=>v.astFactory.graphQuads(T,S??v.astFactory.patternBgp([],v.astFactory.sourceLocation()),v.astFactory.sourceLocation(A,P)))},gImpl:({SUBRULE:_,PRINT_WORD:g,NEW_LINE:m,PRINT_ON_OWN_LINE:y})=>(v,A)=>{const{astFactory:T,indentInc:S}=A;T.printFilter(v,()=>g("GRAPH")),_(c.varOrTerm,v.graph),T.printFilter(v,()=>{A[i.traqulaIndentation]+=S,g("{"),m()}),_(l.triplesBlock,v.triples),T.printFilter(v,()=>{A[i.traqulaIndentation]-=S,y("}")})}}}(mj)),mj}var fte;function qIe(){return fte||(fte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(u,l);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,f)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),r=E&&E.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&e(u,c,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrUpdate=void 0;const n=ya(),i=_O(),a=Ol(),s=hG(),o=dte();r(hG(),t),r(dte(),t),r(zF(),t),r(vz(),t),r(gO(),t),r(Az(),t),r(Ol(),t),r(ql(),t),r(jIe(),t),r(BIe(),t),r(QF(),t),r(mO(),t),t.queryOrUpdate={name:"queryOrUpdate",impl:({ACTION:c,SUBRULE:u,OR1:l,OR2:d,MANY:f,OPTION1:h,CONSUME:p,SUBRULE2:_})=>g=>{const m=u(a.prologue);return l([{ALT:()=>{const y=d([{ALT:()=>u(s.selectQuery)},{ALT:()=>u(s.constructQuery)},{ALT:()=>u(s.describeQuery)},{ALT:()=>u(s.askQuery)}]),v=u(s.valuesClause);return c(()=>({context:m,...y,type:"query",...v&&{values:v},loc:g.astFactory.sourceLocation(m.at(0),y,v)}))}},{ALT:()=>{const y=[];y.push({context:m});let v=!0;return f({GATE:()=>v,DEF:()=>{v=!1,y.at(-1).operation=u(o.update1),h(()=>{p(n.symbols.semi),v=!0;const A=_(a.prologue);y.push({context:A})})}}),c(()=>{const A={type:"update",updates:y,loc:g.astFactory.sourceLocation(...y.flatMap(T=>[...T.context,T.operation]))};return g.skipValidation||(0,i.updateNoReuseBlankNodeLabels)(A),A})}}])},gImpl:({SUBRULE:c})=>(u,{astFactory:l})=>{l.isQuery(u)?c(s.query,u):c(o.update,u)}}}(QL)),QL}var gj={},hte;function drt(){return hte||(hte=1,Object.defineProperty(gj,"__esModule",{value:!0})),gj}var _c={},pte;function frt(){if(pte)return _c;pte=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.MinimalSparqlParser=void 0,_c.completeParseContext=r,_c.completeGeneratorContext=n,_c.copyParseContext=i;const t=_r(),e=bz();function r(s){return{astFactory:s.astFactory??new e.AstFactory({tracksSourceLocation:!1}),baseIRI:s.baseIRI,prefixes:{...s.prefixes},parseMode:s.parseMode?new Set(s.parseMode):new Set(["canParseVars","canCreateBlankNodes"]),skipValidation:s.skipValidation??!1}}function n(s){return{astFactory:s.astFactory??new e.AstFactory,origSource:s.origSource??"",offset:s.offset,[t.traqulaIndentation]:s[t.traqulaIndentation]??0,[t.traqulaNewlineAlternative]:s[t.traqulaNewlineAlternative]??" ",indentInc:s.indentInc??2}}function i(s){return{...s,prefixes:{...s.prefixes},parseMode:new Set(s.parseMode)}}let a=class{constructor(o,c={}){k(this,"parser");k(this,"defaultContext");k(this,"coreTransformer",new t.TransformerObject);this.parser=o,this.defaultContext=r(c)}parse(o,c={}){const u=this.parser.queryOrUpdate(o,i({...this.defaultContext,...c}));return u.loc=this.defaultContext.astFactory.sourceLocationInlinedSource(o,u.loc,0,Number.MAX_SAFE_INTEGER),u}parsePath(o,c={}){const u=this.parser.path(o,i({...this.defaultContext,...c}));return u.loc=this.defaultContext.astFactory.sourceLocationInlinedSource(o,u.loc,0,Number.MAX_SAFE_INTEGER),this.defaultContext.astFactory.isPathPure(u)?{...u,prefixes:{}}:u}};return _c.MinimalSparqlParser=a,_c}var yj={},_te;function hrt(){return _te||(_te=1,Object.defineProperty(yj,"__esModule",{value:!0})),yj}var mte;function di(){return mte||(mte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(a,s,o,c){c===void 0&&(c=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,c,u)}:function(a,s,o,c){c===void 0&&(c=o),a[c]=s[o]}),r=E&&E.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),n=E&&E.__importStar||function(){var a=function(s){return a=Object.getOwnPropertyNames||function(o){var c=[];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(c[c.length]=u);return c},a(s)};return function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var c=a(s),u=0;u<c.length;u++)c[u]!=="default"&&e(o,s,c[u]);return r(o,s),o}}(),i=E&&E.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.lex=t.gram=void 0,t.gram=n(qIe()),t.lex=n(ya()),i(Az(),t),i(drt(),t),i(frt(),t),i(hrt(),t),i(bz(),t),i(_O(),t),i(pO(),t)}(zL)),zL}var ud={},gte;function Ho(){if(gte)return ud;gte=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.ExpressionTypes=ud.Types=void 0;var t;(function(r){r.ASK="ask",r.BGP="bgp",r.CONSTRUCT="construct",r.DESCRIBE="describe",r.DISTINCT="distinct",r.EXPRESSION="expression",r.EXTEND="extend",r.FILTER="filter",r.FROM="from",r.GRAPH="graph",r.GROUP="group",r.JOIN="join",r.LEFT_JOIN="leftjoin",r.MINUS="minus",r.NOP="nop",r.ORDER_BY="orderby",r.PATTERN="pattern",r.PROJECT="project",r.REDUCED="reduced",r.SERVICE="service",r.SLICE="slice",r.UNION="union",r.VALUES="values",r.COMPOSITE_UPDATE="compositeupdate",r.DELETE_INSERT="deleteinsert",r.LOAD="load",r.CLEAR="clear",r.CREATE="create",r.DROP="drop",r.ADD="add",r.MOVE="move",r.COPY="copy",r.PATH="path",r.ALT="alt",r.INV="inv",r.LINK="link",r.ONE_OR_MORE_PATH="OneOrMorePath",r.SEQ="seq",r.NPS="nps",r.ZERO_OR_MORE_PATH="ZeroOrMorePath",r.ZERO_OR_ONE_PATH="ZeroOrOnePath"})(t||(ud.Types=t={}));var e;return function(r){r.AGGREGATE="aggregate",r.EXISTENCE="existence",r.NAMED="named",r.OPERATOR="operator",r.TERM="term",r.WILDCARD="wildcard"}(e||(ud.ExpressionTypes=e={})),ud}var bj={},yte;function Tz(){return yte||(yte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.visitOperationSub=t.visitOperation=t.mapOperationSub=t.mapOperation=void 0,t.resolveIRI=i,t.objectify=a,t.inScopeVariables=s;const e=_r(),r=Ho(),n=new e.TransformerSubTyped({},{[r.Types.PATTERN]:{ignoreKeys:new Set(["subject","predicate","object","graph"])},[r.Types.EXPRESSION]:{ignoreKeys:new Set(["name","term","wildcard","variable"])},[r.Types.DESCRIBE]:{ignoreKeys:new Set(["terms"])},[r.Types.EXTEND]:{ignoreKeys:new Set(["variable"])},[r.Types.FROM]:{ignoreKeys:new Set(["default","named"])},[r.Types.GRAPH]:{ignoreKeys:new Set(["name"])},[r.Types.GROUP]:{ignoreKeys:new Set(["variables"])},[r.Types.LINK]:{ignoreKeys:new Set(["iri"])},[r.Types.NPS]:{ignoreKeys:new Set(["iris"])},[r.Types.PATH]:{ignoreKeys:new Set(["subject","object","graph"])},[r.Types.PROJECT]:{ignoreKeys:new Set(["variables"])},[r.Types.SERVICE]:{ignoreKeys:new Set(["name"])},[r.Types.VALUES]:{ignoreKeys:new Set(["variables","bindings"])},[r.Types.LOAD]:{ignoreKeys:new Set(["source","destination"])},[r.Types.CLEAR]:{ignoreKeys:new Set(["source"])},[r.Types.CREATE]:{ignoreKeys:new Set(["source"])},[r.Types.DROP]:{ignoreKeys:new Set(["source"])},[r.Types.ADD]:{ignoreKeys:new Set(["source","destination"])},[r.Types.MOVE]:{ignoreKeys:new Set(["source","destination"])},[r.Types.COPY]:{ignoreKeys:new Set(["source","destination"])}});t.mapOperation=n.transformNode.bind(n),t.mapOperationSub=n.transformNodeSpecific.bind(n),t.visitOperation=n.visitNode.bind(n),t.visitOperationSub=n.visitNodeSpecific.bind(n);function i(o,c){if(/^[a-z][\d+.a-z-]*:/iu.test(o))return o;if(!c)throw new Error(`Cannot resolve relative IRI ${o} because no base IRI was set.`);switch(o[0]){case void 0:return c;case"#":return c+o;case"?":return c.replace(/(?:\?.*)?$/u,o);case"/":{const u=/^(?:[a-z]+:\/*)?[^/]*/u.exec(c);if(!u)throw new Error(`Could not determine relative IRI using base: ${c}`);return u[0]+o}default:return c.replace(/[^/:]*$/u,"")+o}}function a(o){if(o.termType){if(o.termType==="Quad")return{type:"pattern",termType:"Quad",subject:a(o.subject),predicate:a(o.predicate),object:a(o.object),graph:a(o.graph)};const c={termType:o.termType,value:o.value};return o.language&&(c.language=o.language),o.datatype&&(c.datatype=a(o.datatype)),c}if(Array.isArray(o))return o.map(c=>a(c));if(o===Object(o)){const c={};for(const u of Object.keys(o))c[u]=a(o[u]);return c}return o}function s(o,c=t.visitOperation){const u={};function l(h){u[h.value]=h}function d(h){h.subject.termType==="Variable"?l(h.subject):h.subject.termType==="Quad"&&d(h.subject),h.predicate.termType==="Variable"?l(h.predicate):h.predicate.termType==="Quad"&&d(h.predicate),h.object.termType==="Variable"?l(h.object):h.object.termType==="Quad"&&d(h.object),h.graph.termType==="Variable"&&l(h.graph),h.graph.termType==="Quad"&&d(h.graph)}function f(h){c(h,{[r.Types.EXPRESSION]:{visitor:p=>{p.subType===r.ExpressionTypes.AGGREGATE&&p.variable&&l(p.variable)}},[r.Types.EXTEND]:{visitor:p=>l(p.variable)},[r.Types.GRAPH]:{visitor:p=>{p.name.termType==="Variable"&&l(p.name)}},[r.Types.GROUP]:{visitor:p=>{for(const _ of p.variables)l(_)}},[r.Types.PATH]:{visitor:p=>{p.subject.termType==="Variable"?l(p.subject):p.subject.termType==="Quad"&&d(p.subject),p.object.termType==="Variable"?l(p.object):p.object.termType==="Quad"&&d(p.object),p.graph.termType==="Variable"?l(p.graph):p.graph.termType==="Quad"&&d(p.graph)}},[r.Types.PATTERN]:{visitor:p=>d(p)},[r.Types.PROJECT]:{preVisitor:()=>({continue:!1}),visitor:p=>{for(const _ of p.variables)l(_)}},[r.Types.SERVICE]:{visitor:p=>{p.name.termType==="Variable"&&l(p.name)}},[r.Types.VALUES]:{visitor:p=>{for(const _ of p.variables)l(_)}},[r.Types.MINUS]:{preVisitor:()=>({continue:!1}),visitor:p=>{f(p.input[0])}}})}return f(o),Object.values(u)}}(bj)),bj}var bte;function Ff(){return bte||(bte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(o,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(o,l,d)}:function(o,c,u,l){l===void 0&&(l=u),o[l]=c[u]}),r=E&&E.__setModuleDefault||(Object.create?function(o,c){Object.defineProperty(o,"default",{enumerable:!0,value:c})}:function(o,c){o.default=c}),n=E&&E.__importStar||function(){var o=function(c){return o=Object.getOwnPropertyNames||function(u){var l=[];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[l.length]=d);return l},o(c)};return function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var l=o(c),d=0;d<l.length;d++)l[d]!=="default"&&e(u,c,l[d]);return r(u,c),u}}();Object.defineProperty(t,"__esModule",{value:!0}),t.generateFreshVar=t.inScopeVariables=t.findAllVariables=t.translateBlankNodesToVariables=t.translateDatasetClause=t.translateInlineData=t.registerContextDefinitions=t.translateTerm=t.translateNamed=void 0;const i=di(),a=n(Ho()),s=n(Tz());t.translateNamed={name:"translateNamed",fun:()=>({astFactory:o,currentPrefixes:c,currentBase:u,dataFactory:l},d)=>{let f=d.value;if(o.isTermNamedPrefixed(d)){const h=c[d.prefix];if(!h)throw new Error(`Unknown prefix: ${d.prefix}`);f=h+d.value}return l.namedNode(s.resolveIRI(f,u))}},t.translateTerm={name:"translateTerm",fun:({SUBRULE:o})=>({astFactory:c,dataFactory:u},l)=>{if(c.isTermNamed(l))return o(t.translateNamed,l);if(c.isTermBlank(l))return u.blankNode(l.label);if(c.isTermVariable(l))return u.variable(l.value);if(c.isTermLiteral(l)){const d=typeof l.langOrIri=="object"?o(t.translateNamed,l.langOrIri):l.langOrIri;return u.literal(l.value,d)}throw new Error(`Unexpected term: ${JSON.stringify(l)}`)}},t.registerContextDefinitions={name:"registerContextDefinitions",fun:({SUBRULE:o})=>(c,u)=>{const{astFactory:l,currentPrefixes:d}=c;for(const f of u)l.isContextDefinitionPrefix(f)&&(d[f.key]=o(t.translateTerm,f.value).value),l.isContextDefinitionBase(f)&&(c.currentBase=o(t.translateTerm,f.value).value)}},t.translateInlineData={name:"translateInlineData",fun:({SUBRULE:o})=>({algebraFactory:c},u)=>{const l=u.variables.map(f=>o(t.translateTerm,f)),d=u.values.map(f=>{const h={};for(const[p,_]of Object.entries(f))_!==void 0&&(h[p]=o(t.translateTerm,_));return h});return c.createValues(l,d)}},t.translateDatasetClause={name:"translateDatasetClause",fun:({SUBRULE:o})=>(c,u)=>({default:u.clauses.filter(l=>l.clauseType==="default").map(l=>o(t.translateNamed,l.value)),named:u.clauses.filter(l=>l.clauseType==="named").map(l=>o(t.translateNamed,l.value))})},t.translateBlankNodesToVariables={name:"translateBlankNodesToVariables",fun:({SUBRULE:o})=>({algebraFactory:c,variables:u},l)=>{const d={},f=new Set(u);function h(_){let g=0,m=_;for(;u.has(m);)m=`${_}${g++}`;return c.dataFactory.variable(m)}function p(_){if(_.termType==="BlankNode"){let g=d[_.value];return g||(g=h(_.value),f.add(g.value),d[_.value]=g),g}return _.termType==="Quad"?c.dataFactory.quad(p(_.subject),p(_.predicate),p(_.object),p(_.graph)):_}return s.mapOperation(l,{[a.Types.PATH]:{preVisitor:()=>({continue:!1}),transform:_=>c.createPath(p(_.subject),_.predicate,p(_.object),p(_.graph))},[a.Types.PATTERN]:{preVisitor:()=>({continue:!1}),transform:_=>c.createPattern(p(_.subject),p(_.predicate),p(_.object),p(_.graph))},[a.Types.CONSTRUCT]:{preVisitor:()=>({continue:!1}),transform:_=>c.createConstruct(o(t.translateBlankNodesToVariables,_.input),_.template)},[a.Types.DELETE_INSERT]:{preVisitor:()=>({continue:!1}),transform:_=>c.createDeleteInsert(_.delete,_.insert,_.where&&o(t.translateBlankNodesToVariables,_.where))}})}},t.findAllVariables={name:"findAllVariables",fun:()=>({transformer:o,variables:c},u)=>{o.visitNodeSpecific(u,{},{term:{variable:{visitor:l=>{c.add(l.value)}}}})}},t.inScopeVariables={name:"inScopeVariables",fun:()=>(o,c)=>{const u=new Set;return(0,i.findPatternBoundedVars)(c,u),u}},t.generateFreshVar={name:"generateFreshVar",fun:()=>o=>{let c=`var${o.varCount++}`;for(;o.variables.has(c);)c=`var${o.varCount++}`;return o.variables.add(c),o.dataFactory.variable(c)}}}(kL)),kL}var vj={},Aj={},Tj={},z_={},vte;function UIe(){if(vte)return z_;vte=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.BlankNode=void 0;class t{constructor(r){this.termType="BlankNode",this.value=r}equals(r){return!!r&&r.termType==="BlankNode"&&r.value===this.value}}return z_.BlankNode=t,z_}var Q_={},W_={},Ate;function VIe(){if(Ate)return W_;Ate=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.DefaultGraph=void 0;class t{constructor(){this.termType="DefaultGraph",this.value=""}equals(r){return!!r&&r.termType==="DefaultGraph"}}return W_.DefaultGraph=t,t.INSTANCE=new t,W_}var K_={},X_={},Tte;function wz(){if(Tte)return X_;Tte=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.NamedNode=void 0;class t{constructor(r){this.termType="NamedNode",this.value=r}equals(r){return!!r&&r.termType==="NamedNode"&&r.value===this.value}}return X_.NamedNode=t,X_}var wte;function GIe(){if(wte)return K_;wte=1,Object.defineProperty(K_,"__esModule",{value:!0}),K_.Literal=void 0;const t=wz();class e{constructor(n,i){this.termType="Literal",this.value=n,typeof i=="string"?(this.language=i,this.datatype=e.RDF_LANGUAGE_STRING,this.direction=""):i?"termType"in i?(this.language="",this.datatype=i,this.direction=""):(this.language=i.language,this.datatype=i.direction?e.RDF_DIRECTIONAL_LANGUAGE_STRING:e.RDF_LANGUAGE_STRING,this.direction=i.direction||""):(this.language="",this.datatype=e.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return K_.Literal=e,e.RDF_LANGUAGE_STRING=new t.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new t.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new t.NamedNode("http://www.w3.org/2001/XMLSchema#string"),K_}var J_={},Ste;function HIe(){if(Ste)return J_;Ste=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.Quad=void 0;class t{constructor(r,n,i,a){this.termType="Quad",this.value="",this.subject=r,this.predicate=n,this.object=i,this.graph=a}equals(r){return!!r&&(r.termType==="Quad"||!r.termType)&&this.subject.equals(r.subject)&&this.predicate.equals(r.predicate)&&this.object.equals(r.object)&&this.graph.equals(r.graph)}}return J_.Quad=t,J_}var Y_={},xte;function kIe(){if(xte)return Y_;xte=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.Variable=void 0;class t{constructor(r){this.termType="Variable",this.value=r}equals(r){return!!r&&r.termType==="Variable"&&r.value===this.value}}return Y_.Variable=t,Y_}var Ete;function prt(){if(Ete)return Q_;Ete=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.DataFactory=void 0;const t=UIe(),e=VIe(),r=GIe(),n=wz(),i=HIe(),a=kIe();let s=0;class o{constructor(u){this.blankNodeCounter=0,u=u||{},this.blankNodePrefix=u.blankNodePrefix||`df_${s++}_`}namedNode(u){return new n.NamedNode(u)}blankNode(u){return new t.BlankNode(u||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(u,l){return new r.Literal(u,l)}variable(u){return new a.Variable(u)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(u,l,d,f){return new i.Quad(u,l,d,f||this.defaultGraph())}fromTerm(u){switch(u.termType){case"NamedNode":return this.namedNode(u.value);case"BlankNode":return this.blankNode(u.value);case"Literal":return u.language?this.literal(u.value,u.language):u.datatype.equals(r.Literal.XSD_STRING)?this.literal(u.value):this.literal(u.value,this.fromTerm(u.datatype));case"Variable":return this.variable(u.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(u.subject),this.fromTerm(u.predicate),this.fromTerm(u.object),this.fromTerm(u.graph))}}fromQuad(u){return this.fromTerm(u)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Q_.DataFactory=o,Q_}var Ite;function jr(){return Ite||(Ite=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(UIe(),t),r(prt(),t),r(VIe(),t),r(GIe(),t),r(wz(),t),r(HIe(),t),r(kIe(),t)}(Tj)),Tj}var $_={},wj={},Ps={},Ote;function _rt(){if(Ote)return Ps;Ote=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.termToString=r,Ps.getLiteralValue=n,Ps.getLiteralType=i,Ps.getLiteralLanguage=a,Ps.getLiteralDirection=s,Ps.stringToTerm=o,Ps.quadToStringQuad=c,Ps.stringQuadToQuad=u;const t=jr(),e=new t.DataFactory;function r(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${r(l.subject)} ${r(l.predicate)} ${r(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+r(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function i(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function a(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function s(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function o(l,d){if(d=d||e,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=a(l),h=s(l),p=d.namedNode(i(l));return d.literal(n(l),f?{language:f,direction:h}:p);case"<":default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const _=l.slice(2,-2).trim();let g=[],m=0,y=0,v=!1;for(let A=0;A<_.length;A++){const T=_[A];if(T==="<"&&m++,T===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+l);m--}if(T==='"'){let S=!1,P=A;for(;P-- >0&&_[P]==="\\";)S=!S;S||(v=!v)}if(T===" "&&!v&&m===0){for(g.push(_.slice(y,A));_[A+1]===" ";)A+=1;y=A+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+l);if(g.push(_.slice(y,_.length)),g.length!==3&&g.length!==4)throw new Error("Nested quad syntax error "+l);return g=g.map(A=>A.startsWith("<")&&!A.includes(" ")?A.slice(1,-1):A),d.quad(o(g[0]),o(g[1]),o(g[2]),g[3]?o(g[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:r(l.subject),predicate:r(l.predicate),object:r(l.object),graph:r(l.graph)}}function u(l,d){return d=d||e,d.quad(o(l.subject,d),o(l.predicate,d),o(l.object,d),o(l.graph,d))}return Ps}var Rte;function Br(){return Rte||(Rte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralDirection=t.getLiteralLanguage=void 0;const e=_rt();Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralDirection",{enumerable:!0,get:function(){return e.getLiteralDirection}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})}(wj)),wj}var Pte;function Sz(){if(Pte)return $_;Pte=1;var t=E&&E.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(u,l);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,f)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),e=E&&E.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),r=E&&E.__importStar||function(){var c=function(u){return c=Object.getOwnPropertyNames||function(l){var d=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(d[d.length]=f);return d},c(u)};return function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d=c(u),f=0;f<d.length;f++)d[f]!=="default"&&t(l,u,d[f]);return e(l,u),l}}();Object.defineProperty($_,"__esModule",{value:!0}),$_.AlgebraFactory=void 0;const n=jr(),i=Br(),a=r(Ho());function s(c){return c}class o{constructor(u){k(this,"dataFactory");k(this,"stringType");this.dataFactory=u??new n.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(u,l=!0){return this.flattenMulti({type:a.Types.ALT,input:u},l)}createAsk(u){return{type:a.Types.ASK,input:u}}createBoundAggregate(u,l,d,f,h){const p=this.createAggregateExpression(l,d,f,h);return p.variable=u,p}createBgp(u){return{type:a.Types.BGP,patterns:u}}createConstruct(u,l){return{type:a.Types.CONSTRUCT,input:u,template:l}}createDescribe(u,l){return{type:a.Types.DESCRIBE,input:u,terms:l}}createDistinct(u){return{type:a.Types.DISTINCT,input:u}}createExtend(u,l,d){return{type:a.Types.EXTEND,input:u,variable:l,expression:d}}createFrom(u,l,d){return{type:a.Types.FROM,input:u,default:l,named:d}}createFilter(u,l){return{type:a.Types.FILTER,input:u,expression:l}}createGraph(u,l){return{type:a.Types.GRAPH,input:u,name:l}}createGroup(u,l,d){return{type:a.Types.GROUP,input:u,variables:l,aggregates:d}}createInv(u){return{type:a.Types.INV,path:u}}createJoin(u,l=!0){return this.flattenMulti({type:a.Types.JOIN,input:u},l)}createLeftJoin(u,l,d){return d?{type:a.Types.LEFT_JOIN,input:[u,l],expression:d}:{type:a.Types.LEFT_JOIN,input:[u,l]}}createLink(u){return{type:a.Types.LINK,iri:u}}createMinus(u,l){return{type:a.Types.MINUS,input:[u,l]}}createNop(){return{type:a.Types.NOP}}createNps(u){return{type:a.Types.NPS,iris:u}}createOneOrMorePath(u){return{type:a.Types.ONE_OR_MORE_PATH,path:u}}createOrderBy(u,l){return{type:a.Types.ORDER_BY,input:u,expressions:l}}createPath(u,l,d,f){return f?{type:a.Types.PATH,subject:u,predicate:l,object:d,graph:f}:{type:a.Types.PATH,subject:u,predicate:l,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(u,l,d,f){const h=this.dataFactory.quad(u,l,d,f);return h.type=a.Types.PATTERN,h}createProject(u,l){return{type:a.Types.PROJECT,input:u,variables:l}}createReduced(u){return{type:a.Types.REDUCED,input:u}}createSeq(u,l=!0){return this.flattenMulti({type:a.Types.SEQ,input:u},l)}createService(u,l,d){return{type:a.Types.SERVICE,input:u,name:l,silent:!!d}}createSlice(u,l,d){return l=l||0,d!==void 0?{type:a.Types.SLICE,input:u,start:l,length:d}:{type:a.Types.SLICE,input:u,start:l}}createUnion(u,l=!0){return this.flattenMulti({type:a.Types.UNION,input:u},l)}createValues(u,l){return{type:a.Types.VALUES,variables:u,bindings:l}}createZeroOrMorePath(u){return{type:a.Types.ZERO_OR_MORE_PATH,path:u}}createZeroOrOnePath(u){return{type:a.Types.ZERO_OR_ONE_PATH,path:u}}createAggregateExpression(u,l,d,f){return f!==void 0?{type:a.Types.EXPRESSION,subType:a.ExpressionTypes.AGGREGATE,aggregator:u,expression:l,separator:f,distinct:d}:{type:a.Types.EXPRESSION,subType:a.ExpressionTypes.AGGREGATE,aggregator:u,expression:l,distinct:d}}createExistenceExpression(u,l){return{type:a.Types.EXPRESSION,subType:a.ExpressionTypes.EXISTENCE,not:u,input:l}}createNamedExpression(u,l){return{type:a.Types.EXPRESSION,subType:a.ExpressionTypes.NAMED,name:u,args:l}}createOperatorExpression(u,l){return{type:a.Types.EXPRESSION,subType:a.ExpressionTypes.OPERATOR,operator:u,args:l}}createTermExpression(u){return{type:a.Types.EXPRESSION,subType:a.ExpressionTypes.TERM,term:u}}createWildcardExpression(){return{type:a.Types.EXPRESSION,subType:a.ExpressionTypes.WILDCARD,wildcard:{type:"wildcard"}}}createTerm(u){return u.startsWith("$")&&(u=u.replace("$","?")),(0,i.stringToTerm)(u,this.dataFactory)}createCompositeUpdate(u){return{type:a.Types.COMPOSITE_UPDATE,updates:u}}createDeleteInsert(u,l,d){const f={type:a.Types.DELETE_INSERT};return u&&(f.delete=u),l&&(f.insert=l),d&&(f.where=d),f}createLoad(u,l,d){const f={type:a.Types.LOAD,source:u};return l&&(f.destination=l),this.addSilent(f,!!d)}createClear(u,l){return this.addSilent({type:a.Types.CLEAR,source:u},!!l)}createCreate(u,l){return this.addSilent({type:a.Types.CREATE,source:u},!!l)}createDrop(u,l){return this.addSilent({type:a.Types.DROP,source:u},!!l)}createAdd(u,l,d){return this.addSilent({type:a.Types.ADD,source:u,destination:l},!!d)}createMove(u,l,d){return this.addSilent({type:a.Types.MOVE,source:u,destination:l},!!d)}createCopy(u,l,d){return this.addSilent({type:a.Types.COPY,source:u,destination:l},!!d)}addSilent(u,l){return l&&(u.silent=l),u}flattenMulti(u,l){if(!l)return u;const d=u.type,f=u.subType,h=u.input,p=[];for(const _ of h)_.type===d&&(!f||f===_.subType)?p.push(..._.input):p.push(_);return u.input=p,u}}return $_.AlgebraFactory=o,$_}var Nte;function u0(){return Nte||(Nte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(f,h,p,_){_===void 0&&(_=p);var g=Object.getOwnPropertyDescriptor(h,p);(!g||("get"in g?!h.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(f,_,g)}:function(f,h,p,_){_===void 0&&(_=p),f[_]=h[p]}),r=E&&E.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),n=E&&E.__importStar||function(){var f=function(h){return f=Object.getOwnPropertyNames||function(p){var _=[];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(_[_.length]=g);return _},f(h)};return function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var _=f(h),g=0;g<_.length;g++)_[g]!=="default"&&e(p,h,_[g]);return r(p,h),p}}();Object.defineProperty(t,"__esModule",{value:!0}),t.typeVals=t.types=void 0,t.createAlgebraContext=c,t.isTerm=u,t.isTriple=l,t.isVariable=d;const i=di(),a=jr(),s=n(Ho()),o=Sz();function c(f){const h=f.dataFactory??new a.DataFactory;return{variables:new Set,varCount:0,useQuads:!1,transformer:new i.AstTransformer,astFactory:new i.AstFactory,dataFactory:h,algebraFactory:new o.AlgebraFactory(h),currentBase:f.baseIRI,currentPrefixes:f.prefixes?{...f.prefixes}:{}}}t.types=s.Types,t.typeVals=Object.values(t.types);function u(f){return!!(f!=null&&f.termType)}function l(f){return f.subject&&f.predicate&&f.object}function d(f){return(f==null?void 0:f.termType)==="Variable"}}(Aj)),Aj}var Sj={},Fte;function zIe(){return Fte||(Fte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.simplifyPath=t.translatePathPredicate=t.translatePath=void 0;const e=Ho(),r=u0(),n=Ff();t.translatePath={name:"translatePath",fun:({SUBRULE:i})=>(a,s)=>{const o=s.subject,c=i(t.translatePathPredicate,s.predicate),u=s.object;return i(t.simplifyPath,o,c,u)}},t.translatePathPredicate={name:"translatePathPredicate",fun:({SUBRULE:i})=>({astFactory:a,algebraFactory:s},o)=>{if(a.isTerm(o))return i(t.translatePathPredicate,i(n.translateNamed,o));if((0,r.isTerm)(o))return s.createLink(o);if(o.subType==="^")return s.createInv(i(t.translatePathPredicate,o.items[0]));if(o.subType==="!"){const c=[],u=[],l=o.items[0];let d;a.isPathPure(l)&&l.subType==="|"?d=l.items:d=[l];for(const p of d)if(a.isTerm(p))c.push(p);else if(p.subType==="^")u.push(p.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(p)}`);const f=s.createNps(c.map(p=>i(n.translateNamed,p))),h=s.createInv(s.createNps(u.map(p=>i(n.translateNamed,p))));return u.length===0?f:c.length===0?h:s.createAlt([f,h])}if(o.subType==="/")return s.createSeq(o.items.map(c=>i(t.translatePathPredicate,c)));if(o.subType==="|")return s.createAlt(o.items.map(c=>i(t.translatePathPredicate,c)));if(o.subType==="*")return s.createZeroOrMorePath(i(t.translatePathPredicate,o.items[0]));if(o.subType==="+")return s.createOneOrMorePath(i(t.translatePathPredicate,o.items[0]));if(o.subType==="?")return s.createZeroOrOnePath(i(t.translatePathPredicate,o.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(o)}`)}},t.simplifyPath={name:"simplifyPath",fun:({SUBRULE:i})=>({algebraFactory:a},s,o,c)=>{if(o.type===e.Types.LINK)return[a.createPattern(s,o.iri,c)];if(o.type===e.Types.INV)return i(t.simplifyPath,c,o.path,s);if(o.type===e.Types.SEQ){let u=s;const l=[];for(const d of o.input.slice(0,-1)){const f=i(n.generateFreshVar);l.push(...i(t.simplifyPath,u,d,f)),u=f}return l.push(...i(t.simplifyPath,u,o.input.at(-1),c)),l}return[a.createPath(s,o,c)]}}}(Sj)),Sj}var Z_={},xj={},Ej={},Mte;function WF(){return Mte||(Mte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.translateQuad=t.recurseGraph=t.translateTripleNesting=t.translateBasicGraphPattern=t.translateTripleCollection=void 0;const e=u0(),r=Ff();t.translateTripleCollection={name:"translateTripleCollection",fun:({SUBRULE:n})=>(i,a,s)=>{n(t.translateBasicGraphPattern,a.triples,s)}},t.translateBasicGraphPattern={name:"translateBasicGraphPattern",fun:({SUBRULE:n})=>({astFactory:i},a,s)=>{for(const o of a)i.isTripleCollection(o)?n(t.translateTripleCollection,o,s):n(t.translateTripleNesting,o,s)}},t.translateTripleNesting={name:"translateTripleNesting",fun:({SUBRULE:n})=>({astFactory:i},a,s)=>{let o,c,u;i.isTripleCollection(a.subject)?(n(t.translateTripleCollection,a.subject,s),o=n(r.translateTerm,a.subject.identifier)):o=n(r.translateTerm,a.subject),i.isPathPure(a.predicate)?c=a.predicate:c=n(r.translateTerm,a.predicate),i.isTripleCollection(a.object)?(n(t.translateTripleCollection,a.object,s),u=n(r.translateTerm,a.object.identifier)):u=n(r.translateTerm,a.object),s.push({subject:o,predicate:c,object:u})}},t.recurseGraph={name:"recurseGraph",fun:({SUBRULE:n})=>(i,a,s,o)=>{if(a.type===e.types.GRAPH){if(o)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");a=n(t.recurseGraph,a.input,a.name,void 0)}else if(a.type!==e.types.SERVICE)if(a.type===e.types.BGP)a.patterns=a.patterns.map(c=>(o&&(c.subject.equals(s)&&(c.subject=o),c.predicate.equals(s)&&(c.predicate=o),c.object.equals(s)&&(c.object=o)),c.graph.termType==="DefaultGraph"&&(c.graph=s),c));else if(a.type===e.types.PATH)o&&(a.subject.equals(s)&&(a.subject=o),a.object.equals(s)&&(a.object=o)),a.graph.termType==="DefaultGraph"&&(a.graph=s);else if(a.type===e.types.PROJECT&&!o)a.variables.some(c=>c.equals(s))||(o=n(r.generateFreshVar)),a.input=n(t.recurseGraph,a.input,s,o);else if(a.type===e.types.EXTEND&&!o)a.variable.equals(s)&&(o=n(r.generateFreshVar)),a.input=n(t.recurseGraph,a.input,s,o);else if(a.type===e.types.MINUS&&s.termType==="Variable")a.graphScopeVar=s,a.input=[n(t.recurseGraph,a.input[0],s,o),n(t.recurseGraph,a.input[1],s,o)];else for(const[c,u]of Object.entries(a)){const l=c;Array.isArray(u)?a[l]=u.map(d=>n(t.recurseGraph,d,s,o)):e.typeVals.includes(u.type)?a[l]=n(t.recurseGraph,u,s,o):o&&(0,e.isVariable)(u)&&u.equals(s)&&(a[l]=o)}return a}},t.translateQuad={name:"translateQuad",fun:()=>({astFactory:n,algebraFactory:i},a)=>{if(n.isPathPure(a.predicate))throw new Error("Trying to translate property path to quad.");return i.createPattern(a.subject,a.predicate,a.object,a.graph)}}}(Ej)),Ej}var Dte;function QIe(){return Dte||(Dte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.translateUpdateGraphLoad=t.translateGraphRef=t.translateGraphRefDefSpec=t.translateGraphRefSpecific=t.translateUpdateTriplesBlock=t.translateInsertDelete=t.translateSingleUpdate=t.translateUpdate=void 0;const e=Ff(),r=KF(),n=WF();t.translateUpdate={name:"translateUpdate",fun:({SUBRULE:i})=>({algebraFactory:a},s)=>{const o=s.updates.flatMap(c=>(i(e.registerContextDefinitions,c.context),c.operation?[i(t.translateSingleUpdate,c.operation)]:[]));return o.length===0?a.createNop():o.length===1?o[0]:a.createCompositeUpdate(o)}},t.translateSingleUpdate={name:"translateSingleUpdate",fun:({SUBRULE:i})=>({astFactory:a,algebraFactory:s},o)=>{if(a.isUpdateOperationLoad(o))return i(t.translateUpdateGraphLoad,o);if(a.isUpdateOperationClear(o))return s.createClear(i(t.translateGraphRef,o.destination),o.silent);if(a.isUpdateOperationCreate(o))return s.createCreate(i(t.translateGraphRef,o.destination),o.silent);if(a.isUpdateOperationDrop(o))return s.createDrop(i(t.translateGraphRef,o.destination),o.silent);if(a.isUpdateOperationAdd(o))return s.createAdd(i(t.translateGraphRefDefSpec,o.source),i(t.translateGraphRefDefSpec,o.destination),o.silent);if(a.isUpdateOperationCopy(o))return s.createCopy(i(t.translateGraphRefDefSpec,o.source),i(t.translateGraphRefDefSpec,o.destination),o.silent);if(a.isUpdateOperationMove(o))return s.createMove(i(t.translateGraphRefDefSpec,o.source),i(t.translateGraphRefDefSpec,o.destination),o.silent);if(a.isUpdateOperationInsertData(o)||a.isUpdateOperationDeleteData(o)||a.isUpdateOperationDeleteWhere(o)||a.isUpdateOperationModify(o))return i(t.translateInsertDelete,o);throw new Error(`Unknown update type ${JSON.stringify(o)}`)}},t.translateInsertDelete={name:"translateInsertDelete",fun:({SUBRULE:i})=>({useQuads:a,algebraFactory:s,astFactory:o},c)=>{if(!a)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");const u=[],l=[];let d;if(o.isUpdateOperationDeleteData(c)||o.isUpdateOperationDeleteWhere(c))u.push(...c.data.flatMap(f=>i(t.translateUpdateTriplesBlock,f,void 0))),o.isUpdateOperationDeleteWhere(c)&&(d=s.createBgp(u));else if(o.isUpdateOperationInsertData(c))l.push(...c.data.flatMap(f=>i(t.translateUpdateTriplesBlock,f,void 0)));else if(u.push(...c.delete.flatMap(f=>i(t.translateUpdateTriplesBlock,f,c.graph?i(e.translateNamed,c.graph):c.graph))),l.push(...c.insert.flatMap(f=>i(t.translateUpdateTriplesBlock,f,c.graph?i(e.translateNamed,c.graph):c.graph))),c.where.patterns.length>0){d=i(r.translateGraphPattern,c.where);const f=i(e.translateDatasetClause,c.from);f.default.length>0||f.named.length>0?d=s.createFrom(d,f.default,f.named):o.isUpdateOperationModify(c)&&c.graph&&(d=i(n.recurseGraph,d,i(e.translateNamed,c.graph),void 0))}return s.createDeleteInsert(u.length>0?u:void 0,l.length>0?l:void 0,d)}},t.translateUpdateTriplesBlock={name:"translateUpdateTriplesBlock",fun:({SUBRULE:i})=>(a,s,o)=>{const c=a.astFactory;let u=o,l;c.isGraphQuads(s)?(u=i(e.translateTerm,s.graph),l=s.triples):l=s;let d=[];return i(n.translateBasicGraphPattern,l.triples,d),u&&(d=d.map(f=>Object.assign(f,{graph:u}))),d.map(f=>i(n.translateQuad,f))}},t.translateGraphRefSpecific={name:"translateGraphRefSpecific",fun:({SUBRULE:i})=>(a,s)=>i(e.translateNamed,s.graph)},t.translateGraphRefDefSpec={name:"translateGraphRefDefSpec",fun:({SUBRULE:i})=>({astFactory:a},s)=>a.isGraphRefDefault(s)?"DEFAULT":i(t.translateGraphRefSpecific,s)},t.translateGraphRef={name:"translateGraphRef",fun:({SUBRULE:i})=>(a,s)=>{const o=a.astFactory;return o.isGraphRefAll(s)?"ALL":o.isGraphRefNamed(s)?"NAMED":i(t.translateGraphRefDefSpec,s)}},t.translateUpdateGraphLoad={name:"translateUpdateGraphLoad",fun:({SUBRULE:i})=>({algebraFactory:a},s)=>a.createLoad(i(e.translateNamed,s.source),s.destination?i(e.translateNamed,s.destination.graph):void 0,s.silent)}}(xj)),xj}var Cte;function WIe(){if(Cte)return Z_;Cte=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.translateQuery=void 0;const t=KIe(),e=Ff(),r=KF(),n=QIe();return Z_.translateQuery={name:"translateQuery",fun:({SUBRULE:i})=>(a,s,o,c)=>{const u=a.astFactory;a.variables=new Set,a.varCount=0,a.useQuads=o??!1;let l;if(i(e.findAllVariables,s),u.isQuery(s)){i(e.registerContextDefinitions,s.context);const d=s.where??u.patternGroup([],u.gen());l=i(r.translateGraphPattern,d),l=i(t.translateAggregates,s,l)}else l=i(n.translateUpdate,s);return c&&(l=i(e.translateBlankNodesToVariables,l)),l}},Z_}var Lte;function KF(){return Lte||(Lte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.simplifiedJoin=t.accumulateGroupGraphPattern=t.translateBgp=t.translateGraphPattern=t.translateExpression=void 0;const e=u0(),r=Ff(),n=zIe(),i=WIe(),a=WF();t.translateExpression={name:"translateExpression",fun:({SUBRULE:s})=>({astFactory:o,algebraFactory:c},u)=>{if(o.isTerm(u))return c.createTermExpression(s(r.translateTerm,u));if(o.isWildcard(u))return c.createWildcardExpression();if(o.isExpressionAggregate(u))return c.createAggregateExpression(u.aggregation,s(t.translateExpression,u.expression[0]),u.distinct,o.isExpressionAggregateSeparator(u)?u.separator:void 0);if(o.isExpressionFunctionCall(u))return c.createNamedExpression(s(r.translateNamed,u.function),u.args.map(l=>s(t.translateExpression,l)));if(o.isExpressionOperator(u))return c.createOperatorExpression(u.operator,u.args.map(l=>s(t.translateExpression,l)));if(o.isExpressionPatternOperation(u))return c.createExistenceExpression(u.operator==="notexists",s(t.translateGraphPattern,u.args));throw new Error(`Unknown expression: ${JSON.stringify(u)}`)}},t.translateGraphPattern={name:"translateGraphPattern",fun:({SUBRULE:s})=>({astFactory:o,algebraFactory:c,useQuads:u},l)=>{if(o.isPatternBgp(l))return s(t.translateBgp,l);if(o.isPatternUnion(l))return c.createUnion(l.patterns.map(d=>s(t.translateGraphPattern,d)));if(o.isPatternGraph(l)){const d=o.patternGroup(l.patterns,l.loc);let f=s(t.translateGraphPattern,d);return u?f=s(a.recurseGraph,f,s(r.translateTerm,l.name),void 0):f=c.createGraph(f,s(r.translateTerm,l.name)),f}if(o.isPatternValues(l))return s(r.translateInlineData,l);if(o.isQuerySelect(l))return s(i.translateQuery,l,u,!1);if(o.isPatternGroup(l)){const d=[],f=[];for(const _ of l.patterns)o.isPatternFilter(_)?d.push(_):f.push(_);let h=c.createBgp([]);for(const _ of f)h=s(t.accumulateGroupGraphPattern,h,_);const p=d.map(_=>s(t.translateExpression,_.expression));if(p.length>0){let _=p[0];for(const g of p.slice(1))_=c.createOperatorExpression("&&",[_,g]);h=c.createFilter(h,_)}return h}throw new Error(`Unexpected pattern: ${l.subType}`)}},t.translateBgp={name:"translateBgp",fun:({SUBRULE:s})=>({astFactory:o,algebraFactory:c},u)=>{let l=[];const d=[],f=[];s(a.translateBasicGraphPattern,u.triples,f);for(const h of f)if(o.isPathPure(h.predicate)){const p=h,_=s(n.translatePath,p);for(const g of _)g.type===e.types.PATH?(l.length>0&&d.push(c.createBgp(l)),l=[],d.push(g)):l.push(g)}else l.push(s(a.translateQuad,h));return l.length>0&&d.push(c.createBgp(l)),d.length===1?d[0]:c.createJoin(d)}},t.accumulateGroupGraphPattern={name:"accumulateGroupGraphPattern",fun:({SUBRULE:s})=>({astFactory:o,algebraFactory:c},u,l)=>{if(o.isPatternOptional(l)){const f=s(t.translateGraphPattern,o.patternGroup(l.patterns,l.loc));return f.type===e.types.FILTER?c.createLeftJoin(u,f.input,f.expression):c.createLeftJoin(u,f)}if(o.isPatternMinus(l)){const f=s(t.translateGraphPattern,o.patternGroup(l.patterns,l.loc));return c.createMinus(u,f)}if(o.isPatternBind(l))return c.createExtend(u,s(r.translateTerm,l.variable),s(t.translateExpression,l.expression));if(o.isPatternService(l)){const f=o.patternGroup(l.patterns,l.loc),h=c.createService(s(t.translateGraphPattern,f),s(r.translateTerm,l.name),l.silent);return s(t.simplifiedJoin,u,h)}const d=s(t.translateGraphPattern,l);return s(t.simplifiedJoin,u,d)}},t.simplifiedJoin={name:"simplifiedJoin",fun:()=>({algebraFactory:s},o,c)=>(o.type===e.types.BGP&&c.type===e.types.BGP?o=s.createBgp([...o.patterns,...c.patterns]):o.type===e.types.BGP&&o.patterns.length===0?o=c:c.type===e.types.BGP&&c.patterns.length===0||(o=s.createJoin([o,c])),o)}}(vj)),vj}var jte;function KIe(){return jte||(jte=1,function(t){var e=E&&E.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateBoundAggregate=t.mapAggregate=t.translateAggregates=void 0;const r=e(Vtt()),n=Ff(),i=KF(),a=WF();t.translateAggregates={name:"translateAggregates",fun:({SUBRULE:s})=>({astFactory:o,algebraFactory:c,dataFactory:u},l,d)=>{const f=[],h={},p=o.isQuerySelect(l)||o.isQueryDescribe(l)?l.variables.map(v=>s(t.mapAggregate,v,h)):void 0,_=l.solutionModifiers.having?l.solutionModifiers.having.having.map(v=>s(t.mapAggregate,v,h)):void 0,g=l.solutionModifiers.order?l.solutionModifiers.order.orderDefs.map(v=>s(t.mapAggregate,v,h)):void 0;if(l.solutionModifiers.group??Object.keys(h).length>0){const v=Object.keys(h).map(T=>s(t.translateBoundAggregate,h[T],u.variable(T))),A=[];if(l.solutionModifiers.group)for(const T of l.solutionModifiers.group.groupings)if(o.isTerm(T))A.push(s(n.translateTerm,T));else{let S,P;"variable"in T?(S=s(n.translateTerm,T.variable),P=T.value):(S=s(n.generateFreshVar),P=T),d=c.createExtend(d,S,s(i.translateExpression,P)),A.push(S)}d=c.createGroup(d,A,v)}if(_)for(const v of _)d=c.createFilter(d,s(i.translateExpression,v));l.values&&(d=c.createJoin([d,s(n.translateInlineData,l.values)]));let m=[];if(p)if(p.some(v=>o.isWildcard(v)))m=[...s(n.inScopeVariables,l).values()].map(v=>u.variable(v)).sort((v,A)=>v.value.localeCompare(A.value));else for(const v of p)o.isTerm(v)?m.push(s(n.translateTerm,v)):(m.push(s(n.translateTerm,v.variable)),f.push(v));for(const v of f)d=c.createExtend(d,s(n.translateTerm,v.variable),s(i.translateExpression,v.expression));if(g&&(d=c.createOrderBy(d,g.map(v=>{let A=s(i.translateExpression,v.expression);return v.descending&&(A=c.createOperatorExpression("desc",[A])),A}))),o.isQuerySelect(l)&&(d=c.createProject(d,m)),l.distinct&&(d=c.createDistinct(d)),l.reduced&&(d=c.createReduced(d)),o.isQueryConstruct(l)){const v=[];s(a.translateBasicGraphPattern,l.template.triples,v),d=c.createConstruct(d,v.map(A=>s(a.translateQuad,A)))}else o.isQueryAsk(l)?d=c.createAsk(d):o.isQueryDescribe(l)&&(d=c.createDescribe(d,m));const y=l.solutionModifiers.limitOffset;if(((y==null?void 0:y.limit)??(y==null?void 0:y.offset))&&(d=c.createSlice(d,y.offset??0,y.limit)),l.datasets.clauses.length>0){const v=s(n.translateDatasetClause,l.datasets);d=c.createFrom(d,v.default,v.named)}return d}},t.mapAggregate={name:"mapAggregate",fun:({SUBRULE:s})=>({astFactory:o},c,u)=>{if(o.isExpressionAggregate(c)){const l=o.forcedAutoGenTree(c);let d;for(const[h,p]of Object.entries(u))if((0,r.default)(p,l)){d=o.termVariable(h,o.sourceLocation());break}if(d!==void 0)return d;const f=s(n.generateFreshVar);return u[f.value]=l,o.termVariable(f.value,o.sourceLocation())}return o.isExpressionPure(c)&&!o.isExpressionPatternOperation(c)?{...c,args:c.args.map(l=>s(t.mapAggregate,l,u))}:"expression"in c&&c.expression?{...c,expression:s(t.mapAggregate,c.expression,u)}:c}},t.translateBoundAggregate={name:"translateBoundAggregate",fun:({SUBRULE:s})=>(o,c,u)=>({...s(i.translateExpression,c),variable:u})}}(GL)),GL}var Bte;function c0(){return Bte||(Bte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(KIe(),t),r(u0(),t),r(Ff(),t),r(zIe(),t),r(KF(),t),r(WIe(),t),r(WF(),t),r(QIe(),t)}(VL)),VL}var Ij={},lo={},qte;function yO(){if(qte)return lo;qte=1;var t=E&&E.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(u,l);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,f)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),e=E&&E.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),r=E&&E.__importStar||function(){var c=function(u){return c=Object.getOwnPropertyNames||function(l){var d=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(d[d.length]=f);return d},c(u)};return function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d=c(u),f=0;f<d.length;f++)d[f]!=="default"&&t(l,u,d[f]);return e(l,u),l}}();Object.defineProperty(lo,"__esModule",{value:!0}),lo.registerProjection=lo.resetContext=lo.eTypes=void 0,lo.createAstContext=o;const n=di(),i=r(Ho()),a=Sz(),s=c0();function o(){return{project:!1,extend:[],group:[],aggregates:[],order:[],algebraFactory:new a.AlgebraFactory,astFactory:new n.AstFactory,transformer:new n.AstTransformer}}return lo.eTypes=i.ExpressionTypes,lo.resetContext={name:"resetContext",fun:()=>c=>{c.project=!1,c.extend=[],c.group=[],c.aggregates=[],c.order=[]}},lo.registerProjection={name:"registerProjection",fun:()=>(c,u)=>{u.type!==s.types.EXTEND&&u.type!==s.types.ORDER_BY&&u.type!==s.types.GRAPH&&(c.project=!1)}},lo}var Oj={},Rj={},Pj={},Nj={},Ute;function XIe(){return Ute||(Ute=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.translateAlgZeroOrOnePath=t.translateAlgZeroOrMorePath=t.translateAlgSeq=t.translateAlgOneOrMorePath=t.translateAlgNps=t.translateAlgLink=t.translateAlgInv=t.translateAlgAlt=t.translateAlgPathComponent=void 0;const e=u0(),r=d0();t.translateAlgPathComponent={name:"translatePathComponent",fun:({SUBRULE:n})=>(i,a)=>{switch(a.type){case e.types.ALT:return n(t.translateAlgAlt,a);case e.types.INV:return n(t.translateAlgInv,a);case e.types.LINK:return n(t.translateAlgLink,a);case e.types.NPS:return n(t.translateAlgNps,a);case e.types.ONE_OR_MORE_PATH:return n(t.translateAlgOneOrMorePath,a);case e.types.SEQ:return n(t.translateAlgSeq,a);case e.types.ZERO_OR_MORE_PATH:return n(t.translateAlgZeroOrMorePath,a);case e.types.ZERO_OR_ONE_PATH:return n(t.translateAlgZeroOrOnePath,a);default:throw new Error(`Unknown Path type ${a.type}`)}}},t.translateAlgAlt={name:"translateAlt",fun:({SUBRULE:n})=>({astFactory:i},a)=>{const s=a.input.map(o=>n(t.translateAlgPathComponent,o));return s.every(o=>i.isPathOfType(o,["!"]))?i.path("!",[i.path("|",s.flatMap(o=>o.items),i.gen())],i.gen()):i.path("|",s,i.gen())}},t.translateAlgInv={name:"translateInv",fun:({SUBRULE:n})=>({astFactory:i},a)=>{if(a.path.type===e.types.NPS){const s=a.path.iris.map(o=>i.path("^",[n(r.translateAlgTerm,o)],i.gen()));return s.length<=1?i.path("!",s,i.gen()):i.path("!",[i.path("|",s,i.gen())],i.gen())}return i.path("^",[n(t.translateAlgPathComponent,a.path)],i.gen())}},t.translateAlgLink={name:"translateLink",fun:({SUBRULE:n})=>(i,a)=>n(r.translateAlgTerm,a.iri)},t.translateAlgNps={name:"translateNps",fun:({SUBRULE:n})=>({astFactory:i},a)=>a.iris.length===1?i.path("!",[n(r.translateAlgTerm,a.iris[0])],i.gen()):i.path("!",[i.path("|",a.iris.map(s=>n(r.translateAlgTerm,s)),i.gen())],i.gen())},t.translateAlgOneOrMorePath={name:"translateOneOrMorePath",fun:({SUBRULE:n})=>({astFactory:i},a)=>i.path("+",[n(t.translateAlgPathComponent,a.path)],i.gen())},t.translateAlgSeq={name:"translateSeq",fun:({SUBRULE:n})=>({astFactory:i},a)=>i.path("/",a.input.map(s=>n(t.translateAlgPathComponent,s)),i.gen())},t.translateAlgZeroOrMorePath={name:"translateZeroOrMorePath",fun:({SUBRULE:n})=>({astFactory:i},a)=>i.path("*",[n(t.translateAlgPathComponent,a.path)],i.gen())},t.translateAlgZeroOrOnePath={name:"translateZeroOrOnePath",fun:({SUBRULE:n})=>({astFactory:i},a)=>i.path("?",[n(t.translateAlgPathComponent,a.path)],i.gen())}}(Nj)),Nj}var Fj={},Vte;function JIe(){return Vte||(Vte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.objectContainsVariable=t.filterReplace=t.putExtensionsInGroup=t.registerVariables=t.registerOrderBy=t.registerAlgGroupBy=t.translateAlgProject=t.replaceAlgAggregatorVariables=t.translateAlgConstruct=void 0;const e=c0(),r=yO(),n=XF(),i=d0(),a=l0();t.translateAlgConstruct={name:"translateConstruct",fun:({SUBRULE:o})=>({astFactory:c,order:u},l)=>{const d=c.queryConstruct(c.gen(),[],c.patternBgp(l.template.map(f=>o(i.translateAlgPattern,f)),c.gen()),c.patternGroup([o(a.translateAlgPatternNew,l.input)].flat(),c.gen()),{},c.datasetClauses([],c.gen()));return o(t.registerOrderBy,d),u.length=0,c.patternGroup([d],c.gen())}};function s(o){return o.termType!==void 0&&o.termType!=="Quad"&&o.termType!=="wildcard"&&o.termType!=="Wildcard"}t.replaceAlgAggregatorVariables={name:"replaceAggregatorVariables",fun:({SUBRULE:o})=>({astFactory:c},u,l)=>{const d=s(u)?o(i.translateAlgTerm,u):u;if(c.isTermVariable(d)){if(l[d.value])return l[d.value]}else if(Array.isArray(u))u=u.map(f=>o(t.replaceAlgAggregatorVariables,f,l));else if(typeof u=="object"){const f=u;for(const h of Object.keys(f))f[h]=o(t.replaceAlgAggregatorVariables,f[h],l)}return u}},t.translateAlgProject={name:"translateProject",fun:({SUBRULE:o})=>(c,u,l)=>{const d=c.astFactory,f={type:"query",solutionModifiers:{},loc:d.gen(),datasets:d.datasetClauses([],d.gen()),context:[]},h=f;let p;l===e.types.PROJECT?(f.subType="select",p=u.variables):l===e.types.ASK?f.subType="ask":l===e.types.DESCRIBE&&(f.subType="describe",p=u.terms);const _=c.extend,g=c.group,m=c.aggregates,y=c.order;o(r.resetContext),c.project=!0;let v=[o(a.translateAlgPatternNew,u.input)].flat();v.length===1&&d.isPatternGroup(v[0])&&(v=v[0].patterns),f.where=d.patternGroup(v,d.gen());const A={};for(const P of c.aggregates)A[o(i.translateAlgTerm,P.variable).value]=o(n.translateAlgPureExpression,P);const T={};for(const P of c.extend.reverse()){const j=o(n.translateAlgPureExpression,P.expression);T[o(i.translateAlgTerm,P.variable).value]=o(t.replaceAlgAggregatorVariables,j,A)}o(t.registerAlgGroupBy,f,T),o(t.registerOrderBy,f),o(t.registerVariables,h,p,T),o(t.putExtensionsInGroup,f,T);const S=[];return f.where=o(t.filterReplace,f.where,A,S),S.length>0&&(h.solutionModifiers.having=d.solutionModifierHaving(S,d.gen())),c.extend=_,c.group=g,c.aggregates=m,c.order=y,d.patternGroup([h],d.gen())}},t.registerAlgGroupBy={name:"registerGroupBy",fun:({SUBRULE:o})=>({astFactory:c,group:u},l,d)=>{u.length>0&&(l.solutionModifiers.group=c.solutionModifierGroup(u.map(f=>{const h=o(i.translateAlgTerm,f);if(d[h.value]){const p=d[h.value];return delete d[h.value],{variable:h,value:p,loc:c.gen()}}return h}),c.gen()))}},t.registerOrderBy={name:"registerOrderBy",fun:({SUBRULE:o})=>({astFactory:c,order:u},l)=>{u.length>0&&(l.solutionModifiers.order=c.solutionModifierOrder(u.map(d=>o(n.translateAlgExpressionOrOrdering,d)).map(d=>c.isExpression(d)?{expression:d,descending:!1,loc:c.gen()}:d),c.gen()))}},t.registerVariables={name:"registerVariables",fun:({SUBRULE:o})=>({astFactory:c},u,l,d)=>{l&&(u.variables=l.map(f=>{const h=o(i.translateAlgTerm,f);if(d[h.value]){const p=d[h.value];return delete d[h.value],c.patternBind(p,h,c.gen())}return h}),u.variables.length===0&&(u.variables=[c.wildcard(c.gen())]))}},t.putExtensionsInGroup={name:"putExtensionsInGroup",fun:()=>({astFactory:o},c,u)=>{const l=Object.entries(u);if(l.length>0){c.where=c.where??o.patternGroup([],o.gen());for(const[d,f]of l)c.where.patterns.push(o.patternBind(f,o.termVariable(d,o.gen()),o.gen()))}}},t.filterReplace={name:"filterReplace",fun:({SUBRULE:o})=>({astFactory:c},u,l,d)=>{if(!c.isPatternGroup(u))return u;const f=u.patterns.map(h=>o(t.filterReplace,h,l,d)).flatMap(h=>c.isPatternFilter(h)&&o(t.objectContainsVariable,h,Object.keys(l))?(d.push(o(t.replaceAlgAggregatorVariables,h.expression,l)),[]):[h]);return c.patternGroup(f,c.gen())}},t.objectContainsVariable={name:"objectContainsVariable",fun:({SUBRULE:o})=>({astFactory:c},u,l)=>{const d=u;return c.isTermVariable(d)?l.includes(d.value):Array.isArray(u)?u.some(f=>o(t.objectContainsVariable,f,l)):u===Object(u)?Object.keys(u).some(f=>o(t.objectContainsVariable,u[f],l)):!1}}}(Fj)),Fj}var Gte;function l0(){return Gte||(Gte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.translateAlgValues=t.translateAlgUnion=t.algWrapInPatternGroup=t.translateAlgSlice=t.operationAlgInputAsPatternList=t.translateAlgService=t.translateAlgMinus=t.translateAlgLeftJoin=t.translateAlgJoin=t.translateAlgGroup=t.translateAlgGraph=t.translateAlgFilter=t.translateAlgFrom=t.translateAlgPath=t.translateAlgBgp=t.translateAlgBoundAggregate=t.translateAlgPatternNew=t.translateAlgSinglePattern=t.translateAlgPatternIntoGroup=void 0;const e=c0(),r=yO(),n=XF(),i=d0(),a=XIe(),s=JIe();t.translateAlgPatternIntoGroup={name:"translatePatternIntoGroup",fun:({SUBRULE:o})=>(c,u)=>{switch(u.type){case e.types.ASK:return o(s.translateAlgProject,u,e.types.ASK);case e.types.PROJECT:return o(s.translateAlgProject,u,e.types.PROJECT);case e.types.CONSTRUCT:return o(s.translateAlgConstruct,u);case e.types.DESCRIBE:return o(s.translateAlgProject,u,e.types.DESCRIBE);case e.types.DISTINCT:return o(i.translateAlgDistinct,u);case e.types.FROM:return o(t.translateAlgFrom,u);case e.types.FILTER:return o(t.translateAlgFilter,u);case e.types.REDUCED:return o(i.translateAlgReduced,u);case e.types.SLICE:return o(t.translateAlgSlice,u);default:throw new Error(`Unknown Operation type ${u.type}`)}}},t.translateAlgSinglePattern={name:"translateSinglePattern",fun:({SUBRULE:o})=>({astFactory:c},u)=>{switch(o(r.registerProjection,u),u.type){case e.types.PATH:return o(t.translateAlgPath,u);case e.types.BGP:return o(t.translateAlgBgp,u);case e.types.GRAPH:return o(t.translateAlgGraph,u);case e.types.SERVICE:return o(t.translateAlgService,u);case e.types.UNION:return o(t.translateAlgUnion,u);case e.types.VALUES:return o(t.translateAlgValues,u);case e.types.PATTERN:return c.patternBgp([o(i.translateAlgPattern,u)],c.gen());default:return o(t.translateAlgPatternIntoGroup,u)}}},t.translateAlgPatternNew={name:"translatePatternNew",fun:({SUBRULE:o})=>(c,u)=>{switch(o(r.registerProjection,u),u.type){case e.types.ORDER_BY:return o(i.translateAlgOrderBy,u);case e.types.GROUP:return o(t.translateAlgGroup,u);case e.types.EXTEND:return o(i.translateAlgExtend,u);case e.types.JOIN:return o(t.translateAlgJoin,u);case e.types.LEFT_JOIN:return o(t.translateAlgLeftJoin,u);case e.types.MINUS:return o(t.translateAlgMinus,u);default:return o(t.translateAlgSinglePattern,u)}}},t.translateAlgBoundAggregate={name:"translateBoundAggregate",fun:()=>(o,c)=>c},t.translateAlgBgp={name:"translateBgp",fun:({SUBRULE:o})=>({astFactory:c},u)=>{const l=u.patterns.map(d=>o(i.translateAlgPattern,d));return c.patternBgp(l,c.gen())}},t.translateAlgPath={name:"translatePath",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.patternBgp([c.triple(o(i.translateAlgTerm,u.subject),o(a.translateAlgPathComponent,u.predicate),o(i.translateAlgTerm,u.object))],c.gen())},t.translateAlgFrom={name:"translateFrom",fun:({SUBRULE:o})=>(c,u)=>{const l=o(t.translateAlgPatternIntoGroup,u.input),d=l.patterns[0];return d.datasets=o(i.translateAlgDatasetClauses,u.default,u.named),l}},t.translateAlgFilter={name:"translateFilter",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.patternGroup([o(t.translateAlgPatternNew,u.input),c.patternFilter(o(n.translateAlgPureExpression,u.expression),c.gen())].flat(),c.gen())},t.translateAlgGraph={name:"translateGraph",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.patternGraph(o(i.translateAlgTerm,u.name),[o(t.translateAlgPatternNew,u.input)].flat(),c.gen())},t.translateAlgGroup={name:"translateGroup",fun:({SUBRULE:o})=>({aggregates:c,group:u},l)=>{const d=o(t.translateAlgPatternNew,l.input),f=l.aggregates.map(h=>o(t.translateAlgBoundAggregate,h));return c.push(...f),u.push(...l.variables),d}},t.translateAlgJoin={name:"translateJoin",fun:({SUBRULE:o})=>({astFactory:c},u)=>{const l=u.input.flatMap(f=>o(t.translateAlgPatternNew,f)),d=[];for(const f of l){const h=d.at(-1);!c.isPatternBgp(f)||d.length===0||!c.isPatternBgp(h)?d.push(f):h.triples.push(...f.triples)}return d}},t.translateAlgLeftJoin={name:"translateLeftJoin",fun:({SUBRULE:o})=>({astFactory:c},u)=>{const l=c.patternOptional(o(t.operationAlgInputAsPatternList,u.input[1]),c.gen());return u.expression&&l.patterns.push(c.patternFilter(o(n.translateAlgPureExpression,u.expression),c.gen())),l.patterns=l.patterns.filter(Boolean),[o(t.translateAlgPatternNew,u.input[0]),l].flat()}},t.translateAlgMinus={name:"translateMinus",fun:({SUBRULE:o})=>({astFactory:c},u)=>[o(t.translateAlgPatternNew,u.input[0]),c.patternMinus(o(t.operationAlgInputAsPatternList,u.input[1]),c.gen())].flat()},t.translateAlgService={name:"translateService",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.patternService(o(i.translateAlgTerm,u.name),o(t.operationAlgInputAsPatternList,u.input),u.silent,c.gen())},t.operationAlgInputAsPatternList={name:"operationInputAsPatternList",fun:({SUBRULE:o})=>(c,u)=>{const l=o(t.translateAlgPatternNew,u);return l?Array.isArray(l)?l:[l]:[]}},t.translateAlgSlice={name:"translateSlice",fun:({SUBRULE:o})=>({astFactory:c},u)=>{const l=o(t.translateAlgPatternIntoGroup,u.input),d=l.patterns[0];return u.start!==0&&(d.solutionModifiers.limitOffset=d.solutionModifiers.limitOffset??c.solutionModifierLimitOffset(void 0,u.start,c.gen()),d.solutionModifiers.limitOffset.offset=u.start),u.length!==void 0&&(d.solutionModifiers.limitOffset=d.solutionModifiers.limitOffset??c.solutionModifierLimitOffset(u.length,void 0,c.gen()),d.solutionModifiers.limitOffset.limit=u.length),l}},t.algWrapInPatternGroup={name:"wrapInPatternGroup",fun:()=>({astFactory:o},c)=>Array.isArray(c)?o.patternGroup(c,o.gen()):o.isPatternGroup(c)?c:o.patternGroup([c],o.gen())},t.translateAlgUnion={name:"translateUnion",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.patternUnion(u.input.map(l=>o(t.algWrapInPatternGroup,o(t.translateAlgPatternNew,l))),c.gen())},t.translateAlgValues={name:"translateValues",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.patternValues(u.variables.map(l=>c.termVariable(l.value,c.gen())),u.bindings.map(l=>{const d={};for(const f of u.variables){const h=f.value;l[h]?d[h]=o(i.translateAlgTerm,l[h]):d[h]=void 0}return d}),c.gen())}}(Pj)),Pj}var Hte;function d0(){return Hte||(Hte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.translateAlgDistinct=t.translateAlgReduced=t.translateAlgPattern=t.translateAlgOrderBy=t.translateAlgDatasetClauses=t.translateAlgExtend=t.translateAlgTerm=void 0;const e=Ul(),r=XF(),n=l0();t.translateAlgTerm={name:"translateTerm",fun:({SUBRULE:i})=>({astFactory:a},s)=>{if(s.termType==="NamedNode")return a.termNamed(a.gen(),s.value);if(s.termType==="BlankNode")return a.termBlank(s.value,a.gen());if(s.termType==="Variable")return a.termVariable(s.value,a.gen());if(s.termType==="Literal")return a.termLiteral(a.gen(),s.value,s.language?s.language:i(t.translateAlgTerm,s.datatype));throw new Error(`invalid term type: ${s.termType}`)}},t.translateAlgExtend={name:"translateExtend",fun:({SUBRULE:i})=>({astFactory:a,project:s,extend:o},c)=>{if(s)return o.push(c),i(n.translateAlgPatternNew,c.input);const u=[];function l(f){return f.type===e.Algebra.Types.EXTEND?(u.push(f),l(f.input)):f}const d=l(c);return a.patternGroup([i(n.translateAlgPatternNew,d),...u.reverse().map(f=>a.patternBind(i(r.translateAlgPureExpression,f.expression),i(t.translateAlgTerm,f.variable),a.gen()))].flat(),a.gen())}},t.translateAlgDatasetClauses={name:"translateDatasetClauses",fun:({SUBRULE:i})=>({astFactory:a},s,o)=>a.datasetClauses([...s.map(c=>({clauseType:"default",value:i(t.translateAlgTerm,c)})),...o.map(c=>({clauseType:"named",value:i(t.translateAlgTerm,c)}))],a.gen())},t.translateAlgOrderBy={name:"translateOrderBy",fun:({SUBRULE:i})=>({order:a},s)=>(a.push(...s.expressions),i(n.translateAlgPatternNew,s.input))},t.translateAlgPattern={name:"translatePattern",fun:({SUBRULE:i})=>({astFactory:a},s)=>a.triple(i(t.translateAlgTerm,s.subject),i(t.translateAlgTerm,s.predicate),i(t.translateAlgTerm,s.object))},t.translateAlgReduced={name:"translateReduced",fun:({SUBRULE:i})=>(a,s)=>{const o=i(n.translateAlgPatternIntoGroup,s.input),c=o.patterns[0];return c.reduced=!0,o}},t.translateAlgDistinct={name:"translateDistinct",fun:({SUBRULE:i})=>(a,s)=>{const o=i(n.translateAlgPatternIntoGroup,s.input),c=o.patterns[0];return c.distinct=!0,o}}}(Rj)),Rj}var kte;function XF(){return kte||(kte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.translateAlgWildcardExpression=t.translateAlgOperatorExpression=t.translateAlgPureOperatorExpression=t.translateAlgNamedExpression=t.translateAlgExistenceExpression=t.translateAlgAggregateExpression=t.translateAlgAnyExpression=t.translateAlgExpressionOrOrdering=t.translateAlgExpressionOrWild=t.translateAlgPureExpression=void 0;const e=yO(),r=d0(),n=l0();t.translateAlgPureExpression={name:"translatePureExpression",fun:({SUBRULE:i})=>(a,s)=>{switch(s.subType){case e.eTypes.AGGREGATE:return i(t.translateAlgAggregateExpression,s);case e.eTypes.EXISTENCE:return i(t.translateAlgExistenceExpression,s);case e.eTypes.NAMED:return i(t.translateAlgNamedExpression,s);case e.eTypes.OPERATOR:return i(t.translateAlgPureOperatorExpression,s);case e.eTypes.TERM:return i(r.translateAlgTerm,s.term);default:throw new Error(`Unknown Expression Operation type ${s.subType}`)}}},t.translateAlgExpressionOrWild={name:"translateExpressionOrWild",fun:({SUBRULE:i})=>(a,s)=>s.subType===e.eTypes.WILDCARD?i(t.translateAlgWildcardExpression,s):i(t.translateAlgPureExpression,s)},t.translateAlgExpressionOrOrdering={name:"translateExpressionOrOrdering",fun:({SUBRULE:i})=>(a,s)=>s.subType===e.eTypes.OPERATOR?i(t.translateAlgOperatorExpression,s):i(t.translateAlgPureExpression,s)},t.translateAlgAnyExpression={name:"translateAnyExpression",fun:({SUBRULE:i})=>(a,s)=>s.subType===e.eTypes.OPERATOR?i(t.translateAlgOperatorExpression,s):i(t.translateAlgExpressionOrWild,s)},t.translateAlgAggregateExpression={name:"translateAggregateExpression",fun:({SUBRULE:i})=>({astFactory:a},s)=>a.aggregate(s.aggregator,s.distinct,i(t.translateAlgExpressionOrWild,s.expression),s.separator,a.gen())},t.translateAlgExistenceExpression={name:"translateExistenceExpression",fun:({SUBRULE:i})=>({astFactory:a},s)=>a.expressionPatternOperation(s.not?"notexists":"exists",a.patternGroup([i(n.translateAlgPatternNew,s.input)].flat(),a.gen()),a.gen())},t.translateAlgNamedExpression={name:"translateNamedExpression",fun:({SUBRULE:i})=>({astFactory:a},s)=>a.expressionFunctionCall(i(r.translateAlgTerm,s.name),s.args.map(o=>i(t.translateAlgPureExpression,o)),!1,a.gen())},t.translateAlgPureOperatorExpression={name:"translatePureOperatorExpression",fun:({SUBRULE:i})=>({astFactory:a},s)=>a.expressionOperation(s.operator,s.args.map(o=>i(t.translateAlgPureExpression,o)),a.gen())},t.translateAlgOperatorExpression={name:"translateOperatorExpression",fun:({SUBRULE:i})=>({astFactory:a},s)=>s.operator==="desc"?{expression:i(t.translateAlgPureExpression,s.args[0]),descending:!0,loc:a.gen()}:i(t.translateAlgPureOperatorExpression,s)},t.translateAlgWildcardExpression={name:"translateWildcardExpression",fun:()=>({astFactory:i},a)=>i.wildcard(i.gen())}}(Oj)),Oj}var Mj={},zte;function xz(){return zte||(zte=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.splitAlgBgpToGraphs=t.removeAlgQuadsRecursive=t.removeAlgQuads=void 0;const e=c0();t.removeAlgQuads={name:"removeQuads",fun:({SUBRULE:r})=>(n,i)=>r(t.removeAlgQuadsRecursive,i,[])},t.removeAlgQuadsRecursive={name:"removeQuadsRecursive",fun:({SUBRULE:r})=>({algebraFactory:n},i,a)=>{if(Array.isArray(i))return i.map(d=>r(t.removeAlgQuadsRecursive,d,a));if(typeof i!="object"||i===null||!("type"in i)||!i.type)return i;const s=i;if(s.type===e.types.DELETE_INSERT)return i;if((s.type===e.types.PATTERN||s.type===e.types.PATH)&&s.graph){const d=s.graph;return a.push(d),d.value!==""?s.type===e.types.PATTERN?n.createPattern(s.subject,s.predicate,s.object):n.createPath(s.subject,s.predicate,s.object):s}const o={},c={},u={};for(const[d,f]of Object.entries(s)){const h=[];if(o[d]=r(t.removeAlgQuadsRecursive,f,h),h.length>0){c[d]=h;for(const p of h)u[p.value]=p}}const l=Object.keys(u);if(l.length>0)if(l.length===1&&![e.types.PROJECT,e.types.SERVICE].includes(s.type))a.push(u[l[0]]);else{if(s.type===e.types.BGP)return r(t.splitAlgBgpToGraphs,s,c.patterns);for(const d of Object.keys(c)){const f=o[d];Array.isArray(f)?o[d]=f.map((h,p)=>c[d][p].termType==="DefaultGraph"?h:n.createGraph(h,c[d][p])):c[d][0].termType!=="DefaultGraph"&&(o[d]=n.createGraph(f,c[d][0]))}}return o}},t.splitAlgBgpToGraphs={name:"splitBgpToGraphs",fun:()=>({algebraFactory:r},n,i)=>{const a={};for(const[c,u]of n.patterns.entries()){const l=i[c];a[l.value]=a[l.value]??{patterns:[],graph:l},a[l.value].patterns.push(u)}const s=[];for(const[c,{patterns:u,graph:l}]of Object.entries(a)){const d=r.createBgp(u);s.push(c===""?d:r.createGraph(d,l))}let o=s[0];for(const c of s.slice(1))o=r.createJoin([o,c]);return o}}}(Mj)),Mj}var em={},Dj={},Cj={},Rn={},Lj={},Ir={},Qte;function YIe(){if(Qte)return Ir;Qte=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.TRIPLE_TERM_NAMES=Ir.QUAD_TERM_NAMES=void 0,Ir.getTerms=r,Ir.getTermsNested=n,Ir.getNamedTerms=i,Ir.collectNamedTerms=a,Ir.forEachTerms=s,Ir.forEachTermsNested=o,Ir.filterTerms=c,Ir.filterTermsNested=u,Ir.filterQuadTermNames=l,Ir.filterQuadTermNamesNested=d,Ir.mapTerms=f,Ir.mapTermsNested=h,Ir.reduceTerms=p,Ir.reduceTermsNested=_,Ir.everyTerms=g,Ir.everyTermsNested=m,Ir.someTerms=y,Ir.someTermsNested=v,Ir.getValueNestedPath=A,Ir.matchTerm=T,Ir.matchPattern=S,Ir.matchPatternComplete=P,Ir.matchPatternMappings=j;const t=jr(),e=new t.DataFactory;Ir.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Ir.TRIPLE_TERM_NAMES=["subject","predicate","object"];function r(F,N){return N&&F.graph.termType==="DefaultGraph"?[F.subject,F.predicate,F.object]:[F.subject,F.predicate,F.object,F.graph]}function n(F,N){const R=[];for(const C of r(F,N))C.termType==="Quad"?n(C,N).forEach(M=>R.push(M)):R.push(C);return R}function i(F){return[{key:"subject",value:F.subject},{key:"predicate",value:F.predicate},{key:"object",value:F.object},{key:"graph",value:F.graph}]}function a(F,N,R){const C={};return F.forEach(M=>C[M.key]=M.value),N&&(C.subject=C.subject||N("subject"),C.predicate=C.predicate||N("predicate"),C.object=C.object||N("object"),C.graph=C.graph||N("graph")),(R||e).quad(C.subject,C.predicate,C.object,C.graph)}function s(F,N){N(F.subject,"subject"),N(F.predicate,"predicate"),N(F.object,"object"),N(F.graph,"graph")}function o(F,N,R=[]){F.subject.termType==="Quad"?o(F.subject,N,[...R,"subject"]):N(F.subject,[...R,"subject"]),F.predicate.termType==="Quad"?o(F.predicate,N,[...R,"predicate"]):N(F.predicate,[...R,"predicate"]),F.object.termType==="Quad"?o(F.object,N,[...R,"object"]):N(F.object,[...R,"object"]),F.graph.termType==="Quad"?o(F.graph,N,[...R,"graph"]):N(F.graph,[...R,"graph"])}function c(F,N){const R=[];return N(F.subject,"subject")&&R.push(F.subject),N(F.predicate,"predicate")&&R.push(F.predicate),N(F.object,"object")&&R.push(F.object),N(F.graph,"graph")&&R.push(F.graph),R}function u(F,N,R=[]){let C=[];return F.subject.termType==="Quad"?C=[...C,...u(F.subject,N,[...R,"subject"])]:N(F.subject,[...R,"subject"])&&C.push(F.subject),F.predicate.termType==="Quad"?C=[...C,...u(F.predicate,N,[...R,"predicate"])]:N(F.predicate,[...R,"predicate"])&&C.push(F.predicate),F.object.termType==="Quad"?C=[...C,...u(F.object,N,[...R,"object"])]:N(F.object,[...R,"object"])&&C.push(F.object),F.graph.termType==="Quad"?C=[...C,...u(F.graph,N,[...R,"graph"])]:N(F.graph,[...R,"graph"])&&C.push(F.graph),C}function l(F,N){const R=[];return N(F.subject,"subject")&&R.push("subject"),N(F.predicate,"predicate")&&R.push("predicate"),N(F.object,"object")&&R.push("object"),N(F.graph,"graph")&&R.push("graph"),R}function d(F,N,R=[]){let C=[];const M=[...R,"subject"];F.subject.termType==="Quad"?C=[...C,...d(F.subject,N,M)]:N(F.subject,M)&&C.push(M);const U=[...R,"predicate"];F.predicate.termType==="Quad"?C=[...C,...d(F.predicate,N,U)]:N(F.predicate,U)&&C.push(U);const B=[...R,"object"];F.object.termType==="Quad"?C=[...C,...d(F.object,N,B)]:N(F.object,B)&&C.push(B);const G=[...R,"graph"];return F.graph.termType==="Quad"?C=[...C,...d(F.graph,N,G)]:N(F.graph,G)&&C.push(G),C}function f(F,N,R){return(R||e).quad(N(F.subject,"subject"),N(F.predicate,"predicate"),N(F.object,"object"),N(F.graph,"graph"))}function h(F,N,R,C=[]){return(R||e).quad(F.subject.termType==="Quad"?h(F.subject,N,R,[...C,"subject"]):N(F.subject,[...C,"subject"]),F.predicate.termType==="Quad"?h(F.predicate,N,R,[...C,"predicate"]):N(F.predicate,[...C,"predicate"]),F.object.termType==="Quad"?h(F.object,N,R,[...C,"object"]):N(F.object,[...C,"object"]),F.graph.termType==="Quad"?h(F.graph,N,R,[...C,"graph"]):N(F.graph,[...C,"graph"]))}function p(F,N,R){let C=R;return C=N(C,F.subject,"subject"),C=N(C,F.predicate,"predicate"),C=N(C,F.object,"object"),N(C,F.graph,"graph")}function _(F,N,R,C=[]){let M=R;return F.subject.termType==="Quad"?M=_(F.subject,N,M,[...C,"subject"]):M=N(M,F.subject,[...C,"subject"]),F.predicate.termType==="Quad"?M=_(F.predicate,N,M,[...C,"predicate"]):M=N(M,F.predicate,[...C,"predicate"]),F.object.termType==="Quad"?M=_(F.object,N,M,[...C,"object"]):M=N(M,F.object,[...C,"object"]),F.graph.termType==="Quad"?M=_(F.graph,N,M,[...C,"graph"]):M=N(M,F.graph,[...C,"graph"]),M}function g(F,N){return N(F.subject,"subject")&&N(F.predicate,"predicate")&&N(F.object,"object")&&N(F.graph,"graph")}function m(F,N,R=[]){return(F.subject.termType==="Quad"?m(F.subject,N,[...R,"subject"]):N(F.subject,[...R,"subject"]))&&(F.predicate.termType==="Quad"?m(F.predicate,N,[...R,"predicate"]):N(F.predicate,[...R,"predicate"]))&&(F.object.termType==="Quad"?m(F.object,N,[...R,"object"]):N(F.object,[...R,"object"]))&&(F.graph.termType==="Quad"?m(F.graph,N,[...R,"graph"]):N(F.graph,[...R,"graph"]))}function y(F,N){return N(F.subject,"subject")||N(F.predicate,"predicate")||N(F.object,"object")||N(F.graph,"graph")}function v(F,N,R=[]){return(F.subject.termType==="Quad"?v(F.subject,N,[...R,"subject"]):N(F.subject,[...R,"subject"]))||(F.predicate.termType==="Quad"?v(F.predicate,N,[...R,"predicate"]):N(F.predicate,[...R,"predicate"]))||(F.object.termType==="Quad"?v(F.object,N,[...R,"object"]):N(F.object,[...R,"object"]))||(F.graph.termType==="Quad"?v(F.graph,N,[...R,"graph"]):N(F.graph,[...R,"graph"]))}function A(F,N){if(N.length===0)return F;if(F.termType==="Quad")return A(F[N[0]],N.slice(1));throw new Error(`Tried to get ${N[0]} from term of type ${F.termType}`)}function T(F,N){return!N||N.termType==="Variable"||N.termType==="Quad"&&F.termType==="Quad"&&P(F,N)||N.equals(F)}function S(F,N,R,C,M){return T(F.subject,N)&&T(F.predicate,R)&&T(F.object,C)&&T(F.graph,M)}function P(F,N){return S(F,N.subject,N.predicate,N.object,N.graph)}function j(F,N,R={}){const C={};function M(U,B){return g(U,(G,K)=>{var $,se;const pe=B[K];switch(G.termType){case"Variable":return R.skipVarMapping&&pe.termType==="Variable"||((se=($=C[G.value])===null||$===void 0?void 0:$.equals(pe))!==null&&se!==void 0?se:(C[G.value]=pe,!0));case"Quad":return pe.termType==="Quad"&&M(G,pe);default:return G.equals(pe)}})}return M(N,F)&&(R.returnMappings?C:!0)}return Ir}var Ea={},Wte;function mrt(){if(Wte)return Ea;Wte=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.TERM_TYPES=void 0,Ea.uniqTerms=e,Ea.getTermsOfType=r,Ea.getNamedNodes=n,Ea.getBlankNodes=i,Ea.getLiterals=a,Ea.getVariables=s,Ea.getDefaultGraphs=o,Ea.getQuads=c;const t=Br();Ea.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(u){const l={};return u.filter(d=>{const f=(0,t.termToString)(d);return!(f in l)&&(l[f]=!0)})}function r(u,l){return u.filter(d=>d.termType===l)}function n(u){return r(u,"NamedNode")}function i(u){return r(u,"BlankNode")}function a(u){return r(u,"Literal")}function s(u){return r(u,"Variable")}function o(u){return r(u,"DefaultGraph")}function c(u){return r(u,"Quad")}return Ea}var Kte;function Fi(){return Kte||(Kte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(YIe(),t),r(mrt(),t)}(Lj)),Lj}var jj={exports:{}};/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */var Xte;function Ez(){return Xte||(Xte=1,function(t){(function(){var e;function r(n,i){var a=this instanceof r?this:e;if(a.reset(i),typeof n=="string"&&n.length>0&&a.hash(n),a!==this)return a}r.prototype.hash=function(n){var i,a,s,o,c;switch(c=n.length,this.len+=c,a=this.k1,s=0,this.rem){case 0:a^=c>s?n.charCodeAt(s++)&65535:0;case 1:a^=c>s?(n.charCodeAt(s++)&65535)<<8:0;case 2:a^=c>s?(n.charCodeAt(s++)&65535)<<16:0;case 3:a^=c>s?(n.charCodeAt(s)&255)<<24:0,a^=c>s?(n.charCodeAt(s++)&65280)>>8:0}if(this.rem=c+this.rem&3,c-=this.rem,c>0){for(i=this.h1;a=a*11601+(a&65535)*3432906752&4294967295,a=a<<15|a>>>17,a=a*13715+(a&65535)*461832192&4294967295,i^=a,i=i<<13|i>>>19,i=i*5+3864292196&4294967295,!(s>=c);)a=n.charCodeAt(s++)&65535^(n.charCodeAt(s++)&65535)<<8^(n.charCodeAt(s++)&65535)<<16,o=n.charCodeAt(s++),a^=(o&255)<<24^(o&65280)>>8;switch(a=0,this.rem){case 3:a^=(n.charCodeAt(s+2)&65535)<<16;case 2:a^=(n.charCodeAt(s+1)&65535)<<8;case 1:a^=n.charCodeAt(s)&65535}this.h1=i}return this.k1=a,this},r.prototype.result=function(){var n,i;return n=this.k1,i=this.h1,n>0&&(n=n*11601+(n&65535)*3432906752&4294967295,n=n<<15|n>>>17,n=n*13715+(n&65535)*461832192&4294967295,i^=n),i^=this.len,i^=i>>>16,i=i*51819+(i&65535)*2246770688&4294967295,i^=i>>>13,i=i*44597+(i&65535)*3266445312&4294967295,i^=i>>>16,i>>>0},r.prototype.reset=function(n){return this.h1=typeof n=="number"?n:0,this.rem=this.k1=this.len=0,this},e=new r,t.exports=r})()}(jj)),jj.exports}var Jte;function grt(){if(Jte)return Rn;Jte=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.isomorphic=n,Rn.getBijection=i,Rn.getBijectionInner=a,Rn.hashValues=o,Rn.hasValue=c,Rn.getQuadsWithBlankNodes=u,Rn.getQuadsWithoutBlankNodes=l,Rn.indexGraph=d,Rn.deindexGraph=f,Rn.uniqGraph=h,Rn.getGraphBlankNodes=p,Rn.hashTerms=_,Rn.hashTerm=g,Rn.hashNumber=m,Rn.quadToSignature=y,Rn.termToSignature=v,Rn.isTermGrounded=A;const t=Br(),e=Fi(),r=Ez();function n(T,S){return!!i(T,S)}function i(T,S){const P=d(l(T)),j=d(l(S));if(Object.keys(P).length!==Object.keys(j).length)return null;for(const M in P)if(P[M]!==j[M])return null;const F=h(u(T)),N=h(u(S)),R=p(T),C=p(S);return a(F,N,R,C)}function a(T,S,P,j,F,N){F||(F={}),N||(N={});const[R,C]=_(T,P,F),[M,U]=_(S,j,N);if(Object.keys(R).length!==Object.keys(M).length)return null;for(const G in R)if(!c(M,R[G]))return null;let B={};for(const G of P){const K=(0,t.termToString)(G),$=C[K];for(const se in U)if(U[se]===$){B[K]=se,delete U[se];break}}if(!s(Object.keys(B).sort(),P.map(t.termToString).sort())||!s(o(B).sort(),j.map(t.termToString).sort())){B=null;for(const G of P){const K=(0,t.termToString)(G);if(!R[K])for(const $ of j){const se=(0,t.termToString)($);if(!M[se]&&C[K]===U[se]){const pe=m(K);B=a(T,S,P,j,Object.assign(Object.assign({},R),{[K]:pe}),Object.assign(Object.assign({},M),{[se]:pe}))}}}}return B}function s(T,S){if(T.length!==S.length)return!1;for(let P=T.length;P--;)if(T[P]!==S[P])return!1;return!0}function o(T){const S=[];for(const P in T)S.push(T[P]);return S}function c(T,S){for(const P in T)if(T[P]===S)return!0;return!1}function u(T){return T.filter(S=>(0,e.someTerms)(S,P=>P.termType==="BlankNode"||P.termType==="Quad"&&(0,e.getTermsNested)(P).some(j=>j.termType==="BlankNode")))}function l(T){return T.filter(S=>(0,e.everyTerms)(S,P=>P.termType!=="BlankNode"&&!(P.termType==="Quad"&&(0,e.getTermsNested)(P).some(j=>j.termType==="BlankNode"))))}function d(T){const S={};for(const P of T)S[JSON.stringify((0,t.quadToStringQuad)(P))]=!0;return S}function f(T){return Object.keys(T).map(S=>(0,t.stringQuadToQuad)(JSON.parse(S)))}function h(T){return f(d(T))}function p(T){return(0,e.uniqTerms)(T.map(S=>(0,e.getBlankNodes)((0,e.getTermsNested)(S))).reduce((S,P)=>S.concat(P),[]))}function _(T,S,P){const j=Object.assign({},P),F={};let N=!0;for(;N;){const R=Object.keys(j).length;for(const M of S){const U=(0,t.termToString)(M);if(!j[U]){const[B,G]=g(M,T,j);B&&(j[U]=G),F[U]=G}}const C=new Map;for(const M in F){const U=F[M];C.get(U)===void 0?C.set(U,M):C.set(U,!1)}for(const[M,U]of C.entries())U&&(j[U]=M);N=R!==Object.keys(j).length}return[j,F]}function g(T,S,P){const j=[];let F=!0;for(const R of S){const C=(0,e.getTermsNested)(R);if(C.some(M=>M.equals(T))){j.push(y(R,P,T));for(const M of C)!A(M,P)&&!M.equals(T)&&(F=!1)}}const N=m(j.sort().join(""));return[F,N]}function m(T){return r().hash(T).result()}function y(T,S,P){return(0,e.getTerms)(T).map(j=>v(j,S,P)).join("|")}function v(T,S,P){var j;return T.equals(P)?"@self":T.termType==="BlankNode"?((j=S[(0,t.termToString)(T)])===null||j===void 0?void 0:j.toString())||"@blank":T.termType==="Quad"?`<${y(T,S,P)}>`:(0,t.termToString)(T)}function A(T,S){return T.termType!=="BlankNode"&&!(T.termType==="Quad"&&(0,e.getTermsNested)(T).some(P=>!A(P,S)))||!!S[(0,t.termToString)(T)]}return Rn}var Yte;function yrt(){return Yte||(Yte=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(grt(),t)}(Cj)),Cj}var $te;function $Ie(){return $te||($te=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertAlgUpdatePatterns=t.translateAlgCopy=t.translateAlgMove=t.translateAlgAdd=t.translateAlgDrop=t.translateAlgCreate=t.translateAlgClear=t.translateAlgGraphRef=t.translateAlgLoad=t.cleanupAlgUpdateOperationModify=t.translateAlgDeleteInsert=t.translateAlgCompositeUpdate=t.toUpdate=t.translateAlgUpdateOperation=void 0;const e=yrt(),r=Ho(),n=c0(),i=d0(),a=l0(),s=xz();t.translateAlgUpdateOperation={name:"translateUpdateOperation",fun:({SUBRULE:o})=>(c,u)=>{switch(u.type){case r.Types.DELETE_INSERT:return o(t.translateAlgDeleteInsert,u);case r.Types.LOAD:return o(t.translateAlgLoad,u);case r.Types.CLEAR:return o(t.translateAlgClear,u);case r.Types.CREATE:return o(t.translateAlgCreate,u);case r.Types.DROP:return o(t.translateAlgDrop,u);case r.Types.ADD:return o(t.translateAlgAdd,u);case r.Types.MOVE:return o(t.translateAlgMove,u);case r.Types.COPY:return o(t.translateAlgCopy,u);default:throw new Error(`Unknown Operation type ${u.type}`)}}},t.toUpdate={name:"toUpdate",fun:()=>({astFactory:o},c)=>({type:"update",updates:c.map(u=>({context:[],operation:u})),loc:o.gen()})},t.translateAlgCompositeUpdate={name:"translateCompositeUpdate",fun:({SUBRULE:o})=>(c,u)=>o(t.toUpdate,u.updates.map(l=>l.type===r.Types.NOP?void 0:o(t.translateAlgUpdateOperation,l)))},t.translateAlgDeleteInsert={name:"translateDeleteInsert",fun:({SUBRULE:o})=>({astFactory:c},u)=>{var h;let l=u.where,d;if(l&&l.type===n.types.FROM){const p=l;l=p.input,d=o(i.translateAlgDatasetClauses,p.default,p.named)}const f={type:"updateOperation",subType:"modify",delete:o(t.convertAlgUpdatePatterns,u.delete??[]),insert:o(t.convertAlgUpdatePatterns,u.insert??[]),where:c.patternGroup([],c.gen()),from:d??c.datasetClauses([],c.gen()),loc:c.gen(),graph:void 0};if(l&&(l.type!==n.types.BGP||l.patterns.length>0)){const p=[],_=o(a.translateAlgPatternNew,o(s.removeAlgQuadsRecursive,l,p));if(f.where=o(a.algWrapInPatternGroup,_),p.length>0)if(p.length===1)((h=p.at(0))==null?void 0:h.value)!==""&&(f.where.patterns=[c.patternGraph(o(i.translateAlgTerm,p[0]),f.where.patterns,c.gen())]);else throw new Error("This is unexpected and might indicate an error in graph handling for updates.")}return o(t.cleanupAlgUpdateOperationModify,f,u)}},t.cleanupAlgUpdateOperationModify={name:"cleanUpUpdateOperationModify",fun:()=>(o,c,u)=>{const l={...c};if(!u.delete&&!u.where){const d=l;return d.subType="insertdata",d.data=l.insert,delete d.delete,delete d.where,d}if(!u.insert&&!u.where){const d=l;return d.data=l.delete,delete d.insert,delete d.where,u.delete.some(f=>(0,n.isVariable)(f.subject)||(0,n.isVariable)(f.predicate)||(0,n.isVariable)(f.object))?d.subType="deletewhere":d.subType="deletedata",d}if(!u.insert&&u.where&&u.where.type==="bgp"&&(0,e.isomorphic)(u.delete,u.where.patterns)){const d=l;return d.data=l.delete,delete d.where,delete d.delete,d.subType="deletewhere",d}return c}},t.translateAlgLoad={name:"translateLoad",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.updateOperationLoad(c.gen(),o(i.translateAlgTerm,u.source),!!u.silent,u.destination?c.graphRefSpecific(o(i.translateAlgTerm,u.destination),c.gen()):void 0)},t.translateAlgGraphRef={name:"translateGraphRef",fun:({SUBRULE:o})=>({astFactory:c},u)=>u==="DEFAULT"?c.graphRefDefault(c.gen()):u==="NAMED"?c.graphRefNamed(c.gen()):u==="ALL"?c.graphRefAll(c.gen()):c.graphRefSpecific(o(i.translateAlgTerm,u),c.gen())},t.translateAlgClear={name:"translateClear",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.updateOperationClear(o(t.translateAlgGraphRef,u.source),u.silent??!1,c.gen())},t.translateAlgCreate={name:"translateCreate",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.updateOperationCreate(o(t.translateAlgGraphRef,u.source),u.silent??!1,c.gen())},t.translateAlgDrop={name:"translateDrop",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.updateOperationDrop(o(t.translateAlgGraphRef,u.source),u.silent??!1,c.gen())},t.translateAlgAdd={name:"translateAdd",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.updateOperationAdd(o(t.translateAlgGraphRef,u.source),o(t.translateAlgGraphRef,u.destination),u.silent??!1,c.gen())},t.translateAlgMove={name:"translateMove",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.updateOperationMove(o(t.translateAlgGraphRef,u.source),o(t.translateAlgGraphRef,u.destination),u.silent??!1,c.gen())},t.translateAlgCopy={name:"translateCopy",fun:({SUBRULE:o})=>({astFactory:c},u)=>c.updateOperationCopy(o(t.translateAlgGraphRef,u.source),o(t.translateAlgGraphRef,u.destination),u.silent??!1,c.gen())},t.convertAlgUpdatePatterns={name:"convertUpdatePatterns",fun:({SUBRULE:o})=>({astFactory:c},u)=>{if(!u)return[];const l={};for(const d of u){const f=d.graph.value;l[f]||(l[f]=[]),l[f].push(d)}return Object.keys(l).map(d=>{const f=c.patternBgp(l[d].map(h=>o(i.translateAlgPattern,h)),c.gen());return d===""?f:c.graphQuads(o(i.translateAlgTerm,l[d][0].graph),f,c.gen())})}}}(Dj)),Dj}var Zte;function brt(){if(Zte)return em;Zte=1,Object.defineProperty(em,"__esModule",{value:!0}),em.algToSparql=void 0;const t=u0(),e=yO(),r=l0(),n=xz(),i=$Ie();return em.algToSparql={name:"algToSparql",fun:({SUBRULE:a})=>(s,o)=>{if(a(e.resetContext),o=a(n.removeAlgQuads,o),o.type===t.types.COMPOSITE_UPDATE)return a(i.translateAlgCompositeUpdate,o);if(o.type===t.types.NOP)return a(i.toUpdate,[]);try{return a(i.toUpdate,[a(i.translateAlgUpdateOperation,o)])}catch{}return a(r.translateAlgPatternIntoGroup,o).patterns[0]}},em}var ere;function vrt(){return ere||(ere=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(yO(),t),r(XF(),t),r(d0(),t),r(XIe(),t),r(l0(),t),r(xz(),t),r(JIe(),t),r(brt(),t),r($Ie(),t)}(Ij)),Ij}var tm={},tre;function Art(){if(tre)return tm;tre=1;var t=E&&E.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(u,l);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,f)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),e=E&&E.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),r=E&&E.__importStar||function(){var c=function(u){return c=Object.getOwnPropertyNames||function(l){var d=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(d[d.length]=f);return d},c(u)};return function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d=c(u),f=0;f<d.length;f++)d[f]!=="default"&&t(l,u,d[f]);return e(l,u),l}}();Object.defineProperty(tm,"__esModule",{value:!0}),tm.Canonicalizer=void 0;const n=jr(),i=r(Ho()),a=r(Tz()),s=Ul();class o{constructor(){k(this,"blankId");this.blankId=0}genValue(){return`value_${this.blankId++}`}canonicalizeQuery(u,l){this.blankId=0;const d={},f=new s.AlgebraFactory;return a.mapOperation(u,{[i.Types.PATH]:{transform:h=>({result:f.createPath(this.replaceValue(h.subject,d,l,f),h.predicate,this.replaceValue(h.object,d,l,f),this.replaceValue(h.graph,d,l,f)),recurse:!0})},[i.Types.PATTERN]:{transform:h=>({result:f.createPattern(this.replaceValue(h.subject,d,l,f),this.replaceValue(h.predicate,d,l,f),this.replaceValue(h.object,d,l,f),this.replaceValue(h.graph,d,l,f)),recurse:!0})},[i.Types.CONSTRUCT]:{transform:h=>({result:f.createConstruct(h.input,h.template),recurse:!0})}})}replaceValue(u,l,d,f){if(u.termType==="Quad")return f.createPattern(this.replaceValue(u.subject,l,d,f),this.replaceValue(u.predicate,l,d,f),this.replaceValue(u.object,l,d,f),this.replaceValue(u.graph,l,d,f));if(u.termType!=="BlankNode"&&(u.termType!=="Variable"||!d))return u;const h=new n.DataFactory,p=u.termType==="Variable"?h.variable.bind(h):h.blankNode.bind(h);let _=l[u.value];return _||(_=this.genValue(),l[u.value]=_),p(_)}}return tm.Canonicalizer=o,tm}var rre;function Ul(){return rre||(rre=1,function(t){var e=E&&E.__createBinding||(Object.create?function(s,o,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(o,c);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(s,u,l)}:function(s,o,c,u){u===void 0&&(u=c),s[u]=o[c]}),r=E&&E.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=E&&E.__exportStar||function(s,o){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&e(o,s,c)},i=E&&E.__importStar||function(){var s=function(o){return s=Object.getOwnPropertyNames||function(c){var u=[];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(u[u.length]=l);return u},s(o)};return function(o){if(o&&o.__esModule)return o;var c={};if(o!=null)for(var u=s(o),l=0;l<u.length;l++)u[l]!=="default"&&e(c,o,u[l]);return r(c,o),c}}();Object.defineProperty(t,"__esModule",{value:!0}),t.algebraUtils=t.Algebra=t.ExpressionTypes=t.Types=void 0,n(c0(),t),n(vrt(),t);var a=Ho();Object.defineProperty(t,"Types",{enumerable:!0,get:function(){return a.Types}}),Object.defineProperty(t,"ExpressionTypes",{enumerable:!0,get:function(){return a.ExpressionTypes}}),t.Algebra=i(Ho()),n(Sz(),t),t.algebraUtils=i(Tz()),n(Art(),t)}(UL)),UL}var Bj={},qj={},Uj={},nre;function ZIe(){return nre||(nre=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sparql12LexerBuilder=t.LANG_DIR=t.buildInOBJECT=t.buildInPREDICATE=t.buildInSUBJECT=t.buildInTRIPLE=t.buildInIsTRIPLE=t.buildInHasLangDir=t.buildInHasLang=t.buildInStrLangDir=t.buildInLangDir=t.tripleTermClose=t.tripleTermOpen=t.reificationClose=t.reificationOpen=t.annotationClose=t.annotationOpen=t.tilde=t.version=void 0;const e=_r(),r=di();t.version=(0,e.createToken)({name:"Version",pattern:/version/i,label:"version identifier"}),t.tilde=(0,e.createToken)({name:"Tilde",pattern:"~",label:"~"}),t.annotationOpen=(0,e.createToken)({name:"AnnotationOpen",pattern:"{|",label:"Annotation Open: {|"}),t.annotationClose=(0,e.createToken)({name:"AnnotationClose",pattern:"|}",label:"Annotation Close |}"}),t.reificationOpen=(0,e.createToken)({name:"ReificationOpen",pattern:"<<",label:"Reification open <<"}),t.reificationClose=(0,e.createToken)({name:"ReificationClose",pattern:">>",label:"Reification close >>"}),t.tripleTermOpen=(0,e.createToken)({name:"TripleTermOpen",pattern:"<<(",label:"Triple Term Open <<("}),t.tripleTermClose=(0,e.createToken)({name:"TripleTermClose",pattern:")>>",label:"Triple Term Close )>>"}),t.buildInLangDir=(0,e.createToken)({name:"BuiltInLangdir",pattern:/langdir/i,label:"LANGDIR"}),t.buildInStrLangDir=(0,e.createToken)({name:"BuiltInStrLangdir",pattern:/strlangdir/i,label:"STRLANGDIR"}),t.buildInHasLang=(0,e.createToken)({name:"BuiltInHasLang",pattern:/haslang/i,label:"hasLANG"}),t.buildInHasLangDir=(0,e.createToken)({name:"BuiltInHasLangdir",pattern:/haslangdir/i,label:"hasLANGDIR"}),t.buildInIsTRIPLE=(0,e.createToken)({name:"BuiltInIsTriple",pattern:/istriple/i,label:"isTRIPLE"}),t.buildInTRIPLE=(0,e.createToken)({name:"BuiltInTriple",pattern:/triple/i,label:"TRIPLE"}),t.buildInSUBJECT=(0,e.createToken)({name:"BuiltInSubject",pattern:/subject/i,label:"SUBJECT"}),t.buildInPREDICATE=(0,e.createToken)({name:"BuiltInPredicate",pattern:/predicate/i,label:"PREDICATE"}),t.buildInOBJECT=(0,e.createToken)({name:"BuiltInObject",pattern:/object/i,label:"OBJECT"}),t.LANG_DIR=(0,e.createToken)({name:"LANG_DIR",pattern:/@[a-z]+(?:-[\da-z]+)*(?:--[a-z]+)?/i,label:"LANG_DIR"}),t.sparql12LexerBuilder=e.LexerBuilder.create(r.lex.sparql11LexerBuilder).addBefore(r.lex.symbols.logicAnd,t.tilde,t.annotationOpen,t.annotationClose,t.tripleTermOpen,t.tripleTermClose,t.reificationOpen,t.reificationClose,t.version).addBefore(r.lex.builtIn.langmatches,t.buildInLangDir,t.buildInStrLangDir,t.buildInHasLangDir,t.buildInHasLang,t.buildInIsTRIPLE,t.buildInTRIPLE,t.buildInSUBJECT,t.buildInPREDICATE,t.buildInOBJECT).addBefore(r.lex.terminals.langTag,t.LANG_DIR).delete(r.lex.terminals.langTag)}(Uj)),Uj}var rm={},nm={},ire;function Iz(){if(ire)return nm;ire=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.AstFactory=void 0;const t=di();let e=class extends t.AstFactory{constructor(){super(...arguments);k(this,"triple",(i,a,s,o)=>({type:"triple",subject:i,predicate:a,object:s,annotations:[],loc:o??this.sourceLocation(i,a,s)}))}termTriple(i,a,s,o){return{type:"term",subType:"triple",subject:i,predicate:a,object:s,loc:o}}isTermTriple(i){return this.isOfSubType(i,"term","triple")}tripleCollectionReifiedTriple(i,a,s,o,c){return{type:"tripleCollection",subType:"reifiedTriple",triples:[this.triple(a,s,o)],identifier:c??this.termBlank(void 0,this.sourceLocation()),loc:i}}isTripleCollectionReifiedTriple(i){return this.isOfSubType(i,"tripleCollection","reifiedTriple")}tripleCollectionBlankNodeProperties(i,a,s){return{type:"tripleCollection",subType:"blankNodeProperties",triples:a,identifier:i,loc:s}}annotatedTriple(i,a,s,o,c){return{type:"triple",subject:i,predicate:a,object:s,annotations:o??[],loc:c??this.sourceLocation(i,a,s,...o??[])}}contextDefinitionVersion(i,a){return{type:"contextDef",subType:"version",version:i,loc:a}}isContextDefinitionVersion(i){return this.isOfSubType(i,"contextDef","version")}};return nm.AstFactory=e,nm}var are;function eOe(){if(are)return rm;are=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.langTagHasCorrectRange=n,rm.findPatternBoundedVars=i;const t=Iz(),e=new t.AstFactory;function r(a){return a==="ltr"||a==="rtl"}function n(a){if(e.isTermLiteralLangStr(a)){const s=a.langOrIri.split("--");if(s.length>1){const[o,c]=s;if(!r(c))throw new Error(`language direction "${c}" of literal "${JSON.stringify(a)}" is not is required range 'ltr' | 'rtl'.`)}}}function i(a,s){var o;if(e.isQuery(a)||e.isUpdate(a)){if(e.isQuerySelect(a)||e.isQueryDescribe(a)){if(a.where&&a.variables.some(c=>e.isWildcard(c)))i(a.where,s);else for(const c of a.variables)i(c,s);if(a.solutionModifiers.group){const c=a.solutionModifiers.group;for(const u of c.groupings)"variable"in u&&i(u.variable,s)}if((o=a.values)!=null&&o.values&&a.values.values.length>0){const c=a.values.values;for(const u of Object.keys(c[0]))s.add(u)}}}else if(e.isTerm(a))e.isTermVariable(a)&&s.add(a.value),e.isTermTriple(a)&&(i(a.subject,s),i(a.predicate,s),i(a.object,s));else if(e.isTriple(a)){i(a.subject,s),i(a.predicate,s),i(a.object,s);for(const c of a.annotations??[])i(e.isTripleCollection(c)?c:c.val,s)}else if(e.isPath(a)){if(!e.isTerm(a))for(const c of a.items)i(c,s)}else if(e.isTripleCollection(a)||e.isPatternBgp(a))for(const c of a.triples)i(c,s);else if(e.isPatternGroup(a)||e.isPatternUnion(a)||e.isPatternOptional(a)||e.isPatternService(a)){for(const c of a.patterns)i(c,s);e.isPatternService(a)&&i(a.name,s)}else if(e.isPatternBind(a))i(a.variable,s);else if(e.isPatternValues(a))for(const c of Object.keys(a.values.at(0)??{}))s.add(c);else if(e.isPatternGraph(a)){i(a.name,s);for(const c of a.patterns)i(c,s)}}return rm}var sre;function Trt(){return sre||(sre=1,function(t){var e=E&&E.__createBinding||(Object.create?function(h,p,_,g){g===void 0&&(g=_);var m=Object.getOwnPropertyDescriptor(p,_);(!m||("get"in m?!p.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return p[_]}}),Object.defineProperty(h,g,m)}:function(h,p,_,g){g===void 0&&(g=_),h[g]=p[_]}),r=E&&E.__setModuleDefault||(Object.create?function(h,p){Object.defineProperty(h,"default",{enumerable:!0,value:p})}:function(h,p){h.default=p}),n=E&&E.__importStar||function(){var h=function(p){return h=Object.getOwnPropertyNames||function(_){var g=[];for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(g[g.length]=m);return g},h(p)};return function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var g=h(p),m=0;m<g.length;m++)g[m]!=="default"&&e(_,p,g[m]);return r(_,p),_}}();Object.defineProperty(t,"__esModule",{value:!0}),t.generateGraphTerm=t.generateTriplesBlock=t.unaryExpression=t.rdfLiteral=t.builtInCall=t.buildInObject=t.buildInPredicate=t.buildInSubject=t.buildInTriple=t.buildInIsTriple=t.buildInHasLangDir=t.buildInHasLang=t.buildInLangStrDir=t.buildInLangDir=t.exprTripleTermObject=t.exprTripleTermSubject=t.exprTripleTerm=t.primaryExpression=t.tripleTermDataObject=t.tripleTermDataSubject=t.tripleTermData=t.tripleTermObject=t.tripleTermSubject=t.tripleTerm=t.reifiedTripleObject=t.reifiedTripleSubject=t.reifiedTriple=t.varOrTerm=t.graphNodePath=t.graphNode=t.annotationBlock=t.annotationBlockPath=t.annotation=t.annotationPath=t.objectPath=t.object=t.triplesSameSubjectPath=t.triplesSameSubject=t.varOrReifierId=t.reifier=t.dataBlockValue=t.reifiedTripleBlockPath=t.reifiedTripleBlock=t.prologue=t.versionSpecifier=t.versionDecl=void 0;const i=_r(),a=di(),s=n(ZIe()),o=eOe();t.versionDecl={name:"versionDecl",impl:({ACTION:h,SUBRULE:p,CONSUME:_})=>g=>{const m=_(s.version),y=p(t.versionSpecifier);return h(()=>g.astFactory.contextDefinitionVersion(y.val,g.astFactory.sourceLocation(m,y)))},gImpl:({PRINT_ON_OWN_LINE:h})=>(p,{astFactory:_})=>{_.printFilter(p,()=>{h("VERSION ",`${a.gram.stringEscapedLexical(p.version)}`)})}},t.versionSpecifier={name:"versionSpecifier",impl:({ACTION:h,CONSUME:p,OR:_})=>g=>{const m=_([{ALT:()=>p(a.lex.terminals.stringLiteral1)},{ALT:()=>p(a.lex.terminals.stringLiteral2)}]);return h(()=>g.astFactory.wrap(m.image.slice(1,-1),g.astFactory.sourceLocation(m)))}},t.prologue={name:"prologue",impl:({SUBRULE:h,MANY:p,OR:_})=>()=>{const g=[];return p(()=>_([{ALT:()=>g.push(h(a.gram.baseDecl))},{ALT:()=>g.push(h(a.gram.prefixDecl))},{ALT:()=>g.push(h(t.versionDecl))}])),g},gImpl:({SUBRULE:h})=>(p,{astFactory:_})=>{for(const g of p)_.isContextDefinitionBase(g)?h(a.gram.baseDecl,g):_.isContextDefinitionPrefix(g)?h(a.gram.prefixDecl,g):_.isContextDefinitionVersion(g)&&h(t.versionDecl,g)}};function c(h,p){return{name:h,impl:({ACTION:_,SUBRULE:g})=>m=>{const y=g(t.reifiedTriple),v=g(p?a.gram.propertyListPath:a.gram.propertyList,_(()=>m.astFactory.dematerialized(y.identifier)));return _(()=>[y,...v])}}}t.reifiedTripleBlock=c("reifiedTripleBlock",!1),t.reifiedTripleBlockPath=c("reifiedTripleBlockPath",!0),t.dataBlockValue={name:"dataBlockValue",impl:h=>p=>h.OR2([{ALT:()=>a.gram.dataBlockValue.impl(h)(p)},{ALT:()=>h.SUBRULE(t.tripleTermData)}])},t.reifier={name:"reifier",impl:({ACTION:h,CONSUME:p,SUBRULE:_,OPTION:g})=>m=>{const y=p(s.tilde),v=g(()=>_(t.varOrReifierId));return h(()=>{if(v===void 0&&!m.parseMode.has("canCreateBlankNodes"))throw new Error("Cannot create blanknodes in current parse mode");return m.astFactory.wrap(v??m.astFactory.termBlank(void 0,m.astFactory.sourceLocation()),m.astFactory.sourceLocation(y,v))})}},t.varOrReifierId={name:"varOrReifierId",impl:({SUBRULE:h,OR:p})=>_=>p([{GATE:()=>_.parseMode.has("canParseVars"),ALT:()=>h(a.gram.var_)},{ALT:()=>h(a.gram.iri)},{ALT:()=>h(a.gram.blankNode)}])};function u(h,p){return{name:h,impl:_=>g=>_.OR2([{ALT:()=>p?a.gram.triplesSameSubjectPath.impl(_)(g):a.gram.triplesSameSubject.impl(_)(g)},{ALT:()=>_.SUBRULE(p?t.reifiedTripleBlockPath:t.reifiedTripleBlock)}])}}t.triplesSameSubject=u("triplesSameSubject",!1),t.triplesSameSubjectPath=u("triplesSameSubjectPath",!0);function l(h,p){return{name:h,impl:({ACTION:_,SUBRULE:g})=>(m,y,v)=>{const A=g(p?t.graphNodePath:t.graphNode),T=g(p?t.annotationPath:t.annotation);return _(()=>{const S=m.astFactory;if(S.isPathPure(v)&&T.length>0)throw new Error("Note 17 violation");return S.annotatedTriple(y,v,A,T)})}}}t.object=l("object",!1),t.objectPath=l("objectPath",!0);function d(h,p){return{name:h,impl:({ACTION:_,SUBRULE:g,OR:m,MANY:y})=>v=>{const A=[];let T;return y(()=>{m([{ALT:()=>{const S=g(t.reifier);A.push(S),T=S.val}},{ALT:()=>{_(()=>{if(!T&&!v.parseMode.has("canCreateBlankNodes"))throw new Error("Cannot create blanknodes in current parse mode");T=T??v.astFactory.termBlank(void 0,v.astFactory.sourceLocation())});const S=g(p?t.annotationBlockPath:t.annotationBlock,T);_(()=>{A.push(S),T=void 0})}}])}),A},gImpl:({SUBRULE:_,PRINT_WORD:g})=>(m,{astFactory:y})=>{for(const v of m)y.isTripleCollectionBlankNodeProperties(v)?_(t.annotationBlockPath,v):(y.printFilter(v,()=>g("~")),_(t.graphNodePath,v.val))}}}t.annotationPath=d("annotationPath",!0),t.annotation=d("annotation",!1);function f(h,p){return{name:h,impl:({ACTION:_,SUBRULE:g,CONSUME:m})=>(y,v)=>{const A=m(s.annotationOpen),T=g(p?a.gram.propertyListPathNotEmpty:a.gram.propertyListNotEmpty,v),S=m(s.annotationClose);return _(()=>y.astFactory.tripleCollectionBlankNodeProperties(v,T,y.astFactory.sourceLocation(A,S)))},gImpl:({SUBRULE:_,PRINT_WORD:g,HANDLE_LOC:m,NEW_LINE:y,PRINT_ON_OWN_LINE:v})=>(A,T)=>{const{astFactory:S,indentInc:P}=T;S.printFilter(A,()=>{g("{|"),A.triples.length>1&&(T[i.traqulaIndentation]+=P,y())});function j(R){m(R,()=>{S.isTerm(R.predicate)?_(t.graphNodePath,R.predicate):_(a.gram.pathGenerator,R.predicate,void 0),S.printFilter(R,()=>g("")),_(t.graphNodePath,R.object)})}const[F,...N]=A.triples;j(F);for(const R of N)S.printFilter(A,()=>{g(";"),y()}),j(R);S.printFilter(A,()=>{A.triples.length>1?v("|}"):g("|}")})}}}t.annotationBlockPath=f("annotationBlockPath",!0),t.annotationBlock=f("annotationBlock",!1),t.graphNode={name:"graphNode",impl:h=>p=>h.OR2([{ALT:()=>a.gram.graphNode.impl(h)(p)},{ALT:()=>h.SUBRULE(t.reifiedTriple)}])},t.graphNodePath={name:"graphNodePath",impl:h=>p=>h.OR2([{ALT:()=>a.gram.graphNodePath.impl(h)(p)},{ALT:()=>h.SUBRULE(t.reifiedTriple)}]),gImpl:h=>(p,_)=>{_.astFactory.isTripleCollectionReifiedTriple(p)?h.SUBRULE(t.reifiedTriple,p):a.gram.graphNodePath.gImpl(h)(p,_)}},t.varOrTerm={name:"varOrTerm",impl:({ACTION:h,SUBRULE:p,OR:_,CONSUME:g})=>m=>_([{GATE:()=>m.parseMode.has("canParseVars"),ALT:()=>p(a.gram.var_)},{ALT:()=>p(a.gram.iri)},{ALT:()=>p(t.rdfLiteral)},{ALT:()=>p(a.gram.numericLiteral)},{ALT:()=>p(a.gram.booleanLiteral)},{ALT:()=>p(a.gram.blankNode)},{ALT:()=>{const y=g(a.lex.terminals.nil);return h(()=>m.astFactory.termNamed(m.astFactory.sourceLocation(y),a.CommonIRIs.NIL))}},{ALT:()=>p(t.tripleTerm)}])},t.reifiedTriple={name:"reifiedTriple",impl:({ACTION:h,CONSUME:p,SUBRULE:_,OPTION:g})=>m=>{const y=p(s.reificationOpen),v=_(t.reifiedTripleSubject),A=_(a.gram.verb),T=_(t.reifiedTripleObject),S=g(()=>_(t.reifier)),P=p(s.reificationClose);return h(()=>{if(S===void 0&&!m.parseMode.has("canCreateBlankNodes"))throw new Error("Cannot create blanknodes in current parse mode");return m.astFactory.tripleCollectionReifiedTriple(m.astFactory.sourceLocation(y,P),v,A,T,S==null?void 0:S.val)})},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>p("<<"));const m=_.triples[0];h(t.graphNodePath,m.subject),g.printFilter(_,()=>p("")),g.isPathPure(m.predicate)?h(a.gram.pathGenerator,m.predicate,void 0):h(t.graphNodePath,m.predicate),g.printFilter(_,()=>p("")),h(t.graphNodePath,m.object),h(t.annotationPath,[g.wrap(_.identifier,_.identifier.loc)]),g.printFilter(_,()=>p(">>"))}},t.reifiedTripleSubject={name:"reifiedTripleSubject",impl:({OR:h,SUBRULE:p})=>_=>h([{GATE:()=>_.parseMode.has("canParseVars"),ALT:()=>p(a.gram.var_)},{ALT:()=>p(a.gram.iri)},{ALT:()=>p(t.rdfLiteral)},{ALT:()=>p(a.gram.numericLiteral)},{ALT:()=>p(a.gram.booleanLiteral)},{ALT:()=>p(a.gram.blankNode)},{ALT:()=>p(t.reifiedTriple)},{ALT:()=>p(t.tripleTerm)}])},t.reifiedTripleObject={name:"reifiedTripleObject",impl:t.reifiedTripleSubject.impl},t.tripleTerm={name:"tripleTerm",impl:({ACTION:h,CONSUME:p,SUBRULE:_})=>g=>{const m=p(s.tripleTermOpen),y=_(t.tripleTermSubject),v=_(a.gram.verb),A=_(t.tripleTermObject),T=p(s.tripleTermClose);return h(()=>g.astFactory.termTriple(y,v,A,g.astFactory.sourceLocation(m,T)))},gImpl:({SUBRULE:h,PRINT_WORD:p})=>(_,{astFactory:g})=>{g.printFilter(_,()=>p("<<(")),h(t.graphNodePath,_.subject),g.printFilter(_,()=>p("")),h(t.graphNodePath,_.predicate),g.printFilter(_,()=>p("")),h(t.graphNodePath,_.object),g.printFilter(_,()=>p(")>>"))}},t.tripleTermSubject={name:"tripleTermSubject",impl:({SUBRULE:h,OR:p})=>_=>p([{GATE:()=>_.parseMode.has("canParseVars"),ALT:()=>h(a.gram.var_)},{ALT:()=>h(a.gram.iri)},{ALT:()=>h(t.rdfLiteral)},{ALT:()=>h(a.gram.numericLiteral)},{ALT:()=>h(a.gram.booleanLiteral)},{ALT:()=>h(a.gram.blankNode)},{ALT:()=>h(t.tripleTerm)}])},t.tripleTermObject={name:"tripleTermObject",impl:t.tripleTermSubject.impl},t.tripleTermData={name:"tripleTermData",impl:({ACTION:h,CONSUME:p,OR:_,SUBRULE:g})=>m=>{const y=p(s.tripleTermOpen),v=g(t.tripleTermDataSubject),A=_([{ALT:()=>g(a.gram.iri)},{ALT:()=>{const P=p(a.lex.a);return h(()=>m.astFactory.termNamed(m.astFactory.sourceLocation(P),a.CommonIRIs.TYPE))}}]),T=g(t.tripleTermDataObject),S=p(s.tripleTermClose);return h(()=>m.astFactory.termTriple(v,A,T,m.astFactory.sourceLocation(y,S)))}},t.tripleTermDataSubject={name:"tripleTermDataSubject",impl:({OR:h,SUBRULE:p})=>()=>h([{ALT:()=>p(a.gram.iri)}])},t.tripleTermDataObject={name:"tripleTermDataObject",impl:({OR:h,SUBRULE:p})=>()=>h([{ALT:()=>p(a.gram.iri)},{ALT:()=>p(t.rdfLiteral)},{ALT:()=>p(a.gram.numericLiteral)},{ALT:()=>p(a.gram.booleanLiteral)},{ALT:()=>p(t.tripleTermData)}])},t.primaryExpression={name:"primaryExpression",impl:h=>p=>h.OR2([{ALT:()=>a.gram.primaryExpression.impl(h)(p)},{ALT:()=>h.SUBRULE(t.exprTripleTerm)}])},t.exprTripleTerm={name:"exprTripleTerm",impl:({ACTION:h,CONSUME:p,SUBRULE:_})=>g=>{const m=p(s.tripleTermOpen),y=_(t.exprTripleTermSubject),v=_(a.gram.verb),A=_(t.exprTripleTermObject),T=p(s.tripleTermClose);return h(()=>g.astFactory.termTriple(y,v,A,g.astFactory.sourceLocation(m,T)))}},t.exprTripleTermSubject={name:"exprTripleTermSubject",impl:({OR:h,SUBRULE:p})=>_=>h([{ALT:()=>p(a.gram.iri)},{GATE:()=>_.parseMode.has("canParseVars"),ALT:()=>p(a.gram.var_)}])},t.exprTripleTermObject={name:"exprTripleTermObject",impl:({OR:h,SUBRULE:p})=>_=>h([{ALT:()=>p(a.gram.iri)},{ALT:()=>p(t.rdfLiteral)},{ALT:()=>p(a.gram.numericLiteral)},{ALT:()=>p(a.gram.booleanLiteral)},{GATE:()=>_.parseMode.has("canParseVars"),ALT:()=>p(a.gram.var_)},{ALT:()=>p(t.exprTripleTerm)}])},t.buildInLangDir=(0,a.funcExpr1)(s.buildInLangDir),t.buildInLangStrDir=(0,a.funcExpr3)(s.buildInStrLangDir),t.buildInHasLang=(0,a.funcExpr1)(s.buildInHasLang),t.buildInHasLangDir=(0,a.funcExpr1)(s.buildInHasLangDir),t.buildInIsTriple=(0,a.funcExpr1)(s.buildInIsTRIPLE),t.buildInTriple=(0,a.funcExpr3)(s.buildInTRIPLE),t.buildInSubject=(0,a.funcExpr1)(s.buildInSUBJECT),t.buildInPredicate=(0,a.funcExpr1)(s.buildInPREDICATE),t.buildInObject=(0,a.funcExpr1)(s.buildInOBJECT),t.builtInCall={name:"builtInCall",impl:h=>p=>h.OR2([{ALT:()=>a.gram.builtInCall.impl(h)(p)},{ALT:()=>h.SUBRULE(t.buildInLangDir)},{ALT:()=>h.SUBRULE(t.buildInLangStrDir)},{ALT:()=>h.SUBRULE(t.buildInHasLang)},{ALT:()=>h.SUBRULE(t.buildInHasLangDir)},{ALT:()=>h.SUBRULE(t.buildInIsTriple)},{ALT:()=>h.SUBRULE(t.buildInTriple)},{ALT:()=>h.SUBRULE(t.buildInSubject)},{ALT:()=>h.SUBRULE(t.buildInPredicate)},{ALT:()=>h.SUBRULE(t.buildInObject)}])},t.rdfLiteral={name:"rdfLiteral",impl:({ACTION:h,SUBRULE:p,OPTION:_,CONSUME:g,OR:m})=>y=>{const v=p(a.gram.string);return _(()=>m([{ALT:()=>{const A=g(s.LANG_DIR);return h(()=>{const T=y.astFactory.termLiteral(y.astFactory.sourceLocation(v,A),v.value,A.image.slice(1).toLowerCase());return(0,o.langTagHasCorrectRange)(T),T})}},{ALT:()=>{g(a.lex.symbols.hathat);const A=p(a.gram.iri);return h(()=>y.astFactory.termLiteral(y.astFactory.sourceLocation(v,A),v.value,A))}}]))??v}},t.unaryExpression={name:"unaryExpression",impl:({ACTION:h,CONSUME:p,SUBRULE1:_,SUBRULE2:g,OR1:m,OR2:y})=>v=>m([{ALT:()=>_(t.primaryExpression)},{ALT:()=>{const A=p(a.lex.symbols.exclamation),T=_(t.unaryExpression);return h(()=>v.astFactory.expressionOperation("!",[T],v.astFactory.sourceLocation(A,T)))}},{ALT:()=>{const A=y([{ALT:()=>p(a.lex.symbols.opPlus)},{ALT:()=>p(a.lex.symbols.opMinus)}]),T=g(t.primaryExpression);return h(()=>v.astFactory.expressionOperation(A.image==="!"?"!":A.image==="+"?"UPLUS":"UMINUS",[T],v.astFactory.sourceLocation(A,T)))}}])},t.generateTriplesBlock={name:"triplesBlock",gImpl:({SUBRULE:h,PRINT_WORD:p,NEW_LINE:_,HANDLE_LOC:g})=>(m,{astFactory:y})=>{for(const[v,A]of m.triples.entries())g(A,()=>{const T=m.triples.at(v+1);y.isTripleCollection(A)?(h(t.graphNodePath,A),(T==null?void 0:T.type)==="triple"&&y.isSourceLocationNoMaterialize(T.subject.loc)||y.printFilter(A,()=>{p("."),_()})):(h(t.graphNodePath,A.subject),y.printFilter(m,()=>p("")),y.isPathPure(A.predicate)?h(a.gram.pathGenerator,A.predicate,void 0):h(t.graphNodePath,A.predicate),y.printFilter(m,()=>p("")),h(t.graphNodePath,A.object),h(t.annotationPath,A.annotations??[]),T===void 0||y.isTripleCollection(T)||!y.isSourceLocationNoMaterialize(T.subject.loc)?y.printFilter(m,()=>{p("."),_()}):y.isSourceLocationNoMaterialize(T.predicate.loc)?y.printFilter(m,()=>p(",")):y.printFilter(m,()=>{p(";"),_()}))})}},t.generateGraphTerm={name:"graphTerm",gImpl:h=>(p,_)=>{_.astFactory.isTermTriple(p)?h.SUBRULE(t.tripleTerm,p):a.gram.graphTerm.gImpl(h)(p,_)}}}(qj)),qj}var Vj={},ore;function wrt(){return ore||(ore=1,Object.defineProperty(Vj,"__esModule",{value:!0})),Vj}var Gj={},ure;function Srt(){return ure||(ure=1,Object.defineProperty(Gj,"__esModule",{value:!0})),Gj}var mc={},cre;function xrt(){if(cre)return mc;cre=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.AstTransformer=void 0,mc.completeParseContext=r,mc.completeGeneratorContext=n,mc.copyParseContext=i;const t=_r(),e=Iz();function r(s){return{astFactory:s.astFactory??new e.AstFactory({tracksSourceLocation:!1}),baseIRI:s.baseIRI,prefixes:{...s.prefixes},parseMode:s.parseMode?new Set(s.parseMode):new Set(["canParseVars","canCreateBlankNodes"]),skipValidation:s.skipValidation??!1}}function n(s){return{astFactory:s.astFactory??new e.AstFactory,origSource:s.origSource??"",offset:s.offset,indentInc:s.indentInc??2,[t.traqulaIndentation]:s[t.traqulaIndentation]??0,[t.traqulaNewlineAlternative]:s[t.traqulaNewlineAlternative]??" "}}function i(s){return{...s,prefixes:{...s.prefixes},parseMode:new Set(s.parseMode)}}class a extends t.TransformerSubTyped{}return mc.AstTransformer=a,mc}var lre;function bO(){return lre||(lre=1,function(t){var e=E&&E.__createBinding||(Object.create?function(a,s,o,c){c===void 0&&(c=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,c,u)}:function(a,s,o,c){c===void 0&&(c=o),a[c]=s[o]}),r=E&&E.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),n=E&&E.__importStar||function(){var a=function(s){return a=Object.getOwnPropertyNames||function(o){var c=[];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(c[c.length]=u);return c},a(s)};return function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var c=a(s),u=0;u<c.length;u++)c[u]!=="default"&&e(o,s,c[u]);return r(o,s),o}}(),i=E&&E.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.lex=t.gram=void 0,t.gram=n(Trt()),t.lex=n(ZIe()),i(wrt(),t),i(Srt(),t),i(xrt(),t),i(Iz(),t),i(eOe(),t)}(Bj)),Bj}var dre;function Ert(){return dre||(dre=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.inScopeVariables=t.translateTripleNesting12=t.translateTripleCollection12=t.translateTerm12=void 0;const e=Ul(),r=bO(),n=Br(),i="http://www.w3.org/1999/02/22-rdf-syntax-ns#reifies";t.translateTerm12={name:"translateTerm",fun:a=>(s,o)=>{if(s.astFactory.isTermTriple(o))return s.dataFactory.quad(a.SUBRULE(t.translateTerm12,o.subject),a.SUBRULE(t.translateTerm12,o.predicate),a.SUBRULE(t.translateTerm12,o.object));if(s.astFactory.isTermLiteral(o)){if(!o.langOrIri)return s.dataFactory.literal(o.value);if(typeof o.langOrIri=="object"){const l=a.SUBRULE(e.translateNamed,o.langOrIri);return s.dataFactory.literal(o.value,l)}const[c,u]=o.langOrIri.split("--");return u&&(u===""||u==="ltr"||u==="rtl")?s.dataFactory.literal(o.value,{language:c,direction:u}):s.dataFactory.literal(o.value,o.langOrIri)}return e.translateTerm.fun(a)(s,o)}},t.translateTripleCollection12={name:"translateTripleCollection",fun:a=>(s,o,c)=>{if(s.astFactory.isTripleCollectionReifiedTriple(o)){const{SUBRULE:u}=a,{dataFactory:l}=s,d=u(t.translateTerm12,o.identifier);u(t.translateTripleNesting12,o.triples[0],c);const{subject:f,predicate:h,object:p}=c.pop(),_=l.quad(f,h,p);c.push({subject:d,predicate:l.namedNode(i),object:_})}else e.translateTripleCollection.fun(a)(s,o,c)}},t.translateTripleNesting12={name:"translateTripleNesting",fun:a=>(s,o,c)=>{e.translateTripleNesting.fun(a)(s,o,c);const u=a.SUBRULE,{subject:l,predicate:d,object:f}=c.at(-1),{astFactory:h,dataFactory:p}=s;if(o.annotations&&o.annotations.length>0){const _=p.quad(l,d,f),g=new Set;for(const m of o.annotations){let y;const v=h.isTripleCollection(m);v?y=u(t.translateTerm12,m.identifier):y=u(t.translateTerm12,m.val),g.has((0,n.termToString)(y))||c.push({subject:y,predicate:p.namedNode(i),object:_}),g.add((0,n.termToString)(y)),v&&u(t.translateTripleCollection12,m,c)}}}},t.inScopeVariables={name:"inScopeVariables",fun:()=>(a,s)=>{const o=new Set;return(0,r.findPatternBoundedVars)(s,o),o}}}(qL)),qL}var im={},fre;function Irt(){if(fre)return im;fre=1,Object.defineProperty(im,"__esModule",{value:!0}),im.translateAlgTerm12=void 0;const t=Ul();return im.translateAlgTerm12={name:"translateTerm",fun:e=>(r,n)=>{if(n.termType==="Quad"){const{SUBRULE:i}=e,{astFactory:a}=r;return a.termTriple(i(t.translateAlgTerm,n.subject),i(t.translateAlgTerm,n.predicate),i(t.translateAlgTerm,n.object),a.gen())}return t.translateAlgTerm.fun(e)(r,n)}},im}var am={},hre;function Ort(){if(hre)return am;hre=1,Object.defineProperty(am,"__esModule",{value:!0}),am.createAlgebraContext=r,am.createAstContext=n;const t=Ul(),e=bO();function r(i){return{...(0,t.createAlgebraContext)(i),astFactory:new e.AstFactory}}function n(){return{...(0,t.createAstContext)(),astFactory:new e.AstFactory}}return am}var pre;function zu(){return pre||(pre=1,function(t){var e=E&&E.__createBinding||(Object.create?function(i,a,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(a,s);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,o,c)}:function(i,a,s,o){o===void 0&&(o=s),i[o]=a[s]}),r=E&&E.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionTypes=t.Types=t.algebraUtils=t.AlgebraFactory=t.Algebra=void 0,r(Ert(),t),r(Irt(),t),r(Ort(),t);var n=Ul();Object.defineProperty(t,"Algebra",{enumerable:!0,get:function(){return n.Algebra}}),Object.defineProperty(t,"AlgebraFactory",{enumerable:!0,get:function(){return n.AlgebraFactory}}),Object.defineProperty(t,"algebraUtils",{enumerable:!0,get:function(){return n.algebraUtils}}),Object.defineProperty(t,"Types",{enumerable:!0,get:function(){return n.Types}}),Object.defineProperty(t,"ExpressionTypes",{enumerable:!0,get:function(){return n.ExpressionTypes}})}(BL)),BL}var _re;function Rrt(){return _re||(_re=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionTypes=t.Types=void 0;var e=zu();Object.defineProperty(t,"Types",{enumerable:!0,get:function(){return e.Types}}),Object.defineProperty(t,"ExpressionTypes",{enumerable:!0,get:function(){return e.ExpressionTypes}})}(jL)),jL}var Hj={},mre;function gre(){return mre||(mre=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.inScopeVariables=t.visitOperationSub=t.visitOperation=t.mapOperationSub=t.mapOperationSubStrict=t.mapOperation=t.mapOperationStrict=t.transformer=t.objectify=t.resolveIRI=void 0,t.isKnownOperation=n,t.isKnownSubType=i;const e=zu(),r=_r();t.resolveIRI=e.algebraUtils.resolveIRI,t.objectify=e.algebraUtils.objectify;function n(s,o,c){return s.type===o&&(c===void 0||s.subType===c)}function i(s,o){return s.subType===o}t.transformer=new r.TransformerSubTyped({shallowKeys:new Set(["metadata"]),ignoreKeys:new Set(["metadata"])},{[e.Types.PATTERN]:{ignoreKeys:new Set(["subject","predicate","object","graph","metadata"])},[e.Types.EXPRESSION]:{ignoreKeys:new Set(["name","term","wildcard","variable","metadata"])},[e.Types.DESCRIBE]:{ignoreKeys:new Set(["terms","metadata"])},[e.Types.EXTEND]:{ignoreKeys:new Set(["variable","metadata"])},[e.Types.FROM]:{ignoreKeys:new Set(["default","named","metadata"])},[e.Types.GRAPH]:{ignoreKeys:new Set(["name","metadata"])},[e.Types.GROUP]:{ignoreKeys:new Set(["variables","metadata"])},[e.Types.LINK]:{ignoreKeys:new Set(["iri","metadata"])},[e.Types.NPS]:{ignoreKeys:new Set(["iris","metadata"])},[e.Types.PATH]:{ignoreKeys:new Set(["subject","object","graph","metadata"])},[e.Types.PROJECT]:{ignoreKeys:new Set(["variables","metadata"])},[e.Types.SERVICE]:{ignoreKeys:new Set(["name","metadata"])},[e.Types.VALUES]:{ignoreKeys:new Set(["variables","bindings","metadata"])},[e.Types.LOAD]:{ignoreKeys:new Set(["source","destination","metadata"])},[e.Types.CLEAR]:{ignoreKeys:new Set(["source","metadata"])},[e.Types.CREATE]:{ignoreKeys:new Set(["source","metadata"])},[e.Types.DROP]:{ignoreKeys:new Set(["source","metadata"])},[e.Types.ADD]:{ignoreKeys:new Set(["source","destination","metadata"])},[e.Types.MOVE]:{ignoreKeys:new Set(["source","destination","metadata"])},[e.Types.COPY]:{ignoreKeys:new Set(["source","destination","metadata"])}}),t.mapOperationStrict=t.transformer.transformNode.bind(t.transformer),t.mapOperation=t.mapOperationStrict,t.mapOperationSubStrict=t.transformer.transformNodeSpecific.bind(t.transformer),t.mapOperationSub=t.mapOperationSubStrict,t.visitOperation=t.transformer.visitNode.bind(t.transformer),t.visitOperationSub=t.transformer.visitNodeSpecific.bind(t.transformer);const a=(s,o=t.visitOperation)=>e.algebraUtils.inScopeVariables(s,o);t.inScopeVariables=a}(Hj)),Hj}var yre;function Ft(){return yre||(yre=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AlgebraFactory=t.algebraUtils=t.transformer=t.isKnownSubType=t.isKnownOperation=t.Algebra=void 0,t.Algebra=Rrt();var e=gre();Object.defineProperty(t,"isKnownOperation",{enumerable:!0,get:function(){return e.isKnownOperation}}),Object.defineProperty(t,"isKnownSubType",{enumerable:!0,get:function(){return e.isKnownSubType}}),Object.defineProperty(t,"transformer",{enumerable:!0,get:function(){return e.transformer}}),t.algebraUtils=gre();var r=zu();Object.defineProperty(t,"AlgebraFactory",{enumerable:!0,get:function(){return r.AlgebraFactory}})}(LL)),LL}var kj={},HR={},bre;function Prt(){if(bre)return HR;bre=1,Object.defineProperty(HR,"__esModule",{value:!0}),HR.asTermType=t;function t(e){if(e==="namedNode"||e==="literal"||e==="blankNode"||e==="quad")return e}return HR}var sm={},vre;function Nrt(){if(vre)return sm;vre=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.Variable=void 0;const t=Bl();class e{constructor(n){k(this,"expressionType",t.ExpressionType.Variable);k(this,"name");this.name=n}}return sm.Variable=e,sm}var $t={},fo={},Are;function bf(){if(Are)return fo;Are=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.SparqlOperator=fo.TypeURL=fo.TypeAlias=void 0,fo.typedLiteral=n;const t=jr();var e;(function(s){s.SPARQL_NUMERIC="SPARQL_NUMERIC",s.SPARQL_STRINGLY="SPARQL_STRINGLY"})(e||(fo.TypeAlias=e={}));const r=new t.DataFactory;function n(s,o){return r.literal(s,r.namedNode(o))}var i;(function(s){s.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",s.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",s.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",s.RDF_DIR_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString",s.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",s.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",s.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",s.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",s.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",s.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",s.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",s.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",s.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",s.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",s.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",s.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",s.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",s.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",s.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",s.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",s.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",s.XSD_INT="http://www.w3.org/2001/XMLSchema#int",s.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",s.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",s.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",s.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",s.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",s.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",s.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",s.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",s.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",s.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",s.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",s.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",s.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",s.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",s.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",s.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",s.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",s.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",s.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",s.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration",s.XSD_UNTYPED_ATOMIC="http://www.w3.org/2001/XMLSchema#untypedAtomic"})(i||(fo.TypeURL=i={}));var a;return function(s){s.NOT="!",s.UMINUS="uminus",s.UPLUS="uplus",s.LOGICAL_OR="||",s.LOGICAL_AND="&&",s.EQUAL="=",s.NOT_EQUAL="!=",s.LT="<",s.GT=">",s.LTE="<=",s.GTE=">=",s.SAME_TERM="sameterm",s.IN="in",s.NOT_IN="notin",s.MULTIPLICATION="*",s.DIVISION="/",s.ADDITION="+",s.SUBTRACTION="-",s.IS_IRI="isiri",s.IS_URI="isuri",s.IS_BLANK="isblank",s.IS_LITERAL="isliteral",s.IS_NUMERIC="isnumeric",s.HAS_LANG="haslang",s.HAS_LANGDIR="haslangdir",s.STR="str",s.LANG="lang",s.LANGDIR="langdir",s.DATATYPE="datatype",s.IRI="iri",s.URI="uri",s.BNODE="bnode",s.STRDT="strdt",s.STRLANG="strlang",s.STRLANGDIR="strlangdir",s.UUID="uuid",s.STRUUID="struuid",s.STRLEN="strlen",s.SUBSTR="substr",s.UCASE="ucase",s.LCASE="lcase",s.STRSTARTS="strstarts",s.STRENDS="strends",s.CONTAINS="contains",s.STRBEFORE="strbefore",s.STRAFTER="strafter",s.ENCODE_FOR_URI="encode_for_uri",s.CONCAT="concat",s.LANG_MATCHES="langmatches",s.REGEX="regex",s.REPLACE="replace",s.ABS="abs",s.ROUND="round",s.CEIL="ceil",s.FLOOR="floor",s.RAND="rand",s.NOW="now",s.YEAR="year",s.MONTH="month",s.DAY="day",s.HOURS="hours",s.MINUTES="minutes",s.SECONDS="seconds",s.TIMEZONE="timezone",s.TZ="tz",s.MD5="md5",s.SHA1="sha1",s.SHA256="sha256",s.SHA384="sha384",s.SHA512="sha512",s.TRIPLE="triple",s.SUBJECT="subject",s.PREDICATE="predicate",s.OBJECT="object",s.IS_TRIPLE="istriple",s.BOUND="bound",s.IF="if",s.COALESCE="coalesce"}(a||(fo.SparqlOperator=a={})),fo}var ur={},Tre;function Rl(){if(Tre)return ur;Tre=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.NoAggregator=ur.ExtensionFunctionError=ur.InvalidExpression=ur.InvalidArity=ur.UnexpectedError=ur.ParseError=ur.EmptyAggregateError=ur.IncompatibleDirectionalLanguageOperation=ur.IncompatibleLanguageOperation=ur.InvalidTimezoneCall=ur.CastError=ur.InvalidArgumentTypes=ur.InError=ur.CoalesceError=ur.RDFEqualTypeError=ur.EBVCoercionError=ur.UnboundVariableError=ur.InvalidLexicalForm=ur.ExpressionError=void 0,ur.isExpressionError=e;class t extends Error{}ur.ExpressionError=t;function e(T){return T instanceof t}class r extends t{constructor(P){super(`Invalid lexical form '${A(P)}'`);k(this,"arg");this.arg=P}}ur.InvalidLexicalForm=r;class n extends t{constructor(P,j){super(`Unbound variable '${A(P)}'`);k(this,"variable");k(this,"bindings");this.variable=P,this.bindings=j}}ur.UnboundVariableError=n;class i extends t{constructor(P){super(`Cannot coerce term to EBV '${A(P)}'`);k(this,"arg");this.arg=P}}ur.EBVCoercionError=i;class a extends t{constructor(P){super("Equality test for literals with unsupported datatypes");k(this,"args");this.args=P}}ur.RDFEqualTypeError=a;class s extends t{constructor(P){super("All COALESCE arguments threw errors");k(this,"errors");this.errors=P}}ur.CoalesceError=s;class o extends t{constructor(P){super(`Some argument to IN errorred and none where equal. ${P.map(j=>`(${j.toString()}) `).join("and ")}`);k(this,"errors");this.errors=P}}ur.InError=o;class c extends t{constructor(P,j){super(`Argument types not valid for operator: '${A(j)}' with '${A(P)}`);k(this,"args");k(this,"op");this.args=P,this.op=j}}ur.InvalidArgumentTypes=c;class u extends t{constructor(P,j){super(`Invalid cast: '${A(P)}' to '${A(j)}'`);k(this,"arg");this.arg=P}}ur.CastError=u;class l extends t{constructor(P){super(`TIMEZONE call on ${P} which has no timezone`);k(this,"dateString");this.dateString=P}}ur.InvalidTimezoneCall=l;class d extends t{constructor(P,j){super(`Operation on incompatible language literals '${A(P)}' and '${A(j)}'`);k(this,"arg1");k(this,"arg2");this.arg1=P,this.arg2=j}}ur.IncompatibleLanguageOperation=d;class f extends t{constructor(P,j){super(`Operation on incompatible directional language literals '${A(P)}' and '${A(j)}'`);k(this,"arg1");k(this,"arg2");this.arg1=P,this.arg2=j}}ur.IncompatibleDirectionalLanguageOperation=f;class h extends t{constructor(){super("Empty aggregate expression")}}ur.EmptyAggregateError=h;class p extends t{constructor(S,P){super(`Failed to parse "${S}" as ${P}.`)}}ur.ParseError=p;class _ extends Error{constructor(P,j){super(`Programmer Error '${P}'`);k(this,"payload");this.payload=j}}ur.UnexpectedError=_;class g extends Error{constructor(P,j){super(`The number of args does not match the arity of the operator '${A(j)}'.`);k(this,"args");k(this,"op");this.args=P,this.op=j}}ur.InvalidArity=g;class m extends Error{constructor(S){super(`Invalid SPARQL Expression '${A(S)}'`)}}ur.InvalidExpression=m;class y extends Error{constructor(S,P){P instanceof Error?super(`Error thrown in ${S}: ${P.message}${P.stack?`
${P.stack}`:""}`):super(`Error thrown in ${S}`)}}ur.ExtensionFunctionError=y;class v extends Error{constructor(S){super(`Aggregate expression ${A(S)} found, but no aggregate hook provided.`)}}ur.NoAggregator=v;function A(T){return JSON.stringify(T)}return ur}var cd={},wre;function Frt(){if(wre)return cd;wre=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.serializeDateTime=e,cd.serializeDate=n,cd.serializeTime=i,cd.serializeDuration=a;function t(s,o=2){return s.toLocaleString(void 0,{minimumIntegerDigits:o,useGrouping:!1})}function e(s){return`${n({year:s.year,month:s.month,day:s.day})}T${i(s)}`}function r(s){return s.zoneHours===void 0||s.zoneMinutes===void 0?"":s.zoneHours===0&&s.zoneMinutes===0?"Z":`${s.zoneHours>=0?`+${t(s.zoneHours)}`:t(s.zoneHours)}:${t(Math.abs(s.zoneMinutes))}`}function n(s){return`${t(s.year,4)}-${t(s.month)}-${t(s.day)}${r(s)}`}function i(s){return`${t(s.hours)}:${t(s.minutes)}:${t(s.seconds)}${r(s)}`}function a(s,o="PT0S"){if(!Object.values(s).some(g=>(g||0)!==0))return o;const c=Object.values(s).some(g=>(g||0)<0)?"-":"",u=s.year?`${Math.abs(s.year)}Y`:"",l=s.month?`${Math.abs(s.month)}M`:"",d=s.day?`${Math.abs(s.day)}D`:"",f=`${c}P${u}${l}${d}`;if(!(s.hours||s.minutes||s.seconds))return f;const h=s.hours?`${Math.abs(s.hours)}H`:"",p=s.minutes?`${Math.abs(s.minutes)}M`:"",_=s.seconds?`${Math.abs(s.seconds)}S`:"";return`${f}T${h}${p}${_}`}return cd}var Sre;function Mrt(){if(Sre)return $t;Sre=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.NonLexicalLiteral=$t.YearMonthDurationLiteral=$t.DayTimeDurationLiteral=$t.DurationLiteral=$t.DateLiteral=$t.TimeLiteral=$t.DateTimeLiteral=$t.StringLiteral=$t.DirLangStringLiteral=$t.LangStringLiteral=$t.BooleanLiteral=$t.DoubleLiteral=$t.FloatLiteral=$t.DecimalLiteral=$t.IntegerLiteral=$t.NumericLiteral=$t.Literal=$t.DefaultGraph=$t.Quad=$t.BlankNode=$t.NamedNode=$t.Term=void 0,$t.isLiteralTermExpression=l,$t.isNonLexicalLiteral=C;const t=Bl(),e=bf(),r=bf(),n=Rl(),i=Frt();class a{constructor(){k(this,"expressionType",t.ExpressionType.Term)}str(){throw new n.InvalidArgumentTypes([this],e.SparqlOperator.STR)}coerceEBV(){throw new n.EBVCoercionError(this)}}$t.Term=a;class s extends a{constructor(B){super();k(this,"value");k(this,"termType","namedNode");this.value=B}toRDF(B){return B.namedNode(this.value)}str(){return this.value}}$t.NamedNode=s;class o extends a{constructor(B){super();k(this,"value");k(this,"termType","blankNode");this.value=B}toRDF(B){return typeof this.value=="string"?B.blankNode(this.value):this.value}}$t.BlankNode=o;class c extends a{constructor(B,G,K,$){super();k(this,"subject");k(this,"predicate");k(this,"object");k(this,"graph");k(this,"termType","quad");this.subject=B,this.predicate=G,this.object=K,this.graph=$}toRDF(B){return B.quad(this.subject.toRDF(B),this.predicate.toRDF(B),this.object.toRDF(B),this.graph.toRDF(B))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}$t.Quad=c;class u extends a{constructor(){super();k(this,"termType","defaultGraph")}toRDF(B){return B.defaultGraph()}str(){return"DefaultGraph"}}$t.DefaultGraph=u;function l(M){if(M.termType==="literal")return M}class d extends a{constructor(B,G,K,$,se){super();k(this,"typedValue");k(this,"dataType");k(this,"strValue");k(this,"language");k(this,"direction");k(this,"termType","literal");this.typedValue=B,this.dataType=G,this.strValue=K,this.language=$,this.direction=se}toRDF(B){return B.literal(this.strValue??this.str(),this.direction&&this.language?{language:this.language,direction:this.direction}:this.language??B.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}$t.Literal=d;class f extends d{constructor(B,G,K,$){super(B,G,K,$);k(this,"typedValue");k(this,"strValue");k(this,"language");this.typedValue=B,this.strValue=K,this.language=$}coerceEBV(){return!!this.typedValue}toRDF(B){const G=super.toRDF(B);return Number.isFinite(this.typedValue)||(G.value=G.value.replace("Infinity","INF")),G}str(){return this.strValue??this.specificFormatter(this.typedValue)}}$t.NumericLiteral=f;class h extends f{constructor(B,G,K,$){super(B,G??r.TypeURL.XSD_INTEGER,K,$);k(this,"typedValue");k(this,"strValue");k(this,"language");this.typedValue=B,this.strValue=K,this.language=$}specificFormatter(B){return B.toFixed(0)}}$t.IntegerLiteral=h;class p extends f{constructor(B,G,K,$){super(B,G??r.TypeURL.XSD_DECIMAL,K,$);k(this,"typedValue");k(this,"strValue");k(this,"language");this.typedValue=B,this.strValue=K,this.language=$}specificFormatter(B){return B.toString()}}$t.DecimalLiteral=p;class _ extends f{constructor(B,G,K,$){super(B,G??r.TypeURL.XSD_FLOAT,K,$);k(this,"typedValue");k(this,"strValue");k(this,"language");this.typedValue=B,this.strValue=K,this.language=$}specificFormatter(B){return B.toString()}}$t.FloatLiteral=_;class g extends f{constructor(B,G,K,$){super(B,G??r.TypeURL.XSD_DOUBLE,K,$);k(this,"typedValue");k(this,"strValue");k(this,"language");this.typedValue=B,this.strValue=K,this.language=$}specificFormatter(B){if(!Number.isFinite(B))return B>0?"INF":B<0?"-INF":"NaN";const G=B.toExponential(),[K,$]=G.split("e"),se=$.replace(/\+/u,"");return`${K.includes(".")?K:`${K}.0`}E${se}`}}$t.DoubleLiteral=g;class m extends d{constructor(B,G,K){super(B,K??r.TypeURL.XSD_BOOLEAN,G);k(this,"typedValue");k(this,"strValue");this.typedValue=B,this.strValue=G}coerceEBV(){return this.typedValue}}$t.BooleanLiteral=m;class y extends d{constructor(B,G,K){super(B,K??r.TypeURL.RDF_LANG_STRING,B,G);k(this,"typedValue");k(this,"language");this.typedValue=B,this.language=G}coerceEBV(){return super.coerceEBV()}}$t.LangStringLiteral=y;class v extends d{constructor(B,G,K,$){super(B,$??r.TypeURL.RDF_DIR_LANG_STRING,B,G,K);k(this,"typedValue");k(this,"language");k(this,"direction");this.typedValue=B,this.language=G,this.direction=K}}$t.DirLangStringLiteral=v;class A extends d{constructor(B,G){super(B,G??r.TypeURL.XSD_STRING,B);k(this,"typedValue");this.typedValue=B}coerceEBV(){return this.str().length>0}}$t.StringLiteral=A;class T extends d{constructor(B,G,K){super(B,K??r.TypeURL.XSD_DATE_TIME,G);k(this,"typedValue");k(this,"strValue");this.typedValue=B,this.strValue=G}str(){return(0,i.serializeDateTime)(this.typedValue)}}$t.DateTimeLiteral=T;class S extends d{constructor(B,G,K){super(B,K??r.TypeURL.XSD_TIME,G);k(this,"typedValue");k(this,"strValue");this.typedValue=B,this.strValue=G}str(){return(0,i.serializeTime)(this.typedValue)}}$t.TimeLiteral=S;class P extends d{constructor(B,G,K){super(B,K??r.TypeURL.XSD_DATE,G);k(this,"typedValue");k(this,"strValue");this.typedValue=B,this.strValue=G}str(){return(0,i.serializeDate)(this.typedValue)}}$t.DateLiteral=P;class j extends d{constructor(B,G,K){super(B,K??r.TypeURL.XSD_DURATION,G);k(this,"typedValue");k(this,"strValue");this.typedValue=B,this.strValue=G}str(){return(0,i.serializeDuration)(this.typedValue)}}$t.DurationLiteral=j;class F extends j{constructor(B,G,K){super(B,G,K??r.TypeURL.XSD_DAY_TIME_DURATION);k(this,"typedValue");k(this,"strValue");this.typedValue=B,this.strValue=G}}$t.DayTimeDurationLiteral=F;class N extends d{constructor(B,G,K){super(B,K??r.TypeURL.XSD_YEAR_MONTH_DURATION,G);k(this,"typedValue");k(this,"strValue");this.typedValue=B,this.strValue=G}str(){return(0,i.serializeDuration)(this.typedValue,"P0M")}}$t.YearMonthDurationLiteral=N;class R extends d{constructor(B,G,K,$,se){super({toString:()=>"undefined"},G,$,se);k(this,"openWorldType");this.openWorldType=K}coerceEBV(){return super.coerceEBV()}toRDF(B){return B.literal(this.str(),this.language??B.namedNode(this.dataType))}str(){return this.strValue??""}}$t.NonLexicalLiteral=R;function C(M){if(M instanceof R)return M}return $t}var om={},xre;function Drt(){if(xre)return om;xre=1,Object.defineProperty(om,"__esModule",{value:!0}),om.Operator=void 0;const t=Bl();let e=class{constructor(n,i,a){k(this,"name");k(this,"args");k(this,"apply");k(this,"expressionType",t.ExpressionType.Operator);this.name=n,this.args=i,this.apply=a}};return om.Operator=e,om}var um={},Ere;function Crt(){if(Ere)return um;Ere=1,Object.defineProperty(um,"__esModule",{value:!0}),um.Aggregate=void 0;const t=Bl();let e=class{constructor(n,i){k(this,"name");k(this,"expression");k(this,"expressionType",t.ExpressionType.Aggregate);this.name=n,this.expression=i}};return um.Aggregate=e,um}var cm={},Ire;function Lrt(){if(Ire)return cm;Ire=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.Existence=void 0;const t=Bl();let e=class{constructor(n){k(this,"expression");k(this,"expressionType",t.ExpressionType.Existence);this.expression=n}};return cm.Existence=e,cm}var Ore;function Qu(){return Ore||(Ore=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Prt(),t),r(Nrt(),t),r(Mrt(),t),r(Drt(),t),r(Crt(),t),r(Lrt(),t)}(kj)),kj}var Ns={},Kn={},Rre;function MI(){if(Rre)return Kn;Rre=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.defaultedDayTimeDurationRepresentation=t,Kn.defaultedYearMonthDurationRepresentation=e,Kn.defaultedDurationRepresentation=r,Kn.simplifyDurationRepresentation=n,Kn.defaultedDateTimeRepresentation=i,Kn.toDateTimeRepresentation=a,Kn.negateDuration=s,Kn.toJSDate=o,Kn.toUTCDate=c,Kn.trimToYearMonthDuration=u,Kn.trimToDayTimeDuration=l,Kn.yearMonthDurationsToMonths=d,Kn.dayTimeDurationsToSeconds=f,Kn.extractRawTimeZone=h,Kn.extractTimeZone=p;function t(_){return{day:_.day??0,hours:_.hours??0,minutes:_.minutes??0,seconds:_.seconds??0}}function e(_){return{year:_.year??0,month:_.month??0}}function r(_){return{...t(_),...e(_)}}function n(_){const g=r(_),m={},y=g.year+Math.trunc(g.month/12);y&&(m.year=y,g.month%=12),g.month&&(m.month=g.month);const v=g.day+Math.trunc(g.hours/24)+Math.trunc(g.minutes/(24*60))+Math.trunc(g.seconds/(24*60*60));v&&(m.day=v,g.hours%=24,g.minutes%=24*60,g.seconds%=24*60*60);const A=g.hours+Math.trunc(g.minutes/60)+Math.trunc(g.seconds/(60*60));A&&(m.hours=A,g.minutes%=60,g.seconds%=60*60);const T=g.minutes+Math.trunc(g.seconds/60);return T&&(m.minutes=T,g.seconds%=60),g.seconds&&(m.seconds=g.seconds),m}function i(_){return{..._,day:_.day??1,hours:_.hours??0,month:_.month??1,year:_.year??0,seconds:_.seconds??0,minutes:_.minutes??0}}function a({date:_,timeZone:g}){return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hours:_.getHours(),minutes:_.getMinutes(),seconds:_.getSeconds(),zoneHours:g.zoneHours,zoneMinutes:g.zoneMinutes}}function s(_){return{year:_.year===void 0?void 0:-1*_.year,month:_.month===void 0?void 0:-1*_.month,day:_.day===void 0?void 0:-1*_.day,hours:_.hours===void 0?void 0:-1*_.hours,minutes:_.minutes===void 0?void 0:-1*_.minutes,seconds:_.seconds===void 0?void 0:-1*_.seconds}}function o(_){const g=new Date(_.year,_.month-1,_.day,_.hours,_.minutes,Math.trunc(_.seconds),_.seconds%1*1e3);return _.year>=0&&_.year<100&&g.setFullYear(g.getFullYear()-1900),g}function c(_,g){const m=o(i(_)),y=m.getTimezoneOffset(),v=_.zoneHours??g.zoneHours,A=_.zoneMinutes??g.zoneMinutes;return new Date(m.getTime()-(y+v*60+A)*60*1e3)}function u(_){return{year:_.year,month:_.month}}function l(_){return{day:_.day,hours:_.hours,minutes:_.minutes,seconds:_.seconds}}function d(_){return _.year*12+_.month}function f(_){return((_.day*24+_.hours)*60+_.minutes)*60+_.seconds}function h(_){return/(Z|([+-]\d\d:\d\d))?$/u.exec(_)[0]}function p(_){return{zoneHours:_.getTimezoneOffset()/60,zoneMinutes:_.getTimezoneOffset()%60}}return Kn}var gh={},Pre;function tOe(){if(Pre)return gh;Pre=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.maximumDayInMonthFor=r,gh.addDurationToDateTime=n,gh.elapsedDuration=i;const t=MI();function e(a,s,o=0){const c=a-o,u=s-o,l=Math.floor(c/u);return{intDiv:l,remainder:a-l*u}}function r(a,s){const{intDiv:o,remainder:c}=e(s,13,1),u=a+o;return[1,3,5,7,8,10,12].includes(c)?31:[4,6,9,11].includes(c)?30:c===2&&(e(u,400).remainder===0||e(u,100).remainder!==0&&e(u,4).remainder===0)?29:28}function n(a,s){const o={...a};let c=e(a.month+s.month,13,1);for(o.month=c.remainder,o.year=a.year+s.year+c.intDiv,c=e(a.seconds+s.seconds,60),o.seconds=c.remainder,c=e(a.minutes+s.minutes+c.intDiv,60),o.minutes=c.remainder,c=e(a.hours+s.hours+c.intDiv,24),o.hours=c.remainder,o.day=a.day+s.day+c.intDiv;;){let u;if(o.day<1)o.day+=r(o.year,o.month-1),u=-1;else if(o.day>r(o.year,o.month))o.day-=r(o.year,o.month),u=1;else break;c=e(o.month+u,13,1),o.month=c.remainder,o.year+=c.intDiv}return o}function i(a,s,o){const c=(0,t.toUTCDate)(a,o),u=(0,t.toUTCDate)(s,o),l=c.getTime()-u.getTime();return{day:Math.floor(l/(1e3*60*60*24)),hours:Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(l%(1e3*60*60)/(1e3*60)),seconds:l%(1e3*60)}}return gh}var Nre;function pG(){if(Nre)return Ns;Nre=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.parseXSDFloat=n,Ns.parseXSDDecimal=i,Ns.parseDateTime=a,Ns.parseDate=o,Ns.parseTime=u,Ns.parseDuration=l,Ns.parseYearMonthDuration=d,Ns.parseDayTimeDuration=f;const t=MI(),e=Rl(),r=tOe();function n(h){const p=Number(h);return Number.isNaN(p)?h==="NaN"?Number.NaN:h==="INF"||h==="+INF"?Number.POSITIVE_INFINITY:h==="-INF"?Number.NEGATIVE_INFINITY:void 0:p}function i(h){const p=Number(h);return Number.isNaN(p)?void 0:p}function a(h){const[p,_]=h.split("T");if(_===void 0)throw new e.ParseError(h,"dateTime");return{...o(p),...c(_)}}function s(h){if(h==="")return{zoneHours:void 0,zoneMinutes:void 0};if(h==="Z")return{zoneHours:0,zoneMinutes:0};const _=h.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:_[0]*_[1],zoneMinutes:_[0]*_[2]}}function o(h){const p=h.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(p===h)throw new e.ParseError(h,"date");const _=p.split("!"),g=_.slice(0,-1).map(Number),m={year:g[0]*g[1],month:g[2],day:g[3],...s(_[4])};if(!(m.month>=1&&m.month<=12)||!(m.day>=1&&m.day<=(0,r.maximumDayInMonthFor)(m.year,m.month)))throw new e.ParseError(h,"date");return m}function c(h){const p=h.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(p===h)throw new e.ParseError(h,"time");const _=p.split("!"),g=_.slice(0,-1).map(Number),m={hours:g[0],minutes:g[1],seconds:g[2],...s(_[3])};if(m.seconds>=60||m.minutes>=60||m.hours>24||m.hours===24&&(m.minutes!==0||m.seconds!==0))throw new e.ParseError(h,"time");return m}function u(h){const p=c(h);return p.hours%=24,p}function l(h){const[p,_]=h.split("T"),g=p.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(g===p)throw new e.ParseError(h,"duration");const m=g.split("!");if(_!==void 0){const A=_.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(_===""||_===A)throw new e.ParseError(h,"duration");m.push(...A.split("!"))}const y=m.map(A=>A.slice(0,-1));if(!y.slice(1).some(Boolean))throw new e.ParseError(h,"duration");const v=Number(y[0]);return(0,t.simplifyDurationRepresentation)({year:y[1]?v*Number(y[1]):void 0,month:y[2]?v*Number(y[2]):void 0,day:y[3]?v*Number(y[3]):void 0,hours:y[4]?v*Number(y[4]):void 0,minutes:y[5]?v*Number(y[5]):void 0,seconds:y[6]?v*Number(y[6]):void 0})}function d(h){const p=l(h);if(["hours","minutes","seconds","day"].some(_=>!!p[_]))throw new e.ParseError(h,"yearMonthDuration");return p}function f(h){const p=l(h);if(["year","month"].some(_=>!!p[_]))throw new e.ParseError(h,"dayTimeDuration");return p}return Ns}var zj={},Ai={},lm={},Fre;function rOe(){if(Fre)return lm;Fre=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.OverloadTree=void 0;const t=Qu(),e=Oz();let r=class _G{constructor(i,a){k(this,"identifier");k(this,"implementation");k(this,"promotionCount");k(this,"generalOverloads");k(this,"literalOverLoads");k(this,"depth");this.identifier=i,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=a??0,this.promotionCount=void 0}getSubtree(i){const a=(0,e.asGeneralType)(i);if(a)return this.generalOverloads[a];for(const[s,o]of this.literalOverLoads)if(i===s)return o}getImplementationExact(i){let a=this;for(const s of i)if(a=a.getSubtree(s),!a)return;return a.implementation}search(i,a,s){let o=s[this.identifier],c=0;for(;c<i.length&&(o!=null&&o.cache);){const d=i[c],f=(0,t.isLiteralTermExpression)(d);o=o.cache[f?f.dataType:d.termType],c++}if(c===i.length&&(o!=null&&o.func))return o.func;const u=[],l=0;if(i.length===0)return this.implementation;for(u.push(...this.getSubTreeWithArg(i[l],a).map(d=>({node:d,index:l+1})));u.length>0;){const{index:d,node:f}=u.pop();if(d===i.length&&f.implementation)return this.addToCache(s,i,f.implementation),f.implementation;u.push(...f.getSubTreeWithArg(i[d],a).map(h=>({node:h,index:d+1})))}}addToCache(i,a,s){function o(u,l){return l in u||(u[l]={}),u[l]}let c=o(i,this.identifier);for(const u of a){const l=(0,t.isLiteralTermExpression)(u),d=l?l.dataType:u.termType;c.cache=c.cache??{},c=o(c.cache,d)}c.func=s}addOverload(i,a){this._addOverload([...i],a,0)}_addOverload(i,a,s){const[o,...c]=i;if(!o){(this.promotionCount===void 0||s<=this.promotionCount)&&(this.promotionCount=s,this.implementation=a);return}let u=this.getSubtree(o);if(!u){const l=new _G(this.identifier,this.depth+1),d=(0,e.asGeneralType)(o);d&&(this.generalOverloads[d]=l);const f=(0,e.asOverrideType)(o);f&&this.literalOverLoads.push([f,l]),u=l}if(u._addOverload(c,a,s),e.typePromotion[o])for(const l of e.typePromotion[o])this.addPromotedOverload(l.typeToPromote,a,l.conversionFunction,c,s)}addPromotedOverload(i,a,s,o,c){let u=this.getSubtree(i);if(!u){const l=new _G(this.identifier,this.depth+1);this.literalOverLoads.push([i,l]),u=l}u._addOverload(o,l=>d=>a(l)([...d.slice(0,this.depth),s(d[this.depth]),...d.slice(this.depth+1,d.length)]),c+1)}getSubTreeWithArg(i,a){const s=[],o=(0,t.isLiteralTermExpression)(i);if(this.generalOverloads.term&&s.push(this.generalOverloads.term),this.generalOverloads[i.termType]&&s.push(this.generalOverloads[i.termType]),o){const c=(0,e.asKnownLiteralType)(o.dataType);let u;c?u=e.superTypeDictTable[c]:u=(0,e.getSuperTypes)(o.dataType,a);const l=this.literalOverLoads.filter(([d,f])=>d in u).map(([d,f])=>[u[d],f]);l.sort(([d,f],[h,p])=>d-h),s.push(...l.map(([d,f])=>f))}return s}};return lm.OverloadTree=r,lm}var Mre;function Yu(){if(Mre)return Ai;Mre=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Builder=void 0,Ai.declare=o,Ai.bool=u,Ai.integer=l,Ai.decimal=d,Ai.float=f,Ai.double=h,Ai.string=p,Ai.langString=_,Ai.dirLangString=g,Ai.dateTime=m,Ai.expressionToVar=y;const t=dt,e=Qu(),r=Qu(),n=bf(),i=bf(),a=Rl(),s=rOe();function o(v){return new c(v)}class c{constructor(A){k(this,"overloadTree");k(this,"collected");this.overloadTree=new s.OverloadTree(A),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(A){return T=>S=>{for(const[P,j]of S.entries())if(j instanceof r.NonLexicalLiteral)throw new a.InvalidLexicalForm(S[P].toRDF(T.context.getSafe(t.KeysInitQuery.dataFactory)));return A(T)(S)}}set(A,T,S=!0){return this.overloadTree.addOverload(A,S?c.wrapInvalidLexicalProtected(T):T),this}copy({from:A,to:T}){const S=this.overloadTree.getImplementationExact(A);if(!S)throw new a.UnexpectedError("Tried to copy implementation, but types not found",{from:A,to:T});return this.set(T,S)}onUnary(A,T,S=!0){return this.set([A],P=>([j])=>T(P)(j),S)}onUnaryTyped(A,T,S=!0){return this.set([A],P=>([j])=>T(P)(j.typedValue),S)}onBinary(A,T,S=!0){return this.set(A,P=>([j,F])=>T(P)(j,F),S)}onBinaryTyped(A,T,S=!0){return this.set(A,P=>([j,F])=>T(P)(j.typedValue,F.typedValue),S)}onTernaryTyped(A,T,S=!0){return this.set(A,P=>([j,F,N])=>T(P)(j.typedValue,F.typedValue,N.typedValue),S)}onTernary(A,T,S=!0){return this.set(A,P=>([j,F,N])=>T(P)(j,F,N),S)}onQuaternaryTyped(A,T,S=!0){return this.set(A,P=>([j,F,N,R])=>T(P)(j.typedValue,F.typedValue,N.typedValue,R.typedValue),S)}onTerm1(A,T=!1){return this.set(["term"],S=>([P])=>A(S)(P),T)}onTerm3(A){return this.set(["term","term","term"],T=>([S,P,j])=>A(T)(S,P,j))}onQuad1(A){return this.set(["quad"],T=>([S])=>A(T)(S))}onLiteral1(A,T=!0){return this.set(["literal"],S=>([P])=>A(S)(P),T)}onBoolean1(A,T=!0){return this.set([n.TypeURL.XSD_BOOLEAN],S=>([P])=>A(S)(P),T)}onBoolean1Typed(A,T=!0){return this.set([n.TypeURL.XSD_BOOLEAN],S=>([P])=>A(S)(P.typedValue),T)}onString1(A,T=!0){return this.set([n.TypeURL.XSD_STRING],S=>([P])=>A(S)(P),T)}onString1Typed(A,T=!0){return this.set([n.TypeURL.XSD_STRING],S=>([P])=>A(S)(P.typedValue),T)}onLangString1(A,T=!0){return this.set([n.TypeURL.RDF_LANG_STRING],S=>([P])=>A(S)(P),T)}onDirLangString1(A,T=!0){return this.set([n.TypeURL.RDF_DIR_LANG_STRING],S=>([P])=>A(S)(P),T)}onStringly1(A,T=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],S=>([P])=>A(S)(P),T)}onStringly1Typed(A,T=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],S=>([P])=>A(S)(P.typedValue),T)}onNumeric1(A,T=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],S=>([P])=>A(S)(P),T)}onDateTime1(A,T=!0){return this.set([n.TypeURL.XSD_DATE_TIME],S=>([P])=>A(S)(P),T)}numericConverter(A,T=!0){const S=P=>j=>A(P)(j.typedValue);return this.onUnary(i.TypeURL.XSD_INTEGER,P=>j=>l(S(P)(j)),T).onUnary(i.TypeURL.XSD_DECIMAL,P=>j=>d(S(P)(j)),T).onUnary(i.TypeURL.XSD_FLOAT,P=>j=>f(S(P)(j)),T).onUnary(i.TypeURL.XSD_DOUBLE,P=>j=>h(S(P)(j)),T)}arithmetic(A,T=!0){const S=P=>(j,F)=>A(P)(j.typedValue,F.typedValue);return this.onBinary([i.TypeURL.XSD_INTEGER,i.TypeURL.XSD_INTEGER],P=>(j,F)=>l(S(P)(j,F)),T).onBinary([i.TypeURL.XSD_DECIMAL,i.TypeURL.XSD_DECIMAL],P=>(j,F)=>d(S(P)(j,F)),T).onBinary([i.TypeURL.XSD_FLOAT,i.TypeURL.XSD_FLOAT],P=>(j,F)=>f(S(P)(j,F)),T).onBinary([i.TypeURL.XSD_DOUBLE,i.TypeURL.XSD_DOUBLE],P=>(j,F)=>h(S(P)(j,F)),T)}numberTest(A){return this.numeric(T=>([S,P])=>{const j=A(T)(S.typedValue,P.typedValue);return u(j)})}stringTest(A,T=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],S=>([P,j])=>{const F=A(S)(P.typedValue,j.typedValue);return u(F)},T)}booleanTest(A,T=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],S=>([P,j])=>{const F=A(S)(P.typedValue,j.typedValue);return u(F)},T)}dateTimeTest(A,T=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],S=>([P,j])=>{const F=A(S)(P.typedValue,j.typedValue);return u(F)},T)}numeric(A){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],A)}}Ai.Builder=c;function u(v){return new e.BooleanLiteral(v)}function l(v){return new e.IntegerLiteral(v)}function d(v){return new e.DecimalLiteral(v)}function f(v){return new e.FloatLiteral(v)}function h(v){return new e.DoubleLiteral(v)}function p(v){return new e.StringLiteral(v)}function _(v,A){return new e.LangStringLiteral(v,A)}function g(v,A,T){return new e.DirLangStringLiteral(v,A,T)}function m(v,A){return new e.DateTimeLiteral(v,A)}function y(v,A){return v.variable(A.name.slice(1))}return Ai}var Dre;function Oz(){return Dre||(Dre=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.typePromotion=t.typeAliasCheck=t.superTypeDictTable=t.extensionTableInput=void 0,t.getSuperTypes=i,t.extensionTableInit=a,t.asTypeAlias=c,t.asKnownLiteralType=u,t.asOverrideType=l,t.asGeneralType=d,t.isInternalSubType=f,t.getSuperTypeDict=h,t.isSubTypeOf=p;const e=Qu(),r=Yu(),n=bf();t.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.RDF_DIR_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_UNTYPED_ATOMIC]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},t.superTypeDictTable=Object.create(null);function i(_,g){const m=g.cache.get(_);if(m)return m;const y=g.discoverer(_);if(y==="term"){const T=Object.create(null);return T.__depth=0,T[_]=0,g.cache.set(_,T),T}let v;const A=u(y);return A?v={...t.superTypeDictTable[A]}:v={...i(y,g)},v.__depth++,v[_]=v.__depth,g.cache.set(_,v),v}function a(){for(const[_,g]of Object.entries(t.extensionTableInput)){const m=_;t.superTypeDictTable[m]||s(m,g,t.superTypeDictTable)}}a();function s(_,g,m){if(g==="term"||g===void 0){const y=Object.create(null);y.__depth=0,y[_]=0,m[_]=y;return}m[g]||s(g,t.extensionTableInput[g],m),m[_]={...m[g],[_]:m[g].__depth+1,__depth:m[g].__depth+1}}t.typeAliasCheck=Object.create(null);function o(){for(const _ of Object.values(n.TypeAlias))t.typeAliasCheck[_]=!0}o();function c(_){if(_ in t.typeAliasCheck)return _}function u(_){if(_ in t.superTypeDictTable)return _}function l(_){if(u(_)??_==="term")return _}function d(_){if(_==="term"||(0,e.asTermType)(_))return _}function f(_,g){return _!=="term"&&t.superTypeDictTable[_]&&t.superTypeDictTable[_][g]!==void 0}function h(_,g){const m=u(_);return m?t.superTypeDictTable[m]:i(_,g)}function p(_,g,m){return _==="term"?!1:h(_,m)[g]!==void 0}t.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:_=>(0,r.string)(_.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:_=>(0,r.double)(_.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:_=>(0,r.double)(_.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:_=>(0,r.float)(_.typedValue)}]}}(zj)),zj}var Cre;function jrt(){if(Cre)return F_;Cre=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.TermTransformer=void 0;const t=Ft(),e=Br(),r=Qu(),n=bf(),i=Rl(),a=Rl(),s=pG(),o=pG(),c=Oz();let u=class{constructor(d){k(this,"superTypeProvider");this.superTypeProvider=d}transformRDFTermUnsafe(d){return this.transformTerm({term:d,type:t.Algebra.Types.EXPRESSION,subType:t.Algebra.ExpressionTypes.TERM})}transformTerm(d){if(!d.term)throw new i.InvalidExpression(d);switch(d.term.termType){case"Variable":return new r.Variable(e.termToString(d.term));case"Literal":return this.transformLiteral(d.term);case"NamedNode":return new r.NamedNode(d.term.value);case"BlankNode":return new r.BlankNode(d.term.value);case"Quad":return new r.Quad(this.transformRDFTermUnsafe(d.term.subject),this.transformRDFTermUnsafe(d.term.predicate),this.transformRDFTermUnsafe(d.term.object),this.transformRDFTermUnsafe(d.term.graph));case"DefaultGraph":return new r.DefaultGraph}}transformLiteral(d){if(!d.datatype||[null,void 0,""].includes(d.datatype.value))return d.language?new r.LangStringLiteral(d.value,d.language):new r.StringLiteral(d.value);const f=d.datatype.value,h=(0,c.getSuperTypeDict)(f,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in h)return new r.StringLiteral(d.value,f);if(n.TypeURL.RDF_LANG_STRING in h)return new r.LangStringLiteral(d.value,d.language);if(n.TypeURL.RDF_DIR_LANG_STRING in h)return new r.DirLangStringLiteral(d.value,d.language,d.direction);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in h)return new r.YearMonthDurationLiteral((0,s.parseYearMonthDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DAY_TIME_DURATION in h)return new r.DayTimeDurationLiteral((0,s.parseDayTimeDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DURATION in h)return new r.DurationLiteral((0,s.parseDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DATE_TIME in h){const g=new Date(d.value);return Number.isNaN(g.getTime())?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new r.DateTimeLiteral((0,s.parseDateTime)(d.value),d.value,f)}if(n.TypeURL.XSD_DATE in h)return new r.DateLiteral((0,s.parseDate)(d.value),d.value,f);if(n.TypeURL.XSD_TIME in h)return new r.TimeLiteral((0,s.parseTime)(d.value),d.value,f);if(n.TypeURL.XSD_BOOLEAN in h)return d.value!=="true"&&d.value!=="false"&&d.value!=="1"&&d.value!=="0"?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new r.BooleanLiteral(d.value==="true"||d.value==="1",d.value);if(n.TypeURL.XSD_DECIMAL in h){const g=o.parseXSDDecimal(d.value);return g===void 0?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):n.TypeURL.XSD_INTEGER in h?new r.IntegerLiteral(g,f,d.value):new r.DecimalLiteral(g,f,d.value)}const p=n.TypeURL.XSD_FLOAT in h,_=n.TypeURL.XSD_DOUBLE in h;if(p||_){const g=o.parseXSDFloat(d.value);return g===void 0?new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):p?new r.FloatLiteral(g,f,d.value):new r.DoubleLiteral(g,f,d.value)}return new r.Literal(d.value,f,d.value)}catch(p){if((0,a.isExpressionError)(p))return new r.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value);throw p}}};return F_.TermTransformer=u,F_}var kR={},dm={},Lre;function Brt(){var f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R,C,M,U,B,G,K,$,se,pe,we,Ce,Le,Ie,Oe,ye,Me,W,mG,le,me,Z,q,nOe,re,_e,he,wc,Sc,gG,w3,S3,Jr,yG,gE,xc,bG,z;if(Lre)return dm;Lre=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,r=typeof process=="object"&&process?process:{},n=(V,x,O,D)=>{typeof r.emitWarning=="function"?r.emitWarning(V,x,O,D):console.error(`[${O}] ${x}: ${V}`)},i=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof i>"u"){a=class{constructor(){k(this,"onabort");k(this,"_onabort",[]);k(this,"reason");k(this,"aborted",!1)}addEventListener(O,D){this._onabort.push(D)}},i=class{constructor(){k(this,"signal",new a);x()}abort(O){var D,H;if(!this.signal.aborted){this.signal.reason=O,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(O);(H=(D=this.signal).onabort)==null||H.call(D,O)}}};let V=((f=r.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{V&&(V=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var s=V=>!e.has(V),o=V=>V&&V===Math.floor(V)&&V>0&&isFinite(V),c=V=>o(V)?V<=Math.pow(2,8)?Uint8Array:V<=Math.pow(2,16)?Uint16Array:V<=Math.pow(2,32)?Uint32Array:V<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(V){super(V),this.fill(0)}},l=(h=class{constructor(x,O){k(this,"heap");k(this,"length");if(!w(h,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new O(x),this.length=0}static create(x){let O=c(x);if(!O)return[];be(h,p,!0);let D=new h(x,O);return be(h,p,!1),D}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},p=new WeakMap,qe(h,p,!1),h),d=(z=class{constructor(x){qe(this,W);qe(this,m);qe(this,y);qe(this,v);qe(this,A);qe(this,T);qe(this,S);qe(this,P);qe(this,j);k(this,"ttl");k(this,"ttlResolution");k(this,"ttlAutopurge");k(this,"updateAgeOnGet");k(this,"updateAgeOnHas");k(this,"allowStale");k(this,"noDisposeOnSet");k(this,"noUpdateTTL");k(this,"maxEntrySize");k(this,"sizeCalculation");k(this,"noDeleteOnFetchRejection");k(this,"noDeleteOnStaleGet");k(this,"allowStaleOnFetchAbort");k(this,"allowStaleOnFetchRejection");k(this,"ignoreFetchAbort");qe(this,F);qe(this,N);qe(this,R);qe(this,C);qe(this,M);qe(this,U);qe(this,B);qe(this,G);qe(this,K);qe(this,$);qe(this,se);qe(this,pe);qe(this,we);qe(this,Ce);qe(this,Le);qe(this,Ie);qe(this,Oe);qe(this,ye);qe(this,Me);qe(this,le,()=>{});qe(this,me,()=>{});qe(this,Z,()=>{});qe(this,q,()=>!1);qe(this,re,x=>{});qe(this,_e,(x,O,D)=>{});qe(this,he,(x,O,D,H)=>{if(D||H)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});k(this,_,"LRUCache");let{max:O=0,ttl:D,ttlResolution:H=1,ttlAutopurge:Y,updateAgeOnGet:Q,updateAgeOnHas:ee,allowStale:ie,dispose:Re,onInsert:oe,disposeAfter:Te,noDisposeOnSet:We,noUpdateTTL:Qe,maxSize:Xe=0,maxEntrySize:Pe=0,sizeCalculation:He,fetchMethod:Ee,memoMethod:ce,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:ht,ignoreFetchAbort:Et,perf:rt}=x;if(rt!==void 0&&typeof(rt==null?void 0:rt.now)!="function")throw new TypeError("perf option must have a now() method if specified");if(be(this,j,rt??t),O!==0&&!o(O))throw new TypeError("max option must be a nonnegative integer");let _t=O?c(O):Array;if(!_t)throw new Error("invalid max value: "+O);if(be(this,m,O),be(this,y,Xe),this.maxEntrySize=Pe||w(this,y),this.sizeCalculation=He,this.sizeCalculation){if(!w(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ce!==void 0&&typeof ce!="function")throw new TypeError("memoMethod must be a function if defined");if(be(this,P,ce),Ee!==void 0&&typeof Ee!="function")throw new TypeError("fetchMethod must be a function if specified");if(be(this,S,Ee),be(this,Oe,!!Ee),be(this,R,new Map),be(this,C,new Array(O).fill(void 0)),be(this,M,new Array(O).fill(void 0)),be(this,U,new _t(O)),be(this,B,new _t(O)),be(this,G,0),be(this,K,0),be(this,$,l.create(O)),be(this,F,0),be(this,N,0),typeof Re=="function"&&be(this,v,Re),typeof oe=="function"&&be(this,A,oe),typeof Te=="function"?(be(this,T,Te),be(this,se,[])):(be(this,T,void 0),be(this,se,void 0)),be(this,Ie,!!w(this,v)),be(this,Me,!!w(this,A)),be(this,ye,!!w(this,T)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!Qe,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!Be,this.allowStaleOnFetchAbort=!!ht,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(w(this,y)!==0&&!o(w(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,W,nOe).call(this)}if(this.allowStale=!!ie,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!Q,this.updateAgeOnHas=!!ee,this.ttlResolution=o(H)||H===0?H:1,this.ttlAutopurge=!!Y,this.ttl=D||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,W,mG).call(this)}if(w(this,m)===0&&this.ttl===0&&w(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!w(this,m)&&!w(this,y)){let ut="LRU_CACHE_UNBOUNDED";s(ut)&&(e.add(ut),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,z))}}get perf(){return w(this,j)}static unsafeExposeInternals(x){return{starts:w(x,we),ttls:w(x,Ce),autopurgeTimers:w(x,Le),sizes:w(x,pe),keyMap:w(x,R),keyList:w(x,C),valList:w(x,M),next:w(x,U),prev:w(x,B),get head(){return w(x,G)},get tail(){return w(x,K)},free:w(x,$),isBackgroundFetch:O=>{var D;return fe(D=x,W,Jr).call(D,O)},backgroundFetch:(O,D,H,Y)=>{var Q;return fe(Q=x,W,S3).call(Q,O,D,H,Y)},moveToTail:O=>{var D;return fe(D=x,W,gE).call(D,O)},indexes:O=>{var D;return fe(D=x,W,wc).call(D,O)},rindexes:O=>{var D;return fe(D=x,W,Sc).call(D,O)},isStale:O=>{var D;return w(D=x,q).call(D,O)}}}get max(){return w(this,m)}get maxSize(){return w(this,y)}get calculatedSize(){return w(this,N)}get size(){return w(this,F)}get fetchMethod(){return w(this,S)}get memoMethod(){return w(this,P)}get dispose(){return w(this,v)}get onInsert(){return w(this,A)}get disposeAfter(){return w(this,T)}getRemainingTTL(x){return w(this,R).has(x)?1/0:0}*entries(){for(let x of fe(this,W,wc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,Jr).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*rentries(){for(let x of fe(this,W,Sc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,Jr).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*keys(){for(let x of fe(this,W,wc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,Jr).call(this,w(this,M)[x])&&(yield O)}}*rkeys(){for(let x of fe(this,W,Sc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,Jr).call(this,w(this,M)[x])&&(yield O)}}*values(){for(let x of fe(this,W,wc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,Jr).call(this,w(this,M)[x])&&(yield w(this,M)[x])}*rvalues(){for(let x of fe(this,W,Sc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,Jr).call(this,w(this,M)[x])&&(yield w(this,M)[x])}[(g=Symbol.iterator,_=Symbol.toStringTag,g)](){return this.entries()}find(x,O={}){for(let D of fe(this,W,wc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Jr).call(this,H)?H.__staleWhileFetching:H;if(Y!==void 0&&x(Y,w(this,C)[D],this))return this.get(w(this,C)[D],O)}}forEach(x,O=this){for(let D of fe(this,W,wc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Jr).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}rforEach(x,O=this){for(let D of fe(this,W,Sc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Jr).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}purgeStale(){let x=!1;for(let O of fe(this,W,Sc).call(this,{allowStale:!0}))w(this,q).call(this,O)&&(fe(this,W,xc).call(this,w(this,C)[O],"expire"),x=!0);return x}info(x){let O=w(this,R).get(x);if(O===void 0)return;let D=w(this,M)[O],H=fe(this,W,Jr).call(this,D)?D.__staleWhileFetching:D;if(H===void 0)return;let Y={value:H};if(w(this,Ce)&&w(this,we)){let Q=w(this,Ce)[O],ee=w(this,we)[O];if(Q&&ee){let ie=Q-(w(this,j).now()-ee);Y.ttl=ie,Y.start=Date.now()}}return w(this,pe)&&(Y.size=w(this,pe)[O]),Y}dump(){let x=[];for(let O of fe(this,W,wc).call(this,{allowStale:!0})){let D=w(this,C)[O],H=w(this,M)[O],Y=fe(this,W,Jr).call(this,H)?H.__staleWhileFetching:H;if(Y===void 0||D===void 0)continue;let Q={value:Y};if(w(this,Ce)&&w(this,we)){Q.ttl=w(this,Ce)[O];let ee=w(this,j).now()-w(this,we)[O];Q.start=Math.floor(Date.now()-ee)}w(this,pe)&&(Q.size=w(this,pe)[O]),x.unshift([D,Q])}return x}load(x){this.clear();for(let[O,D]of x){if(D.start){let H=Date.now()-D.start;D.start=w(this,j).now()-H}this.set(O,D.value,D)}}set(x,O,D={}){var We,Qe,Xe,Pe,He,Ee,ce;if(O===void 0)return this.delete(x),this;let{ttl:H=this.ttl,start:Y,noDisposeOnSet:Q=this.noDisposeOnSet,sizeCalculation:ee=this.sizeCalculation,status:ie}=D,{noUpdateTTL:Re=this.noUpdateTTL}=D,oe=w(this,he).call(this,x,O,D.size||0,ee);if(this.maxEntrySize&&oe>this.maxEntrySize)return ie&&(ie.set="miss",ie.maxEntrySizeExceeded=!0),fe(this,W,xc).call(this,x,"set"),this;let Te=w(this,F)===0?void 0:w(this,R).get(x);if(Te===void 0)Te=w(this,F)===0?w(this,K):w(this,$).length!==0?w(this,$).pop():w(this,F)===w(this,m)?fe(this,W,w3).call(this,!1):w(this,F),w(this,C)[Te]=x,w(this,M)[Te]=O,w(this,R).set(x,Te),w(this,U)[w(this,K)]=Te,w(this,B)[Te]=w(this,K),be(this,K,Te),vn(this,F)._++,w(this,_e).call(this,Te,oe,ie),ie&&(ie.set="add"),Re=!1,w(this,Me)&&((We=w(this,A))==null||We.call(this,O,x,"add"));else{fe(this,W,gE).call(this,Te);let ne=w(this,M)[Te];if(O!==ne){if(w(this,Oe)&&fe(this,W,Jr).call(this,ne)){ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=ne;xe!==void 0&&!Q&&(w(this,Ie)&&((Qe=w(this,v))==null||Qe.call(this,xe,x,"set")),w(this,ye)&&((Xe=w(this,se))==null||Xe.push([xe,x,"set"])))}else Q||(w(this,Ie)&&((Pe=w(this,v))==null||Pe.call(this,ne,x,"set")),w(this,ye)&&((He=w(this,se))==null||He.push([ne,x,"set"])));if(w(this,re).call(this,Te),w(this,_e).call(this,Te,oe,ie),w(this,M)[Te]=O,ie){ie.set="replace";let xe=ne&&fe(this,W,Jr).call(this,ne)?ne.__staleWhileFetching:ne;xe!==void 0&&(ie.oldValue=xe)}}else ie&&(ie.set="update");w(this,Me)&&((Ee=this.onInsert)==null||Ee.call(this,O,x,O===ne?"update":"replace"))}if(H!==0&&!w(this,Ce)&&fe(this,W,mG).call(this),w(this,Ce)&&(Re||w(this,Z).call(this,Te,H,Y),ie&&w(this,me).call(this,ie,Te)),!Q&&w(this,ye)&&w(this,se)){let ne=w(this,se),xe;for(;xe=ne==null?void 0:ne.shift();)(ce=w(this,T))==null||ce.call(this,...xe)}return this}pop(){var x;try{for(;w(this,F);){let O=w(this,M)[w(this,G)];if(fe(this,W,w3).call(this,!0),fe(this,W,Jr).call(this,O)){if(O.__staleWhileFetching)return O.__staleWhileFetching}else if(O!==void 0)return O}}finally{if(w(this,ye)&&w(this,se)){let O=w(this,se),D;for(;D=O==null?void 0:O.shift();)(x=w(this,T))==null||x.call(this,...D)}}}has(x,O={}){let{updateAgeOnHas:D=this.updateAgeOnHas,status:H}=O,Y=w(this,R).get(x);if(Y!==void 0){let Q=w(this,M)[Y];if(fe(this,W,Jr).call(this,Q)&&Q.__staleWhileFetching===void 0)return!1;if(w(this,q).call(this,Y))H&&(H.has="stale",w(this,me).call(this,H,Y));else return D&&w(this,le).call(this,Y),H&&(H.has="hit",w(this,me).call(this,H,Y)),!0}else H&&(H.has="miss");return!1}peek(x,O={}){let{allowStale:D=this.allowStale}=O,H=w(this,R).get(x);if(H===void 0||!D&&w(this,q).call(this,H))return;let Y=w(this,M)[H];return fe(this,W,Jr).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:Q=this.ttl,noDisposeOnSet:ee=this.noDisposeOnSet,size:ie=0,sizeCalculation:Re=this.sizeCalculation,noUpdateTTL:oe=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:We=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:Pe,forceRefresh:He=!1,status:Ee,signal:ce}=O;if(!w(this,Oe))return Ee&&(Ee.fetch="get"),this.get(x,{allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,status:Ee});let ne={allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,ttl:Q,noDisposeOnSet:ee,size:ie,sizeCalculation:Re,noUpdateTTL:oe,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:We,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ee,signal:ce},xe=w(this,R).get(x);if(xe===void 0){Ee&&(Ee.fetch="miss");let Be=fe(this,W,S3).call(this,x,xe,ne,Pe);return Be.__returned=Be}else{let Be=w(this,M)[xe];if(fe(this,W,Jr).call(this,Be)){let _t=D&&Be.__staleWhileFetching!==void 0;return Ee&&(Ee.fetch="inflight",_t&&(Ee.returnedStale=!0)),_t?Be.__staleWhileFetching:Be.__returned=Be}let ht=w(this,q).call(this,xe);if(!He&&!ht)return Ee&&(Ee.fetch="hit"),fe(this,W,gE).call(this,xe),H&&w(this,le).call(this,xe),Ee&&w(this,me).call(this,Ee,xe),Be;let Et=fe(this,W,S3).call(this,x,xe,ne,Pe),rt=Et.__staleWhileFetching!==void 0&&D;return Ee&&(Ee.fetch=ht?"stale":"refresh",rt&&ht&&(Ee.returnedStale=!0)),rt?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(x,O={}){let D=await this.fetch(x,O);if(D===void 0)throw new Error("fetch() returned undefined");return D}memo(x,O={}){let D=w(this,P);if(!D)throw new Error("no memoMethod provided to constructor");let{context:H,forceRefresh:Y,...Q}=O,ee=this.get(x,Q);if(!Y&&ee!==void 0)return ee;let ie=D(x,ee,{options:Q,context:H});return this.set(x,ie,Q),ie}get(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:Q}=O,ee=w(this,R).get(x);if(ee!==void 0){let ie=w(this,M)[ee],Re=fe(this,W,Jr).call(this,ie);return Q&&w(this,me).call(this,Q,ee),w(this,q).call(this,ee)?(Q&&(Q.get="stale"),Re?(Q&&D&&ie.__staleWhileFetching!==void 0&&(Q.returnedStale=!0),D?ie.__staleWhileFetching:void 0):(Y||fe(this,W,xc).call(this,x,"expire"),Q&&D&&(Q.returnedStale=!0),D?ie:void 0)):(Q&&(Q.get="hit"),Re?ie.__staleWhileFetching:(fe(this,W,gE).call(this,ee),H&&w(this,le).call(this,ee),ie))}else Q&&(Q.get="miss")}delete(x){return fe(this,W,xc).call(this,x,"delete")}clear(){return fe(this,W,bG).call(this,"delete")}},m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,j=new WeakMap,F=new WeakMap,N=new WeakMap,R=new WeakMap,C=new WeakMap,M=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,K=new WeakMap,$=new WeakMap,se=new WeakMap,pe=new WeakMap,we=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Me=new WeakMap,W=new WeakSet,mG=function(){let x=new u(w(this,m)),O=new u(w(this,m));be(this,Ce,x),be(this,we,O);let D=this.ttlAutopurge?new Array(w(this,m)):void 0;be(this,Le,D),be(this,Z,(Q,ee,ie=w(this,j).now())=>{if(O[Q]=ee!==0?ie:0,x[Q]=ee,D!=null&&D[Q]&&(clearTimeout(D[Q]),D[Q]=void 0),ee!==0&&D){let Re=setTimeout(()=>{w(this,q).call(this,Q)&&fe(this,W,xc).call(this,w(this,C)[Q],"expire")},ee+1);Re.unref&&Re.unref(),D[Q]=Re}}),be(this,le,Q=>{O[Q]=x[Q]!==0?w(this,j).now():0}),be(this,me,(Q,ee)=>{if(x[ee]){let ie=x[ee],Re=O[ee];if(!ie||!Re)return;Q.ttl=ie,Q.start=Re,Q.now=H||Y();let oe=Q.now-Re;Q.remainingTTL=ie-oe}});let H=0,Y=()=>{let Q=w(this,j).now();if(this.ttlResolution>0){H=Q;let ee=setTimeout(()=>H=0,this.ttlResolution);ee.unref&&ee.unref()}return Q};this.getRemainingTTL=Q=>{let ee=w(this,R).get(Q);if(ee===void 0)return 0;let ie=x[ee],Re=O[ee];if(!ie||!Re)return 1/0;let oe=(H||Y())-Re;return ie-oe},be(this,q,Q=>{let ee=O[Q],ie=x[Q];return!!ie&&!!ee&&(H||Y())-ee>ie})},le=new WeakMap,me=new WeakMap,Z=new WeakMap,q=new WeakMap,nOe=function(){let x=new u(w(this,m));be(this,N,0),be(this,pe,x),be(this,re,O=>{be(this,N,w(this,N)-x[O]),x[O]=0}),be(this,he,(O,D,H,Y)=>{if(fe(this,W,Jr).call(this,D))return 0;if(!o(H))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(H=Y(D,O),!o(H))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return H}),be(this,_e,(O,D,H)=>{if(x[O]=D,w(this,y)){let Y=w(this,y)-x[O];for(;w(this,N)>Y;)fe(this,W,w3).call(this,!0)}be(this,N,w(this,N)+x[O]),H&&(H.entrySize=D,H.totalCalculatedSize=w(this,N))})},re=new WeakMap,_e=new WeakMap,he=new WeakMap,wc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,K);!(!fe(this,W,gG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,G)));)O=w(this,B)[O]},Sc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,G);!(!fe(this,W,gG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,K)));)O=w(this,U)[O]},gG=function(x){return x!==void 0&&w(this,R).get(w(this,C)[x])===x},w3=function(x){var Y,Q,ee;let O=w(this,G),D=w(this,C)[O],H=w(this,M)[O];return w(this,Oe)&&fe(this,W,Jr).call(this,H)?H.__abortController.abort(new Error("evicted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Y=w(this,v))==null||Y.call(this,H,D,"evict")),w(this,ye)&&((Q=w(this,se))==null||Q.push([H,D,"evict"]))),w(this,re).call(this,O),(ee=w(this,Le))!=null&&ee[O]&&(clearTimeout(w(this,Le)[O]),w(this,Le)[O]=void 0),x&&(w(this,C)[O]=void 0,w(this,M)[O]=void 0,w(this,$).push(O)),w(this,F)===1?(be(this,G,be(this,K,0)),w(this,$).length=0):be(this,G,w(this,U)[O]),w(this,R).delete(D),vn(this,F)._--,O},S3=function(x,O,D,H){let Y=O===void 0?void 0:w(this,M)[O];if(fe(this,W,Jr).call(this,Y))return Y;let Q=new i,{signal:ee}=D;ee==null||ee.addEventListener("abort",()=>Q.abort(ee.reason),{signal:Q.signal});let ie={signal:Q.signal,options:D,context:H},Re=(Pe,He=!1)=>{let{aborted:Ee}=Q.signal,ce=D.ignoreFetchAbort&&Pe!==void 0,ne=D.ignoreFetchAbort||!!(D.allowStaleOnFetchAbort&&Pe!==void 0);if(D.status&&(Ee&&!He?(D.status.fetchAborted=!0,D.status.fetchError=Q.signal.reason,ce&&(D.status.fetchAbortIgnored=!0)):D.status.fetchResolved=!0),Ee&&!ce&&!He)return Te(Q.signal.reason,ne);let xe=Qe,Be=w(this,M)[O];return(Be===Qe||ce&&He&&Be===void 0)&&(Pe===void 0?xe.__staleWhileFetching!==void 0?w(this,M)[O]=xe.__staleWhileFetching:fe(this,W,xc).call(this,x,"fetch"):(D.status&&(D.status.fetchUpdated=!0),this.set(x,Pe,ie.options))),Pe},oe=Pe=>(D.status&&(D.status.fetchRejected=!0,D.status.fetchError=Pe),Te(Pe,!1)),Te=(Pe,He)=>{let{aborted:Ee}=Q.signal,ce=Ee&&D.allowStaleOnFetchAbort,ne=ce||D.allowStaleOnFetchRejection,xe=ne||D.noDeleteOnFetchRejection,Be=Qe;if(w(this,M)[O]===Qe&&(!xe||!He&&Be.__staleWhileFetching===void 0?fe(this,W,xc).call(this,x,"fetch"):ce||(w(this,M)[O]=Be.__staleWhileFetching)),ne)return D.status&&Be.__staleWhileFetching!==void 0&&(D.status.returnedStale=!0),Be.__staleWhileFetching;if(Be.__returned===Be)throw Pe},We=(Pe,He)=>{var ce;let Ee=(ce=w(this,S))==null?void 0:ce.call(this,x,Y,ie);Ee&&Ee instanceof Promise&&Ee.then(ne=>Pe(ne===void 0?void 0:ne),He),Q.signal.addEventListener("abort",()=>{(!D.ignoreFetchAbort||D.allowStaleOnFetchAbort)&&(Pe(void 0),D.allowStaleOnFetchAbort&&(Pe=ne=>Re(ne,!0)))})};D.status&&(D.status.fetchDispatched=!0);let Qe=new Promise(We).then(Re,oe),Xe=Object.assign(Qe,{__abortController:Q,__staleWhileFetching:Y,__returned:void 0});return O===void 0?(this.set(x,Xe,{...ie.options,status:void 0}),O=w(this,R).get(x)):w(this,M)[O]=Xe,Xe},Jr=function(x){if(!w(this,Oe))return!1;let O=x;return!!O&&O instanceof Promise&&O.hasOwnProperty("__staleWhileFetching")&&O.__abortController instanceof i},yG=function(x,O){w(this,B)[O]=x,w(this,U)[x]=O},gE=function(x){x!==w(this,K)&&(x===w(this,G)?be(this,G,w(this,U)[x]):fe(this,W,yG).call(this,w(this,B)[x],w(this,U)[x]),fe(this,W,yG).call(this,w(this,K),x),be(this,K,x))},xc=function(x,O){var H,Y,Q,ee,ie,Re;let D=!1;if(w(this,F)!==0){let oe=w(this,R).get(x);if(oe!==void 0)if((H=w(this,Le))!=null&&H[oe]&&(clearTimeout((Y=w(this,Le))==null?void 0:Y[oe]),w(this,Le)[oe]=void 0),D=!0,w(this,F)===1)fe(this,W,bG).call(this,O);else{w(this,re).call(this,oe);let Te=w(this,M)[oe];if(fe(this,W,Jr).call(this,Te)?Te.__abortController.abort(new Error("deleted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Q=w(this,v))==null||Q.call(this,Te,x,O)),w(this,ye)&&((ee=w(this,se))==null||ee.push([Te,x,O]))),w(this,R).delete(x),w(this,C)[oe]=void 0,w(this,M)[oe]=void 0,oe===w(this,K))be(this,K,w(this,B)[oe]);else if(oe===w(this,G))be(this,G,w(this,U)[oe]);else{let We=w(this,B)[oe];w(this,U)[We]=w(this,U)[oe];let Qe=w(this,U)[oe];w(this,B)[Qe]=w(this,B)[oe]}vn(this,F)._--,w(this,$).push(oe)}}if(w(this,ye)&&((ie=w(this,se))!=null&&ie.length)){let oe=w(this,se),Te;for(;Te=oe==null?void 0:oe.shift();)(Re=w(this,T))==null||Re.call(this,...Te)}return D},bG=function(x){var O,D,H,Y;for(let Q of fe(this,W,Sc).call(this,{allowStale:!0})){let ee=w(this,M)[Q];if(fe(this,W,Jr).call(this,ee))ee.__abortController.abort(new Error("deleted"));else{let ie=w(this,C)[Q];w(this,Ie)&&((O=w(this,v))==null||O.call(this,ee,ie,x)),w(this,ye)&&((D=w(this,se))==null||D.push([ee,ie,x]))}}if(w(this,R).clear(),w(this,M).fill(void 0),w(this,C).fill(void 0),w(this,Ce)&&w(this,we)){w(this,Ce).fill(0),w(this,we).fill(0);for(let Q of w(this,Le)??[])Q!==void 0&&clearTimeout(Q);(H=w(this,Le))==null||H.fill(void 0)}if(w(this,pe)&&w(this,pe).fill(0),be(this,G,0),be(this,K,0),w(this,$).length=0,be(this,N,0),be(this,F,0),w(this,ye)&&w(this,se)){let Q=w(this,se),ee;for(;ee=Q==null?void 0:Q.shift();)(Y=w(this,T))==null||Y.call(this,...ee)}},z);return dm.LRUCache=d,dm}var jre;function qrt(){if(jre)return kR;jre=1,Object.defineProperty(kR,"__esModule",{value:!0}),kR.prepareEvaluatorActionContext=n;const t=dt,e=Brt(),r=MI();function n(i){let a=i;if(a.has(t.KeysInitQuery.extensionFunctionCreator)&&a.has(t.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(a.has(t.KeysInitQuery.extensionFunctionCreator))a=a.set(t.KeysExpressionEvaluator.extensionFunctionCreator,a.get(t.KeysInitQuery.extensionFunctionCreator));else if(a.has(t.KeysInitQuery.extensionFunctions)){const s=a.getSafe(t.KeysInitQuery.extensionFunctions);a=a.set(t.KeysExpressionEvaluator.extensionFunctionCreator,async o=>s[o.value])}else a=a.setDefault(t.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return a=a.setDefault(t.KeysExpressionEvaluator.defaultTimeZone,(0,r.extractTimeZone)(a.getSafe(t.KeysInitQuery.queryTimestamp))),a=a.setDefault(t.KeysExpressionEvaluator.superTypeProvider,{cache:new e.LRUCache({max:1e3}),discoverer:()=>"term"}),a}return kR}var Bre;function Ye(){return Bre||(Bre=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LangStringLiteral=t.TimeLiteral=t.DurationLiteral=t.DateLiteral=t.DayTimeDurationLiteral=t.DateTimeLiteral=t.yearMonthDurationsToMonths=t.toUTCDate=t.toDateTimeRepresentation=t.negateDuration=t.extractRawTimeZone=t.defaultedYearMonthDurationRepresentation=t.defaultedDurationRepresentation=t.defaultedDayTimeDurationRepresentation=t.defaultedDateTimeRepresentation=t.dayTimeDurationsToSeconds=t.isSubTypeOf=t.SparqlOperator=t.TypeAlias=t.TypeURL=t.typedLiteral=t.InvalidArity=t.InvalidLexicalForm=t.ExtensionFunctionError=t.CastError=t.UnboundVariableError=t.NoAggregator=t.InError=t.CoalesceError=t.InvalidArgumentTypes=t.InvalidTimezoneCall=t.IncompatibleLanguageOperation=t.RDFEqualTypeError=t.EmptyAggregateError=t.isExpressionError=t.ExpressionError=t.Builder=t.expressionToVar=t.float=t.decimal=t.langString=t.dateTime=t.integer=t.double=t.string=t.bool=t.declare=t.prepareEvaluatorActionContext=t.OverloadTree=t.TermTransformer=void 0,t.trimToDayTimeDuration=t.trimToYearMonthDuration=t.parseDate=t.parseXSDFloat=t.parseXSDDecimal=t.parseYearMonthDuration=t.parseTime=t.parseDuration=t.parseDayTimeDuration=t.parseDateTime=t.elapsedDuration=t.addDurationToDateTime=t.isNonLexicalLiteral=t.StringLiteral=t.NonLexicalLiteral=t.FloatLiteral=t.IntegerLiteral=t.Literal=t.Existence=t.Aggregate=t.DoubleLiteral=t.DefaultGraph=t.DecimalLiteral=t.BlankNode=t.BooleanLiteral=t.NumericLiteral=t.Variable=t.NamedNode=t.Operator=t.Quad=t.YearMonthDurationLiteral=t.Term=void 0;var e=jrt();Object.defineProperty(t,"TermTransformer",{enumerable:!0,get:function(){return e.TermTransformer}});var r=rOe();Object.defineProperty(t,"OverloadTree",{enumerable:!0,get:function(){return r.OverloadTree}});var n=qrt();Object.defineProperty(t,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return n.prepareEvaluatorActionContext}});var i=Yu();Object.defineProperty(t,"declare",{enumerable:!0,get:function(){return i.declare}}),Object.defineProperty(t,"bool",{enumerable:!0,get:function(){return i.bool}}),Object.defineProperty(t,"string",{enumerable:!0,get:function(){return i.string}}),Object.defineProperty(t,"double",{enumerable:!0,get:function(){return i.double}}),Object.defineProperty(t,"integer",{enumerable:!0,get:function(){return i.integer}}),Object.defineProperty(t,"dateTime",{enumerable:!0,get:function(){return i.dateTime}}),Object.defineProperty(t,"langString",{enumerable:!0,get:function(){return i.langString}}),Object.defineProperty(t,"decimal",{enumerable:!0,get:function(){return i.decimal}}),Object.defineProperty(t,"float",{enumerable:!0,get:function(){return i.float}}),Object.defineProperty(t,"expressionToVar",{enumerable:!0,get:function(){return i.expressionToVar}}),Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return i.Builder}});var a=Rl();Object.defineProperty(t,"ExpressionError",{enumerable:!0,get:function(){return a.ExpressionError}}),Object.defineProperty(t,"isExpressionError",{enumerable:!0,get:function(){return a.isExpressionError}}),Object.defineProperty(t,"EmptyAggregateError",{enumerable:!0,get:function(){return a.EmptyAggregateError}}),Object.defineProperty(t,"RDFEqualTypeError",{enumerable:!0,get:function(){return a.RDFEqualTypeError}}),Object.defineProperty(t,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return a.IncompatibleLanguageOperation}}),Object.defineProperty(t,"InvalidTimezoneCall",{enumerable:!0,get:function(){return a.InvalidTimezoneCall}}),Object.defineProperty(t,"InvalidArgumentTypes",{enumerable:!0,get:function(){return a.InvalidArgumentTypes}}),Object.defineProperty(t,"CoalesceError",{enumerable:!0,get:function(){return a.CoalesceError}}),Object.defineProperty(t,"InError",{enumerable:!0,get:function(){return a.InError}}),Object.defineProperty(t,"NoAggregator",{enumerable:!0,get:function(){return a.NoAggregator}}),Object.defineProperty(t,"UnboundVariableError",{enumerable:!0,get:function(){return a.UnboundVariableError}}),Object.defineProperty(t,"CastError",{enumerable:!0,get:function(){return a.CastError}}),Object.defineProperty(t,"ExtensionFunctionError",{enumerable:!0,get:function(){return a.ExtensionFunctionError}}),Object.defineProperty(t,"InvalidLexicalForm",{enumerable:!0,get:function(){return a.InvalidLexicalForm}}),Object.defineProperty(t,"InvalidArity",{enumerable:!0,get:function(){return a.InvalidArity}});var s=bf();Object.defineProperty(t,"typedLiteral",{enumerable:!0,get:function(){return s.typedLiteral}}),Object.defineProperty(t,"TypeURL",{enumerable:!0,get:function(){return s.TypeURL}}),Object.defineProperty(t,"TypeAlias",{enumerable:!0,get:function(){return s.TypeAlias}}),Object.defineProperty(t,"SparqlOperator",{enumerable:!0,get:function(){return s.SparqlOperator}});var o=Oz();Object.defineProperty(t,"isSubTypeOf",{enumerable:!0,get:function(){return o.isSubTypeOf}});var c=MI();Object.defineProperty(t,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return c.dayTimeDurationsToSeconds}}),Object.defineProperty(t,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return c.defaultedDateTimeRepresentation}}),Object.defineProperty(t,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(t,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDurationRepresentation}}),Object.defineProperty(t,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(t,"extractRawTimeZone",{enumerable:!0,get:function(){return c.extractRawTimeZone}}),Object.defineProperty(t,"negateDuration",{enumerable:!0,get:function(){return c.negateDuration}}),Object.defineProperty(t,"toDateTimeRepresentation",{enumerable:!0,get:function(){return c.toDateTimeRepresentation}}),Object.defineProperty(t,"toUTCDate",{enumerable:!0,get:function(){return c.toUTCDate}}),Object.defineProperty(t,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return c.yearMonthDurationsToMonths}});var u=Qu();Object.defineProperty(t,"DateTimeLiteral",{enumerable:!0,get:function(){return u.DateTimeLiteral}}),Object.defineProperty(t,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return u.DayTimeDurationLiteral}}),Object.defineProperty(t,"DateLiteral",{enumerable:!0,get:function(){return u.DateLiteral}}),Object.defineProperty(t,"DurationLiteral",{enumerable:!0,get:function(){return u.DurationLiteral}}),Object.defineProperty(t,"TimeLiteral",{enumerable:!0,get:function(){return u.TimeLiteral}}),Object.defineProperty(t,"LangStringLiteral",{enumerable:!0,get:function(){return u.LangStringLiteral}}),Object.defineProperty(t,"Term",{enumerable:!0,get:function(){return u.Term}}),Object.defineProperty(t,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return u.YearMonthDurationLiteral}}),Object.defineProperty(t,"Quad",{enumerable:!0,get:function(){return u.Quad}}),Object.defineProperty(t,"Operator",{enumerable:!0,get:function(){return u.Operator}}),Object.defineProperty(t,"NamedNode",{enumerable:!0,get:function(){return u.NamedNode}}),Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return u.Variable}}),Object.defineProperty(t,"NumericLiteral",{enumerable:!0,get:function(){return u.NumericLiteral}}),Object.defineProperty(t,"BooleanLiteral",{enumerable:!0,get:function(){return u.BooleanLiteral}}),Object.defineProperty(t,"BlankNode",{enumerable:!0,get:function(){return u.BlankNode}}),Object.defineProperty(t,"DecimalLiteral",{enumerable:!0,get:function(){return u.DecimalLiteral}}),Object.defineProperty(t,"DefaultGraph",{enumerable:!0,get:function(){return u.DefaultGraph}}),Object.defineProperty(t,"DoubleLiteral",{enumerable:!0,get:function(){return u.DoubleLiteral}}),Object.defineProperty(t,"Aggregate",{enumerable:!0,get:function(){return u.Aggregate}}),Object.defineProperty(t,"Existence",{enumerable:!0,get:function(){return u.Existence}}),Object.defineProperty(t,"Literal",{enumerable:!0,get:function(){return u.Literal}}),Object.defineProperty(t,"IntegerLiteral",{enumerable:!0,get:function(){return u.IntegerLiteral}}),Object.defineProperty(t,"FloatLiteral",{enumerable:!0,get:function(){return u.FloatLiteral}}),Object.defineProperty(t,"NonLexicalLiteral",{enumerable:!0,get:function(){return u.NonLexicalLiteral}}),Object.defineProperty(t,"StringLiteral",{enumerable:!0,get:function(){return u.StringLiteral}}),Object.defineProperty(t,"isNonLexicalLiteral",{enumerable:!0,get:function(){return u.isNonLexicalLiteral}});var l=tOe();Object.defineProperty(t,"addDurationToDateTime",{enumerable:!0,get:function(){return l.addDurationToDateTime}}),Object.defineProperty(t,"elapsedDuration",{enumerable:!0,get:function(){return l.elapsedDuration}});var d=pG();Object.defineProperty(t,"parseDateTime",{enumerable:!0,get:function(){return d.parseDateTime}}),Object.defineProperty(t,"parseDayTimeDuration",{enumerable:!0,get:function(){return d.parseDayTimeDuration}}),Object.defineProperty(t,"parseDuration",{enumerable:!0,get:function(){return d.parseDuration}}),Object.defineProperty(t,"parseTime",{enumerable:!0,get:function(){return d.parseTime}}),Object.defineProperty(t,"parseYearMonthDuration",{enumerable:!0,get:function(){return d.parseYearMonthDuration}}),Object.defineProperty(t,"parseXSDDecimal",{enumerable:!0,get:function(){return d.parseXSDDecimal}}),Object.defineProperty(t,"parseXSDFloat",{enumerable:!0,get:function(){return d.parseXSDFloat}}),Object.defineProperty(t,"parseDate",{enumerable:!0,get:function(){return d.parseDate}});var f=MI();Object.defineProperty(t,"trimToYearMonthDuration",{enumerable:!0,get:function(){return f.trimToYearMonthDuration}}),Object.defineProperty(t,"trimToDayTimeDuration",{enumerable:!0,get:function(){return f.trimToDayTimeDuration}})}(CL)),CL}var qre;function iOe(){if(qre)return sd;qre=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.TermFunctionBase=sd.ExpressionFunctionBase=void 0;const t=dt,e=Ye();class r{constructor({arity:a,operator:s,apply:o}){k(this,"arity");k(this,"operator");k(this,"apply");this.arity=a,this.operator=s,this.apply=o}checkArity(a){return Array.isArray(this.arity)?this.arity.includes(a.length):this.arity===Number.POSITIVE_INFINITY?!0:a.length===this.arity}}sd.ExpressionFunctionBase=r;class n extends r{constructor({arity:s,operator:o,overloads:c}){super({arity:s,operator:o,apply:async({args:u,exprEval:l,mapping:d})=>this.applyOnTerms(await Promise.all(u.map(f=>l.evaluatorExpressionEvaluation(f,d))),l)});k(this,"supportsTermExpressions",!0);k(this,"overloads");this.overloads=c}applyOnTerms(s,o){return(this.overloads.search(s,o.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),o.context.getSafe(t.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(s))(o)(s)}handleInvalidTypes(s){throw new e.InvalidArgumentTypes(s,this.operator)}}return sd.TermFunctionBase=n,sd}var Ure;function et(){return Ure||(Ure=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vIe(),t),r(qtt(),t),r(Utt(),t),r(iOe(),t)}(DL)),DL}var Qj={},fm={},Vre;function aOe(){if(Vre)return fm;Vre=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.ActorQueryOperation=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return fm.ActorQueryOperation=e,fm}var hm={},Wj={},pm={},Gre;function Urt(){if(Gre)return pm;Gre=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.MetadataValidationState=void 0;let t=class{constructor(){k(this,"invalidateListeners",[]);k(this,"valid",!0)}addInvalidateListener(r){this.invalidateListeners.push(r)}invalidate(){if(this.valid){this.valid=!1;for(const r of this.invalidateListeners)r()}}};return pm.MetadataValidationState=t,pm}var gc={},Hre;function Vrt(){if(Hre)return gc;Hre=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.getMetadataQuads=t,gc.getMetadataBindings=e,gc.validateMetadataQuads=r,gc.validateMetadataBindings=n,gc.cachifyMetadata=i;function t(a){return i(()=>new Promise((s,o)=>{a.getProperty("metadata",c=>s(c)),a.on("error",o)}).then(s=>r(s)))}function e(a){return i(()=>new Promise((s,o)=>{a.getProperty("metadata",c=>s(c)),a.on("error",o)}).then(s=>n(s)))}function r(a){for(const s of["cardinality"])if(!(s in a))throw new Error(`Invalid metadata: missing ${s} in ${JSON.stringify(a)}`);return a}function n(a){for(const s of["cardinality","variables"])if(!(s in a))throw new Error(`Invalid metadata: missing ${s} in ${JSON.stringify(a)}`);return a}function i(a){let s;return()=>(s||(s=a(),s.then(o=>o.state.addInvalidateListener(()=>{s=void 0})).catch(()=>{})),s)}return gc}var kre;function Mi(){return kre||(kre=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Urt(),t),r(Vrt(),t)}(Wj)),Wj}var zre;function sOe(){if(zre)return hm;zre=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.ActorQueryOperationTyped=void 0;const t=dt,e=ke(),r=Mi(),n=aOe();let i=class extends n.ActorQueryOperation{constructor(o,c){super(o);k(this,"operationName");if(this.operationName=c,!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(o){if(!o.operation)return(0,e.failTest)("Missing field 'operation' in a query operation action.");if(o.operation.type!==this.operationName)return(0,e.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${o.operation.type}`);const c=o.operation;return this.testOperation(c,o.context)}async run(o,c){const u=o.context.get(t.KeysInitQuery.physicalQueryPlanLogger);u&&(u.logOperation(o.operation.type,void 0,o.operation,o.context.get(t.KeysInitQuery.physicalQueryPlanNode),this.name,{}),o.context=o.context.set(t.KeysInitQuery.physicalQueryPlanNode,o.operation));const l=o.operation,d=o.context.set(t.KeysQueryOperation.operation,l),f=await this.runOperation(l,d,c);return"metadata"in f&&(f.metadata=(0,r.cachifyMetadata)(f.metadata)),f}};return hm.ActorQueryOperationTyped=i,hm}var _m={},Qre;function Grt(){if(Qre)return _m;Qre=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.ActorQueryOperationTypedMediated=void 0;const t=sOe();let e=class extends t.ActorQueryOperationTyped{constructor(i,a){super(i,a);k(this,"mediatorQueryOperation");this.mediatorQueryOperation=i.mediatorQueryOperation}};return _m.ActorQueryOperationTypedMediated=e,_m}var mm={},Wre;function Hrt(){if(Wre)return mm;Wre=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.BusQueryOperation=void 0;const t=ke();let e=class extends t.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return mm.BusQueryOperation=e,mm}var Kre;function qr(){return Kre||(Kre=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(aOe(),t),r(sOe(),t),r(Grt(),t),r(Hrt(),t)}(Qj)),Qj}var Kj={},gm={},Xj={},ym={},Xre;function krt(){if(Xre)return ym;Xre=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.ActorContextPreprocess=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return ym.ActorContextPreprocess=e,ym}var Jre;function Rz(){return Jre||(Jre=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(krt(),t)}(Xj)),Xj}var Yre;function zrt(){if(Yre)return gm;Yre=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.ActorContextPreprocessConvertShortcuts=void 0;const t=Rz(),e=ke();let r=class oOe extends t.ActorContextPreprocess{constructor(a){super(a);k(this,"contextKeyShortcuts");this.contextKeyShortcuts=a.contextKeyShortcuts}async test(a){return(0,e.passTestVoid)()}async run(a){return{context:oOe.expandShortcuts(a.context,this.contextKeyShortcuts)}}static expandShortcuts(a,s){for(const o of a.keys())s[o.name]&&(a=a.set(new e.ActionContextKey(s[o.name]),a.get(o)).delete(o));return a}};return gm.ActorContextPreprocessConvertShortcuts=r,gm}var $re;function Qrt(){return $re||($re=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(zrt(),t)}(Kj)),Kj}var Jj={},bm={},Zre;function Wrt(){if(Zre)return bm;Zre=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.ActorContextPreprocessSetDefaults=void 0;const t=Rz(),e=dt,r=ke(),n=jr();let i=class extends t.ActorContextPreprocess{constructor(o){super(o);k(this,"defaultFunctionArgumentsCache");k(this,"logger");this.defaultFunctionArgumentsCache={},this.logger=o.logger}async test(o){return(0,r.passTestVoid)()}async run(o){let c=o.context;if(o.initialize){c=c.setDefault(e.KeysInitQuery.queryTimestamp,new Date).setDefault(e.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(e.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(e.KeysCore.log,this.logger).setDefault(e.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(e.KeysInitQuery.dataFactory,new n.DataFactory);let u={language:"sparql",version:"1.1"};c.has(e.KeysInitQuery.queryFormat)?(u=c.get(e.KeysInitQuery.queryFormat),u.language==="graphql"&&(c=c.setDefault(e.KeysInitQuery.graphqlSingularizeVariables,{}))):c=c.set(e.KeysInitQuery.queryFormat,u),!c.has(e.KeysInitQuery.extensionFunctionsAlwaysPushdown)&&!c.has(e.KeysInitQuery.extensionFunctions)&&(c=c.set(e.KeysInitQuery.extensionFunctionsAlwaysPushdown,!0))}return{context:c}}};return bm.ActorContextPreprocessSetDefaults=i,bm}var ene;function Krt(){return ene||(ene=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wrt(),t)}(Jj)),Jj}var Yj={},vm={},tne;function Xrt(){if(tne)return vm;tne=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.ActorContextPreprocessSourceToDestination=void 0;const t=Rz(),e=dt,r=ke();let n=class extends t.ActorContextPreprocess{constructor(a){super(a)}async test(a){return(0,r.passTestVoid)()}async run(a){if(a.context.get(e.KeysInitQuery.querySourcesUnidentified)&&!a.context.get(e.KeysRdfUpdateQuads.destination)){const s=a.context.get(e.KeysInitQuery.querySourcesUnidentified);if(s.length===1)return{context:a.context.set(e.KeysRdfUpdateQuads.destination,s[0])}}return a}};return vm.ActorContextPreprocessSourceToDestination=n,vm}var rne;function Jrt(){return rne||(rne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xrt(),t)}(Yj)),Yj}var $j={},Am={},nne;function Yrt(){if(nne)return Am;nne=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.MediatorCombinePipeline=void 0;const t=ke();let e=class extends t.Mediator{constructor(i){super(i);k(this,"filterFailures");k(this,"order");k(this,"field");this.filterFailures=i.filterFailures,this.order=i.order,this.field=i.field}async mediate(i){let a;try{a=this.publish(i)}catch{return i}if(this.filterFailures){const u=[];for(const l of a)(await l.reply).isPassed()&&u.push(l);a=u}const s=[];if(a=await Promise.all(a.map(async({actor:u,reply:l},d)=>{try{const f=await l,h=f.getOrThrow();return s[d]=f.getSideData(),{actor:u,reply:h}}catch(f){throw new Error(this.constructFailureMessage(i,[f.message]))}})),this.order){const u=l=>{const d=this.field?l[this.field]:l;if(typeof d!="number")throw new TypeError("Cannot order elements that are not numbers.");return d};a=a.sort((l,d)=>(this.order==="increasing"?1:-1)*(u(l.reply)-u(d.reply)))}let o=i,c=0;for(const{actor:u}of a)o={...o,...await u.runObservable(o,s[c++])};return o}mediateWith(){throw new Error("Method not supported.")}};return Am.MediatorCombinePipeline=e,Am}var ine;function ane(){return ine||(ine=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Yrt(),t)}($j)),$j}var Zj={},Tm={},e6={},wm={},sne;function $rt(){if(sne)return wm;sne=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.ActorHashBindings=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return wm.ActorHashBindings=e,wm}var one;function Zrt(){return one||(one=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r($rt(),t)}(e6)),e6}var une;function ent(){if(une)return Tm;une=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.ActorHashBindingsMurmur=void 0;const t=Zrt(),e=ke(),r=Ez();let n=class extends t.ActorHashBindings{async test(a){return(0,e.passTestVoid)()}async run(a){return{hashFunction:(s,o)=>{var u;let c=r();for(const l of o)c=c.hash(((u=s.get(l))==null?void 0:u.value)??"UNDEF");return c.result()}}}};return Tm.ActorHashBindingsMurmur=n,Tm}var cne;function tnt(){return cne||(cne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ent(),t)}(Zj)),Zj}var t6={},Sm={},lne;function rnt(){if(lne)return Sm;lne=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.MediatorRace=void 0;const t=ke();let e=class extends t.Mediator{constructor(n){super(n)}mediateWith(n,i){return new Promise((a,s)=>{const o=[];for(const c of i)c.reply.then(u=>{u.isPassed()?a((0,t.passTestWithSideData)(c.actor,u.getSideData())):(o.push(u.getFailMessage()),o.length===i.length&&a((0,t.failTest)(this.constructFailureMessage(n,o))))}).catch(u=>{s(u)})})}};return Sm.MediatorRace=e,Sm}var dne;function Pn(){return dne||(dne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(rnt(),t)}(t6)),t6}var r6={},xm={},n6={},Em={},fne;function nnt(){if(fne)return Em;fne=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.ActorHashQuads=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return Em.ActorHashQuads=e,Em}var hne;function int(){return hne||(hne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(nnt(),t)}(n6)),n6}var pne;function ant(){if(pne)return xm;pne=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.ActorHashQuadsMurmur=void 0;const t=int(),e=ke(),r=Ez();let n=class extends t.ActorHashQuads{async test(a){return(0,e.passTestVoid)()}async run(a){return{hashFunction:s=>{const o=r(s.subject.value);return o.hash(s.predicate.value),o.hash(s.object.value),o.hash(s.graph.value),o.result()}}}};return xm.ActorHashQuadsMurmur=n,xm}var _ne;function snt(){return _ne||(_ne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ant(),t)}(r6)),r6}var i6={},Im={},a6={},Om={},mne;function ont(){if(mne)return Om;mne=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.ActorOptimizeQueryOperation=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return Om.ActorOptimizeQueryOperation=e,Om}var gne;function Yi(){return gne||(gne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ont(),t)}(a6)),a6}var yne;function unt(){if(yne)return Im;yne=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.ActorOptimizeQueryOperationRewriteCopy=void 0;const t=Yi(),e=dt,r=ke(),n=Ft();let i=class extends t.ActorOptimizeQueryOperation{constructor(s){super(s)}async test(s){return(0,r.passTestVoid)()}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=new n.AlgebraFactory(o);return{operation:n.algebraUtils.mapOperation(s.operation,{[n.Algebra.Types.COPY]:{preVisitor:()=>({continue:!1}),transform:l=>typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source)?c.createCompositeUpdate([]):c.createCompositeUpdate([c.createDrop(l.destination,!0),c.createAdd(l.source,l.destination,l.silent)])}}),context:s.context}}};return Im.ActorOptimizeQueryOperationRewriteCopy=i,Im}var bne;function cnt(){return bne||(bne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(unt(),t)}(i6)),i6}var s6={},Rm={},vne;function lnt(){if(vne)return Rm;vne=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.ActorOptimizeQueryOperationRewriteMove=void 0;const t=Yi(),e=dt,r=ke(),n=Ft();let i=class extends t.ActorOptimizeQueryOperation{constructor(s){super(s)}async test(s){return(0,r.passTestVoid)()}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=new n.AlgebraFactory(o);return{operation:n.algebraUtils.mapOperation(s.operation,{[n.Algebra.Types.MOVE]:{preVisitor:()=>({continue:!1}),transform:l=>{if(typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source))return c.createCompositeUpdate([]);const d=[c.createDrop(l.destination,!0),c.createAdd(l.source,l.destination,l.silent),c.createDrop(l.source)];return c.createCompositeUpdate(d)}}}),context:s.context}}};return Rm.ActorOptimizeQueryOperationRewriteMove=i,Rm}var Ane;function dnt(){return Ane||(Ane=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(lnt(),t)}(s6)),s6}var o6={},Pm={},Tne;function fnt(){if(Tne)return Pm;Tne=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.ActorOptimizeQueryOperationRewriteAdd=void 0;const t=Yi(),e=dt,r=ke(),n=Ft(),i=jr(),a=new i.DataFactory;let s=class extends t.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,r.passTestVoid)()}async run(c){const u=c.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.AlgebraFactory(u);return{operation:n.algebraUtils.mapOperation(c.operation,{[n.Algebra.Types.ADD]:{preVisitor:()=>({shortcut:!0}),transform:f=>{const h=f.destination==="DEFAULT"?a.defaultGraph():f.destination,p=f.source==="DEFAULT"?a.defaultGraph():f.source;return l.createDeleteInsert(void 0,[l.createPattern(a.variable("s"),a.variable("p"),a.variable("o"),h)],l.createPattern(a.variable("s"),a.variable("p"),a.variable("o"),p))}}}),context:c.context}}};return Pm.ActorOptimizeQueryOperationRewriteAdd=s,Pm}var wne;function hnt(){return wne||(wne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(fnt(),t)}(o6)),o6}var u6={},Nm={},c6={},fu={},Sne;function pnt(){if(Sne)return fu;Sne=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.estimateCardinality=i,fu.estimateMinusCardinality=a,fu.estimateSliceCardinality=s,fu.estimateUnionCardinality=o,fu.estimateJoinCardinality=c,fu.estimateNpsCardinality=u;const t=Ft(),e=jr(),r=new e.DataFactory,n=new t.AlgebraFactory(r);async function i(l,d){const f=await d.getCardinality(l);if(f)return f;switch(l.type){case t.Algebra.Types.ASK:return{type:"exact",value:1,dataset:d.uri};case t.Algebra.Types.LOAD:case t.Algebra.Types.DELETE_INSERT:case t.Algebra.Types.ADD:case t.Algebra.Types.COMPOSITE_UPDATE:case t.Algebra.Types.CLEAR:case t.Algebra.Types.NOP:case t.Algebra.Types.DROP:case t.Algebra.Types.CREATE:case t.Algebra.Types.MOVE:case t.Algebra.Types.COPY:return{type:"exact",value:0,dataset:d.uri};case t.Algebra.Types.PROJECT:case t.Algebra.Types.FILTER:case t.Algebra.Types.ORDER_BY:case t.Algebra.Types.GROUP:case t.Algebra.Types.CONSTRUCT:case t.Algebra.Types.DISTINCT:case t.Algebra.Types.REDUCED:case t.Algebra.Types.EXTEND:case t.Algebra.Types.FROM:case t.Algebra.Types.GRAPH:return i(l.input,d);case t.Algebra.Types.ZERO_OR_ONE_PATH:case t.Algebra.Types.ZERO_OR_MORE_PATH:case t.Algebra.Types.ONE_OR_MORE_PATH:case t.Algebra.Types.INV:return i(l.path,d);case t.Algebra.Types.PATH:return i(l.predicate,d);case t.Algebra.Types.NPS:return u(l,d);case t.Algebra.Types.LINK:return i(n.createPattern(r.variable("s"),l.iri,r.variable("o")),d);case t.Algebra.Types.UNION:case t.Algebra.Types.SEQ:case t.Algebra.Types.ALT:return o(l.input,d);case t.Algebra.Types.BGP:return c(l.patterns,d);case t.Algebra.Types.JOIN:case t.Algebra.Types.LEFT_JOIN:return c(l.input,d);case t.Algebra.Types.SLICE:return s(l,d);case t.Algebra.Types.MINUS:return a(l,d);case t.Algebra.Types.VALUES:return{type:"exact",value:l.bindings.length,dataset:d.uri};case t.Algebra.Types.SERVICE:case t.Algebra.Types.DESCRIBE:case t.Algebra.Types.EXPRESSION:case t.Algebra.Types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:d.uri}}return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:d.uri}}async function a(l,d){const f=await i(l.input[0],d),h=await i(l.input[1],d);return{type:"estimate",value:Math.max(f.value-h.value,0),dataset:d.uri}}async function s(l,d){const f=await i(l.input,d);return f.value>0&&(f.value=Math.max(f.value-l.start,0),l.length!==void 0&&(f.value=Math.min(f.value,l.length))),f}async function o(l,d){const f={type:"exact",value:0,dataset:d.uri};for(const h of l){const p=await i(h,d);p.type==="estimate"&&f.type==="exact"&&(f.type=p.type),f.value+=p.value}return f}async function c(l,d){const f=[];for(const p of l){const _=t.algebraUtils.inScopeVariables(p).map(m=>m.value),g=f.find(m=>_.some(y=>m.vars.has(y)));if(g){g.ops.push(p);for(const m of _)g.vars.add(m)}else f.push({ops:[p],vars:new Set(_)})}return{type:"estimate",value:(await Promise.all(f.map(async p=>Math.min(...await Promise.all(p.ops.map(async _=>(await i(_,d)).value)))))).reduce((p,_)=>p*_,1),dataset:d.uri}}async function u(l,d){const f=n.createSeq([...l.iris].reverse().map(g=>n.createLink(g))),h=await i(f,d),p=n.createPattern(r.variable("s"),r.variable("p"),r.variable("o")),_=await i(p,d);return{type:"estimate",value:Math.max(0,_.value-h.value),dataset:d.uri}}return fu}var zR={},xne;function _nt(){if(xne)return zR;xne=1,Object.defineProperty(zR,"__esModule",{value:!0}),zR.getExpressionVariables=r;const t=Ft(),e=Fi();function r(n){if((0,t.isKnownSubType)(n,t.Algebra.ExpressionTypes.EXISTENCE))return t.algebraUtils.inScopeVariables(n.input);if((0,t.isKnownSubType)(n,t.Algebra.ExpressionTypes.NAMED))return[];if((0,t.isKnownSubType)(n,t.Algebra.ExpressionTypes.OPERATOR))return(0,e.uniqTerms)(n.args.flatMap(i=>r(i)));if((0,t.isKnownSubType)(n,t.Algebra.ExpressionTypes.TERM))return n.term.termType==="Variable"?[n.term]:[];throw new Error(`Getting expression variables is not supported for ${n.subType}`)}return zR}var Fm={},Xn={},Ene;function uOe(){if(Ene)return Xn;Ene=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.getSafeBindings=r,Xn.getSafeQuads=n,Xn.getSafeBoolean=i,Xn.getSafeVoid=a,Xn.validateQueryOutput=s,Xn.testReadOnly=o,Xn.getOperationSource=c,Xn.assignOperationSource=u,Xn.removeOperationSource=l,Xn.isDataDestinationRawType=d,Xn.getDataDestinationType=f,Xn.getDataDestinationValue=h,Xn.getDataDestinationContext=p,Xn.getContextDestination=_,Xn.getContextDestinationUrl=g;const t=dt,e=ke();function r(m){return s(m,"bindings"),m}function n(m){return s(m,"quads"),m}function i(m){return s(m,"boolean"),m}function a(m){return s(m,"void"),m}function s(m,y){if(m.type!==y)throw new Error(`Invalid query output type: Expected '${y}' but got '${m.type}'`)}function o(m){return m.get(t.KeysQueryOperation.readOnly)?(0,e.failTest)("Attempted a write operation in read-only mode"):(0,e.passTestVoid)()}function c(m){var y;return(y=m.metadata)==null?void 0:y.scopedSource}function u(m,y){return m={...m},m.metadata=m.metadata?{...m.metadata}:{},m.metadata.scopedSource=y,m}function l(m){var y;(y=m.metadata)==null||delete y.scopedSource,m.metadata&&Object.keys(m.metadata).length===0&&delete m.metadata}function d(m){return typeof m=="string"||"remove"in m}function f(m){return typeof m=="string"?"":"remove"in m?"rdfjsStore":m.type}function h(m){return d(m)?m:m.value}function p(m,y){return typeof m=="string"||"remove"in m||!m.context?y:y.merge(m.context)}function _(m){return m.get(t.KeysRdfUpdateQuads.destination)}function g(m){if(m){let y=h(m);if(typeof y=="string"){const v=y.indexOf("#");return v>=0&&(y=y.slice(0,v)),y}}}return Xn}var Ine;function mnt(){if(Ine)return Fm;Ine=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.doesShapeAcceptOperation=n,Fm.passFullOperationToSource=u;const t=dt,e=Ft(),r=uOe();function n(l,d,f){return i(l,l,d,f)}function i(l,d,f,h){var _;if(d.type==="conjunction")return d.children.every(g=>i(l,g,f,h));if(d.type==="disjunction")return d.children.some(g=>i(l,g,f,h));if(d.type==="negation")return!i(d.child,d.child,f,h);if(d.type==="arity")return i(l,d.child,f,h);if(((h==null?void 0:h.joinBindings)&&!d.joinBindings)??((h==null?void 0:h.filterBindings)&&!d.filterBindings))return!1;const p=d.operation;switch(p.operationType){case"type":return p.type===e.Algebra.Types.EXPRESSION&&c(f)&&!("extensionFunctions"in p&&((_=p.extensionFunctions)!=null&&_.includes(f.name.value)))||!a(l,d.children,f,h)&&!s(l,f,h)?!1:p.type===f.type;case"pattern":return!a(l,d.children,f,h)&&!s(l,f,h)?!1:p.pattern.type===f.type;case"wildcard":{if(h!=null&&h.wildcardAcceptAllExtensionFunctions)return!0;if(c(f))return!1;let g=!1;return e.algebraUtils.visitOperation(f,{[e.Algebra.Types.EXPRESSION]:{visitor:m=>c(m)&&!n(l,m,h)?(g=!0,!1):!0}}),!g}}}function a(l,d,f,h){if(c(f)||c(f.expression))return!1;if(d){const p=f,_=p.input?Array.isArray(p.input)?p.input:[p.input]:p.patterns??[];for(const[g,m]of d.entries())if(!_[g]||!i(l,m,_[g],h))return!1;return!0}return!1}function s(l,d,f){const h=d;return h.input&&!(Array.isArray(h.input)?h.input:[h.input]).every(_=>i(l,l,_,f))||h.expression&&c(h.expression)&&!i(l,l,h.expression,f)?!1:!(h.patterns&&!h.patterns.every(p=>i(l,l,p,f)))}function o(l){return/^https?:\/\/www\.w3\.org\//u.test(l)}function c(l){return l&&l.type===e.Algebra.Types.EXPRESSION&&(0,e.isKnownSubType)(l,e.Algebra.ExpressionTypes.NAMED)&&!o(l.name.value)}async function u(l,d,f){if(d.length===1){const h=d[0],p=f.get(t.KeysRdfUpdateQuads.destination);if(!p||h.source.referenceValue===(0,r.getDataDestinationValue)(p))try{const _=await h.source.getSelectorShape(f);if(n(_,l))return!0}catch{}}return!1}return Fm}var Mm={},One;function gnt(){if(One)return Mm;One=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.materializeTerm=n,Mm.materializeOperation=i;const t=Ft(),e=Br(),r=Fi();function n(s,o){if(s.termType==="Variable"){const c=o.get(s);if(c)return c}return s.termType==="Quad"&&(0,r.someTermsNested)(s,c=>c.termType==="Variable")?(0,r.mapTermsNested)(s,c=>n(c,o)):s}function i(s,o,c,u,l={}){return l={strictTargetVariables:l.strictTargetVariables??!1,bindFilter:l.bindFilter??!0,originalBindings:l.originalBindings??o},t.algebraUtils.mapOperation(s,{[t.Algebra.Types.PATH]:{preVisitor:()=>({continue:!1}),transform:d=>Object.assign(c.createPath(n(d.subject,o),d.predicate,n(d.object,o),n(d.graph,o)),{metadata:d.metadata})},[t.Algebra.Types.PATTERN]:{preVisitor:()=>({continue:!1}),transform:d=>Object.assign(c.createPattern(n(d.subject,o),n(d.predicate,o),n(d.object,o),n(d.graph,o)),{metadata:d.metadata})},[t.Algebra.Types.JOIN]:{preVisitor:()=>({continue:!1}),transform:d=>Object.assign(c.createJoin(d.input.map(f=>i(f,o,c,u,l)),d.input.every(f=>!f.metadata)),{metadata:d.metadata})},[t.Algebra.Types.EXTEND]:{transform:d=>{if(o.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,e.termToString)(d.variable)} in a BIND operator.`);return i(d.input,o,c,u,l)}return d}},[t.Algebra.Types.GROUP]:{transform:d=>{if(l.strictTargetVariables){for(const h of d.variables)if(o.has(h))throw new Error(`Tried to bind variable ${(0,e.termToString)(h)} in a GROUP BY operator.`);return d}const f=d.variables.filter(h=>!o.has(h));return c.createGroup(d.input,f,d.aggregates)}},[t.Algebra.Types.FILTER]:{preVisitor:()=>({continue:!1}),transform:d=>{const f=l.originalBindings;if(d.expression.subType!=="operator"||f.size===0)return d;const h=a(c,f),p=i(d.expression,o,c,u,l);let _=i(d.input,o,c,u,l);return _=c.createJoin([...h,_]),c.createFilter(_,p)}},[t.Algebra.Types.PROJECT]:{preVisitor:()=>({continue:!1}),transform:d=>{const f=a(c,l.originalBindings,d.variables);let h=i(d.input,o,c,u,l);return f.length>0&&(h=c.createJoin([...f,h])),c.createProject(h,d.variables)}},[t.Algebra.Types.VALUES]:{preVisitor:()=>({continue:!l.strictTargetVariables}),transform:d=>{if(l.strictTargetVariables){for(const p of d.variables)if(o.has(p))throw new Error(`Tried to bind variable ${(0,e.termToString)(p)} in a VALUES operator.`);return d}const f=d.variables.filter(p=>!o.has(p)),h=d.bindings.map(p=>{const _={...p};let g=!0;return o.forEach((m,y)=>{y.value in _&&(m.equals(_[y.value])||(g=!1),delete _[y.value])}),g?_:void 0}).filter(Boolean);return c.createValues(f,h)}},[t.Algebra.Types.EXPRESSION]:{preVisitor:d=>l.bindFilter?d.subType==="term"?{continue:!1}:d.subType==="operator"&&d.operator==="bound"&&d.args.length===1&&d.args[0].subType==="term"&&[...o.keys()].some(f=>d.args[0].term.equals(f))?{continue:!1}:{continue:!0}:{continue:!1},transform:d=>{if(!l.bindFilter)return d;if(d.subType==="term")return c.createTermExpression(n(d.term,o));if(d.subType==="operator")return d.operator==="bound"&&d.args.length===1&&d.args[0].subType==="term"&&[...o.keys()].some(f=>d.args[0].term.equals(f))?c.createTermExpression(c.dataFactory.literal("true",c.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean"))):d;if(d.subType==="aggregate"&&"variable"in d&&o.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind ${(0,e.termToString)(d.variable)} in a ${d.aggregator} aggregate.`);return d}return d}}})}function a(s,o,c){const u=[];for(const[l,d]of o)if(!c||c.some(f=>f.equals(l))){const f={[l.value]:d};u.push(s.createValues([l],[f]))}return u}return Mm}var Rne;function rr(){return Rne||(Rne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(pnt(),t),r(_nt(),t),r(mnt(),t),r(uOe(),t),r(gnt(),t)}(c6)),c6}var Pne;function ynt(){if(Pne)return Nm;Pne=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.ActorOptimizeQueryOperationGroupSources=void 0;const t=Yi(),e=dt,r=ke(),n=Ft(),i=rr();let a=class extends t.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,i.getOperationSource)(o.operation)?(0,r.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,r.passTestVoid)()}async run(o){return{operation:await this.groupOperation(o.operation,o.context),context:o.context}}async groupOperation(o,c){var p;const u=c.getSafe(e.KeysInitQuery.dataFactory),l=new n.AlgebraFactory(u);if((0,i.getOperationSource)(o)??!("input"in o))return o;if(!Array.isArray(o.input)){const _=await this.groupOperation(o.input,c);if((p=_.metadata)!=null&&p.scopedSource){const g=(0,i.getOperationSource)(_);o=await this.moveSourceAnnotationUpwardsIfPossible(o,[_],g,c)}return{...o,input:_}}const d=await Promise.all(o.input.map(_=>this.groupOperation(_,c))),f=this.clusterOperationsWithEqualSources(d);if(f.length===1){const _=f[0],g=(0,i.getOperationSource)(f[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(o,_,g,c),input:_}}if(f.length===d.length)return{...o,input:d};let h;if((0,n.isKnownOperation)(o,n.Algebra.Types.JOIN))h=l.createJoin.bind(l);else if((0,n.isKnownOperation)(o,n.Algebra.Types.UNION))h=l.createUnion.bind(l);else if((0,n.isKnownOperation)(o,n.Algebra.Types.ALT))h=l.createAlt.bind(l);else if((0,n.isKnownOperation)(o,n.Algebra.Types.SEQ))h=l.createSeq.bind(l);else throw new Error(`Unsupported operation '${o.type}' detected while grouping sources`);return await this.groupOperationMulti(f,h,c)}async groupOperationMulti(o,c,u){let l=!0;const d=await Promise.all(o.map(async f=>{const h=(0,i.getOperationSource)(f[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(c(f,!0),f,h,u);return(0,i.getOperationSource)(p)&&(l=!1),p}));return c(d,l)}clusterOperationsWithEqualSources(o){const c=new Map,u=[];for(const d of o){const f=(0,i.getOperationSource)(d);f?(c.has(f)||c.set(f,[]),c.get(f).push(d)):u.push(d)}const l=[];u.length>0&&l.push(u);for(const[d,f]of c.entries())l.push(f.map(h=>(0,i.assignOperationSource)(h,d)));return l}async moveSourceAnnotationUpwardsIfPossible(o,c,u,l){if(u&&this.isPossibleToMoveSourceAnnotationUpwards(o,await u.source.getSelectorShape(l),l)){this.logDebug(l,`Hoist ${c.length} source-specific operations into a single ${o.type} operation for ${u.source.toString()}`),o=(0,i.assignOperationSource)(o,u);for(const d of c)(0,i.removeOperationSource)(d)}return o}isPossibleToMoveSourceAnnotationUpwards(o,c,u){const l=u.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if((0,i.doesShapeAcceptOperation)(c,o,{wildcardAcceptAllExtensionFunctions:l})){const d=u.get(e.KeysInitQuery.extensionFunctions),f=o.expression;return!d||!(f&&(0,n.isKnownSubType)(f,n.Algebra.ExpressionTypes.NAMED))||!((f==null?void 0:f.name.value)in d)||(0,i.doesShapeAcceptOperation)(c,f,{wildcardAcceptAllExtensionFunctions:l})}return!1}};return Nm.ActorOptimizeQueryOperationGroupSources=a,Nm}var Nne;function bnt(){return Nne||(Nne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ynt(),t)}(u6)),u6}var l6={},Dm={},Fne;function vnt(){if(Fne)return Dm;Fne=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.ActorOptimizeQueryOperationConstructDistinct=void 0;const t=Yi(),e=mr,r=ke(),n=Ft();let i=class extends t.ActorOptimizeQueryOperation{constructor(s){super(s)}async test(s){return s.context.has(e.KeysInitQuery.distinctConstruct)?(0,r.passTestVoid)():(0,r.failTest)(`${this.name} was not enabled by the query.`)}async run(s){const o=new n.AlgebraFactory;return{operation:n.algebraUtils.mapOperation(s.operation,{[n.Algebra.Types.CONSTRUCT]:{preVisitor:()=>({continue:!1}),transform:u=>o.createDistinct(o.createConstruct(u.input,u.template))}}),context:s.context.delete(e.KeysInitQuery.distinctConstruct)}}};return Dm.ActorOptimizeQueryOperationConstructDistinct=i,Dm}var Mne;function Ant(){return Mne||(Mne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vnt(),t)}(l6)),l6}var d6={},Cm={},f6={},Lm={},Dne;function Tnt(){if(Dne)return Lm;Dne=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.ActorQueryParse=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return Lm.ActorQueryParse=e,Lm}var Cne;function cOe(){return Cne||(Cne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tnt(),t)}(f6)),f6}var h6={},p6={},_6={},m6={},Lne;function wnt(){return Lne||(Lne=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toAst11Builder=void 0,t.toAst=n;const e=Ul(),r=_r();t.toAst11Builder=r.IndirBuilder.create([e.resetContext,e.registerProjection]).addMany(e.translateAlgPureExpression,e.translateAlgExpressionOrWild,e.translateAlgExpressionOrOrdering,e.translateAlgAnyExpression,e.translateAlgAggregateExpression,e.translateAlgExistenceExpression,e.translateAlgNamedExpression,e.translateAlgPureOperatorExpression,e.translateAlgOperatorExpression,e.translateAlgWildcardExpression,e.translateAlgTerm,e.translateAlgExtend,e.translateAlgDatasetClauses,e.translateAlgOrderBy,e.translateAlgPattern,e.translateAlgReduced,e.translateAlgDistinct,e.translateAlgPathComponent,e.translateAlgAlt,e.translateAlgInv,e.translateAlgLink,e.translateAlgNps,e.translateAlgOneOrMorePath,e.translateAlgSeq,e.translateAlgZeroOrMorePath,e.translateAlgZeroOrOnePath).addMany(e.translateAlgPatternIntoGroup,e.translateAlgSinglePattern,e.translateAlgPatternNew,e.translateAlgBoundAggregate,e.translateAlgBgp,e.translateAlgPath,e.translateAlgFrom,e.translateAlgFilter,e.translateAlgGraph,e.translateAlgGroup,e.translateAlgJoin,e.translateAlgLeftJoin,e.translateAlgMinus,e.translateAlgService,e.operationAlgInputAsPatternList,e.translateAlgSlice,e.algWrapInPatternGroup,e.translateAlgUnion,e.translateAlgValues,e.removeAlgQuads,e.removeAlgQuadsRecursive,e.splitAlgBgpToGraphs,e.translateAlgConstruct,e.replaceAlgAggregatorVariables,e.translateAlgProject,e.registerAlgGroupBy,e.registerOrderBy,e.registerVariables,e.putExtensionsInGroup,e.filterReplace,e.objectContainsVariable,e.translateAlgUpdateOperation,e.toUpdate,e.translateAlgCompositeUpdate,e.translateAlgDeleteInsert,e.cleanupAlgUpdateOperationModify,e.translateAlgLoad,e.translateAlgGraphRef,e.translateAlgClear,e.translateAlgCreate,e.translateAlgDrop,e.translateAlgAdd,e.translateAlgMove,e.translateAlgCopy,e.convertAlgUpdatePatterns,e.algToSparql);function n(i){const a=(0,e.createAstContext)();return t.toAst11Builder.build().algToSparql(a,i)}}(m6)),m6}var g6={},jne;function Snt(){return jne||(jne=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toAlgebra11Builder=void 0,t.toAlgebra=n;const e=Ul(),r=_r();t.toAlgebra11Builder=r.IndirBuilder.create([e.translateAggregates,e.mapAggregate,e.translateBoundAggregate]).addMany(e.translateNamed,e.translateTerm,e.registerContextDefinitions,e.translateInlineData,e.translateDatasetClause,e.translateBlankNodesToVariables,e.findAllVariables,e.inScopeVariables,e.generateFreshVar,e.translatePath,e.translatePathPredicate,e.simplifyPath,e.translateExpression,e.translateGraphPattern,e.translateBgp,e.accumulateGroupGraphPattern,e.simplifiedJoin,e.translateTripleCollection,e.translateBasicGraphPattern,e.translateTripleNesting,e.recurseGraph,e.translateQuad,e.translateUpdate,e.translateSingleUpdate,e.translateInsertDelete,e.translateUpdateTriplesBlock,e.translateGraphRefSpecific,e.translateGraphRefDefSpec,e.translateGraphRef,e.translateUpdateGraphLoad,e.translateQuery);function n(i,a={}){const s=(0,e.createAlgebraContext)(a);return t.toAlgebra11Builder.build().translateQuery(s,i,a.quads,a.blankToVariable)}}(g6)),g6}var Bne;function lOe(){return Bne||(Bne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(wnt(),t),r(Snt(),t)}(_6)),_6}var qne;function xnt(){return qne||(qne=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toAst12Builder=void 0,t.toAst=i;const e=lOe(),r=zu(),n=_r();t.toAst12Builder=n.IndirBuilder.create(e.toAst11Builder).widenContext().patchRule(r.translateAlgTerm12).typePatch();function i(a){const s=(0,r.createAstContext)();return t.toAst12Builder.build().algToSparql(s,a)}}(p6)),p6}var y6={},Une;function Ent(){return Une||(Une=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toAlgebra12Builder=void 0,t.toAlgebra=i;const e=lOe(),r=zu(),n=_r();t.toAlgebra12Builder=n.IndirBuilder.create(e.toAlgebra11Builder).widenContext().patchRule(r.translateTerm12).patchRule(r.translateTripleCollection12).patchRule(r.translateTripleNesting12).patchRule(r.inScopeVariables).typePatch();function i(a,s={}){const o=(0,r.createAlgebraContext)(s);return t.toAlgebra12Builder.build().translateQuery(o,a,s.quads,s.blankToVariable)}}(y6)),y6}var Vne;function dOe(){return Vne||(Vne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(xnt(),t),r(Ent(),t)}(h6)),h6}var b6={},v6={},A6={},jm={},Gne;function fOe(){if(Gne)return jm;Gne=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.expressionParserBuilder=void 0;const t=_r(),e=di(),r=[e.gram.expression,e.gram.conditionalOrExpression,e.gram.conditionalAndExpression,e.gram.valueLogical,e.gram.relationalExpression,e.gram.numericExpression,e.gram.expressionList,e.gram.additiveExpression,e.gram.multiplicativeExpression,e.gram.unaryExpression,e.gram.primaryExpression,e.gram.brackettedExpression,e.gram.iriOrFunction,e.gram.rdfLiteral,e.gram.numericLiteral,e.gram.numericLiteralUnsigned,e.gram.numericLiteralPositive,e.gram.numericLiteralNegative,e.gram.booleanLiteral,e.gram.var_,e.gram.builtInStr,e.gram.builtInLang,e.gram.builtInLangmatches,e.gram.builtInDatatype,e.gram.builtInBound,e.gram.builtInIri,e.gram.builtInUri,e.gram.builtInBnodeSparqlJs,e.gram.builtInRand,e.gram.builtInAbs,e.gram.builtInCeil,e.gram.builtInFloor,e.gram.builtInRound,e.gram.builtInConcat,e.gram.builtInStrlen,e.gram.builtInUcase,e.gram.builtInLcase,e.gram.builtInEncode_for_uri],n={name:"builtInCall",impl:({OR:i,SUBRULE:a})=>()=>i(e.gram.builtInCallList(a).slice(0,-2))};return jm.expressionParserBuilder=t.ParserBuilder.create(r).addMany(e.gram.builtInContains,e.gram.builtInStrstarts,e.gram.builtInStrends,e.gram.builtInStrbefore,e.gram.builtInStrafter,e.gram.builtInYear,e.gram.builtInMonth,e.gram.builtInDay,e.gram.builtInHours,e.gram.builtInMinutes,e.gram.builtInSeconds,e.gram.builtInTimezone,e.gram.builtInTz,e.gram.builtInNow,e.gram.builtInUuid,e.gram.builtInStruuid,e.gram.builtInMd5,e.gram.builtInSha1,e.gram.builtInSha256,e.gram.builtInSha384,e.gram.builtInSha512,e.gram.builtInCoalesce,e.gram.builtInIf,e.gram.builtInStrlang,e.gram.builtInStrdt,e.gram.builtInSameterm,e.gram.builtInIsiri,e.gram.builtInIsuri,e.gram.builtInIsblank,e.gram.builtInIsliteral,e.gram.builtInIsnumeric,e.gram.regexExpression,e.gram.substringExpression,e.gram.strReplaceExpression,e.gram.aggregateCount,e.gram.aggregateSum,e.gram.aggregateMin,e.gram.aggregateMax,e.gram.aggregateAvg,e.gram.aggregateSample,e.gram.aggregateGroup_concat,e.gram.aggregate,e.gram.iri,e.gram.prefixedName,e.gram.argList,e.gram.string).addRule(n),jm}var Bm={},Hne;function Pz(){if(Hne)return Bm;Hne=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.objectListParserBuilder=void 0;const t=_r(),e=di(),r=[e.gram.objectList,e.gram.object,e.gram.graphNode,e.gram.varOrTerm,e.gram.triplesNode,e.gram.collection,e.gram.blankNodePropertyList,e.gram.propertyListNotEmpty,e.gram.verb,e.gram.verbA,e.gram.varOrIri,e.gram.var_,e.gram.iri,e.gram.iriFull,e.gram.prefixedName,e.gram.graphTerm,e.gram.rdfLiteral,e.gram.numericLiteral,e.gram.booleanLiteral,e.gram.blankNode,e.gram.string,e.gram.numericLiteralUnsigned,e.gram.numericLiteralPositive,e.gram.numericLiteralNegative];return Bm.objectListParserBuilder=t.ParserBuilder.create(r),Bm}var qm={},Um={},Vm={},kne;function hOe(){if(kne)return Vm;kne=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.triplesBlockParserBuilder=void 0;const t=_r(),e=di(),r=Pz();return Vm.triplesBlockParserBuilder=t.ParserBuilder.create([e.gram.triplesBlock,e.gram.triplesSameSubjectPath,e.gram.propertyListPathNotEmpty,e.gram.triplesNodePath,e.gram.propertyListPath,e.gram.verbPath,e.gram.verbSimple,e.gram.objectListPath]).merge(r.objectListParserBuilder,[]).addMany(e.gram.path,e.gram.pathAlternative,e.gram.pathSequence,e.gram.pathEltOrInverse,e.gram.pathElt,e.gram.pathPrimary,e.gram.pathMod,e.gram.pathNegatedPropertySet,e.gram.pathOneInPropertySet,e.gram.objectPath,e.gram.graphNodePath,e.gram.collectionPath,e.gram.blankNodePropertyListPath),Vm}var zne;function Nz(){if(zne)return Um;zne=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.subSelectParserBuilder=void 0;const t=_r(),e=di(),r=fOe(),n=hOe(),i=[e.gram.subSelect,e.gram.selectClause,e.gram.whereClause,e.gram.solutionModifier,e.gram.valuesClause];return Um.subSelectParserBuilder=t.ParserBuilder.create(i).merge(r.expressionParserBuilder,[]).patchRule(e.gram.builtInCall).addMany(e.gram.existsFunc,e.gram.notExistsFunc,e.gram.groupGraphPattern,e.gram.groupGraphPatternSub).merge(n.triplesBlockParserBuilder,[]).addMany(e.gram.graphPatternNotTriples,e.gram.groupOrUnionGraphPattern,e.gram.optionalGraphPattern,e.gram.minusGraphPattern,e.gram.graphGraphPattern,e.gram.serviceGraphPattern,e.gram.filter,e.gram.bind,e.gram.inlineData,e.gram.constraint,e.gram.functionCall,e.gram.dataBlock,e.gram.inlineDataOneVar,e.gram.inlineDataFull,e.gram.dataBlockValue,e.gram.groupClause,e.gram.havingClause,e.gram.orderClause,e.gram.limitOffsetClauses,e.gram.groupCondition,e.gram.havingCondition,e.gram.orderCondition,e.gram.limitClause,e.gram.offsetClause),Um}var Gm={},Qne;function Fz(){if(Qne)return Gm;Qne=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.triplesTemplateParserBuilder=void 0;const t=_r(),e=di(),r=[e.gram.triplesTemplate,e.gram.triplesSameSubject,e.gram.varOrTerm,e.gram.propertyListNotEmpty,e.gram.triplesNode,e.gram.propertyList,e.gram.var_,e.gram.graphTerm,e.gram.iri,e.gram.iriFull,e.gram.prefixedName,e.gram.rdfLiteral,e.gram.string,e.gram.numericLiteral,e.gram.numericLiteralUnsigned,e.gram.numericLiteralPositive,e.gram.numericLiteralNegative,e.gram.booleanLiteral,e.gram.blankNode,e.gram.verb,e.gram.verbA,e.gram.varOrIri,e.gram.objectList,e.gram.object,e.gram.collection,e.gram.blankNodePropertyList,e.gram.graphNode];return Gm.triplesTemplateParserBuilder=t.ParserBuilder.create(r),Gm}var Wne;function pOe(){if(Wne)return qm;Wne=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.queryUnitParserBuilder=void 0;const t=_r(),e=di(),r=Nz(),n=Fz(),i=[e.gram.queryUnit,e.gram.query,e.gram.prologue,e.gram.selectQuery,e.gram.constructQuery,e.gram.describeQuery,e.gram.askQuery,e.gram.valuesClause,e.gram.baseDecl,e.gram.prefixDecl];return qm.queryUnitParserBuilder=t.ParserBuilder.create(i).merge(r.subSelectParserBuilder,[]).addRule(e.gram.datasetClause).addRule(e.gram.datasetClauseStar).addRule(e.gram.defaultGraphClause).addRule(e.gram.namedGraphClause).addRule(e.gram.sourceSelector).addRule(e.gram.constructTemplate).merge(n.triplesTemplateParserBuilder,[]).addRule(e.gram.constructTriples),qm}var T6={},Hm={},km={},Kne;function _Oe(){if(Kne)return km;Kne=1,Object.defineProperty(km,"__esModule",{value:!0}),km.updateNoModifyParserBuilder=void 0;const t=_r(),e=di(),r=Fz(),n={name:"update1",impl:({SUBRULE:a,OR:s})=>()=>s([{ALT:()=>a(e.gram.load)},{ALT:()=>a(e.gram.clear)},{ALT:()=>a(e.gram.drop)},{ALT:()=>a(e.gram.add)},{ALT:()=>a(e.gram.move)},{ALT:()=>a(e.gram.copy)},{ALT:()=>a(e.gram.create)},{ALT:()=>a(e.gram.insertData)},{ALT:()=>a(e.gram.deleteData)},{ALT:()=>a(e.gram.deleteWhere)}]),gImpl:e.gram.update1.gImpl},i=[e.gram.updateUnit,e.gram.update,e.gram.prologue,e.gram.baseDecl,e.gram.prefixDecl,e.gram.load,e.gram.clear,e.gram.drop,e.gram.add,e.gram.move,e.gram.copy,e.gram.create,e.gram.insertData,e.gram.deleteData,e.gram.deleteWhere,e.gram.iri,e.gram.prefixedName,e.gram.graphRef,e.gram.graphRefAll,e.gram.graphOrDefault,e.gram.quadData,e.gram.quads];return km.updateNoModifyParserBuilder=t.ParserBuilder.create(i).addRule(n).merge(r.triplesTemplateParserBuilder,[]).addRule(e.gram.quadPattern).addRule(e.gram.quadsNotTriples),km}var Xne;function mOe(){if(Xne)return Hm;Xne=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.updateParserBuilder=void 0;const t=_r(),e=di(),r=Pz(),n=Nz(),i=_Oe();return Hm.updateParserBuilder=t.ParserBuilder.create(i.updateNoModifyParserBuilder).patchRule(e.gram.update1).addMany(e.gram.modify,e.gram.deleteClause,e.gram.insertClause,e.gram.usingClause,e.gram.defaultGraphClause,e.gram.namedGraphClause,e.gram.sourceSelector,e.gram.usingClauseStar,e.gram.groupGraphPattern).merge(r.objectListParserBuilder,[]).merge(n.subSelectParserBuilder,[]),Hm}var Jne;function Int(){return Jne||(Jne=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.sparql11ParserBuilder=void 0;const e=_r(),r=di(),n=pOe(),i=mOe();t.sparql11ParserBuilder=e.ParserBuilder.create(n.queryUnitParserBuilder).merge(i.updateParserBuilder,[]).addRule(r.gram.queryOrUpdate);class a extends r.MinimalSparqlParser{constructor(o={}){const c=t.sparql11ParserBuilder.build({...o,tokenVocabulary:r.lex.sparql11LexerBuilder.tokenVocabulary,queryPreProcessor:r.sparqlCodepointEscape});super(c,o.defaultContext)}}t.Parser=a}(T6)),T6}var Yne;function Ont(){return Yne||(Yne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(fOe(),t),r(Pz(),t),r(pOe(),t),r(Int(),t),r(Nz(),t),r(hOe(),t),r(Fz(),t),r(_Oe(),t),r(mOe(),t)}(A6)),A6}var $ne;function Rnt(){return $ne||($ne=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.sparql12ParserBuilder=void 0;const e=_r(),r=Ont(),n=di(),i=bO();t.sparql12ParserBuilder=e.ParserBuilder.create(r.sparql11ParserBuilder).widenContext().typePatch().addMany(i.gram.reifiedTripleBlock,i.gram.reifiedTripleBlockPath,i.gram.reifier,i.gram.varOrReifierId,i.gram.annotation,i.gram.annotationPath,i.gram.annotationBlockPath,i.gram.annotationBlock,i.gram.reifiedTriple,i.gram.reifiedTripleSubject,i.gram.reifiedTripleObject,i.gram.tripleTerm,i.gram.tripleTermSubject,i.gram.tripleTermObject,i.gram.tripleTermData,i.gram.tripleTermDataSubject,i.gram.tripleTermDataObject,i.gram.exprTripleTerm,i.gram.exprTripleTermSubject,i.gram.exprTripleTermObject).addMany(i.gram.versionDecl,i.gram.versionSpecifier).addMany(i.gram.buildInLangDir,i.gram.buildInLangStrDir,i.gram.buildInHasLang,i.gram.buildInHasLangDir,i.gram.buildInIsTriple,i.gram.buildInTriple,i.gram.buildInSubject,i.gram.buildInPredicate,i.gram.buildInObject).patchRule(i.gram.dataBlockValue).patchRule(i.gram.triplesSameSubject).patchRule(i.gram.triplesSameSubjectPath).patchRule(i.gram.object).patchRule(i.gram.objectPath).patchRule(i.gram.graphNode).patchRule(i.gram.graphNodePath).patchRule(i.gram.varOrTerm).deleteRule(n.gram.graphTerm.name).patchRule(i.gram.primaryExpression).patchRule(i.gram.builtInCall).patchRule(i.gram.rdfLiteral).patchRule(i.gram.unaryExpression).patchRule(i.gram.prologue);class a{constructor(o={}){k(this,"parser");k(this,"defaultContext");this.parser=t.sparql12ParserBuilder.build({...o,queryPreProcessor:n.sparqlCodepointEscape,tokenVocabulary:i.lex.sparql12LexerBuilder.tokenVocabulary}),this.defaultContext=(0,i.completeParseContext)(o.defaultContext??{})}parse(o,c={}){const u=this.parser.queryOrUpdate(o,(0,i.copyParseContext)({...this.defaultContext,...c}));return u.loc=this.defaultContext.astFactory.sourceLocationInlinedSource(o,u.loc,0,Number.MAX_SAFE_INTEGER),u}parsePath(o,c={}){const u=this.parser.path(o,(0,i.copyParseContext)({...this.defaultContext,...c}));return u.loc=this.defaultContext.astFactory.sourceLocationInlinedSource(o,u.loc,0,Number.MAX_SAFE_INTEGER),this.defaultContext.astFactory.isPathPure(u)?{...u,prefixes:{}}:u}}t.Parser=a}(v6)),v6}var Zne;function gOe(){return Zne||(Zne=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rnt(),t)}(b6)),b6}var eie;function Pnt(){if(eie)return Cm;eie=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.ActorQueryParseSparql=void 0;const t=cOe(),e=dt,r=ke(),n=dOe(),i=gOe(),a=bO();let s=class extends t.ActorQueryParse{constructor(u){super(u);k(this,"prefixes");k(this,"parser");this.prefixes=Object.freeze(u.prefixes),this.parser=new i.Parser({lexerConfig:{positionTracking:"onlyOffset"}})}async test(u){return u.queryFormat&&u.queryFormat.language!=="sparql"?(0,r.failTest)("This actor can only parse SPARQL queries"):(0,r.passTestVoid)()}async run(u){const l=u.context.getSafe(e.KeysInitQuery.dataFactory),d=new a.AstFactory,f=this.parser.parse(u.query,{prefixes:this.prefixes,baseIRI:u.baseIRI,astFactory:d});let h;if(d.isQuery(f))for(const p of f.context)d.isContextDefinitionBase(p)&&(h=p.value.value);return{baseIRI:h,operation:(0,n.toAlgebra)(f,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:u.baseIRI,dataFactory:l})}}};return Cm.ActorQueryParseSparql=s,Cm}var tie;function Nnt(){return tie||(tie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pnt(),t)}(d6)),d6}var w6={},zm={},S6={},x6={},E6={},Qm={},rie;function f0(){if(rie)return Qm;rie=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.DirectiveNodeHandlerAdapter=void 0;let t=class{constructor(r,n,i){this.targetKind=r,this.util=n,this.settings=i}getDirectiveConditionalValue(r,n){const i=this.util.getArgument(r.arguments,"if");if(!i)throw new Error(`The directive ${r.name.value} is missing an if-argument.`);const a=this.util.handleNodeValue(i.value,i.name.value,n);if(a.terms.length!==1)throw new Error(`Can not apply the directive ${r.name.value} with a list.`);return a.terms[0]}isDirectiveScopeAll(r){const n=this.util.getArgument(r.arguments,"scope");return n&&n.value.kind==="EnumValue"&&n.value.value==="all"}};return Qm.DirectiveNodeHandlerAdapter=t,Qm}var Wm={},nie;function Fnt(){if(nie)return Wm;nie=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.DirectiveNodeHandlerInclude=void 0;const t=f0();let e=class extends t.DirectiveNodeHandlerAdapter{constructor(n,i){super("include",n,i)}handle(n,i){const a=this.getDirectiveConditionalValue(n.directive,i);return a.termType==="Literal"&&a.value==="false"?{ignore:!0}:{}}};return Wm.DirectiveNodeHandlerInclude=e,Wm}var Km={},iie;function Mnt(){if(iie)return Km;iie=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.DirectiveNodeHandlerOptional=void 0;const t=f0();let e=class extends t.DirectiveNodeHandlerAdapter{constructor(n,i){super("optional",n,i)}handle(n,i){return{operationOverrider:a=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),a)}}};return Km.DirectiveNodeHandlerOptional=e,Km}var Xm={},Jm={},aie;function vO(){if(aie)return Jm;aie=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.SingularizeState=void 0;var t;return function(e){e[e.SINGLE=0]="SINGLE",e[e.PLURAL=1]="PLURAL"}(t||(Jm.SingularizeState=t={})),Jm}var sie;function Dnt(){if(sie)return Xm;sie=1,Object.defineProperty(Xm,"__esModule",{value:!0}),Xm.DirectiveNodeHandlerPlural=void 0;const t=vO(),e=f0();let r=class extends e.DirectiveNodeHandlerAdapter{constructor(i,a){super("plural",i,a)}handle(i,a){return this.isDirectiveScopeAll(i.directive)&&(a.singularizeState=t.SingularizeState.PLURAL),delete a.singularizeVariables[this.util.nameToVariable(i.fieldLabel,a).value],{}}};return Xm.DirectiveNodeHandlerPlural=r,Xm}var Ym={},oie;function Cnt(){if(oie)return Ym;oie=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.DirectiveNodeHandlerSingle=void 0;const t=vO(),e=f0();let r=class extends e.DirectiveNodeHandlerAdapter{constructor(i,a){super("single",i,a)}handle(i,a){return this.isDirectiveScopeAll(i.directive)&&(a.singularizeState=t.SingularizeState.SINGLE),a.singularizeVariables[this.util.nameToVariable(i.fieldLabel,a).value]=!0,{}}};return Ym.DirectiveNodeHandlerSingle=r,Ym}var $m={},uie;function Lnt(){if(uie)return $m;uie=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.DirectiveNodeHandlerSkip=void 0;const t=f0();let e=class extends t.DirectiveNodeHandlerAdapter{constructor(n,i){super("skip",n,i)}handle(n,i){const a=this.getDirectiveConditionalValue(n.directive,i);return a.termType==="Literal"&&a.value==="true"?{ignore:!0}:{}}};return $m.DirectiveNodeHandlerSkip=e,$m}var cie;function yOe(){return cie||(cie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(f0(),t),r(Fnt(),t),r(Mnt(),t),r(Dnt(),t),r(Cnt(),t),r(Lnt(),t)}(E6)),E6}var I6={},Zm={},lie;function Wo(){if(lie)return Zm;lie=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.NodeValueHandlerAdapter=void 0;let t=class{constructor(r,n,i){this.targetKind=r,this.util=n,this.settings=i}};return Zm.NodeValueHandlerAdapter=t,Zm}var eg={},die;function jnt(){if(die)return eg;die=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.NodeValueHandlerBoolean=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("BooleanValue",n,i),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(n,i,a){return{terms:[this.util.dataFactory.literal(n.value?"true":"false",this.datatype)]}}};return eg.NodeValueHandlerBoolean=e,eg}var tg={},fie;function Bnt(){if(fie)return tg;fie=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.NodeValueHandlerEnum=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("EnumValue",n,i)}handle(n,i,a){return{terms:[this.util.valueToNamedNode(n.value,a.context)]}}};return tg.NodeValueHandlerEnum=e,tg}var rg={},hie;function qnt(){if(hie)return rg;hie=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.NodeValueHandlerFloat=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("FloatValue",n,i),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(n,i,a){return{terms:[this.util.dataFactory.literal(n.value,this.datatype)]}}};return rg.NodeValueHandlerFloat=e,rg}var ng={},pie;function Unt(){if(pie)return ng;pie=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.NodeValueHandlerInt=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("IntValue",n,i),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(n,i,a){return{terms:[this.util.dataFactory.literal(n.value,this.datatype)]}}};return ng.NodeValueHandlerInt=e,ng}var ig={},_ie;function Vnt(){if(_ie)return ig;_ie=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.NodeValueHandlerList=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("ListValue",n,i),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(n,i,a){const s=[];let o=[];for(const c of n.values){const u=this.util.handleNodeValue(c,i,a);for(const l of u.terms)s.push(l);u.auxiliaryPatterns&&(o=o.concat(u.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const c=this.util.dataFactory.blankNode();let u=c,l=s.length;for(const d of s){o.push(this.util.operationFactory.createPattern(u,this.nodeFirst,d,a.graph));const f=--l===0?this.nodeNil:this.util.dataFactory.blankNode();o.push(this.util.operationFactory.createPattern(u,this.nodeRest,f,a.graph)),u=f}return{terms:[c],auxiliaryPatterns:o}}else return{terms:s,auxiliaryPatterns:o}}};return ig.NodeValueHandlerList=e,ig}var ag={},mie;function Gnt(){if(mie)return ag;mie=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.NodeValueHandlerNull=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("NullValue",n,i),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(n,i,a){return{terms:[this.nil]}}};return ag.NodeValueHandlerNull=e,ag}var sg={},gie;function Hnt(){if(gie)return sg;gie=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.NodeValueHandlerObject=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("ObjectValue",n,i)}handle(n,i,a){const s=this.util.dataFactory.blankNode();let o=[];for(const c of n.fields){const u=this.util.handleNodeValue(c.value,i,a);for(const l of u.terms)o.push(this.util.createQuadPattern(s,c.name,l,a.graph,a.context));u.auxiliaryPatterns&&(o=o.concat(u.auxiliaryPatterns))}return{terms:[s],auxiliaryPatterns:o}}};return sg.NodeValueHandlerObject=e,sg}var og={},yie;function knt(){if(yie)return og;yie=1,Object.defineProperty(og,"__esModule",{value:!0}),og.NodeValueHandlerString=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("StringValue",n,i)}handle(n,i,a){const s=a.context.getContextRaw()[i];let o,c;return s&&typeof s!="string"&&(s["@language"]?o=s["@language"]:s["@type"]&&(c=this.util.dataFactory.namedNode(s["@type"]))),{terms:[this.util.dataFactory.literal(n.value,o||c)]}}};return og.NodeValueHandlerString=e,og}var ug={},bie;function znt(){if(bie)return ug;bie=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.NodeValueHandlerVariable=void 0;const t=Wo();let e=class extends t.NodeValueHandlerAdapter{constructor(n,i){super("Variable",n,i)}handle(n,i,a){const s=n.name.value,o=a.variablesDict[s],c=a.variablesMetaDict[s];if(!o){if(!a.ignoreUnknownVariables&&(!c||c.mandatory))throw new Error(`Undefined variable: ${s}`);{const u=this.util.dataFactory.variable(s);return a.terminalVariables.map(l=>l.value).indexOf(s)<0&&a.terminalVariables.push(u),{terms:[u]}}}if(o.kind==="Variable")throw new Error(`Variable refers to another variable: ${s}`);if(c)if(c.list){if(o.kind!=="ListValue")throw new Error(`Expected a list, but got ${o.kind} for ${s}`);if(c.type){const u=o;for(const l of u.values)if(l.kind!==c.type)throw new Error(`Expected ${c.type}, but got ${l.kind} for ${s}`)}}else c.type;return this.util.handleNodeValue(o,i,a)}};return ug.NodeValueHandlerVariable=e,ug}var vie;function Qnt(){return vie||(vie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wo(),t),r(jnt(),t),r(Bnt(),t),r(qnt(),t),r(Unt(),t),r(Vnt(),t),r(Gnt(),t),r(Hnt(),t),r(knt(),t),r(znt(),t)}(I6)),I6}var cg={},Aie;function JF(){if(Aie)return cg;Aie=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.NodeHandlerAdapter=void 0;let t=class{constructor(r,n,i){this.targetKind=r,this.util=n,this.settings=i}getNodeQuadContextSelectionSet(r,n,i){const a={};if(r){for(const s of r.selections)if(s.kind==="Field"){const o=s;this.handleNodeQuadContextField(o,i,a,"id","subject"),this.handleNodeQuadContextField(o,i,a,"graph","graph")}}return a}handleNodeQuadContextField(r,n,i,a,s){if(!i[s]&&r.name.value===a){if(!i[s]){const o=this.util.getArgument(r.arguments,"_");if(o){const c=this.util.handleNodeValue(o.value,r.name.value,n);if(c.terms.length!==1)throw new Error(`Only single values can be set as ${a}, but got ${c.terms.length} at ${r.name.value}`);i[s]=c.terms[0],c.auxiliaryPatterns&&(i.auxiliaryPatterns||(i.auxiliaryPatterns=[]),i.auxiliaryPatterns.concat(c.auxiliaryPatterns))}}if(!i[s]){const o=this.util.nameToVariable(this.util.getFieldLabel(r),n);n.terminalVariables.push(o),i[s]=o}}}getDirectiveOutputs(r,n,i){const a=[];if(r)for(const s of r){const o=this.util.handleDirectiveNode({directive:s,fieldLabel:n},i);if(o){if(o.ignore)return null;a.push(o)}}return a}handleDirectiveOutputs(r,n){for(const i of r){if(i.ignore)return this.util.operationFactory.createBgp([]);i.operationOverrider&&(n=i.operationOverrider(n))}return n}};return cg.NodeHandlerAdapter=t,cg}var lg={},Tie;function Mz(){if(Tie)return lg;Tie=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.NodeHandlerDefinitionAdapter=void 0;const t=JF();let e=class extends t.NodeHandlerAdapter{constructor(n,i,a){super(n,i,a)}};return lg.NodeHandlerDefinitionAdapter=e,lg}var dg={},wie;function Wnt(){if(wie)return dg;wie=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.NodeHandlerDefinitionFragment=void 0;const t=Mz();let e=class extends t.NodeHandlerDefinitionAdapter{constructor(n,i){super("FragmentDefinition",n,i)}handle(n,i){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}};return dg.NodeHandlerDefinitionFragment=e,dg}var fg={},Sie;function Knt(){if(Sie)return fg;Sie=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.NodeHandlerDefinitionOperation=void 0;const t=Mz();let e=class extends t.NodeHandlerDefinitionAdapter{constructor(n,i){super("OperationDefinition",n,i)}handle(n,i){if(n.operation!=="query")throw new Error("Unsupported definition operation: "+n.operation);if(n.variableDefinitions)for(const o of n.variableDefinitions){const c=o.variable.name.value;o.defaultValue&&(i.variablesDict[c]||(i.variablesDict[c]=o.defaultValue));let u=o.type;const l=u.kind==="NonNullType";l&&(u=u.type);const d=u.kind==="ListType";d&&(u=u.type);const f=u.name.value;i.variablesMetaDict[c]={mandatory:l,list:d,type:f}}const a=this.getDirectiveOutputs(n.directives,n.name?n.name.value:"",i);if(!a)return this.util.operationFactory.createBgp([]);const s=this.util.joinOperations(n.selectionSet.selections.map(o=>this.util.handleNode(o,i)));return this.handleDirectiveOutputs(a,s)}};return fg.NodeHandlerDefinitionOperation=e,fg}var hg={},xie;function Xnt(){if(xie)return hg;xie=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.NodeHandlerDocument=void 0;const t=zu(),e=zu(),r=JF();let n=class extends r.NodeHandlerAdapter{constructor(a,s){super("Document",a,s)}handle(a,s){const o=a.definitions.map(u=>{const l=this.getNodeQuadContextDefinitionNode(u,Object.assign(Object.assign({},s),{ignoreUnknownVariables:!0})),d=Object.assign(Object.assign({},s),{graph:l.graph||s.graph,subject:l.subject||this.util.dataFactory.blankNode()});let f=this.util.handleNode(u,d);return l&&l.auxiliaryPatterns&&(f=this.util.joinOperations([f,this.util.operationFactory.createBgp(l.auxiliaryPatterns)])),f}),c=this.util.operationFactory.createProject(o.length===1?o[0]:this.util.operationFactory.createUnion(o),s.terminalVariables);return this.translateBlankNodesToVariables(c)}getNodeQuadContextDefinitionNode(a,s){if(a.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(a.selectionSet,a.name?a.name.value:"",s);throw new Error(`Unsupported definition: ${a.kind}`)}translateBlankNodesToVariables(a){const s={},o=new Set(a.variables.map(l=>l.value)),c=(l,d)=>{let f=0,h=l;for(;o.has(h);)h=`${l}${f++}`;return this.util.dataFactory.variable(h)},u=l=>{if(l.termType==="BlankNode"){let d=s[l.value];return d||(d=c(l.value),o.add(d.value),s[l.value]=d),d}return l};return e.algebraUtils.mapOperation(a,{[t.Algebra.Types.PATH]:{preVisitor:()=>({continue:!1}),transform:l=>this.util.operationFactory.createPath(u(l.subject),l.predicate,u(l.object),u(l.graph))},[t.Algebra.Types.PATTERN]:{preVisitor:()=>({continue:!1}),transform:l=>this.util.operationFactory.createPattern(u(l.subject),u(l.predicate),u(l.object),u(l.graph))}})}};return hg.NodeHandlerDocument=n,hg}var pg={},Eie;function YF(){if(Eie)return pg;Eie=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.NodeHandlerSelectionAdapter=void 0;const t=zu(),e=vO(),r=JF();let n=class extends r.NodeHandlerAdapter{constructor(a,s,o){super(a,s,o)}getNodeQuadContextFieldNode(a,s,o){return this.getNodeQuadContextSelectionSet(a.selectionSet,s,Object.assign(Object.assign({},o),{path:this.util.appendFieldToPath(o.path,s)}))}fieldToOperation(a,s,o,c){const u=o;let l=0,d;if((s.name.value==="id"||s.name.value==="graph")&&(o=!1,s.arguments))for(const T of s.arguments)T.name.value==="_"&&this.util.handleNodeValue(T.value,s.name.value,a);const f=this.util.getFieldLabel(s);if(a.singularizeState===e.SingularizeState.SINGLE&&(a.singularizeVariables[this.util.nameToVariable(f,a).value]=!0),o){const T=this.handleMetaField(a,f,c);if(T)return T}const h=c?[this.util.operationFactory.createBgp(c)]:[],p=this.getNodeQuadContextFieldNode(s,f,a);let _=p.subject||this.util.nameToVariable(f,a),g=p.graph||a.graph;p.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(p.auxiliaryPatterns));let m=!0,y=null;if(o&&s.arguments&&s.arguments.length){for(const T of s.arguments)if(T.name.value==="_"){const S=this.util.handleNodeValue(T.value,s.name.value,a);y=S.terms,h.push(this.util.operationFactory.createBgp(S.terms.map(P=>this.util.createQuadPattern(a.subject,s.name,P,a.graph,a.context)))),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns)),o=!1;break}else if(T.name.value==="graph"){const S=this.util.handleNodeValue(T.value,s.name.value,a);if(S.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${S.terms.length} at ${s.name.value}`);g=S.terms[0],a=Object.assign(Object.assign({},a),{graph:g}),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns));break}else if(T.name.value==="alt"){let S=T.value;S.kind!=="ListValue"&&(S={kind:"ListValue",values:[S]}),h.push(this.util.createQuadPath(a.subject,s.name,S,_,a.graph,a.context)),m=!1;break}}if(o&&m&&h.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(a.subject,s.name,_,a.graph,a.context)])),s.arguments&&s.arguments.length){for(const T of s.arguments)if(!(T.name.value==="_"||T.name.value==="graph"||T.name.value==="alt"))if(T.name.value==="first"){if(T.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+T.value.kind);d=parseInt(T.value.value,10)}else if(T.name.value==="offset"){if(T.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+T.value.kind);l=parseInt(T.value.value,10)}else{const S=this.util.handleNodeValue(T.value,T.name.value,a);h.push(this.util.operationFactory.createBgp(S.terms.map(P=>this.util.createQuadPattern(_,T.name,P,a.graph,a.context)))),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns))}}const v=this.getDirectiveOutputs(s.directives,f,a);if(!v)return this.util.operationFactory.createBgp([]);let A=this.util.joinOperations(h);if(s.selectionSet&&s.selectionSet.selections.length){if(y){if(y.length!==1)throw new Error(`Only single values can be set as id, but got ${y.length} at ${s.name.value}`);_=y[0]}const T=Object.assign(Object.assign(Object.assign({},a),u?{path:this.util.appendFieldToPath(a.path,f)}:{}),{graph:g,subject:u?_:a.subject});let S=!1;const P=s.selectionSet.selections.filter(F=>F.kind==="Field"&&F.name.value==="totalCount"?(S=!0,!1):!0);let j=this.util.joinOperations(h.concat(P.map(F=>this.util.handleNode(F,T))));if(S){const F=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),N=this.util.dataFactory.variable(_.value+this.settings.variableDelimiter+"totalCount"),R=this.util.operationFactory.createBoundAggregate(F,"count",this.util.operationFactory.createTermExpression(_),!1),C=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(A,[],[R]),N,this.util.operationFactory.createTermExpression(F)),[N]);a.terminalVariables.push(N),P.length?j=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(j,[]),C]):j=C}A=j}else o&&_.termType==="Variable"&&a.terminalVariables.push(_);return(l||d)&&(A=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(A,t.algebraUtils.inScopeVariables(A)),l,d)),this.handleDirectiveOutputs(v,A)}handleMetaField(a,s,o){if(s==="__typename"){const c=this.util.nameToVariable(s,a);return a.terminalVariables.push(c),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(a.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(s,a),a.graph)].concat(o||[]))}}};return pg.NodeHandlerSelectionAdapter=n,pg}var _g={},Iie;function Jnt(){if(Iie)return _g;Iie=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.NodeHandlerSelectionField=void 0;const t=YF();let e=class extends t.NodeHandlerSelectionAdapter{constructor(n,i){super("Field",n,i)}handle(n,i){return this.fieldToOperation(i,n,!0)}};return _g.NodeHandlerSelectionField=e,_g}var mg={},Oie;function Ynt(){if(Oie)return mg;Oie=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.NodeHandlerSelectionFragmentSpread=void 0;const t=YF();let e=class extends t.NodeHandlerSelectionAdapter{constructor(n,i){super("FragmentSpread",n,i)}handle(n,i){const a=i.fragmentDefinitions[n.name.value];if(!a)throw new Error("Undefined fragment definition: "+n.name.value);const s={alias:void 0,arguments:void 0,directives:a.directives,kind:"Field",name:n.name,selectionSet:a.selectionSet},o=[this.util.newTypePattern(i.subject,a.typeCondition,i)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(i,s,!1,o))}};return mg.NodeHandlerSelectionFragmentSpread=e,mg}var gg={},Rie;function $nt(){if(Rie)return gg;Rie=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.NodeHandlerSelectionInlineFragment=void 0;const t=YF();let e=class extends t.NodeHandlerSelectionAdapter{constructor(n,i){super("InlineFragment",n,i)}handle(n,i){const a={alias:void 0,arguments:void 0,directives:n.directives,kind:"Field",name:{kind:"Name",value:i.subject.value},selectionSet:n.selectionSet},s=n.typeCondition?[this.util.newTypePattern(i.subject,n.typeCondition,i)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(i,a,!1,s))}};return gg.NodeHandlerSelectionInlineFragment=e,gg}var Pie;function bOe(){return Pie||(Pie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(yOe(),t),r(Qnt(),t),r(JF(),t),r(Mz(),t),r(Wnt(),t),r(Knt(),t),r(Xnt(),t),r(YF(),t),r(Jnt(),t),r(Ynt(),t),r($nt(),t)}(x6)),x6}var yg={},vOe=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",vG=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;function x3(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x3=function(r){return typeof r}:x3=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},x3(t)}var Znt=10,AOe=2;function TOe(t){return $F(t,[])}function $F(t,e){switch(x3(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":eit(t,e);default:return String(t)}}function eit(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),n=nit(t);if(n!==void 0){var i=n.call(t);if(i!==t)return typeof i=="string"?i:$F(i,r)}else if(Array.isArray(t))return rit(t,r);return tit(t,r)}function tit(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>AOe)return"["+iit(t)+"]";var n=r.map(function(i){var a=$F(t[i],e);return i+": "+a});return"{ "+n.join(", ")+" }"}function rit(t,e){if(t.length===0)return"[]";if(e.length>AOe)return"[Array]";for(var r=Math.min(Znt,t.length),n=t.length-r,i=[],a=0;a<r;++a)i.push($F(t[a],e));return n===1?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items")),"["+i.join(", ")+"]"}function nit(t){var e=t[String(vG)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function iit(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function E3(t,e){var r=!!t;if(!r)throw new Error(e)}const ait=function(e,r){return e instanceof r};function sit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oit(t,e,r){return e&&sit(t.prototype,e),t}var Dz=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof e=="string"||E3(0,"Body must be a string. Received: ".concat(TOe(e),".")),this.body=e,this.name=r,this.locationOffset=n,this.locationOffset.line>0||E3(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||E3(0,"column in locationOffset is 1-indexed and must be positive.")}return oit(t,[{key:vOe,get:function(){return"Source"}}]),t}();function uit(t){return ait(t,Dz)}function kN(t,e){for(var r=/\r\n|[\n\r]/g,n=1,i=e+1,a;(a=r.exec(t.body))&&a.index<e;)n+=1,i=e+1-(a.index+a[0].length);return{line:n,column:i}}function wOe(t){return Cz(t.source,kN(t.source,t.start))}function Cz(t,e){var r=t.locationOffset.column-1,n=I3(r)+t.body,i=e.line-1,a=t.locationOffset.line-1,s=e.line+a,o=e.line===1?r:0,c=e.column+o,u="".concat(t.name,":").concat(s,":").concat(c,`
`),l=n.split(/\r\n|[\n\r]/g),d=l[i];if(d.length>120){for(var f=Math.floor(c/80),h=c%80,p=[],_=0;_<d.length;_+=80)p.push(d.slice(_,_+80));return u+Nie([["".concat(s),p[0]]].concat(p.slice(1,f+1).map(function(g){return["",g]}),[[" ",I3(h-1)+"^"],["",p[f+1]]]))}return u+Nie([["".concat(s-1),l[i-1]],["".concat(s),d],["",I3(c-1)+"^"],["".concat(s+1),l[i+1]]])}function Nie(t){var e=t.filter(function(n){n[0];var i=n[1];return i!==void 0}),r=Math.max.apply(Math,e.map(function(n){var i=n[0];return i.length}));return e.map(function(n){var i=n[0],a=n[1];return cit(r,i)+(a?" | "+a:" |")}).join(`
`)}function I3(t){return Array(t+1).join(" ")}function cit(t,e){return I3(t-e.length)+e}var xt=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),lt=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function O3(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O3=function(r){return typeof r}:O3=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},O3(t)}function lit(t){return O3(t)=="object"&&t!==null}function R3(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R3=function(r){return typeof r}:R3=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R3(t)}function Fie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dit(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fie(Object(r),!0).forEach(function(n){fit(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fie(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fit(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _it(t,e,r){return e&&pit(t.prototype,e),t}function mit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&DI(t,e)}function git(t){var e=xOe();return function(){var n=CI(t),i;if(e){var a=CI(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return SOe(this,i)}}function SOe(t,e){return e&&(R3(e)==="object"||typeof e=="function")?e:yE(t)}function yE(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AG(t){var e=typeof Map=="function"?new Map:void 0;return AG=function(n){if(n===null||!yit(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return P3(n,arguments,CI(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),DI(i,n)},AG(t)}function P3(t,e,r){return xOe()?P3=Reflect.construct:P3=function(i,a,s){var o=[null];o.push.apply(o,a);var c=Function.bind.apply(i,o),u=new c;return s&&DI(u,s.prototype),u},P3.apply(null,arguments)}function xOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function yit(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function DI(t,e){return DI=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},DI(t,e)}function CI(t){return CI=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},CI(t)}var bit=function(t){mit(r,t);var e=git(r);function r(n,i,a,s,o,c,u){var l,d,f,h;hit(this,r),h=e.call(this,n),h.name="GraphQLError",h.originalError=c??void 0,h.nodes=Mie(Array.isArray(i)?i:i?[i]:void 0);for(var p=[],_=0,g=(m=h.nodes)!==null&&m!==void 0?m:[];_<g.length;_++){var m,y=g[_],v=y.loc;v!=null&&p.push(v)}p=Mie(p),h.source=a??((l=p)===null||l===void 0?void 0:l[0].source),h.positions=s??((d=p)===null||d===void 0?void 0:d.map(function(T){return T.start})),h.locations=s&&a?s.map(function(T){return kN(a,T)}):(f=p)===null||f===void 0?void 0:f.map(function(T){return kN(T.source,T.start)}),h.path=o??void 0;var A=c==null?void 0:c.extensions;return u==null&&lit(A)?h.extensions=dit({},A):h.extensions=u??{},Object.defineProperties(yE(h),{message:{enumerable:!0},locations:{enumerable:h.locations!=null},path:{enumerable:h.path!=null},extensions:{enumerable:h.extensions!=null&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(yE(h),"stack",{value:c.stack,writable:!0,configurable:!0}),SOe(h)):(Error.captureStackTrace?Error.captureStackTrace(yE(h),r):Object.defineProperty(yE(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return _it(r,[{key:"toString",value:function(){return vit(this)}},{key:"toJSON",value:function(){return Ait(this)}},{key:vOe,get:function(){return"Object"}}]),r}(AG(Error));function Mie(t){return t===void 0||t.length===0?void 0:t}function vit(t){var e=t.message;if(t.nodes)for(var r=0,n=t.nodes;r<n.length;r++){var i=n[r];i.loc&&(e+=`

`+wOe(i.loc))}else if(t.source&&t.locations)for(var a=0,s=t.locations;a<s.length;a++){var o=s[a];e+=`

`+Cz(t.source,o)}return e}function Ait(t){var e;t||E3(0,"Received null or undefined error.");var r=(e=t.message)!==null&&e!==void 0?e:"An unknown error occurred.",n=t.locations,i=t.path,a=t.extensions;return a&&Object.keys(a).length>0?{message:r,locations:n,path:i,extensions:a}:{message:r,locations:n,path:i}}function Da(t,e,r){return new bit("Syntax Error: ".concat(r),void 0,t,[e])}function Tit(t,e){var r=!!t;if(!r)throw new Error("Unexpected invariant triggered.")}function EOe(t){var e=t.prototype.toJSON;typeof e=="function"||Tit(0),t.prototype.inspect=e,vG&&(t.prototype[vG]=e)}var Lz=function(){function t(r,n,i){this.start=r.start,this.end=n.end,this.startToken=r,this.endToken=n,this.source=i}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();EOe(Lz);var pn=function(){function t(r,n,i,a,s,o,c){this.kind=r,this.start=n,this.end=i,this.line=a,this.column=s,this.value=c,this.prev=o,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();EOe(pn);function Die(t){return t!=null&&typeof t.kind=="string"}function wit(t){var e=t.split(/\r\n|[\n\r]/g),r=Sit(t);if(r!==0)for(var n=1;n<e.length;n++)e[n]=e[n].slice(r);for(var i=0;i<e.length&&Cie(e[i]);)++i;for(var a=e.length;a>i&&Cie(e[a-1]);)--a;return e.slice(i,a).join(`
`)}function Cie(t){for(var e=0;e<t.length;++e)if(t[e]!==" "&&t[e]!=="	")return!1;return!0}function Sit(t){for(var e,r=!0,n=!0,i=0,a=null,s=0;s<t.length;++s)switch(t.charCodeAt(s)){case 13:t.charCodeAt(s+1)===10&&++s;case 10:r=!1,n=!0,i=0;break;case 9:case 32:++i;break;default:n&&!r&&(a===null||i<a)&&(a=i),n=!1}return(e=a)!==null&&e!==void 0?e:0}function xit(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t.indexOf(`
`)===-1,i=t[0]===" "||t[0]==="	",a=t[t.length-1]==='"',s=t[t.length-1]==="\\",o=!n||a||s||r,c="";return o&&!(n&&i)&&(c+=`
`+e),c+=e?t.replace(/\n/g,`
`+e):t,o&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var IOe=function(){function t(r){var n=new pn(lt.SOF,0,0,0,0,null);this.source=r,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},e.lookahead=function(){var n=this.token;if(n.kind!==lt.EOF)do{var i;n=(i=n.next)!==null&&i!==void 0?i:n.next=Iit(this,n)}while(n.kind===lt.COMMENT);return n},t}();function Eit(t){return t===lt.BANG||t===lt.DOLLAR||t===lt.AMP||t===lt.PAREN_L||t===lt.PAREN_R||t===lt.SPREAD||t===lt.COLON||t===lt.EQUALS||t===lt.AT||t===lt.BRACKET_L||t===lt.BRACKET_R||t===lt.BRACE_L||t===lt.PIPE||t===lt.BRACE_R}function vf(t){return isNaN(t)?lt.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function Iit(t,e){for(var r=t.source,n=r.body,i=n.length,a=e.end;a<i;){var s=n.charCodeAt(a),o=t.line,c=1+a-t.lineStart;switch(s){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++t.line,t.lineStart=a;continue;case 13:n.charCodeAt(a+1)===10?a+=2:++a,++t.line,t.lineStart=a;continue;case 33:return new pn(lt.BANG,a,a+1,o,c,e);case 35:return Rit(r,a,o,c,e);case 36:return new pn(lt.DOLLAR,a,a+1,o,c,e);case 38:return new pn(lt.AMP,a,a+1,o,c,e);case 40:return new pn(lt.PAREN_L,a,a+1,o,c,e);case 41:return new pn(lt.PAREN_R,a,a+1,o,c,e);case 46:if(n.charCodeAt(a+1)===46&&n.charCodeAt(a+2)===46)return new pn(lt.SPREAD,a,a+3,o,c,e);break;case 58:return new pn(lt.COLON,a,a+1,o,c,e);case 61:return new pn(lt.EQUALS,a,a+1,o,c,e);case 64:return new pn(lt.AT,a,a+1,o,c,e);case 91:return new pn(lt.BRACKET_L,a,a+1,o,c,e);case 93:return new pn(lt.BRACKET_R,a,a+1,o,c,e);case 123:return new pn(lt.BRACE_L,a,a+1,o,c,e);case 124:return new pn(lt.PIPE,a,a+1,o,c,e);case 125:return new pn(lt.BRACE_R,a,a+1,o,c,e);case 34:return n.charCodeAt(a+1)===34&&n.charCodeAt(a+2)===34?Fit(r,a,o,c,e,t):Nit(r,a,o,c,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Pit(r,a,s,o,c,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Dit(r,a,o,c,e)}throw Da(r,a,Oit(s))}var u=t.line,l=1+a-t.lineStart;return new pn(lt.EOF,i,i,u,l,e)}function Oit(t){return t<32&&t!==9&&t!==10&&t!==13?"Cannot contain the invalid character ".concat(vf(t),"."):t===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(vf(t),".")}function Rit(t,e,r,n,i){var a=t.body,s,o=e;do s=a.charCodeAt(++o);while(!isNaN(s)&&(s>31||s===9));return new pn(lt.COMMENT,e,o,r,n,i,a.slice(e+1,o))}function Pit(t,e,r,n,i,a){var s=t.body,o=r,c=e,u=!1;if(o===45&&(o=s.charCodeAt(++c)),o===48){if(o=s.charCodeAt(++c),o>=48&&o<=57)throw Da(t,c,"Invalid number, unexpected digit after 0: ".concat(vf(o),"."))}else c=O6(t,c,o),o=s.charCodeAt(c);if(o===46&&(u=!0,o=s.charCodeAt(++c),c=O6(t,c,o),o=s.charCodeAt(c)),(o===69||o===101)&&(u=!0,o=s.charCodeAt(++c),(o===43||o===45)&&(o=s.charCodeAt(++c)),c=O6(t,c,o),o=s.charCodeAt(c)),o===46||Cit(o))throw Da(t,c,"Invalid number, expected digit but got: ".concat(vf(o),"."));return new pn(u?lt.FLOAT:lt.INT,e,c,n,i,a,s.slice(e,c))}function O6(t,e,r){var n=t.body,i=e,a=r;if(a>=48&&a<=57){do a=n.charCodeAt(++i);while(a>=48&&a<=57);return i}throw Da(t,i,"Invalid number, expected digit but got: ".concat(vf(a),"."))}function Nit(t,e,r,n,i){for(var a=t.body,s=e+1,o=s,c=0,u="";s<a.length&&!isNaN(c=a.charCodeAt(s))&&c!==10&&c!==13;){if(c===34)return u+=a.slice(o,s),new pn(lt.STRING,e,s+1,r,n,i,u);if(c<32&&c!==9)throw Da(t,s,"Invalid character within String: ".concat(vf(c),"."));if(++s,c===92){switch(u+=a.slice(o,s-1),c=a.charCodeAt(s),c){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+=`
`;break;case 114:u+="\r";break;case 116:u+="	";break;case 117:{var l=Mit(a.charCodeAt(s+1),a.charCodeAt(s+2),a.charCodeAt(s+3),a.charCodeAt(s+4));if(l<0){var d=a.slice(s+1,s+5);throw Da(t,s,"Invalid character escape sequence: \\u".concat(d,"."))}u+=String.fromCharCode(l),s+=4;break}default:throw Da(t,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++s,o=s}}throw Da(t,s,"Unterminated string.")}function Fit(t,e,r,n,i,a){for(var s=t.body,o=e+3,c=o,u=0,l="";o<s.length&&!isNaN(u=s.charCodeAt(o));){if(u===34&&s.charCodeAt(o+1)===34&&s.charCodeAt(o+2)===34)return l+=s.slice(c,o),new pn(lt.BLOCK_STRING,e,o+3,r,n,i,wit(l));if(u<32&&u!==9&&u!==10&&u!==13)throw Da(t,o,"Invalid character within String: ".concat(vf(u),"."));u===10?(++o,++a.line,a.lineStart=o):u===13?(s.charCodeAt(o+1)===10?o+=2:++o,++a.line,a.lineStart=o):u===92&&s.charCodeAt(o+1)===34&&s.charCodeAt(o+2)===34&&s.charCodeAt(o+3)===34?(l+=s.slice(c,o)+'"""',o+=4,c=o):++o}throw Da(t,o,"Unterminated string.")}function Mit(t,e,r,n){return QR(t)<<12|QR(e)<<8|QR(r)<<4|QR(n)}function QR(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function Dit(t,e,r,n,i){for(var a=t.body,s=a.length,o=e+1,c=0;o!==s&&!isNaN(c=a.charCodeAt(o))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++o;return new pn(lt.NAME,e,o,r,n,i,a.slice(e,o))}function Cit(t){return t===95||t>=65&&t<=90||t>=97&&t<=122}var OOe=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Lit(t,e){var r=new jz(t,e);return r.parseDocument()}function jit(t,e){var r=new jz(t,e);r.expectToken(lt.SOF);var n=r.parseValueLiteral(!1);return r.expectToken(lt.EOF),n}function Bit(t,e){var r=new jz(t,e);r.expectToken(lt.SOF);var n=r.parseTypeReference();return r.expectToken(lt.EOF),n}var jz=function(){function t(r,n){var i=uit(r)?r:new Dz(r);this._lexer=new IOe(i),this._options=n}var e=t.prototype;return e.parseName=function(){var n=this.expectToken(lt.NAME);return{kind:xt.NAME,value:n.value,loc:this.loc(n)}},e.parseDocument=function(){var n=this._lexer.token;return{kind:xt.DOCUMENT,definitions:this.many(lt.SOF,this.parseDefinition,lt.EOF),loc:this.loc(n)}},e.parseDefinition=function(){if(this.peek(lt.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(lt.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(lt.BRACE_L))return{kind:xt.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var i=this.parseOperationType(),a;return this.peek(lt.NAME)&&(a=this.parseName()),{kind:xt.OPERATION_DEFINITION,operation:i,name:a,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseOperationType=function(){var n=this.expectToken(lt.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},e.parseVariableDefinitions=function(){return this.optionalMany(lt.PAREN_L,this.parseVariableDefinition,lt.PAREN_R)},e.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:xt.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(lt.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(lt.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},e.parseVariable=function(){var n=this._lexer.token;return this.expectToken(lt.DOLLAR),{kind:xt.VARIABLE,name:this.parseName(),loc:this.loc(n)}},e.parseSelectionSet=function(){var n=this._lexer.token;return{kind:xt.SELECTION_SET,selections:this.many(lt.BRACE_L,this.parseSelection,lt.BRACE_R),loc:this.loc(n)}},e.parseSelection=function(){return this.peek(lt.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var n=this._lexer.token,i=this.parseName(),a,s;return this.expectOptionalToken(lt.COLON)?(a=i,s=this.parseName()):s=i,{kind:xt.FIELD,alias:a,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(lt.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(n){var i=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(lt.PAREN_L,i,lt.PAREN_R)},e.parseArgument=function(){var n=this._lexer.token,i=this.parseName();return this.expectToken(lt.COLON),{kind:xt.ARGUMENT,name:i,value:this.parseValueLiteral(!1),loc:this.loc(n)}},e.parseConstArgument=function(){var n=this._lexer.token;return{kind:xt.ARGUMENT,name:this.parseName(),value:(this.expectToken(lt.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},e.parseFragment=function(){var n=this._lexer.token;this.expectToken(lt.SPREAD);var i=this.expectOptionalKeyword("on");return!i&&this.peek(lt.NAME)?{kind:xt.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:xt.INLINE_FRAGMENT,typeCondition:i?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseFragmentDefinition=function(){var n,i=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:xt.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}:{kind:xt.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},e.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(n){var i=this._lexer.token;switch(i.kind){case lt.BRACKET_L:return this.parseList(n);case lt.BRACE_L:return this.parseObject(n);case lt.INT:return this._lexer.advance(),{kind:xt.INT,value:i.value,loc:this.loc(i)};case lt.FLOAT:return this._lexer.advance(),{kind:xt.FLOAT,value:i.value,loc:this.loc(i)};case lt.STRING:case lt.BLOCK_STRING:return this.parseStringLiteral();case lt.NAME:switch(this._lexer.advance(),i.value){case"true":return{kind:xt.BOOLEAN,value:!0,loc:this.loc(i)};case"false":return{kind:xt.BOOLEAN,value:!1,loc:this.loc(i)};case"null":return{kind:xt.NULL,loc:this.loc(i)};default:return{kind:xt.ENUM,value:i.value,loc:this.loc(i)}}case lt.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},e.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:xt.STRING,value:n.value,block:n.kind===lt.BLOCK_STRING,loc:this.loc(n)}},e.parseList=function(n){var i=this,a=this._lexer.token,s=function(){return i.parseValueLiteral(n)};return{kind:xt.LIST,values:this.any(lt.BRACKET_L,s,lt.BRACKET_R),loc:this.loc(a)}},e.parseObject=function(n){var i=this,a=this._lexer.token,s=function(){return i.parseObjectField(n)};return{kind:xt.OBJECT,fields:this.any(lt.BRACE_L,s,lt.BRACE_R),loc:this.loc(a)}},e.parseObjectField=function(n){var i=this._lexer.token,a=this.parseName();return this.expectToken(lt.COLON),{kind:xt.OBJECT_FIELD,name:a,value:this.parseValueLiteral(n),loc:this.loc(i)}},e.parseDirectives=function(n){for(var i=[];this.peek(lt.AT);)i.push(this.parseDirective(n));return i},e.parseDirective=function(n){var i=this._lexer.token;return this.expectToken(lt.AT),{kind:xt.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(i)}},e.parseTypeReference=function(){var n=this._lexer.token,i;return this.expectOptionalToken(lt.BRACKET_L)?(i=this.parseTypeReference(),this.expectToken(lt.BRACKET_R),i={kind:xt.LIST_TYPE,type:i,loc:this.loc(n)}):i=this.parseNamedType(),this.expectOptionalToken(lt.BANG)?{kind:xt.NON_NULL_TYPE,type:i,loc:this.loc(n)}:i},e.parseNamedType=function(){var n=this._lexer.token;return{kind:xt.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},e.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===lt.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},e.peekDescription=function(){return this.peek(lt.STRING)||this.peek(lt.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("schema");var a=this.parseDirectives(!0),s=this.many(lt.BRACE_L,this.parseOperationTypeDefinition,lt.BRACE_R);return{kind:xt.SCHEMA_DEFINITION,description:i,directives:a,operationTypes:s,loc:this.loc(n)}},e.parseOperationTypeDefinition=function(){var n=this._lexer.token,i=this.parseOperationType();this.expectToken(lt.COLON);var a=this.parseNamedType();return{kind:xt.OPERATION_TYPE_DEFINITION,operation:i,type:a,loc:this.loc(n)}},e.parseScalarTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("scalar");var a=this.parseName(),s=this.parseDirectives(!0);return{kind:xt.SCALAR_TYPE_DEFINITION,description:i,name:a,directives:s,loc:this.loc(n)}},e.parseObjectTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("type");var a=this.parseName(),s=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:xt.OBJECT_TYPE_DEFINITION,description:i,name:a,interfaces:s,directives:o,fields:c,loc:this.loc(n)}},e.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var i=[];this.expectOptionalToken(lt.AMP);do i.push(this.parseNamedType());while(this.expectOptionalToken(lt.AMP)||this.peek(lt.NAME));return i}return this.delimitedMany(lt.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(lt.BRACE_L)&&this._lexer.lookahead().kind===lt.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(lt.BRACE_L,this.parseFieldDefinition,lt.BRACE_R)},e.parseFieldDefinition=function(){var n=this._lexer.token,i=this.parseDescription(),a=this.parseName(),s=this.parseArgumentDefs();this.expectToken(lt.COLON);var o=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:xt.FIELD_DEFINITION,description:i,name:a,arguments:s,type:o,directives:c,loc:this.loc(n)}},e.parseArgumentDefs=function(){return this.optionalMany(lt.PAREN_L,this.parseInputValueDef,lt.PAREN_R)},e.parseInputValueDef=function(){var n=this._lexer.token,i=this.parseDescription(),a=this.parseName();this.expectToken(lt.COLON);var s=this.parseTypeReference(),o;this.expectOptionalToken(lt.EQUALS)&&(o=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:xt.INPUT_VALUE_DEFINITION,description:i,name:a,type:s,defaultValue:o,directives:c,loc:this.loc(n)}},e.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("interface");var a=this.parseName(),s=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:xt.INTERFACE_TYPE_DEFINITION,description:i,name:a,interfaces:s,directives:o,fields:c,loc:this.loc(n)}},e.parseUnionTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("union");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseUnionMemberTypes();return{kind:xt.UNION_TYPE_DEFINITION,description:i,name:a,directives:s,types:o,loc:this.loc(n)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(lt.EQUALS)?this.delimitedMany(lt.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("enum");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();return{kind:xt.ENUM_TYPE_DEFINITION,description:i,name:a,directives:s,values:o,loc:this.loc(n)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(lt.BRACE_L,this.parseEnumValueDefinition,lt.BRACE_R)},e.parseEnumValueDefinition=function(){var n=this._lexer.token,i=this.parseDescription(),a=this.parseName(),s=this.parseDirectives(!0);return{kind:xt.ENUM_VALUE_DEFINITION,description:i,name:a,directives:s,loc:this.loc(n)}},e.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("input");var a=this.parseName(),s=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();return{kind:xt.INPUT_OBJECT_TYPE_DEFINITION,description:i,name:a,directives:s,fields:o,loc:this.loc(n)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(lt.BRACE_L,this.parseInputValueDef,lt.BRACE_R)},e.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===lt.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},e.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var i=this.parseDirectives(!0),a=this.optionalMany(lt.BRACE_L,this.parseOperationTypeDefinition,lt.BRACE_R);if(i.length===0&&a.length===0)throw this.unexpected();return{kind:xt.SCHEMA_EXTENSION,directives:i,operationTypes:a,loc:this.loc(n)}},e.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var i=this.parseName(),a=this.parseDirectives(!0);if(a.length===0)throw this.unexpected();return{kind:xt.SCALAR_TYPE_EXTENSION,name:i,directives:a,loc:this.loc(n)}},e.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var i=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(a.length===0&&s.length===0&&o.length===0)throw this.unexpected();return{kind:xt.OBJECT_TYPE_EXTENSION,name:i,interfaces:a,directives:s,fields:o,loc:this.loc(n)}},e.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var i=this.parseName(),a=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(a.length===0&&s.length===0&&o.length===0)throw this.unexpected();return{kind:xt.INTERFACE_TYPE_EXTENSION,name:i,interfaces:a,directives:s,fields:o,loc:this.loc(n)}},e.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var i=this.parseName(),a=this.parseDirectives(!0),s=this.parseUnionMemberTypes();if(a.length===0&&s.length===0)throw this.unexpected();return{kind:xt.UNION_TYPE_EXTENSION,name:i,directives:a,types:s,loc:this.loc(n)}},e.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var i=this.parseName(),a=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();if(a.length===0&&s.length===0)throw this.unexpected();return{kind:xt.ENUM_TYPE_EXTENSION,name:i,directives:a,values:s,loc:this.loc(n)}},e.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var i=this.parseName(),a=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();if(a.length===0&&s.length===0)throw this.unexpected();return{kind:xt.INPUT_OBJECT_TYPE_EXTENSION,name:i,directives:a,fields:s,loc:this.loc(n)}},e.parseDirectiveDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("directive"),this.expectToken(lt.AT);var a=this.parseName(),s=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:xt.DIRECTIVE_DEFINITION,description:i,name:a,arguments:s,repeatable:o,locations:c,loc:this.loc(n)}},e.parseDirectiveLocations=function(){return this.delimitedMany(lt.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var n=this._lexer.token,i=this.parseName();if(OOe[i.value]!==void 0)return i;throw this.unexpected(n)},e.loc=function(n){var i;if(((i=this._options)===null||i===void 0?void 0:i.noLocation)!==!0)return new Lz(n,this._lexer.lastToken,this._lexer.source)},e.peek=function(n){return this._lexer.token.kind===n},e.expectToken=function(n){var i=this._lexer.token;if(i.kind===n)return this._lexer.advance(),i;throw Da(this._lexer.source,i.start,"Expected ".concat(ROe(n),", found ").concat(R6(i),"."))},e.expectOptionalToken=function(n){var i=this._lexer.token;if(i.kind===n)return this._lexer.advance(),i},e.expectKeyword=function(n){var i=this._lexer.token;if(i.kind===lt.NAME&&i.value===n)this._lexer.advance();else throw Da(this._lexer.source,i.start,'Expected "'.concat(n,'", found ').concat(R6(i),"."))},e.expectOptionalKeyword=function(n){var i=this._lexer.token;return i.kind===lt.NAME&&i.value===n?(this._lexer.advance(),!0):!1},e.unexpected=function(n){var i=n??this._lexer.token;return Da(this._lexer.source,i.start,"Unexpected ".concat(R6(i),"."))},e.any=function(n,i,a){this.expectToken(n);for(var s=[];!this.expectOptionalToken(a);)s.push(i.call(this));return s},e.optionalMany=function(n,i,a){if(this.expectOptionalToken(n)){var s=[];do s.push(i.call(this));while(!this.expectOptionalToken(a));return s}return[]},e.many=function(n,i,a){this.expectToken(n);var s=[];do s.push(i.call(this));while(!this.expectOptionalToken(a));return s},e.delimitedMany=function(n,i){this.expectOptionalToken(n);var a=[];do a.push(i.call(this));while(this.expectOptionalToken(n));return a},t}();function R6(t){var e=t.value;return ROe(t.kind)+(e!=null?' "'.concat(e,'"'):"")}function ROe(t){return Eit(t)?'"'.concat(t,'"'):t}var qit={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},rp=Object.freeze({});function POe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qit,n=void 0,i=Array.isArray(t),a=[t],s=-1,o=[],c=void 0,u=void 0,l=void 0,d=[],f=[],h=t;do{s++;var p=s===a.length,_=p&&o.length!==0;if(p){if(u=f.length===0?void 0:d[d.length-1],c=l,l=f.pop(),_){if(i)c=c.slice();else{for(var g={},m=0,y=Object.keys(c);m<y.length;m++){var v=y[m];g[v]=c[v]}c=g}for(var A=0,T=0;T<o.length;T++){var S=o[T][0],P=o[T][1];i&&(S-=A),i&&P===null?(c.splice(S,1),A++):c[S]=P}}s=n.index,a=n.keys,o=n.edits,i=n.inArray,n=n.prev}else{if(u=l?i?s:a[s]:void 0,c=l?l[u]:h,c==null)continue;l&&d.push(u)}var j=void 0;if(!Array.isArray(c)){if(!Die(c))throw new Error("Invalid AST Node: ".concat(TOe(c),"."));var F=zN(e,c.kind,p);if(F){if(j=F.call(e,c,u,l,d,f),j===rp)break;if(j===!1){if(!p){d.pop();continue}}else if(j!==void 0&&(o.push([u,j]),!p))if(Die(j))c=j;else{d.pop();continue}}}if(j===void 0&&_&&o.push([u,c]),p)d.pop();else{var N;n={inArray:i,index:s,keys:a,edits:o,prev:n},i=Array.isArray(c),a=i?c:(N=r[c.kind])!==null&&N!==void 0?N:[],s=-1,o=[],l&&f.push(l),l=c}}while(n!==void 0);return o.length!==0&&(h=o[o.length-1][1]),h}function Uit(t){var e=new Array(t.length);return{enter:function(n){for(var i=0;i<t.length;i++)if(e[i]==null){var a=zN(t[i],n.kind,!1);if(a){var s=a.apply(t[i],arguments);if(s===!1)e[i]=n;else if(s===rp)e[i]=rp;else if(s!==void 0)return s}}},leave:function(n){for(var i=0;i<t.length;i++)if(e[i]==null){var a=zN(t[i],n.kind,!0);if(a){var s=a.apply(t[i],arguments);if(s===rp)e[i]=rp;else if(s!==void 0&&s!==!1)return s}}else e[i]===n&&(e[i]=null)}}}function zN(t,e,r){var n=t[e];if(n){if(!r&&typeof n=="function")return n;var i=r?n.leave:n.enter;if(typeof i=="function")return i}else{var a=r?t.leave:t.enter;if(a){if(typeof a=="function")return a;var s=a[e];if(typeof s=="function")return s}}}function Vit(t){return POe(t,{leave:Hit})}var Git=80,Hit={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return qt(e.definitions,`

`)+`
`},OperationDefinition:function(e){var r=e.operation,n=e.name,i=hn("(",qt(e.variableDefinitions,", "),")"),a=qt(e.directives," "),s=e.selectionSet;return!n&&!a&&!i&&r==="query"?s:qt([r,qt([n,i]),a,s]," ")},VariableDefinition:function(e){var r=e.variable,n=e.type,i=e.defaultValue,a=e.directives;return r+": "+n+hn(" = ",i)+hn(" ",qt(a," "))},SelectionSet:function(e){var r=e.selections;return Ms(r)},Field:function(e){var r=e.alias,n=e.name,i=e.arguments,a=e.directives,s=e.selectionSet,o=hn("",r,": ")+n,c=o+hn("(",qt(i,", "),")");return c.length>Git&&(c=o+hn(`(
`,N3(qt(i,`
`)),`
)`)),qt([c,qt(a," "),s]," ")},Argument:function(e){var r=e.name,n=e.value;return r+": "+n},FragmentSpread:function(e){var r=e.name,n=e.directives;return"..."+r+hn(" ",qt(n," "))},InlineFragment:function(e){var r=e.typeCondition,n=e.directives,i=e.selectionSet;return qt(["...",hn("on ",r),qt(n," "),i]," ")},FragmentDefinition:function(e){var r=e.name,n=e.typeCondition,i=e.variableDefinitions,a=e.directives,s=e.selectionSet;return"fragment ".concat(r).concat(hn("(",qt(i,", "),")")," ")+"on ".concat(n," ").concat(hn("",qt(a," ")," "))+s},IntValue:function(e){var r=e.value;return r},FloatValue:function(e){var r=e.value;return r},StringValue:function(e,r){var n=e.value,i=e.block;return i?xit(n,r==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var r=e.value;return r?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var r=e.value;return r},ListValue:function(e){var r=e.values;return"["+qt(r,", ")+"]"},ObjectValue:function(e){var r=e.fields;return"{"+qt(r,", ")+"}"},ObjectField:function(e){var r=e.name,n=e.value;return r+": "+n},Directive:function(e){var r=e.name,n=e.arguments;return"@"+r+hn("(",qt(n,", "),")")},NamedType:function(e){var r=e.name;return r},ListType:function(e){var r=e.type;return"["+r+"]"},NonNullType:function(e){var r=e.type;return r+"!"},SchemaDefinition:Fs(function(t){var e=t.directives,r=t.operationTypes;return qt(["schema",qt(e," "),Ms(r)]," ")}),OperationTypeDefinition:function(e){var r=e.operation,n=e.type;return r+": "+n},ScalarTypeDefinition:Fs(function(t){var e=t.name,r=t.directives;return qt(["scalar",e,qt(r," ")]," ")}),ObjectTypeDefinition:Fs(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return qt(["type",e,hn("implements ",qt(r," & ")),qt(n," "),Ms(i)]," ")}),FieldDefinition:Fs(function(t){var e=t.name,r=t.arguments,n=t.type,i=t.directives;return e+(Lie(r)?hn(`(
`,N3(qt(r,`
`)),`
)`):hn("(",qt(r,", "),")"))+": "+n+hn(" ",qt(i," "))}),InputValueDefinition:Fs(function(t){var e=t.name,r=t.type,n=t.defaultValue,i=t.directives;return qt([e+": "+r,hn("= ",n),qt(i," ")]," ")}),InterfaceTypeDefinition:Fs(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return qt(["interface",e,hn("implements ",qt(r," & ")),qt(n," "),Ms(i)]," ")}),UnionTypeDefinition:Fs(function(t){var e=t.name,r=t.directives,n=t.types;return qt(["union",e,qt(r," "),n&&n.length!==0?"= "+qt(n," | "):""]," ")}),EnumTypeDefinition:Fs(function(t){var e=t.name,r=t.directives,n=t.values;return qt(["enum",e,qt(r," "),Ms(n)]," ")}),EnumValueDefinition:Fs(function(t){var e=t.name,r=t.directives;return qt([e,qt(r," ")]," ")}),InputObjectTypeDefinition:Fs(function(t){var e=t.name,r=t.directives,n=t.fields;return qt(["input",e,qt(r," "),Ms(n)]," ")}),DirectiveDefinition:Fs(function(t){var e=t.name,r=t.arguments,n=t.repeatable,i=t.locations;return"directive @"+e+(Lie(r)?hn(`(
`,N3(qt(r,`
`)),`
)`):hn("(",qt(r,", "),")"))+(n?" repeatable":"")+" on "+qt(i," | ")}),SchemaExtension:function(e){var r=e.directives,n=e.operationTypes;return qt(["extend schema",qt(r," "),Ms(n)]," ")},ScalarTypeExtension:function(e){var r=e.name,n=e.directives;return qt(["extend scalar",r,qt(n," ")]," ")},ObjectTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,a=e.fields;return qt(["extend type",r,hn("implements ",qt(n," & ")),qt(i," "),Ms(a)]," ")},InterfaceTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,a=e.fields;return qt(["extend interface",r,hn("implements ",qt(n," & ")),qt(i," "),Ms(a)]," ")},UnionTypeExtension:function(e){var r=e.name,n=e.directives,i=e.types;return qt(["extend union",r,qt(n," "),i&&i.length!==0?"= "+qt(i," | "):""]," ")},EnumTypeExtension:function(e){var r=e.name,n=e.directives,i=e.values;return qt(["extend enum",r,qt(n," "),Ms(i)]," ")},InputObjectTypeExtension:function(e){var r=e.name,n=e.directives,i=e.fields;return qt(["extend input",r,qt(n," "),Ms(i)]," ")}};function Fs(t){return function(e){return qt([e.description,t(e)],`
`)}}function qt(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(n){return n}).join(r))!==null&&e!==void 0?e:""}function Ms(t){return hn(`{
`,N3(qt(t,`
`)),`
}`)}function hn(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+r:""}function N3(t){return hn("  ",t.replace(/\n/g,`
  `))}function kit(t){return t.indexOf(`
`)!==-1}function Lie(t){return t!=null&&t.some(kit)}function zit(t){return NOe(t)||FOe(t)||DOe(t)}function NOe(t){return t.kind===xt.OPERATION_DEFINITION||t.kind===xt.FRAGMENT_DEFINITION}function Qit(t){return t.kind===xt.FIELD||t.kind===xt.FRAGMENT_SPREAD||t.kind===xt.INLINE_FRAGMENT}function Wit(t){return t.kind===xt.VARIABLE||t.kind===xt.INT||t.kind===xt.FLOAT||t.kind===xt.STRING||t.kind===xt.BOOLEAN||t.kind===xt.NULL||t.kind===xt.ENUM||t.kind===xt.LIST||t.kind===xt.OBJECT}function Kit(t){return t.kind===xt.NAMED_TYPE||t.kind===xt.LIST_TYPE||t.kind===xt.NON_NULL_TYPE}function FOe(t){return t.kind===xt.SCHEMA_DEFINITION||MOe(t)||t.kind===xt.DIRECTIVE_DEFINITION}function MOe(t){return t.kind===xt.SCALAR_TYPE_DEFINITION||t.kind===xt.OBJECT_TYPE_DEFINITION||t.kind===xt.INTERFACE_TYPE_DEFINITION||t.kind===xt.UNION_TYPE_DEFINITION||t.kind===xt.ENUM_TYPE_DEFINITION||t.kind===xt.INPUT_OBJECT_TYPE_DEFINITION}function DOe(t){return t.kind===xt.SCHEMA_EXTENSION||COe(t)}function COe(t){return t.kind===xt.SCALAR_TYPE_EXTENSION||t.kind===xt.OBJECT_TYPE_EXTENSION||t.kind===xt.INTERFACE_TYPE_EXTENSION||t.kind===xt.UNION_TYPE_EXTENSION||t.kind===xt.ENUM_TYPE_EXTENSION||t.kind===xt.INPUT_OBJECT_TYPE_EXTENSION}const Xit=Object.freeze(Object.defineProperty({__proto__:null,BREAK:rp,DirectiveLocation:OOe,Kind:xt,Lexer:IOe,Location:Lz,Source:Dz,Token:pn,TokenKind:lt,getLocation:kN,getVisitFn:zN,isDefinitionNode:zit,isExecutableDefinitionNode:NOe,isSelectionNode:Qit,isTypeDefinitionNode:MOe,isTypeExtensionNode:COe,isTypeNode:Kit,isTypeSystemDefinitionNode:FOe,isTypeSystemExtensionNode:DOe,isValueNode:Wit,parse:Lit,parseType:Bit,parseValue:jit,print:Vit,printLocation:wOe,printSourceLocation:Cz,visit:POe,visitInParallel:Uit},Symbol.toStringTag,{value:"Module"})),Jit=Pl(Xit);var bg={},P6={},vg={},N6={},hu={},jie;function Yit(){if(jie)return hu;jie=1,Object.defineProperty(hu,"__esModule",{value:!0}),hu.removeDotSegmentsOfPath=hu.removeDotSegments=hu.resolve=void 0;function t(i,a){a=a||"";const s=a.indexOf("#");if(s>0&&(a=a.substr(0,s)),!i.length){if(a.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${a}' for value '${i}'`);return a}if(i.startsWith("?")){const h=a.indexOf("?");return h>0&&(a=a.substr(0,h)),a+i}if(i.startsWith("#"))return a+i;if(!a.length){const h=i.indexOf(":");if(h<0)throw new Error(`Found invalid relative IRI '${i}' for a missing baseIRI`);return r(i,h)}const o=i.indexOf(":");if(o>=0)return r(i,o);const c=a.indexOf(":");if(c<0)throw new Error(`Found invalid baseIRI '${a}' for value '${i}'`);const u=a.substr(0,c+1);if(i.indexOf("//")===0)return u+r(i,o);let l;if(a.indexOf("//",c)===c+1){if(l=a.indexOf("/",c+3),l<0)return a.length>c+3?a+"/"+r(i,o):u+r(i,o)}else if(l=a.indexOf("/",c+1),l<0)return u+r(i,o);if(i.indexOf("/")===0)return a.substr(0,l)+e(i);let d=a.substr(l);const f=d.lastIndexOf("/");return f>=0&&f<d.length-1&&(d=d.substr(0,f+1),i[0]==="."&&i[1]!=="."&&i[1]!=="/"&&i[2]&&(i=i.substr(1))),i=d+i,i=e(i),a.substr(0,l)+i}hu.resolve=t;function e(i){const a=[];let s=0;for(;s<i.length;)switch(i[s]){case"/":if(i[s+1]===".")if(i[s+2]==="."){if(!n(i[s+3])){a.push([]),s++;break}a.pop(),i[s+3]||a.push([]),s+=3}else{if(!n(i[s+2])){a.push([]),s++;break}i[s+2]||a.push([]),s+=2}else a.push([]),s++;break;case"#":case"?":a.length||a.push([]),a[a.length-1].push(i.substr(s)),s=i.length;break;default:a.length||a.push([]),a[a.length-1].push(i[s]),s++;break}return"/"+a.map(o=>o.join("")).join("/")}hu.removeDotSegments=e;function r(i,a){let s=a+1;a>=0?i[a+1]==="/"&&i[a+2]==="/"&&(s=a+3):i[0]==="/"&&i[1]==="/"&&(s=2);const o=i.indexOf("/",s);if(o<0)return i;const c=i.substr(0,o),u=i.substr(o);return c+e(u)}hu.removeDotSegmentsOfPath=r;function n(i){return!i||i==="#"||i==="?"||i==="/"}return hu}var Bie;function Bn(){return Bie||(Bie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Yit(),t)}(N6)),N6}var F6={},qie;function ZF(){return qie||(qie=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class e extends Error{constructor(n,i){super(n),this.code=i}}t.ErrorCoded=e,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))}(F6)),F6}var Ag={},M6,Uie;function AO(){if(Uie)return M6;Uie=1;var t=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r=/\s|\uFEFF|\xA0/,n=/\r?\n[\x20\x09]+/g,i=/[;,"]/,a=/[;,"]|\s/,s=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,o={IDLE:1,URI:2,ATTR:4};function c(p){return p.replace(e,"")}function u(p){return r.test(p)}function l(p,_){for(;u(p[_]);)_++;return _}function d(p){return a.test(p)||!s.test(p)}function f(p,_){return Object.keys(p).length===Object.keys(_).length&&Object.keys(p).every(g=>g in _&&p[g]===_[g])}class h{constructor(_){this.refs=[],_&&this.parse(_)}rel(_){for(var g=[],m=_.toLowerCase(),y=0;y<this.refs.length;y++)typeof this.refs[y].rel=="string"&&this.refs[y].rel.toLowerCase()===m&&g.push(this.refs[y]);return g}get(_,g){_=_.toLowerCase(),g=g.toLowerCase();for(var m=[],y=0;y<this.refs.length;y++)typeof this.refs[y][_]=="string"&&this.refs[y][_].toLowerCase()===g&&m.push(this.refs[y]);return m}set(_){return this.refs.push(_),this}setUnique(_){return this.refs.some(g=>f(g,_))||this.refs.push(_),this}has(_,g){_=_.toLowerCase(),g=g.toLowerCase();for(var m=0;m<this.refs.length;m++)if(typeof this.refs[m][_]=="string"&&this.refs[m][_].toLowerCase()===g)return!0;return!1}parse(_,v){v=v||0,_=v?_.slice(v):_,_=c(_).replace(n,"");for(var m=o.IDLE,y=_.length,v=0,A=null;v<y;)if(m===o.IDLE){if(u(_[v])){v++;continue}else if(_[v]==="<"){A!=null&&(A.rel!=null?this.refs.push(...h.expandRelations(A)):this.refs.push(A));var T=_.indexOf(">",v);if(T===-1)throw new Error("Expected end of URI delimiter at offset "+v);A={uri:_.slice(v+1,T)},v=T,m=o.URI}else throw new Error('Unexpected character "'+_[v]+'" at offset '+v);v++}else if(m===o.URI)if(u(_[v])){v++;continue}else if(_[v]===";")m=o.ATTR,v++;else if(_[v]===",")m=o.IDLE,v++;else throw new Error('Unexpected character "'+_[v]+'" at offset '+v);else if(m===o.ATTR){if(_[v]===";"||u(_[v])){v++;continue}var T=_.indexOf("=",v);T===-1&&(T=_.indexOf(";",v)),T===-1&&(T=_.length);var S=c(_.slice(v,T)).toLowerCase(),P="";if(v=T+1,v=l(_,v),_[v]==='"')for(v++;v<y;){if(_[v]==='"'){v++;break}_[v]==="\\"&&v++,P+=_[v],v++}else{for(var T=v+1;!i.test(_[T])&&T<y;)T++;P=_.slice(v,T),v=T}switch(A[S]&&h.isSingleOccurenceAttr(S)||(S[S.length-1]==="*"?A[S]=h.parseExtendedValue(P):(P=S==="type"?P.toLowerCase():P,A[S]!=null?Array.isArray(A[S])?A[S].push(P):A[S]=[A[S],P]:A[S]=P)),_[v]){case",":m=o.IDLE;break;case";":m=o.ATTR;break}v++}else throw new Error('Unknown parser state "'+m+'"');return A!=null&&(A.rel!=null?this.refs.push(...h.expandRelations(A)):this.refs.push(A)),A=null,this}toString(){for(var _=[],g="",m=null,y=0;y<this.refs.length;y++)m=this.refs[y],g=Object.keys(this.refs[y]).reduce(function(v,A){return A==="uri"?v:v+"; "+h.formatAttribute(A,m[A])},"<"+m.uri+">"),_.push(g);return _.join(", ")}}return h.isCompatibleEncoding=function(p){return t.test(p)},h.parse=function(p,_){return new h().parse(p,_)},h.isSingleOccurenceAttr=function(p){return p==="rel"||p==="type"||p==="media"||p==="title"||p==="title*"},h.isTokenAttr=function(p){return p==="rel"||p==="type"||p==="anchor"},h.escapeQuotes=function(p){return p.replace(/"/g,'\\"')},h.expandRelations=function(p){var _=p.rel.split(" ");return _.map(function(g){var m=Object.assign({},p);return m.rel=g,m})},h.parseExtendedValue=function(p){var _=/([^']+)?(?:'([^']*)')?(.+)/.exec(p);return{language:_[2].toLowerCase(),encoding:h.isCompatibleEncoding(_[1])?null:_[1].toLowerCase(),value:h.isCompatibleEncoding(_[1])?decodeURIComponent(_[3]):_[3]}},h.formatExtendedAttribute=function(p,_){var g=(_.encoding||"utf-8").toUpperCase(),m=_.language||"en",y="";return Buffer.isBuffer(_.value)&&h.isCompatibleEncoding(g)?y=_.value.toString(g):Buffer.isBuffer(_.value)?y=_.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):y=encodeURIComponent(_.value),p+"="+g+"'"+m+"'"+y},h.formatAttribute=function(p,_){return Array.isArray(_)?_.map(g=>h.formatAttribute(p,g)).join("; "):p[p.length-1]==="*"||typeof _!="string"?h.formatExtendedAttribute(p,_):(h.isTokenAttr(p)?_=d(_)?'"'+h.escapeQuotes(_)+'"':h.escapeQuotes(_):d(_)&&(_=encodeURIComponent(_),_=_.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),_='"'+_+'"'),p+"="+_)},M6=h,M6}var Vie;function LOe(){if(Vie)return Ag;Vie=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.FetchDocumentLoader=void 0;const t=ZF(),e=AO(),r=Bn();class n{constructor(a){this.fetcher=a}async load(a){const s=await(this.fetcher||fetch)(a,{headers:new Headers({accept:"application/ld+json"})});if(s.ok&&s.headers){let o=s.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await s.json();if(s.headers.has("Link")){let c;if(s.headers.forEach((u,l)=>{if(l==="link"){const d=(0,e.parse)(u);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+a);c=(0,r.resolve)(f.uri,a)}}}),c)return this.load(c)}throw new t.ErrorCoded(`Unsupported JSON-LD media type ${o}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(s.statusText||`Status code: ${s.status}`)}}return Ag.FetchDocumentLoader=n,Ag}var D6={},Tg={},Gie;function Bz(){if(Gie)return Tg;Gie=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.Util=void 0;class t{static isCompactIri(r){return r.indexOf(":")>0&&!(r&&r[0]==="#")}static getPrefix(r,n){if(r&&r[0]==="#")return null;const i=r.indexOf(":");if(i>=0){if(r.length>i+1&&r.charAt(i+1)==="/"&&r.charAt(i+2)==="/")return null;const a=r.substr(0,i);if(a==="_")return null;if(n[a])return a}return null}static getContextValueId(r){if(r===null||typeof r=="string")return r;const n=r["@id"];return n||null}static isSimpleTermDefinitionPrefix(r,n){return!t.isPotentialKeyword(r)&&(n.allowPrefixNonGenDelims||typeof r=="string"&&(r[0]==="_"||t.isPrefixIriEndingWithGenDelim(r)))}static isPotentialKeyword(r){return typeof r=="string"&&t.KEYWORD_REGEX.test(r)}static isPrefixIriEndingWithGenDelim(r){return t.ENDS_WITH_GEN_DELIM.test(r)}static isPrefixValue(r){return r&&(typeof r=="string"||r&&typeof r=="object")}static isValidIri(r){return!!(r&&t.IRI_REGEX.test(r))}static isValidIriWeak(r){return!!r&&r[0]!==":"&&t.IRI_REGEX_WEAK.test(r)}static isValidKeyword(r){return t.VALID_KEYWORDS[r]}static isTermProtected(r,n){const i=r[n];return typeof i!="string"&&i&&i["@protected"]}static hasProtectedTerms(r){for(const n of Object.keys(r))if(t.isTermProtected(r,n))return!0;return!1}static isReservedInternalKeyword(r){return r.startsWith("@__")}static deepEqual(r,n){const i=Object.keys(r),a=Object.keys(n);return i.length!==a.length?!1:i.every(s=>{const o=r[s],c=n[s];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}}return t.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,t.IRI_REGEX_WEAK=/(?::[^:])|\//,t.KEYWORD_REGEX=/^@[a-z]+$/i,t.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,t.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,t.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,t.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},t.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],t.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],t.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],t.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],t.CONTAINERS_1_0=["@list","@set","@index"],Tg.Util=t,Tg}var Hie;function jOe(){return Hie||(Hie=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const e=Bn(),r=ZF(),n=Bz();class i{constructor(s){this.contextRaw=s}getContextRaw(){return this.contextRaw}expandTerm(s,o,c=t.defaultExpandOptions){const u=this.contextRaw[s];if(u===null||u&&u["@id"]===null)return null;let l=!0;if(u&&o){const g=n.Util.getContextValueId(u);if(g&&g!==s)if(typeof g!="string"||!n.Util.isValidIri(g)&&!n.Util.isValidKeyword(g))n.Util.isPotentialKeyword(g)||(l=!1);else return g}const d=n.Util.getPrefix(s,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],_=n.Util.isPotentialKeyword(s);if(d){const g=this.contextRaw[d],m=n.Util.getContextValueId(g);if(m){if(typeof g=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,c))return s}else if(m[0]!=="_"&&!_&&!g["@prefix"]&&!(s in this.contextRaw))return s;return m+s.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!_&&!n.Util.isCompactIri(s))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,e.resolve)(f,p):"")+s;throw new r.ErrorCoded(`Relative vocab expansion for term '${s}' with vocab '${f}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+s;else if(!o&&p&&!_&&!n.Util.isCompactIri(s))return(0,e.resolve)(s,p);if(l)return s;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${s}': '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(s,o){if(o&&this.contextRaw["@vocab"]&&s.startsWith(this.contextRaw["@vocab"]))return s.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&s.startsWith(this.contextRaw["@base"]))return s.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:s};for(const u in this.contextRaw){const l=this.contextRaw[u];if(l&&!n.Util.isPotentialKeyword(u)){const d=n.Util.getContextValueId(l);if(s.startsWith(d)){const f=s.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=u,c.suffix=f);else if(o)return u}}}return c.prefix?c.prefix+":"+c.suffix:s}}t.JsonLdContextNormalized=i,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(D6)),D6}var kie;function $it(){if(kie)return vg;kie=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.ContextParser=void 0;const t=Bn(),e=ZF(),r=LOe(),n=jOe(),i=Bz();class a{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new r.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,u){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,u);if(!i.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,u);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!i.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let u=o[c];if(u&&typeof u=="object"&&u["@reverse"]&&!u["@id"]){if(typeof u["@reverse"]!="string"||i.Util.isValidKeyword(u["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${u["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);u=o[c]=Object.assign(Object.assign({},u),{"@id":u["@reverse"]}),u["@id"]=u["@reverse"],i.Util.isPotentialKeyword(u["@reverse"])?delete u["@reverse"]:u["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,u){const l=o.getContextRaw();for(const d of u||Object.keys(l))if(i.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!i.Util.isReservedInternalKeyword(d)){const f=l[d];if(i.Util.isPotentialKeyword(d)&&i.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(i.Util.ALIAS_RANGE_BLACKLIST.indexOf(i.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&i.Util.isPotentialKeyword(i.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;i.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const _=h["@id"],g=h["@type"],m=!("@prefix"in h)||i.Util.isValidIri(d);if("@id"in h)_!=null&&typeof _=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(_,!0)}),p=p||_!==l[d]["@id"]);else if(!i.Util.isPotentialKeyword(d)&&m){const y=o.expandTerm(d,!0);y!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":y}),p=!0)}if(g&&typeof g=="string"&&g!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&m){let y=o.expandTerm(g,!0);c&&g===y&&(y=o.expandTerm(g,!1)),y!==g&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":y}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:u}){if(u||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const u=o[c];if(u&&typeof u=="object"){if(typeof u["@container"]=="string")o[c]=Object.assign(Object.assign({},u),{"@container":{[u["@container"]]:!0}});else if(Array.isArray(u["@container"])){const l={};for(const d of u["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},u),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},u){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!i.Util.isReservedInternalKeyword(l)&&!i.Util.isPotentialKeyword(l)&&!i.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},i.Util.isSimpleTermDefinitionPrefix(d,u)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,u,l){for(const d of l??Object.keys(c))if(i.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!i.Util.deepEqual(o[d],c[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(i.Util.getContextValueId(o[d]))} to ${JSON.stringify(i.Util.getContextValueId(c[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const u of Object.keys(o)){if(i.Util.isReservedInternalKeyword(u))continue;if(u==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${u}': '${JSON.stringify(o[u])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[u],d=typeof l;if(i.Util.isPotentialKeyword(u)){switch(u.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[u]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&a.validateLanguage(l,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${l}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&a.validateDirection(l,!0);break;case"propagate":if(c===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${l}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(i.Util.isValidKeyword(u)&&i.Util.isValidKeyword(i.Util.getContextValueId(l)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${i.Util.getContextValueId(l)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(i.Util.getPrefix(l,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(l==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!i.Util.isCompactIri(u)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(i.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(h==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.getPrefix(h,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!i.Util.isValidIri(h)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${u}':'${h}' and '${l["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||i.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${Object.keys(h)}') in 1.0, must be only one of ${i.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(i.Util.CONTAINERS.indexOf(p)<0)throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${p}'), must be one of ${i.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":a.validateLanguage(h,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":a.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!i.Util.isValidIri(u))throw new e.ErrorCoded(`Invalid @prefix definition for '${u}' ('${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(i.Util.isPotentialKeyword(h)&&h!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${u}': '${l}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,u){return typeof o=="string"||(u&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!i.Util.isValidIri(o["@base"])&&(o["@base"]=(0,t.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!i.Util.isValidIri(o))try{o=(0,t.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,u){for(const l of u??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},u={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=a.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:_,minimalProcessing:g}=c,m=c.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!_&&d&&i.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const y=this.normalizeContextIri(o,l),v=this.getOverriddenLoad(y,c);if(v)return new n.JsonLdContextNormalized(v);const A=await this.parse(await this.load(y),Object.assign(Object.assign({},c),{baseIRI:y,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[y]:!0})}));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(Array.isArray(o)){const y=[],v=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const P=this.normalizeContextIri(T,l);y[S]=P;const j=this.getOverriddenLoad(P,c);return j||this.load(P)}else return T}));if(g)return new n.JsonLdContextNormalized(v);const A=await v.reduce((T,S,P)=>T.then(j=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:y[P]||c.baseIRI,external:!!y[P]||c.external,parentContext:j.getContextRaw(),remoteContexts:y[P]?Object.assign(Object.assign({},m),{[y[P]]:!0}):m}),{skipValidation:P<v.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(typeof o=="object"){if("@context"in o){if(c!=null&&c.disallowDirectlyNestedContext)throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping @context to ${JSON.stringify(o["@context"])}`,e.ERROR_CODES.KEYWORD_REDEFINITION);return await this.parse(o["@context"],c)}if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),g)return new n.JsonLdContextNormalized(o);let y={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);y=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(y,{processingMode:h},n.defaultExpandOptions);const v=Object.assign(y,o);this.idifyReverseTerms(v),this.normalize(v,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(v,{processingMode:h},n.defaultExpandOptions);const A=Object.keys(v),T=[];if(typeof d=="object")for(const P in d)P in v?T.push(P):v[P]=d[P];await this.parseInnerContexts(v,c,A);const S=new n.JsonLdContextNormalized(v);return(v&&v["@version"]||a.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?v["@vocab"]=d["@vocab"]+o["@vocab"]:(i.Util.isCompactIri(o["@vocab"])||o["@vocab"]in v)&&(v["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,A),!_&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,v,n.defaultExpandOptions,T),this.validateContext&&!u.skipValidation&&this.validate(v,{processingMode:h}),S}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let u;try{u=await this.documentLoader.load(o)}catch(l){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in u))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=u["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return a.DEFAULT_PROCESSING_MODE=1.1,vg.ContextParser=a,vg}var C6={},zie;function Zit(){return zie||(zie=1,Object.defineProperty(C6,"__esModule",{value:!0})),C6}var L6={},Qie;function eat(){return Qie||(Qie=1,Object.defineProperty(L6,"__esModule",{value:!0})),L6}var Wie;function tat(){return Wie||(Wie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r($it(),t),r(ZF(),t),r(LOe(),t),r(Zit(),t),r(eat(),t),r(jOe(),t),r(Bz(),t)}(P6)),P6}var Kie;function BOe(){if(Kie)return bg;Kie=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.Util=void 0;const t=jr(),e=tat(),r=zu();class n{constructor(a){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=a,this.dataFactory=a.dataFactory||new t.DataFactory,this.operationFactory=new r.AlgebraFactory(this.dataFactory),this.contextParser=new e.ContextParser}registerNodeHandler(a){this.nodeHandlers[a.targetKind]=a}registerNodeValueHandler(a){this.nodeValueHandlers[a.targetKind]=a}registerDirectiveNodeHandler(a){this.directiveNodeHandlers[a.targetKind]=a}handleNode(a,s){const o=this.nodeHandlers[a.kind];if(!o)throw new Error(`Unsupported GraphQL node '${a.kind}'`);return o.handle(a,s)}handleNodeValue(a,s,o){const c=this.nodeValueHandlers[a.kind];if(!c)throw new Error(`Unsupported GraphQL value node '${a.kind}'`);return c.handle(a,s,o)}handleDirectiveNode(a,s){const o=this.directiveNodeHandlers[a.directive.name.value];return o?o.handle(a,s):null}joinOperations(a){if(a.length===1)return a[0];const s=[],o=[];for(const c of a)c.type==="bgp"?s.push(c):o.push(c);if(s.length===a.length)return this.joinOperationsAsBgp(s);if(s.length===a.length-1&&o[0].type==="leftjoin"&&o[0].input[0].type==="bgp"){const c=o[0];return s.push(c.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(s),c.input[1])}else return o.length===a.length?this.joinOperationsAsNestedJoin(o):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(s),this.joinOperationsAsNestedJoin(o)])}joinOperationsAsBgp(a){return this.operationFactory.createBgp([].concat.apply([],a.map(s=>s.patterns)))}joinOperationsAsNestedJoin(a){return this.operationFactory.createJoin(a)}appendFieldToPath(a,s){return a.concat([s])}getFieldLabel(a){return(a.alias?a.alias:a.name).value}nameToVariable(a,s){return this.dataFactory.variable((s.path.length?s.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+a)}valueToNamedNode(a,s){const o=s.expandTerm(a,!0);if(this.settings.requireContext&&!o)throw new Error("No context entry was found for "+a);return this.dataFactory.namedNode(o||a)}getArgument(a,s){if(a){for(const o of a)if(o.name.value===s)return o}}newTypePattern(a,s,o){return this.operationFactory.createPattern(a,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(s.name.value,o.context),o.graph)}createQuadPattern(a,s,o,c,u){const l=this.valueToNamedNode(s.value,u);return u&&u.getContextRaw()[s.value]&&u.getContextRaw()[s.value]["@reverse"]?this.operationFactory.createPattern(o,l,a,c):this.operationFactory.createPattern(a,l,o,c)}createQuadPath(a,s,o,c,u,l){const d=this.valueToNamedNode(s.value,l);let f=this.operationFactory.createLink(d);for(const h of o.values){if(h.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+h.kind);f=this.operationFactory.createAlt([f,this.operationFactory.createLink(this.valueToNamedNode(h.value,l))])}return l&&l.getContextRaw()[s.value]&&l.getContextRaw()[s.value]["@reverse"]?this.operationFactory.createPath(c,f,a,u):this.operationFactory.createPath(a,f,c,u)}}return bg.Util=n,bg}var Xie;function rat(){if(Xie)return yg;Xie=1;var t=E&&E.__awaiter||function(o,c,u,l){function d(f){return f instanceof u?f:new u(function(h){h(f)})}return new(u||(u=Promise))(function(f,h){function p(m){try{g(l.next(m))}catch(y){h(y)}}function _(m){try{g(l.throw(m))}catch(y){h(y)}}function g(m){m.done?f(m.value):d(m.value).then(p,_)}g((l=l.apply(o,c||[])).next())})};Object.defineProperty(yg,"__esModule",{value:!0}),yg.Converter=void 0;const e=Jit,r=bOe(),n=yOe(),i=vO(),a=BOe();class s{constructor(c){c=c||{},c.variableDelimiter=c.variableDelimiter||"_",c.expressionVariableCounter=c.expressionVariableCounter||0,this.util=new a.Util(c),this.initializeNodeHandlers(c)}static registerNodeHandlers(c,u){c.registerNodeHandler(new r.NodeHandlerDocument(c,u)),c.registerNodeHandler(new r.NodeHandlerDefinitionOperation(c,u)),c.registerNodeHandler(new r.NodeHandlerDefinitionFragment(c,u)),c.registerNodeHandler(new r.NodeHandlerSelectionFragmentSpread(c,u)),c.registerNodeHandler(new r.NodeHandlerSelectionInlineFragment(c,u)),c.registerNodeHandler(new r.NodeHandlerSelectionField(c,u))}static registerNodeValueHandlers(c,u){c.registerNodeValueHandler(new r.NodeValueHandlerVariable(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerInt(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerFloat(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerString(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerBoolean(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerNull(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerEnum(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerList(c,u)),c.registerNodeValueHandler(new r.NodeValueHandlerObject(c,u))}static registerDirectiveNodeHandlers(c,u){c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerInclude(c,u)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerOptional(c,u)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerPlural(c,u)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerSingle(c,u)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerSkip(c,u))}graphqlToSparqlAlgebra(c,u,l){return t(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(c,yield this.util.contextParser.parse(u),l)})}graphqlToSparqlAlgebraRawContext(c,u,l){l=l||{};const d=typeof c=="string"?(0,e.parse)(c):c,f=this.indexFragments(d),h={context:u,fragmentDefinitions:f,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:i.SingularizeState.PLURAL,singularizeVariables:l.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:l.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(d,h)}indexFragments(c){const u={},l=[];for(const d of c.definitions)d.kind==="FragmentDefinition"?u[d.name.value]=d:l.push(d);return c.definitions=l,u}initializeNodeHandlers(c){s.registerNodeHandlers(this.util,c),s.registerNodeValueHandlers(this.util,c),s.registerDirectiveNodeHandlers(this.util,c)}}return yg.Converter=s,yg}var j6={},Jie;function nat(){return Jie||(Jie=1,Object.defineProperty(j6,"__esModule",{value:!0})),j6}var Yie;function iat(){return Yie||(Yie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(bOe(),t),r(rat(),t),r(vO(),t),r(nat(),t),r(BOe(),t)}(S6)),S6}var $ie;function aat(){if($ie)return zm;$ie=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.ActorQueryParseGraphql=void 0;const t=cOe(),e=dt,r=ke(),n=iat();let i=class extends t.ActorQueryParse{constructor(o){super(o);k(this,"graphqlToSparql");this.graphqlToSparql=new n.Converter({requireContext:!0})}async test(o){var c;return((c=o.queryFormat)==null?void 0:c.language)!=="graphql"?(0,r.failTest)("This actor can only parse GraphQL queries"):(0,r.passTestVoid)()}async run(o){const c=o.context.get(e.KeysInitQuery.jsonLdContext)||{},u={singularizeVariables:o.context.get(e.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(o.query,c,u)}}};return zm.ActorQueryParseGraphql=i,zm}var Zie;function sat(){return Zie||(Zie=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(aat(),t)}(w6)),w6}var B6={},wg={},q6={},Sg={},eae;function oat(){if(eae)return Sg;eae=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.ActorQuerySerialize=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return Sg.ActorQuerySerialize=e,Sg}var tae;function uat(){return tae||(tae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(oat(),t)}(q6)),q6}var U6={},V6={},rae;function cat(){return rae||(rae=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Generator=t.sparql11GeneratorBuilder=void 0;const e=_r(),r=di();t.sparql11GeneratorBuilder=e.GeneratorBuilder.create([r.gram.queryOrUpdate,r.gram.query,r.gram.selectQuery,r.gram.constructQuery,r.gram.describeQuery,r.gram.askQuery,r.gram.selectClause]).addMany(r.gram.update,r.gram.update1,r.gram.load,r.gram.clear,r.gram.drop,r.gram.create,r.gram.copy,r.gram.move,r.gram.add,r.gram.insertData,r.gram.deleteData,r.gram.deleteWhere,r.gram.modify,r.gram.graphRef,r.gram.graphRefAll,r.gram.quads,r.gram.quadsNotTriples).addRule(r.gram.aggregate).addMany(r.gram.datasetClauseStar,r.gram.usingClauseStar).addMany(r.gram.argList,r.gram.expression,r.gram.iriOrFunction).addMany(r.gram.prologue,r.gram.prefixDecl,r.gram.baseDecl,r.gram.varOrTerm,r.gram.var_,r.gram.graphTerm).addMany(r.gram.rdfLiteral,r.gram.iri,r.gram.iriFull,r.gram.prefixedName,r.gram.blankNode).addRule(r.gram.pathGenerator).addMany(r.gram.solutionModifier,r.gram.groupClause,r.gram.havingClause,r.gram.orderClause,r.gram.limitOffsetClauses).addMany(r.gram.triplesBlock,r.gram.collectionPath,r.gram.blankNodePropertyListPath,r.gram.triplesNodePath,r.gram.graphNodePath).addMany(r.gram.whereClause,r.gram.generatePattern,r.gram.groupGraphPattern,r.gram.graphPatternNotTriples,r.gram.optionalGraphPattern,r.gram.graphGraphPattern,r.gram.serviceGraphPattern,r.gram.bind,r.gram.inlineData,r.gram.minusGraphPattern,r.gram.groupOrUnionGraphPattern,r.gram.filter);class n{constructor(a={}){k(this,"defaultContext");k(this,"generator",t.sparql11GeneratorBuilder.build());this.defaultContext=(0,r.completeGeneratorContext)(a)}generate(a,s={}){return this.generator.queryOrUpdate(a,{...this.defaultContext,...s}).trim()}generatePath(a,s={}){return this.generator.path(a,(0,r.completeGeneratorContext)({...this.defaultContext,...s}),void 0).trim()}}t.Generator=n}(V6)),V6}var nae;function lat(){return nae||(nae=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Generator=t.sparql12GeneratorBuilder=void 0;const e=_r(),r=cat(),n=bO();t.sparql12GeneratorBuilder=e.GeneratorBuilder.create(r.sparql11GeneratorBuilder).widenContext().typePatch().addRule(n.gram.tripleTerm).addRule(n.gram.reifiedTriple).patchRule(n.gram.graphNodePath).addRule(n.gram.annotationBlockPath).addRule(n.gram.annotationPath).addRule(n.gram.versionDecl).patchRule(n.gram.prologue).patchRule(n.gram.generateTriplesBlock).patchRule(n.gram.generateGraphTerm);class i{constructor(s={}){k(this,"defaultContext");k(this,"generator",t.sparql12GeneratorBuilder.build());this.defaultContext=(0,n.completeGeneratorContext)(s)}generate(s,o={}){return this.generator.queryOrUpdate(s,{...this.defaultContext,...o}).trim()}generatePath(s,o={}){return this.generator.path(s,{...this.defaultContext,...o},void 0).trim()}}t.Generator=i}(U6)),U6}var iae;function dat(){if(iae)return wg;iae=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.ActorQuerySerializeSparql=void 0;const t=uat(),e=ke(),r=dOe(),n=_r(),i=lat();let a=class extends t.ActorQuerySerialize{constructor(o){super(o)}async test(o){return o.queryFormat.language!=="sparql"?(0,e.failTest)("This actor can only serialize SPARQL queries"):(0,e.passTestVoid)()}async run(o){const c=new i.Generator({[n.traqulaIndentation]:o.newlines===!1?-1:0,indentInc:o.indentWidth??2}),u=(0,r.toAst)(o.operation);return{query:c.generate(u).trim()}}};return wg.ActorQuerySerializeSparql=a,wg}var aae;function fat(){return aae||(aae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(dat(),t)}(B6)),B6}var G6={},xg={},H6={},Eg={},k6={},Ig={},sae;function qOe(){if(sae)return Ig;sae=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.ActorAbstractMediaTyped=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}async run(n){if("handle"in n){const i=n;return{handle:await this.runHandle(i.handle,i.handleMediaType,n.context)}}if("mediaTypes"in n)return{mediaTypes:await this.getMediaTypes(n.context)};if("mediaTypeFormats"in n)return{mediaTypeFormats:await this.getMediaTypeFormats(n.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(n){if("handle"in n){const i=n;return(await this.testHandle(i.handle,i.handleMediaType,n.context)).map(a=>({handle:a}))}return"mediaTypes"in n?(await this.testMediaType(n.context)).map(i=>({mediaTypes:i})):"mediaTypeFormats"in n?(await this.testMediaTypeFormats(n.context)).map(i=>({mediaTypeFormats:i})):(0,t.failTest)("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}};return Ig.ActorAbstractMediaTyped=e,Ig}var Og={},oae;function hat(){if(oae)return Og;oae=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.ActorAbstractMediaTypedFixed=void 0;const t=ke(),e=qOe();let r=class extends e.ActorAbstractMediaTyped{constructor(a){super(a);k(this,"mediaTypePriorities");k(this,"mediaTypeFormats");k(this,"priorityScale");this.mediaTypePriorities=a.mediaTypePriorities,this.mediaTypeFormats=a.mediaTypeFormats,this.priorityScale=a.priorityScale;const s=this.priorityScale??1;if(this.mediaTypePriorities)for(const[o,[c,u]]of Object.entries(this.mediaTypePriorities).entries())this.mediaTypePriorities[c]=s*u;this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(a,s,o){return!s||!(s in this.mediaTypePriorities)?(0,t.failTest)(`Unrecognized media type: ${s}`):await this.testHandleChecked(a,o)}async testMediaType(a){return(0,t.passTestVoid)()}async getMediaTypes(a){return this.mediaTypePriorities}async testMediaTypeFormats(a){return(0,t.passTestVoid)()}async getMediaTypeFormats(a){return this.mediaTypeFormats}};return Og.ActorAbstractMediaTypedFixed=r,Og}var uae;function h0(){return uae||(uae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(qOe(),t),r(hat(),t)}(k6)),k6}var cae;function pat(){if(cae)return Eg;cae=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.ActorQueryResultSerialize=void 0;const t=h0();let e=class extends t.ActorAbstractMediaTyped{constructor(n){super(n)}};return Eg.ActorQueryResultSerialize=e,Eg}var Rg={},lae;function _at(){if(lae)return Rg;lae=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.ActorQueryResultSerializeFixedMediaTypes=void 0;const t=h0(),e=ke();let r=class extends t.ActorAbstractMediaTypedFixed{constructor(i){super(i)}async testHandleChecked(i,a){return(0,e.passTestVoid)()}};return Rg.ActorQueryResultSerializeFixedMediaTypes=r,Rg}var dae;function Ko(){return dae||(dae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(pat(),t),r(_at(),t)}(H6)),H6}var z6={},Pg={},fae;function mat(){if(fae)return Pg;fae=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.LinkedList=void 0;class t{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var r;return(r=this._head)===null||r===void 0?void 0:r.value}get last(){var r;return(r=this._tail)===null||r===void 0?void 0:r.value}get empty(){return this._head===null}push(r){const n={value:r,next:null};this._tail===null?this._head=this._tail=n:this._tail.next=this._tail=n,this._length++}shift(){if(this._head===null)return;const{value:r,next:n}=this._head;return this._head=n,n===null&&(this._tail=null),this._length--,r}clear(){this._length=0,this._head=this._tail=null}}return Pg.LinkedList=t,Pg}var Ng={};let Q6=1;const qz=new Map;let W6=!1,Uz,UOe=(t,...e)=>(qz.set(Q6,[t,e]),Uz(Q6),Q6++),Vz=t=>{qz.delete(t)};function Gz(t){if(W6)setTimeout(Gz,0,t);else{const e=qz.get(t);if(e){W6=!0;try{e[0](...e[1])}finally{Vz(t),W6=!1}}}}function gat(){const t=new MessageChannel;t.port1.onmessage=e=>{Gz(e.data)},Uz=e=>{t.port2.postMessage(e)}}function yat(){const t=`setImmediate$${Math.random()}$`;window.addEventListener("message",e=>{typeof e.data=="string"&&e.data.startsWith(t)&&Gz(+e.data.slice(t.length))}),Uz=e=>{window.postMessage(t+e,"*")}}const WR=typeof self>"u"?typeof global>"u"?void 0:global:self;WR.setImmediate?(UOe=WR.setImmediate,Vz=WR.clearImmediate):WR.importScripts?gat():yat();const bat=Object.freeze(Object.defineProperty({__proto__:null,get clearImmediate(){return Vz},get setImmediate(){return UOe}},Symbol.toStringTag,{value:"Module"})),vat=Pl(bat);var hae;function Aat(){if(hae)return Ng;hae=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.createTaskScheduler=void 0;const t=vat,e=Promise.resolve(void 0);function r(n=t.setImmediate){const i=typeof queueMicrotask=="function"?queueMicrotask:o=>e.then(o);let a=0,s=null;return o=>{s!==null?s.push(o):++a<100?i(o):(s=[o],n(()=>{for(const c of s)i(c);s=null,a=0}))}}return Ng.createTaskScheduler=r,Ng}var pae;function ir(){return pae||(pae=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isIterator=t.isIterable=t.isSourceExpression=t.isPromise=t.isEventEmitter=t.isFunction=t.range=t.union=t.fromIterable=t.fromIterator=t.fromArray=t.single=t.empty=t.wrap=t.WrappingIterator=t.ClonedIterator=t.UnionIterator=t.MultiTransformIterator=t.SimpleTransformIterator=t.TransformIterator=t.BufferedIterator=t.MappingIterator=t.DESTINATION=t.identity=t.IntegerIterator=t.ArrayIterator=t.SingletonIterator=t.EmptyIterator=t.AsyncIterator=t.DESTROYED=t.ENDED=t.CLOSED=t.CLOSING=t.OPEN=t.INIT=t.setTaskScheduler=t.getTaskScheduler=t.scheduleTask=t.LinkedList=void 0;const e=QI,r=mat();Object.defineProperty(t,"LinkedList",{enumerable:!0,get:function(){return r.LinkedList}});let i=Aat().createTaskScheduler();function a(Z){i(Z)}t.scheduleTask=a;function s(){return i}t.getTaskScheduler=s;function o(Z){i=Z}t.setTaskScheduler=o,t.INIT=1,t.OPEN=2,t.CLOSING=4,t.CLOSED=8,t.ENDED=16,t.DESTROYED=32;class c extends e.EventEmitter{constructor(q=t.OPEN){super(),this._readable=!1,this._state=q,this.on("newListener",u)}_changeState(q,J=!1){const re=q>this._state&&this._state<t.ENDED;return re&&(this._state=q,q===t.ENDED&&(J?i(()=>this.emit("end")):this.emit("end"))),re}read(){return null}forEach(q,J){this.on("data",Oe(q,J))}close(){this._changeState(t.CLOSED)&&this._endAsync()}destroy(q){this.done||this._destroy(q,J=>{q=q||J,q&&this.emit("error",q),this._end(!0)})}_destroy(q,J){J()}_end(q=!1){this._changeState(q?t.DESTROYED:t.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){i(()=>this._end())}get readable(){return this._readable}set readable(q){q=!!q&&!this.done,this._readable!==q&&(this._readable=q,q&&i(()=>this.emit("readable")))}get closed(){return this._state>=t.CLOSING}get ended(){return this._state===t.ENDED}get destroyed(){return this._state===t.DESTROYED}get done(){return this._state>=t.ENDED}toString(){const q=this._toStringDetails();return`[${this.constructor.name}${q?` ${q}`:""}]`}_toStringDetails(){return""}toArray(q){const J=[],re=typeof(q==null?void 0:q.limit)=="number"?q.limit:1/0;return this.ended||re<=0?Promise.resolve(J):new Promise((_e,he)=>{const ue=()=>_e(J),Ue=De=>{J.push(De),J.length>=re&&(this.removeListener("error",he),this.removeListener("data",Ue),this.removeListener("end",ue),_e(J))};this.on("error",he),this.on("data",Ue),this.on("end",ue)})}getProperty(q,J){const re=this._properties;if(!J)return re&&re[q];if(re&&q in re)i(()=>J(re[q]));else{let _e;(_e=this._propertyCallbacks)||(this._propertyCallbacks=_e=Object.create(null)),q in _e?_e[q].push(J):_e[q]=[J]}}setProperty(q,J){const re=this._properties||(this._properties=Object.create(null));re[q]=J;const _e=this._propertyCallbacks||{},he=_e[q];if(he){delete _e[q],i(()=>{for(const ue of he)ue(J)});for(q in _e)return;delete this._propertyCallbacks}}getProperties(){const q=this._properties,J={};for(const re in q)J[re]=q[re];return J}setProperties(q){for(const J in q)this.setProperty(J,q[J])}copyProperties(q,J){for(const re of J)q.getProperty(re,_e=>this.setProperty(re,_e))}transform(q){return new N(this,q)}map(q,J){return new m(this,Oe(q,J))}filter(q,J){return this.map(function(re){return q.call(J||this,re)?re:null})}uniq(q=g){const J=new Set;return this.filter(function(re){const _e=q.call(this,re);return J.has(_e)?!1:(J.add(_e),!0)})}prepend(q){return this.transform({prepend:q})}append(q){return this.transform({append:q})}surround(q,J){return this.transform({prepend:q,append:J})}skip(q){return this.map(J=>q-- >0?null:J)}take(q){return this.transform({limit:q})}range(q,J){return this.transform({offset:q,limit:Math.max(J-q+1,0)})}clone(){return new U(this)}[Symbol.asyncIterator](){const q=this;let J=null,re=null,_e=null;q.addListener("readable",he),q.addListener("end",he),q.addListener("error",ue);function he(){if(J!==null)if(_e!==null)ue(_e);else if(q.done)J({done:!0,value:void 0}),J=re=null,Ue();else{const De=q.read();De!==null&&(J({done:!1,value:De}),J=re=null)}}function ue(De){re!==null?(re(De),J=re=_e=null,Ue()):_e===null&&(_e=De)}function Ue(){q.removeListener("readable",he),q.removeListener("end",he),q.removeListener("error",ue)}return{next(){return new Promise((De,Je)=>{J=De,re=Je,he()})}}}}t.AsyncIterator=c;function u(Z){Z==="data"&&(this.removeListener("newListener",u),d(this,"readable",l),this.readable&&i(()=>l.call(this)))}function l(){let Z;for(;this.listenerCount("data")!==0&&(Z=this.read())!==null;)this.emit("data",Z);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",l),d(this,"newListener",u))}function d(Z,q,J){Z.listeners(q).includes(J)||Z.on(q,J)}class f extends c{constructor(){super(),this._changeState(t.ENDED,!0)}}t.EmptyIterator=f;class h extends c{constructor(q){super(),this._item=q,q===null?this.close():this.readable=!0}read(){const q=this._item;return this._item=null,this.close(),q}_toStringDetails(){return this._item===null?"":`(${this._item})`}}t.SingletonIterator=h;class p extends c{constructor(q=[],{autoStart:J=!0,preserve:re=!0}={}){super();const _e=re||!Array.isArray(q)?[...q]:q;this._index=0,this._sourceStarted=J!==!1,this._truncateThreshold=re?-1:64,this._sourceStarted&&_e.length===0?this.close():this._buffer=_e,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let q=null;return this._buffer&&(this._index<this._buffer.length&&(q=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),q}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(q,J){delete this._buffer,J()}toArray(q={}){if(!this._buffer)return Promise.resolve([]);const{length:J}=this._buffer,re=this._index,_e=typeof q.limit!="number"?J:re+q.limit,he=this._buffer.slice(re,_e);return this._index=_e,_e>=J&&this.close(),Promise.resolve(he)}}t.ArrayIterator=p;class _ extends c{constructor({start:q=0,step:J=1,end:re}={}){super(),Number.isFinite(q)&&(q=Math.trunc(q)),this._next=q,Number.isFinite(J)&&(J=Math.trunc(J)),this._step=J;const _e=J>=0,he=_e?1/0:-1/0;Number.isFinite(re)?re=Math.trunc(re):re!==-he&&(re=he),this._last=re,!Number.isFinite(q)||(_e?q>re:q<re)?this.close():this.readable=!0}read(){if(this.closed)return null;const q=this._next,J=this._step,re=this._last,_e=this._next+=J;return(J>=0?_e>re:_e<re)&&this.close(),q}_toStringDetails(){return`(${this._next}...${this._last})`}}t.IntegerIterator=_;function g(Z){return Z}t.identity=g,t.DESTINATION=Symbol("destination");class m extends c{constructor(q,J=g,re={}){super(),this._map=J,this._source=y(q),this._destroySource=re.destroySource!==!1,q.done?this.close():(this._source[t.DESTINATION]=this,this._source.on("end",P),this._source.on("error",S),this._source.on("readable",T),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let q,J;for(;(q=this._source.read())!==null;)if((J=this._map(q))!==null)return J}this.readable=!1,this._source.done&&this.close()}return null}_end(q){this._source.removeListener("end",P),this._source.removeListener("error",S),this._source.removeListener("readable",T),delete this._source[t.DESTINATION],this._destroySource&&this._source.destroy(),super._end(q)}}t.MappingIterator=m;function y(Z,q=!1){if(!Z||!ye(Z.read)||!ye(Z.on))throw new TypeError(`Invalid source: ${Z}`);if(!q&&Z[t.DESTINATION])throw new Error("The source already has a destination");return Z}class v extends c{constructor({maxBufferSize:q=4,autoStart:J=!0}={}){super(t.INIT),this._buffer=new r.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=q,i(()=>this._init(J)),this._sourceStarted=J!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(q){q!==1/0&&(q=Number.isFinite(q)?Math.max(Math.trunc(q),1):4),this._maxBufferSize!==q&&(this._maxBufferSize=q,this._state===t.OPEN&&this._fillBuffer())}_init(q){let J=!1;this._reading=!0,this._begin(()=>{if(J)throw new Error("done callback called multiple times");J=!0,this._reading=!1,this._changeState(t.OPEN),q?this._fillBufferAsync():this.readable=!0})}_begin(q){q()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const q=this._buffer;let J;return q.empty?(J=null,this.readable=!1):J=q.shift(),!this._reading&&q.length<this._maxBufferSize&&(this.closed?q.empty&&this._endAsync():this._fillBufferAsync()),J}_read(q,J){J()}_push(q){this.done||(this._pushedCount++,this._buffer.push(q),this.readable=!0)}_fillBuffer(){let q;this._reading||(this.closed?this._completeClose():(q=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(q,()=>{if(!q)throw new Error("done callback called multiple times");q=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,i(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(t.CLOSING):this._completeClose()}_completeClose(){this._changeState(t.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(q,J){this._buffer.clear(),J()}_flush(q){q()}_toStringDetails(){const q=this._buffer;return`{${q.empty?"":`next: ${q.first}, `}buffer: ${q.length}}`}}t.BufferedIterator=v;class A extends v{constructor(q,J=q||{}){super(J),this._boundPush=re=>this._push(re),ft(q)||(q=J.source),Me(q)?this.source=q:q&&(this._createSource=W(q)?()=>q:q,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!J.optional,this._destroySource=J.destroySource!==!1}get source(){return ye(this._createSource)&&this._loadSourceAsync(),this._source}set source(q){const J=this._source=this._validateSource(q);J[t.DESTINATION]=this,this.done?this._destroySource&&J.destroy():J.done?this.close():(J.on("end",j),J.on("readable",F),J.on("error",S))}_loadSourceAsync(){ye(this._createSource)&&(Promise.resolve(this._createSource()).then(q=>{delete this._createSource,this.source=q,this._fillBuffer()},q=>this.emit("error",q)),this._createSource=null)}_validateSource(q,J=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return y(q,J)}_read(q,J){const re=()=>{this._pushedCount<q&&!this.closed?i(()=>this._readAndTransform(re,J)):J()};this._readAndTransform(re,J)}_readAndTransform(q,J){let re;const _e=this.source;!_e||_e.done||(re=_e.read())===null?J():this._optional?this._optionalTransform(re,q):this._transform(re,q,this._boundPush)}_optionalTransform(q,J){const re=this._pushedCount;this._transform(q,()=>{re===this._pushedCount&&this._push(q),J()},this._boundPush)}_transform(q,J,re){re(q),J()}_closeWhenDone(){this.close()}_end(q){const J=this._source;J&&(J.removeListener("end",j),J.removeListener("error",S),J.removeListener("readable",F),delete J[t.DESTINATION],this._destroySource&&J.destroy()),super._end(q)}}t.TransformIterator=A;function T(){this[t.DESTINATION].readable=!0}function S(Z){this[t.DESTINATION].emit("error",Z)}function P(){this[t.DESTINATION].close()}function j(){this[t.DESTINATION]._closeWhenDone()}function F(){this[t.DESTINATION]._sourceStarted!==!1&&this[t.DESTINATION]._fillBuffer()}class N extends A{constructor(q,J){if(super(q,J),this._offset=0,this._limit=1/0,this._filter=re=>!0,J=J||(ft(q)?null:q),J){const re=ye(J)?J:J.transform,{limit:_e,offset:he,filter:ue,map:Ue,prepend:De,append:Je}=J;he===1/0||_e===-1/0?this._limit=0:(Number.isFinite(he)&&(this._offset=Math.max(Math.trunc(he),0)),Number.isFinite(_e)&&(this._limit=Math.max(Math.trunc(_e),0)),ye(ue)&&(this._filter=ue),ye(Ue)&&(this._map=Ue),this._transform=ye(re)?re:null),De&&(this._prepender=Me(De)?De:pe(De)),Je&&(this._appender=Me(Je)?Je:pe(Je))}}_read(q,J){const re=()=>this._readAndTransformSimple(q,_e,J);this._readAndTransformSimple(q,_e,J);function _e(){i(re)}}_readAndTransformSimple(q,J,re){let _e;const{source:he}=this;if(!he||he.done){re();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<q&&(_e=he.read())!==null;){if(!this._filter(_e)||this._offset!==0&&this._offset--)continue;const ue=typeof this._map>"u"?_e:this._map(_e);if(ue===null)this._optional&&this._push(_e);else if(!ye(this._transform))this._push(ue);else{this._optional?this._optionalTransform(ue,J):this._transform(ue,J,this._boundPush);return}--this._limit===0&&this.close()}re()}_begin(q){this._insert(this._prepender,q),delete this._prepender}_flush(q){this._insert(this._appender,q),delete this._appender}_insert(q,J){const re=he=>this._push(he);!q||q.done?J():(q.on("data",re),q.on("end",_e));function _e(){q.removeListener("data",re),q.removeListener("end",_e),J()}}}t.SimpleTransformIterator=N;class R extends A{constructor(q,J){if(super(q,J),this._transformerQueue=[],J){const re=ye(J)?J:J.multiTransform;re&&(this._createTransformer=re)}}_read(q,J){const re=this._transformerQueue,_e=this._optional;let he,ue;for(;(he=re[0])&&he.transformer.done;){_e&&he.item!==null&&(q--,this._push(he.item)),re.shift();const{transformer:De}=he;De.removeListener("end",F),De.removeListener("readable",F),De.removeListener("error",S)}const{source:Ue}=this;for(;Ue&&!Ue.done&&re.length<this.maxBufferSize&&(ue=Ue.read(),ue!==null);){const De=this._createTransformer(ue)||new f;De[t.DESTINATION]=this,De.on("end",F),De.on("readable",F),De.on("error",S),re.push({transformer:De,item:ue})}if(he=re[0],he){const{transformer:De}=he;for(;q-- >0&&(ue=De.read())!==null;)this._push(ue),_e&&(he.item=null)}else Ue&&Ue.done&&this.close();J()}_createTransformer(q){return new h(q)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(q){if(super._end(q),this._destroySource)for(const J of this._transformerQueue)J.transformer.destroy()}}t.MultiTransformIterator=R;class C extends v{constructor(q,J={}){super(J),this._sources=[],this._currentSource=-1;const re=J.autoStart!==!1;if(Me(q))q.on("error",_e=>this.emit("error",_e)),this._pending={loading:!1,sources:q},re&&this._loadSources();else if(Array.isArray(q)&&q.length>0)for(const _e of q)this._addSource(_e);else re&&this.close();this._destroySources=J.destroySources!==!1}_loadSources(){const q=this._pending.sources;this._pending.loading=!0,q.done?(delete this._pending,this.close()):(q.on("data",J=>{this._addSource(J),this._fillBufferAsync()}),q.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(q){W(q)&&(q=K(q)),q.done||(this._sources.push(q),q[t.DESTINATION]=this,q.on("error",S),q.on("readable",F),q.on("end",M))}_removeEmptySources(){this._sources=this._sources.filter((q,J)=>(q.done&&J<=this._currentSource&&this._currentSource--,!q.done)),this._fillBuffer()}_read(q,J){var re;((re=this._pending)===null||re===void 0?void 0:re.loading)===!1&&this._loadSources();let _e=0,he;for(;_e!==(_e=q);)for(let ue=0;ue<this._sources.length&&q>0;ue++)this._currentSource=(this._currentSource+1)%this._sources.length,(he=this._sources[this._currentSource].read())!==null&&(q--,this._push(he));!this._pending&&this._sources.length===0&&this.close(),J()}_end(q=!1){if(super._end(q),this._destroySources){for(const J of this._sources)J.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}t.UnionIterator=C;function M(){this[t.DESTINATION]._removeEmptySources()}class U extends A{constructor(q){super(q,{autoStart:!1}),this._readPosition=0,this._reading=!1,q&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(q){const J=this._source=this._validateSource(q),re=J&&J[t.DESTINATION]||(J[t.DESTINATION]=new B(J));this.done?this._destroySource&&J.destroy():re.endsAt(0)?this.close():(re.register(this),(J._sourceStarted===!1||re.readAt(0)!==null)&&(this.readable=!0));const _e=this._propertyCallbacks;for(const he in _e){const ue=_e[he];for(const Ue of ue)this._getSourceProperty(he,Ue)}}_validateSource(q,J=!1){const re=q&&q[t.DESTINATION];return super._validateSource(q,!re||re instanceof B)}getProperty(q,J){const{source:re}=this,_e=this._properties,he=_e&&q in _e;if(!J)return he?_e&&_e[q]:re&&re.getProperty(q);super.getProperty(q,J),re&&!he&&this._getSourceProperty(q,J)}_getSourceProperty(q,J){this.source.getProperty(q,re=>{(!this._properties||!(q in this._properties))&&J(re)})}getProperties(){const q=this.source?this.source.getProperties():{},J=this._properties;for(const re in J)q[re]=J[re];return q}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const q=this.source;let J=null;if(!this.done&&q){const re=q[t.DESTINATION];(J=re.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,re.endsAt(this._readPosition)&&this.close()}return J}_end(q){const J=this.source,re=J==null?void 0:J[t.DESTINATION];re&&re.unregister(this),v.prototype._end.call(this,q)}}t.ClonedIterator=U;class B{constructor(q){if(this._history=[],this._trackers=new Set,this._source=q,!q.done){const J=()=>{for(const he of this._trackers)he.readable=!0},re=he=>{for(const ue of this._trackers)ue.emit("error",he)},_e=()=>{for(const he of this._trackers)he._sourceStarted!==!1&&he._readPosition===this._history.length&&he.close();this._trackers.clear(),q.removeListener("end",_e),q.removeListener("error",re),q.removeListener("readable",J)};q.on("end",_e),q.on("error",re),q.on("readable",J)}}register(q){this._source.done||this._trackers.add(q)}unregister(q){this._trackers.delete(q)}readAt(q){let J=null;return q<this._history.length?J=this._history[q]:!this._source.done&&(J=this._source.read())!==null&&(this._history[q]=J),J}endsAt(q){return this._source.done&&this._history.length===q}}class G extends c{constructor(q,J){super(),this._source=null,this._destroySource=(J==null?void 0:J.destroySource)!==!1,W(q)?(this._source=new c,q.then(re=>{this._source=null,this.source=re}).catch(re=>this.emit("error",re))):q&&(this.source=q)}set source(q){let J=q;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(le(J)&&(J=J[Symbol.iterator]()),me(J)){let re=J;J=new e.EventEmitter,J.read=()=>{if(re!==null){let _e;for(;!(_e=re.next()).done;)if(_e.value!==null)return _e.value;re=null,this.close()}return null}}else J=y(J);if(this.done){this._destroySource&&ye(J.destroy)&&J.destroy();return}J[t.DESTINATION]=this,J.on("end",P),J.on("error",S),J.on("readable",T),this._source=J,this.readable=J.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const q=this._source.read();if(q!==null)return q;this.readable=!1}return null}_end(q=!1){this._source!==null&&(this._source.removeListener("end",P),this._source.removeListener("error",S),this._source.removeListener("readable",T),delete this._source[t.DESTINATION],this._destroySource&&ye(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(q)}}t.WrappingIterator=G;function K(Z,q){if(q&&("autoStart"in q||"optional"in q||"source"in q||"maxBufferSize"in q))return Z&&!Me(Z)&&(Z=new G(Z)),new A(Z,q);if(!Z)return $();if(W(Z))return new G(Z,q);if(Z instanceof c)return Z;if(Array.isArray(Z))return pe(Z);if(le(Z)||me(Z)||Me(Z))return new G(Z,q);throw new TypeError(`Invalid source: ${Z}`)}t.wrap=K;function $(){return new f}t.empty=$;function se(Z){return new h(Z)}t.single=se;function pe(Z){return new p(Z)}t.fromArray=pe;function we(Z){return new G(Z)}t.fromIterator=we;function Ce(Z){return new G(Z)}t.fromIterable=Ce;function Le(Z){return new C(Z)}t.union=Le;function Ie(Z,q,J){return new _({start:Z,end:q,step:J})}t.range=Ie;function Oe(Z,q){return q?Z.bind(q):Z}function ye(Z){return typeof Z=="function"}t.isFunction=ye;function Me(Z){return ye(Z==null?void 0:Z.on)}t.isEventEmitter=Me;function W(Z){return ye(Z==null?void 0:Z.then)}t.isPromise=W;function ft(Z){return Z&&(Me(Z)||W(Z)||ye(Z))}t.isSourceExpression=ft;function le(Z){return Z&&Symbol.iterator in Z}t.isIterable=le;function me(Z){return ye(Z==null?void 0:Z.next)}t.isIterator=me}(z6)),z6}var _ae;function Tat(){if(_ae)return xg;_ae=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.ActorQueryResultSerializeJson=void 0;const t=Ko(),e=ke(),r=ir(),n=Br(),i=Wt;let a=class extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,c){return["bindings","quads","boolean"].includes(o.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings or quad streams.")}async runHandle(o,c,u){const l=new i.Readable;if(l._read=()=>{},o.type==="bindings"||o.type==="quads"){let d=o.type==="bindings"?(0,r.wrap)(o.bindingsStream).map(h=>JSON.stringify(Object.fromEntries([...h].map(([p,_])=>[p.value,n.termToString(_)])))):(0,r.wrap)(o.quadStream).map(h=>JSON.stringify(n.quadToStringQuad(h))),f=!0;d=d.map(h=>{const p=`${f?"":","}
${h}`;return f=!1,p}).prepend(["["]).append([`
]
`]),l.wrap(d)}else try{l.push(`${JSON.stringify(await o.execute())}
`),l.push(null)}catch(d){setTimeout(()=>l.emit("error",d))}return{data:l}}};return xg.ActorQueryResultSerializeJson=a,xg}var mae;function wat(){return mae||(mae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tat(),t)}(G6)),G6}var K6={},Fg={},gae;function Sat(){if(gae)return Fg;gae=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.ActorQueryResultSerializeSimple=void 0;const t=Ko(),e=ke(),r=ir(),n=Br(),i=Wt;let a=class qh extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,c){return["bindings","quads","boolean","void"].includes(o.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings streams, quad streams, booleans, or updates.")}static termToString(o){return o.termType==="Quad"?(0,n.termToString)(o):o.value}async runHandle(o,c,u){const l=new i.Readable;return o.type==="bindings"?l.wrap(o.bindingsStream.map(d=>`${[...d].map(([f,h])=>`?${f.value}: ${qh.termToString(h)}`).join(`
`)}

`)):o.type==="quads"?l.wrap(o.quadStream.map(d=>`subject: ${qh.termToString(d.subject)}
predicate: ${qh.termToString(d.predicate)}
object: ${qh.termToString(d.object)}
graph: ${qh.termToString(d.graph)}

`)):l.wrap((0,r.wrap)(o.type==="boolean"?o.execute().then(d=>[`${d}
`]):o.execute().then(()=>[`ok
`]))),{data:l}}};return Fg.ActorQueryResultSerializeSimple=a,Fg}var yae;function xat(){return yae||(yae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Sat(),t)}(K6)),K6}var X6={},Mg={},bae;function Eat(){if(bae)return Mg;bae=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.ActorQueryResultSerializeSparqlCsv=void 0;const t=Ko(),e=ke(),r=Wt;let n=class bE extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}static bindingToCsvBindings(a){if(!a)return"";let s=a.value;if(a.termType==="Literal")s=`${s}`;else if(a.termType==="BlankNode")s=`_:${s}`;else if(a.termType==="Quad"){let o=bE.bindingToCsvBindings(a.object);a.object.termType==="Literal"&&(o=`"${o.replaceAll('"','""')}"`),s=`<<( ${bE.bindingToCsvBindings(a.subject)} ${bE.bindingToCsvBindings(a.predicate)} ${o} )>>`}else s=`<${s}>`;return/[",\n\r]/u.test(s)&&(s=`"${s.replaceAll('"','""')}"`),s}async testHandleChecked(a,s){return a.type!=="bindings"?(0,e.failTest)("This actor can only handle bindings streams."):(0,e.passTestVoid)()}async runHandle(a,s,o){const c=a,u=new r.Readable,l=await c.metadata();return u.push(`${l.variables.map(d=>d.variable.value).join(",")}\r
`),u.wrap(c.bindingsStream.map(d=>`${l.variables.map(f=>bE.bindingToCsvBindings(d.get(f.variable))).join(",")}\r
`)),{data:u}}};return Mg.ActorQueryResultSerializeSparqlCsv=n,Mg}var vae;function Iat(){return vae||(vae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Eat(),t)}(X6)),X6}var J6={},Dg={},Y6={},Ds={},Aae;function Oat(){if(Aae)return Ds;Aae=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.termToString=r,Ds.getLiteralValue=n,Ds.getLiteralType=i,Ds.getLiteralLanguage=a,Ds.getLiteralDirection=s,Ds.stringToTerm=o,Ds.quadToStringQuad=c,Ds.stringQuadToQuad=u;const t=jr(),e=new t.DataFactory;function r(_){if(_)switch(_.termType){case"NamedNode":return`<${l(_.value)}>`;case"BlankNode":return`_:${_.value}`;case"Literal":{const g=_;return`"${d(g.value)}"${g.datatype&&g.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&g.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&g.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?`^^<${g.datatype.value}>`:""}${g.language?`@${g.language}`:""}${g.direction?`--${g.direction}`:""}`}case"Quad":return`<<${r(_.subject)} ${r(_.predicate)} ${r(_.object)}${_.graph.termType==="DefaultGraph"?"":` ${r(_.graph)}`}>>`;case"Variable":return`?${_.value}`;case"DefaultGraph":return _.value}}function n(_){const g=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(_);if(!g)throw new Error(`${_} is not a literal`);return g[1].replace(/\\"/ug,'"')}function i(_){const g=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(_);if(!g)throw new Error(`${_} is not a literal`);return g[1]||(g[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function a(_){const g=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(_);if(!g)throw new Error(`${_} is not a literal`);if(g[1]){let m=g[1].toLowerCase();const y=m.indexOf("--");return y>=0&&(m=m.slice(0,y)),m}return""}function s(_){const g=_.indexOf("--",_.lastIndexOf('"'));if(g>=0){const m=_.slice(g+2,_.length);if(m==="ltr"||m==="rtl")return m;throw new Error(`${_} is not a literal with a valid direction`)}return""}function o(_,g){if(g=g||e,!_||_.length===0)return g.defaultGraph();switch(_[0]){case"_":return g.blankNode(_.slice(2));case"?":if(!g.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return g.variable(_.slice(1));case'"':{const m=a(_),y=s(_),v=g.namedNode(i(_));return g.literal(n(_),m?{language:m,direction:y}:v)}case"<":default:if(_.startsWith("<<")&&_.endsWith(">>")){const m=_.slice(2,-2),y=[];let v=0,A=0;for(let T=0;T<m.length;T++){const S=m[T];if(S==="<"&&v++,S===">"){if(v===0)throw new Error(`Found closing tag without opening tag in ${_}`);v--}S===" "&&v===0&&(y.push(m.slice(A,T)),A=T+1)}if(v!==0)throw new Error(`Found opening tag without closing tag in ${_}`);if(y.push(m.slice(A,m.length)),y.length!==3&&y.length!==4)throw new Error(`Nested quad syntax error ${_}`);return g.quad(o(y[0]),o(y[1]),o(y[2]),y[3]?o(y[3]):void 0)}if(!_.startsWith("<")||!_.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${_}`);return g.namedNode(_.slice(1,-1))}}function c(_){return{subject:r(_.subject),predicate:r(_.predicate),object:r(_.object),graph:r(_.graph)}}function u(_,g){return g=g||e,g.quad(o(_.subject,g),o(_.predicate,g),o(_.object,g),o(_.graph,g))}function l(_){return _.replace(f,p)}function d(_){return f.test(_)&&(_=_.replace(f,p)),_}const f=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function p(_){const g=h.get(_);if(!g){if(_.length===1){const y=_.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-y.length)}${y}`}const m=((_.charCodeAt(0)-55296)*1024+_.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-m.length)}${m}`}return g}return Ds}var Tae;function TO(){return Tae||(Tae=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralDirection=t.getLiteralLanguage=void 0;const e=Oat();Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralDirection",{enumerable:!0,get:function(){return e.getLiteralDirection}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})}(Y6)),Y6}var wae;function Rat(){if(wae)return Dg;wae=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.ActorQueryResultSerializeSparqlTsv=void 0;const t=Ko(),e=ke(),r=TO(),n=Wt;let i=class VOe extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(s){super(s)}static bindingToTsvBindings(s){return s?(0,r.termToString)(s).replaceAll("	","\\t").replaceAll(`
`,"\\n").replaceAll("\r","\\r"):""}async testHandleChecked(s,o){return s.type!=="bindings"?(0,e.failTest)("This actor can only handle bindings streams."):(0,e.passTestVoid)()}async runHandle(s,o,c){const u=s,l=new n.Readable,d=await u.metadata();return l.push(`${d.variables.map(f=>f.variable.value).join("	")}
`),l.wrap(u.bindingsStream.map(f=>`${d.variables.map(h=>VOe.bindingToTsvBindings(f.get(h.variable))).join("	")}
`)),{data:l}}};return Dg.ActorQueryResultSerializeSparqlTsv=i,Dg}var Sae;function Pat(){return Sae||(Sae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rat(),t)}(J6)),J6}var $6={},Cg={},Lg={},xae;function Nat(){var e;if(xae)return Lg;xae=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.XmlSerializer=void 0;let t=(e=class{constructor(){k(this,"stack",[])}open(n,i){const a=`${this.identation()+this.formatTag(n,i,"open")}
`;return this.stack.push(n),a}close(){const n=this.stack.pop();if(n===void 0)throw new Error("There is no tag left to close");return`${this.identation()+this.formatTag(n,{},"close")}
`}serializeNode(n){if(n.children===void 0)return`${this.identation()+this.formatTag(n.name,n.attributes,"self-closing")}
`;if(typeof n.children=="string")return`${this.identation()+this.formatTag(n.name,n.attributes,"open")+this.escape(n.children)+this.formatTag(n.name,{},"close")}
`;const i=[];i.push(`${this.identation()+this.formatTag(n.name,n.attributes,"open")}
`),this.stack.push(n.name);for(const a of n.children)i.push(this.serializeNode(a));return this.stack.pop(),i.push(`${this.identation()+this.formatTag(n.name,{},"close")}
`),i.join("")}identation(){return this.stack.map(n=>"  ").join("")}formatTag(n,i,a){return`<${a==="close"?"/":""}${n}${Object.entries(i??{}).map(s=>` ${s[0]}="${this.escape(s[1])}"`).join("")}${a==="self-closing"?"/":""}>`}escape(n){return n.replaceAll(/["&'<>]/gu,i=>{switch(i){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})}},k(e,"header",`<?xml version="1.0" encoding="UTF-8"?>
`),e);return Lg.XmlSerializer=t,Lg}var Eae;function Fat(){if(Eae)return Cg;Eae=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.ActorQueryResultSerializeSparqlXml=void 0;const t=Ko(),e=ke(),r=ir(),n=Wt,i=Nat();let a=class GOe extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}static bindingToXmlBindings(o,c){return{name:"binding",attributes:{name:c.value},children:[this.valueToXmlValue(o)]}}static valueToXmlValue(o){let c;switch(o.termType){case"Literal":return o.language?c={"xml:lang":o.language,...o.direction?{"its:dir":o.direction}:{}}:o.datatype&&o.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?c={datatype:o.datatype.value}:c={},{name:"literal",attributes:c,children:o.value};case"BlankNode":return{name:"bnode",children:o.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(o.subject)]},{name:"predicate",children:[this.valueToXmlValue(o.predicate)]},{name:"object",children:[this.valueToXmlValue(o.object)]}]};default:return{name:"uri",children:o.value}}}async testHandleChecked(o,c){return["bindings","boolean"].includes(o.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(o,c,u){const l=new n.Readable;l._read=()=>{};const d=new i.XmlSerializer,f=await o.metadata();if(l.push(i.XmlSerializer.header),l.push(d.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#","xmlns:its":"http://www.w3.org/2005/11/its","its:version":"2.0"})),l.push(d.serializeNode({name:"head",children:f.variables.map(h=>({name:"variable",attributes:{name:h.variable.value}}))})),o.type==="bindings"){function*h(){yield d.close(),yield d.close()}l.push(d.open("results"));const p=(0,r.wrap)(o.bindingsStream).map(_=>d.serializeNode({name:"result",children:[..._].map(([g,m])=>GOe.bindingToXmlBindings(m,g))})).append((0,r.wrap)(h()));l.wrap(p)}else try{const h=await o.execute();l.push(d.serializeNode({name:"boolean",children:h.toString()})),l.push(d.close()),setTimeout(()=>l.push(null))}catch(h){setTimeout(()=>l.emit("error",h))}return{data:l}}};return Cg.ActorQueryResultSerializeSparqlXml=a,Cg}var Iae;function Mat(){return Iae||(Iae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fat(),t)}($6)),$6}var Z6={},jg={},Oae;function Dat(){if(Oae)return jg;Oae=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.ActorQueryResultSerializeTable=void 0;const t=Ko(),e=dt,r=ke(),n=Br(),i=Fi(),a=Wt;let s=class TG extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(u){super(u);k(this,"columnWidth");k(this,"padding");this.columnWidth=u.columnWidth,this.padding=TG.repeat(" ",this.columnWidth)}static repeat(u,l){return u.repeat(l)}async testHandleChecked(u,l){return["bindings","quads"].includes(u.type)?(0,r.passTestVoid)():(0,r.failTest)("This actor can only handle bindings or quad streams.")}termToString(u){return u.termType==="Quad"?(0,n.termToString)(u):u.value}pad(u){return u.length<=this.columnWidth?u+this.padding.slice(u.length):`${u.slice(0,this.columnWidth-1)}`}pushHeader(u,l){const d=l.map(f=>this.pad(f.value)).join(" ");u.push(`${d}
${TG.repeat("-",d.length)}
`)}createRow(u,l){return`${u.map(d=>l.has(d)?this.termToString(l.get(d)):"").map(d=>this.pad(d)).join(" ")}
`}async runHandle(u,l,d){const f=new a.Readable;let h;if(u.type==="bindings"){h=u.bindingsStream.map(_=>this.createRow(p,_));const p=(await u.metadata()).variables.map(_=>_.variable);this.pushHeader(f,p)}else{h=u.quadStream.map(_=>`${(0,i.getTerms)(_).map(g=>this.pad(this.termToString(g))).join(" ")}
`);const p=u.context.getSafe(e.KeysInitQuery.dataFactory);this.pushHeader(f,i.QUAD_TERM_NAMES.map(_=>p.variable(_)))}return f.wrap(h),{data:f}}};return jg.ActorQueryResultSerializeTable=s,jg}var Rae;function Cat(){return Rae||(Rae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dat(),t)}(Z6)),Z6}var e4={},Bg={},t4={},qg={},r4={},n4={},Ug={},Pae;function HOe(){if(Pae)return Ug;Pae=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.BlankNode=void 0;class t{constructor(r){this.termType="BlankNode",this.value=r}equals(r){return!!r&&r.termType==="BlankNode"&&r.value===this.value}}return Ug.BlankNode=t,Ug}var Vg={},Gg={},Nae;function kOe(){if(Nae)return Gg;Nae=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.DefaultGraph=void 0;class t{constructor(){this.termType="DefaultGraph",this.value=""}equals(r){return!!r&&r.termType==="DefaultGraph"}}return Gg.DefaultGraph=t,t.INSTANCE=new t,Gg}var Hg={},kg={},Fae;function Hz(){if(Fae)return kg;Fae=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.NamedNode=void 0;class t{constructor(r){this.termType="NamedNode",this.value=r}equals(r){return!!r&&r.termType==="NamedNode"&&r.value===this.value}}return kg.NamedNode=t,kg}var Mae;function zOe(){if(Mae)return Hg;Mae=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.Literal=void 0;const t=Hz();class e{constructor(n,i){this.termType="Literal",this.value=n,typeof i=="string"?(this.language=i,this.datatype=e.RDF_LANGUAGE_STRING):i?(this.language="",this.datatype=i):(this.language="",this.datatype=e.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Hg.Literal=e,e.RDF_LANGUAGE_STRING=new t.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.XSD_STRING=new t.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Hg}var zg={},Dae;function QOe(){if(Dae)return zg;Dae=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.Quad=void 0;class t{constructor(r,n,i,a){this.termType="Quad",this.value="",this.subject=r,this.predicate=n,this.object=i,this.graph=a}equals(r){return!!r&&(r.termType==="Quad"||!r.termType)&&this.subject.equals(r.subject)&&this.predicate.equals(r.predicate)&&this.object.equals(r.object)&&this.graph.equals(r.graph)}}return zg.Quad=t,zg}var Qg={},Cae;function WOe(){if(Cae)return Qg;Cae=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.Variable=void 0;class t{constructor(r){this.termType="Variable",this.value=r}equals(r){return!!r&&r.termType==="Variable"&&r.value===this.value}}return Qg.Variable=t,Qg}var Lae;function Lat(){if(Lae)return Vg;Lae=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.DataFactory=void 0;const t=HOe(),e=kOe(),r=zOe(),n=Hz(),i=QOe(),a=WOe();let s=0;class o{constructor(u){this.blankNodeCounter=0,u=u||{},this.blankNodePrefix=u.blankNodePrefix||`df_${s++}_`}namedNode(u){return new n.NamedNode(u)}blankNode(u){return new t.BlankNode(u||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(u,l){return new r.Literal(u,l)}variable(u){return new a.Variable(u)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(u,l,d,f){return new i.Quad(u,l,d,f||this.defaultGraph())}fromTerm(u){switch(u.termType){case"NamedNode":return this.namedNode(u.value);case"BlankNode":return this.blankNode(u.value);case"Literal":return u.language?this.literal(u.value,u.language):u.datatype.equals(r.Literal.XSD_STRING)?this.literal(u.value):this.literal(u.value,this.fromTerm(u.datatype));case"Variable":return this.variable(u.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(u.subject),this.fromTerm(u.predicate),this.fromTerm(u.object),this.fromTerm(u.graph))}}fromQuad(u){return this.fromTerm(u)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Vg.DataFactory=o,Vg}var jae;function KOe(){return jae||(jae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(HOe(),t),r(Lat(),t),r(kOe(),t),r(zOe(),t),r(Hz(),t),r(QOe(),t),r(WOe(),t)}(n4)),n4}var i4={},Wg={},Kg={},Bae;function Hp(){if(Bae)return Kg;Bae=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.Translator=void 0;let t=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(r){throw new Error(`Invalid RDF ${r.datatype.value} value: '${r.value}'`)}registerHandler(r,n,i){for(const a of n)this.supportedRdfDatatypes.push(a),this.fromRdfHandlers[a.value]=r;for(const a of i){let s=this.toRdfHandlers[a];s||(this.toRdfHandlers[a]=s=[]),s.push(r)}}fromRdf(r,n){const i=this.fromRdfHandlers[r.datatype.value];return i?i.fromRdf(r,n):r.value}toRdf(r,n){const i=this.toRdfHandlers[typeof r];if(i)for(const a of i){const s=a.toRdf(r,n);if(s)return s}throw new Error(`Invalid JavaScript value: '${r}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return Kg.Translator=t,Kg}var qae;function jat(){if(qae)return Wg;qae=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.TypeHandlerBoolean=void 0;const t=Hp();let e=class XOe{fromRdf(n,i){switch(n.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return i&&t.Translator.incorrectRdfDataType(n),!1}toRdf(n,{datatype:i,dataFactory:a}){return a.literal(n?"true":"false",i||a.namedNode(XOe.TYPE))}};return e.TYPE="http://www.w3.org/2001/XMLSchema#boolean",Wg.TypeHandlerBoolean=e,Wg}var Xg={},Uae;function Bat(){if(Uae)return Xg;Uae=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.TypeHandlerDate=void 0;const t=Hp();let e=class wG{fromRdf(n,i){switch(i&&!n.value.match(wG.VALIDATORS[n.datatype.value.substr(33,n.datatype.value.length)])&&t.Translator.incorrectRdfDataType(n),n.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(n.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const a=n.value.split("-");return new Date(0,parseInt(a[0],10)-1,parseInt(a[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(n.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(n.value+"-01");default:return new Date(n.value)}}toRdf(n,{datatype:i,dataFactory:a}){if(i=i||a.namedNode(wG.TYPES[0]),!(n instanceof Date))return null;const s=n;let o;switch(i.value){case"http://www.w3.org/2001/XMLSchema#gDay":o=String(s.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":o=s.getUTCMonth()+1+"-"+s.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":o=String(s.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":o=s.getUTCFullYear()+"-"+(s.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":o=s.toISOString().replace(/T.*$/,"");break;default:o=s.toISOString()}return a.literal(o,i)}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],e.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},Xg.TypeHandlerDate=e,Xg}var Jg={},Vae;function qat(){if(Vae)return Jg;Vae=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.TypeHandlerNumberDouble=void 0;const t=Hp();let e=class JOe{fromRdf(n,i){const a=parseFloat(n.value);return i&&isNaN(a)&&t.Translator.incorrectRdfDataType(n),a}toRdf(n,{datatype:i,dataFactory:a}){return i=i||a.namedNode(JOe.TYPES[0]),isNaN(n)?a.literal("NaN",i):isFinite(n)?n%1===0?null:a.literal(n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i):a.literal(n>0?"INF":"-INF",i)}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],Jg.TypeHandlerNumberDouble=e,Jg}var Yg={},Gae;function Uat(){if(Gae)return Yg;Gae=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.TypeHandlerNumberInteger=void 0;const t=Hp();let e=class vE{fromRdf(n,i){const a=parseInt(n.value,10);return i&&(isNaN(a)||n.value.indexOf(".")>=0)&&t.Translator.incorrectRdfDataType(n),a}toRdf(n,{datatype:i,dataFactory:a}){return a.literal(String(n),i||(n<=vE.MAX_INT&&n>=vE.MIN_INT?a.namedNode(vE.TYPES[0]):a.namedNode(vE.TYPES[1])))}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],e.MAX_INT=2147483647,e.MIN_INT=-2147483648,Yg.TypeHandlerNumberInteger=e,Yg}var $g={},Hae;function Vat(){if(Hae)return $g;Hae=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.TypeHandlerString=void 0;let t=class{fromRdf(r){return r.value}toRdf(r,{datatype:n,dataFactory:i}){return i.literal(r,n)}};return t.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],$g.TypeHandlerString=t,$g}var kae;function zae(){return kae||(kae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(jat(),t),r(Bat(),t),r(qat(),t),r(Uat(),t),r(Vat(),t)}(i4)),i4}var a4={},Qae;function Gat(){return Qae||(Qae=1,Object.defineProperty(a4,"__esModule",{value:!0})),a4}var Wae;function Hat(){return Wae||(Wae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(h,p,_,g){g===void 0&&(g=_);var m=Object.getOwnPropertyDescriptor(p,_);(!m||("get"in m?!p.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return p[_]}}),Object.defineProperty(h,g,m)}:function(h,p,_,g){g===void 0&&(g=_),h[g]=p[_]}),r=E&&E.__exportStar||function(h,p){for(var _ in h)_!=="default"&&!Object.prototype.hasOwnProperty.call(p,_)&&e(p,h,_)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedJavaScriptPrimitives=t.getSupportedRdfDatatypes=t.getTermRaw=t.toRdf=t.fromRdf=void 0;const n=KOe(),i=zae(),a=Hp();r(zae(),t),r(Gat(),t),r(Hp(),t);const s=new n.DataFactory,o=new a.Translator;o.registerHandler(new i.TypeHandlerString,i.TypeHandlerString.TYPES.map(h=>s.namedNode(h)),["string"]),o.registerHandler(new i.TypeHandlerBoolean,[i.TypeHandlerBoolean.TYPE].map(h=>s.namedNode(h)),["boolean"]),o.registerHandler(new i.TypeHandlerNumberDouble,i.TypeHandlerNumberDouble.TYPES.map(h=>s.namedNode(h)),["number"]),o.registerHandler(new i.TypeHandlerNumberInteger,i.TypeHandlerNumberInteger.TYPES.map(h=>s.namedNode(h)),["number"]),o.registerHandler(new i.TypeHandlerDate,i.TypeHandlerDate.TYPES.map(h=>s.namedNode(h)),["object"]);function c(h,p){return o.fromRdf(h,p)}t.fromRdf=c;function u(h,p){return p&&"namedNode"in p&&(p={dataFactory:p}),p=p||{},p&&!p.dataFactory&&(p.dataFactory=s),o.toRdf(h,p)}t.toRdf=u;function l(h,p){return h.termType==="Literal"?c(h,p):h.value}t.getTermRaw=l;function d(){return o.getSupportedRdfDatatypes()}t.getSupportedRdfDatatypes=d;function f(){return o.getSupportedJavaScriptPrimitives()}t.getSupportedJavaScriptPrimitives=f}(r4)),r4}var s4={},Zg={},o4,Kae;function kz(){if(Kae)return o4;Kae=1;var{Buffer:t}=Ni,e={},r=e.LEFT_BRACE=1,n=e.RIGHT_BRACE=2,i=e.LEFT_BRACKET=3,a=e.RIGHT_BRACKET=4,s=e.COLON=5,o=e.COMMA=6,c=e.TRUE=7,u=e.FALSE=8,l=e.NULL=9,d=e.STRING=10,f=e.NUMBER=11,h=e.START=17,p=e.STOP=18,_=e.TRUE1=33,g=e.TRUE2=34,m=e.TRUE3=35,y=e.FALSE1=49,v=e.FALSE2=50,A=e.FALSE3=51,T=e.FALSE4=52,S=e.NULL1=65,P=e.NULL2=66,j=e.NULL3=67,F=e.NUMBER1=81,N=e.NUMBER3=83,R=e.STRING1=97,C=e.STRING2=98,M=e.STRING3=99,U=e.STRING4=100,B=e.STRING5=101,G=e.STRING6=102,K=e.VALUE=113,$=e.KEY=114,se=e.OBJECT=129,pe=e.ARRAY=130,we=92,Ce=47,Le=8,Ie=12,Oe=10,ye=13,Me=9,W=64*1024;function ft(Z){return t.alloc?t.alloc(Z):new t(Z)}function le(){this.tState=h,this.value=void 0,this.string=void 0,this.stringBuffer=ft(W),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=K,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:ft(2),3:ft(3),4:ft(4)},this.offset=-1}le.toknam=function(Z){for(var q=Object.keys(e),J=0,re=q.length;J<re;J++){var _e=q[J];if(e[_e]===Z)return _e}return Z&&"0x"+Z.toString(16)};var me=le.prototype;return me.onError=function(Z){throw Z},me.charError=function(Z,q){this.tState=p,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(Z[q]))+" at position "+q+" in state "+le.toknam(this.tState)))},me.appendStringChar=function(Z){this.stringBufferOffset>=W&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=Z},me.appendStringBuf=function(Z,q,J){var re=Z.length;typeof q=="number"&&(typeof J=="number"?J<0?re=Z.length-q+J:re=J-q:re=Z.length-q),re<0&&(re=0),this.stringBufferOffset+re>W&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),Z.copy(this.stringBuffer,this.stringBufferOffset,q,J),this.stringBufferOffset+=re},me.write=function(Z){typeof Z=="string"&&(Z=new t(Z));for(var q,J=0,re=Z.length;J<re;J++)if(this.tState===h){if(q=Z[J],this.offset++,q===123)this.onToken(r,"{");else if(q===125)this.onToken(n,"}");else if(q===91)this.onToken(i,"[");else if(q===93)this.onToken(a,"]");else if(q===58)this.onToken(s,":");else if(q===44)this.onToken(o,",");else if(q===116)this.tState=_;else if(q===102)this.tState=y;else if(q===110)this.tState=S;else if(q===34)this.string="",this.stringBufferOffset=0,this.tState=R;else if(q===45)this.string="-",this.tState=F;else if(q>=48&&q<64)this.string=String.fromCharCode(q),this.tState=N;else if(!(q===32||q===9||q===10||q===13))return this.charError(Z,J)}else if(this.tState===R)if(q=Z[J],this.bytes_remaining>0){for(var _e=0;_e<this.bytes_remaining;_e++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+_e]=Z[_e];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,J=J+_e-1}else if(this.bytes_remaining===0&&q>=128){if(q<=193||q>244)return this.onError(new Error("Invalid UTF-8 character at position "+J+" in state "+le.toknam(this.tState)));if(q>=194&&q<=223&&(this.bytes_in_sequence=2),q>=224&&q<=239&&(this.bytes_in_sequence=3),q>=240&&q<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+J>Z.length){for(var he=0;he<=Z.length-1-J;he++)this.temp_buffs[this.bytes_in_sequence][he]=Z[J+he];this.bytes_remaining=J+this.bytes_in_sequence-Z.length,J=Z.length-1}else this.appendStringBuf(Z,J,J+this.bytes_in_sequence),J=J+this.bytes_in_sequence-1}else if(q===34)this.tState=h,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(d,this.string),this.offset+=t.byteLength(this.string,"utf8")+1,this.string=void 0;else if(q===92)this.tState=C;else if(q>=32)this.appendStringChar(q);else return this.charError(Z,J);else if(this.tState===C)if(q=Z[J],q===34)this.appendStringChar(q),this.tState=R;else if(q===92)this.appendStringChar(we),this.tState=R;else if(q===47)this.appendStringChar(Ce),this.tState=R;else if(q===98)this.appendStringChar(Le),this.tState=R;else if(q===102)this.appendStringChar(Ie),this.tState=R;else if(q===110)this.appendStringChar(Oe),this.tState=R;else if(q===114)this.appendStringChar(ye),this.tState=R;else if(q===116)this.appendStringChar(Me),this.tState=R;else if(q===117)this.unicode="",this.tState=M;else return this.charError(Z,J);else if(this.tState===M||this.tState===U||this.tState===B||this.tState===G)if(q=Z[J],q>=48&&q<64||q>64&&q<=70||q>96&&q<=102){if(this.unicode+=String.fromCharCode(q),this.tState++===G){var ue=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&ue>=56320&&ue<57344?(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate,ue))),this.highSurrogate=void 0):this.highSurrogate===void 0&&ue>=55296&&ue<56320?this.highSurrogate=ue:(this.highSurrogate!==void 0&&(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new t(String.fromCharCode(ue)))),this.tState=R}}else return this.charError(Z,J);else if(this.tState===F||this.tState===N)switch(q=Z[J],q){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(q),this.tState=N;break;default:this.tState=h;var Ue=this.numberReviver(this.string,Z,J);if(Ue)return Ue;this.offset+=this.string.length-1,this.string=void 0,J--;break}else if(this.tState===_)if(Z[J]===114)this.tState=g;else return this.charError(Z,J);else if(this.tState===g)if(Z[J]===117)this.tState=m;else return this.charError(Z,J);else if(this.tState===m)if(Z[J]===101)this.tState=h,this.onToken(c,!0),this.offset+=3;else return this.charError(Z,J);else if(this.tState===y)if(Z[J]===97)this.tState=v;else return this.charError(Z,J);else if(this.tState===v)if(Z[J]===108)this.tState=A;else return this.charError(Z,J);else if(this.tState===A)if(Z[J]===115)this.tState=T;else return this.charError(Z,J);else if(this.tState===T)if(Z[J]===101)this.tState=h,this.onToken(u,!1),this.offset+=4;else return this.charError(Z,J);else if(this.tState===S)if(Z[J]===117)this.tState=P;else return this.charError(Z,J);else if(this.tState===P)if(Z[J]===108)this.tState=j;else return this.charError(Z,J);else if(this.tState===j)if(Z[J]===108)this.tState=h,this.onToken(l,null),this.offset+=3;else return this.charError(Z,J)},me.onToken=function(Z,q){},me.parseError=function(Z,q){this.tState=p,this.onError(new Error("Unexpected "+le.toknam(Z)+(q?"("+JSON.stringify(q)+")":"")+" in state "+le.toknam(this.state)))},me.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},me.pop=function(){var Z=this.value,q=this.stack.pop();this.value=q.value,this.key=q.key,this.mode=q.mode,this.emit(Z),this.mode||(this.state=K)},me.emit=function(Z){this.mode&&(this.state=o),this.onValue(Z)},me.onValue=function(Z){},me.onToken=function(Z,q){if(this.state===K)if(Z===d||Z===f||Z===c||Z===u||Z===l)this.value&&(this.value[this.key]=q),this.emit(q);else if(Z===r)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=$,this.mode=se;else if(Z===i)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=pe,this.state=K;else if(Z===n)if(this.mode===se)this.pop();else return this.parseError(Z,q);else if(Z===a)if(this.mode===pe)this.pop();else return this.parseError(Z,q);else return this.parseError(Z,q);else if(this.state===$)if(Z===d)this.key=q,this.state=s;else if(Z===n)this.pop();else return this.parseError(Z,q);else if(this.state===s)if(Z===s)this.state=K;else return this.parseError(Z,q);else if(this.state===o)if(Z===o)this.mode===pe?(this.key++,this.state=K):this.mode===se&&(this.state=$);else if(Z===a&&this.mode===pe||Z===n&&this.mode===se)this.pop();else return this.parseError(Z,q);else return this.parseError(Z,q)},me.numberReviver=function(Z,q,J){var re=Number(Z);if(isNaN(re))return this.charError(q,J);Z.match(/[0-9]+/)==Z&&re.toString()!=Z?this.onToken(d,Z):this.onToken(f,re)},le.C=e,o4=le,o4}var Xae;function kat(){if(Xae)return Zg;Xae=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.SparqlJsonParser=void 0;const t=KOe(),e=Wt,r=kz();class n{constructor(a){var s;a=a||{},this.dataFactory=a.dataFactory||new t.DataFactory,this.prefixVariableQuestionMark=!!a.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(s=a.suppressMissingStreamResultsError)!==null&&s!==void 0?s:!0}parseJsonResults(a){return a.results.bindings.map(s=>this.parseJsonBindings(s))}parseJsonResultsStream(a){const s=d=>l.emit("error",d);a.on("error",s);const o=new r;o.onError=s;let c=!1,u=!1;o.onValue=d=>{if(o.key==="vars"&&o.stack.length===2&&o.stack[1].key==="head")l.emit("variables",d.map(f=>this.dataFactory.variable(f))),c=!0;else if(o.key==="results"&&o.stack.length===1)u=!0;else if(typeof o.key=="number"&&o.stack.length===3&&o.stack[1].key==="results"&&o.stack[2].key==="bindings")try{l.push(this.parseJsonBindings(d))}catch(f){l.emit("error",f)}else o.key==="metadata"&&o.stack.length===1&&l.emit("metadata",d)};const l=a.on("end",d=>{!u&&!this.suppressMissingStreamResultsError?l.emit("error",new Error("No valid SPARQL query results were found.")):c||l.emit("variables",[])}).pipe(new e.Transform({objectMode:!0,transform(d,f,h){o.write(d),h()}}));return l}parseJsonBindings(a){const s={};for(const o in a){const c=a[o];s[this.prefixVariableQuestionMark?"?"+o:o]=this.parseJsonValue(c)}return s}parseJsonValue(a){let s;switch(a.type){case"bnode":s=this.dataFactory.blankNode(a.value);break;case"literal":a["xml:lang"]?s=this.dataFactory.literal(a.value,a["xml:lang"]):a.datatype?s=this.dataFactory.literal(a.value,this.dataFactory.namedNode(a.datatype)):s=this.dataFactory.literal(a.value);break;case"typed-literal":s=this.dataFactory.literal(a.value,this.dataFactory.namedNode(a.datatype));break;case"triple":const o=a.value;if(!o||!o.subject||!o.predicate||!o.object)throw new Error("Invalid quoted triple: "+JSON.stringify(a));s=this.dataFactory.quad(this.parseJsonValue(o.subject),this.parseJsonValue(o.predicate),this.parseJsonValue(o.object));break;default:s=this.dataFactory.namedNode(a.value);break}return s}parseJsonBoolean(a){if("boolean"in a)return a.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(a){return new Promise((s,o)=>{const c=new r;c.onError=o,c.onValue=u=>{c.key==="boolean"&&typeof u=="boolean"&&c.stack.length===1&&s(u)},a.on("error",o).on("data",u=>c.write(u)).on("end",()=>o(new Error("No valid ASK response was found.")))})}}return Zg.SparqlJsonParser=n,Zg}var Jae;function zat(){return Jae||(Jae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(kat(),t)}(s4)),s4}var Yae;function Qat(){if(Yae)return qg;Yae=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.Converter=void 0;const t=Hat(),e=zat();let r=class gu{constructor(i){i=i||{delimiter:"_"},i.prefixVariableQuestionMark=!1,this.delimiter=i.delimiter||"_",this.parser=new e.SparqlJsonParser(i),this.materializeRdfJsTerms=i.materializeRdfJsTerms}static addValueToTree(i,a,s,o,c,u){const l=a[0],d=o?o+u+l:l,f=c.singularizeVariables[d];if(a.length===1)f?i[l]||(i[l]=s):(i[l]||(i[l]=[]),i[l].push(s));else{let h;f?(i[l]||(i[l]={}),h=i[l]):(i[l]||(i[l]=[{}]),h=i[l][0]),gu.addValueToTree(h,a.slice(1),s,d,c,u)}}static mergeTrees(i,a){if(typeof i!=typeof a)throw new Error(`Two incompatible tree nodes were found: ${typeof i} and ${typeof a}`);if(Array.isArray(i)!==Array.isArray(a))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(i)} and Array?${Array.isArray(a)}`);if(typeof i=="object"&&typeof a=="object"){if(i.termType&&a.termType)return i.equals(a)?{valid:!0,result:i}:{valid:!1,result:i};if(Array.isArray(i)&&Array.isArray(a)){if(i.length>0){const s=[];let o=!1;for(const c of i){const u=gu.mergeTrees(c,a[0]);u.valid?(o=!0,s.push(u.result)):s.push(c)}if(o)return{valid:!0,result:s}}return{valid:!0,result:i.concat(a)}}else{const s={};for(const o in a)s[o]=a[o];for(const o in i)if(s[o]){const c=gu.mergeTrees(i[o],s[o]);if(c.valid)s[o]=c.result;else return{valid:!1,result:i}}else s[o]=i[o];return{valid:!0,result:s}}}else throw new Error(`Unmergable tree types: ${typeof i} and ${typeof a}`)}static materializeTree(i){if(i.termType)return(0,t.getTermRaw)(i);if(Array.isArray(i))return i.map(gu.materializeTree);{const a={};for(const s in i)a[s]=gu.materializeTree(i[s]);return a}}sparqlJsonResultsToTree(i,a){return this.bindingsToTree(this.parser.parseJsonResults(i),a||{singularizeVariables:{}})}bindingsToTree(i,a){const s=a&&a.singularizeVariables[""];let o=s?{}:[];for(const c of i){const u=s?{}:[{}];for(const l in c){const d=l.split(this.delimiter),f=c[l];gu.addValueToTree(s?u:u[0],d,f,"",a,this.delimiter)}o=gu.mergeTrees(o,u).result}return this.materializeRdfJsTerms&&(o=gu.materializeTree(o)),o}};return qg.Converter=r,qg}var $ae;function Wat(){return $ae||($ae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qat(),t)}(t4)),t4}var Zae;function ese(){if(Zae)return Bg;Zae=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.ActorQueryResultSerializeTree=void 0;const t=Ko(),e=dt,r=ke(),n=Wt,i=Wat();let a=class YOe extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}static async bindingsStreamToGraphQl(o,c,u){const l=r.ActionContext.ensureActionContext(c),d=new i.Converter(u),f={singularizeVariables:l.get(e.KeysInitQuery.graphqlSingularizeVariables)??{}};return d.bindingsToTree(await o.map(h=>Object.fromEntries([...h].map(([p,_])=>[p.value,_]))).toArray(),f)}async testHandleChecked(o){return o.type!=="bindings"?(0,r.failTest)("This actor can only handle bindings streams."):(0,r.passTestVoid)()}async runHandle(o,c){const u=new n.Readable;return u._read=()=>{u._read=()=>{},YOe.bindingsStreamToGraphQl(o.bindingsStream,o.context,{materializeRdfJsTerms:!0}).then(l=>{u.push(JSON.stringify(l,null,"  ")),u.push(null)}).catch(l=>u.emit("error",l))},{data:u}}};return Bg.ActorQueryResultSerializeTree=a,Bg}var tse;function Kat(){return tse||(tse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(a,s,o,c){c===void 0&&(c=o);var u=Object.getOwnPropertyDescriptor(s,o);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(a,c,u)}:function(a,s,o,c){c===void 0&&(c=o),a[c]=s[o]}),r=E&&E.__exportStar||function(a,s){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,a,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.bindingsStreamToGraphQl=void 0;const n=ese(),{bindingsStreamToGraphQl:i}=n.ActorQueryResultSerializeTree;t.bindingsStreamToGraphQl=i,r(ese(),t)}(e4)),e4}var u4={},ey={},rse;function Xat(){if(rse)return ey;rse=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.MediatorCombineUnion=void 0;const t=ke();let e=class extends t.Mediator{constructor(i){super(i);k(this,"filterFailures");k(this,"field");k(this,"combiner");this.filterFailures=i.filterFailures,this.field=i.field,this.combiner=this.createCombiner()}async mediate(i){let a;try{a=this.publish(i)}catch{a=[]}if(this.filterFailures){const c=[];for(const u of a)(await u.reply).isPassed()&&c.push(u);a=c}const s=[];await Promise.all(a.map(async({reply:c},u)=>{const l=await c,d=l.getOrThrow();return s[u]=l.getSideData(),d}));const o=await Promise.all(a.map((c,u)=>c.actor.runObservable(i,s[u])));return this.combiner(o)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return i=>{const a={};return a[this.field]={},[{}].concat(i.map(s=>s[this.field])).forEach(s=>{a[this.field]={...s,...a[this.field]}}),a}}};return ey.MediatorCombineUnion=e,ey}var nse;function yc(){return nse||(nse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xat(),t)}(u4)),u4}var c4={},ty={},ise;function Jat(){if(ise)return ty;ise=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.MediatorNumber=void 0;const t=ke();let e=class extends t.Mediator{constructor(i){super(i);k(this,"field");k(this,"type");k(this,"ignoreFailures");k(this,"indexPicker");this.field=i.field,this.type=i.type,this.ignoreFailures=!!i.ignoreFailures,this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return i=>i.reduce((a,s,o)=>{const c=this.getOrDefault(s[this.field],Number.POSITIVE_INFINITY);return c!==null&&(Number.isNaN(a[0])||a[0]>c)?[c,o]:a},[Number.NaN,-1])[1];case"max":return i=>i.reduce((a,s,o)=>{const c=this.getOrDefault(s[this.field],Number.NEGATIVE_INFINITY);return c!==null&&(Number.isNaN(a[0])||a[0]<c)?[c,o]:a},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(i,a){return i===void 0?a:i}async mediateWith(i,a){let s=await Promise.all(a.map(({reply:d})=>d));const o=[];if(this.ignoreFailures){const d={};d[this.field]=null,s=s.map(f=>f.isFailed()?(o.push(f.getFailMessage()),(0,t.passTestWithSideData)(d,void 0)):f)}const c=[],u=s.map((d,f)=>{const h=d.getOrThrow();return c[f]=d.getSideData(),h}),l=this.indexPicker(u);return l<0?(0,t.failTest)(this.constructFailureMessage(i,o)):(0,t.passTestWithSideData)(a[l].actor,c[l])}};return ty.MediatorNumber=e,ty}var ase;function yh(){return ase||(ase=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jat(),t)}(c4)),c4}var l4={},ry={},d4={},ny={},bc={},sse;function zz(){if(sse)return bc;sse=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.ActorDereferenceBase=void 0,bc.emptyReadable=n,bc.isHardError=i,bc.shouldLogWarning=a;const t=dt,e=ke(),r=Wt;function n(){const o=new r.Readable;return o.push(null),o}function i(o){return!o.get(t.KeysInitQuery.lenient)}function a(o){return o.name!=="AbortError"}let s=class extends e.Actor{constructor(c){super(c)}async dereferenceErrorHandler(c,u,l){if(i(c.context))throw u;return a(u)&&this.logWarn(c.context,u.message,()=>({url:c.url})),{...l,data:n()}}};return bc.ActorDereferenceBase=s,bc}var ose;function Yat(){if(ose)return ny;ose=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.ActorDereference=void 0;const t=zz();let e=class extends t.ActorDereferenceBase{constructor(n){super(n)}async handleDereferenceErrors(n,i,a,s=0){return this.dereferenceErrorHandler(n,i,{url:n.url,exists:!1,status:404,headers:a,requestTime:s})}};return ny.ActorDereference=e,ny}var bh={},iy={},use;function $Oe(){if(use)return iy;use=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.DereferenceRdfCachePolicyDereferenceWrapper=void 0;let t=class{constructor(r,n){k(this,"cachePolicy");k(this,"mediaTypes");this.cachePolicy=r,this.mediaTypes=n}storable(){return this.cachePolicy.storable()}async satisfiesWithoutRevalidation(r){return this.cachePolicy.satisfiesWithoutRevalidation({...r,mediaTypes:this.mediaTypes})}responseHeaders(){return this.cachePolicy.responseHeaders()}timeToLive(){return this.cachePolicy.timeToLive()}async revalidationHeaders(r){return this.cachePolicy.revalidationHeaders({...r,mediaTypes:this.mediaTypes})}async revalidatedPolicy(r,n){return await this.cachePolicy.revalidatedPolicy({...r,mediaTypes:this.mediaTypes},n)}};return iy.DereferenceRdfCachePolicyDereferenceWrapper=t,iy}var cse;function $at(){if(cse)return bh;cse=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.ActorDereferenceParse=void 0,bh.getMediaTypeFromExtension=i;const t=ke(),e=Wt,r=zz(),n=$Oe();function i(s,o){const c=s.lastIndexOf(".");return c>=0&&(o==null?void 0:o[s.slice(c+1)])||""}let a=class extends r.ActorDereferenceBase{constructor(c){super(c);k(this,"mediatorDereference");k(this,"mediatorParse");k(this,"mediatorParseMediatypes");k(this,"mediaMappings");this.mediatorDereference=c.mediatorDereference,this.mediatorParse=c.mediatorParse,this.mediatorParseMediatypes=c.mediatorParseMediatypes,this.mediaMappings=c.mediaMappings}async test(c){return(0,t.passTestVoid)()}handleDereferenceStreamErrors(c,u){return(0,r.isHardError)(c.context)||(u.on("error",l=>{(0,r.shouldLogWarning)(l)&&this.logWarn(c.context,l.message,()=>({url:c.url})),u.push(null)}),u=u.pipe(new e.PassThrough({objectMode:!0}))),u}async run(c){var h,p,_,g;const{context:u}=c,l=async()=>{var m,y;return(y=await((m=this.mediatorParseMediatypes)==null?void 0:m.mediate({context:u,mediaTypes:!0})))==null?void 0:y.mediaTypes},d=await this.mediatorDereference.mediate({...c,mediaTypes:l});let f;if(d.exists)try{f=(await this.mediatorParse.mediate({context:u,handle:{context:u,...d,metadata:await this.getMetadata(d)},handleMediaType:d.mediaType||c.mediaType||i(d.url,this.mediaMappings)})).handle,f.data=this.handleDereferenceStreamErrors(c,f.data)}catch(m){await((p=(h=d.data).close)==null?void 0:p.call(h)),f=await this.dereferenceErrorHandler(c,m,{})}else await((g=(_=d.data).close)==null?void 0:g.call(_)),f={data:(0,r.emptyReadable)()};return{...d,...f,cachePolicy:d.cachePolicy?new n.DereferenceRdfCachePolicyDereferenceWrapper(d.cachePolicy,l):void 0}}};return bh.ActorDereferenceParse=a,bh}var lse;function Qz(){return lse||(lse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Yat(),t),r($at(),t),r(zz(),t),r($Oe(),t)}(d4)),d4}var dse;function Zat(){if(dse)return ry;dse=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.ActorDereferenceFallback=void 0;const t=Qz(),e=ke();let r=class extends t.ActorDereference{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){return this.handleDereferenceErrors(i,new Error(`Could not dereference '${i.url}'`))}};return ry.ActorDereferenceFallback=r,ry}var fse;function est(){return fse||(fse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zat(),t)}(l4)),l4}var f4={},ay={},h4={},sy={},hse;function tst(){if(hse)return sy;hse=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.ActorRdfJoinEntriesSort=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return sy.ActorRdfJoinEntriesSort=e,sy}var pse;function ZOe(){return pse||(pse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(tst(),t)}(h4)),h4}var _se;function rst(){if(_se)return ay;_se=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.ActorRdfJoinEntriesSortCardinality=void 0;const t=ZOe(),e=ke();let r=class extends t.ActorRdfJoinEntriesSort{constructor(i){super(i)}async test(i){return(0,e.passTest)({accuracy:i.entries.length===0?1:i.entries.reduce((a,s)=>a+(Number.isFinite(s.metadata.cardinality.value)?1:0),0)/i.entries.length})}async run(i){return{entries:[...i.entries].sort((s,o)=>s.metadata.cardinality.value-o.metadata.cardinality.value)}}};return ay.ActorRdfJoinEntriesSortCardinality=r,ay}var mse;function nst(){return mse||(mse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(rst(),t)}(f4)),f4}var p4={},ld={},_4={},oy={},gse;function ist(){if(gse)return oy;gse=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.ActorRdfJoinSelectivity=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return oy.ActorRdfJoinSelectivity=e,oy}var yse;function ast(){return yse||(yse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ist(),t)}(_4)),_4}var bse;function sst(){var a;if(bse)return ld;bse=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.JoinTypes=ld.ActorRdfJoinSelectivityVariableCounting=void 0;const t=ast(),e=ke(),r=Ft();let n=(a=class extends t.ActorRdfJoinSelectivity{constructor(o){super(o)}async test(o){return(0,e.passTest)({accuracy:.5})}static getPatternCost(o){let c=1;return o.subject.termType==="Variable"&&(c+=4),("termType"in o.predicate&&o.predicate.termType==="Variable"||o.type===r.Algebra.Types.PATH)&&(c+=1),o.object.termType==="Variable"&&(c+=2),o.graph.termType==="Variable"&&(c+=1),c/9}static getJoinTypes(o,c){const u=[];return o.subject.termType==="Variable"?(o.subject.equals(c.subject)&&u.push(i.unboundSS),c.type==="pattern"&&o.subject.equals(c.predicate)&&u.push(i.unboundSP),o.subject.equals(c.object)&&u.push(i.unboundSO),o.subject.equals(c.graph)&&u.push(i.unboundSG)):(o.subject.equals(c.subject)&&u.push(i.boundSS),c.type==="pattern"&&o.subject.equals(c.predicate)&&u.push(i.boundSP),o.subject.equals(c.object)&&u.push(i.boundSO),o.subject.equals(c.graph)&&u.push(i.boundSG)),o.type==="pattern"&&(o.predicate.termType==="Variable"?(o.predicate.equals(c.subject)&&u.push(i.unboundPS),c.type==="pattern"&&o.predicate.equals(c.predicate)&&u.push(i.unboundPP),o.predicate.equals(c.object)&&u.push(i.unboundPO),o.predicate.equals(c.graph)&&u.push(i.unboundPG)):(o.predicate.equals(c.subject)&&u.push(i.boundPS),c.type==="pattern"&&o.predicate.equals(c.predicate)&&u.push(i.boundPP),o.predicate.equals(c.object)&&u.push(i.boundPO),o.predicate.equals(c.graph)&&u.push(i.boundPG))),o.object.termType==="Variable"?(o.object.equals(c.subject)&&u.push(i.unboundOS),c.type==="pattern"&&o.object.equals(c.predicate)&&u.push(i.unboundOP),o.object.equals(c.object)&&u.push(i.unboundOO),o.object.equals(c.graph)&&u.push(i.unboundOG)):(o.object.equals(c.subject)&&u.push(i.boundOS),c.type==="pattern"&&o.object.equals(c.predicate)&&u.push(i.boundOP),o.object.equals(c.object)&&u.push(i.boundOO),o.object.equals(c.graph)&&u.push(i.boundOG)),o.graph.termType==="Variable"?(o.graph.equals(c.subject)&&u.push(i.unboundGS),c.type==="pattern"&&o.graph.equals(c.predicate)&&u.push(i.unboundGP),o.graph.equals(c.object)&&u.push(i.unboundGO),o.graph.equals(c.graph)&&u.push(i.unboundGG)):(o.graph.equals(c.subject)&&u.push(i.boundGS),c.type==="pattern"&&o.graph.equals(c.predicate)&&u.push(i.boundGP),o.graph.equals(c.object)&&u.push(i.boundGO),o.graph.equals(c.graph)&&u.push(i.boundGG)),u}static getOperationsPairwiseJoinCost(o,c){let u=a.MAX_PAIRWISE_COST;for(const l of a.getJoinTypes(o,c))switch(l){case i.boundSS:u-=2*2;break;case i.boundSP:u-=3*2;break;case i.boundSO:u-=1*2;break;case i.boundSG:u-=3*2;break;case i.boundPS:u-=3*2;break;case i.boundPP:return 1;case i.boundPO:u-=3*2;break;case i.boundPG:u-=3*2;break;case i.boundOS:u-=1*2;break;case i.boundOP:u-=3*2;break;case i.boundOO:u-=1*2;break;case i.boundOG:u-=3*2;break;case i.boundGS:u-=3*2;break;case i.boundGP:u-=3*2;break;case i.boundGO:u-=3*2;break;case i.boundGG:u-=3*2;break;case i.unboundSS:u-=2;break;case i.unboundSP:u-=3;break;case i.unboundSO:u-=1;break;case i.unboundSG:u-=3;break;case i.unboundPS:u-=3;break;case i.unboundPP:u-=3;break;case i.unboundPO:u-=3;break;case i.unboundPG:u-=3;break;case i.unboundOS:u-=1;break;case i.unboundOP:u-=3;break;case i.unboundOO:u-=1;break;case i.unboundOG:u-=3;break;case i.unboundGS:u-=3;break;case i.unboundGP:u-=3;break;case i.unboundGO:u-=3;break;case i.unboundGG:u-=3;break}return u/a.MAX_PAIRWISE_COST}static getOperationsJoinCost(o){const c=[];for(const d of o)r.algebraUtils.visitOperation(d,{[r.Algebra.Types.PATTERN]:{preVisitor:f=>(c.push(f),{continue:!1})},[r.Algebra.Types.PATH]:{preVisitor:f=>(c.push(f),{continue:!1})}});let u=0,l=0;for(const d of c)for(const f of c)d!==f&&(u+=a.getOperationsPairwiseJoinCost(d,f),l++);return l===0?1:u/l*c.reduce((d,f)=>d*a.getPatternCost(f),1)}async run(o){return o.entries.length<=1?{selectivity:1}:{selectivity:a.getOperationsJoinCost(o.entries.map(c=>c.operation))}}},k(a,"MAX_PAIRWISE_COST",41*2),a);ld.ActorRdfJoinSelectivityVariableCounting=n;var i;return function(s){s[s.boundSS=0]="boundSS",s[s.boundSP=1]="boundSP",s[s.boundSO=2]="boundSO",s[s.boundSG=3]="boundSG",s[s.boundPS=4]="boundPS",s[s.boundPP=5]="boundPP",s[s.boundPO=6]="boundPO",s[s.boundPG=7]="boundPG",s[s.boundOS=8]="boundOS",s[s.boundOP=9]="boundOP",s[s.boundOO=10]="boundOO",s[s.boundOG=11]="boundOG",s[s.boundGS=12]="boundGS",s[s.boundGP=13]="boundGP",s[s.boundGO=14]="boundGO",s[s.boundGG=15]="boundGG",s[s.unboundSS=16]="unboundSS",s[s.unboundSP=17]="unboundSP",s[s.unboundSO=18]="unboundSO",s[s.unboundSG=19]="unboundSG",s[s.unboundPS=20]="unboundPS",s[s.unboundPP=21]="unboundPP",s[s.unboundPO=22]="unboundPO",s[s.unboundPG=23]="unboundPG",s[s.unboundOS=24]="unboundOS",s[s.unboundOP=25]="unboundOP",s[s.unboundOO=26]="unboundOO",s[s.unboundOG=27]="unboundOG",s[s.unboundGS=28]="unboundGS",s[s.unboundGP=29]="unboundGP",s[s.unboundGO=30]="unboundGO",s[s.unboundGG=31]="unboundGG"}(i||(ld.JoinTypes=i={})),ld}var vse;function ost(){return vse||(vse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(sst(),t)}(p4)),p4}var m4={},uy={},g4={},cy={},Ase;function ust(){if(Ase)return cy;Ase=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.ActorRdfMetadata=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return cy.ActorRdfMetadata=e,cy}var Tse;function e2e(){return Tse||(Tse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ust(),t)}(g4)),g4}var wse;function cst(){if(wse)return uy;wse=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.ActorRdfMetadataPrimaryTopic=void 0;const t=e2e(),e=ke(),r=Wt;let n=class extends t.ActorRdfMetadata{constructor(s){super(s);k(this,"metadataToData");k(this,"dataToMetadataOnInvalidMetadataGraph");this.metadataToData=s.metadataToData,this.dataToMetadataOnInvalidMetadataGraph=s.dataToMetadataOnInvalidMetadataGraph}async test(s){return s.triples?(0,e.failTest)("This actor only supports non-triple quad streams."):(0,e.passTestVoid)()}async run(s){const o=new r.Readable({objectMode:!0}),c=new r.Readable({objectMode:!0}),u=()=>{o._read=c._read=()=>{},s.quads.on("error",h=>{o.emit("error",h),c.emit("error",h)});const l={};let d;const f={};s.quads.on("data",h=>{h.predicate.value==="http://rdfs.org/ns/void#subset"&&h.object.value===s.url?d=h.subject.value:h.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(f[h.object.value]=h.subject.value);let p=l[h.graph.value];p||(p=l[h.graph.value]=[]),p.push(h)}),s.quads.on("end",()=>{const h=d?f[d]:void 0;for(const p in l)if(p===h){for(const _ of l[p])c.push(_);if(this.metadataToData)for(const _ of l[p])o.push(_)}else{for(const _ of l[p])o.push(_);if(!h&&this.dataToMetadataOnInvalidMetadataGraph)for(const _ of l[p])c.push(_)}o.push(null),c.push(null)})};return o._read=c._read=()=>{u()},{data:o,metadata:c}}};return uy.ActorRdfMetadataPrimaryTopic=n,uy}var Sse;function lst(){return Sse||(Sse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(cst(),t)}(m4)),m4}var y4={},ly={},xse;function dst(){if(xse)return ly;xse=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.ActorRdfMetadataAll=void 0;const t=e2e(),e=ke(),r=Wt;let n=class extends t.ActorRdfMetadata{constructor(a){super(a)}async test(a){return(0,e.passTestVoid)()}async run(a){const s=new r.Readable({objectMode:!0}),o=new r.Readable({objectMode:!0});a.quads.on("error",u=>{s.emit("error",u),o.emit("error",u)}),a.quads.on("end",()=>{s.push(null),o.push(null)});const c=s._read=o._read=u=>{for(;u>0;){const l=a.quads.read();if(l===null)return a.quads.once("readable",()=>c(u));u--,s.push(l),o.push(l)}};return{data:s,metadata:o}}};return ly.ActorRdfMetadataAll=n,ly}var Ese;function fst(){return Ese||(Ese=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(dst(),t)}(y4)),y4}var b4={},dy={},v4={},fy={},Ise;function hst(){if(Ise)return fy;Ise=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.ActorRdfMetadataAccumulate=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return fy.ActorRdfMetadataAccumulate=e,fy}var Ose;function Wz(){return Ose||(Ose=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(hst(),t)}(v4)),v4}var Rse;function pst(){if(Rse)return dy;Rse=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.ActorRdfMetadataAccumulateCardinality=void 0;const t=Wz(),e=ke();let r=class extends t.ActorRdfMetadataAccumulate{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){if(i.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const a={...i.accumulatedMetadata.cardinality};if(a.dataset){if(i.accumulatedMetadata.defaultGraph===a.dataset&&a.dataset!==i.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:i.appendingMetadata.cardinality}};if(i.appendingMetadata.cardinality.dataset){if(a.dataset!==i.appendingMetadata.cardinality.dataset&&i.appendingMetadata.subsetOf===a.dataset)return{metadata:{cardinality:i.appendingMetadata.cardinality}};if(a.dataset===i.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:a}};delete a.dataset}else return{metadata:{cardinality:a}}}return!i.appendingMetadata.cardinality||!Number.isFinite(i.appendingMetadata.cardinality.value)?(a.type="estimate",a.value=Number.POSITIVE_INFINITY):(i.appendingMetadata.cardinality.type==="estimate"&&(a.type="estimate"),a.value+=i.appendingMetadata.cardinality.value),{metadata:{cardinality:a}}}};return dy.ActorRdfMetadataAccumulateCardinality=r,dy}var Pse;function _st(){return Pse||(Pse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(pst(),t)}(b4)),b4}var A4={},hy={},Nse;function mst(){if(Nse)return hy;Nse=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.ActorRdfMetadataAccumulatePageSize=void 0;const t=Wz(),e=ke();let r=class extends t.ActorRdfMetadataAccumulate{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){return i.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in i.accumulatedMetadata||"pageSize"in i.appendingMetadata?{pageSize:(i.accumulatedMetadata.pageSize??0)+(i.appendingMetadata.pageSize??0)}:{}}}}};return hy.ActorRdfMetadataAccumulatePageSize=r,hy}var Fse;function gst(){return Fse||(Fse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mst(),t)}(A4)),A4}var T4={},py={},Mse;function yst(){if(Mse)return py;Mse=1,Object.defineProperty(py,"__esModule",{value:!0}),py.ActorRdfMetadataAccumulateRequestTime=void 0;const t=Wz(),e=ke();let r=class extends t.ActorRdfMetadataAccumulate{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){return i.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in i.accumulatedMetadata||"requestTime"in i.appendingMetadata?{requestTime:(i.accumulatedMetadata.requestTime??0)+(i.appendingMetadata.requestTime??0)}:{}}}}};return py.ActorRdfMetadataAccumulateRequestTime=r,py}var Dse;function bst(){return Dse||(Dse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(yst(),t)}(T4)),T4}var w4={},_y={},S4={},my={},Cse;function vst(){if(Cse)return my;Cse=1,Object.defineProperty(my,"__esModule",{value:!0}),my.ActorRdfMetadataExtract=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return my.ActorRdfMetadataExtract=e,my}var Lse;function Xo(){return Lse||(Lse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vst(),t)}(S4)),S4}var x4={exports:{}},jse;function Ast(){return jse||(jse=1,function(t){(function(e){var r=function(){function p(_){this.options=_}return p.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},p}(),n=function(){function p(P){return Object.prototype.toString.apply(P)==="[object Array]"}function _(P){return Object.prototype.toString.apply(P)==="[object String]"}function g(P){return Object.prototype.toString.apply(P)==="[object Number]"}function m(P){return Object.prototype.toString.apply(P)==="[object Boolean]"}function y(P,j){var F="",N=!0,R;for(R=0;R<P.length;R+=1)N?N=!1:F+=j,F+=P[R];return F}function v(P,j){for(var F=[],N=0;N<P.length;N+=1)F.push(j(P[N]));return F}function A(P,j){for(var F=[],N=0;N<P.length;N+=1)j(P[N])&&F.push(P[N]);return F}function T(P){if(typeof P!="object"||P===null)return P;Object.freeze(P);var j,F;for(F in P)P.hasOwnProperty(F)&&(j=P[F],typeof j=="object"&&S(j));return P}function S(P){return typeof Object.freeze=="function"?T(P):P}return{isArray:p,isString:_,isNumber:g,isBoolean:m,join:y,map:v,filter:A,deepFreeze:S}}(),i=function(){function p(m){return m>="a"&&m<="z"||m>="A"&&m<="Z"}function _(m){return m>="0"&&m<="9"}function g(m){return _(m)||m>="a"&&m<="f"||m>="A"&&m<="F"}return{isAlpha:p,isDigit:_,isHexDigit:g}}(),a=function(){var p={encode:function(A){return unescape(encodeURIComponent(A))},numBytes:function(A){return A<=127?1:194<=A&&A<=223?2:224<=A&&A<=239?3:240<=A&&A<=244?4:0},isValidFollowingCharCode:function(A){return 128<=A&&A<=191}};function _(A){var T="",S=p.encode(A),P,j;for(j=0;j<S.length;j+=1)P=S.charCodeAt(j),T+="%"+(P<16?"0":"")+P.toString(16).toUpperCase();return T}function g(A,T){return A.charAt(T)==="%"&&i.isHexDigit(A.charAt(T+1))&&i.isHexDigit(A.charAt(T+2))}function m(A,T){return parseInt(A.substr(T,2),16)}function y(A){if(!g(A,0))return!1;var T=m(A,1),S=p.numBytes(T);if(S===0)return!1;for(var P=1;P<S;P+=1)if(!g(A,3*P)||!p.isValidFollowingCharCode(m(A,3*P+1)))return!1;return!0}function v(A,T){var S=A.charAt(T);if(!g(A,T))return S;var P=m(A,T+1),j=p.numBytes(P);if(j===0)return S;for(var F=1;F<j;F+=1)if(!g(A,T+3*F)||!p.isValidFollowingCharCode(m(A,T+3*F+1)))return S;return A.substr(T,3*j)}return{encodeCharacter:_,isPctEncoded:y,pctCharAt:v}}(),s=function(){function p(m){return i.isAlpha(m)||i.isDigit(m)||m==="_"||a.isPctEncoded(m)}function _(m){return i.isAlpha(m)||i.isDigit(m)||m==="-"||m==="."||m==="_"||m==="~"}function g(m){return m===":"||m==="/"||m==="?"||m==="#"||m==="["||m==="]"||m==="@"||m==="!"||m==="$"||m==="&"||m==="("||m===")"||m==="*"||m==="+"||m===","||m===";"||m==="="||m==="'"}return{isVarchar:p,isUnreserved:_,isReserved:g}}(),o=function(){function p(y,v){var A="",T,S="";for((typeof y=="number"||typeof y=="boolean")&&(y=y.toString()),T=0;T<y.length;T+=S.length)S=y.charAt(T),A+=s.isUnreserved(S)||v&&s.isReserved(S)?S:a.encodeCharacter(S);return A}function _(y){return p(y,!0)}function g(y,v){var A=a.pctCharAt(y,v);return A.length>1||s.isReserved(A)||s.isUnreserved(A)?A:a.encodeCharacter(A)}function m(y){var v="",A,T="";for(A=0;A<y.length;A+=T.length)T=a.pctCharAt(y,A),T.length>1?v+=T:v+=s.isReserved(T)||s.isUnreserved(T)?T:a.encodeCharacter(T);return v}return{encode:p,encodePassReserved:_,encodeLiteral:m,encodeLiteralCharacter:g}}(),c=function(){var p={};function _(g){p[g]={symbol:g,separator:g==="?"?"&":g===""||g==="+"||g==="#"?",":g,named:g===";"||g==="&"||g==="?",ifEmpty:g==="&"||g==="?"?"=":"",first:g==="+"?"":g,encode:g==="+"||g==="#"?o.encodePassReserved:o.encode,toString:function(){return this.symbol}}}return _(""),_("+"),_("#"),_("."),_("/"),_(";"),_("?"),_("&"),{valueOf:function(g){return p[g]?p[g]:"=,!@|".indexOf(g)>=0?null:p[""]}}}();function u(p){var _;if(p==null)return!1;if(n.isArray(p))return p.length>0;if(typeof p=="string"||typeof p=="number"||typeof p=="boolean")return!0;for(_ in p)if(p.hasOwnProperty(_)&&u(p[_]))return!0;return!1}var l=function(){function p(_){this.literal=o.encodeLiteral(_)}return p.prototype.expand=function(){return this.literal},p.prototype.toString=p.prototype.expand,p}(),d=function(){function p(g){var m,y=[],v=null,A=null,T=null,S,P="";function j(){var N=g.substring(A,S);if(N.length===0)throw new r({expressionText:g,message:"a varname must be specified",position:S});v={varname:N,exploded:!1,maxLength:null},A=null}function F(){if(T===S)throw new r({expressionText:g,message:"after a ':' you have to specify the length",position:S});v.maxLength=parseInt(g.substring(T,S),10),T=null}for(m=function(N){var R=c.valueOf(N);if(R===null)throw new r({expressionText:g,message:"illegal use of reserved operator",position:S,operator:N});return R}(g.charAt(0)),S=m.symbol.length,A=S;S<g.length;S+=P.length){if(P=a.pctCharAt(g,S),A!==null){if(P==="."){if(A===S)throw new r({expressionText:g,message:"a varname MUST NOT start with a dot",position:S});continue}if(s.isVarchar(P))continue;j()}if(T!==null){if(S===T&&P==="0")throw new r({expressionText:g,message:"A :prefix must not start with digit 0",position:S});if(i.isDigit(P)){if(S-T>=4)throw new r({expressionText:g,message:"A :prefix must have max 4 digits",position:S});continue}F()}if(P===":"){if(v.maxLength!==null)throw new r({expressionText:g,message:"only one :maxLength is allowed per varspec",position:S});if(v.exploded)throw new r({expressionText:g,message:"an exploeded varspec MUST NOT be varspeced",position:S});T=S+1;continue}if(P==="*"){if(v===null)throw new r({expressionText:g,message:"exploded without varspec",position:S});if(v.exploded)throw new r({expressionText:g,message:"exploded twice",position:S});if(v.maxLength)throw new r({expressionText:g,message:"an explode (*) MUST NOT follow to a prefix",position:S});v.exploded=!0;continue}if(P===","){y.push(v),v=null,A=S+1;continue}throw new r({expressionText:g,message:"illegal character",character:P,position:S})}return A!==null&&j(),T!==null&&F(),y.push(v),new f(g,m,y)}function _(g){var m,y,v=[],A=null,T=0;for(m=0;m<g.length;m+=1){if(y=g.charAt(m),T!==null){if(y==="}")throw new r({templateText:g,message:"unopened brace closed",position:m});y==="{"&&(T<m&&v.push(new l(g.substring(T,m))),T=null,A=m);continue}if(A!==null){if(y==="{")throw new r({templateText:g,message:"brace already opened",position:m});if(y==="}"){if(A+1===m)throw new r({templateText:g,message:"empty braces",position:A});try{v.push(p(g.substring(A+1,m)))}catch(S){throw S.prototype===r.prototype?new r({templateText:g,message:S.options.message,position:A+S.options.position,details:S.options}):S}A=null,T=m+1}continue}throw new Error("reached unreachable code")}if(A!==null)throw new r({templateText:g,message:"unclosed brace",position:A});return T<g.length&&v.push(new l(g.substr(T))),new h(g,v)}return _}(),f=function(){function p(P){return JSON&&JSON.stringify?JSON.stringify(P):P}function _(P){if(!u(P))return!0;if(n.isString(P))return P==="";if(n.isNumber(P)||n.isBoolean(P))return!1;if(n.isArray(P))return P.length===0;for(var j in P)if(P.hasOwnProperty(j))return!1;return!0}function g(P){var j=[],F;for(F in P)P.hasOwnProperty(F)&&j.push({name:F,value:P[F]});return j}function m(P,j,F){this.templateText=P,this.operator=j,this.varspecs=F}m.prototype.toString=function(){return this.templateText};function y(P,j,F){var N="";if(F=F.toString(),j.named){if(N+=o.encodeLiteral(P.varname),F==="")return N+=j.ifEmpty,N;N+="="}return P.maxLength!==null&&(F=F.substr(0,P.maxLength)),N+=j.encode(F),N}function v(P){return u(P.value)}function A(P,j,F){var N=[],R="";if(j.named){if(R+=o.encodeLiteral(P.varname),_(F))return R+=j.ifEmpty,R;R+="="}return n.isArray(F)?(N=F,N=n.filter(N,u),N=n.map(N,j.encode),R+=n.join(N,",")):(N=g(F),N=n.filter(N,v),N=n.map(N,function(C){return j.encode(C.name)+","+j.encode(C.value)}),R+=n.join(N,",")),R}function T(P,j,F){var N=n.isArray(F),R=[];return N?(R=F,R=n.filter(R,u),R=n.map(R,function(C){var M=o.encodeLiteral(P.varname);return _(C)?M+=j.ifEmpty:M+="="+j.encode(C),M})):(R=g(F),R=n.filter(R,v),R=n.map(R,function(C){var M=o.encodeLiteral(C.name);return _(C.value)?M+=j.ifEmpty:M+="="+j.encode(C.value),M})),n.join(R,j.separator)}function S(P,j){var F=[],N="";return n.isArray(j)?(F=j,F=n.filter(F,u),F=n.map(F,P.encode),N+=n.join(F,P.separator)):(F=g(j),F=n.filter(F,function(R){return u(R.value)}),F=n.map(F,function(R){return P.encode(R.name)+"="+P.encode(R.value)}),N+=n.join(F,P.separator)),N}return m.prototype.expand=function(P){var j=[],F,N,R,C=this.operator;for(F=0;F<this.varspecs.length;F+=1)if(N=this.varspecs[F],R=P[N.varname],R!=null)if(N.exploded,n.isArray(R),typeof R=="string"||typeof R=="number"||typeof R=="boolean")j.push(y(N,C,R));else{if(N.maxLength&&u(R))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+p(R));N.exploded?u(R)&&(C.named?j.push(T(N,C,R)):j.push(S(C,R))):(C.named||!_(R))&&j.push(A(N,C,R))}return j.length===0?"":C.first+n.join(j,C.separator)},m}(),h=function(){function p(_,g){this.templateText=_,this.expressions=g,n.deepFreeze(this)}return p.prototype.toString=function(){return this.templateText},p.prototype.expand=function(_){var g,m="";for(g=0;g<this.expressions.length;g+=1)m+=this.expressions[g].expand(_);return m},p.parse=d,p.UriTemplateError=r,p}();e(h)})(function(e){t.exports=e})}(x4)),x4.exports}var Bse;function Tst(){var i;if(Bse)return _y;Bse=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.ActorRdfMetadataExtractHydraControls=void 0;const t=Xo(),e=ke(),r=Ast();let n=(i=class extends t.ActorRdfMetadataExtract{constructor(o){super(o);k(this,"parsedUriTemplateCache",{})}async test(o){return(0,e.passTestVoid)()}getLinks(o,c){return Object.fromEntries(i.LINK_TYPES.map(u=>{const l=c[u]||c[`${u}Page`],d=l&&l[o];return[u,d&&d.length>0?[d[0]]:[]]}))}parseUriTemplateCached(o){const c=this.parsedUriTemplateCache[o];return c||(this.parsedUriTemplateCache[o]=(0,r.parse)(o))}getSearchForms(o){const c=o.search,u=[];if(c)for(const l in c)for(const d of c[l]){const f=(o.template||{})[d]||[];if(f.length!==1)throw new Error(`Expected 1 hydra:template for ${d}`);const h=f[0],p=this.parseUriTemplateCached(h),_=Object.fromEntries(((o.mapping||{})[d]||[]).map(m=>{const y=((o.variable||{})[m]||[])[0],v=((o.property||{})[m]||[])[0];if(!y)throw new Error(`Expected a hydra:variable for ${m}`);if(!v)throw new Error(`Expected a hydra:property for ${m}`);return[v,y]})),g=m=>p.expand(Object.fromEntries(Object.keys(m).map(y=>[_[y],m[y]])));u.push({dataset:l,template:h,mappings:_,getUri:g})}return{values:u}}getHydraProperties(o){return new Promise((c,u)=>{o.on("error",u);const l={};o.on("data",d=>{if(d.predicate.value.startsWith(i.HYDRA)){const f=d.predicate.value.slice(i.HYDRA.length),h=l[f]||(l[f]={});(h[d.subject.value]||(h[d.subject.value]=[])).push(d.object.value)}}),o.on("end",()=>c(l))})}async run(o){const c={},u=await this.getHydraProperties(o.metadata);return Object.assign(c,this.getLinks(o.url,u)),c.searchForms=this.getSearchForms(u),{metadata:c}}},k(i,"HYDRA","http://www.w3.org/ns/hydra/core#"),k(i,"LINK_TYPES",["first","next","previous","last"]),i);return _y.ActorRdfMetadataExtractHydraControls=n,_y}var qse;function wst(){return qse||(qse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tst(),t)}(w4)),w4}var E4={},gy={},Use;function Sst(){if(Use)return gy;Use=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.ActorRdfMetadataExtractHydraCount=void 0;const t=Xo(),e=ke();let r=class extends t.ActorRdfMetadataExtract{constructor(a){super(a);k(this,"predicates");this.predicates=a.predicates}async test(a){return(0,e.passTestVoid)()}run(a){return new Promise((s,o)=>{a.metadata.on("error",o),a.metadata.on("data",c=>{this.predicates.includes(c.predicate.value)&&s({metadata:{cardinality:{type:"estimate",value:Number.parseInt(c.object.value,10),dataset:c.subject.value}}})}),a.metadata.on("end",()=>{s({metadata:{cardinality:{type:"estimate",value:0}}})})})}};return gy.ActorRdfMetadataExtractHydraCount=r,gy}var Vse;function xst(){return Vse||(Vse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Sst(),t)}(E4)),E4}var I4={},yy={},Gse;function Est(){if(Gse)return yy;Gse=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.ActorRdfMetadataExtractHydraPagesize=void 0;const t=Xo(),e=ke();let r=class extends t.ActorRdfMetadataExtract{constructor(a){super(a);k(this,"predicates");this.predicates=a.predicates}async test(a){return(0,e.passTestVoid)()}async run(a){return new Promise((s,o)=>{a.metadata.on("error",o),a.metadata.on("data",c=>{this.predicates.includes(c.predicate.value)&&s({metadata:{pageSize:Number.parseInt(c.object.value,10)}})}),a.metadata.on("end",()=>{s({metadata:{}})})})}};return yy.ActorRdfMetadataExtractHydraPagesize=r,yy}var Hse;function Ist(){return Hse||(Hse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Est(),t)}(I4)),I4}var O4={},by={},kse;function Ost(){if(kse)return by;kse=1,Object.defineProperty(by,"__esModule",{value:!0}),by.ActorRdfMetadataExtractRequestTime=void 0;const t=Xo(),e=ke();let r=class extends t.ActorRdfMetadataExtract{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){return{metadata:{requestTime:i.requestTime}}}};return by.ActorRdfMetadataExtractRequestTime=r,by}var zse;function Rst(){return zse||(zse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ost(),t)}(O4)),O4}var R4={},vy={},Qse;function Pst(){if(Qse)return vy;Qse=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.ActorRdfMetadataExtractAllowHttpMethods=void 0;const t=Xo(),e=ke();let r=class extends t.ActorRdfMetadataExtract{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){var s,o;const a={};return(s=i.headers)!=null&&s.get("allow")&&(a.allowHttpMethods=(o=i.headers.get("allow"))==null?void 0:o.split(/, */u)),{metadata:a}}};return vy.ActorRdfMetadataExtractAllowHttpMethods=r,vy}var Wse;function Nst(){return Wse||(Wse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pst(),t)}(R4)),R4}var P4={},Ay={},Kse;function Fst(){if(Kse)return Ay;Kse=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.ActorRdfMetadataExtractPostAccepted=void 0;const t=Xo(),e=ke();let r=class extends t.ActorRdfMetadataExtract{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){var o;const a={},s=(o=i.headers)==null?void 0:o.get("accept-post");return s&&(a.postAccepted=s.split(/, */u)),{metadata:a}}};return Ay.ActorRdfMetadataExtractPostAccepted=r,Ay}var Xse;function Mst(){return Xse||(Xse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fst(),t)}(P4)),P4}var N4={},Ty={},Jse;function Dst(){if(Jse)return Ty;Jse=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.ActorRdfMetadataExtractPutAccepted=void 0;const t=Xo(),e=ke();let r=class extends t.ActorRdfMetadataExtract{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){var o;const a={},s=(o=i.headers)==null?void 0:o.get("accept-put");return s&&(a.putAccepted=s.split(/, */u)),{metadata:a}}};return Ty.ActorRdfMetadataExtractPutAccepted=r,Ty}var Yse;function Cst(){return Yse||(Yse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dst(),t)}(N4)),N4}var F4={},wy={},$se;function Lst(){if($se)return wy;$se=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const t=Xo(),e=ke();let r=class extends t.ActorRdfMetadataExtract{constructor(i){super(i)}async test(i){return(0,e.passTestVoid)()}async run(i){var s,o,c,u;const a={};return(((o=(s=i.headers)==null?void 0:s.get("accept-patch"))==null?void 0:o.includes("application/sparql-update"))??((u=(c=i.headers)==null?void 0:c.get("ms-author-via"))==null?void 0:u.includes("SPARQL")))&&(a.patchSparqlUpdate=!0),{metadata:a}}};return wy.ActorRdfMetadataExtractPatchSparqlUpdate=r,wy}var Zse;function jst(){return Zse||(Zse=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lst(),t)}(F4)),F4}var M4={},Sy={},eoe;function Bst(){var i;if(eoe)return Sy;eoe=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.ActorRdfMetadataExtractSparqlService=void 0;const t=Xo(),e=ke(),r=Bn();let n=(i=class extends t.ActorRdfMetadataExtract{constructor(o){super(o);k(this,"inferHttpsEndpoint");this.inferHttpsEndpoint=o.inferHttpsEndpoint}async test(o){return(0,e.passTestVoid)()}async run(o){return new Promise((c,u)=>{o.metadata.on("error",u);const l=new Set([o.url]),d={},f=new Set,h=new Set,p=new Set,_=new Set,g=new Set;o.metadata.on("data",m=>{if(m.predicate.value==="http://rdfs.org/ns/void#subset"&&m.object.value===o.url)l.add(m.subject.value);else if(m.subject.value===d.defaultDataset||m.subject.termType==="BlankNode"||l.has(m.subject.value))switch(m.predicate.value){case`${i.SD}endpoint`:d.sparqlService=m.object.termType==="Literal"?(0,r.resolve)(m.object.value,o.url):m.object.value,this.inferHttpsEndpoint&&o.url.startsWith("https")&&!m.object.value.startsWith("https")&&(d.sparqlService=d.sparqlService.replace(/^http:/u,"https:"));break;case`${i.SD}defaultDataset`:d.defaultDataset=m.object.value;break;case`${i.SD}defaultGraph`:d.defaultGraph=m.object.value;break;case`${i.SD}inputFormat`:f.add(m.object.value);break;case`${i.SD}resultFormat`:h.add(m.object.value);break;case`${i.SD}supportedLanguage`:p.add(m.object.value);break;case`${i.SD}propertyFeature`:g.add(m.object.value);break;case`${i.SD}feature`:m.object.value===`${i.SD}UnionDefaultGraph`?d.unionDefaultGraph=!0:m.object.value===`${i.SD}BasicFederatedQuery`&&(d.basicFederatedQuery=!0);break;case`${i.SD}extensionFunction`:_.add(m.object.value);break}}),o.metadata.on("end",()=>{c({metadata:{...d,...f.size>0?{inputFormats:[...f.values()]}:{},...h.size>0?{resultFormats:[...h.values()]}:{},...p.size>0?{supportedLanguages:[...p.values()]}:{},..._.size>0?{extensionFunctions:[..._.values()]}:{},...g.size>0?{propertyFeatures:[...g.values()]}:{}}})})})}},k(i,"SD","http://www.w3.org/ns/sparql-service-description#"),i);return Sy.ActorRdfMetadataExtractSparqlService=n,Sy}var toe;function qst(){return toe||(toe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Bst(),t)}(M4)),M4}var D4={},xy={},C4={},roe;function t2e(){return roe||(roe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VOID_CLASS_PARTITION=t.VOID_PROPERTY_PARTITION=t.VOID_DISTINCT_SUBJECTS=t.VOID_DISTINCT_OBJECTS=t.VOID_URI_REGEX_PATTERN=t.VOID_URI_SPACE=t.VOID_VOCABULARY=t.VOID_PROPERTY=t.VOID_CLASS=t.VOID_ENTITIES=t.VOID_TRIPLES=t.VOID_CLASSES=t.VOID_DATASET=t.VOID=t.SD_GRAPH=t.SD_FEATURE=t.SD_UNION_DEFAULT_GRAPH=t.SD_DEFAULT_GRAPH=t.SD_DEFAULT_DATASET=t.SD=t.RDF_TYPE=void 0,t.RDF_TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",t.SD="http://www.w3.org/ns/sparql-service-description#",t.SD_DEFAULT_DATASET=`${t.SD}defaultDataset`,t.SD_DEFAULT_GRAPH=`${t.SD}defaultGraph`,t.SD_UNION_DEFAULT_GRAPH=`${t.SD}UnionDefaultGraph`,t.SD_FEATURE=`${t.SD}feature`,t.SD_GRAPH=`${t.SD}Graph`,t.VOID="http://rdfs.org/ns/void#",t.VOID_DATASET=`${t.VOID}Dataset`,t.VOID_CLASSES=`${t.VOID}classes`,t.VOID_TRIPLES=`${t.VOID}triples`,t.VOID_ENTITIES=`${t.VOID}entities`,t.VOID_CLASS=`${t.VOID}class`,t.VOID_PROPERTY=`${t.VOID}property`,t.VOID_VOCABULARY=`${t.VOID}vocabulary`,t.VOID_URI_SPACE=`${t.VOID}uriSpace`,t.VOID_URI_REGEX_PATTERN=`${t.VOID}uriRegexPattern`,t.VOID_DISTINCT_OBJECTS=`${t.VOID}distinctSubjects`,t.VOID_DISTINCT_SUBJECTS=`${t.VOID}distinctObjects`,t.VOID_PROPERTY_PARTITION=`${t.VOID}propertyPartition`,t.VOID_CLASS_PARTITION=`${t.VOID}classPartition`}(C4)),C4}var Ia={},noe;function Ust(){if(noe)return Ia;noe=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.estimatePatternCardinality=e,Ia.matchPatternResourceUris=r,Ia.matchPatternVocabularies=n,Ia.estimatePatternCardinalityRaw=i,Ia.getDistinctObjects=a,Ia.getDistinctSubjects=s,Ia.getPredicateObjects=o,Ia.getPredicateSubjects=c,Ia.getPredicateTriples=u,Ia.getClassPartitionEntities=l;const t=t2e();function e(d,f){const h={type:"exact",value:0};if(n(d,f)&&r(d,f)){const p=i(d,f);p>0&&(h.value=p,h.type="estimate")}return h}function r(d,f){return!d.uriRegexPattern||f.subject.termType!=="NamedNode"||d.uriRegexPattern.test(f.subject.value)||f.object.termType!=="NamedNode"||d.uriRegexPattern.test(f.object.value)}function n(d,f){return d.vocabularies!==void 0&&f.predicate.termType==="NamedNode"?d.vocabularies.some(h=>f.predicate.value.startsWith(h)):!0}function i(d,f){if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&f.predicate.value===t.RDF_TYPE&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"))return l(d,f.object);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&f.object.termType==="Variable")return d.triples;if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=s(d);if(h>0)return d.triples/h}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal"))return u(d,f.predicate);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"||f.object.termType==="Literal")){const h=a(d);if(h>0)return d.triples/h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=u(d,f.predicate),p=c(d,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=s(d),p=a(d);if(h>0&&p>0)return d.triples/(h*p)}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=u(d,f.predicate),p=o(d,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=u(d,f.predicate),p=c(d,f.predicate),_=o(d,f.predicate);return p>0&&_>0?h/(p*_):h}return d.triples}function a(d){return d.distinctObjects??d.entities??d.triples}function s(d){return d.distinctSubjects??d.entities??d.triples}function o(d,f){if(d.propertyPartitions){const h=d.propertyPartitions[f.value];return(h==null?void 0:h.distinctObjects)??(h==null?void 0:h.triples)??0}return d.triples}function c(d,f){if(d.propertyPartitions){const h=d.propertyPartitions[f.value];return(h==null?void 0:h.distinctSubjects)??(h==null?void 0:h.triples)??0}return d.triples}function u(d,f){var h;return d.propertyPartitions?((h=d.propertyPartitions[f.value])==null?void 0:h.triples)??0:d.triples}function l(d,f){var h;return d.classPartitions?((h=d.classPartitions[f.value])==null?void 0:h.entities)??0:d.entities!==void 0&&d.classes?d.entities/d.classes:d.triples}return Ia}var ioe;function Vst(){if(ioe)return xy;ioe=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.ActorRdfMetadataExtractVoid=void 0;const t=Xo(),e=ke(),r=Ft(),n=t2e(),i=Ust();let a=class extends t.ActorRdfMetadataExtract{constructor(o){super(o)}async test(o){return(0,e.passTestVoid)()}async run(o){return new Promise((c,u)=>{const l=new Set,d=new Set,f={},h={},p={},_={},g={},m={},y={},v={},A={},T={},S={};let P,j,F=!1;o.metadata.on("error",u).on("data",N=>{switch(N.predicate.value){case n.RDF_TYPE:(N.object.value===n.SD_GRAPH||N.object.value===n.VOID_DATASET)&&l.add(N.subject.value);break;case n.VOID_TRIPLES:f[N.subject.value]=Number.parseInt(N.object.value,10);break;case n.VOID_ENTITIES:h[N.subject.value]=Number.parseInt(N.object.value,10);break;case n.VOID_CLASSES:_[N.subject.value]=Number.parseInt(N.object.value,10);break;case n.VOID_CLASS:S[N.subject.value]=N.object.value;break;case n.VOID_PROPERTY:A[N.subject.value]=N.object.value;break;case n.VOID_DISTINCT_OBJECTS:g[N.subject.value]=Number.parseInt(N.object.value,10);break;case n.VOID_DISTINCT_SUBJECTS:m[N.subject.value]=Number.parseInt(N.object.value,10);break;case n.VOID_VOCABULARY:p[N.subject.value]?p[N.subject.value].push(N.object.value):p[N.subject.value]=[N.object.value];break;case n.VOID_URI_SPACE:y[N.subject.value]||(y[N.subject.value]=new RegExp(`^${N.object.value}`,"u"));break;case n.VOID_URI_REGEX_PATTERN:y[N.subject.value]=new RegExp(N.object.value,"u");break;case n.VOID_PROPERTY_PARTITION:d.add(N.object.value),v[N.subject.value]?v[N.subject.value].push(N.object.value):v[N.subject.value]=[N.object.value];break;case n.VOID_CLASS_PARTITION:d.add(N.object.value),T[N.subject.value]?T[N.subject.value].push(N.object.value):T[N.subject.value]=[N.object.value];break;case n.SD_DEFAULT_DATASET:P=N.object.value;break;case n.SD_DEFAULT_GRAPH:j=N.object.value;break;case n.SD_FEATURE:N.object.value===n.SD_UNION_DEFAULT_GRAPH&&(F=!0);break}}).on("end",()=>{var M;const N=[],R=U=>{const B={};for(const G of v[U]){const K=A[G];K&&(B[K]={distinctObjects:g[G],distinctSubjects:m[G],triples:f[G]})}return B},C=U=>{const B={};for(const G of T[U]){const K=S[G];K&&(B[K]={entities:h[G],propertyPartitions:v[G]?R(G):void 0})}return B};P&&d.add(P),F&&j&&d.add(j),P&&j&&p[P]&&(p[j]=[...p[j]??[],...p[P]]);for(const U of d)l.delete(U);for(const U of l)if(f[U]){const B={entities:h[U],identifier:U,classes:_[U]??((M=T[U])==null?void 0:M.length)??0,classPartitions:T[U]?C(U):void 0,distinctObjects:g[U],distinctSubjects:m[U],propertyPartitions:v[U]?R(U):void 0,triples:f[U],uriRegexPattern:y[U],vocabularies:p[U]};N.push({uri:U,source:o.url,getCardinality:async G=>{if((0,r.isKnownOperation)(G,r.Algebra.Types.PATTERN))return{...(0,i.estimatePatternCardinality)(B,G),dataset:U}}})}c({metadata:N.length>0?{datasets:N}:{}})})})}};return xy.ActorRdfMetadataExtractVoid=a,xy}var aoe;function Gst(){return aoe||(aoe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vst(),t)}(D4)),D4}var L4={},Ey={},j4={},Iy={},soe;function Hst(){if(soe)return Iy;soe=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.ActorRdfParse=void 0;const t=h0();let e=class extends t.ActorAbstractMediaTyped{constructor(n){super(n)}};return Iy.ActorRdfParse=e,Iy}var Oy={},ooe;function kst(){if(ooe)return Oy;ooe=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.ActorRdfParseFixedMediaTypes=void 0;const t=h0(),e=ke();let r=class extends t.ActorAbstractMediaTypedFixed{constructor(i){super(i)}async testHandleChecked(i){return(0,e.passTestVoid)()}};return Oy.ActorRdfParseFixedMediaTypes=r,Oy}var uoe;function p0(){return uoe||(uoe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hst(),t),r(kst(),t)}(j4)),j4}const dd="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Ry="http://www.w3.org/2001/XMLSchema#",KR="http://www.w3.org/2000/10/swap/",Nn={xsd:{decimal:`${Ry}decimal`,boolean:`${Ry}boolean`,double:`${Ry}double`,integer:`${Ry}integer`,string:`${Ry}string`},rdf:{type:`${dd}type`,nil:`${dd}nil`,first:`${dd}first`,rest:`${dd}rest`,langString:`${dd}langString`,dirLangString:`${dd}dirLangString`,reifies:`${dd}reifies`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${KR}reify#forSome`,forAll:`${KR}reify#forAll`},log:{implies:`${KR}log#implies`,isImpliedBy:`${KR}log#isImpliedBy`}},{xsd:XR}=Nn,zst=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,coe={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Qst=/[\x00-\x20<>\\"\{\}\|\^\`]/,Wst={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_dircode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Kst=/$0^/;let Kz=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9])/i,this._dircode=/^--(ltr)|(rtl)/,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._atKeyword=/^@[a-z]+(?=[\s#<:])/i,this._keyword=/^(?:PREFIX|BASE|VERSION|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in Wst)&&this[r]instanceof RegExp&&(this[r]=Kst)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let o,c;for(;o=this._newline.exec(n);)this.comments&&(c=this._comment.exec(o[0]))&&a("comment",c[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),i=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(c=this._comment.exec(n))&&a("comment",c[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const u=this._line,l=n[0];let d="",f="",h="",p=null,_=0,g=!1;switch(l){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){g=!0;break}}else{this._n3Mode&&(_=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),f===null||Qst.test(f))return s(this);d="IRI"}else n.length>2&&n[1]==="<"&&n[2]==="("?(d="<<(",_=3):!this._lineMode&&n.length>(r?1:2)&&n[1]==="<"?(d="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(_=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",_=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))&&p[1]!=="version"?(d="langcode",f=p[1]):(p=this._atKeyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){d=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":if(n[1]==="-"){this._previousMarker==="langcode"&&(p=this._dircode.exec(n))&&(d="dircode",_=2,f=p[1]||p[2],_=f.length+2);break}(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h=typeof p[1]=="string"?XR.double:typeof p[2]=="string"?XR.decimal:XR.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":case"V":case"v":(p=this._keyword.exec(n))?d=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=XR.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(_=1,f="="):(_=2,f=">"));break;case"!":if(!this._n3Mode)break;case")":if(!r&&(n.length===1||n.length===2&&n[1]===">"))break;if(n.length>2&&n[1]===">"&&n[2]===">"){d=")>>",_=3;break}case",":case";":case"[":case"]":case"(":case"}":case"~":this._lineMode||(_=1,d=l);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",_=2):(d=l,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",_=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",f=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const m=_||p[0].length,y=a(d,f,h,u,m);this.previousToken=y,this._previousMarker=d,n=n.substr(m,n.length)}function a(o,c,u,l,d){const f=n?i-n.length:i,h=f+d,p={type:o,value:c,prefix:u,line:l,start:f,end:h};return e(null,p),p}function s(o){e(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(zst,(i,a,s,o)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return o in coe?coe[o]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const s=e.substring(n,i),o=s.split(/\r\n|\r|\n/).length-1,c=i+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(s),matchLength:c}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,s)=>a?i=a:n.push(s),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Ni.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}};const{rdf:loe,xsd:Bd}=Nn;let _0,Xst=0;const Ws={namedNode:i2e,blankNode:a2e,variable:o2e,literal:s2e,defaultGraph:Jst,quad:SG,triple:SG,fromTerm:AE,fromQuad:u2e};let Zs=class r2e{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof r2e?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},eM=class extends Zs{get termType(){return"NamedNode"}},Jd=class n2e extends Zs{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;const n=e.lastIndexOf("--");return r<e.length&&e[r++]==="@"?(n>r?e.substr(0,n):e).substr(r).toLowerCase():""}get direction(){const e=this.id,r=e.lastIndexOf("--")+2;return r>1&&r<e.length?e.substr(r).toLowerCase():""}get datatype(){return new eM(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?Bd.string:e.indexOf("--",r)>0?loe.dirLangString:loe.langString}equals(e){return e instanceof n2e?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(this.direction===e.direction||this.direction===""&&!e.direction)&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,direction:this.direction,datatype:{termType:"NamedNode",value:this.datatypeString}}}},Xz=class extends Zs{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Jz=class extends Zs{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Yz=class extends Zs{constructor(){return super(""),_0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};_0=new Yz;function Yd(t,e,r){if(e=e||Ws,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Ws)return new Jd(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);let i;if(t[n+1]==="@"){i=t.substr(n+2);const a=i.lastIndexOf("--");a>0&&a<i.length&&(i={language:i.substr(0,a),direction:i.substr(a+2)})}else i=e.namedNode(t.substr(n+3));return e.literal(t.substr(1,n-1),i);case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Yd(t[0],e,!0),Yd(t[1],e,!0),Yd(t[2],e,!0),t[3]&&Yd(t[3],e,!0))}function ol(t,e){if(typeof t=="string")return t;if(t instanceof Zs&&t.termType!=="Quad")return t.id;if(!t)return _0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}${t.direction?`--${t.direction}`:""}`:t.datatype&&t.datatype.value!==Bd.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[ol(t.subject,!0),ol(t.predicate,!0),ol(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(ol(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}let kp=class extends Zs{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||_0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function i2e(t){return new eM(t)}function a2e(t){return new Xz(t||`n3-${Xst++}`)}function s2e(t,e){if(typeof e=="string")return new Jd(`"${t}"@${e.toLowerCase()}`);if(e!==void 0&&!("termType"in e))return new Jd(`"${t}"@${e.language.toLowerCase()}${e.direction?`--${e.direction.toLowerCase()}`:""}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=Bd.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?Bd.integer:Bd.double:(r=Bd.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===Bd.string?new Jd(`"${t}"`):new Jd(`"${t}"^^${r}`)}function o2e(t){return new Jz(t)}function Jst(){return _0}function SG(t,e,r,n){return new kp(t,e,r,n)}function AE(t){if(t instanceof Zs)return t;switch(t.termType){case"NamedNode":return i2e(t.value);case"BlankNode":return a2e(t.value);case"Variable":return o2e(t.value);case"DefaultGraph":return _0;case"Literal":return s2e(t.value,t.language||t.datatype);case"Quad":return u2e(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function u2e(t){if(t instanceof kp)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return SG(AE(t.subject),AE(t.predicate),AE(t.object),AE(t.graph))}let doe=0,wO=class c2e{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&l2e(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),o=this._n3Mode=/n3/.test(r),c=a||s;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||o),this._isImpliedBy=e.isImpliedBy,c&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Kz({lineMode:c,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers,this._parseUnsupportedVersions=!!e.parseUnsupportedVersions,this._version=e.version}static _resetBlankNodePrefix(){doe=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const s=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readBeforeTopContext(e){return this._version&&!this._isValidVersion(this._version)?this._error(`Detected unsupported version as media type parameter: "${this._version}"`,e):this._readInTopContext(e)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"VERSION":this._sparqlStyle=!0;case"@version":return this._readVersion;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(a+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<(":return this._n3Mode?(this._saveContext("<<(",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Disallowed triple term as subject",e);case"<<":return this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject;default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":case"|}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._validAnnotation=!0,this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<(":return this._saveContext("<<(",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;case"<<":return this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){if(e.type==="]")return this._subject=null,this._readBlankNodeTail(e);{const r=this._contextStack;return(r.length>1&&r[r.length-2]).type==="<<"?this._error("Unexpected compound blank node expression in reified triple",e):(this._predicate=null,this._readPredicate(e))}}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,s=this._contextStack,o=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":this._saveContext("<<",this._graph,null,null,null),this._graph=null,i=this._readSubject;break;default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),e.type==="<<"&&(s[s.length-1].subject=this._subject),a===null?o.predicate===null?o.subject=n:o.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e,r){let n=this._factory.literal(this._literalValue),i;switch(e.type){case"type":case"typeIRI":const a=this._readEntity(e);if(a===void 0)return;if(a.value===Nn.rdf.langString||a.value===Nn.rdf.dirLangString)return this._error("Detected illegal (directional) languaged-tagged string with explicit datatype",e);n=this._factory.literal(this._literalValue,a),e=null;break;case"langcode":if(e.value.length>8)return this._error("Detected language tag of length larger than 8",e);n=this._factory.literal(this._literalValue,e.value),this._literalLanguage=e.value,e=null,i=this._readDirCode.bind(this,r);break}return{token:e,literal:n,readCb:i}}_readDirCode(e,r,n){if(n.type==="dircode"){const i=this._factory.literal(this._literalValue,{language:this._literalLanguage,direction:n.value});e==="subject"?this._subject=i:this._object=i,this._literalLanguage=void 0,n=null}return e==="subject"?n===null?this._readPredicateOrNamedGraph:this._readPredicateOrNamedGraph(n):this._completeObjectLiteralPost(n,r)}_completeSubjectLiteral(e){const r=this._completeLiteral(e,"subject");return this._subject=r.literal,r.readCb?r.readCb.bind(this,!1):this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e,"object");if(n)return this._object=n.literal,n.readCb?n.readCb.bind(this,r):this._completeObjectLiteralPost(n.token,r)}_completeObjectLiteralPost(e,r){return r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),e===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(e))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,i=!1;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,this._tripleTerm=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"~":r=this._readReifierInAnnotation,i=!0;break;case"{|":this._subject=this._readTripleTerm(),this._validAnnotation=!1,i=!0,r=this._readPredicate;break;case"|}":if(!this._annotation)return this._error("Unexpected annotation syntax closing",e);if(!this._validAnnotation)return this._error("Annotation block can not be empty",e);this._subject=null,this._annotation=!1,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null&&(!i||i&&!this._annotation)){const o=this._predicate,c=this._object;s?this._emit(c,o,a,n):this._emit(a,o,c,n)}return i&&(this._annotation=!0),r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_isValidVersion(e){return this._parseUnsupportedVersions||c2e.SUPPORTED_VERSIONS.includes(e)}_readVersion(e){return e.type!=="literal"?this._error("Expected literal to follow version declaration",e):e.end-e.start!==e.value.length+2?this._error("Version declarations must use single quotes",e):(this._versionCallback(e.value),this._isValidVersion(e.value)?this._readDeclarationPunctuation:this._error(`Detected unsupported version: "${e.value}"`,e))}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._factory.blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readTripleTermTail(e){if(e.type!==")>>")return this._error(`Expected )>> but got ${e.type}`,e);const r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<(",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_readReifiedTripleTailOrReifier(e){return e.type==="~"?this._readReifier:this._readReifiedTripleTail(e)}_readReifiedTripleTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);this._tripleTerm=null;const r=this._readTripleTerm();this._restoreContext("<<",e);const n=this._contextStack,i=n.length&&n[n.length-1];return i&&i.type==="list"?(this._emit(this._subject,this.RDF_FIRST,r,this._graph),this._getContextEndReader()):this._subject===null?(this._subject=r,this._readPredicateOrReifierTripleEnd):(this._object=r,this._getContextEndReader())}_readPredicateOrReifierTripleEnd(e){return e.type==="."?(this._subject=null,this._readPunctuation(e)):this._readPredicate(e)}_readReifier(e){return this._reifier=this._readEntity(e),this._readReifiedTripleTail}_readReifierInAnnotation(e){return e.type==="IRI"||e.type==="typeIRI"||e.type==="type"||e.type==="prefixed"||e.type==="blank"||e.type==="var"?(this._reifier=this._readEntity(e),this._readPunctuation):(this._readTripleTerm(),this._subject=null,this._readPunctuation(e))}_readTripleTerm(){const e=this._contextStack,r=e.length&&e[e.length-1],n=r?r.graph:void 0,i=this._reifier||this._factory.blankNode();return this._reifier=null,this._tripleTerm=this._tripleTerm||this._factory.quad(this._subject,this._predicate,this._object),this._emit(i,this.RDF_REIFIES,this._tripleTerm,n||this.DEFAULTGRAPH),i}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<(":return this._readTripleTermTail;case"<<":return this._readReifiedTripleTailOrReifier}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Py}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,s=0,o="/";for(;i<r;){switch(o){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(o=e[++i+1],o){case"/":n+=e.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return n+e.substring(s,i)+e.substr(i+1);case".":if(o=e[++i+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=e.substring(s,i-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),o!=="/")return`${n}/${e.substr(i+1)}`;s=i+1}}}o=e[++i]}return n+e.substring(s)}parse(e,r,n,i){let a,s,o,c;if(r&&(r.onQuad||r.onPrefix||r.onComment||r.onVersion)?(a=r.onQuad,s=r.onPrefix,o=r.onComment,c=r.onVersion):(a=r,s=n,c=i),this._readCallback=this._readBeforeTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${doe++}_`,this._prefixCallback=s||Py,this._versionCallback=c||Py,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const l=[];let d;if(this._callback=(f,h)=>{f?d=f:h&&l.push(h)},this._lexer.tokenize(e).every(f=>this._readCallback=this._readCallback(f)),d)throw d;return l}let u=(l,d)=>{l!==null?(this._callback(l),this._callback=Py):this._readCallback&&(this._readCallback=this._readCallback(d))};o&&(this._lexer.comments=!0,u=(l,d)=>{l!==null?(this._callback(l),this._callback=Py):this._readCallback&&(d.type==="comment"?o(d.value):this._readCallback=this._readCallback(d))}),this._callback=a,this._lexer.tokenize(e,u)}};function Py(){}function l2e(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(Nn.rdf.first),t.RDF_REST=e.namedNode(Nn.rdf.rest),t.RDF_NIL=e.namedNode(Nn.rdf.nil),t.RDF_REIFIES=e.namedNode(Nn.rdf.reifies),t.N3_FORALL=e.namedNode(Nn.r.forAll),t.N3_FORSOME=e.namedNode(Nn.r.forSome),t.ABBREVIATIONS={a:e.namedNode(Nn.rdf.type),"=":e.namedNode(Nn.owl.sameAs),">":e.namedNode(Nn.log.implies),"<":e.namedNode(Nn.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}wO.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"];l2e(wO.prototype,Ws);function Yst(t){return!!t&&t.termType==="NamedNode"}function $st(t){return!!t&&t.termType==="BlankNode"}function Zst(t){return!!t&&t.termType==="Literal"}function eot(t){return!!t&&t.termType==="Variable"}function tot(t){return!!t&&t.termType==="Quad"}function LI(t){return!!t&&t.termType==="DefaultGraph"}function rot(t){return LI(t.graph)}function not(t,e){return d2e({"":t.value||t},e)("")}function d2e(t,e){const r=Object.create(null);for(const i in t)n(i,t[i]);e=e||Ws;function n(i,a){if(typeof a=="string"){const s=Object.create(null);r[i]=o=>s[o]||(s[o]=e.namedNode(a+o))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}const f2e=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:rot,isBlankNode:$st,isDefaultGraph:LI,isLiteral:Zst,isNamedNode:Yst,isQuad:tot,isVariable:eot,prefix:not,prefixes:d2e},Symbol.toStringTag,{value:"Module"}));function F3(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const iot=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,aot=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,foe="./",sot="../",B4="?",hoe="#";let $z=class h2e{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!iot.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!h2e.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",F3(e)],n=[],i=[],a=/[^/?#]*([/?#])/y;let s,o=0,c=0,u=a.lastIndex=e.length;for(;!o&&!c&&(s=a.exec(this.base));)s[1]===hoe?c=a.lastIndex-1:(r.push(F3(s[0]),"(?:"),n.push(")?"),s[1]!==B4?i.push(u=a.lastIndex):(o=u=a.lastIndex,c=this.base.indexOf(hoe,o),this._pathReplacements[o]=B4));for(let l=0;l<i.length;l++)this._pathReplacements[i[l]]=sot.repeat(i.length-l-1);return this._pathReplacements[i[i.length-1]]=foe,this._baseLength=c>0?c:this.base.length,r.push(F3(this.base.substring(u,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){const r=this._getBaseMatcher().exec(e);if(!r)return e;const n=r[0].length;if(n===this._baseLength&&n===e.length)return"";const i=this._pathReplacements[n];if(i){const a=e.substring(n);return i!==B4&&!aot.test(a)?e:i===foe&&/^[^?#]/.test(a)?a:i+a}return e.substring(n-1)}};const Ny=Ws.defaultGraph(),{rdf:oot,xsd:vh}=Nn,poe=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,_oe=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,uot={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};let Fy=class extends Zs{equals(e){return e===this}},SO=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,s){n+=i,s&&s()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Ny,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new $z(r.baseIRI)))}get _inDefaultGraph(){return Ny.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Ny.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),poe.test(r)&&(r=r.replace(_oe,moe));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;poe.test(r)&&(r=r.replace(_oe,moe));const n=e.direction?`--${e.direction}`:"";if(e.language)return`"${r}"@${e.language}${n}`;if(this._lineMode){if(e.datatype.value===vh.string)return`"${r}"`}else switch(e.datatype.value){case vh.string:return`"${r}"`;case vh.boolean:if(r==="true"||r==="false")return r;break;case vh.integer:if(/^[+-]?\d+$/.test(r))return r;break;case vh.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case vh.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===oot.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<(${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${LI(i)?"":` ${this._encodeIriOrBlank(i)}`})>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,Ny,i):this._writeQuad(e,r,n,i||Ny,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];i=F3(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new Fy("[]");case 1:if(i=n[0],!(i.object instanceof Fy))return new Fy(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let o=0;o<a;o++)i=n[o],i.predicate.equals(e)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(o?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new Fy(`${s}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new Fy(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function moe(t){let e=uot[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const q4=Symbol("iter");function JE(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=JE(t[n]||Object.create(null),e[n],r-1);return t}function p2e(t,e,r=4){let n=!1;for(const i in t)if(i in e){const a=r===0?null:p2e(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}function _2e(t,e,r=4){let n=!1;for(const i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:JE({},t[i],r-1);else if(r!==0){const a=_2e(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}let Zz=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||Ws}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return Yd(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(LI(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[ol(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${LI(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:ol(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}},tM=class Za{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||Ws,this._entityIndex=r.entityIndex||new Zz({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const s in n=r[a].subjects)for(const o in i=n[s])e+=Object.keys(i[o]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),s=a[n]||(a[n]={}),o=i in s;return o||(s[i]=null),!o}_removeFromIndex(e,r,n,i){const a=e[r],s=a[n];delete s[i];for(const o in s)return;delete a[n];for(const o in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,s,o,c){let u,l,d;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(const _ in e)if(l=e[_]){p[a]=this._termFromId(f[_]),n&&((u=l,l={})[n]=u[n]);for(const g in l)if(d=l[g]){p[s]=this._termFromId(f[g]);const m=i?i in d?[i]:[]:Object.keys(d);for(let y=0;y<m.length;y++)p[o]=this._termFromId(f[m[y]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,s,o;if((a=e[r])&&(s=a[n]))for(o in s)i(o)}_countInIndex(e,r,n,i){let a=0,s,o,c;r&&((s=e,e={})[r]=s[r]);for(const u in e)if(o=e[u]){n&&((s=o,o={})[n]=s[n]);for(const l in o)(c=o[l])&&(i?i in c&&a++:a+=Object.keys(c).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;const a=this._graphs;let s,o,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(s=a[i])||!(o=s.subjects[e])||!(c=o[r])||!(n in c))return!1;this._removeFromIndex(s.subjects,e,r,n),this._removeFromIndex(s.predicates,r,n,e),this._removeFromIndex(s.objects,n,e,r),this._size!==null&&this._size--;for(e in s.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Wt.Readable({objectMode:!0}),s=this.readQuads(e,r,n,i);return a._read=o=>{for(;--o>=0;){const{done:c,value:u}=s.next();if(c){a.push(null);return}a.push(u)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let s,o,c,u;if(!(e&&!(o=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(const l in a)(s=a[l])&&(o?u?yield*this._findInIndex(s.objects,u,o,c,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,o,c,null,"subject","predicate","object",l):c?yield*this._findInIndex(s.predicates,c,u,null,"predicate","object","subject",l):u?yield*this._findInIndex(s.objects,u,null,null,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",l))}match(e,r,n,i){return new Ah(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let s=0,o,c,u,l;if(e&&!(c=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n)))return 0;for(const d in a)(o=a[d])&&(e?n?s+=this._countInIndex(o.objects,l,c,u):s+=this._countInIndex(o.subjects,c,u,l):r?s+=this._countInIndex(o.predicates,u,l,c):s+=this._countInIndex(o.objects,l,c,u));return s}forEach(e,r,n,i,a){this.some(s=>(e(s,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(s=>!e(s,this),r,n,i,a)}some(e,r,n,i,a){for(const s of this.readQuads(r,n,i,a))if(e(s,this))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.predicates,o,c,e):this._loopByKey1(s.subjects,o,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.objects,c,o,e):this._loopByKey0(s.subjects,o,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.subjects,o,c,e):this._loopByKey1(s.objects,o,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(s=>(e(s.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(o,c)=>{throw new Error(`${o.value} ${c}`)},a=this.getQuads(null,Nn.rdf.rest,Nn.rdf.nil,null),s=e?[...a]:[];return a.forEach(o=>{const c=[];let u=!1,l,d;const f=o.graph;let h=o.subject;for(;h&&!u;){const p=this.getQuads(null,null,h,null),_=this.getQuads(h,null,null,null);let g,m=null,y=null,v=null;for(let A=0;A<_.length&&!u;A++)g=_[A],g.graph.equals(f)?l?u=i(h,"has non-list arcs out"):g.predicate.value===Nn.rdf.first?m?u=i(h,"has multiple rdf:first arcs"):s.push(m=g):g.predicate.value===Nn.rdf.rest?y?u=i(h,"has multiple rdf:rest arcs"):s.push(y=g):p.length?u=i(h,"can't be subject and object"):(l=g,d="subject"):u=i(h,"not confined to single graph");for(let A=0;A<p.length&&!u;++A)g=p[A],l?u=i(h,"can't have coreferences"):g.predicate.value===Nn.rdf.rest?v?u=i(h,"has incoming rdf:rest arcs"):v=g:(l=g,d="object");m?c.unshift(m.object):u=i(h,"has no list head"),h=v&&v.subject}u?e=!1:l&&(n[l[d].value]=c)}),e&&this.removeQuads(s),n}addAll(e){if(e instanceof Ah&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof Za&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=JE(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e instanceof Ah&&(e=e.filtered),e===this)return!0;if(!(e instanceof Za)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));const r=this._graphs,n=e._graphs;let i,a,s,o,c;for(const u in n){if(!(i=r[u]))return!1;i=i.subjects;for(const l in a=n[u].subjects){if(!(s=i[l]))return!1;for(const d in o=a[l]){if(!(c=s[d]))return!1;for(const f in o[d])if(!(f in c))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){if(e&&e instanceof Ah&&(e=e.filtered),e===this)return new Za({entityIndex:this._entityIndex});if(e instanceof Za&&e._entityIndex===this._entityIndex){const r=new Za({entityIndex:this._entityIndex}),n=_2e(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof Ah&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new Za({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof Ah&&(e=e.filtered),e===this){const r=new Za({entityIndex:this._entityIndex});return r._graphs=JE(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof Za&&this._entityIndex===e._entityIndex){const r=new Za({entityIndex:this._entityIndex}),n=p2e(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){const r=new Za({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new SO().quadsToString(this)}union(e){const r=new Za({entityIndex:this._entityIndex});return r._graphs=JE(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function mo(t,e,r=0){const n=e[r];if(n&&!(n in t))return!1;let i=!1;for(const a in n?{[n]:t[n]}:t){const s=r===2?null:mo(t[a],e,r+1);s!==!1&&(i=i||Object.create(null),i[a]=s)}return i}let Ah=class m2e extends Wt.Readable{constructor(e,r,n,i,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,s=this._filtered=new tM({factory:e._factory,entityIndex:this.options.entityIndex});let o,c,u;if(a&&!(o=s._termToNumericId(a))||i&&!(c=s._termToNumericId(i))||n&&!(u=s._termToNumericId(n)))return s;const l=e._getGraphs(r);for(const d in l){let f,h,p,_;(_=l[d])&&(!o&&c?(h=mo(_.predicates,[c,u,o]))&&(f=mo(_.subjects,[o,c,u]),p=mo(_.objects,[u,o,c])):u?(p=mo(_.objects,[u,o,c]))&&(f=mo(_.subjects,[o,c,u]),h=mo(_.predicates,[c,u,o])):(f=mo(_.subjects,[o,c,u]))&&(h=mo(_.predicates,[c,u,o]),p=mo(_.objects,[u,o,c])),f&&(s._graphs[d]={subjects:f,predicates:h,objects:p}))}s._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[q4]&&(this[q4]=this[Symbol.iterator]());const r=this[q4];for(;--e>=0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new SO().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new m2e(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}},g2e=class{dataset(e){return new tM(e)}};function y2e(t){const e=[];for(const{subject:r,object:n}of t.match(null,Ws.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Ws.defaultGraph())){const i=[...t.match(null,null,null,r)],a=[...t.match(null,null,null,n)];e.push({premise:i,conclusion:a})}return e}let b2e=class{constructor(e){this._store=e}_add(e,r,n,i,a){this._store._addToIndex(i.subjects,e,r,n)&&(this._store._addToIndex(i.predicates,r,n,e),this._store._addToIndex(i.objects,n,e,r),a())}_evaluatePremise(e,r,n,i=0){let a,s,o,c,u;const[l,d,f]=e.premise[i].value,h=r[e.premise[i].content],p=!(o=l.value);for(o in p?h:{[o]:h[o]})if(c=h[o]){p&&(l.value=Number(o)),a=!(o=d.value);for(o in a?c:{[o]:c[o]})if(u=c[o]){a&&(d.value=Number(o)),s=!(o=f.value);for(o in s?u:{[o]:u[o]})s&&(f.value=Number(o)),i===e.premise.length-1?e.conclusion.forEach(_=>{this._add(_.subject.value,_.predicate.value,_.object.value,r,()=>{n(_)})}):this._evaluatePremise(e,r,n,i+1);s&&(f.value=null)}a&&(d.value=null)}p&&(l.value=null)}_evaluateRules(e,r,n){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],r,n)}_reasonGraphNaive(e,r){const n=[];function i(o){o.next&&o.next.forEach(c=>{n.push([o.subject.value,o.predicate.value,o.object.value,c])})}const a=o=>{o.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,r,()=>{i(c)})})};this._evaluateRules(e,r,i);let s;for(;(s=n.pop())!==void 0;){const[o,c,u,l]=s,d=l.basePremise.subject.value;d||(l.basePremise.subject.value=o);const f=l.basePremise.predicate.value;f||(l.basePremise.predicate.value=c);const h=l.basePremise.object.value;h||(l.basePremise.object.value=u),l.premise.length===0?a(l.conclusion):this._evaluatePremise(l,r,i),d||(l.basePremise.subject.value=null),f||(l.basePremise.predicate.value=null),h||(l.basePremise.object.value=null)}}_createRule({premise:e,conclusion:r}){const n={},i=s=>s.termType==="Variable"?n[s.value]=n[s.value]||{}:{value:this._store._termToNewNumericId(s)},a=s=>({subject:i(s.subject),predicate:i(s.predicate),object:i(s.object)});return{premise:e.map(s=>a(s)),conclusion:r.map(s=>a(s)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=y2e(e)),e=e.map(n=>this._createRule(n));for(const n of e)for(const i of e)for(let a=0;a<i.premise.length;a++){const s=i.premise[a];for(const o of n.conclusion){if(U4(s.subject,o.subject)&&U4(s.predicate,o.predicate)&&U4(s.object,o.object)){const c=new Set,u=[];s.subject.value=s.subject.value||1,s.object.value=s.object.value||1,s.predicate.value=s.predicate.value||1;for(let l=0;l<i.premise.length;l++)l!==a&&u.push(goe(i.premise[l],c));(o.next=o.next||[]).push({premise:u,conclusion:i.conclusion,basePremise:s})}i.variables.forEach(c=>{c.value=null})}}for(const n of e){const i=new Set;n.premise=n.premise.map(a=>goe(a,i))}const r=this._store._getGraphs();for(const n in r)this._reasonGraphNaive(e,r[n]);this._store._size=null}};function goe({subject:t,predicate:e,object:r},n){const i=t.value||n.has(t)||(n.add(t),!1),a=e.value||n.has(e)||(n.add(e),!1),s=r.value||n.has(r)||(n.add(r),!1);return!i&&a?{content:"predicates",value:[e,r,t]}:s?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function U4(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}let v2e=class extends Wt.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new wO(e);let n,i;const a={onQuad:(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},onPrefix:(s,o)=>{this.emit("prefix",s,o)}};e&&e.comments&&(a.onComment=s=>{this.emit("comment",s)}),r.parse({on:(s,o)=>{switch(s){case"data":n=o;break;case"end":i=o;break}}},a),this._transform=(s,o,c)=>{n(s),c()},this._flush=s=>{i(),s()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}},A2e=class extends Wt.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new SO({write:(n,i,a)=>{this.push(n),a&&a()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,i,a)=>{r.addQuad(n,a)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}};const cot={Lexer:Kz,Parser:wO,Writer:SO,Store:tM,StoreFactory:g2e,EntityIndex:Zz,StreamParser:v2e,StreamWriter:A2e,Util:f2e,Reasoner:b2e,BaseIRI:$z,DataFactory:Ws,Term:Zs,NamedNode:eM,Literal:Jd,BlankNode:Xz,Variable:Jz,DefaultGraph:Yz,Quad:kp,Triple:kp,termFromId:Yd,termToId:ol},lot=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:$z,BlankNode:Xz,DataFactory:Ws,DefaultGraph:Yz,EntityIndex:Zz,Lexer:Kz,Literal:Jd,NamedNode:eM,Parser:wO,Quad:kp,Reasoner:b2e,Store:tM,StoreFactory:g2e,StreamParser:v2e,StreamWriter:A2e,Term:Zs,Triple:kp,Util:f2e,Variable:Jz,Writer:SO,default:cot,getRulesFromDataset:y2e,termFromId:Yd,termToId:ol},Symbol.toStringTag,{value:"Module"})),dot=Pl(lot);var yoe;function fot(){if(yoe)return Ey;yoe=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.ActorRdfParseN3=void 0;const t=p0(),e=dt,r=dot;let n=class extends t.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async runHandle(a,s,o){var l,d;const c=a.context.getSafe(e.KeysInitQuery.dataFactory);a.data.on("error",f=>u.emit("error",f));const u=a.data.pipe(new r.StreamParser({factory:c,baseIRI:(l=a.metadata)==null?void 0:l.baseIRI,format:s.endsWith("n3")?s:`${s}*`,parseUnsupportedVersions:!!a.context.get(e.KeysInitQuery.parseUnsupportedVersions),version:(d=a.metadata)==null?void 0:d.version}));return{data:u,metadata:{triples:s==="text/turtle"||s==="application/n-triples"||s==="text/n3"}}}};return Ey.ActorRdfParseN3=n,Ey}var boe;function hot(){return boe||(boe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(fot(),t)}(L4)),L4}var V4={},My={},G4={},fd={},hd={},H4={},voe;function pot(){return voe||(voe=1,function(t){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR=`	
\r ---`,t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,r=10,n=13,i=32;t.S_LIST=[i,r,n,e];function a(u){return u>=i&&u<=55295||u===r||u===n||u===e||u>=57344&&u<=65533||u>=65536&&u<=1114111}t.isChar=a;function s(u){return u===i||u===r||u===n||u===e}t.isS=s;function o(u){return u>=65&&u<=90||u>=97&&u<=122||u===58||u===95||u===8204||u===8205||u>=192&&u<=214||u>=216&&u<=246||u>=248&&u<=767||u>=880&&u<=893||u>=895&&u<=8191||u>=8304&&u<=8591||u>=11264&&u<=12271||u>=12289&&u<=55295||u>=63744&&u<=64975||u>=65008&&u<=65533||u>=65536&&u<=983039}t.isNameStartChar=o;function c(u){return o(u)||u>=48&&u<=57||u===45||u===46||u===183||u>=768&&u<=879||u>=8255&&u<=8256}t.isNameChar=c}(H4)),H4}var k4={},Aoe;function _ot(){return Aoe||(Aoe=1,function(t){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="---",t.RESTRICTED_CHAR="-\b\v\f---",t.S=` 	\r
`,t.NAME_START_CHAR=":A-Z_a-z-----------",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9--",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.RESTRICTED_CHAR_RE=new RegExp("^["+t.RESTRICTED_CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");var e=9,r=10,n=13,i=32;t.S_LIST=[i,r,n,e];function a(d){return d>=1&&d<=55295||d>=57344&&d<=65533||d>=65536&&d<=1114111}t.isChar=a;function s(d){return d>=1&&d<=8||d===11||d===12||d>=14&&d<=31||d>=127&&d<=132||d>=134&&d<=159}t.isRestrictedChar=s;function o(d){return d===9||d===10||d===13||d>31&&d<127||d===133||d>159&&d<=55295||d>=57344&&d<=65533||d>=65536&&d<=1114111}t.isCharAndNotRestricted=o;function c(d){return d===i||d===r||d===n||d===e}t.isS=c;function u(d){return d>=65&&d<=90||d>=97&&d<=122||d===58||d===95||d===8204||d===8205||d>=192&&d<=214||d>=216&&d<=246||d>=248&&d<=767||d>=880&&d<=893||d>=895&&d<=8191||d>=8304&&d<=8591||d>=11264&&d<=12271||d>=12289&&d<=55295||d>=63744&&d<=64975||d>=65008&&d<=65533||d>=65536&&d<=983039}t.isNameStartChar=u;function l(d){return u(d)||d>=48&&d<=57||d===45||d===46||d===183||d>=768&&d<=879||d>=8255&&d<=8256}t.isNameChar=l}(k4)),k4}var z4={},Toe;function mot(){return Toe||(Toe=1,function(t){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NC_NAME_START_CHAR="A-Z_a-z------------",t.NC_NAME_CHAR="-"+t.NC_NAME_START_CHAR+".0-9--",t.NC_NAME_START_CHAR_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]$","u"),t.NC_NAME_CHAR_RE=new RegExp("^["+t.NC_NAME_CHAR+"]$","u"),t.NC_NAME_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]["+t.NC_NAME_CHAR+"]*$","u");function e(n){return n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}t.isNCNameStartChar=e;function r(n){return e(n)||n===45||n===46||n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}t.isNCNameChar=r}(z4)),z4}var woe;function T2e(){if(woe)return hd;woe=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.SaxesParser=hd.EVENTS=void 0;const t=pot(),e=_ot(),r=mot();var n=t.isS,i=t.isChar,a=t.isNameStartChar,s=t.isNameChar,o=t.S_LIST,c=t.NAME_RE,u=e.isChar,l=r.isNCNameStartChar,d=r.isNCNameChar,f=r.NC_NAME_RE;const h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",_={__proto__:null,xml:h,xmlns:p},g={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},m=-1,y=-2,v=0,A=1,T=2,S=3,P=4,j=5,F=6,N=7,R=8,C=9,M=10,U=11,B=12,G=13,K=14,$=15,se=16,pe=17,we=18,Ce=19,Le=20,Ie=21,Oe=22,ye=23,Me=24,W=25,ft=26,le=27,me=28,Z=29,q=30,J=31,re=32,_e=33,he=34,ue=35,Ue=36,De=37,Je=38,ze=39,ve=40,de=41,Ge=42,it=43,ae=44,z=9,V=10,x=13,O=32,D=33,H=34,Y=38,Q=39,ee=45,ie=47,Re=59,oe=60,Te=61,We=62,Qe=63,Xe=91,Pe=93,He=133,Ee=8232,ce=gt=>gt===H||gt===Q,ne=[H,Q],xe=[...ne,Xe,We],Be=[...ne,oe,Pe],ht=[Te,Qe,...o],Et=[...o,We,Y,oe];function rt(gt,Fe,$e){switch(Fe){case"xml":$e!==h&&gt.fail(`xml prefix must be bound to ${h}.`);break;case"xmlns":$e!==p&&gt.fail(`xmlns prefix must be bound to ${p}.`);break}switch($e){case p:gt.fail(Fe===""?`the default namespace may not be set to ${$e}.`:`may not assign a prefix (even "xmlns") to the URI ${p}.`);break;case h:switch(Fe){case"xml":break;case"":gt.fail(`the default namespace may not be set to ${$e}.`);break;default:gt.fail("may not assign the xml namespace to another prefix.")}break}}function _t(gt,Fe){for(const $e of Object.keys(Fe))rt(gt,$e,Fe[$e])}const ut=gt=>f.test(gt),Pt=gt=>c.test(gt),Ot=0,or=1,Qt=2;hd.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const mt={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class wn{get closed(){return this._closed}constructor(Fe){this.opt=Fe??{},this.fragmentOpt=!!this.opt.fragment;const $e=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,$e){this.nameStartCheck=l,this.nameCheck=d,this.isName=ut,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},_);const tt=this.opt.additionalNamespaces;tt!=null&&(_t(this,tt),Object.assign(this.ns,tt))}else this.nameStartCheck=a,this.nameCheck=s,this.isName=Pt,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var Fe;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=Ot,this.attribList=[];const{fragmentOpt:$e}=this;this.state=$e?G:v,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=$e,this.xmlDeclPossible=!$e,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:tt}=this.opt;if(tt===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");tt="1.0"}this.setXMLVersion(tt),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(g),(Fe=this.readyHandler)===null||Fe===void 0||Fe.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(Fe,$e){this[mt[Fe]]=$e}off(Fe){this[mt[Fe]]=void 0}makeError(Fe){var $e;let tt=($e=this.fileName)!==null&&$e!==void 0?$e:"";return this.trackPosition&&(tt.length>0&&(tt+=":"),tt+=`${this.line}:${this.column}`),tt.length>0&&(tt+=": "),new Error(tt+Fe)}fail(Fe){const $e=this.makeError(Fe),tt=this.errorHandler;if(tt===void 0)throw $e;return tt($e),this}write(Fe){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let $e=!1;Fe===null?($e=!0,Fe=""):typeof Fe=="object"&&(Fe=Fe.toString()),this.carriedFromPrevious!==void 0&&(Fe=`${this.carriedFromPrevious}${Fe}`,this.carriedFromPrevious=void 0);let tt=Fe.length;const St=Fe.charCodeAt(tt-1);!$e&&(St===x||St>=55296&&St<=56319)&&(this.carriedFromPrevious=Fe[tt-1],tt--,Fe=Fe.slice(0,tt));const{stateTable:Ut}=this;for(this.chunk=Fe,this.i=0;this.i<tt;)Ut[this.state].call(this);return this.chunkPosition+=tt,$e?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:Fe,i:$e}=this;if(this.prevI=$e,this.i=$e+1,$e>=Fe.length)return m;const tt=Fe.charCodeAt($e);if(this.column++,tt<55296){if(tt>=O||tt===z)return tt;switch(tt){case V:return this.line++,this.column=0,this.positionAtNewLine=this.position,V;case x:return Fe.charCodeAt($e+1)===V&&(this.i=$e+2),this.line++,this.column=0,this.positionAtNewLine=this.position,y;default:return this.fail("disallowed character."),tt}}if(tt>56319)return tt>=57344&&tt<=65533||this.fail("disallowed character."),tt;const St=65536+(tt-55296)*1024+(Fe.charCodeAt($e+1)-56320);return this.i=$e+2,St>1114111&&this.fail("disallowed character."),St}getCode11(){const{chunk:Fe,i:$e}=this;if(this.prevI=$e,this.i=$e+1,$e>=Fe.length)return m;const tt=Fe.charCodeAt($e);if(this.column++,tt<55296){if(tt>31&&tt<127||tt>159&&tt!==Ee||tt===z)return tt;switch(tt){case V:return this.line++,this.column=0,this.positionAtNewLine=this.position,V;case x:{const Ut=Fe.charCodeAt($e+1);(Ut===V||Ut===He)&&(this.i=$e+2)}case He:case Ee:return this.line++,this.column=0,this.positionAtNewLine=this.position,y;default:return this.fail("disallowed character."),tt}}if(tt>56319)return tt>=57344&&tt<=65533||this.fail("disallowed character."),tt;const St=65536+(tt-55296)*1024+(Fe.charCodeAt($e+1)-56320);return this.i=$e+2,St>1114111&&this.fail("disallowed character."),St}getCodeNorm(){const Fe=this.getCode();return Fe===y?V:Fe}unget(){this.i=this.prevI,this.column--}captureTo(Fe){let{i:$e}=this;const{chunk:tt}=this;for(;;){const St=this.getCode(),Ut=St===y,ar=Ut?V:St;if(ar===m||Fe.includes(ar))return this.text+=tt.slice($e,this.prevI),ar;Ut&&(this.text+=`${tt.slice($e,this.prevI)}
`,$e=this.i)}}captureToChar(Fe){let{i:$e}=this;const{chunk:tt}=this;for(;;){let St=this.getCode();switch(St){case y:this.text+=`${tt.slice($e,this.prevI)}
`,$e=this.i,St=V;break;case m:return this.text+=tt.slice($e),!1}if(St===Fe)return this.text+=tt.slice($e,this.prevI),!0}}captureNameChars(){const{chunk:Fe,i:$e}=this;for(;;){const tt=this.getCode();if(tt===m)return this.name+=Fe.slice($e),m;if(!s(tt))return this.name+=Fe.slice($e,this.prevI),tt===y?V:tt}}skipSpaces(){for(;;){const Fe=this.getCodeNorm();if(Fe===m||!n(Fe))return Fe}}setXMLVersion(Fe){this.currentXMLVersion=Fe,Fe==="1.0"?(this.isChar=i,this.getCode=this.getCode10):(this.isChar=u,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=A}sBeginWhitespace(){const Fe=this.i,$e=this.skipSpaces();switch(this.prevI!==Fe&&(this.xmlDeclPossible=!1),$e){case oe:if(this.state=$,this.text.length!==0)throw new Error("no-empty text at start");break;case m:break;default:this.unget(),this.state=G,this.xmlDeclPossible=!1}}sDoctype(){var Fe;const $e=this.captureTo(xe);switch($e){case We:{(Fe=this.doctypeHandler)===null||Fe===void 0||Fe.call(this,this.text),this.text="",this.state=G,this.doctype=!0;break}case m:break;default:this.text+=String.fromCodePoint($e),$e===Xe?this.state=P:ce($e)&&(this.state=S,this.q=$e)}}sDoctypeQuote(){const Fe=this.q;this.captureToChar(Fe)&&(this.text+=String.fromCodePoint(Fe),this.q=null,this.state=T)}sDTD(){const Fe=this.captureTo(Be);Fe!==m&&(this.text+=String.fromCodePoint(Fe),Fe===Pe?this.state=T:Fe===oe?this.state=F:ce(Fe)&&(this.state=j,this.q=Fe))}sDTDQuoted(){const Fe=this.q;this.captureToChar(Fe)&&(this.text+=String.fromCodePoint(Fe),this.state=P,this.q=null)}sDTDOpenWaka(){const Fe=this.getCodeNorm();switch(this.text+=String.fromCodePoint(Fe),Fe){case D:this.state=N,this.openWakaBang="";break;case Qe:this.state=U;break;default:this.state=P}}sDTDOpenWakaBang(){const Fe=String.fromCodePoint(this.getCodeNorm()),$e=this.openWakaBang+=Fe;this.text+=Fe,$e!=="-"&&(this.state=$e==="--"?R:P,this.openWakaBang="")}sDTDComment(){this.captureToChar(ee)&&(this.text+="-",this.state=C)}sDTDCommentEnding(){const Fe=this.getCodeNorm();this.text+=String.fromCodePoint(Fe),this.state=Fe===ee?M:R}sDTDCommentEnded(){const Fe=this.getCodeNorm();this.text+=String.fromCodePoint(Fe),Fe===We?this.state=P:(this.fail("malformed comment."),this.state=R)}sDTDPI(){this.captureToChar(Qe)&&(this.text+="?",this.state=B)}sDTDPIEnding(){const Fe=this.getCodeNorm();this.text+=String.fromCodePoint(Fe),Fe===We&&(this.state=P)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:Fe}=this;const{chunk:$e}=this;e:for(;;)switch(this.getCode()){case y:this.entity+=`${$e.slice(Fe,this.prevI)}
`,Fe=this.i;break;case Re:{const{entityReturnState:tt}=this,St=this.entity+$e.slice(Fe,this.prevI);this.state=tt;let Ut;St===""?(this.fail("empty entity name."),Ut="&;"):(Ut=this.parseEntity(St),this.entity=""),(tt!==G||this.textHandler!==void 0)&&(this.text+=Ut);break e}case m:this.entity+=$e.slice(Fe);break e}}sOpenWaka(){const Fe=this.getCode();if(a(Fe))this.state=he,this.unget(),this.xmlDeclPossible=!1;else switch(Fe){case ie:this.state=it,this.xmlDeclPossible=!1;break;case D:this.state=se,this.openWakaBang="",this.xmlDeclPossible=!1;break;case Qe:this.state=ye;break;default:this.fail("disallowed character in tag name"),this.state=G,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=Le,this.openWakaBang="";break;case"--":this.state=pe,this.openWakaBang="";break;case"DOCTYPE":this.state=T,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(ee)&&(this.state=we)}sCommentEnding(){var Fe;const $e=this.getCodeNorm();$e===ee?(this.state=Ce,(Fe=this.commentHandler)===null||Fe===void 0||Fe.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint($e)}`,this.state=pe)}sCommentEnded(){const Fe=this.getCodeNorm();Fe!==We?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(Fe)}`,this.state=pe):this.state=G}sCData(){this.captureToChar(Pe)&&(this.state=Ie)}sCDataEnding(){const Fe=this.getCodeNorm();Fe===Pe?this.state=Oe:(this.text+=`]${String.fromCodePoint(Fe)}`,this.state=Le)}sCDataEnding2(){var Fe;const $e=this.getCodeNorm();switch($e){case We:{(Fe=this.cdataHandler)===null||Fe===void 0||Fe.call(this,this.text),this.text="",this.state=G;break}case Pe:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint($e)}`,this.state=Le}}sPIFirstChar(){const Fe=this.getCodeNorm();this.nameStartCheck(Fe)?(this.piTarget+=String.fromCodePoint(Fe),this.state=Me):Fe===Qe||n(Fe)?(this.fail("processing instruction without a target."),this.state=Fe===Qe?ft:W):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(Fe),this.state=Me)}sPIRest(){const{chunk:Fe,i:$e}=this;for(;;){const tt=this.getCodeNorm();if(tt===m){this.piTarget+=Fe.slice($e);return}if(!this.nameCheck(tt)){this.piTarget+=Fe.slice($e,this.prevI);const St=tt===Qe;St||n(tt)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=St?_e:le):this.state=St?ft:W:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(tt));break}}}sPIBody(){if(this.text.length===0){const Fe=this.getCodeNorm();Fe===Qe?this.state=ft:n(Fe)||(this.text=String.fromCodePoint(Fe))}else this.captureToChar(Qe)&&(this.state=ft)}sPIEnding(){var Fe;const $e=this.getCodeNorm();if($e===We){const{piTarget:tt}=this;tt.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(Fe=this.piHandler)===null||Fe===void 0||Fe.call(this,{target:tt,body:this.text}),this.piTarget=this.text="",this.state=G}else $e===Qe?this.text+="?":(this.text+=`?${String.fromCodePoint($e)}`,this.state=W);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const Fe=this.skipSpaces();if(Fe===Qe){this.state=_e;return}Fe!==m&&(this.state=me,this.name=String.fromCodePoint(Fe))}sXMLDeclName(){const Fe=this.captureTo(ht);if(Fe===Qe){this.state=_e,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(n(Fe)||Fe===Te){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=Fe===Te?q:Z}}sXMLDeclEq(){const Fe=this.getCodeNorm();if(Fe===Qe){this.state=_e,this.fail("XML declaration is incomplete.");return}n(Fe)||(Fe!==Te&&this.fail("value required."),this.state=q)}sXMLDeclValueStart(){const Fe=this.getCodeNorm();if(Fe===Qe){this.state=_e,this.fail("XML declaration is incomplete.");return}n(Fe)||(ce(Fe)?this.q=Fe:(this.fail("value must be quoted."),this.q=O),this.state=J)}sXMLDeclValue(){const Fe=this.captureTo([this.q,Qe]);if(Fe===Qe){this.state=_e,this.text="",this.fail("XML declaration is incomplete.");return}if(Fe===m)return;const $e=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const tt=$e;this.xmlDecl.version=tt,/^1\.[0-9]+$/.test(tt)?this.opt.forceXMLVersion||this.setXMLVersion(tt):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test($e)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=$e;break;case"standalone":$e!=="yes"&&$e!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=$e;break}this.name="",this.state=re}sXMLDeclSeparator(){const Fe=this.getCodeNorm();if(Fe===Qe){this.state=_e;return}n(Fe)||(this.fail("whitespace required."),this.unget()),this.state=le}sXMLDeclEnding(){var Fe;this.getCodeNorm()===We?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(Fe=this.xmldeclHandler)===null||Fe===void 0||Fe.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=G):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var Fe;const $e=this.captureNameChars();if($e===m)return;const tt=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=tt.ns=Object.create(null)),(Fe=this.openTagStartHandler)===null||Fe===void 0||Fe.call(this,tt),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),$e){case We:this.openTag();break;case ie:this.state=ue;break;default:n($e)||this.fail("disallowed character in tag name."),this.state=Ue}}sOpenTagSlash(){this.getCode()===We?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=Ue)}sAttrib(){const Fe=this.skipSpaces();Fe!==m&&(a(Fe)?(this.unget(),this.state=De):Fe===We?this.openTag():Fe===ie?this.state=ue:this.fail("disallowed character in attribute name."))}sAttribName(){const Fe=this.captureNameChars();Fe===Te?this.state=ze:n(Fe)?this.state=Je:Fe===We?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):Fe!==m&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const Fe=this.skipSpaces();switch(Fe){case m:return;case Te:this.state=ze;break;default:this.fail("attribute without value."),this.text="",this.name="",Fe===We?this.openTag():a(Fe)?(this.unget(),this.state=De):(this.fail("disallowed character in attribute name."),this.state=Ue)}}sAttribValue(){const Fe=this.getCodeNorm();ce(Fe)?(this.q=Fe,this.state=ve):n(Fe)||(this.fail("unquoted attribute value."),this.state=Ge,this.unget())}sAttribValueQuoted(){const{q:Fe,chunk:$e}=this;let{i:tt}=this;for(;;)switch(this.getCode()){case Fe:this.pushAttrib(this.name,this.text+$e.slice(tt,this.prevI)),this.name=this.text="",this.q=null,this.state=de;return;case Y:this.text+=$e.slice(tt,this.prevI),this.state=K,this.entityReturnState=ve;return;case V:case y:case z:this.text+=`${$e.slice(tt,this.prevI)} `,tt=this.i;break;case oe:this.text+=$e.slice(tt,this.prevI),this.fail("disallowed character.");return;case m:this.text+=$e.slice(tt);return}}sAttribValueClosed(){const Fe=this.getCodeNorm();n(Fe)?this.state=Ue:Fe===We?this.openTag():Fe===ie?this.state=ue:a(Fe)?(this.fail("no whitespace between attributes."),this.unget(),this.state=De):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const Fe=this.captureTo(Et);switch(Fe){case Y:this.state=K,this.entityReturnState=Ge;break;case oe:this.fail("disallowed character.");break;case m:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",Fe===We?this.openTag():this.state=Ue}}sCloseTag(){const Fe=this.captureNameChars();Fe===We?this.closeTag():n(Fe)?this.state=ae:Fe!==m&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case We:this.closeTag();break;case m:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:Fe,forbiddenState:$e}=this;const{chunk:tt,textHandler:St}=this;e:for(;;)switch(this.getCode()){case oe:{if(this.state=$,St!==void 0){const{text:Ut}=this,ar=tt.slice(Fe,this.prevI);Ut.length!==0?(St(Ut+ar),this.text=""):ar.length!==0&&St(ar)}$e=Ot;break e}case Y:this.state=K,this.entityReturnState=G,St!==void 0&&(this.text+=tt.slice(Fe,this.prevI)),$e=Ot;break e;case Pe:switch($e){case Ot:$e=or;break;case or:$e=Qt;break;case Qt:break;default:throw new Error("impossible state")}break;case We:$e===Qt&&this.fail('the string "]]>" is disallowed in char data.'),$e=Ot;break;case y:St!==void 0&&(this.text+=`${tt.slice(Fe,this.prevI)}
`),Fe=this.i,$e=Ot;break;case m:St!==void 0&&(this.text+=tt.slice(Fe));break e;default:$e=Ot}this.forbiddenState=$e}handleTextOutsideRoot(){let{i:Fe}=this;const{chunk:$e,textHandler:tt}=this;let St=!1;e:for(;;){const Ut=this.getCode();switch(Ut){case oe:{if(this.state=$,tt!==void 0){const{text:ar}=this,nr=$e.slice(Fe,this.prevI);ar.length!==0?(tt(ar+nr),this.text=""):nr.length!==0&&tt(nr)}break e}case Y:this.state=K,this.entityReturnState=G,tt!==void 0&&(this.text+=$e.slice(Fe,this.prevI)),St=!0;break e;case y:tt!==void 0&&(this.text+=`${$e.slice(Fe,this.prevI)}
`),Fe=this.i;break;case m:tt!==void 0&&(this.text+=$e.slice(Fe));break e;default:n(Ut)||(St=!0)}}St&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(Fe,$e){var tt;const{prefix:St,local:Ut}=this.qname(Fe),ar={name:Fe,prefix:St,local:Ut,value:$e};if(this.attribList.push(ar),(tt=this.attributeHandler)===null||tt===void 0||tt.call(this,ar),St==="xmlns"){const nr=$e.trim();this.currentXMLVersion==="1.0"&&nr===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Ut]=nr,rt(this,Ut,nr)}else if(Fe==="xmlns"){const nr=$e.trim();this.topNS[""]=nr,rt(this,"",nr)}}pushAttribPlain(Fe,$e){var tt;const St={name:Fe,value:$e};this.attribList.push(St),(tt=this.attributeHandler)===null||tt===void 0||tt.call(this,St)}end(){var Fe,$e;this.sawRoot||this.fail("document must contain a root element.");const{tags:tt}=this;for(;tt.length>0;){const Ut=tt.pop();this.fail(`unclosed tag: ${Ut.name}`)}this.state!==v&&this.state!==G&&this.fail("unexpected end.");const{text:St}=this;return St.length!==0&&((Fe=this.textHandler)===null||Fe===void 0||Fe.call(this,St),this.text=""),this._closed=!0,($e=this.endHandler)===null||$e===void 0||$e.call(this),this._init(),this}resolve(Fe){var $e,tt;let St=this.topNS[Fe];if(St!==void 0)return St;const{tags:Ut}=this;for(let ar=Ut.length-1;ar>=0;ar--)if(St=Ut[ar].ns[Fe],St!==void 0)return St;return St=this.ns[Fe],St!==void 0?St:(tt=($e=this.opt).resolvePrefix)===null||tt===void 0?void 0:tt.call($e,Fe)}qname(Fe){const $e=Fe.indexOf(":");if($e===-1)return{prefix:"",local:Fe};const tt=Fe.slice($e+1),St=Fe.slice(0,$e);return(St===""||tt===""||tt.includes(":"))&&this.fail(`malformed name: ${Fe}.`),{prefix:St,local:tt}}processAttribsNS(){var Fe;const{attribList:$e}=this,tt=this.tag;{const{prefix:ar,local:nr}=this.qname(tt.name);tt.prefix=ar,tt.local=nr;const fi=tt.uri=(Fe=this.resolve(ar))!==null&&Fe!==void 0?Fe:"";ar!==""&&(ar==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),fi===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(ar)}.`),tt.uri=ar))}if($e.length===0)return;const{attributes:St}=tt,Ut=new Set;for(const ar of $e){const{name:nr,prefix:fi,local:Zo}=ar;let Ae,Ke;fi===""?(Ae=nr==="xmlns"?p:"",Ke=nr):(Ae=this.resolve(fi),Ae===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(fi)}.`),Ae=fi),Ke=`{${Ae}}${Zo}`),Ut.has(Ke)&&this.fail(`duplicate attribute: ${Ke}.`),Ut.add(Ke),ar.uri=Ae,St[nr]=ar}this.attribList=[]}processAttribsPlain(){const{attribList:Fe}=this,$e=this.tag.attributes;for(const{name:tt,value:St}of Fe)$e[tt]!==void 0&&this.fail(`duplicate attribute: ${tt}.`),$e[tt]=St;this.attribList=[]}openTag(){var Fe;this.processAttribs();const{tags:$e}=this,tt=this.tag;tt.isSelfClosing=!1,(Fe=this.openTagHandler)===null||Fe===void 0||Fe.call(this,tt),$e.push(tt),this.state=G,this.name=""}openSelfClosingTag(){var Fe,$e,tt;this.processAttribs();const{tags:St}=this,Ut=this.tag;Ut.isSelfClosing=!0,(Fe=this.openTagHandler)===null||Fe===void 0||Fe.call(this,Ut),($e=this.closeTagHandler)===null||$e===void 0||$e.call(this,Ut),(this.tag=(tt=St[St.length-1])!==null&&tt!==void 0?tt:null)===null&&(this.closedRoot=!0),this.state=G,this.name=""}closeTag(){const{tags:Fe,name:$e}=this;if(this.state=G,this.name="",$e===""){this.fail("weird empty close tag."),this.text+="</>";return}const tt=this.closeTagHandler;let St=Fe.length;for(;St-- >0;){const Ut=this.tag=Fe.pop();if(this.topNS=Ut.ns,tt==null||tt(Ut),Ut.name===$e)break;this.fail("unexpected close tag.")}St===0?this.closedRoot=!0:St<0&&(this.fail(`unmatched closing tag: ${$e}.`),this.text+=`</${$e}>`)}parseEntity(Fe){if(Fe[0]!=="#"){const tt=this.ENTITIES[Fe];return tt!==void 0?tt:(this.fail(this.isName(Fe)?"undefined entity.":"disallowed character in entity name."),`&${Fe};`)}let $e=NaN;return Fe[1]==="x"&&/^#x[0-9a-f]+$/i.test(Fe)?$e=parseInt(Fe.slice(2),16):/^#[0-9]+$/.test(Fe)&&($e=parseInt(Fe.slice(1),10)),this.isChar($e)?String.fromCodePoint($e):(this.fail("malformed character entity."),`&${Fe};`)}}return hd.SaxesParser=wn,hd}var Dy={},Soe;function got(){if(Soe)return Dy;Soe=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.ParseError=void 0;let t=class extends Error{constructor(r,n){const i=r.saxParser;super(r.trackPosition?`Line ${i.line} column ${i.column+1}: ${n}`:n)}};return Dy.ParseError=t,Dy}var Q4={},W4={},xoe;function yot(){return xoe||(xoe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateIri=t.IriValidationStrategy=void 0;function e(){const o="[!$&'()*+,;=]",c="%[a-fA-F0-9]{2}",u="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",l=`${u}\\.${u}\\.${u}\\.${u}`,d="[a-fA-F0-9]{1,4}",f=`(${d}:${d}|${l})`,h=`((${d}:){6}${f}|::(${d}:){5}${f}|(${d})?::(${d}:){4}${f}|((${d}:){0,1}${d})?::(${d}:){3}${f}|((${d}:){0,2}${d})?::(${d}:){2}${f}|((${d}:){0,3}${d})?::${d}:${f}|((${d}:){0,4}${d})?::${f}|((${d}:){0,5}${d})?::${d}|((${d}:){0,6}${d})?::)`,p=`v[a-fA-F0-9]+\\.(${o}|${o}|":)+`,_=`\\[(${h}|${p})\\]`,g="[0-9]*",m="[a-zA-Z][a-zA-Z0-9+\\-.]*",v="[---]",S="[a-zA-Z0-9\\-._~-----------------]",P=`(${S}|${c}|${o}|[:@])*`,j=`(${P}|[\\/?])*`,F=`(${P}|${v}|[\\/?])*`,N=`(${P})+`,R=`(${P})*`,C="",M=`${N}(\\/${R})*`,U=`\\/(${N}(\\/${R})*)?`,B=`(\\/${R})*`,G=`(${S}|${c}|${o})*`,K=`(${_}|${l}|${G})`,pe=`(\\/\\/${`(${`(${S}|${c}|${o}|:)*`}@)?${K}(:${g})?`}${B}|${U}|${M}|${C})`,we=`^${m}:${pe}(\\?${F})?(#${j})?$`;return new RegExp(we,"u")}const r=e(),n=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var i;(function(s){s.Strict="strict",s.Pragmatic="pragmatic",s.None="none"})(i=t.IriValidationStrategy||(t.IriValidationStrategy={}));function a(s,o=i.Strict){switch(o){case i.Strict:return r.test(s)?void 0:new Error(`Invalid IRI according to RFC 3987: '${s}'`);case i.Pragmatic:return n.test(s)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${s}'`);case i.None:return;default:return new Error(`Not supported validation strategy "${o}"`)}}t.validateIri=a}(W4)),W4}var Eoe;function bot(){return Eoe||(Eoe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(yot(),t)}(Q4)),Q4}var Ioe;function vot(){if(Ioe)return fd;Ioe=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.ParseType=fd.RdfXmlParser=void 0;const t=Bn(),e=T2e(),r=Wt,n=got(),i=jr(),a=bot();let s=class Or extends r.Transform{constructor(u){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},u&&(Object.assign(this,u),this.options=u),this.dataFactory||(this.dataFactory=new i.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?a.IriValidationStrategy.Pragmatic:a.IriValidationStrategy.None),this.parseUnsupportedVersions=!!(u!=null&&u.parseUnsupportedVersions),this.version=u==null?void 0:u.version,this.saxParser=new e.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(u){const l=new r.PassThrough({readableObjectMode:!0});u.on("error",f=>d.emit("error",f)),u.on("data",f=>l.push(f)),u.on("end",()=>l.push(null));const d=l.pipe(new Or(this.options));return d}_transform(u,l,d){if(this.version){const f=this.version;if(this.version=void 0,!this.isValidVersion(f))return d(this.newParseError(`Detected unsupported version as media type parameter: ${f}`))}try{this.saxParser.write(u)}catch(f){return d(f)}d()}newParseError(u){return new n.ParseError(this,u)}valueToUri(u,l){return this.uriToNamedNode((0,t.resolve)(u,l.baseIRI))}uriToNamedNode(u){const l=(0,a.validateIri)(u,this.iriValidationStrategy);if(l instanceof Error)throw this.newParseError(l.message);return this.dataFactory.namedNode(u)}validateNcname(u){if(!Or.NCNAME_MATCHER.test(u))throw this.newParseError(`Not a valid NCName: ${u}`)}createLiteral(u,l){return this.dataFactory.literal(u,l.datatype?l.datatype:l.language?{language:l.language,direction:l.rdfVersion?l.direction:void 0}:void 0)}isValidVersion(u){return this.parseUnsupportedVersions||Or.SUPPORTED_VERSIONS.includes(u)}attachSaxListeners(){this.saxParser.on("error",u=>this.emit("error",u)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(u){const l=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let d=o.RESOURCE;if(l&&(l.hadChildren=!0,d=l.childrenParseType),l&&l.childrenStringTags){const h=u.name;let p="";for(const{key:y,value:v}of l.namespaces||[])p+=` ${y}="${v}"`;for(const y in u.attributes)p+=` ${y}="${u.attributes[y].value}"`;const g=`<${`${h}${p}`}>`;l.childrenStringTags.push(g);const m={childrenStringTags:l.childrenStringTags};m.childrenStringEmitClosingTag=`</${h}>`,this.activeTagStack.push(m);return}const f={};l?(f.language=l.language,f.direction=l.direction,f.baseIRI=l.baseIRI,f.childrenTripleTerms=l.childrenTripleTerms,f.rdfVersion=l.rdfVersion):f.baseIRI=this.baseIRI,this.activeTagStack.push(f),d===o.RESOURCE?this.onTagResource(u,f,l,!l):this.onTagProperty(u,f,l);for(const h in u.attributes){const p=u.attributes[h];p.prefix==="xmlns"&&(f.namespaces||(f.namespaces=[]),f.namespaces.push({key:`${p.prefix}:${p.local}`,value:p.value}))}l&&l.namespaces&&(f.namespaces=[...f.namespaces||[],...l.namespaces])}onTagResource(u,l,d,f){l.childrenParseType=o.PROPERTY;let h=!0;if(u.uri===Or.RDF){if(!f&&Or.FORBIDDEN_NODE_ELEMENTS.indexOf(u.local)>=0)throw this.newParseError(`Illegal node element name: ${u.local}`);switch(u.local){case"RDF":l.childrenParseType=o.RESOURCE;case"Description":h=!1}}const p=[],_=[];let g=null,m=!1,y=!1,v=null;for(const A in u.attributes){const T=u.attributes[A];if(T.uri===Or.RDF&&T.local==="version"){this.setVersion(l,T.value);continue}else if(d&&T.uri===Or.RDF)switch(T.local){case"about":if(g)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${T.value} and ${g} where found.`);g=T.value;continue;case"ID":if(g)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${T.value} and ${g} where found.`);this.validateNcname(T.value),g="#"+T.value,m=!0;continue;case"nodeID":if(g)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${T.value} and ${g} where found.`);this.validateNcname(T.value),g=T.value,y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":v=T.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===Or.XML){if(T.local==="lang"){l.language=T.value===""?null:T.value.toLowerCase();continue}else if(T.local==="base"){l.baseIRI=(0,t.resolve)(T.value,l.baseIRI);continue}}else if(T.uri===Or.ITS&&T.local==="dir"){this.setDirection(l,T.value);continue}T.prefix!=="xml"&&T.prefix!=="xmlns"&&(T.prefix!==""||T.local!=="xmlns")&&T.uri&&(p.push(this.uriToNamedNode(T.uri+T.local)),_.push(T.value))}if(g!==null&&(l.subject=y?this.dataFactory.blankNode(g):this.valueToUri(g,l),m&&this.claimNodeId(l.subject)),l.subject||(l.subject=this.dataFactory.blankNode()),h){const A=this.uriToNamedNode(u.uri+u.local);this.emitTriple(l.subject,this.dataFactory.namedNode(Or.RDF+"type"),A,d?d.reifiedStatementId:null,l.childrenTripleTerms,l.reifier)}if(d){if(d.predicate)if(d.childrenCollectionSubject){const A=this.dataFactory.blankNode(),T=this.dataFactory.namedNode(Or.RDF+"rest"),S=d.childrenCollectionPredicate.equals(T);this.emitTriple(d.childrenCollectionSubject,d.childrenCollectionPredicate,A,S?null:d.reifiedStatementId,d.childrenTripleTerms,S?null:d.reifier),this.emitTriple(A,this.dataFactory.namedNode(Or.RDF+"first"),l.subject,null,l.childrenTripleTerms),d.childrenCollectionSubject=A,d.childrenCollectionPredicate=T}else{d.childrenTagsToTripleTerms||(this.emitTriple(d.subject,d.predicate,l.subject,d.reifiedStatementId,d.childrenTripleTerms,d.reifier),d.predicateEmitted=!0);for(let A=0;A<d.predicateSubPredicates.length;A++)this.emitTriple(l.subject,d.predicateSubPredicates[A],d.predicateSubObjects[A],null,d.childrenTripleTerms,d.reifier);d.predicateSubPredicates=[],d.predicateSubObjects=[]}for(let A=0;A<p.length;A++){const T=this.createLiteral(_[A],l);this.emitTriple(l.subject,p[A],T,d.reifiedStatementId,d.childrenTripleTerms,d.reifier)}v&&this.emitTriple(l.subject,this.dataFactory.namedNode(Or.RDF+"type"),this.uriToNamedNode(v),null,l.childrenTripleTerms,l.reifier)}}onTagProperty(u,l,d){if(l.childrenParseType=o.RESOURCE,l.subject=d.subject,u.uri===Or.RDF&&u.local==="li"?(d.listItemCounter||(d.listItemCounter=1),l.predicate=this.uriToNamedNode(u.uri+"_"+d.listItemCounter++)):l.predicate=this.uriToNamedNode(u.uri+u.local),u.uri===Or.RDF&&Or.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(u.local)>=0)throw this.newParseError(`Illegal property element name: ${u.local}`);l.predicateSubPredicates=[],l.predicateSubObjects=[];let f=!1,h=!1,p=null,_=!0;const g=[],m=[];for(const y in u.attributes){const v=u.attributes[y];if(v.uri===Or.RDF&&v.local==="version"){this.setVersion(l,v.value);continue}else if(v.uri===Or.RDF)switch(v.local){case"resource":if(p)throw this.newParseError(`Found both rdf:resource (${v.value}) and rdf:nodeID (${p}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${v.value})`);l.hadChildren=!0,p=v.value,_=!1;continue;case"datatype":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${v.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${v.value})`);l.datatype=this.valueToUri(v.value,l);continue;case"nodeID":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${v.value}).`);if(l.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${v.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${v.value})`);this.validateNcname(v.value),l.hadChildren=!0,p=v.value,_=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(h)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(l.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${l.datatype.value})`);if(p)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${p})`);if(v.value==="Resource"){f=!0,l.childrenParseType=o.PROPERTY;const A=this.dataFactory.blankNode();this.emitTriple(l.subject,l.predicate,A,l.reifiedStatementId,l.childrenTripleTerms,l.reifier),l.subject=A,l.predicate=null}else v.value==="Collection"?(f=!0,l.hadChildren=!0,l.childrenCollectionSubject=l.subject,l.childrenCollectionPredicate=l.predicate,_=!1):v.value==="Literal"?(f=!0,l.childrenTagsToString=!0,l.childrenStringTags=[]):v.value==="Triple"&&(f=!0,l.childrenTagsToTripleTerms=!0,l.childrenTripleTerms=[]);continue;case"ID":this.validateNcname(v.value),l.reifiedStatementId=this.valueToUri("#"+v.value,l),this.claimNodeId(l.reifiedStatementId);continue;case"annotation":l.reifier=this.dataFactory.namedNode(v.value);continue;case"annotationNodeID":l.reifier=this.dataFactory.blankNode(v.value);continue}else if(v.uri===Or.XML&&v.local==="lang"){l.language=v.value===""?null:v.value.toLowerCase();continue}else if(v.uri===Or.ITS&&v.local==="dir"){this.setDirection(l,v.value);continue}else if(v.uri===Or.ITS&&v.local==="version")continue;if(v.prefix!=="xml"&&v.prefix!=="xmlns"&&(v.prefix!==""||v.local!=="xmlns")&&v.uri){if(f||l.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${v.value}`);l.hadChildren=!0,h=!0,g.push(this.uriToNamedNode(v.uri+v.local)),m.push(this.createLiteral(v.value,l))}}if(p!==null){const y=l.subject;l.subject=_?this.dataFactory.blankNode(p):this.valueToUri(p,l),this.emitTriple(y,l.predicate,l.subject,l.reifiedStatementId,l.childrenTripleTerms,l.reifier);for(let v=0;v<g.length;v++)this.emitTriple(l.subject,g[v],m[v],null,l.childrenTripleTerms,l.reifier);l.predicateEmitted=!0}else _&&(l.predicateSubPredicates=g,l.predicateSubObjects=m,l.predicateEmitted=!1)}emitTriple(u,l,d,f,h,p){const _=this.dataFactory.quad(u,l,d,this.defaultGraph);h?h.push(_):this.push(_),p&&this.push(this.dataFactory.quad(p,this.dataFactory.namedNode(Or.RDF+"reifies"),_)),f&&(this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Or.RDF+"type"),this.dataFactory.namedNode(Or.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Or.RDF+"subject"),u,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Or.RDF+"predicate"),l,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Or.RDF+"object"),d,this.defaultGraph)))}claimNodeId(u){if(!this.allowDuplicateRdfIds){if(this.nodeIds[u.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${u.value}'.`);this.nodeIds[u.value]=!0}}onText(u){const l=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;l&&(l.childrenStringTags?l.childrenStringTags.push(u):l.predicate&&(l.text=u))}onCloseTag(){const u=this.activeTagStack.pop(),l=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;if(u.childrenStringEmitClosingTag&&u.childrenStringTags.push(u.childrenStringEmitClosingTag),u.childrenTagsToString&&(u.datatype=this.dataFactory.namedNode(Or.RDF+"XMLLiteral"),u.text=u.childrenStringTags.join(""),u.hadChildren=!1),u.childrenTagsToTripleTerms&&u.predicate&&u.rdfVersion){if(u.childrenTripleTerms.length!==1)throw this.newParseError(`Expected exactly one triple term in rdf:parseType="Triple" but got ${u.childrenTripleTerms.length}`);for(const d of u.childrenTripleTerms)this.emitTriple(u.subject,u.predicate,d,null,l.childrenTripleTerms,l.reifier);u.predicateEmitted=!0}if(u.childrenCollectionSubject)this.emitTriple(u.childrenCollectionSubject,u.childrenCollectionPredicate,this.dataFactory.namedNode(Or.RDF+"nil"),null,u.childrenTripleTerms);else if(u.predicate){if(!u.hadChildren&&u.childrenParseType!==o.PROPERTY)this.emitTriple(u.subject,u.predicate,this.createLiteral(u.text||"",u),u.reifiedStatementId,u.childrenTripleTerms,u.reifier);else if(!u.predicateEmitted){const d=this.dataFactory.blankNode();this.emitTriple(u.subject,u.predicate,d,u.reifiedStatementId,u.childrenTripleTerms,u.reifier);for(let f=0;f<u.predicateSubPredicates.length;f++)this.emitTriple(d,u.predicateSubPredicates[f],u.predicateSubObjects[f],null,u.childrenTripleTerms)}}}onDoctype(u){u.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(l,d,f)=>(this.saxParser.ENTITIES[d]=f,""))}setDirection(u,l){if(l){if(l!=="ltr"&&l!=="rtl")throw this.newParseError(`Base directions must either be 'ltr' or 'rtl', while '${l}' was found.`);u.direction=l}else delete u.direction}setVersion(u,l){if(u.rdfVersion=l,this.emit("version",l),!this.isValidVersion(l))throw this.newParseError(`Detected unsupported version: ${l}`)}};fd.RdfXmlParser=s,s.MIME_TYPE="application/rdf+xml",s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s.XML="http://www.w3.org/XML/1998/namespace",s.ITS="http://www.w3.org/2005/11/its",s.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],s.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],s.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,s.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"];var o;return function(c){c[c.RESOURCE=0]="RESOURCE",c[c.PROPERTY=1]="PROPERTY"}(o||(fd.ParseType=o={})),fd}var Ooe;function Aot(){return Ooe||(Ooe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vot(),t)}(G4)),G4}var Roe;function Tot(){if(Roe)return My;Roe=1,Object.defineProperty(My,"__esModule",{value:!0}),My.ActorRdfParseRdfXml=void 0;const t=p0(),e=dt,r=Aot();let n=class extends t.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async runHandle(a){var c,u;const s=a.context.getSafe(e.KeysInitQuery.dataFactory);a.data.on("error",l=>o.emit("error",l));const o=a.data.pipe(new r.RdfXmlParser({dataFactory:s,baseIRI:(c=a.metadata)==null?void 0:c.baseIRI,parseUnsupportedVersions:!!a.context.get(e.KeysInitQuery.parseUnsupportedVersions),version:(u=a.metadata)==null?void 0:u.version}));return{data:o,metadata:{triples:!0}}}};return My.ActorRdfParseRdfXml=n,My}var Poe;function wot(){return Poe||(Poe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tot(),t)}(V4)),V4}var K4={},Cy={},X4={},J4={},Noe;function Sot(){return Noe||(Noe=1,Object.defineProperty(J4,"__esModule",{value:!0})),J4}var Y4={},Foe;function xot(){return Foe||(Foe=1,Object.defineProperty(Y4,"__esModule",{value:!0})),Y4}var $4={},Moe;function Eot(){return Moe||(Moe=1,Object.defineProperty($4,"__esModule",{value:!0})),$4}var Ly={},Z4={},jy={},Th={},e8={},JR={},Doe;function Iot(){return Doe||(Doe=1,Object.defineProperty(JR,"__esModule",{value:!0}),JR.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(t){return t.charCodeAt(0)}))),JR}var YR={},Coe;function Oot(){return Coe||(Coe=1,Object.defineProperty(YR,"__esModule",{value:!0}),YR.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(t){return t.charCodeAt(0)}))),YR}var t8={},Loe;function joe(){return Loe||(Loe=1,function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(a){var s="";return a>65535&&(a-=65536,s+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),s+=String.fromCharCode(a),s};function n(a){var s;return a>=55296&&a<=57343||a>1114111?65533:(s=r.get(a))!==null&&s!==void 0?s:a}t.replaceCodePoint=n;function i(a){return(0,t.fromCodePoint)(n(a))}t.default=i}(t8)),t8}var Boe;function w2e(){return Boe||(Boe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(R,C,M,U){U===void 0&&(U=M);var B=Object.getOwnPropertyDescriptor(C,M);(!B||("get"in B?!C.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return C[M]}}),Object.defineProperty(R,U,B)}:function(R,C,M,U){U===void 0&&(U=M),R[U]=C[M]}),r=E&&E.__setModuleDefault||(Object.create?function(R,C){Object.defineProperty(R,"default",{enumerable:!0,value:C})}:function(R,C){R.default=C}),n=E&&E.__importStar||function(R){if(R&&R.__esModule)return R;var C={};if(R!=null)for(var M in R)M!=="default"&&Object.prototype.hasOwnProperty.call(R,M)&&e(C,R,M);return r(C,R),C},i=E&&E.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=i(Iot());t.htmlDecodeTree=a.default;var s=i(Oot());t.xmlDecodeTree=s.default;var o=n(joe());t.decodeCodePoint=o.default;var c=joe();Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var u;(function(R){R[R.NUM=35]="NUM",R[R.SEMI=59]="SEMI",R[R.EQUALS=61]="EQUALS",R[R.ZERO=48]="ZERO",R[R.NINE=57]="NINE",R[R.LOWER_A=97]="LOWER_A",R[R.LOWER_F=102]="LOWER_F",R[R.LOWER_X=120]="LOWER_X",R[R.LOWER_Z=122]="LOWER_Z",R[R.UPPER_A=65]="UPPER_A",R[R.UPPER_F=70]="UPPER_F",R[R.UPPER_Z=90]="UPPER_Z"})(u||(u={}));var l=32,d;(function(R){R[R.VALUE_LENGTH=49152]="VALUE_LENGTH",R[R.BRANCH_LENGTH=16256]="BRANCH_LENGTH",R[R.JUMP_TABLE=127]="JUMP_TABLE"})(d=t.BinTrieFlags||(t.BinTrieFlags={}));function f(R){return R>=u.ZERO&&R<=u.NINE}function h(R){return R>=u.UPPER_A&&R<=u.UPPER_F||R>=u.LOWER_A&&R<=u.LOWER_F}function p(R){return R>=u.UPPER_A&&R<=u.UPPER_Z||R>=u.LOWER_A&&R<=u.LOWER_Z||f(R)}function _(R){return R===u.EQUALS||p(R)}var g;(function(R){R[R.EntityStart=0]="EntityStart",R[R.NumericStart=1]="NumericStart",R[R.NumericDecimal=2]="NumericDecimal",R[R.NumericHex=3]="NumericHex",R[R.NamedEntity=4]="NamedEntity"})(g||(g={}));var m;(function(R){R[R.Legacy=0]="Legacy",R[R.Strict=1]="Strict",R[R.Attribute=2]="Attribute"})(m=t.DecodingMode||(t.DecodingMode={}));var y=function(){function R(C,M,U){this.decodeTree=C,this.emitCodePoint=M,this.errors=U,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return R.prototype.startEntity=function(C){this.decodeMode=C,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},R.prototype.write=function(C,M){switch(this.state){case g.EntityStart:return C.charCodeAt(M)===u.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(C,M+1)):(this.state=g.NamedEntity,this.stateNamedEntity(C,M));case g.NumericStart:return this.stateNumericStart(C,M);case g.NumericDecimal:return this.stateNumericDecimal(C,M);case g.NumericHex:return this.stateNumericHex(C,M);case g.NamedEntity:return this.stateNamedEntity(C,M)}},R.prototype.stateNumericStart=function(C,M){return M>=C.length?-1:(C.charCodeAt(M)|l)===u.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(C,M+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(C,M))},R.prototype.addToNumericResult=function(C,M,U,B){if(M!==U){var G=U-M;this.result=this.result*Math.pow(B,G)+parseInt(C.substr(M,G),B),this.consumed+=G}},R.prototype.stateNumericHex=function(C,M){for(var U=M;M<C.length;){var B=C.charCodeAt(M);if(f(B)||h(B))M+=1;else return this.addToNumericResult(C,U,M,16),this.emitNumericEntity(B,3)}return this.addToNumericResult(C,U,M,16),-1},R.prototype.stateNumericDecimal=function(C,M){for(var U=M;M<C.length;){var B=C.charCodeAt(M);if(f(B))M+=1;else return this.addToNumericResult(C,U,M,10),this.emitNumericEntity(B,2)}return this.addToNumericResult(C,U,M,10),-1},R.prototype.emitNumericEntity=function(C,M){var U;if(this.consumed<=M)return(U=this.errors)===null||U===void 0||U.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(C===u.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(C!==u.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},R.prototype.stateNamedEntity=function(C,M){for(var U=this.decodeTree,B=U[this.treeIndex],G=(B&d.VALUE_LENGTH)>>14;M<C.length;M++,this.excess++){var K=C.charCodeAt(M);if(this.treeIndex=A(U,B,this.treeIndex+Math.max(1,G),K),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(G===0||_(K))?0:this.emitNotTerminatedNamedEntity();if(B=U[this.treeIndex],G=(B&d.VALUE_LENGTH)>>14,G!==0){if(K===u.SEMI)return this.emitNamedEntityData(this.treeIndex,G,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},R.prototype.emitNotTerminatedNamedEntity=function(){var C,M=this,U=M.result,B=M.decodeTree,G=(B[U]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(U,G,this.consumed),(C=this.errors)===null||C===void 0||C.missingSemicolonAfterCharacterReference(),this.consumed},R.prototype.emitNamedEntityData=function(C,M,U){var B=this.decodeTree;return this.emitCodePoint(M===1?B[C]&~d.VALUE_LENGTH:B[C+1],U),M===3&&this.emitCodePoint(B[C+2],U),U},R.prototype.end=function(){var C;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(C=this.errors)===null||C===void 0||C.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},R}();t.EntityDecoder=y;function v(R){var C="",M=new y(R,function(U){return C+=(0,o.fromCodePoint)(U)});return function(B,G){for(var K=0,$=0;($=B.indexOf("&",$))>=0;){C+=B.slice(K,$),M.startEntity(G);var se=M.write(B,$+1);if(se<0){K=$+M.end();break}K=$+se,$=se===0?K+1:K}var pe=C+B.slice(K);return C="",pe}}function A(R,C,M,U){var B=(C&d.BRANCH_LENGTH)>>7,G=C&d.JUMP_TABLE;if(B===0)return G!==0&&U===G?M:-1;if(G){var K=U-G;return K<0||K>=B?-1:R[M+K]-1}for(var $=M,se=$+B-1;$<=se;){var pe=$+se>>>1,we=R[pe];if(we<U)$=pe+1;else if(we>U)se=pe-1;else return R[pe+B]}return-1}t.determineBranch=A;var T=v(a.default),S=v(s.default);function P(R,C){return C===void 0&&(C=m.Legacy),T(R,C)}t.decodeHTML=P;function j(R){return T(R,m.Attribute)}t.decodeHTMLAttribute=j;function F(R){return T(R,m.Strict)}t.decodeHTMLStrict=F;function N(R){return S(R,m.Strict)}t.decodeXML=N}(e8)),e8}var qoe;function S2e(){if(qoe)return Th;qoe=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.QuoteType=void 0;var t=w2e(),e;(function(u){u[u.Tab=9]="Tab",u[u.NewLine=10]="NewLine",u[u.FormFeed=12]="FormFeed",u[u.CarriageReturn=13]="CarriageReturn",u[u.Space=32]="Space",u[u.ExclamationMark=33]="ExclamationMark",u[u.Number=35]="Number",u[u.Amp=38]="Amp",u[u.SingleQuote=39]="SingleQuote",u[u.DoubleQuote=34]="DoubleQuote",u[u.Dash=45]="Dash",u[u.Slash=47]="Slash",u[u.Zero=48]="Zero",u[u.Nine=57]="Nine",u[u.Semi=59]="Semi",u[u.Lt=60]="Lt",u[u.Eq=61]="Eq",u[u.Gt=62]="Gt",u[u.Questionmark=63]="Questionmark",u[u.UpperA=65]="UpperA",u[u.LowerA=97]="LowerA",u[u.UpperF=70]="UpperF",u[u.LowerF=102]="LowerF",u[u.UpperZ=90]="UpperZ",u[u.LowerZ=122]="LowerZ",u[u.LowerX=120]="LowerX",u[u.OpeningSquareBracket=91]="OpeningSquareBracket"})(e||(e={}));var r;(function(u){u[u.Text=1]="Text",u[u.BeforeTagName=2]="BeforeTagName",u[u.InTagName=3]="InTagName",u[u.InSelfClosingTag=4]="InSelfClosingTag",u[u.BeforeClosingTagName=5]="BeforeClosingTagName",u[u.InClosingTagName=6]="InClosingTagName",u[u.AfterClosingTagName=7]="AfterClosingTagName",u[u.BeforeAttributeName=8]="BeforeAttributeName",u[u.InAttributeName=9]="InAttributeName",u[u.AfterAttributeName=10]="AfterAttributeName",u[u.BeforeAttributeValue=11]="BeforeAttributeValue",u[u.InAttributeValueDq=12]="InAttributeValueDq",u[u.InAttributeValueSq=13]="InAttributeValueSq",u[u.InAttributeValueNq=14]="InAttributeValueNq",u[u.BeforeDeclaration=15]="BeforeDeclaration",u[u.InDeclaration=16]="InDeclaration",u[u.InProcessingInstruction=17]="InProcessingInstruction",u[u.BeforeComment=18]="BeforeComment",u[u.CDATASequence=19]="CDATASequence",u[u.InSpecialComment=20]="InSpecialComment",u[u.InCommentLike=21]="InCommentLike",u[u.BeforeSpecialS=22]="BeforeSpecialS",u[u.BeforeSpecialT=23]="BeforeSpecialT",u[u.SpecialStartSequence=24]="SpecialStartSequence",u[u.InSpecialTag=25]="InSpecialTag",u[u.InEntity=26]="InEntity"})(r||(r={}));function n(u){return u===e.Space||u===e.NewLine||u===e.Tab||u===e.FormFeed||u===e.CarriageReturn}function i(u){return u===e.Slash||u===e.Gt||n(u)}function a(u){return u>=e.LowerA&&u<=e.LowerZ||u>=e.UpperA&&u<=e.UpperZ}var s;(function(u){u[u.NoValue=0]="NoValue",u[u.Unquoted=1]="Unquoted",u[u.Single=2]="Single",u[u.Double=3]="Double"})(s||(Th.QuoteType=s={}));var o={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])},c=function(){function u(l,d){var f=l.xmlMode,h=f===void 0?!1:f,p=l.decodeEntities,_=p===void 0?!0:p,g=this;this.cbs=d,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=h,this.decodeEntities=_,this.entityDecoder=new t.EntityDecoder(h?t.xmlDecodeTree:t.htmlDecodeTree,function(m,y){return g.emitCodePoint(m,y)})}return u.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},u.prototype.write=function(l){this.offset+=this.buffer.length,this.buffer=l,this.parse()},u.prototype.end=function(){this.running&&this.finish()},u.prototype.pause=function(){this.running=!1},u.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},u.prototype.stateText=function(l){l===e.Lt||!this.decodeEntities&&this.fastForwardTo(e.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&l===e.Amp&&this.startEntity()},u.prototype.stateSpecialStartSequence=function(l){var d=this.sequenceIndex===this.currentSequence.length,f=d?i(l):(l|32)===this.currentSequence[this.sequenceIndex];if(!f)this.isSpecial=!1;else if(!d){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(l)},u.prototype.stateInSpecialTag=function(l){if(this.sequenceIndex===this.currentSequence.length){if(l===e.Gt||n(l)){var d=this.index-this.currentSequence.length;if(this.sectionStart<d){var f=this.index;this.index=d,this.cbs.ontext(this.sectionStart,d),this.index=f}this.isSpecial=!1,this.sectionStart=d+2,this.stateInClosingTagName(l);return}this.sequenceIndex=0}(l|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===o.TitleEnd?this.decodeEntities&&l===e.Amp&&this.startEntity():this.fastForwardTo(e.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(l===e.Lt)},u.prototype.stateCDATASequence=function(l){l===o.Cdata[this.sequenceIndex]?++this.sequenceIndex===o.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=o.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(l))},u.prototype.fastForwardTo=function(l){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===l)return!0;return this.index=this.buffer.length+this.offset-1,!1},u.prototype.stateInCommentLike=function(l){l===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):l!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},u.prototype.isTagStartChar=function(l){return this.xmlMode?!i(l):a(l)},u.prototype.startSpecial=function(l,d){this.isSpecial=!0,this.currentSequence=l,this.sequenceIndex=d,this.state=r.SpecialStartSequence},u.prototype.stateBeforeTagName=function(l){if(l===e.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(l===e.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(l)){var d=l|32;this.sectionStart=this.index,this.xmlMode?this.state=r.InTagName:d===o.ScriptEnd[2]?this.state=r.BeforeSpecialS:d===o.TitleEnd[2]?this.state=r.BeforeSpecialT:this.state=r.InTagName}else l===e.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(l))},u.prototype.stateInTagName=function(l){i(l)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l))},u.prototype.stateBeforeClosingTagName=function(l){n(l)||(l===e.Gt?this.state=r.Text:(this.state=this.isTagStartChar(l)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},u.prototype.stateInClosingTagName=function(l){(l===e.Gt||n(l))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(l))},u.prototype.stateAfterClosingTagName=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateBeforeAttributeName=function(l){l===e.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.sectionStart=this.index+1):l===e.Slash?this.state=r.InSelfClosingTag:n(l)||(this.state=r.InAttributeName,this.sectionStart=this.index)},u.prototype.stateInSelfClosingTag=function(l){l===e.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(l)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l))},u.prototype.stateInAttributeName=function(l){(l===e.Eq||i(l))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=r.AfterAttributeName,this.stateAfterAttributeName(l))},u.prototype.stateAfterAttributeName=function(l){l===e.Eq?this.state=r.BeforeAttributeValue:l===e.Slash||l===e.Gt?(this.cbs.onattribend(s.NoValue,this.sectionStart),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l)):n(l)||(this.cbs.onattribend(s.NoValue,this.sectionStart),this.state=r.InAttributeName,this.sectionStart=this.index)},u.prototype.stateBeforeAttributeValue=function(l){l===e.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):l===e.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):n(l)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(l))},u.prototype.handleInAttributeValue=function(l,d){l===d||!this.decodeEntities&&this.fastForwardTo(d)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(d===e.DoubleQuote?s.Double:s.Single,this.index+1),this.state=r.BeforeAttributeName):this.decodeEntities&&l===e.Amp&&this.startEntity()},u.prototype.stateInAttributeValueDoubleQuotes=function(l){this.handleInAttributeValue(l,e.DoubleQuote)},u.prototype.stateInAttributeValueSingleQuotes=function(l){this.handleInAttributeValue(l,e.SingleQuote)},u.prototype.stateInAttributeValueNoQuotes=function(l){n(l)||l===e.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l)):this.decodeEntities&&l===e.Amp&&this.startEntity()},u.prototype.stateBeforeDeclaration=function(l){l===e.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=l===e.Dash?r.BeforeComment:r.InDeclaration},u.prototype.stateInDeclaration=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateInProcessingInstruction=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateBeforeComment=function(l){l===e.Dash?(this.state=r.InCommentLike,this.currentSequence=o.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},u.prototype.stateInSpecialComment=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateBeforeSpecialS=function(l){var d=l|32;d===o.ScriptEnd[3]?this.startSpecial(o.ScriptEnd,4):d===o.StyleEnd[3]?this.startSpecial(o.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(l))},u.prototype.stateBeforeSpecialT=function(l){var d=l|32;d===o.TitleEnd[3]?this.startSpecial(o.TitleEnd,4):d===o.TextareaEnd[3]?this.startSpecial(o.TextareaEnd,4):(this.state=r.InTagName,this.stateInTagName(l))},u.prototype.startEntity=function(){this.baseState=this.state,this.state=r.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?t.DecodingMode.Strict:this.baseState===r.Text||this.baseState===r.InSpecialTag?t.DecodingMode.Legacy:t.DecodingMode.Attribute)},u.prototype.stateInEntity=function(){var l=this.entityDecoder.write(this.buffer,this.index-this.offset);l>=0?(this.state=this.baseState,l===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1},u.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===r.InAttributeValueDq||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},u.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},u.prototype.parse=function(){for(;this.shouldContinue();){var l=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:{this.stateText(l);break}case r.SpecialStartSequence:{this.stateSpecialStartSequence(l);break}case r.InSpecialTag:{this.stateInSpecialTag(l);break}case r.CDATASequence:{this.stateCDATASequence(l);break}case r.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(l);break}case r.InAttributeName:{this.stateInAttributeName(l);break}case r.InCommentLike:{this.stateInCommentLike(l);break}case r.InSpecialComment:{this.stateInSpecialComment(l);break}case r.BeforeAttributeName:{this.stateBeforeAttributeName(l);break}case r.InTagName:{this.stateInTagName(l);break}case r.InClosingTagName:{this.stateInClosingTagName(l);break}case r.BeforeTagName:{this.stateBeforeTagName(l);break}case r.AfterAttributeName:{this.stateAfterAttributeName(l);break}case r.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(l);break}case r.BeforeAttributeValue:{this.stateBeforeAttributeValue(l);break}case r.BeforeClosingTagName:{this.stateBeforeClosingTagName(l);break}case r.AfterClosingTagName:{this.stateAfterClosingTagName(l);break}case r.BeforeSpecialS:{this.stateBeforeSpecialS(l);break}case r.BeforeSpecialT:{this.stateBeforeSpecialT(l);break}case r.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(l);break}case r.InSelfClosingTag:{this.stateInSelfClosingTag(l);break}case r.InDeclaration:{this.stateInDeclaration(l);break}case r.BeforeDeclaration:{this.stateBeforeDeclaration(l);break}case r.BeforeComment:{this.stateBeforeComment(l);break}case r.InProcessingInstruction:{this.stateInProcessingInstruction(l);break}case r.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()},u.prototype.finish=function(){this.state===r.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()},u.prototype.handleTrailingData=function(){var l=this.buffer.length+this.offset;this.sectionStart>=l||(this.state===r.InCommentLike?this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,l,0):this.cbs.oncomment(this.sectionStart,l,0):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,l))},u.prototype.emitCodePoint=function(l,d){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.onattribentity(l)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.ontextentity(l,this.sectionStart))},u}();return Th.default=c,Th}var Uoe;function Voe(){if(Uoe)return jy;Uoe=1;var t=E&&E.__createBinding||(Object.create?function(g,m,y,v){v===void 0&&(v=y);var A=Object.getOwnPropertyDescriptor(m,y);(!A||("get"in A?!m.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(g,v,A)}:function(g,m,y,v){v===void 0&&(v=y),g[v]=m[y]}),e=E&&E.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),r=E&&E.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&t(m,g,y);return e(m,g),m};Object.defineProperty(jy,"__esModule",{value:!0}),jy.Parser=void 0;var n=r(S2e()),i=w2e(),a=new Set(["input","option","optgroup","select","button","datalist","textarea"]),s=new Set(["p"]),o=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),u=new Set(["rt","rp"]),l=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",s],["h1",s],["h2",s],["h3",s],["h4",s],["h5",s],["h6",s],["select",a],["input",a],["output",a],["button",a],["datalist",a],["textarea",a],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",s],["article",s],["aside",s],["blockquote",s],["details",s],["div",s],["dl",s],["fieldset",s],["figcaption",s],["figure",s],["footer",s],["form",s],["header",s],["hr",s],["main",s],["nav",s],["ol",s],["pre",s],["section",s],["table",s],["ul",s],["rt",u],["rp",u],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//,_=function(){function g(m,y){y===void 0&&(y={});var v,A,T,S,P,j;this.options=y,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(v=y.lowerCaseTags)!==null&&v!==void 0?v:this.htmlMode,this.lowerCaseAttributeNames=(A=y.lowerCaseAttributeNames)!==null&&A!==void 0?A:this.htmlMode,this.recognizeSelfClosing=(T=y.recognizeSelfClosing)!==null&&T!==void 0?T:!this.htmlMode,this.tokenizer=new((S=y.Tokenizer)!==null&&S!==void 0?S:n.default)(this.options,this),this.foreignContext=[!this.htmlMode],(j=(P=this.cbs).onparserinit)===null||j===void 0||j.call(P,this)}return g.prototype.ontext=function(m,y){var v,A,T=this.getSlice(m,y);this.endIndex=y-1,(A=(v=this.cbs).ontext)===null||A===void 0||A.call(v,T),this.startIndex=y},g.prototype.ontextentity=function(m,y){var v,A;this.endIndex=y-1,(A=(v=this.cbs).ontext)===null||A===void 0||A.call(v,(0,i.fromCodePoint)(m)),this.startIndex=y},g.prototype.isVoidElement=function(m){return this.htmlMode&&d.has(m)},g.prototype.onopentagname=function(m,y){this.endIndex=y;var v=this.getSlice(m,y);this.lowerCaseTagNames&&(v=v.toLowerCase()),this.emitOpenTag(v)},g.prototype.emitOpenTag=function(m){var y,v,A,T;this.openTagStart=this.startIndex,this.tagname=m;var S=this.htmlMode&&l.get(m);if(S)for(;this.stack.length>0&&S.has(this.stack[0]);){var P=this.stack.shift();(v=(y=this.cbs).onclosetag)===null||v===void 0||v.call(y,P,!0)}this.isVoidElement(m)||(this.stack.unshift(m),this.htmlMode&&(f.has(m)?this.foreignContext.unshift(!0):h.has(m)&&this.foreignContext.unshift(!1))),(T=(A=this.cbs).onopentagname)===null||T===void 0||T.call(A,m),this.cbs.onopentag&&(this.attribs={})},g.prototype.endOpenTag=function(m){var y,v;this.startIndex=this.openTagStart,this.attribs&&((v=(y=this.cbs).onopentag)===null||v===void 0||v.call(y,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},g.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},g.prototype.onclosetag=function(m,y){var v,A,T,S,P,j,F,N;this.endIndex=y;var R=this.getSlice(m,y);if(this.lowerCaseTagNames&&(R=R.toLowerCase()),this.htmlMode&&(f.has(R)||h.has(R))&&this.foreignContext.shift(),this.isVoidElement(R))this.htmlMode&&R==="br"&&((S=(T=this.cbs).onopentagname)===null||S===void 0||S.call(T,"br"),(j=(P=this.cbs).onopentag)===null||j===void 0||j.call(P,"br",{},!0),(N=(F=this.cbs).onclosetag)===null||N===void 0||N.call(F,"br",!1));else{var C=this.stack.indexOf(R);if(C!==-1)for(var M=0;M<=C;M++){var U=this.stack.shift();(A=(v=this.cbs).onclosetag)===null||A===void 0||A.call(v,U,M!==C)}else this.htmlMode&&R==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=y+1},g.prototype.onselfclosingtag=function(m){this.endIndex=m,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},g.prototype.closeCurrentTag=function(m){var y,v,A=this.tagname;this.endOpenTag(m),this.stack[0]===A&&((v=(y=this.cbs).onclosetag)===null||v===void 0||v.call(y,A,!m),this.stack.shift())},g.prototype.onattribname=function(m,y){this.startIndex=m;var v=this.getSlice(m,y);this.attribname=this.lowerCaseAttributeNames?v.toLowerCase():v},g.prototype.onattribdata=function(m,y){this.attribvalue+=this.getSlice(m,y)},g.prototype.onattribentity=function(m){this.attribvalue+=(0,i.fromCodePoint)(m)},g.prototype.onattribend=function(m,y){var v,A;this.endIndex=y,(A=(v=this.cbs).onattribute)===null||A===void 0||A.call(v,this.attribname,this.attribvalue,m===n.QuoteType.Double?'"':m===n.QuoteType.Single?"'":m===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},g.prototype.getInstructionName=function(m){var y=m.search(p),v=y<0?m:m.substr(0,y);return this.lowerCaseTagNames&&(v=v.toLowerCase()),v},g.prototype.ondeclaration=function(m,y){this.endIndex=y;var v=this.getSlice(m,y);if(this.cbs.onprocessinginstruction){var A=this.getInstructionName(v);this.cbs.onprocessinginstruction("!".concat(A),"!".concat(v))}this.startIndex=y+1},g.prototype.onprocessinginstruction=function(m,y){this.endIndex=y;var v=this.getSlice(m,y);if(this.cbs.onprocessinginstruction){var A=this.getInstructionName(v);this.cbs.onprocessinginstruction("?".concat(A),"?".concat(v))}this.startIndex=y+1},g.prototype.oncomment=function(m,y,v){var A,T,S,P;this.endIndex=y,(T=(A=this.cbs).oncomment)===null||T===void 0||T.call(A,this.getSlice(m,y-v)),(P=(S=this.cbs).oncommentend)===null||P===void 0||P.call(S),this.startIndex=y+1},g.prototype.oncdata=function(m,y,v){var A,T,S,P,j,F,N,R,C,M;this.endIndex=y;var U=this.getSlice(m,y-v);!this.htmlMode||this.options.recognizeCDATA?((T=(A=this.cbs).oncdatastart)===null||T===void 0||T.call(A),(P=(S=this.cbs).ontext)===null||P===void 0||P.call(S,U),(F=(j=this.cbs).oncdataend)===null||F===void 0||F.call(j)):((R=(N=this.cbs).oncomment)===null||R===void 0||R.call(N,"[CDATA[".concat(U,"]]")),(M=(C=this.cbs).oncommentend)===null||M===void 0||M.call(C)),this.startIndex=y+1},g.prototype.onend=function(){var m,y;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var v=0;v<this.stack.length;v++)this.cbs.onclosetag(this.stack[v],!0)}(y=(m=this.cbs).onend)===null||y===void 0||y.call(m)},g.prototype.reset=function(){var m,y,v,A;(y=(m=this.cbs).onreset)===null||y===void 0||y.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(A=(v=this.cbs).onparserinit)===null||A===void 0||A.call(v,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1},g.prototype.parseComplete=function(m){this.reset(),this.end(m)},g.prototype.getSlice=function(m,y){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var v=this.buffers[0].slice(m-this.bufferOffset,y-this.bufferOffset);y-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),v+=this.buffers[0].slice(0,y-this.bufferOffset);return v},g.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},g.prototype.write=function(m){var y,v;if(this.ended){(v=(y=this.cbs).onerror)===null||v===void 0||v.call(y,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},g.prototype.end=function(m){var y,v;if(this.ended){(v=(y=this.cbs).onerror)===null||v===void 0||v.call(y,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},g.prototype.pause=function(){this.tokenizer.pause()},g.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},g.prototype.parseChunk=function(m){this.write(m)},g.prototype.done=function(m){this.end(m)},g}();return jy.Parser=_,jy}var r8={},n8={},Goe;function Mf(){return Goe||(Goe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function r(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}t.isTag=r,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype}(n8)),n8}var fr={},Hoe;function koe(){if(Hoe)return fr;Hoe=1;var t=E&&E.__extends||function(){var T=function(S,P){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,F){j.__proto__=F}||function(j,F){for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(j[N]=F[N])},T(S,P)};return function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");T(S,P);function j(){this.constructor=S}S.prototype=P===null?Object.create(P):(j.prototype=P.prototype,new j)}}(),e=E&&E.__assign||function(){return e=Object.assign||function(T){for(var S,P=1,j=arguments.length;P<j;P++){S=arguments[P];for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(T[F]=S[F])}return T},e.apply(this,arguments)};Object.defineProperty(fr,"__esModule",{value:!0}),fr.cloneNode=fr.hasChildren=fr.isDocument=fr.isDirective=fr.isComment=fr.isText=fr.isCDATA=fr.isTag=fr.Element=fr.Document=fr.CDATA=fr.NodeWithChildren=fr.ProcessingInstruction=fr.Comment=fr.Text=fr.DataNode=fr.Node=void 0;var r=Mf(),n=function(){function T(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(T.prototype,"parentNode",{get:function(){return this.parent},set:function(S){this.parent=S},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"previousSibling",{get:function(){return this.prev},set:function(S){this.prev=S},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"nextSibling",{get:function(){return this.next},set:function(S){this.next=S},enumerable:!1,configurable:!0}),T.prototype.cloneNode=function(S){return S===void 0&&(S=!1),v(this,S)},T}();fr.Node=n;var i=function(T){t(S,T);function S(P){var j=T.call(this)||this;return j.data=P,j}return Object.defineProperty(S.prototype,"nodeValue",{get:function(){return this.data},set:function(P){this.data=P},enumerable:!1,configurable:!0}),S}(n);fr.DataNode=i;var a=function(T){t(S,T);function S(){var P=T!==null&&T.apply(this,arguments)||this;return P.type=r.ElementType.Text,P}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),S}(i);fr.Text=a;var s=function(T){t(S,T);function S(){var P=T!==null&&T.apply(this,arguments)||this;return P.type=r.ElementType.Comment,P}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),S}(i);fr.Comment=s;var o=function(T){t(S,T);function S(P,j){var F=T.call(this,j)||this;return F.name=P,F.type=r.ElementType.Directive,F}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),S}(i);fr.ProcessingInstruction=o;var c=function(T){t(S,T);function S(P){var j=T.call(this)||this;return j.children=P,j}return Object.defineProperty(S.prototype,"firstChild",{get:function(){var P;return(P=this.children[0])!==null&&P!==void 0?P:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"childNodes",{get:function(){return this.children},set:function(P){this.children=P},enumerable:!1,configurable:!0}),S}(n);fr.NodeWithChildren=c;var u=function(T){t(S,T);function S(){var P=T!==null&&T.apply(this,arguments)||this;return P.type=r.ElementType.CDATA,P}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),S}(c);fr.CDATA=u;var l=function(T){t(S,T);function S(){var P=T!==null&&T.apply(this,arguments)||this;return P.type=r.ElementType.Root,P}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),S}(c);fr.Document=l;var d=function(T){t(S,T);function S(P,j,F,N){F===void 0&&(F=[]),N===void 0&&(N=P==="script"?r.ElementType.Script:P==="style"?r.ElementType.Style:r.ElementType.Tag);var R=T.call(this,F)||this;return R.name=P,R.attribs=j,R.type=N,R}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"tagName",{get:function(){return this.name},set:function(P){this.name=P},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"attributes",{get:function(){var P=this;return Object.keys(this.attribs).map(function(j){var F,N;return{name:j,value:P.attribs[j],namespace:(F=P["x-attribsNamespace"])===null||F===void 0?void 0:F[j],prefix:(N=P["x-attribsPrefix"])===null||N===void 0?void 0:N[j]}})},enumerable:!1,configurable:!0}),S}(c);fr.Element=d;function f(T){return(0,r.isTag)(T)}fr.isTag=f;function h(T){return T.type===r.ElementType.CDATA}fr.isCDATA=h;function p(T){return T.type===r.ElementType.Text}fr.isText=p;function _(T){return T.type===r.ElementType.Comment}fr.isComment=_;function g(T){return T.type===r.ElementType.Directive}fr.isDirective=g;function m(T){return T.type===r.ElementType.Root}fr.isDocument=m;function y(T){return Object.prototype.hasOwnProperty.call(T,"children")}fr.hasChildren=y;function v(T,S){S===void 0&&(S=!1);var P;if(p(T))P=new a(T.data);else if(_(T))P=new s(T.data);else if(f(T)){var j=S?A(T.children):[],F=new d(T.name,e({},T.attribs),j);j.forEach(function(M){return M.parent=F}),T.namespace!=null&&(F.namespace=T.namespace),T["x-attribsNamespace"]&&(F["x-attribsNamespace"]=e({},T["x-attribsNamespace"])),T["x-attribsPrefix"]&&(F["x-attribsPrefix"]=e({},T["x-attribsPrefix"])),P=F}else if(h(T)){var j=S?A(T.children):[],N=new u(j);j.forEach(function(U){return U.parent=N}),P=N}else if(m(T)){var j=S?A(T.children):[],R=new l(j);j.forEach(function(U){return U.parent=R}),T["x-mode"]&&(R["x-mode"]=T["x-mode"]),P=R}else if(g(T)){var C=new o(T.name,T.data);T["x-name"]!=null&&(C["x-name"]=T["x-name"],C["x-publicId"]=T["x-publicId"],C["x-systemId"]=T["x-systemId"]),P=C}else throw new Error("Not implemented yet: ".concat(T.type));return P.startIndex=T.startIndex,P.endIndex=T.endIndex,T.sourceCodeLocation!=null&&(P.sourceCodeLocation=T.sourceCodeLocation),P}fr.cloneNode=v;function A(T){for(var S=T.map(function(j){return v(j,!0)}),P=1;P<S.length;P++)S[P].prev=S[P-1],S[P-1].next=S[P];return S}return fr}var zoe;function hs(){return zoe||(zoe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(o,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(o,l,d)}:function(o,c,u,l){l===void 0&&(l=u),o[l]=c[u]}),r=E&&E.__exportStar||function(o,c){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&e(c,o,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var n=Mf(),i=koe();r(koe(),t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function o(c,u,l){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(l=u,u=a),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??a,this.elementCB=l??null}return o.prototype.onparserinit=function(c){this.parser=c},o.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(c){this.handleCallback(c)},o.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},o.prototype.onopentag=function(c,u){var l=this.options.xmlMode?n.ElementType.Tag:void 0,d=new i.Element(c,u,void 0,l);this.addNode(d),this.tagStack.push(d)},o.prototype.ontext=function(c){var u=this.lastNode;if(u&&u.type===n.ElementType.Text)u.data+=c,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var l=new i.Text(c);this.addNode(l),this.lastNode=l}},o.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var u=new i.Comment(c);this.addNode(u),this.lastNode=u},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var c=new i.Text(""),u=new i.CDATA([c]);this.addNode(u),c.parent=u,this.lastNode=c},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(c,u){var l=new i.ProcessingInstruction(c,u);this.addNode(l)},o.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},o.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],l=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),l&&(c.prev=l,l.next=c),c.parent=u,this.lastNode=null},o}();t.DomHandler=s,t.default=s}(r8)),r8}var i8={},vc={},wh={},a8={},s8={},$R={},Qoe;function Rot(){return Qoe||(Qoe=1,Object.defineProperty($R,"__esModule",{value:!0}),$R.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(t){return t.charCodeAt(0)}))),$R}var ZR={},Woe;function Pot(){return Woe||(Woe=1,Object.defineProperty(ZR,"__esModule",{value:!0}),ZR.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(t){return t.charCodeAt(0)}))),ZR}var o8={},Koe;function Xoe(){return Koe||(Koe=1,function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(a){var s="";return a>65535&&(a-=65536,s+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),s+=String.fromCharCode(a),s};function n(a){var s;return a>=55296&&a<=57343||a>1114111?65533:(s=r.get(a))!==null&&s!==void 0?s:a}t.replaceCodePoint=n;function i(a){return(0,t.fromCodePoint)(n(a))}t.default=i}(o8)),o8}var Joe;function Yoe(){return Joe||(Joe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(R,C,M,U){U===void 0&&(U=M);var B=Object.getOwnPropertyDescriptor(C,M);(!B||("get"in B?!C.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return C[M]}}),Object.defineProperty(R,U,B)}:function(R,C,M,U){U===void 0&&(U=M),R[U]=C[M]}),r=E&&E.__setModuleDefault||(Object.create?function(R,C){Object.defineProperty(R,"default",{enumerable:!0,value:C})}:function(R,C){R.default=C}),n=E&&E.__importStar||function(R){if(R&&R.__esModule)return R;var C={};if(R!=null)for(var M in R)M!=="default"&&Object.prototype.hasOwnProperty.call(R,M)&&e(C,R,M);return r(C,R),C},i=E&&E.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=i(Rot());t.htmlDecodeTree=a.default;var s=i(Pot());t.xmlDecodeTree=s.default;var o=n(Xoe());t.decodeCodePoint=o.default;var c=Xoe();Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var u;(function(R){R[R.NUM=35]="NUM",R[R.SEMI=59]="SEMI",R[R.EQUALS=61]="EQUALS",R[R.ZERO=48]="ZERO",R[R.NINE=57]="NINE",R[R.LOWER_A=97]="LOWER_A",R[R.LOWER_F=102]="LOWER_F",R[R.LOWER_X=120]="LOWER_X",R[R.LOWER_Z=122]="LOWER_Z",R[R.UPPER_A=65]="UPPER_A",R[R.UPPER_F=70]="UPPER_F",R[R.UPPER_Z=90]="UPPER_Z"})(u||(u={}));var l=32,d;(function(R){R[R.VALUE_LENGTH=49152]="VALUE_LENGTH",R[R.BRANCH_LENGTH=16256]="BRANCH_LENGTH",R[R.JUMP_TABLE=127]="JUMP_TABLE"})(d=t.BinTrieFlags||(t.BinTrieFlags={}));function f(R){return R>=u.ZERO&&R<=u.NINE}function h(R){return R>=u.UPPER_A&&R<=u.UPPER_F||R>=u.LOWER_A&&R<=u.LOWER_F}function p(R){return R>=u.UPPER_A&&R<=u.UPPER_Z||R>=u.LOWER_A&&R<=u.LOWER_Z||f(R)}function _(R){return R===u.EQUALS||p(R)}var g;(function(R){R[R.EntityStart=0]="EntityStart",R[R.NumericStart=1]="NumericStart",R[R.NumericDecimal=2]="NumericDecimal",R[R.NumericHex=3]="NumericHex",R[R.NamedEntity=4]="NamedEntity"})(g||(g={}));var m;(function(R){R[R.Legacy=0]="Legacy",R[R.Strict=1]="Strict",R[R.Attribute=2]="Attribute"})(m=t.DecodingMode||(t.DecodingMode={}));var y=function(){function R(C,M,U){this.decodeTree=C,this.emitCodePoint=M,this.errors=U,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return R.prototype.startEntity=function(C){this.decodeMode=C,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},R.prototype.write=function(C,M){switch(this.state){case g.EntityStart:return C.charCodeAt(M)===u.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(C,M+1)):(this.state=g.NamedEntity,this.stateNamedEntity(C,M));case g.NumericStart:return this.stateNumericStart(C,M);case g.NumericDecimal:return this.stateNumericDecimal(C,M);case g.NumericHex:return this.stateNumericHex(C,M);case g.NamedEntity:return this.stateNamedEntity(C,M)}},R.prototype.stateNumericStart=function(C,M){return M>=C.length?-1:(C.charCodeAt(M)|l)===u.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(C,M+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(C,M))},R.prototype.addToNumericResult=function(C,M,U,B){if(M!==U){var G=U-M;this.result=this.result*Math.pow(B,G)+parseInt(C.substr(M,G),B),this.consumed+=G}},R.prototype.stateNumericHex=function(C,M){for(var U=M;M<C.length;){var B=C.charCodeAt(M);if(f(B)||h(B))M+=1;else return this.addToNumericResult(C,U,M,16),this.emitNumericEntity(B,3)}return this.addToNumericResult(C,U,M,16),-1},R.prototype.stateNumericDecimal=function(C,M){for(var U=M;M<C.length;){var B=C.charCodeAt(M);if(f(B))M+=1;else return this.addToNumericResult(C,U,M,10),this.emitNumericEntity(B,2)}return this.addToNumericResult(C,U,M,10),-1},R.prototype.emitNumericEntity=function(C,M){var U;if(this.consumed<=M)return(U=this.errors)===null||U===void 0||U.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(C===u.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(C!==u.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},R.prototype.stateNamedEntity=function(C,M){for(var U=this.decodeTree,B=U[this.treeIndex],G=(B&d.VALUE_LENGTH)>>14;M<C.length;M++,this.excess++){var K=C.charCodeAt(M);if(this.treeIndex=A(U,B,this.treeIndex+Math.max(1,G),K),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(G===0||_(K))?0:this.emitNotTerminatedNamedEntity();if(B=U[this.treeIndex],G=(B&d.VALUE_LENGTH)>>14,G!==0){if(K===u.SEMI)return this.emitNamedEntityData(this.treeIndex,G,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},R.prototype.emitNotTerminatedNamedEntity=function(){var C,M=this,U=M.result,B=M.decodeTree,G=(B[U]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(U,G,this.consumed),(C=this.errors)===null||C===void 0||C.missingSemicolonAfterCharacterReference(),this.consumed},R.prototype.emitNamedEntityData=function(C,M,U){var B=this.decodeTree;return this.emitCodePoint(M===1?B[C]&~d.VALUE_LENGTH:B[C+1],U),M===3&&this.emitCodePoint(B[C+2],U),U},R.prototype.end=function(){var C;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(C=this.errors)===null||C===void 0||C.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},R}();t.EntityDecoder=y;function v(R){var C="",M=new y(R,function(U){return C+=(0,o.fromCodePoint)(U)});return function(B,G){for(var K=0,$=0;($=B.indexOf("&",$))>=0;){C+=B.slice(K,$),M.startEntity(G);var se=M.write(B,$+1);if(se<0){K=$+M.end();break}K=$+se,$=se===0?K+1:K}var pe=C+B.slice(K);return C="",pe}}function A(R,C,M,U){var B=(C&d.BRANCH_LENGTH)>>7,G=C&d.JUMP_TABLE;if(B===0)return G!==0&&U===G?M:-1;if(G){var K=U-G;return K<0||K>=B?-1:R[M+K]-1}for(var $=M,se=$+B-1;$<=se;){var pe=$+se>>>1,we=R[pe];if(we<U)$=pe+1;else if(we>U)se=pe-1;else return R[pe+B]}return-1}t.determineBranch=A;var T=v(a.default),S=v(s.default);function P(R,C){return C===void 0&&(C=m.Legacy),T(R,C)}t.decodeHTML=P;function j(R){return T(R,m.Attribute)}t.decodeHTMLAttribute=j;function F(R){return T(R,m.Strict)}t.decodeHTMLStrict=F;function N(R){return S(R,m.Strict)}t.decodeXML=N}(s8)),s8}var pd={},eP={},$oe;function Not(){if($oe)return eP;$oe=1,Object.defineProperty(eP,"__esModule",{value:!0});function t(e){for(var r=1;r<e.length;r++)e[r][0]+=e[r-1][0]+1;return e}return eP.default=new Map(t([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(t([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(t([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(t([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),eP}var u8={},Zoe;function xG(){return Zoe||(Zoe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);t.getCodePoint=String.prototype.codePointAt!=null?function(i,a){return i.codePointAt(a)}:function(i,a){return(i.charCodeAt(a)&64512)===55296?(i.charCodeAt(a)-55296)*1024+i.charCodeAt(a+1)-56320+65536:i.charCodeAt(a)};function r(i){for(var a="",s=0,o;(o=t.xmlReplacer.exec(i))!==null;){var c=o.index,u=i.charCodeAt(c),l=e.get(u);l!==void 0?(a+=i.substring(s,c)+l,s=c+1):(a+="".concat(i.substring(s,c),"&#x").concat((0,t.getCodePoint)(i,c).toString(16),";"),s=t.xmlReplacer.lastIndex+=+((u&64512)===55296))}return a+i.substr(s)}t.encodeXML=r,t.escape=r;function n(i,a){return function(o){for(var c,u=0,l="";c=i.exec(o);)u!==c.index&&(l+=o.substring(u,c.index)),l+=a.get(c[0].charCodeAt(0)),u=c.index+1;return l+o.substring(u)}}t.escapeUTF8=n(/[&<>'"]/g,e),t.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(u8)),u8}var eue;function tue(){if(eue)return pd;eue=1;var t=E&&E.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(pd,"__esModule",{value:!0}),pd.encodeNonAsciiHTML=pd.encodeHTML=void 0;var e=t(Not()),r=xG(),n=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function i(o){return s(n,o)}pd.encodeHTML=i;function a(o){return s(r.xmlReplacer,o)}pd.encodeNonAsciiHTML=a;function s(o,c){for(var u="",l=0,d;(d=o.exec(c))!==null;){var f=d.index;u+=c.substring(l,f);var h=c.charCodeAt(f),p=e.default.get(h);if(typeof p=="object"){if(f+1<c.length){var _=c.charCodeAt(f+1),g=typeof p.n=="number"?p.n===_?p.o:void 0:p.n.get(_);if(g!==void 0){u+=g,l=o.lastIndex+=1;continue}}p=p.v}if(p!==void 0)u+=p,l=f+1;else{var m=(0,r.getCodePoint)(c,f);u+="&#x".concat(m.toString(16),";"),l=o.lastIndex+=+(m!==h)}}return u+c.substr(l)}return pd}var rue;function Fot(){return rue||(rue=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var e=Yoe(),r=tue(),n=xG(),i;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(i=t.EntityLevel||(t.EntityLevel={}));var a;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(a=t.EncodingMode||(t.EncodingMode={}));function s(f,h){h===void 0&&(h=i.XML);var p=typeof h=="number"?h:h.level;if(p===i.HTML){var _=typeof h=="object"?h.mode:void 0;return(0,e.decodeHTML)(f,_)}return(0,e.decodeXML)(f)}t.decode=s;function o(f,h){var p;h===void 0&&(h=i.XML);var _=typeof h=="number"?{level:h}:h;return(p=_.mode)!==null&&p!==void 0||(_.mode=e.DecodingMode.Strict),s(f,_)}t.decodeStrict=o;function c(f,h){h===void 0&&(h=i.XML);var p=typeof h=="number"?{level:h}:h;return p.mode===a.UTF8?(0,n.escapeUTF8)(f):p.mode===a.Attribute?(0,n.escapeAttribute)(f):p.mode===a.Text?(0,n.escapeText)(f):p.level===i.HTML?p.mode===a.ASCII?(0,r.encodeNonAsciiHTML)(f):(0,r.encodeHTML)(f):(0,n.encodeXML)(f)}t.encode=c;var u=xG();Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return u.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return u.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return u.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return u.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return u.escapeText}});var l=tue();Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return l.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return l.encodeHTML}});var d=Yoe();Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})}(a8)),a8}var _d={},nue;function Mot(){return nue||(nue=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.attributeNames=_d.elementNames=void 0,_d.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(t){return[t.toLowerCase(),t]})),_d.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(t){return[t.toLowerCase(),t]}))),_d}var iue;function Dot(){if(iue)return wh;iue=1;var t=E&&E.__assign||function(){return t=Object.assign||function(A){for(var T,S=1,P=arguments.length;S<P;S++){T=arguments[S];for(var j in T)Object.prototype.hasOwnProperty.call(T,j)&&(A[j]=T[j])}return A},t.apply(this,arguments)},e=E&&E.__createBinding||(Object.create?function(A,T,S,P){P===void 0&&(P=S);var j=Object.getOwnPropertyDescriptor(T,S);(!j||("get"in j?!T.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return T[S]}}),Object.defineProperty(A,P,j)}:function(A,T,S,P){P===void 0&&(P=S),A[P]=T[S]}),r=E&&E.__setModuleDefault||(Object.create?function(A,T){Object.defineProperty(A,"default",{enumerable:!0,value:T})}:function(A,T){A.default=T}),n=E&&E.__importStar||function(A){if(A&&A.__esModule)return A;var T={};if(A!=null)for(var S in A)S!=="default"&&Object.prototype.hasOwnProperty.call(A,S)&&e(T,A,S);return r(T,A),T};Object.defineProperty(wh,"__esModule",{value:!0}),wh.render=void 0;var i=n(Mf()),a=Fot(),s=Mot(),o=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function c(A){return A.replace(/"/g,"&quot;")}function u(A,T){var S;if(A){var P=((S=T.encodeEntities)!==null&&S!==void 0?S:T.decodeEntities)===!1?c:T.xmlMode||T.encodeEntities!=="utf8"?a.encodeXML:a.escapeAttribute;return Object.keys(A).map(function(j){var F,N,R=(F=A[j])!==null&&F!==void 0?F:"";return T.xmlMode==="foreign"&&(j=(N=s.attributeNames.get(j))!==null&&N!==void 0?N:j),!T.emptyAttrs&&!T.xmlMode&&R===""?j:"".concat(j,'="').concat(P(R),'"')}).join(" ")}}var l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function d(A,T){T===void 0&&(T={});for(var S=("length"in A)?A:[A],P="",j=0;j<S.length;j++)P+=f(S[j],T);return P}wh.render=d,wh.default=d;function f(A,T){switch(A.type){case i.Root:return d(A.children,T);case i.Doctype:case i.Directive:return g(A);case i.Comment:return v(A);case i.CDATA:return y(A);case i.Script:case i.Style:case i.Tag:return _(A,T);case i.Text:return m(A,T)}}var h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),p=new Set(["svg","math"]);function _(A,T){var S;T.xmlMode==="foreign"&&(A.name=(S=s.elementNames.get(A.name))!==null&&S!==void 0?S:A.name,A.parent&&h.has(A.parent.name)&&(T=t(t({},T),{xmlMode:!1}))),!T.xmlMode&&p.has(A.name)&&(T=t(t({},T),{xmlMode:"foreign"}));var P="<".concat(A.name),j=u(A.attribs,T);return j&&(P+=" ".concat(j)),A.children.length===0&&(T.xmlMode?T.selfClosingTags!==!1:T.selfClosingTags&&l.has(A.name))?(T.xmlMode||(P+=" "),P+="/>"):(P+=">",A.children.length>0&&(P+=d(A.children,T)),(T.xmlMode||!l.has(A.name))&&(P+="</".concat(A.name,">"))),P}function g(A){return"<".concat(A.data,">")}function m(A,T){var S,P=A.data||"";return((S=T.encodeEntities)!==null&&S!==void 0?S:T.decodeEntities)!==!1&&!(!T.xmlMode&&A.parent&&o.has(A.parent.name))&&(P=T.xmlMode||T.encodeEntities!=="utf8"?(0,a.encodeXML)(P):(0,a.escapeText)(P)),P}function y(A){return"<![CDATA[".concat(A.children[0].data,"]]>")}function v(A){return"<!--".concat(A.data,"-->")}return wh}var aue;function x2e(){if(aue)return vc;aue=1;var t=E&&E.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(vc,"__esModule",{value:!0}),vc.getOuterHTML=i,vc.getInnerHTML=a,vc.getText=s,vc.textContent=o,vc.innerText=c;var e=hs(),r=t(Dot()),n=Mf();function i(u,l){return(0,r.default)(u,l)}function a(u,l){return(0,e.hasChildren)(u)?u.children.map(function(d){return i(d,l)}).join(""):""}function s(u){return Array.isArray(u)?u.map(s).join(""):(0,e.isTag)(u)?u.name==="br"?`
`:s(u.children):(0,e.isCDATA)(u)?s(u.children):(0,e.isText)(u)?u.data:""}function o(u){return Array.isArray(u)?u.map(o).join(""):(0,e.hasChildren)(u)&&!(0,e.isComment)(u)?o(u.children):(0,e.isText)(u)?u.data:""}function c(u){return Array.isArray(u)?u.map(c).join(""):(0,e.hasChildren)(u)&&(u.type===n.ElementType.Tag||(0,e.isCDATA)(u))?c(u.children):(0,e.isText)(u)?u.data:""}return vc}var Cs={},sue;function Cot(){if(sue)return Cs;sue=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.getChildren=e,Cs.getParent=r,Cs.getSiblings=n,Cs.getAttributeValue=i,Cs.hasAttrib=a,Cs.getName=s,Cs.nextElementSibling=o,Cs.prevElementSibling=c;var t=hs();function e(u){return(0,t.hasChildren)(u)?u.children:[]}function r(u){return u.parent||null}function n(u){var l,d,f=r(u);if(f!=null)return e(f);for(var h=[u],p=u.prev,_=u.next;p!=null;)h.unshift(p),l=p,p=l.prev;for(;_!=null;)h.push(_),d=_,_=d.next;return h}function i(u,l){var d;return(d=u.attribs)===null||d===void 0?void 0:d[l]}function a(u,l){return u.attribs!=null&&Object.prototype.hasOwnProperty.call(u.attribs,l)&&u.attribs[l]!=null}function s(u){return u.name}function o(u){for(var l,d=u.next;d!==null&&!(0,t.isTag)(d);)l=d,d=l.next;return d}function c(u){for(var l,d=u.prev;d!==null&&!(0,t.isTag)(d);)l=d,d=l.prev;return d}return Cs}var pu={},oue;function Lot(){if(oue)return pu;oue=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.removeElement=t,pu.replaceElement=e,pu.appendChild=r,pu.append=n,pu.prependChild=i,pu.prepend=a;function t(s){if(s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.parent){var o=s.parent.children,c=o.lastIndexOf(s);c>=0&&o.splice(c,1)}s.next=null,s.prev=null,s.parent=null}function e(s,o){var c=o.prev=s.prev;c&&(c.next=o);var u=o.next=s.next;u&&(u.prev=o);var l=o.parent=s.parent;if(l){var d=l.children;d[d.lastIndexOf(s)]=o,s.parent=null}}function r(s,o){if(t(o),o.next=null,o.parent=s,s.children.push(o)>1){var c=s.children[s.children.length-2];c.next=o,o.prev=c}else o.prev=null}function n(s,o){t(o);var c=s.parent,u=s.next;if(o.next=u,o.prev=s,s.next=o,o.parent=c,u){if(u.prev=o,c){var l=c.children;l.splice(l.lastIndexOf(u),0,o)}}else c&&c.children.push(o)}function i(s,o){if(t(o),o.parent=s,o.prev=null,s.children.unshift(o)!==1){var c=s.children[1];c.prev=o,o.next=c}else o.next=null}function a(s,o){t(o);var c=s.parent;if(c){var u=c.children;u.splice(u.indexOf(s),0,o)}s.prev&&(s.prev.next=o),o.parent=c,o.prev=s.prev,o.next=s,s.prev=o}return pu}var _u={},uue;function E2e(){if(uue)return _u;uue=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.filter=e,_u.find=r,_u.findOneChild=n,_u.findOne=i,_u.existsOne=a,_u.findAll=s;var t=hs();function e(o,c,u,l){return u===void 0&&(u=!0),l===void 0&&(l=1/0),r(o,Array.isArray(c)?c:[c],u,l)}function r(o,c,u,l){for(var d=[],f=[Array.isArray(c)?c:[c]],h=[0];;){if(h[0]>=f[0].length){if(h.length===1)return d;f.shift(),h.shift();continue}var p=f[0][h[0]++];if(o(p)&&(d.push(p),--l<=0))return d;u&&(0,t.hasChildren)(p)&&p.children.length>0&&(h.unshift(0),f.unshift(p.children))}}function n(o,c){return c.find(o)}function i(o,c,u){u===void 0&&(u=!0);for(var l=Array.isArray(c)?c:[c],d=0;d<l.length;d++){var f=l[d];if((0,t.isTag)(f)&&o(f))return f;if(u&&(0,t.hasChildren)(f)&&f.children.length>0){var h=i(o,f.children,!0);if(h)return h}}return null}function a(o,c){return(Array.isArray(c)?c:[c]).some(function(u){return(0,t.isTag)(u)&&o(u)||(0,t.hasChildren)(u)&&a(o,u.children)})}function s(o,c){for(var u=[],l=[Array.isArray(c)?c:[c]],d=[0];;){if(d[0]>=l[0].length){if(l.length===1)return u;l.shift(),d.shift();continue}var f=l[0][d[0]++];(0,t.isTag)(f)&&o(f)&&u.push(f),(0,t.hasChildren)(f)&&f.children.length>0&&(d.unshift(0),l.unshift(f.children))}}return _u}var mu={},cue;function I2e(){if(cue)return mu;cue=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.testElement=s,mu.getElements=o,mu.getElementById=c,mu.getElementsByTagName=u,mu.getElementsByClassName=l,mu.getElementsByTagType=d;var t=hs(),e=E2e(),r={tag_name:function(f){return typeof f=="function"?function(h){return(0,t.isTag)(h)&&f(h.name)}:f==="*"?t.isTag:function(h){return(0,t.isTag)(h)&&h.name===f}},tag_type:function(f){return typeof f=="function"?function(h){return f(h.type)}:function(h){return h.type===f}},tag_contains:function(f){return typeof f=="function"?function(h){return(0,t.isText)(h)&&f(h.data)}:function(h){return(0,t.isText)(h)&&h.data===f}}};function n(f,h){return typeof h=="function"?function(p){return(0,t.isTag)(p)&&h(p.attribs[f])}:function(p){return(0,t.isTag)(p)&&p.attribs[f]===h}}function i(f,h){return function(p){return f(p)||h(p)}}function a(f){var h=Object.keys(f).map(function(p){var _=f[p];return Object.prototype.hasOwnProperty.call(r,p)?r[p](_):n(p,_)});return h.length===0?null:h.reduce(i)}function s(f,h){var p=a(f);return p?p(h):!0}function o(f,h,p,_){_===void 0&&(_=1/0);var g=a(f);return g?(0,e.filter)(g,h,p,_):[]}function c(f,h,p){return p===void 0&&(p=!0),Array.isArray(h)||(h=[h]),(0,e.findOne)(n("id",f),h,p)}function u(f,h,p,_){return p===void 0&&(p=!0),_===void 0&&(_=1/0),(0,e.filter)(r.tag_name(f),h,p,_)}function l(f,h,p,_){return p===void 0&&(p=!0),_===void 0&&(_=1/0),(0,e.filter)(n("class",f),h,p,_)}function d(f,h,p,_){return p===void 0&&(p=!0),_===void 0&&(_=1/0),(0,e.filter)(r.tag_type(f),h,p,_)}return mu}var Ac={},lue;function jot(){if(lue)return Ac;lue=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.DocumentPosition=void 0,Ac.removeSubsets=e,Ac.compareDocumentPosition=n,Ac.uniqueSort=i;var t=hs();function e(a){for(var s=a.length;--s>=0;){var o=a[s];if(s>0&&a.lastIndexOf(o,s-1)>=0){a.splice(s,1);continue}for(var c=o.parent;c;c=c.parent)if(a.includes(c)){a.splice(s,1);break}}return a}var r;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(r||(Ac.DocumentPosition=r={}));function n(a,s){var o=[],c=[];if(a===s)return 0;for(var u=(0,t.hasChildren)(a)?a:a.parent;u;)o.unshift(u),u=u.parent;for(u=(0,t.hasChildren)(s)?s:s.parent;u;)c.unshift(u),u=u.parent;for(var l=Math.min(o.length,c.length),d=0;d<l&&o[d]===c[d];)d++;if(d===0)return r.DISCONNECTED;var f=o[d-1],h=f.children,p=o[d],_=c[d];return h.indexOf(p)>h.indexOf(_)?f===s?r.FOLLOWING|r.CONTAINED_BY:r.FOLLOWING:f===a?r.PRECEDING|r.CONTAINS:r.PRECEDING}function i(a){return a=a.filter(function(s,o,c){return!c.includes(s,o+1)}),a.sort(function(s,o){var c=n(s,o);return c&r.PRECEDING?-1:c&r.FOLLOWING?1:0}),a}return Ac}var tP={},due;function Bot(){if(due)return tP;due=1,Object.defineProperty(tP,"__esModule",{value:!0}),tP.getFeed=r;var t=x2e(),e=I2e();function r(f){var h=c(d,f);return h?h.name==="feed"?n(h):i(h):null}function n(f){var h,p=f.children,_={type:"atom",items:(0,e.getElementsByTagName)("entry",p).map(function(y){var v,A=y.children,T={media:o(A)};l(T,"id","id",A),l(T,"title","title",A);var S=(v=c("link",A))===null||v===void 0?void 0:v.attribs.href;S&&(T.link=S);var P=u("summary",A)||u("content",A);P&&(T.description=P);var j=u("updated",A);return j&&(T.pubDate=new Date(j)),T})};l(_,"id","id",p),l(_,"title","title",p);var g=(h=c("link",p))===null||h===void 0?void 0:h.attribs.href;g&&(_.link=g),l(_,"description","subtitle",p);var m=u("updated",p);return m&&(_.updated=new Date(m)),l(_,"author","email",p,!0),_}function i(f){var h,p,_=(p=(h=c("channel",f.children))===null||h===void 0?void 0:h.children)!==null&&p!==void 0?p:[],g={type:f.name.substr(0,3),id:"",items:(0,e.getElementsByTagName)("item",f.children).map(function(y){var v=y.children,A={media:o(v)};l(A,"id","guid",v),l(A,"title","title",v),l(A,"link","link",v),l(A,"description","description",v);var T=u("pubDate",v)||u("dc:date",v);return T&&(A.pubDate=new Date(T)),A})};l(g,"title","title",_),l(g,"link","link",_),l(g,"description","description",_);var m=u("lastBuildDate",_);return m&&(g.updated=new Date(m)),l(g,"author","managingEditor",_,!0),g}var a=["url","type","lang"],s=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function o(f){return(0,e.getElementsByTagName)("media:content",f).map(function(h){for(var p=h.attribs,_={medium:p.medium,isDefault:!!p.isDefault},g=0,m=a;g<m.length;g++){var y=m[g];p[y]&&(_[y]=p[y])}for(var v=0,A=s;v<A.length;v++){var y=A[v];p[y]&&(_[y]=parseInt(p[y],10))}return p.expression&&(_.expression=p.expression),_})}function c(f,h){return(0,e.getElementsByTagName)(f,h,!0,1)[0]}function u(f,h,p){return p===void 0&&(p=!1),(0,t.textContent)((0,e.getElementsByTagName)(f,h,p,1)).trim()}function l(f,h,p,_,g){g===void 0&&(g=!1);var m=u(p,_,g);m&&(f[h]=m)}function d(f){return f==="rss"||f==="feed"||f==="rdf:RDF"}return tP}var fue;function Du(){return fue||(fue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(i,a,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(a,s);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,o,c)}:function(i,a,s,o){o===void 0&&(o=s),i[o]=a[s]}),r=E&&E.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(x2e(),t),r(Cot(),t),r(Lot(),t),r(E2e(),t),r(I2e(),t),r(jot(),t),r(Bot(),t);var n=hs();Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})}(i8)),i8}var hue;function qot(){return hue||(hue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(y,v,A,T){T===void 0&&(T=A);var S=Object.getOwnPropertyDescriptor(v,A);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[A]}}),Object.defineProperty(y,T,S)}:function(y,v,A,T){T===void 0&&(T=A),y[T]=v[A]}),r=E&&E.__setModuleDefault||(Object.create?function(y,v){Object.defineProperty(y,"default",{enumerable:!0,value:v})}:function(y,v){y.default=v}),n=E&&E.__importStar||function(y){if(y&&y.__esModule)return y;var v={};if(y!=null)for(var A in y)A!=="default"&&Object.prototype.hasOwnProperty.call(y,A)&&e(v,y,A);return r(v,y),v},i=E&&E.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.QuoteType=t.Tokenizer=t.createDomStream=t.createDocumentStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var a=Voe(),s=Voe();Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return s.Parser}});var o=hs(),c=hs();Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function u(y,v){var A=new o.DomHandler(void 0,v);return new a.Parser(A,v).end(y),A.root}t.parseDocument=u;function l(y,v){return u(y,v).children}t.parseDOM=l;function d(y,v,A){var T=new o.DomHandler(function(S){return y(S,T.root)},v,A);return new a.Parser(T,v)}t.createDocumentStream=d;function f(y,v,A){var T=new o.DomHandler(y,v,A);return new a.Parser(T,v)}t.createDomStream=f;var h=S2e();Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),Object.defineProperty(t,"QuoteType",{enumerable:!0,get:function(){return h.QuoteType}}),t.ElementType=n(Mf());var p=Du(),_=Du();Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return _.getFeed}});var g={xmlMode:!0};function m(y,v){return v===void 0&&(v=g),(0,p.getFeed)(l(y,v))}t.parseFeed=m,t.DomUtils=n(Du())}(Z4)),Z4}const Uot={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},Vot={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}};var md={},pue;function eQ(){return pue||(pue=1,Object.defineProperty(md,"__esModule",{value:!0}),md.RDFA_CONTENTTYPES=md.RDFA_FEATURES=void 0,md.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},md.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"}),md}var By={},_ue;function O2e(){if(_ue)return By;_ue=1,Object.defineProperty(By,"__esModule",{value:!0}),By.Util=void 0;const t=Bn(),e=eQ(),r=jr();class n{constructor(a,s){this.dataFactory=a||new r.DataFactory,this.baseIRI=this.dataFactory.namedNode(s||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(a,s,o){const c={};if(o)for(const u in a)u.startsWith("xmlns")&&(c[u.substr(6)]=a[u]);if(a.prefix||Object.keys(c).length>0){const u=Object.assign(Object.assign({},s),c);if(a.prefix){let l;for(;l=n.PREFIX_REGEX.exec(a.prefix);)u[l[1]]=l[2]}return u}else return s}static expandPrefixedTerm(a,s){const o=a.indexOf(":");let c,u;if(o>=0&&(c=a.substr(0,o),u=a.substr(o+1)),c==="")return"http://www.w3.org/1999/xhtml/vocab#"+u;if(c){const l=s.prefixesAll[c];if(l)return l+u}if(a){const l=s.prefixesAll[a.toLocaleLowerCase()];if(l)return l}return a}static isValidIri(a){return n.IRI_REGEX.test(a)}static contentTypeToProfile(a){return e.RDFA_CONTENTTYPES[a]||""}getBaseIRI(a){let s=a;const o=s.indexOf("#");return o>=0&&(s=s.substr(0,o)),this.dataFactory.namedNode((0,t.resolve)(s,this.baseIRI.value))}getResourceOrBaseIri(a,s){return a===!0?this.getBaseIriTerm(s):a}getBaseIriTerm(a){return a.localBaseIRI||this.baseIRI}createVocabIris(a,s,o,c){return a.split(/\s+/).filter(u=>u&&(o||u.indexOf(":")>=0)).map(u=>this.createIri(u,s,!0,!0,c)).filter(u=>u!=null)}createLiteral(a,s){var o;if(s.interpretObjectAsTime&&!s.datatype){for(const c of n.TIME_REGEXES)if(a.match(c.regex)){s.datatype=this.dataFactory.namedNode(n.XSD+c.type);break}}return this.dataFactory.literal(a,s.datatype||((o=s.language)===null||o===void 0?void 0:o.toLowerCase()))}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(a,s,o,c,u){if(a=a||"",!c)return o||(a=(0,t.resolve)(a,this.getBaseIriTerm(s).value)),n.isValidIri(a)?this.dataFactory.namedNode(a):null;if(a.length>0&&a[0]==="["&&a[a.length-1]==="]"&&(a=a.substr(1,a.length-2),a.indexOf(":")<0))return null;if(a.startsWith("_:"))return u?this.dataFactory.blankNode(a.substr(2)||"b_identity"):null;if(o&&s.vocab&&a.indexOf(":")<0)return this.dataFactory.namedNode(s.vocab+a);let l=n.expandPrefixedTerm(a,s);return o?a!==l&&(l=(0,t.resolve)(l,this.baseIRIDocument.value)):l=(0,t.resolve)(l,this.getBaseIriTerm(s).value),n.isValidIri(l)?this.dataFactory.namedNode(l):null}}return By.Util=n,n.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n.XSD="http://www.w3.org/2001/XMLSchema#",n.RDFA="http://www.w3.org/ns/rdfa#",n.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,n.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],n.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/,By}var mue;function Got(){if(mue)return Ly;mue=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.RdfaParser=void 0;const t=qot(),e=Wt,r=Uot,n=Vot,i=eQ(),a=O2e();let s=class R2e extends e.Transform{constructor(c){super({readableObjectMode:!0}),this.activeTagStack=[],c=c||{},this.options=c,this.util=new a.Util(c.dataFactory,c.baseIRI),this.defaultGraph=c.defaultGraph||this.util.dataFactory.defaultGraph();const u=c.contentType?a.Util.contentTypeToProfile(c.contentType):c.profile||"";this.features=c.features||i.RDFA_FEATURES[u],this.htmlParseListener=c.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(u==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:c.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},n["@context"]),this.features.xhtmlInitialContext?r["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:c.vocab})}import(c){const u=new e.PassThrough({readableObjectMode:!0});c.on("error",d=>l.emit("error",d)),c.on("data",d=>u.push(d)),c.on("end",()=>u.push(null));const l=u.pipe(new R2e(this.options));return l}_transform(c,u,l){this.parser.write(c.toString()),l()}_flush(c){this.parser.end(),c()}onTagOpen(c,u){let l=this.activeTagStack.length-1;for(;l>0&&this.activeTagStack[l].skipElement;)l--;let d=this.activeTagStack[l];l!==this.activeTagStack.length-1&&(d=Object.assign(Object.assign({},d),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const f={collectChildTags:d.collectChildTags,collectChildTagsForCurrentTag:d.collectChildTagsForCurrentTag,incompleteTriples:[],inlist:"inlist"in u,listMapping:[],listMappingLocal:d.listMapping,localBaseIRI:d.localBaseIRI,name:c,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(f),f.collectChildTags){for(const T of Object.keys(d.prefixesCustom).sort()){const S=d.prefixesCustom[T],P=T===""?"xmlns":"xmlns:"+T;P in u||(u[P]=S)}const A=Object.keys(u).map(T=>`${T}="${u[T]}"`).join(" ");if(f.textWithTags=[`<${c}${A?" "+A:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let h=!0,p=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in u&&"rel"in u&&(h=!1,u.rel.indexOf(":")<0&&delete u.rel),"property"in u&&"rev"in u&&(p=!1,u.rev.indexOf(":")<0&&delete u.rev)),this.features.copyRdfaPatterns){if(d.collectedPatternTag){const A={attributes:u,children:[],name:c,referenced:!1,rootPattern:!1,text:[]};d.collectedPatternTag.children.push(A),f.collectedPatternTag=A;return}if(u.typeof==="rdfa:Pattern"){f.collectedPatternTag={attributes:u,children:[],name:c,parentTag:d,referenced:!1,rootPattern:!0,text:[]};return}if(u.property==="rdfa:copy"){const A=u.resource||u.href||u.src;this.rdfaPatterns[A]?this.emitPatternCopy(d,this.rdfaPatterns[A],A):(this.pendingRdfaPatternCopies[A]||(this.pendingRdfaPatternCopies[A]=[]),this.pendingRdfaPatternCopies[A].push(d));return}}this.features.baseTag&&c==="base"&&u.href&&(this.util.baseIRI=this.util.getBaseIRI(u.href)),this.features.xmlBase&&u["xml:base"]&&(f.localBaseIRI=this.util.getBaseIRI(u["xml:base"])),this.features.timeTag&&c==="time"&&!u.datatype&&(f.interpretObjectAsTime=!0);let _,g,m;if("vocab"in u?u.vocab?(f.vocab=u.vocab,this.emitTriple(this.util.getBaseIriTerm(f),this.util.dataFactory.namedNode(a.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(f.vocab))):f.vocab=this.activeTagStack[0].vocab:f.vocab=d.vocab,f.prefixesCustom=a.Util.parsePrefixes(u,d.prefixesCustom,this.features.xmlnsPrefixMappings),f.prefixesAll=Object.keys(f.prefixesCustom).length>0?Object.assign(Object.assign({},d.prefixesAll),f.prefixesCustom):d.prefixesAll,this.features.roleAttribute&&u.role){const A=u.id?this.util.createIri("#"+u.id,f,!1,!1,!1):this.util.createBlankNode(),T=f.vocab;f.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const S of this.util.createVocabIris(u.role,f,!0,!1))this.emitTriple(A,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),S);f.vocab=T}"xml:lang"in u||this.features.langAttribute&&"lang"in u?f.language=u["xml:lang"]||u.lang:f.language=d.language;const y=this.activeTagStack.length===2;if(!("rel"in u)&&!("rev"in u)?"property"in u&&!("content"in u)&&!("datatype"in u)?("about"in u?(_=this.util.createIri(u.about,f,!1,!0,!0),f.explicitNewSubject=!!_):y?_=!0:d.object&&(_=d.object),"typeof"in u&&("about"in u&&(m=this.util.createIri(u.about,f,!1,!0,!0)),!m&&y&&(m=!0),!m&&"resource"in u&&(m=this.util.createIri(u.resource,f,!1,!0,!0)),!m&&("href"in u||"src"in u)&&(m=this.util.createIri(u.href||u.src,f,!1,!1,!0)),!m&&this.isInheritSubjectInHeadBody(c)&&(m=_),m||(m=this.util.createBlankNode()),g=m)):(("about"in u||"resource"in u)&&(_=this.util.createIri(u.about||u.resource,f,!1,!0,!0),f.explicitNewSubject=!!_),!_&&("href"in u||"src"in u)&&(_=this.util.createIri(u.href||u.src,f,!1,!1,!0),f.explicitNewSubject=!!_),_||(y?_=!0:this.isInheritSubjectInHeadBody(c)?_=d.object:"typeof"in u?(_=this.util.createBlankNode(),f.explicitNewSubject=!0):d.object&&(_=d.object,"property"in u||(f.skipElement=!0))),"typeof"in u&&(m=_)):("about"in u?(_=this.util.createIri(u.about,f,!1,!0,!0),f.explicitNewSubject=!!_,"typeof"in u&&(m=_)):y?_=!0:d.object&&(_=d.object),"resource"in u&&(g=this.util.createIri(u.resource,f,!1,!0,!0)),g||("href"in u||"src"in u?g=this.util.createIri(u.href||u.src,f,!1,!1,!0):"typeof"in u&&!("about"in u)&&!this.isInheritSubjectInHeadBody(c)&&(g=this.util.createBlankNode())),"typeof"in u&&!("about"in u)&&(this.isInheritSubjectInHeadBody(c)?m=_:m=g)),m)for(const A of this.util.createVocabIris(u.typeof,f,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(m,f),this.util.dataFactory.namedNode(a.Util.RDF+"type"),A);if(_&&(f.listMapping={}),g){if("rel"in u&&"inlist"in u)for(const A of this.util.createVocabIris(u.rel,f,h,!1))this.addListMapping(f,_,A,g);if(!("rel"in u&&"inlist"in u)){if("rel"in u)for(const A of this.util.createVocabIris(u.rel,f,h,!1))this.emitTriple(this.util.getResourceOrBaseIri(_,f),A,this.util.getResourceOrBaseIri(g,f));if("rev"in u)for(const A of this.util.createVocabIris(u.rev,f,p,!1))this.emitTriple(this.util.getResourceOrBaseIri(g,f),A,this.util.getResourceOrBaseIri(_,f))}}if(!g){if("rel"in u)if("inlist"in u)for(const A of this.util.createVocabIris(u.rel,f,h,!1))this.addListMapping(f,_,A,null),f.incompleteTriples.push({predicate:A,reverse:!1,list:!0});else for(const A of this.util.createVocabIris(u.rel,f,h,!1))f.incompleteTriples.push({predicate:A,reverse:!1});if("rev"in u)for(const A of this.util.createVocabIris(u.rev,f,p,!1))f.incompleteTriples.push({predicate:A,reverse:!0});f.incompleteTriples.length>0&&(g=this.util.createBlankNode())}if("property"in u){f.predicates=this.util.createVocabIris(u.property,f,!0,!1);let A;if("datatype"in u?(f.datatype=this.util.createIri(u.datatype,f,!0,!0,!1),f.datatype&&(f.datatype.value===a.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&f.datatype.value===a.Util.RDF+"HTML")&&(f.collectChildTags=!0,f.collectChildTagsForCurrentTag=!0)):(!("rev"in u)&&!("rel"in u)&&!("content"in u)&&("resource"in u&&(A=this.util.createIri(u.resource,f,!1,!0,!0)),!A&&"href"in u&&(A=this.util.createIri(u.href,f,!1,!1,!0)),!A&&"src"in u&&(A=this.util.createIri(u.src,f,!1,!1,!0))),"typeof"in u&&!("about"in u)&&(A=m)),(!("datatype"in u)||u.datatype==="")&&(f.collectChildTagsForCurrentTag=!1),"content"in u){const T=this.util.createLiteral(u.content,f);if("inlist"in u)for(const S of f.predicates)this.addListMapping(f,_,S,T);else{const S=this.util.getResourceOrBaseIri(_,f);for(const P of f.predicates)this.emitTriple(S,P,T)}f.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in u){f.interpretObjectAsTime=!0;const T=this.util.createLiteral(u.datetime,f);if("inlist"in u)for(const S of f.predicates)this.addListMapping(f,_,S,T);else{const S=this.util.getResourceOrBaseIri(_,f);for(const P of f.predicates)this.emitTriple(S,P,T)}f.predicates=null}else if(A){const T=this.util.getResourceOrBaseIri(A,f);if("inlist"in u)for(const S of f.predicates)this.addListMapping(f,_,S,T);else{const S=this.util.getResourceOrBaseIri(_,f);for(const P of f.predicates)this.emitTriple(S,P,T)}f.predicates=null}}let v=!1;if(!f.skipElement&&_&&d.incompleteTriples.length>0){v=!0;const A=this.util.getResourceOrBaseIri(d.subject,f),T=this.util.getResourceOrBaseIri(_,f);for(const S of d.incompleteTriples)if(S.reverse)this.emitTriple(T,S.predicate,A);else if(S.list){let P=null;for(let j=this.activeTagStack.length-1;j>=0;j--)if(this.activeTagStack[j].inlist){P=this.activeTagStack[j];break}this.addListMapping(P,_,S.predicate,T)}else this.emitTriple(A,S.predicate,T)}!v&&d.incompleteTriples.length>0&&(f.incompleteTriples=f.incompleteTriples.concat(d.incompleteTriples)),f.subject=_||d.subject,f.object=g||_}onText(c){const u=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&u.collectedPatternTag){u.collectedPatternTag.text.push(c);return}u.textWithTags||(u.textWithTags=[]),u.textWithoutTags||(u.textWithoutTags=[]),u.textWithTags.push(c),u.textWithoutTags.push(c)}onTagClose(){const c=this.activeTagStack[this.activeTagStack.length-1],u=this.activeTagStack[this.activeTagStack.length-2];if(!(c.collectChildTags&&u.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&c.collectedPatternTag&&c.collectedPatternTag.rootPattern){const l=c.collectedPatternTag.attributes.resource;if(delete c.collectedPatternTag.attributes.resource,delete c.collectedPatternTag.attributes.typeof,this.rdfaPatterns[l]=c.collectedPatternTag,this.pendingRdfaPatternCopies[l]){for(const d of this.pendingRdfaPatternCopies[l])this.emitPatternCopy(d,c.collectedPatternTag,l);delete this.pendingRdfaPatternCopies[l]}this.activeTagStack.pop();return}if(c.predicates){const l=this.util.getResourceOrBaseIri(c.subject,c);let d;c.collectChildTagsForCurrentTag?(d=c.textWithTags||[],c.collectChildTags&&u.collectChildTags&&(d=d.slice(1))):d=c.textWithoutTags||[];const f=this.util.createLiteral(d.join(""),c);if(c.inlist)for(const h of c.predicates)this.addListMapping(c,l,h,f);else for(const h of c.predicates)this.emitTriple(l,h,f);u.predicates||(c.textWithoutTags=null,c.textWithTags=null)}if(c.object&&Object.keys(c.listMapping).length>0){const l=this.util.getResourceOrBaseIri(c.object,c);for(const d in c.listMapping){const f=this.util.dataFactory.namedNode(d),h=c.listMapping[d];if(h.length>0){const p=h.map(()=>this.util.createBlankNode());for(let _=0;_<h.length;_++){const g=this.util.getResourceOrBaseIri(h[_],c);this.emitTriple(p[_],this.util.dataFactory.namedNode(a.Util.RDF+"first"),g),this.emitTriple(p[_],this.util.dataFactory.namedNode(a.Util.RDF+"rest"),_<h.length-1?p[_+1]:this.util.dataFactory.namedNode(a.Util.RDF+"nil"))}this.emitTriple(l,f,p[0])}else this.emitTriple(l,f,this.util.dataFactory.namedNode(a.Util.RDF+"nil"))}}}this.activeTagStack.pop(),c.collectChildTags&&c.textWithTags&&c.textWithTags.push(`</${c.name}>`),c.textWithTags&&u&&(u.textWithTags?u.textWithTags=u.textWithTags.concat(c.textWithTags):u.textWithTags=c.textWithTags),c.textWithoutTags&&u&&(u.textWithoutTags?u.textWithoutTags=u.textWithoutTags.concat(c.textWithoutTags):u.textWithoutTags=c.textWithoutTags)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const c in this.rdfaPatterns){const u=this.rdfaPatterns[c];u.referenced||(u.attributes.typeof="rdfa:Pattern",u.attributes.resource=c,this.emitPatternCopy(u.parentTag,u,c),u.referenced=!1,delete u.attributes.typeof,delete u.attributes.resource)}for(const c in this.pendingRdfaPatternCopies)for(const u of this.pendingRdfaPatternCopies[c])this.activeTagStack.push(u),this.onTagOpen("link",{property:"rdfa:copy",href:c}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(c){return this.features.inheritSubjectInHeadBody&&(c==="head"||c==="body")}addListMapping(c,u,l,d){if(c.explicitNewSubject){const f=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(u,c),l,f),this.emitTriple(f,this.util.dataFactory.namedNode(a.Util.RDF+"first"),this.util.getResourceOrBaseIri(d,c)),this.emitTriple(f,this.util.dataFactory.namedNode(a.Util.RDF+"rest"),this.util.dataFactory.namedNode(a.Util.RDF+"nil"))}else{let f=c.listMappingLocal[l.value];f||(c.listMappingLocal[l.value]=f=[]),d&&f.push(d)}}emitTriple(c,u,l){c.termType==="NamedNode"&&c.value.indexOf(":")<0||u.termType==="NamedNode"&&u.value.indexOf(":")<0||l.termType==="NamedNode"&&l.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(c,u,l,this.defaultGraph))}emitPatternCopy(c,u,l){if(this.activeTagStack.push(c),u.referenced=!0,!u.constructedBlankNodes)u.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const d=this.util.dataFactory.blankNode();return u.constructedBlankNodes.push(d),d};else{let d=0;this.util.blankNodeFactory=()=>u.constructedBlankNodes[d++]}this.emitPatternCopyAbsolute(u,!0,l),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(c,u,l){if(!(!u&&c.attributes.property==="rdfa:copy"&&c.attributes.href===l)){this.onTagOpen(c.name,c.attributes);for(const d of c.text)this.onText(d);for(const d of c.children)this.emitPatternCopyAbsolute(d,!1,l);this.onTagClose()}}initializeParser(c){return new t.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(u){this.emit("error",u)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(u){this.emit("error",u)}},onopentag:(u,l)=>{try{this.onTagOpen(u,l),this.htmlParseListener&&this.htmlParseListener.onTagOpen(u,l)}catch(d){this.emit("error",d)}},ontext:u=>{try{this.onText(u),this.htmlParseListener&&this.htmlParseListener.onText(u)}catch(l){this.emit("error",l)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:c})}};return Ly.RdfaParser=s,Ly}var gue;function P2e(){return gue||(gue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Sot(),t),r(xot(),t),r(Eot(),t),r(Got(),t),r(eQ(),t),r(O2e(),t)}(X4)),X4}var yue;function Hot(){if(yue)return Cy;yue=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.ActorRdfParseXmlRdfa=void 0;const t=p0(),e=dt,r=P2e();let n=class extends t.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async runHandle(a,s,o){var d;const c=a.context.getSafe(e.KeysInitQuery.dataFactory),u=(a.headers&&a.headers.get("content-language"))??void 0;a.data.on("error",f=>l.emit("error",f));const l=a.data.pipe(new r.RdfaParser({dataFactory:c,baseIRI:(d=a.metadata)==null?void 0:d.baseIRI,profile:"xml",language:u}));return{data:l,metadata:{triples:!0}}}};return Cy.ActorRdfParseXmlRdfa=n,Cy}var bue;function kot(){return bue||(bue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hot(),t)}(K4)),K4}var c8={},qy={},rP={},Uy={},vue;function N2e(){if(vue)return Uy;vue=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.promisifyEventEmitter=void 0;function t(e,r){return new Promise((n,i)=>{e.on("end",()=>n(r)),e.on("error",i)})}return Uy.promisifyEventEmitter=t,Uy}var Aue;function m0(){if(Aue)return rP;Aue=1;var t=E&&E.__awaiter||function(n,i,a,s){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function l(h){try{f(s.next(h))}catch(p){u(p)}}function d(h){try{f(s.throw(h))}catch(p){u(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((s=s.apply(n,i||[])).next())})};Object.defineProperty(rP,"__esModule",{value:!0}),rP.stringify=r;const e=N2e();function r(n){return t(this,void 0,void 0,function*(){let i="";return n.on("data",a=>{i+=a}),yield(0,e.promisifyEventEmitter)(n),i})}return rP}var nP={},l8,Tue;function zot(){if(Tue)return l8;Tue=1;var t=function(){var e=function(_t,ut,Pt,Ot){for(Pt=Pt||{},Ot=_t.length;Ot--;Pt[_t[Ot]]=ut);return Pt},r=[7,12,13,14,15,16,20,25,115,130],n=[7,13,16,20,25,115,130],i=[7,13,16,115,130],a=[1,25],s=[1,29],o=[1,27],c=[1,28],u=[13,16,115,130],l=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],d=[28,56],f=[1,42],h=[46,48,53,56],p=[1,54],_=[1,60],g=[1,56],m=[1,57],y=[1,58],v=[1,63],A=[1,64],T=[1,65],S=[1,66],P=[1,67],j=[1,68],F=[1,75],N=[28,46,48,53,56],R=[28,42,46,48,53,56],C=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],M=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],U=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],B=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],G=[13,16,28,56,115,130],K=[13,16,38,58,87,96,109,115,126,130],$=[1,116],se=[1,112],pe=[1,108],we=[1,114],Ce=[1,111],Le=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],Ie=[48,53],Oe=[48,53,87,96,126],ye=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],Me=[1,126],W=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],ft=[1,129],le=[48,53,67,87,96,126],me=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],Z=[1,133],q=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],J=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],re=[1,151],_e=[1,153],he=[1,156],ue=[1,157],Ue=[1,158],De=[1,167],Je=[1,175],ze=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],ve=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],de=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],Ge={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function(ut,Pt,Ot,or,Qt,mt,wn){var gt=mt.length-1;switch(Qt){case 1:this.$=ne(rt.factory.namedNode(We("")),rt.factory.namedNode(ae),rt.factory.namedNode(ie+"Ontology"));break;case 5:rt.base=rt.factory.namedNode(mt[gt].slice(1,-1)),rt.n3Parser._setBase(We(rt.base.value));break;case 6:this.$=ne(rt.base,rt.factory.namedNode(ie+"imports"),rt.factory.namedNode(mt[gt].slice(1,-1)));break;case 7:this.$=rt.prefixes[mt[gt-1].substr(0,mt[gt-1].length-1)]=We(mt[gt]);break;case 8:rt.nodeShapeStack=!1,ne(rt.currentNodeShape=mt[gt],rt.factory.namedNode(ae),rt.factory.namedNode(ee+"NodeShape"));break;case 10:this.$=ne(rt.currentNodeShape,rt.factory.namedNode(ae),rt.factory.namedNode(Re+"Class"));break;case 11:this.$=ht();break;case 13:this.$=mt[gt].forEach(tt=>ne(rt.currentNodeShape,mt[gt-1],tt));break;case 14:this.$=[mt[gt-1],...mt[gt]];break;case 18:this.$=Te(mt[gt-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=mt[gt];break;case 20:rt.tempCurrentNodeShape=rt.currentNodeShape,this.$=rt.currentNodeShape=He();break;case 21:rt.currentNodeShape=rt.tempCurrentNodeShape;break;case 22:case 31:this.$=mt[gt-2];break;case 23:rt.tempCurrentNodeShape=rt.currentNodeShape,rt.currentNodeShape=rt.currentPropertyNode;break;case 24:rt.currentNodeShape=rt.tempCurrentNodeShape;break;case 26:rt.currentNodeShape=mt[gt];break;case 29:rt.nodeShapeStack?(rt.nodeShapeStack.push(rt.currentNodeShape),ne(rt.currentPropertyNode,rt.factory.namedNode(ee+"node"),rt.currentNodeShape=He())):rt.nodeShapeStack=[],this.$=rt.currentNodeShape;break;case 30:rt.nodeShapeStack.length>0&&(rt.currentNodeShape=rt.nodeShapeStack.pop());break;case 32:this.$=mt[gt].forEach(tt=>{ne(rt.currentNodeShape,rt.factory.namedNode(ee+"targetClass"),tt)});break;case 35:this.$=ne(rt.currentNodeShape,rt.factory.namedNode(ee+mt[gt][0]),mt[gt][1]);break;case 36:break;case 37:const Fe=Te([mt[gt-1],...mt[gt]].map(tt=>{const St=He();return ne(St,rt.factory.namedNode(ee+tt[0]),tt[1]),St}));this.$=["or",Fe];break;case 39:case 46:this.$=Be("not",...mt[gt]);break;case 40:case 50:this.$=[mt[gt-2],mt[gt]];break;case 43:this.$=mt[gt]&&xe(...mt[gt]);break;case 44:this.$=xe("or",Te([mt[gt-1],...mt[gt]].map(tt=>{const St=He();return ne(St,rt.factory.namedNode(ee+tt[0]),tt[1]),St})));break;case 47:this.$=[oe[mt[gt].value]?"datatype":"class",mt[gt]];break;case 48:this.$=["nodeKind",rt.factory.namedNode(ee+mt[gt])];break;case 49:this.$=["node",rt.factory.namedNode(mt[gt])];break;case 51:this.$=void 0;break;case 53:this.$=mt[gt]>0&&xe("minCount",Xe(mt[gt],D));break;case 54:this.$=xe("maxCount",Xe(mt[gt],D));break;case 56:this.$=Qe(mt[gt].slice(1));break;case 57:this.$=We(mt[gt]);break;case 59:ne(rt.currentNodeShape,rt.factory.namedNode(ee+"property"),rt.currentPropertyNode=He()),xe("path",mt[gt]);break;case 62:const $e=He();ne($e,rt.factory.namedNode(ee+"alternativePath"),Te([mt[gt-1],...mt[gt]])),this.$=$e;break;case 65:this.$=Te([mt[gt-1],...mt[gt]]);break;case 67:ne(this.$=He(),rt.factory.namedNode(ee+mt[gt]),mt[gt-1]);break;case 69:ne(this.$=He(),rt.factory.namedNode(ee+"inversePath"),mt[gt]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=mt[gt-1];break;case 77:this.$=Te(mt[gt-1]);break;case 80:this.$=rt.factory.namedNode(We(mt[gt]));break;case 81:this.$=rt.factory.namedNode(Qe(mt[gt]));break;case 82:this.$=ht(rt.factory.namedNode(ae));break;case 83:this.$=Xe(mt[gt]);break;case 84:this.$=Pe(mt[gt-1],mt[gt].substr(1).toLowerCase());break;case 85:this.$=Xe(mt[gt-2],mt[gt]);break;case 86:this.$=Xe(mt[gt],D);break;case 87:this.$=Xe(mt[gt],H);break;case 88:this.$=Xe(mt[gt].toLowerCase(),Y);break;case 89:this.$=Xe(mt[gt].toLowerCase(),Q);break;case 90:this.$=ce(mt[gt],1);break;case 91:this.$=ce(mt[gt],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:mt[gt-1].push(mt[gt]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[mt[gt]];break}},table:[e(r,[2,92],{3:1,4:2}),{1:[3]},e(n,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),e(i,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),e(r,[2,93]),e(r,[2,2]),e(r,[2,3]),e(r,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},e(n,[2,97]),{7:[2,28],13:a,16:s,18:24,51:23,52:22,114:26,115:o,130:c},e(n,[2,94]),e(n,[2,95]),{13:a,16:s,17:30,18:31,114:26,115:o,130:c},{13:a,16:s,17:32,18:31,114:26,115:o,130:c},e(r,[2,5]),e(r,[2,6]),{13:[1,33]},{1:[2,1]},e(i,[2,111]),{13:a,16:s,18:36,29:34,30:35,114:26,115:o,130:c},e(u,[2,26]),e(l,[2,80]),e(l,[2,81]),e(l,[2,82]),e(l,[2,140]),e(l,[2,141]),e(d,[2,98],{21:37,60:38,61:[1,39]}),e([28,56,61],[2,8]),{26:40,27:41,28:f,56:[2,102]},e(r,[2,7]),{53:[1,43]},e(h,[2,104],{31:44,27:45,28:f}),{13:a,16:s,18:51,32:46,33:47,35:48,36:49,37:50,38:p,43:53,44:_,92:g,113:52,114:26,115:o,116:55,119:m,120:y,121:59,122:61,123:62,130:c,131:v,132:A,133:T,134:S,135:P,136:j},{22:69,27:70,28:f,56:[2,100]},e(d,[2,99]),{13:a,16:s,18:72,62:71,114:26,115:o,130:c},{23:73,55:74,56:F},{56:[2,103]},{13:a,16:s,18:36,29:76,30:35,114:26,115:o,130:c},e(i,[2,27]),e(h,[2,12]),e(h,[2,105]),e(N,[2,13]),e(R,[2,106],{34:77}),e(C,[2,15]),e(C,[2,16]),e(C,[2,17]),e(M,[2,78]),e(M,[2,79]),{13:a,16:s,18:36,29:78,30:35,114:26,115:o,130:c},e(U,[2,108],{39:79}),e(M,[2,83],{117:[1,80],118:[1,81]}),e(M,[2,86]),e(M,[2,87]),e(M,[2,88]),e(M,[2,89]),e(u,[2,20]),e(B,[2,90]),e(B,[2,91]),e(M,[2,142]),e(M,[2,143]),e(B,[2,144]),e(B,[2,145]),e(B,[2,146]),e(B,[2,147]),{23:82,55:74,56:F},{56:[2,101]},e(d,[2,32],{114:26,18:83,13:a,16:s,115:o,130:c}),e(G,[2,114]),e(n,[2,10]),e(K,[2,112],{59:84}),e(K,[2,29]),e(h,[2,11]),e(N,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:a,16:s,18:51,33:90,35:48,36:49,37:50,38:p,40:[1,89],43:53,44:_,92:g,113:52,114:26,115:o,116:55,119:m,120:y,121:59,122:61,123:62,130:c,131:v,132:A,133:T,134:S,135:P,136:j},e(M,[2,84]),{13:a,16:s,18:91,114:26,115:o,130:c},e(n,[2,9]),e(G,[2,115]),{13:a,16:s,18:115,38:$,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:se,96:pe,97:101,99:103,103:106,105:109,106:113,108:110,109:we,114:26,115:o,125:96,126:Ce,130:c},e(R,[2,107]),{13:a,16:s,18:51,33:117,35:48,36:49,37:50,38:p,43:53,44:_,92:g,113:52,114:26,115:o,116:55,119:m,120:y,121:59,122:61,123:62,130:c,131:v,132:A,133:T,134:S,135:P,136:j},e(C,[2,22]),e(C,[2,21]),e(C,[2,18]),e(U,[2,109]),e(M,[2,85]),e(Le,[2,31]),e(K,[2,113]),e(Le,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},e(Ie,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:se,96:pe,126:Ce}),e(Ie,[2,119]),e(Oe,[2,116]),e(ye,[2,128],{79:123}),e(Oe,[2,35]),e(ye,[2,59]),e(Oe,[2,36],{71:124,66:125,67:Me}),e(W,[2,61],{100:127,98:128,67:ft}),e(le,[2,38]),{72:130,74:107,87:se,126:Ce},e(me,[2,64],{104:131,101:132,102:Z}),{75:[1,134]},e([13,16,56,85,87,95,115,126,128,129,130],[2,58]),e(q,[2,68]),{13:a,16:s,18:115,38:$,105:135,106:113,114:26,115:o,130:c},{75:[2,124]},{75:[2,125]},e(q,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),e([13,16,38,115,130],[2,70]),e(J,[2,74]),{13:a,16:s,18:115,38:$,97:140,99:103,103:106,105:109,106:113,108:110,109:we,114:26,115:o,130:c},e(R,[2,19]),{53:[1,141]},{53:[2,121]},{13:a,16:s,18:36,29:142,30:35,114:26,115:o,130:c},e(u,[2,23]),e(Oe,[2,117]),e(Ie,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:a,16:s,44:[1,146],56:F,85:re,87:_e,95:he,96:pe,115:o,128:ue,129:Ue,130:c}),e(Oe,[2,37],{66:159,67:Me}),e(le,[2,122]),{68:160,72:104,73:105,74:107,87:se,96:pe,126:Ce},e(W,[2,62],{98:161,67:ft}),e(me,[2,134]),{13:a,16:s,18:115,38:$,99:162,103:106,105:109,106:113,108:110,109:we,114:26,115:o,130:c},e(le,[2,39]),e(me,[2,65],{101:163,102:Z}),e(q,[2,136]),{13:a,16:s,18:115,38:$,103:164,105:109,106:113,108:110,109:we,114:26,115:o,130:c},{13:a,16:s,18:51,35:166,44:De,76:165,92:g,113:52,114:26,115:o,116:55,119:m,120:y,121:59,122:61,123:62,130:c,131:v,132:A,133:T,134:S,135:P,136:j},e(q,[2,69]),e(q,[2,67]),e(q,[2,71]),e(q,[2,72]),e(q,[2,73]),{40:[1,168]},e(K,[2,33]),{48:[1,170],49:169},e(ye,[2,129]),e(ye,[2,126]),e(ye,[2,127]),{89:171,92:[1,172]},e(ye,[2,43],{83:173,80:174,67:Je}),e(ze,[2,45]),{13:a,16:s,18:150,23:154,55:74,56:F,84:176,85:re,86:152,87:_e,94:155,95:he,114:26,115:o,128:ue,129:Ue,130:c},e(ze,[2,47]),e(ze,[2,48]),e(ze,[2,49]),{75:[1,177]},e(ze,[2,51]),e(ze,[2,56]),{13:[1,178]},e(ze,[2,132]),e(ze,[2,133]),e(le,[2,123]),e(le,[2,34]),e(me,[2,135]),e(me,[2,60]),e(q,[2,137]),e(q,[2,63]),e(le,[2,40]),e(ve,[2,76]),e(de,[2,138],{112:179}),e(J,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},e(ye,[2,44],{80:181,67:Je}),e(ze,[2,130]),{13:a,16:s,18:150,23:154,55:74,56:F,73:149,81:182,84:148,85:re,86:152,87:_e,94:155,95:he,96:pe,114:26,115:o,128:ue,129:Ue,130:c},e(ze,[2,46]),{13:a,16:s,18:51,35:166,44:De,76:183,92:g,113:52,114:26,115:o,116:55,119:m,120:y,121:59,122:61,123:62,130:c,131:v,132:A,133:T,134:S,135:P,136:j},e(ze,[2,57]),{13:a,16:s,18:51,35:185,46:[1,184],92:g,113:52,114:26,115:o,116:55,119:m,120:y,121:59,122:61,123:62,130:c,131:v,132:A,133:T,134:S,135:P,136:j},{91:186,92:[1,187],93:[1,188]},e(ze,[2,131]),e(ze,[2,42]),e(ze,[2,50]),e(ve,[2,77]),e(de,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},e(ye,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function(ut,Pt){if(Pt.recoverable)this.trace(ut);else{var Ot=new Error(ut);throw Ot.hash=Pt,Ot}},parse:function(ut){var Pt=this,Ot=[0],or=[null],Qt=[],mt=this.table,wn="",gt=0,Fe=0,$e=2,tt=1,St=Qt.slice.call(arguments,1),Ut=Object.create(this.lexer),ar={yy:{}};for(var nr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,nr)&&(ar.yy[nr]=this.yy[nr]);Ut.setInput(ut,ar.yy),ar.yy.lexer=Ut,ar.yy.parser=this,typeof Ut.yylloc>"u"&&(Ut.yylloc={});var fi=Ut.yylloc;Qt.push(fi);var Zo=Ut.options&&Ut.options.ranges;typeof ar.yy.parseError=="function"?this.parseError=ar.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Ae=function(){var Vt;return Vt=Ut.lex()||tt,typeof Vt!="number"&&(Vt=Pt.symbols_[Vt]||Vt),Vt},Ke,st,at,nt,At={},Rt,Tt,Nt,Bt;;){if(st=Ot[Ot.length-1],this.defaultActions[st]?at=this.defaultActions[st]:((Ke===null||typeof Ke>"u")&&(Ke=Ae()),at=mt[st]&&mt[st][Ke]),typeof at>"u"||!at.length||!at[0]){var kt="";Bt=[];for(Rt in mt[st])this.terminals_[Rt]&&Rt>$e&&Bt.push("'"+this.terminals_[Rt]+"'");Ut.showPosition?kt="Parse error on line "+(gt+1)+`:
`+Ut.showPosition()+`
Expecting `+Bt.join(", ")+", got '"+(this.terminals_[Ke]||Ke)+"'":kt="Parse error on line "+(gt+1)+": Unexpected "+(Ke==tt?"end of input":"'"+(this.terminals_[Ke]||Ke)+"'"),this.parseError(kt,{text:Ut.match,token:this.terminals_[Ke]||Ke,line:Ut.yylineno,loc:fi,expected:Bt})}if(at[0]instanceof Array&&at.length>1)throw new Error("Parse Error: multiple actions possible at state: "+st+", token: "+Ke);switch(at[0]){case 1:Ot.push(Ke),or.push(Ut.yytext),Qt.push(Ut.yylloc),Ot.push(at[1]),Ke=null,Fe=Ut.yyleng,wn=Ut.yytext,gt=Ut.yylineno,fi=Ut.yylloc;break;case 2:if(Tt=this.productions_[at[1]][1],At.$=or[or.length-Tt],At._$={first_line:Qt[Qt.length-(Tt||1)].first_line,last_line:Qt[Qt.length-1].last_line,first_column:Qt[Qt.length-(Tt||1)].first_column,last_column:Qt[Qt.length-1].last_column},Zo&&(At._$.range=[Qt[Qt.length-(Tt||1)].range[0],Qt[Qt.length-1].range[1]]),nt=this.performAction.apply(At,[wn,Fe,gt,ar.yy,at[1],or,Qt].concat(St)),typeof nt<"u")return nt;Tt&&(Ot=Ot.slice(0,-1*Tt*2),or=or.slice(0,-1*Tt),Qt=Qt.slice(0,-1*Tt)),Ot.push(this.productions_[at[1]][0]),or.push(At.$),Qt.push(At._$),Nt=mt[Ot[Ot.length-2]][Ot[Ot.length-1]],Ot.push(Nt);break;case 3:return!0}}return!0}};const it="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ae=it+"type",z=it+"first",V=it+"rest",x=it+"nil",O="http://www.w3.org/2001/XMLSchema#",D=O+"integer",H=O+"decimal",Y=O+"double",Q=O+"boolean",ee="http://www.w3.org/ns/shacl#",ie="http://www.w3.org/2002/07/owl#",Re="http://www.w3.org/2000/01/rdf-schema#",oe={[D]:!0,[H]:!0,[O+"float"]:!0,[Y]:!0,[O+"string"]:!0,[Q]:!0,[O+"dateTime"]:!0,[O+"nonPositiveInteger"]:!0,[O+"negativeInteger"]:!0,[O+"long"]:!0,[O+"int"]:!0,[O+"short"]:!0,[O+"byte"]:!0,[O+"nonNegativeInteger"]:!0,[O+"unsignedLong"]:!0,[O+"unsignedShort"]:!0,[O+"unsignedByte"]:!0,[O+"positiveInteger"]:!0,[it+"langString"]:!0};function Te(_t,ut=!1){let Pt=0,Ot=_t.length;if(ut&&Ot===0)return rt.factory.namedNode(x);const or=head=He();return Ot===0&&ne(head,rt.factory.namedNode(V),rt.factory.namedNode(x)),_t.forEach(Qt=>{if(Qt===void 0)throw new Error("b");ne(head,rt.factory.namedNode(z),Qt),ne(head,rt.factory.namedNode(V),head=++Pt<Ot?He():rt.factory.namedNode(x))}),or}function We(_t){return rt.n3Parser._resolveIRI(_t[0]==="<"?_t.substring(1,_t.length-1):_t)}function Qe(_t){const ut=_t.indexOf(":"),Pt=_t.substr(0,ut),Ot=rt.prefixes[Pt];if(!Ot)throw new Error("Unknown prefix: "+Pt);return We(Ot+_t.substr(ut+1))}function Xe(_t,ut){return ut&&ut.termType!=="NamedNode"&&(ut=rt.factory.namedNode(ut)),rt.factory.literal(_t,ut)}function Pe(_t,ut){return rt.factory.literal(_t,ut)}function He(_t){return rt.factory.blankNode("g_"+Ee++)}var Ee=0;rt._resetBlanks=function(){Ee=0};function ce(_t,ut){return rt.n3Parser._lexer._unescape(_t.substring(ut,_t.length-ut))}function ne(_t,ut,Pt){if(!_t.termType||!ut.termType||ut.value.includes(",")||!Pt.termType)throw new Error(`boo ${_t.value} ${ut.value} ${Pt.value}`);rt.onQuad(rt.factory.quad(_t,ut,Pt))}function xe(_t,ut){ne(rt.currentPropertyNode,rt.factory.namedNode(ee+_t),ut)}function Be(_t,ut,Pt){const Ot=He();return ne(Ot,rt.factory.namedNode(ee+ut),Pt),[_t,Ot]}function ht(_t){if(!rt.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return _t}var Et=function(){var _t={EOF:1,parseError:function(Pt,Ot){if(this.yy.parser)this.yy.parser.parseError(Pt,Ot);else throw new Error(Pt)},setInput:function(ut,Pt){return this.yy=Pt||this.yy||{},this._input=ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ut=this._input[0];this.yytext+=ut,this.yyleng++,this.offset++,this.match+=ut,this.matched+=ut;var Pt=ut.match(/(?:\r\n?|\n).*/g);return Pt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ut},unput:function(ut){var Pt=ut.length,Ot=ut.split(/(?:\r\n?|\n)/g);this._input=ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Pt),this.offset-=Pt;var or=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ot.length-1&&(this.yylineno-=Ot.length-1);var Qt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ot?(Ot.length===or.length?this.yylloc.first_column:0)+or[or.length-Ot.length].length-Ot[0].length:this.yylloc.first_column-Pt},this.options.ranges&&(this.yylloc.range=[Qt[0],Qt[0]+this.yyleng-Pt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ut){this.unput(this.match.slice(ut))},pastInput:function(){var ut=this.matched.substr(0,this.matched.length-this.match.length);return(ut.length>20?"...":"")+ut.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ut=this.match;return ut.length<20&&(ut+=this._input.substr(0,20-ut.length)),(ut.substr(0,20)+(ut.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ut=this.pastInput(),Pt=new Array(ut.length+1).join("-");return ut+this.upcomingInput()+`
`+Pt+"^"},test_match:function(ut,Pt){var Ot,or,Qt;if(this.options.backtrack_lexer&&(Qt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Qt.yylloc.range=this.yylloc.range.slice(0))),or=ut[0].match(/(?:\r\n?|\n).*/g),or&&(this.yylineno+=or.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:or?or[or.length-1].length-or[or.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ut[0].length},this.yytext+=ut[0],this.match+=ut[0],this.matches=ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ut[0].length),this.matched+=ut[0],Ot=this.performAction.call(this,this.yy,this,Pt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ot)return Ot;if(this._backtrack){for(var mt in Qt)this[mt]=Qt[mt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ut,Pt,Ot,or;this._more||(this.yytext="",this.match="");for(var Qt=this._currentRules(),mt=0;mt<Qt.length;mt++)if(Ot=this._input.match(this.rules[Qt[mt]]),Ot&&(!Pt||Ot[0].length>Pt[0].length)){if(Pt=Ot,or=mt,this.options.backtrack_lexer){if(ut=this.test_match(Ot,Qt[mt]),ut!==!1)return ut;if(this._backtrack){Pt=!1;continue}else return!1}else if(!this.options.flex)break}return Pt?(ut=this.test_match(Pt,Qt[or]),ut!==!1?ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Pt=this.next();return Pt||this.lex()},begin:function(Pt){this.conditionStack.push(Pt)},popState:function(){var Pt=this.conditionStack.length-1;return Pt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Pt){return Pt=this.conditionStack.length-1-Math.abs(Pt||0),Pt>=0?this.conditionStack[Pt]:"INITIAL"},pushState:function(Pt){this.begin(Pt)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Pt,Ot,or,Qt){switch(or){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(Ot.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return _t}();Ge.lexer=Et;function rt(){this.yy={}}return rt.prototype=Ge,Ge.Parser=rt,new rt}();return l8=t,l8}const gd="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Vy="http://www.w3.org/2001/XMLSchema#",iP="http://www.w3.org/2000/10/swap/",Fn={xsd:{decimal:`${Vy}decimal`,boolean:`${Vy}boolean`,double:`${Vy}double`,integer:`${Vy}integer`,string:`${Vy}string`},rdf:{type:`${gd}type`,nil:`${gd}nil`,first:`${gd}first`,rest:`${gd}rest`,langString:`${gd}langString`,dirLangString:`${gd}dirLangString`,reifies:`${gd}reifies`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${iP}reify#forSome`,forAll:`${iP}reify#forAll`},log:{implies:`${iP}log#implies`,isImpliedBy:`${iP}log#isImpliedBy`}},{xsd:aP}=Fn,Qot=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,wue={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Wot=/[\x00-\x20<>\\"\{\}\|\^\`]/,Kot={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_dircode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Xot=/$0^/;let tQ=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9])/i,this._dircode=/^--(ltr)|(rtl)/,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._atKeyword=/^@[a-z]+(?=[\s#<:])/i,this._keyword=/^(?:PREFIX|BASE|VERSION|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in Kot)&&this[r]instanceof RegExp&&(this[r]=Xot)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let o,c;for(;o=this._newline.exec(n);)this.comments&&(c=this._comment.exec(o[0]))&&a("comment",c[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),i=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(c=this._comment.exec(n))&&a("comment",c[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const u=this._line,l=n[0];let d="",f="",h="",p=null,_=0,g=!1;switch(l){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){g=!0;break}}else{this._n3Mode&&(_=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),f===null||Wot.test(f))return s(this);d="IRI"}else n.length>2&&n[1]==="<"&&n[2]==="("?(d="<<(",_=3):!this._lineMode&&n.length>(r?1:2)&&n[1]==="<"?(d="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(_=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",_=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))&&p[1]!=="version"?(d="langcode",f=p[1]):(p=this._atKeyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){d=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":if(n[1]==="-"){this._previousMarker==="langcode"&&(p=this._dircode.exec(n))&&(d="dircode",_=2,f=p[1]||p[2],_=f.length+2);break}(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h=typeof p[1]=="string"?aP.double:typeof p[2]=="string"?aP.decimal:aP.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":case"V":case"v":(p=this._keyword.exec(n))?d=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=aP.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(_=1,f="="):(_=2,f=">"));break;case"!":if(!this._n3Mode)break;case")":if(!r&&(n.length===1||n.length===2&&n[1]===">"))break;if(n.length>2&&n[1]===">"&&n[2]===">"){d=")>>",_=3;break}case",":case";":case"[":case"]":case"(":case"}":case"~":this._lineMode||(_=1,d=l);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",_=2):(d=l,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",_=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",f=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const m=_||p[0].length,y=a(d,f,h,u,m);this.previousToken=y,this._previousMarker=d,n=n.substr(m,n.length)}function a(o,c,u,l,d){const f=n?i-n.length:i,h=f+d,p={type:o,value:c,prefix:u,line:l,start:f,end:h};return e(null,p),p}function s(o){e(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(Qot,(i,a,s,o)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return o in wue?wue[o]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const s=e.substring(n,i),o=s.split(/\r\n|\r|\n/).length-1,c=i+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(s),matchLength:c}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,s)=>a?i=a:n.push(s),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Ni.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}};const{rdf:Sue,xsd:qd}=Fn;let g0,Jot=0;const Ks={namedNode:D2e,blankNode:C2e,variable:j2e,literal:L2e,defaultGraph:Yot,quad:EG,triple:EG,fromTerm:TE,fromQuad:B2e};let eo=class F2e{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof F2e?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},rM=class extends eo{get termType(){return"NamedNode"}},$d=class M2e extends eo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;const n=e.lastIndexOf("--");return r<e.length&&e[r++]==="@"?(n>r?e.substr(0,n):e).substr(r).toLowerCase():""}get direction(){const e=this.id,r=e.lastIndexOf("--")+2;return r>1&&r<e.length?e.substr(r).toLowerCase():""}get datatype(){return new rM(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?qd.string:e.indexOf("--",r)>0?Sue.dirLangString:Sue.langString}equals(e){return e instanceof M2e?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(this.direction===e.direction||this.direction===""&&!e.direction)&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,direction:this.direction,datatype:{termType:"NamedNode",value:this.datatypeString}}}},rQ=class extends eo{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},nQ=class extends eo{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},iQ=class extends eo{constructor(){return super(""),g0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};g0=new iQ;function Zd(t,e,r){if(e=e||Ks,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Ks)return new $d(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);let i;if(t[n+1]==="@"){i=t.substr(n+2);const a=i.lastIndexOf("--");a>0&&a<i.length&&(i={language:i.substr(0,a),direction:i.substr(a+2)})}else i=e.namedNode(t.substr(n+3));return e.literal(t.substr(1,n-1),i);case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Zd(t[0],e,!0),Zd(t[1],e,!0),Zd(t[2],e,!0),t[3]&&Zd(t[3],e,!0))}function ul(t,e){if(typeof t=="string")return t;if(t instanceof eo&&t.termType!=="Quad")return t.id;if(!t)return g0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}${t.direction?`--${t.direction}`:""}`:t.datatype&&t.datatype.value!==qd.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[ul(t.subject,!0),ul(t.predicate,!0),ul(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(ul(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}let zp=class extends eo{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||g0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function D2e(t){return new rM(t)}function C2e(t){return new rQ(t||`n3-${Jot++}`)}function L2e(t,e){if(typeof e=="string")return new $d(`"${t}"@${e.toLowerCase()}`);if(e!==void 0&&!("termType"in e))return new $d(`"${t}"@${e.language.toLowerCase()}${e.direction?`--${e.direction.toLowerCase()}`:""}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=qd.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?qd.integer:qd.double:(r=qd.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===qd.string?new $d(`"${t}"`):new $d(`"${t}"^^${r}`)}function j2e(t){return new nQ(t)}function Yot(){return g0}function EG(t,e,r,n){return new zp(t,e,r,n)}function TE(t){if(t instanceof eo)return t;switch(t.termType){case"NamedNode":return D2e(t.value);case"BlankNode":return C2e(t.value);case"Variable":return j2e(t.value);case"DefaultGraph":return g0;case"Literal":return L2e(t.value,t.language||t.datatype);case"Quad":return B2e(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function B2e(t){if(t instanceof zp)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return EG(TE(t.subject),TE(t.predicate),TE(t.object),TE(t.graph))}let xue=0,xO=class q2e{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&U2e(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),o=this._n3Mode=/n3/.test(r),c=a||s;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||o),this._isImpliedBy=e.isImpliedBy,c&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new tQ({lineMode:c,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers,this._parseUnsupportedVersions=!!e.parseUnsupportedVersions,this._version=e.version}static _resetBlankNodePrefix(){xue=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const s=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readBeforeTopContext(e){return this._version&&!this._isValidVersion(this._version)?this._error(`Detected unsupported version as media type parameter: "${this._version}"`,e):this._readInTopContext(e)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"VERSION":this._sparqlStyle=!0;case"@version":return this._readVersion;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(a+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<(":return this._n3Mode?(this._saveContext("<<(",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Disallowed triple term as subject",e);case"<<":return this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject;default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":case"|}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._validAnnotation=!0,this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<(":return this._saveContext("<<(",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;case"<<":return this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){if(e.type==="]")return this._subject=null,this._readBlankNodeTail(e);{const r=this._contextStack;return(r.length>1&&r[r.length-2]).type==="<<"?this._error("Unexpected compound blank node expression in reified triple",e):(this._predicate=null,this._readPredicate(e))}}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,s=this._contextStack,o=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":this._saveContext("<<",this._graph,null,null,null),this._graph=null,i=this._readSubject;break;default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),e.type==="<<"&&(s[s.length-1].subject=this._subject),a===null?o.predicate===null?o.subject=n:o.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e,r){let n=this._factory.literal(this._literalValue),i;switch(e.type){case"type":case"typeIRI":const a=this._readEntity(e);if(a===void 0)return;if(a.value===Fn.rdf.langString||a.value===Fn.rdf.dirLangString)return this._error("Detected illegal (directional) languaged-tagged string with explicit datatype",e);n=this._factory.literal(this._literalValue,a),e=null;break;case"langcode":if(e.value.length>8)return this._error("Detected language tag of length larger than 8",e);n=this._factory.literal(this._literalValue,e.value),this._literalLanguage=e.value,e=null,i=this._readDirCode.bind(this,r);break}return{token:e,literal:n,readCb:i}}_readDirCode(e,r,n){if(n.type==="dircode"){const i=this._factory.literal(this._literalValue,{language:this._literalLanguage,direction:n.value});e==="subject"?this._subject=i:this._object=i,this._literalLanguage=void 0,n=null}return e==="subject"?n===null?this._readPredicateOrNamedGraph:this._readPredicateOrNamedGraph(n):this._completeObjectLiteralPost(n,r)}_completeSubjectLiteral(e){const r=this._completeLiteral(e,"subject");return this._subject=r.literal,r.readCb?r.readCb.bind(this,!1):this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e,"object");if(n)return this._object=n.literal,n.readCb?n.readCb.bind(this,r):this._completeObjectLiteralPost(n.token,r)}_completeObjectLiteralPost(e,r){return r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),e===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(e))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,i=!1;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,this._tripleTerm=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"~":r=this._readReifierInAnnotation,i=!0;break;case"{|":this._subject=this._readTripleTerm(),this._validAnnotation=!1,i=!0,r=this._readPredicate;break;case"|}":if(!this._annotation)return this._error("Unexpected annotation syntax closing",e);if(!this._validAnnotation)return this._error("Annotation block can not be empty",e);this._subject=null,this._annotation=!1,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null&&(!i||i&&!this._annotation)){const o=this._predicate,c=this._object;s?this._emit(c,o,a,n):this._emit(a,o,c,n)}return i&&(this._annotation=!0),r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_isValidVersion(e){return this._parseUnsupportedVersions||q2e.SUPPORTED_VERSIONS.includes(e)}_readVersion(e){return e.type!=="literal"?this._error("Expected literal to follow version declaration",e):e.end-e.start!==e.value.length+2?this._error("Version declarations must use single quotes",e):(this._versionCallback(e.value),this._isValidVersion(e.value)?this._readDeclarationPunctuation:this._error(`Detected unsupported version: "${e.value}"`,e))}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._factory.blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readTripleTermTail(e){if(e.type!==")>>")return this._error(`Expected )>> but got ${e.type}`,e);const r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<(",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_readReifiedTripleTailOrReifier(e){return e.type==="~"?this._readReifier:this._readReifiedTripleTail(e)}_readReifiedTripleTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);this._tripleTerm=null;const r=this._readTripleTerm();this._restoreContext("<<",e);const n=this._contextStack,i=n.length&&n[n.length-1];return i&&i.type==="list"?(this._emit(this._subject,this.RDF_FIRST,r,this._graph),this._getContextEndReader()):this._subject===null?(this._subject=r,this._readPredicateOrReifierTripleEnd):(this._object=r,this._getContextEndReader())}_readPredicateOrReifierTripleEnd(e){return e.type==="."?(this._subject=null,this._readPunctuation(e)):this._readPredicate(e)}_readReifier(e){return this._reifier=this._readEntity(e),this._readReifiedTripleTail}_readReifierInAnnotation(e){return e.type==="IRI"||e.type==="typeIRI"||e.type==="type"||e.type==="prefixed"||e.type==="blank"||e.type==="var"?(this._reifier=this._readEntity(e),this._readPunctuation):(this._readTripleTerm(),this._subject=null,this._readPunctuation(e))}_readTripleTerm(){const e=this._contextStack,r=e.length&&e[e.length-1],n=r?r.graph:void 0,i=this._reifier||this._factory.blankNode();return this._reifier=null,this._tripleTerm=this._tripleTerm||this._factory.quad(this._subject,this._predicate,this._object),this._emit(i,this.RDF_REIFIES,this._tripleTerm,n||this.DEFAULTGRAPH),i}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<(":return this._readTripleTermTail;case"<<":return this._readReifiedTripleTailOrReifier}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Gy}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,s=0,o="/";for(;i<r;){switch(o){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(o=e[++i+1],o){case"/":n+=e.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return n+e.substring(s,i)+e.substr(i+1);case".":if(o=e[++i+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=e.substring(s,i-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),o!=="/")return`${n}/${e.substr(i+1)}`;s=i+1}}}o=e[++i]}return n+e.substring(s)}parse(e,r,n,i){let a,s,o,c;if(r&&(r.onQuad||r.onPrefix||r.onComment||r.onVersion)?(a=r.onQuad,s=r.onPrefix,o=r.onComment,c=r.onVersion):(a=r,s=n,c=i),this._readCallback=this._readBeforeTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${xue++}_`,this._prefixCallback=s||Gy,this._versionCallback=c||Gy,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const l=[];let d;if(this._callback=(f,h)=>{f?d=f:h&&l.push(h)},this._lexer.tokenize(e).every(f=>this._readCallback=this._readCallback(f)),d)throw d;return l}let u=(l,d)=>{l!==null?(this._callback(l),this._callback=Gy):this._readCallback&&(this._readCallback=this._readCallback(d))};o&&(this._lexer.comments=!0,u=(l,d)=>{l!==null?(this._callback(l),this._callback=Gy):this._readCallback&&(d.type==="comment"?o(d.value):this._readCallback=this._readCallback(d))}),this._callback=a,this._lexer.tokenize(e,u)}};function Gy(){}function U2e(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(Fn.rdf.first),t.RDF_REST=e.namedNode(Fn.rdf.rest),t.RDF_NIL=e.namedNode(Fn.rdf.nil),t.RDF_REIFIES=e.namedNode(Fn.rdf.reifies),t.N3_FORALL=e.namedNode(Fn.r.forAll),t.N3_FORSOME=e.namedNode(Fn.r.forSome),t.ABBREVIATIONS={a:e.namedNode(Fn.rdf.type),"=":e.namedNode(Fn.owl.sameAs),">":e.namedNode(Fn.log.implies),"<":e.namedNode(Fn.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}xO.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"];U2e(xO.prototype,Ks);function $ot(t){return!!t&&t.termType==="NamedNode"}function Zot(t){return!!t&&t.termType==="BlankNode"}function eut(t){return!!t&&t.termType==="Literal"}function tut(t){return!!t&&t.termType==="Variable"}function rut(t){return!!t&&t.termType==="Quad"}function jI(t){return!!t&&t.termType==="DefaultGraph"}function nut(t){return jI(t.graph)}function iut(t,e){return V2e({"":t.value||t},e)("")}function V2e(t,e){const r=Object.create(null);for(const i in t)n(i,t[i]);e=e||Ks;function n(i,a){if(typeof a=="string"){const s=Object.create(null);r[i]=o=>s[o]||(s[o]=e.namedNode(a+o))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}const G2e=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:nut,isBlankNode:Zot,isDefaultGraph:jI,isLiteral:eut,isNamedNode:$ot,isQuad:rut,isVariable:tut,prefix:iut,prefixes:V2e},Symbol.toStringTag,{value:"Module"}));function M3(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const aut=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,sut=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,Eue="./",out="../",d8="?",Iue="#";let aQ=class H2e{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!aut.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!H2e.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",M3(e)],n=[],i=[],a=/[^/?#]*([/?#])/y;let s,o=0,c=0,u=a.lastIndex=e.length;for(;!o&&!c&&(s=a.exec(this.base));)s[1]===Iue?c=a.lastIndex-1:(r.push(M3(s[0]),"(?:"),n.push(")?"),s[1]!==d8?i.push(u=a.lastIndex):(o=u=a.lastIndex,c=this.base.indexOf(Iue,o),this._pathReplacements[o]=d8));for(let l=0;l<i.length;l++)this._pathReplacements[i[l]]=out.repeat(i.length-l-1);return this._pathReplacements[i[i.length-1]]=Eue,this._baseLength=c>0?c:this.base.length,r.push(M3(this.base.substring(u,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){const r=this._getBaseMatcher().exec(e);if(!r)return e;const n=r[0].length;if(n===this._baseLength&&n===e.length)return"";const i=this._pathReplacements[n];if(i){const a=e.substring(n);return i!==d8&&!sut.test(a)?e:i===Eue&&/^[^?#]/.test(a)?a:i+a}return e.substring(n-1)}};const Hy=Ks.defaultGraph(),{rdf:uut,xsd:Sh}=Fn,Oue=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Rue=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,cut={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};let ky=class extends eo{equals(e){return e===this}},EO=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,s){n+=i,s&&s()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Hy,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new aQ(r.baseIRI)))}get _inDefaultGraph(){return Hy.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Hy.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),Oue.test(r)&&(r=r.replace(Rue,Pue));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;Oue.test(r)&&(r=r.replace(Rue,Pue));const n=e.direction?`--${e.direction}`:"";if(e.language)return`"${r}"@${e.language}${n}`;if(this._lineMode){if(e.datatype.value===Sh.string)return`"${r}"`}else switch(e.datatype.value){case Sh.string:return`"${r}"`;case Sh.boolean:if(r==="true"||r==="false")return r;break;case Sh.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Sh.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Sh.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===uut.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<(${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${jI(i)?"":` ${this._encodeIriOrBlank(i)}`})>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,Hy,i):this._writeQuad(e,r,n,i||Hy,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];i=M3(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new ky("[]");case 1:if(i=n[0],!(i.object instanceof ky))return new ky(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let o=0;o<a;o++)i=n[o],i.predicate.equals(e)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(o?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new ky(`${s}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new ky(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function Pue(t){let e=cut[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const f8=Symbol("iter");function YE(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=YE(t[n]||Object.create(null),e[n],r-1);return t}function k2e(t,e,r=4){let n=!1;for(const i in t)if(i in e){const a=r===0?null:k2e(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}function z2e(t,e,r=4){let n=!1;for(const i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:YE({},t[i],r-1);else if(r!==0){const a=z2e(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}let sQ=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||Ks}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return Zd(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(jI(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[ul(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${jI(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:ul(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}},nM=class es{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||Ks,this._entityIndex=r.entityIndex||new sQ({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const s in n=r[a].subjects)for(const o in i=n[s])e+=Object.keys(i[o]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),s=a[n]||(a[n]={}),o=i in s;return o||(s[i]=null),!o}_removeFromIndex(e,r,n,i){const a=e[r],s=a[n];delete s[i];for(const o in s)return;delete a[n];for(const o in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,s,o,c){let u,l,d;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(const _ in e)if(l=e[_]){p[a]=this._termFromId(f[_]),n&&((u=l,l={})[n]=u[n]);for(const g in l)if(d=l[g]){p[s]=this._termFromId(f[g]);const m=i?i in d?[i]:[]:Object.keys(d);for(let y=0;y<m.length;y++)p[o]=this._termFromId(f[m[y]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,s,o;if((a=e[r])&&(s=a[n]))for(o in s)i(o)}_countInIndex(e,r,n,i){let a=0,s,o,c;r&&((s=e,e={})[r]=s[r]);for(const u in e)if(o=e[u]){n&&((s=o,o={})[n]=s[n]);for(const l in o)(c=o[l])&&(i?i in c&&a++:a+=Object.keys(c).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;const a=this._graphs;let s,o,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(s=a[i])||!(o=s.subjects[e])||!(c=o[r])||!(n in c))return!1;this._removeFromIndex(s.subjects,e,r,n),this._removeFromIndex(s.predicates,r,n,e),this._removeFromIndex(s.objects,n,e,r),this._size!==null&&this._size--;for(e in s.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Wt.Readable({objectMode:!0}),s=this.readQuads(e,r,n,i);return a._read=o=>{for(;--o>=0;){const{done:c,value:u}=s.next();if(c){a.push(null);return}a.push(u)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let s,o,c,u;if(!(e&&!(o=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(const l in a)(s=a[l])&&(o?u?yield*this._findInIndex(s.objects,u,o,c,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,o,c,null,"subject","predicate","object",l):c?yield*this._findInIndex(s.predicates,c,u,null,"predicate","object","subject",l):u?yield*this._findInIndex(s.objects,u,null,null,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",l))}match(e,r,n,i){return new xh(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let s=0,o,c,u,l;if(e&&!(c=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n)))return 0;for(const d in a)(o=a[d])&&(e?n?s+=this._countInIndex(o.objects,l,c,u):s+=this._countInIndex(o.subjects,c,u,l):r?s+=this._countInIndex(o.predicates,u,l,c):s+=this._countInIndex(o.objects,l,c,u));return s}forEach(e,r,n,i,a){this.some(s=>(e(s,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(s=>!e(s,this),r,n,i,a)}some(e,r,n,i,a){for(const s of this.readQuads(r,n,i,a))if(e(s,this))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.predicates,o,c,e):this._loopByKey1(s.subjects,o,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.objects,c,o,e):this._loopByKey0(s.subjects,o,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.subjects,o,c,e):this._loopByKey1(s.objects,o,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(s=>(e(s.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(o,c)=>{throw new Error(`${o.value} ${c}`)},a=this.getQuads(null,Fn.rdf.rest,Fn.rdf.nil,null),s=e?[...a]:[];return a.forEach(o=>{const c=[];let u=!1,l,d;const f=o.graph;let h=o.subject;for(;h&&!u;){const p=this.getQuads(null,null,h,null),_=this.getQuads(h,null,null,null);let g,m=null,y=null,v=null;for(let A=0;A<_.length&&!u;A++)g=_[A],g.graph.equals(f)?l?u=i(h,"has non-list arcs out"):g.predicate.value===Fn.rdf.first?m?u=i(h,"has multiple rdf:first arcs"):s.push(m=g):g.predicate.value===Fn.rdf.rest?y?u=i(h,"has multiple rdf:rest arcs"):s.push(y=g):p.length?u=i(h,"can't be subject and object"):(l=g,d="subject"):u=i(h,"not confined to single graph");for(let A=0;A<p.length&&!u;++A)g=p[A],l?u=i(h,"can't have coreferences"):g.predicate.value===Fn.rdf.rest?v?u=i(h,"has incoming rdf:rest arcs"):v=g:(l=g,d="object");m?c.unshift(m.object):u=i(h,"has no list head"),h=v&&v.subject}u?e=!1:l&&(n[l[d].value]=c)}),e&&this.removeQuads(s),n}addAll(e){if(e instanceof xh&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof es&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=YE(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e instanceof xh&&(e=e.filtered),e===this)return!0;if(!(e instanceof es)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));const r=this._graphs,n=e._graphs;let i,a,s,o,c;for(const u in n){if(!(i=r[u]))return!1;i=i.subjects;for(const l in a=n[u].subjects){if(!(s=i[l]))return!1;for(const d in o=a[l]){if(!(c=s[d]))return!1;for(const f in o[d])if(!(f in c))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){if(e&&e instanceof xh&&(e=e.filtered),e===this)return new es({entityIndex:this._entityIndex});if(e instanceof es&&e._entityIndex===this._entityIndex){const r=new es({entityIndex:this._entityIndex}),n=z2e(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof xh&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new es({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof xh&&(e=e.filtered),e===this){const r=new es({entityIndex:this._entityIndex});return r._graphs=YE(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof es&&this._entityIndex===e._entityIndex){const r=new es({entityIndex:this._entityIndex}),n=k2e(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){const r=new es({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new EO().quadsToString(this)}union(e){const r=new es({entityIndex:this._entityIndex});return r._graphs=YE(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function go(t,e,r=0){const n=e[r];if(n&&!(n in t))return!1;let i=!1;for(const a in n?{[n]:t[n]}:t){const s=r===2?null:go(t[a],e,r+1);s!==!1&&(i=i||Object.create(null),i[a]=s)}return i}let xh=class Q2e extends Wt.Readable{constructor(e,r,n,i,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,s=this._filtered=new nM({factory:e._factory,entityIndex:this.options.entityIndex});let o,c,u;if(a&&!(o=s._termToNumericId(a))||i&&!(c=s._termToNumericId(i))||n&&!(u=s._termToNumericId(n)))return s;const l=e._getGraphs(r);for(const d in l){let f,h,p,_;(_=l[d])&&(!o&&c?(h=go(_.predicates,[c,u,o]))&&(f=go(_.subjects,[o,c,u]),p=go(_.objects,[u,o,c])):u?(p=go(_.objects,[u,o,c]))&&(f=go(_.subjects,[o,c,u]),h=go(_.predicates,[c,u,o])):(f=go(_.subjects,[o,c,u]))&&(h=go(_.predicates,[c,u,o]),p=go(_.objects,[u,o,c])),f&&(s._graphs[d]={subjects:f,predicates:h,objects:p}))}s._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[f8]&&(this[f8]=this[Symbol.iterator]());const r=this[f8];for(;--e>=0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new EO().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new Q2e(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}},W2e=class{dataset(e){return new nM(e)}};function K2e(t){const e=[];for(const{subject:r,object:n}of t.match(null,Ks.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Ks.defaultGraph())){const i=[...t.match(null,null,null,r)],a=[...t.match(null,null,null,n)];e.push({premise:i,conclusion:a})}return e}let X2e=class{constructor(e){this._store=e}_add(e,r,n,i,a){this._store._addToIndex(i.subjects,e,r,n)&&(this._store._addToIndex(i.predicates,r,n,e),this._store._addToIndex(i.objects,n,e,r),a())}_evaluatePremise(e,r,n,i=0){let a,s,o,c,u;const[l,d,f]=e.premise[i].value,h=r[e.premise[i].content],p=!(o=l.value);for(o in p?h:{[o]:h[o]})if(c=h[o]){p&&(l.value=Number(o)),a=!(o=d.value);for(o in a?c:{[o]:c[o]})if(u=c[o]){a&&(d.value=Number(o)),s=!(o=f.value);for(o in s?u:{[o]:u[o]})s&&(f.value=Number(o)),i===e.premise.length-1?e.conclusion.forEach(_=>{this._add(_.subject.value,_.predicate.value,_.object.value,r,()=>{n(_)})}):this._evaluatePremise(e,r,n,i+1);s&&(f.value=null)}a&&(d.value=null)}p&&(l.value=null)}_evaluateRules(e,r,n){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],r,n)}_reasonGraphNaive(e,r){const n=[];function i(o){o.next&&o.next.forEach(c=>{n.push([o.subject.value,o.predicate.value,o.object.value,c])})}const a=o=>{o.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,r,()=>{i(c)})})};this._evaluateRules(e,r,i);let s;for(;(s=n.pop())!==void 0;){const[o,c,u,l]=s,d=l.basePremise.subject.value;d||(l.basePremise.subject.value=o);const f=l.basePremise.predicate.value;f||(l.basePremise.predicate.value=c);const h=l.basePremise.object.value;h||(l.basePremise.object.value=u),l.premise.length===0?a(l.conclusion):this._evaluatePremise(l,r,i),d||(l.basePremise.subject.value=null),f||(l.basePremise.predicate.value=null),h||(l.basePremise.object.value=null)}}_createRule({premise:e,conclusion:r}){const n={},i=s=>s.termType==="Variable"?n[s.value]=n[s.value]||{}:{value:this._store._termToNewNumericId(s)},a=s=>({subject:i(s.subject),predicate:i(s.predicate),object:i(s.object)});return{premise:e.map(s=>a(s)),conclusion:r.map(s=>a(s)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=K2e(e)),e=e.map(n=>this._createRule(n));for(const n of e)for(const i of e)for(let a=0;a<i.premise.length;a++){const s=i.premise[a];for(const o of n.conclusion){if(h8(s.subject,o.subject)&&h8(s.predicate,o.predicate)&&h8(s.object,o.object)){const c=new Set,u=[];s.subject.value=s.subject.value||1,s.object.value=s.object.value||1,s.predicate.value=s.predicate.value||1;for(let l=0;l<i.premise.length;l++)l!==a&&u.push(Nue(i.premise[l],c));(o.next=o.next||[]).push({premise:u,conclusion:i.conclusion,basePremise:s})}i.variables.forEach(c=>{c.value=null})}}for(const n of e){const i=new Set;n.premise=n.premise.map(a=>Nue(a,i))}const r=this._store._getGraphs();for(const n in r)this._reasonGraphNaive(e,r[n]);this._store._size=null}};function Nue({subject:t,predicate:e,object:r},n){const i=t.value||n.has(t)||(n.add(t),!1),a=e.value||n.has(e)||(n.add(e),!1),s=r.value||n.has(r)||(n.add(r),!1);return!i&&a?{content:"predicates",value:[e,r,t]}:s?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function h8(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}let J2e=class extends Wt.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new xO(e);let n,i;const a={onQuad:(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},onPrefix:(s,o)=>{this.emit("prefix",s,o)}};e&&e.comments&&(a.onComment=s=>{this.emit("comment",s)}),r.parse({on:(s,o)=>{switch(s){case"data":n=o;break;case"end":i=o;break}}},a),this._transform=(s,o,c)=>{n(s),c()},this._flush=s=>{i(),s()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}},Y2e=class extends Wt.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new EO({write:(n,i,a)=>{this.push(n),a&&a()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,i,a)=>{r.addQuad(n,a)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}};const lut={Lexer:tQ,Parser:xO,Writer:EO,Store:nM,StoreFactory:W2e,EntityIndex:sQ,StreamParser:J2e,StreamWriter:Y2e,Util:G2e,Reasoner:X2e,BaseIRI:aQ,DataFactory:Ks,Term:eo,NamedNode:rM,Literal:$d,BlankNode:rQ,Variable:nQ,DefaultGraph:iQ,Quad:zp,Triple:zp,termFromId:Zd,termToId:ul},dut=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:aQ,BlankNode:rQ,DataFactory:Ks,DefaultGraph:iQ,EntityIndex:sQ,Lexer:tQ,Literal:$d,NamedNode:rM,Parser:xO,Quad:zp,Reasoner:X2e,Store:nM,StoreFactory:W2e,StreamParser:J2e,StreamWriter:Y2e,Term:eo,Triple:zp,Util:G2e,Variable:nQ,Writer:EO,default:lut,getRulesFromDataset:K2e,termFromId:Zd,termToId:ul},Symbol.toStringTag,{value:"Module"})),fut=Pl(dut);var Fue;function hut(){if(Fue)return nP;Fue=1;const t=zot().Parser,e=fut;class r{constructor(){}parse(i,{extendedSyntax:a,baseIRI:s}={}){this._parser=new t,this._parser.Parser.factory=e.DataFactory,this._parser.Parser.base=e.DataFactory.namedNode(s||"urn:x-base:default"),this._parser.Parser.extended=a===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new e.Parser({baseIRI:s||"urn:x-base:default"});const o=[];return this._parser.Parser.onQuad=c=>{o.push(c)},this._parser.parse(i),o.prefixes=this._parser.Parser.prefixes,o}}return nP.Parser=r,nP.parse=function(i,a){return new r().parse(i,a)},nP}var zy={},Mue;function put(){if(Mue)return zy;Mue=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.PrefixWrappingIterator=void 0;const t=ir();let e=class extends t.WrappingIterator{constructor(i){super(i==null?void 0:i.then(a=>(this.prefixes=a.prefixes,a)));k(this,"prefixes")}read(){if(this.prefixes){for(const i of Object.entries(this.prefixes))this.emit("prefix",...i);delete this.prefixes}return super.read()}};return zy.PrefixWrappingIterator=e,zy}var Due;function _ut(){if(Due)return qy;Due=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.ActorRdfParseShaclc=void 0;const t=p0(),e=m0(),r=Wt,n=hut(),i=put();let a=class extends t.ActorRdfParseFixedMediaTypes{constructor(o){super(o)}async runHandle(o,c,u){const l=new i.PrefixWrappingIterator((0,e.stringify)(o.data).then(f=>{var h;return(0,n.parse)(f,{extendedSyntax:c==="text/shaclc-ext",baseIRI:(h=o.metadata)==null?void 0:h.baseIRI})})),d=new r.Readable({objectMode:!0});return l.on("prefix",(...f)=>d.emit("prefix",...f)),{data:d.wrap(l),metadata:{triples:!0}}}};return qy.ActorRdfParseShaclc=a,qy}var Cue;function mut(){return Cue||(Cue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(_ut(),t)}(c8)),c8}var p8={},Qy={},_8={},Wy={},Eh={},m8={},g8={},Lue;function jue(){return Lue||(Lue=1,function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.fromCodePoint=void 0,t.replaceCodePoint=n,t.decodeCodePoint=i;const r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:a=>{let s="";return a>65535&&(a-=65536,s+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),s+=String.fromCharCode(a),s};function n(a){var s;return a>=55296&&a<=57343||a>1114111?65533:(s=r.get(a))!==null&&s!==void 0?s:a}function i(a){return(0,t.fromCodePoint)(n(a))}}(g8)),g8}var Ky={},sP={},Bue;function $2e(){if(Bue)return sP;Bue=1,Object.defineProperty(sP,"__esModule",{value:!0}),sP.decodeBase64=t;function t(e){const r=typeof atob=="function"?atob(e):typeof Buffer.from=="function"?Buffer.from(e,"base64").toString("binary"):new Buffer(e,"base64").toString("binary"),n=r.length&-2,i=new Uint16Array(n/2);for(let a=0,s=0;a<n;a+=2){const o=r.charCodeAt(a),c=r.charCodeAt(a+1);i[s++]=o|c<<8}return i}return sP}var que;function Uue(){if(que)return Ky;que=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.htmlDecodeTree=void 0;const t=$2e();return Ky.htmlDecodeTree=(0,t.decodeBase64)("QR08ALkAAgH6AYsDNQR2BO0EPgXZBQEGLAbdBxMISQrvCmQLfQurDKQNLw4fD4YPpA+6D/IPAAAAAAAAAAAAAAAAKhBMEY8TmxUWF2EYLBkxGuAa3RsJHDscWR8YIC8jSCSIJcMl6ie3Ku8rEC0CLjoupS7kLgAIRU1hYmNmZ2xtbm9wcnN0dVQAWgBeAGUAaQBzAHcAfgCBAIQAhwCSAJoAoACsALMAbABpAGcAO4DGAMZAUAA7gCYAJkBjAHUAdABlADuAwQDBQHIiZXZlAAJhAAFpeW0AcgByAGMAO4DCAMJAEGRyAADgNdgE3XIAYQB2AGUAO4DAAMBA8CFoYZFj4SFjcgBhZAAAoFMqAAFncIsAjgBvAG4ABGFmAADgNdg43fAlbHlGdW5jdGlvbgCgYSBpAG4AZwA7gMUAxUAAAWNzpACoAHIAAOA12Jzc6SFnbgCgVCJpAGwAZABlADuAwwDDQG0AbAA7gMQAxEAABGFjZWZvcnN1xQDYANoA7QDxAPYA+QD8AAABY3LJAM8AayNzbGFzaAAAoBYidgHTANUAAKDnKmUAZAAAoAYjeQARZIABY3J0AOAA5QDrAGEidXNlAACgNSLuI291bGxpcwCgLCFhAJJjcgAA4DXYBd1wAGYAAOA12Dnd5SF2ZdhiYwDyAOoAbSJwZXEAAKBOIgAHSE9hY2RlZmhpbG9yc3UXARoBHwE6AVIBVQFiAWQBZgGCAakB6QHtAfIBYwB5ACdkUABZADuAqQCpQIABY3B5ACUBKAE1AfUhdGUGYWmg0iJ0KGFsRGlmZmVyZW50aWFsRAAAoEUhbCJleXMAAKAtIQACYWVpb0EBRAFKAU0B8iFvbgxhZABpAGwAO4DHAMdAcgBjAAhhbiJpbnQAAKAwIm8AdAAKYQABZG5ZAV0BaSJsbGEAuGB0I2VyRG90ALdg8gA5AWkAp2NyImNsZQAAAkRNUFRwAXQBeQF9AW8AdAAAoJkiaSJudXMAAKCWIuwhdXMAoJUiaSJtZXMAAKCXIm8AAAFjc4cBlAFrKndpc2VDb250b3VySW50ZWdyYWwAAKAyImUjQ3VybHkAAAFEUZwBpAFvJXVibGVRdW90ZQAAoB0gdSJvdGUAAKAZIAACbG5wdbABtgHNAdgBbwBuAGWgNyIAoHQqgAFnaXQAvAHBAcUB8iJ1ZW50AKBhIm4AdAAAoC8i7yV1ckludGVncmFsAKAuIgABZnLRAdMBAKACIe8iZHVjdACgECJuLnRlckNsb2Nrd2lzZUNvbnRvdXJJbnRlZ3JhbAAAoDMi7yFzcwCgLypjAHIAAOA12J7ccABDoNMiYQBwAACgTSKABURKU1phY2VmaW9zAAsCEgIVAhgCGwIsAjQCOQI9AnMCfwNvoEUh9CJyYWhkAKARKWMAeQACZGMAeQAFZGMAeQAPZIABZ3JzACECJQIoAuchZXIAoCEgcgAAoKEhaAB2AACg5CoAAWF5MAIzAvIhb24OYRRkbAB0oAciYQCUY3IAAOA12AfdAAFhZkECawIAAWNtRQJnAvIjaXRpY2FsAAJBREdUUAJUAl8CYwJjInV0ZQC0YG8AdAFZAloC2WJiJGxlQWN1dGUA3WJyImF2ZQBgYGkibGRlANxi7yFuZACgxCJmJWVyZW50aWFsRAAAoEYhcAR9AgAAAAAAAIECjgIAABoDZgAA4DXYO91EoagAhQKJAm8AdAAAoNwgcSJ1YWwAAKBQIuIhbGUAA0NETFJVVpkCqAK1Au8C/wIRA28AbgB0AG8AdQByAEkAbgB0AGUAZwByAGEA7ADEAW8AdAKvAgAAAACwAqhgbiNBcnJvdwAAoNMhAAFlb7kC0AJmAHQAgAFBUlQAwQLGAs0CciJyb3cAAKDQIekkZ2h0QXJyb3cAoNQhZQDlACsCbgBnAAABTFLWAugC5SFmdAABQVLcAuECciJyb3cAAKD4J+kkZ2h0QXJyb3cAoPon6SRnaHRBcnJvdwCg+SdpImdodAAAAUFU9gL7AnIicm93AACg0iFlAGUAAKCoInAAQQIGAwAAAAALA3Iicm93AACg0SFvJHduQXJyb3cAAKDVIWUlcnRpY2FsQmFyAACgJSJuAAADQUJMUlRhJAM2AzoDWgNxA3oDciJyb3cAAKGTIUJVLAMwA2EAcgAAoBMpcCNBcnJvdwAAoPUhciJldmUAEWPlIWZ00gJDAwAASwMAAFIDaSVnaHRWZWN0b3IAAKBQKWUkZVZlY3RvcgAAoF4p5SJjdG9yQqC9IWEAcgAAoFYpaSJnaHQA1AFiAwAAaQNlJGVWZWN0b3IAAKBfKeUiY3RvckKgwSFhAHIAAKBXKWUAZQBBoKQiciJyb3cAAKCnIXIAcgBvAPcAtAIAAWN0gwOHA3IAAOA12J/c8iFvaxBhAAhOVGFjZGZnbG1vcHFzdHV4owOlA6kDsAO/A8IDxgPNA9ID8gP9AwEEFAQeBCAEJQRHAEphSAA7gNAA0EBjAHUAdABlADuAyQDJQIABYWl5ALYDuQO+A/Ihb24aYXIAYwA7gMoAykAtZG8AdAAWYXIAAOA12AjdcgBhAHYAZQA7gMgAyEDlIm1lbnQAoAgiAAFhcNYD2QNjAHIAEmF0AHkAUwLhAwAAAADpA20lYWxsU3F1YXJlAACg+yVlJ3J5U21hbGxTcXVhcmUAAKCrJQABZ3D2A/kDbwBuABhhZgAA4DXYPN3zImlsb26VY3UAAAFhaQYEDgRsAFSgdSppImxkZQAAoEIi7CNpYnJpdW0AoMwhAAFjaRgEGwRyAACgMCFtAACgcyphAJdjbQBsADuAywDLQAABaXApBC0E8yF0cwCgAyLvJG5lbnRpYWxFAKBHIYACY2Zpb3MAPQQ/BEMEXQRyBHkAJGRyAADgNdgJ3WwibGVkAFMCTAQAAAAAVARtJWFsbFNxdWFyZQAAoPwlZSdyeVNtYWxsU3F1YXJlAACgqiVwA2UEAABpBAAAAABtBGYAAOA12D3dwSFsbACgACLyI2llcnRyZgCgMSFjAPIAcQQABkpUYWJjZGZnb3JzdIgEiwSOBJMElwSkBKcEqwStBLIE5QTqBGMAeQADZDuAPgA+QO0hbWFkoJMD3GNyImV2ZQAeYYABZWl5AJ0EoASjBOQhaWwiYXIAYwAcYRNkbwB0ACBhcgAA4DXYCt0AoNkicABmAADgNdg+3eUiYXRlcgADRUZHTFNUvwTIBM8E1QTZBOAEcSJ1YWwATKBlIuUhc3MAoNsidSRsbEVxdWFsAACgZyJyI2VhdGVyAACgoirlIXNzAKB3IuwkYW50RXF1YWwAoH4qaSJsZGUAAKBzImMAcgAA4DXYotwAoGsiAARBYWNmaW9zdfkE/QQFBQgFCwUTBSIFKwVSIkRjeQAqZAABY3QBBQQFZQBrAMdiXmDpIXJjJGFyAACgDCFsJWJlcnRTcGFjZQAAoAsh8AEYBQAAGwVmAACgDSHpJXpvbnRhbExpbmUAoAAlAAFjdCYFKAXyABIF8iFvayZhbQBwAEQBMQU5BW8AdwBuAEgAdQBtAPAAAAFxInVhbAAAoE8iAAdFSk9hY2RmZ21ub3N0dVMFVgVZBVwFYwVtBXAFcwV6BZAFtgXFBckFzQVjAHkAFWTsIWlnMmFjAHkAAWRjAHUAdABlADuAzQDNQAABaXlnBWwFcgBjADuAzgDOQBhkbwB0ADBhcgAAoBEhcgBhAHYAZQA7gMwAzEAAoREhYXB/BYsFAAFjZ4MFhQVyACphaSNuYXJ5SQAAoEghbABpAGUA8wD6AvQBlQUAAKUFZaAsIgABZ3KaBZ4F8iFhbACgKyLzI2VjdGlvbgCgwiJpI3NpYmxlAAABQ1SsBbEFbyJtbWEAAKBjIGkibWVzAACgYiCAAWdwdAC8Bb8FwwVvAG4ALmFmAADgNdhA3WEAmWNjAHIAAKAQIWkibGRlAChh6wHSBQAA1QVjAHkABmRsADuAzwDPQIACY2Zvc3UA4QXpBe0F8gX9BQABaXnlBegFcgBjADRhGWRyAADgNdgN3XAAZgAA4DXYQd3jAfcFAAD7BXIAAOA12KXc8iFjeQhk6yFjeQRkgANISmFjZm9zAAwGDwYSBhUGHQYhBiYGYwB5ACVkYwB5AAxk8CFwYZpjAAFleRkGHAbkIWlsNmEaZHIAAOA12A7dcABmAADgNdhC3WMAcgAA4DXYptyABUpUYWNlZmxtb3N0AD0GQAZDBl4GawZkB2gHcAd0B80H2gdjAHkACWQ7gDwAPECAAmNtbnByAEwGTwZSBlUGWwb1IXRlOWHiIWRhm2NnAACg6ifsI2FjZXRyZgCgEiFyAACgniGAAWFleQBkBmcGagbyIW9uPWHkIWlsO2EbZAABZnNvBjQHdAAABUFDREZSVFVWYXKABp4GpAbGBssG3AYDByEHwQIqBwABbnKEBowGZyVsZUJyYWNrZXQAAKDoJ/Ihb3cAoZAhQlKTBpcGYQByAACg5CHpJGdodEFycm93AKDGIWUjaWxpbmcAAKAII28A9QGqBgAAsgZiJWxlQnJhY2tldAAAoOYnbgDUAbcGAAC+BmUkZVZlY3RvcgAAoGEp5SJjdG9yQqDDIWEAcgAAoFkpbCJvb3IAAKAKI2kiZ2h0AAABQVbSBtcGciJyb3cAAKCUIeUiY3RvcgCgTikAAWVy4AbwBmUAAKGjIkFW5gbrBnIicm93AACgpCHlImN0b3IAoFopaSNhbmdsZQBCorIi+wYAAAAA/wZhAHIAAKDPKXEidWFsAACgtCJwAIABRFRWAAoHEQcYB+8kd25WZWN0b3IAoFEpZSRlVmVjdG9yAACgYCnlImN0b3JCoL8hYQByAACgWCnlImN0b3JCoLwhYQByAACgUilpAGcAaAB0AGEAcgByAG8A9wDMAnMAAANFRkdMU1Q/B0cHTgdUB1gHXwfxJXVhbEdyZWF0ZXIAoNoidSRsbEVxdWFsAACgZiJyI2VhdGVyAACgdiLlIXNzAKChKuwkYW50RXF1YWwAoH0qaSJsZGUAAKByInIAAOA12A/dZaDYIuYjdGFycm93AKDaIWkiZG90AD9hgAFucHcAege1B7kHZwAAAkxSbHKCB5QHmwerB+UhZnQAAUFSiAeNB3Iicm93AACg9SfpJGdodEFycm93AKD3J+kkZ2h0QXJyb3cAoPYn5SFmdAABYXLcAqEHaQBnAGgAdABhAHIAcgBvAPcA5wJpAGcAaAB0AGEAcgByAG8A9wDuAmYAAOA12EPdZQByAAABTFK/B8YHZSRmdEFycm93AACgmSHpJGdodEFycm93AKCYIYABY2h0ANMH1QfXB/IAWgYAoLAh8iFva0FhAKBqIgAEYWNlZmlvc3XpB+wH7gf/BwMICQgOCBEIcAAAoAUpeQAcZAABZGzyB/kHaSR1bVNwYWNlAACgXyBsI2ludHJmAACgMyFyAADgNdgQ3e4jdXNQbHVzAKATInAAZgAA4DXYRN1jAPIA/gecY4AESmFjZWZvc3R1ACEIJAgoCDUIgQiFCDsKQApHCmMAeQAKZGMidXRlAENhgAFhZXkALggxCDQI8iFvbkdh5CFpbEVhHWSAAWdzdwA7CGEIfQjhInRpdmWAAU1UVgBECEwIWQhlJWRpdW1TcGFjZQAAoAsgaABpAAABY25SCFMIawBTAHAAYQBjAOUASwhlAHIAeQBUAGgAaQDuAFQI9CFlZAABR0xnCHUIcgBlAGEAdABlAHIARwByAGUAYQB0AGUA8gDrBGUAcwBzAEwAZQBzAPMA2wdMImluZQAKYHIAAOA12BHdAAJCbnB0jAiRCJkInAhyImVhawAAoGAgwiZyZWFraW5nU3BhY2WgYGYAAKAVIUOq7CqzCMIIzQgAAOcIGwkAAAAAAAAtCQAAbwkAAIcJAACdCcAJGQoAADQKAAFvdbYIvAjuI2dydWVudACgYiJwIkNhcAAAoG0ibyh1YmxlVmVydGljYWxCYXIAAKAmIoABbHF4ANII1wjhCOUibWVudACgCSL1IWFsVKBgImkibGRlAADgQiI4A2kic3RzAACgBCJyI2VhdGVyAACjbyJFRkdMU1T1CPoIAgkJCQ0JFQlxInVhbAAAoHEidSRsbEVxdWFsAADgZyI4A3IjZWF0ZXIAAOBrIjgD5SFzcwCgeSLsJGFudEVxdWFsAOB+KjgDaSJsZGUAAKB1IvUhbXBEASAJJwnvI3duSHVtcADgTiI4A3EidWFsAADgTyI4A2UAAAFmczEJRgn0JFRyaWFuZ2xlQqLqIj0JAAAAAEIJYQByAADgzyk4A3EidWFsAACg7CJzAICibiJFR0xTVABRCVYJXAlhCWkJcSJ1YWwAAKBwInIjZWF0ZXIAAKB4IuUhc3MA4GoiOAPsJGFudEVxdWFsAOB9KjgDaSJsZGUAAKB0IuUic3RlZAABR0x1CX8J8iZlYXRlckdyZWF0ZXIA4KIqOAPlI3NzTGVzcwDgoSo4A/IjZWNlZGVzAKGAIkVTjwmVCXEidWFsAADgryo4A+wkYW50RXF1YWwAoOAiAAFlaaAJqQl2JmVyc2VFbGVtZW50AACgDCLnJWh0VHJpYW5nbGVCousitgkAAAAAuwlhAHIAAODQKTgDcSJ1YWwAAKDtIgABcXXDCeAJdSNhcmVTdQAAAWJwywnVCfMhZXRF4I8iOANxInVhbAAAoOIi5SJyc2V0ReCQIjgDcSJ1YWwAAKDjIoABYmNwAOYJ8AkNCvMhZXRF4IIi0iBxInVhbAAAoIgi4yJlZWRzgKGBIkVTVAD6CQAKBwpxInVhbAAA4LAqOAPsJGFudEVxdWFsAKDhImkibGRlAADgfyI4A+UicnNldEXggyLSIHEidWFsAACgiSJpImxkZQCAoUEiRUZUACIKJwouCnEidWFsAACgRCJ1JGxsRXF1YWwAAKBHImkibGRlAACgSSJlJXJ0aWNhbEJhcgAAoCQiYwByAADgNdip3GkAbABkAGUAO4DRANFAnWMAB0VhY2RmZ21vcHJzdHV2XgphCmgKcgp2CnoKgQqRCpYKqwqtCrsKyArNCuwhaWdSYWMAdQB0AGUAO4DTANNAAAFpeWwKcQpyAGMAO4DUANRAHmRiImxhYwBQYXIAAOA12BLdcgBhAHYAZQA7gNIA0kCAAWFlaQCHCooKjQpjAHIATGFnAGEAqWNjInJvbgCfY3AAZgAA4DXYRt3lI25DdXJseQABRFGeCqYKbyV1YmxlUXVvdGUAAKAcIHUib3RlAACgGCAAoFQqAAFjbLEKtQpyAADgNdiq3GEAcwBoADuA2ADYQGkAbAHACsUKZABlADuA1QDVQGUAcwAAoDcqbQBsADuA1gDWQGUAcgAAAUJQ0wrmCgABYXLXCtoKcgAAoD4gYQBjAAABZWvgCuIKAKDeI2UAdAAAoLQjYSVyZW50aGVzaXMAAKDcI4AEYWNmaGlsb3JzAP0KAwsFCwkLCwsMCxELIwtaC3IjdGlhbEQAAKACInkAH2RyAADgNdgT3WkApmOgY/Ujc01pbnVzsWAAAWlwFQsgC24AYwBhAHIAZQBwAGwAYQBuAOUACgVmAACgGSGAobsqZWlvACoLRQtJC+MiZWRlc4CheiJFU1QANAs5C0ALcSJ1YWwAAKCvKuwkYW50RXF1YWwAoHwiaSJsZGUAAKB+Im0AZQAAoDMgAAFkcE0LUQv1IWN0AKAPIm8jcnRpb24AYaA3ImwAAKAdIgABY2leC2ILcgAA4DXYq9yoYwACVWZvc2oLbwtzC3cLTwBUADuAIgAiQHIAAOA12BTdcABmAACgGiFjAHIAAOA12KzcAAZCRWFjZWZoaW9yc3WPC5MLlwupC7YL2AvbC90LhQyTDJoMowzhIXJyAKAQKUcAO4CuAK5AgAFjbnIAnQugC6ML9SF0ZVRhZwAAoOsncgB0oKAhbAAAoBYpgAFhZXkArwuyC7UL8iFvblhh5CFpbFZhIGR2oBwhZSJyc2UAAAFFVb8LzwsAAWxxwwvIC+UibWVudACgCyL1JGlsaWJyaXVtAKDLIXAmRXF1aWxpYnJpdW0AAKBvKXIAAKAcIW8AoWPnIWh0AARBQ0RGVFVWYewLCgwQDDIMNwxeDHwM9gIAAW5y8Av4C2clbGVCcmFja2V0AACg6SfyIW93AKGSIUJM/wsDDGEAcgAAoOUhZSRmdEFycm93AACgxCFlI2lsaW5nAACgCSNvAPUBFgwAAB4MYiVsZUJyYWNrZXQAAKDnJ24A1AEjDAAAKgxlJGVWZWN0b3IAAKBdKeUiY3RvckKgwiFhAHIAAKBVKWwib29yAACgCyMAAWVyOwxLDGUAAKGiIkFWQQxGDHIicm93AACgpiHlImN0b3IAoFspaSNhbmdsZQBCorMiVgwAAAAAWgxhAHIAAKDQKXEidWFsAACgtSJwAIABRFRWAGUMbAxzDO8kd25WZWN0b3IAoE8pZSRlVmVjdG9yAACgXCnlImN0b3JCoL4hYQByAACgVCnlImN0b3JCoMAhYQByAACgUykAAXB1iQyMDGYAAKAdIe4kZEltcGxpZXMAoHAp6SRnaHRhcnJvdwCg2yEAAWNongyhDHIAAKAbIQCgsSHsJGVEZWxheWVkAKD0KYAGSE9hY2ZoaW1vcXN0dQC/DMgMzAzQDOIM5gwKDQ0NFA0ZDU8NVA1YDQABQ2PDDMYMyCFjeSlkeQAoZEYiVGN5ACxkYyJ1dGUAWmEAorwqYWVpedgM2wzeDOEM8iFvbmBh5CFpbF5hcgBjAFxhIWRyAADgNdgW3e8hcnQAAkRMUlXvDPYM/QwEDW8kd25BcnJvdwAAoJMhZSRmdEFycm93AACgkCHpJGdodEFycm93AKCSIXAjQXJyb3cAAKCRIechbWGjY+EkbGxDaXJjbGUAoBgicABmAADgNdhK3XICHw0AAAAAIg10AACgGiLhIXJlgKGhJUlTVQAqDTINSg3uJXRlcnNlY3Rpb24AoJMidQAAAWJwNw1ADfMhZXRFoI8icSJ1YWwAAKCRIuUicnNldEWgkCJxInVhbAAAoJIibiJpb24AAKCUImMAcgAA4DXYrtxhAHIAAKDGIgACYmNtcF8Nag2ODZANc6DQImUAdABFoNAicSJ1YWwAAKCGIgABY2huDYkNZSJlZHMAgKF7IkVTVAB4DX0NhA1xInVhbAAAoLAq7CRhbnRFcXVhbACgfSJpImxkZQAAoH8iVABoAGEA9ADHCwCgESIAodEiZXOVDZ8NciJzZXQARaCDInEidWFsAACghyJlAHQAAKDRIoAFSFJTYWNmaGlvcnMAtQ27Db8NyA3ODdsN3w3+DRgOHQ4jDk8AUgBOADuA3gDeQMEhREUAoCIhAAFIY8MNxg1jAHkAC2R5ACZkAAFidcwNzQ0JYKRjgAFhZXkA1A3XDdoN8iFvbmRh5CFpbGJhImRyAADgNdgX3QABZWnjDe4N8gHoDQAA7Q3lImZvcmUAoDQiYQCYYwABY27yDfkNayNTcGFjZQAA4F8gCiDTInBhY2UAoAkg7CFkZYChPCJFRlQABw4MDhMOcSJ1YWwAAKBDInUkbGxFcXVhbAAAoEUiaSJsZGUAAKBIInAAZgAA4DXYS93pI3BsZURvdACg2yAAAWN0Jw4rDnIAAOA12K/c8iFva2Zh4QpFDlYOYA5qDgAAbg5yDgAAAAAAAAAAAAB5DnwOqA6zDgAADg8RDxYPGg8AAWNySA5ODnUAdABlADuA2gDaQHIAb6CfIeMhaXIAoEkpcgDjAVsOAABdDnkADmR2AGUAbGEAAWl5Yw5oDnIAYwA7gNsA20AjZGIibGFjAHBhcgAA4DXYGN1yAGEAdgBlADuA2QDZQOEhY3JqYQABZGl/Dp8OZQByAAABQlCFDpcOAAFhcokOiw5yAF9gYQBjAAABZWuRDpMOAKDfI2UAdAAAoLUjYSVyZW50aGVzaXMAAKDdI28AbgBQoMMi7CF1cwCgjiIAAWdwqw6uDm8AbgByYWYAAOA12EzdAARBREVUYWRwc78O0g7ZDuEOBQPqDvMOBw9yInJvdwDCoZEhyA4AAMwOYQByAACgEilvJHduQXJyb3cAAKDFIW8kd25BcnJvdwAAoJUhcSV1aWxpYnJpdW0AAKBuKWUAZQBBoKUiciJyb3cAAKClIW8AdwBuAGEAcgByAG8A9wAQA2UAcgAAAUxS+Q4AD2UkZnRBcnJvdwAAoJYh6SRnaHRBcnJvdwCglyFpAGyg0gNvAG4ApWPpIW5nbmFjAHIAAOA12LDcaSJsZGUAaGFtAGwAO4DcANxAgAREYmNkZWZvc3YALQ8xDzUPNw89D3IPdg97D4AP4SFzaACgqyJhAHIAAKDrKnkAEmThIXNobKCpIgCg5ioAAWVyQQ9DDwCgwSKAAWJ0eQBJD00Paw9hAHIAAKAWIGmgFiDjIWFsAAJCTFNUWA9cD18PZg9hAHIAAKAjIukhbmV8YGUkcGFyYXRvcgAAoFgnaSJsZGUAAKBAItQkaGluU3BhY2UAoAogcgAA4DXYGd1wAGYAAOA12E3dYwByAADgNdix3GQiYXNoAACgqiKAAmNlZm9zAI4PkQ+VD5kPng/pIXJjdGHkIWdlAKDAInIAAOA12BrdcABmAADgNdhO3WMAcgAA4DXYstwAAmZpb3OqD64Prw+0D3IAAOA12BvdnmNwAGYAAOA12E/dYwByAADgNdiz3IAEQUlVYWNmb3N1AMgPyw/OD9EP2A/gD+QP6Q/uD2MAeQAvZGMAeQAHZGMAeQAuZGMAdQB0AGUAO4DdAN1AAAFpedwP3w9yAGMAdmErZHIAAOA12BzdcABmAADgNdhQ3WMAcgAA4DXYtNxtAGwAeGEABEhhY2RlZm9z/g8BEAUQDRAQEB0QIBAkEGMAeQAWZGMidXRlAHlhAAFheQkQDBDyIW9ufWEXZG8AdAB7YfIBFRAAABwQbwBXAGkAZAB0AOgAVAhhAJZjcgAAoCghcABmAACgJCFjAHIAAOA12LXc4QtCEEkQTRAAAGcQbRByEAAAAAAAAAAAeRCKEJcQ8hD9EAAAGxEhETIROREAAD4RYwB1AHQAZQA7gOEA4UByImV2ZQADYYCiPiJFZGl1eQBWEFkQWxBgEGUQAOA+IjMDAKA/InIAYwA7gOIA4kB0AGUAO4C0ALRAMGRsAGkAZwA7gOYA5kByoGEgAOA12B7dcgBhAHYAZQA7gOAA4EAAAWVwfBCGEAABZnCAEIQQ8yF5bQCgNSHoAIMQaABhALFjAAFhcI0QWwAAAWNskRCTEHIAAWFnAACgPypkApwQAAAAALEQAKInImFkc3ajEKcQqRCuEG4AZAAAoFUqAKBcKmwib3BlAACgWCoAoFoqAKMgImVsbXJzersQvRDAEN0Q5RDtEACgpCllAACgICJzAGQAYaAhImEEzhDQENIQ1BDWENgQ2hDcEACgqCkAoKkpAKCqKQCgqykAoKwpAKCtKQCgrikAoK8pdAB2oB8iYgBkoL4iAKCdKQABcHTpEOwQaAAAoCIixWDhIXJyAKB8IwABZ3D1EPgQbwBuAAVhZgAA4DXYUt0Ao0giRWFlaW9wBxEJEQ0RDxESERQRAKBwKuMhaXIAoG8qAKBKImQAAKBLInMAJ2DyIW94ZaBIIvEADhFpAG4AZwA7gOUA5UCAAWN0eQAmESoRKxFyAADgNdi23CpgbQBwAGWgSCLxAPgBaQBsAGQAZQA7gOMA40BtAGwAO4DkAORAAAFjaUERRxFvAG4AaQBuAPQA6AFuAHQAAKARKgAITmFiY2RlZmlrbG5vcHJzdWQRaBGXEZ8RpxGrEdIR1hErEjASexKKEn0RThNbE3oTbwB0AACg7SoAAWNybBGJEWsAAAJjZXBzdBF4EX0RghHvIW5nAKBMInAjc2lsb24A9mNyImltZQAAoDUgaQBtAGWgPSJxAACgzSJ2AY0RkRFlAGUAAKC9ImUAZABnoAUjZQAAoAUjcgBrAHSgtSPiIXJrAKC2IwABb3mjEaYRbgDnAHcRMWTxIXVvAKAeIIACY21wcnQAtBG5Eb4RwRHFEeEhdXPloDUi5ABwInR5dgAAoLApcwDpAH0RbgBvAPUA6gCAAWFodwDLEcwRzhGyYwCgNiHlIWVuAKBsInIAAOA12B/dZwCAA2Nvc3R1dncA4xHyEQUSEhIhEiYSKRKAAWFpdQDpEesR7xHwAKMFcgBjAACg7yVwAACgwyKAAWRwdAD4EfwRABJvAHQAAKAAKuwhdXMAoAEqaSJtZXMAAKACKnECCxIAAAAADxLjIXVwAKAGKmEAcgAAoAUm8iNpYW5nbGUAAWR1GhIeEu8hd24AoL0lcAAAoLMlcCJsdXMAAKAEKmUA5QBCD+UAkg9hInJvdwAAoA0pgAFha28ANhJoEncSAAFjbjoSZRJrAIABbHN0AEESRxJNEm8jemVuZ2UAAKDrKXEAdQBhAHIA5QBcBPIjaWFuZ2xlgKG0JWRscgBYElwSYBLvIXduAKC+JeUhZnQAoMIlaSJnaHQAAKC4JWsAAKAjJLEBbRIAAHUSsgFxEgAAcxIAoJIlAKCRJTQAAKCTJWMAawAAoIglAAFlb38ShxJx4D0A5SD1IWl2AOBhIuUgdAAAoBAjAAJwdHd4kRKVEpsSnxJmAADgNdhT3XSgpSJvAG0AAKClIvQhaWUAoMgiAAZESFVWYmRobXB0dXayEsES0RLgEvcS+xIKExoTHxMjEygTNxMAAkxSbHK5ErsSvRK/EgCgVyUAoFQlAKBWJQCgUyUAolAlRFVkdckSyxLNEs8SAKBmJQCgaSUAoGQlAKBnJQACTFJsctgS2hLcEt4SAKBdJQCgWiUAoFwlAKBZJQCjUSVITFJobHLrEu0S7xLxEvMS9RIAoGwlAKBjJQCgYCUAoGslAKBiJQCgXyVvAHgAAKDJKQACTFJscgITBBMGEwgTAKBVJQCgUiUAoBAlAKAMJQCiACVEVWR1EhMUExYTGBMAoGUlAKBoJQCgLCUAoDQlaSJudXMAAKCfIuwhdXMAoJ4iaSJtZXMAAKCgIgACTFJsci8TMRMzEzUTAKBbJQCgWCUAoBglAKAUJQCjAiVITFJobHJCE0QTRhNIE0oTTBMAoGolAKBhJQCgXiUAoDwlAKAkJQCgHCUAAWV2UhNVE3YA5QD5AGIAYQByADuApgCmQAACY2Vpb2ITZhNqE24TcgAA4DXYt9xtAGkAAKBPIG0A5aA9IogRbAAAoVwAYmh0E3YTAKDFKfMhdWIAoMgnbAF+E4QTbABloCIgdAAAoCIgcAAAoU4iRWWJE4sTAKCuKvGgTyI8BeEMqRMAAN8TABQDFB8UAAAjFDQUAAAAAIUUAAAAAI0UAAAAANcU4xT3FPsUAACIFQAAlhWAAWNwcgCuE7ET1RP1IXRlB2GAoikiYWJjZHMAuxO/E8QTzhPSE24AZAAAoEQqciJjdXAAAKBJKgABYXXIE8sTcAAAoEsqcAAAoEcqbwB0AACgQCoA4CkiAP4AAWVv2RPcE3QAAKBBIO4ABAUAAmFlaXXlE+8T9RP4E/AB6hMAAO0TcwAAoE0qbwBuAA1hZABpAGwAO4DnAOdAcgBjAAlhcABzAHOgTCptAACgUCpvAHQAC2GAAWRtbgAIFA0UEhRpAGwAO4C4ALhAcCJ0eXYAAKCyKXQAAIGiADtlGBQZFKJAcgBkAG8A9ABiAXIAAOA12CDdgAFjZWkAKBQqFDIUeQBHZGMAawBtoBMn4SFyawCgEyfHY3IAAKPLJUVjZWZtcz8UQRRHFHcUfBSAFACgwykAocYCZWxGFEkUcQAAoFciZQBhAlAUAAAAAGAUciJyb3cAAAFsclYUWhTlIWZ0AKC6IWkiZ2h0AACguyGAAlJTYWNkAGgUaRRrFG8UcxSuYACgyCRzAHQAAKCbIukhcmMAoJoi4SFzaACgnSJuImludAAAoBAqaQBkAACg7yrjIWlyAKDCKfUhYnN1oGMmaQB0AACgYybsApMUmhS2FAAAwxRvAG4AZaA6APGgVCKrAG0CnxQAAAAAoxRhAHSgLABAYAChASJmbKcUqRTuABMNZQAAAW14rhSyFOUhbnQAoAEiZQDzANIB5wG6FAAAwBRkoEUibwB0AACgbSpuAPQAzAGAAWZyeQDIFMsUzhQA4DXYVN1vAOQA1wEAgakAO3MeAdMUcgAAoBchAAFhb9oU3hRyAHIAAKC1IXMAcwAAoBcnAAFjdeYU6hRyAADgNdi43AABYnDuFPIUZaDPKgCg0SploNAqAKDSKuQhb3QAoO8igANkZWxwcnZ3AAYVEBUbFSEVRBVlFYQV4SFycgABbHIMFQ4VAKA4KQCgNSlwAhYVAAAAABkVcgAAoN4iYwAAoN8i4SFycnCgtiEAoD0pgKIqImJjZG9zACsVMBU6FT4VQRVyImNhcAAAoEgqAAFhdTQVNxVwAACgRipwAACgSipvAHQAAKCNInIAAKBFKgDgKiIA/gACYWxydksVURVuFXMVcgByAG2gtyEAoDwpeQCAAWV2dwBYFWUVaRVxAHACXxUAAAAAYxVyAGUA4wAXFXUA4wAZFWUAZQAAoM4iZSJkZ2UAAKDPImUAbgA7gKQApEBlI2Fycm93AAABbHJ7FX8V5SFmdACgtiFpImdodAAAoLchZQDkAG0VAAFjaYsVkRVvAG4AaQBuAPQAkwFuAHQAAKAxImwiY3R5AACgLSOACUFIYWJjZGVmaGlqbG9yc3R1d3oAuBW7Fb8V1RXgFegV+RUKFhUWHxZUFlcWZRbFFtsW7xb7FgUXChdyAPIAtAJhAHIAAKBlKQACZ2xyc8YVyhXOFdAV5yFlcgCgICDlIXRoAKA4IfIA9QxoAHagECAAoKMiawHZFd4VYSJyb3cAAKAPKWEA4wBfAgABYXnkFecV8iFvbg9hNGQAoUYhYW/tFfQVAAFnciEC8RVyAACgyiF0InNlcQAAoHcqgAFnbG0A/xUCFgUWO4CwALBAdABhALRjcCJ0eXYAAKCxKQABaXIOFhIW8yFodACgfykA4DXYId1hAHIAAAFschsWHRYAoMMhAKDCIYACYWVnc3YAKBauAjYWOhY+Fm0AAKHEIm9zLhY0Fm4AZABzoMQi9SFpdACgZiZhIm1tYQDdY2kAbgAAoPIiAKH3AGlvQxZRFmQAZQAAgfcAO29KFksW90BuI3RpbWVzAACgxyJuAPgAUBZjAHkAUmRjAG8CXhYAAAAAYhZyAG4AAKAeI28AcAAAoA0jgAJscHR1dwBuFnEWdRaSFp4W7CFhciRgZgAA4DXYVd0AotkCZW1wc30WhBaJFo0WcQBkoFAibwB0AACgUSJpIm51cwAAoDgi7CF1cwCgFCLxInVhcmUAoKEiYgBsAGUAYgBhAHIAdwBlAGQAZwDlANcAbgCAAWFkaAClFqoWtBZyAHIAbwD3APUMbwB3AG4AYQByAHIAbwB3APMA8xVhI3Jwb29uAAABbHK8FsAWZQBmAPQAHBZpAGcAaAD0AB4WYgHJFs8WawBhAHIAbwD3AJILbwLUFgAAAADYFnIAbgAAoB8jbwBwAACgDCOAAWNvdADhFukW7BYAAXJ55RboFgDgNdi53FVkbAAAoPYp8iFvaxFhAAFkcvMW9xZvAHQAAKDxImkA5qC/JVsSAAFhaP8WAhdyAPIANQNhAPIA1wvhIm5nbGUAoKYpAAFjaQ4XEBd5AF9k5yJyYXJyAKD/JwAJRGFjZGVmZ2xtbm9wcXJzdHV4MRc4F0YXWxcyBF4XaRd5F40XrBe0F78X2RcVGCEYLRg1GEAYAAFEbzUXgRZvAPQA+BUAAWNzPBdCF3UAdABlADuA6QDpQPQhZXIAoG4qAAJhaW95TRdQF1YXWhfyIW9uG2FyAGOgViI7gOoA6kDsIW9uAKBVIk1kbwB0ABdhAAFEcmIXZhdvAHQAAKBSIgDgNdgi3XKhmipuF3QXYQB2AGUAO4DoAOhAZKCWKm8AdAAAoJgqgKGZKmlscwCAF4UXhxfuInRlcnMAoOcjAKATIWSglSpvAHQAAKCXKoABYXBzAJMXlheiF2MAcgATYXQAeQBzogUinxcAAAAAoRdlAHQAAKAFInAAMaADIDMBqRerFwCgBCAAoAUgAAFnc7AXsRdLYXAAAKACIAABZ3C4F7sXbwBuABlhZgAA4DXYVt2AAWFscwDFF8sXzxdyAHOg1SJsAACg4yl1AHMAAKBxKmkAAKG1A2x21RfYF28AbgC1Y/VjAAJjc3V24BfoF/0XEBgAAWlv5BdWF3IAYwAAoFYiaQLuFwAAAADwF+0ADQThIW50AAFnbPUX+Rd0AHIAAKCWKuUhc3MAoJUqgAFhZWkAAxgGGAoYbABzAD1gcwB0AACgXyJ2AESgYSJEAACgeCrwImFyc2wAoOUpAAFEYRkYHRhvAHQAAKBTInIAcgAAoHEpgAFjZGkAJxgqGO0XcgAAoC8hbwD0AIwCAAFhaDEYMhi3YzuA8ADwQAABbXI5GD0YbAA7gOsA60BvAACgrCCAAWNpcABGGEgYSxhsACFgcwD0ACwEAAFlb08YVxhjAHQAYQB0AGkAbwDuABoEbgBlAG4AdABpAGEAbADlADME4Ql1GAAAgRgAAIMYiBgAAAAAoRilGAAAqhgAALsYvhjRGAAA1xgnGWwAbABpAG4AZwBkAG8AdABzAGUA8QBlF3kARGRtImFsZQAAoEAmgAFpbHIAjRiRGJ0Y7CFpZwCgA/tpApcYAAAAAJoYZwAAoAD7aQBnAACgBPsA4DXYI93sIWlnAKAB++whaWcA4GYAagCAAWFsdACvGLIYthh0AACgbSZpAGcAAKAC+24AcwAAoLElbwBmAJJh8AHCGAAAxhhmAADgNdhX3QABYWvJGMwYbADsAGsEdqDUIgCg2SphI3J0aW50AACgDSoAAWFv2hgiGQABY3PeGB8ZsQPnGP0YBRkSGRUZAAAdGbID7xjyGPQY9xj5GAAA+xg7gL0AvUAAoFMhO4C8ALxAAKBVIQCgWSEAoFshswEBGQAAAxkAoFQhAKBWIbQCCxkOGQAAAAAQGTuAvgC+QACgVyEAoFwhNQAAoFghtgEZGQAAGxkAoFohAKBdITgAAKBeIWwAAKBEIHcAbgAAoCIjYwByAADgNdi73IAIRWFiY2RlZmdpamxub3JzdHYARhlKGVoZXhlmGWkZkhmWGZkZnRmgGa0ZxhnLGc8Z4BkjGmygZyIAoIwqgAFjbXAAUBlTGVgZ9SF0ZfVhbQBhAOSgswM6FgCghipyImV2ZQAfYQABaXliGWUZcgBjAB1hM2RvAHQAIWGAoWUibHFzAMYEcBl6GfGhZSLOBAAAdhlsAGEAbgD0AN8EgKF+KmNkbACBGYQZjBljAACgqSpvAHQAb6CAKmyggioAoIQqZeDbIgD+cwAAoJQqcgAA4DXYJN3noGsirATtIWVsAKA3IWMAeQBTZIChdyJFYWoApxmpGasZAKCSKgCgpSoAoKQqAAJFYWVztBm2Gb0ZwhkAoGkicABwoIoq8iFveACgiipxoIgq8aCIKrUZaQBtAACg5yJwAGYAAOA12FjdYQB2AOUAYwIAAWNp0xnWGXIAAKAKIW0AAKFzImVs3BneGQCgjioAoJAqAIM+ADtjZGxxco0E6xn0GfgZ/BkBGgABY2nvGfEZAKCnKnIAAKB6Km8AdAAAoNci0CFhcgCglSl1ImVzdAAAoHwqgAJhZGVscwAKGvQZFhrVBCAa8AEPGgAAFBpwAHIAbwD4AFkZcgAAoHgpcQAAAWxxxAQbGmwAZQBzAPMASRlpAO0A5AQAAWVuJxouGnIjdG5lcXEAAOBpIgD+xQAsGgAFQWFiY2Vma29zeUAaQxpmGmoabRqDGocalhrCGtMacgDyAMwCAAJpbG1yShpOGlAaVBpyAHMA8ABxD2YAvWBpAGwA9AASBQABZHJYGlsaYwB5AEpkAKGUIWN3YBpkGmkAcgAAoEgpAKCtIWEAcgAAoA8h6SFyYyVhgAFhbHIAcxp7Gn8a8iF0c3WgZSZpAHQAAKBlJuwhaXAAoCYg4yFvbgCguSJyAADgNdgl3XMAAAFld4wakRphInJvdwAAoCUpYSJyb3cAAKAmKYACYW1vcHIAnxqjGqcauhq+GnIAcgAAoP8h9CFodACgOyJrAAABbHKsGrMaZSRmdGFycm93AACgqSHpJGdodGFycm93AKCqIWYAAOA12Fnd4iFhcgCgFSCAAWNsdADIGswa0BpyAADgNdi93GEAcwDoAGka8iFvaydhAAFicNca2xr1IWxsAKBDIOghZW4AoBAg4Qr2GgAA/RoAAAgbExsaGwAAIRs7GwAAAAA+G2IbmRuVG6sbAACyG80b0htjAHUAdABlADuA7QDtQAChYyBpeQEbBhtyAGMAO4DuAO5AOGQAAWN4CxsNG3kANWRjAGwAO4ChAKFAAAFmcssCFhsA4DXYJt1yAGEAdgBlADuA7ADsQIChSCFpbm8AJxsyGzYbAAFpbisbLxtuAHQAAKAMKnQAAKAtIuYhaW4AoNwpdABhAACgKSHsIWlnM2GAAWFvcABDG1sbXhuAAWNndABJG0sbWRtyACthgAFlbHAAcQVRG1UbaQBuAOUAyAVhAHIA9AByBWgAMWFmAACgtyJlAGQAtWEAoggiY2ZvdGkbbRt1G3kb4SFyZQCgBSFpAG4AdKAeImkAZQAAoN0pZABvAPQAWxsAoisiY2VscIEbhRuPG5QbYQBsAACguiIAAWdyiRuNG2UAcgDzACMQ4wCCG2EicmhrAACgFyryIW9kAKA8KgACY2dwdJ8boRukG6gbeQBRZG8AbgAvYWYAAOA12FrdYQC5Y3UAZQBzAHQAO4C/AL9AAAFjabUbuRtyAADgNdi+3G4AAKIIIkVkc3bCG8QbyBvQAwCg+SJvAHQAAKD1Inag9CIAoPMiaaBiIOwhZGUpYesB1hsAANkbYwB5AFZkbAA7gO8A70AAA2NmbW9zdeYb7hvyG/Ub+hsFHAABaXnqG+0bcgBjADVhOWRyAADgNdgn3eEhdGg3YnAAZgAA4DXYW93jAf8bAAADHHIAAOA12L/c8iFjeVhk6yFjeVRkAARhY2ZnaGpvcxUcGhwiHCYcKhwtHDAcNRzwIXBhdqC6A/BjAAFleR4cIRzkIWlsN2E6ZHIAAOA12CjdciJlZW4AOGFjAHkARWRjAHkAXGRwAGYAAOA12FzdYwByAADgNdjA3IALQUJFSGFiY2RlZmdoamxtbm9wcnN0dXYAXhxtHHEcdRx5HN8cBx0dHTwd3B3tHfEdAR4EHh0eLB5FHrwewx7hHgkfPR9LH4ABYXJ0AGQcZxxpHHIA8gBvB/IAxQLhIWlsAKAbKeEhcnIAoA4pZ6BmIgCgiyphAHIAAKBiKWMJjRwAAJAcAACVHAAAAAAAAAAAAACZHJwcAACmHKgcrRwAANIc9SF0ZTph7SJwdHl2AKC0KXIAYQDuAFoG4iFkYbtjZwAAoegnZGyhHKMcAKCRKeUAiwYAoIUqdQBvADuAqwCrQHIAgKOQIWJmaGxwc3QAuhy/HMIcxBzHHMoczhxmoOQhcwAAoB8pcwAAoB0p6wCyGnAAAKCrIWwAAKA5KWkAbQAAoHMpbAAAoKIhAKGrKmFl1hzaHGkAbAAAoBkpc6CtKgDgrSoA/oABYWJyAOUc6RztHHIAcgAAoAwpcgBrAACgcicAAWFr8Rz4HGMAAAFla/Yc9xx7YFtgAAFlc/wc/hwAoIspbAAAAWR1Ax0FHQCgjykAoI0pAAJhZXV5Dh0RHRodHB3yIW9uPmEAAWRpFR0YHWkAbAA8YewAowbiAPccO2QAAmNxcnMkHScdLB05HWEAAKA2KXUAbwDyoBwgqhEAAWR1MB00HeghYXIAoGcpcyJoYXIAAKBLKWgAAKCyIQCiZCJmZ3FzRB1FB5Qdnh10AIACYWhscnQATh1WHWUdbB2NHXIicm93AHSgkCFhAOkAzxxhI3Jwb29uAAABZHVeHWId7yF3bgCgvSFwAACgvCHlJGZ0YXJyb3dzAKDHIWkiZ2h0AIABYWhzAHUdex2DHXIicm93APOglCGdBmEAcgBwAG8AbwBuAPMAzgtxAHUAaQBnAGEAcgByAG8A9wBlGugkcmVldGltZXMAoMsi8aFkIk0HAACaHWwAYQBuAPQAXgcAon0qY2Rnc6YdqR2xHbcdYwAAoKgqbwB0AG+gfypyoIEqAKCDKmXg2iIA/nMAAKCTKoACYWRlZ3MAwB3GHcod1h3ZHXAAcAByAG8A+ACmHG8AdAAAoNYicQAAAWdxzx3SHXQA8gBGB2cAdADyAHQcdADyAFMHaQDtAGMHgAFpbHIA4h3mHeod8yFodACgfClvAG8A8gDKBgDgNdgp3UWgdiIAoJEqYQH1Hf4dcgAAAWR1YB35HWygvCEAoGopbABrAACghCVjAHkAWWQAomoiYWNodAweDx4VHhkecgDyAGsdbwByAG4AZQDyAGAW4SFyZACgaylyAGkAAKD6JQABaW8hHiQe5CFvdEBh9SFzdGGgsCPjIWhlAKCwIwACRWFlczMeNR48HkEeAKBoInAAcKCJKvIhb3gAoIkqcaCHKvGghyo0HmkAbQAAoOYiAARhYm5vcHR3elIeXB5fHoUelh6mHqsetB4AAW5yVh5ZHmcAAKDsJ3IAAKD9IXIA6wCwBmcAgAFsbXIAZh52Hnse5SFmdAABYXKIB2weaQBnAGgAdABhAHIAcgBvAPcAkwfhInBzdG8AoPwnaQBnAGgAdABhAHIAcgBvAPcAmgdwI2Fycm93AAABbHKNHpEeZQBmAPQAxhxpImdodAAAoKwhgAFhZmwAnB6fHqIecgAAoIUpAOA12F3ddQBzAACgLSppIm1lcwAAoDQqYQGvHrMecwB0AACgFyLhAIoOZaHKJbkeRhLuIWdlAKDKJWEAcgBsoCgAdAAAoJMpgAJhY2htdADMHs8e1R7bHt0ecgDyAJ0GbwByAG4AZQDyANYWYQByAGSgyyEAoG0pAKAOIHIAaQAAoL8iAANhY2hpcXTrHu8e1QfzHv0eBh/xIXVvAKA5IHIAAOA12MHcbQDloXIi+h4AAPweAKCNKgCgjyoAAWJ19xwBH28AcqAYIACgGiDyIW9rQmEAhDwAO2NkaGlscXJCBhcfxh0gHyQfKB8sHzEfAAFjaRsfHR8AoKYqcgAAoHkqcgBlAOUAkx3tIWVzAKDJIuEhcnIAoHYpdSJlc3QAAKB7KgABUGk1HzkfYQByAACglillocMlAgdfEnIAAAFkdUIfRx9zImhhcgAAoEop6CFhcgCgZikAAWVuTx9WH3IjdG5lcXEAAOBoIgD+xQBUHwAHRGFjZGVmaGlsbm9wc3VuH3Ifoh+rH68ftx+7H74f5h/uH/MfBwj/HwsgxCFvdACgOiIAAmNscHJ5H30fiR+eH3IAO4CvAK9AAAFldIEfgx8AoEImZaAgJ3MAZQAAoCAnc6CmIXQAbwCAoaYhZGx1AJQfmB+cH28AdwDuAHkDZQBmAPQA6gbwAOkO6yFlcgCgriUAAW95ph+qH+0hbWEAoCkqPGThIXNoAKAUIOElc3VyZWRhbmdsZQCgISJyAADgNdgq3W8AAKAnIYABY2RuAMQfyR/bH3IAbwA7gLUAtUBhoiMi0B8AANMf1x9zAPQAKxFpAHIAAKDwKm8AdAA7gLcAt0B1AHMA4qESIh4TAADjH3WgOCIAoCoqYwHqH+0fcAAAoNsq8gB+GnAAbAB1APMACAgAAWRw9x/7H+UhbHMAoKciZgAA4DXYXt0AAWN0AyAHIHIAAOA12MLc8CFvcwCgPiJsobwDECAVIPQiaW1hcACguCJhAPAAEyAADEdMUlZhYmNkZWZnaGlqbG1vcHJzdHV2dzwgRyBmIG0geSCqILgg2iDeIBEhFSEyIUMhTSFQIZwhnyHSIQAiIyKLIrEivyIUIwABZ3RAIEMgAODZIjgD9uBrItIgBwmAAWVsdABNIF8gYiBmAHQAAAFhclMgWCByInJvdwAAoM0h6SRnaHRhcnJvdwCgziEA4NgiOAP24Goi0iBfCekkZ2h0YXJyb3cAoM8hAAFEZHEgdSDhIXNoAKCvIuEhc2gAoK4igAJiY25wdACCIIYgiSCNIKIgbABhAACgByL1IXRlRGFnAADgICLSIACiSSJFaW9wlSCYIJwgniAA4HAqOANkAADgSyI4A3MASWFyAG8A+AAyCnUAcgBhoG4mbADzoG4mmwjzAa8gAACzIHAAO4CgAKBAbQBwAOXgTiI4AyoJgAJhZW91eQDBIMogzSDWINkg8AHGIAAAyCAAoEMqbwBuAEhh5CFpbEZhbgBnAGSgRyJvAHQAAOBtKjgDcAAAoEIqPWThIXNoAKATIACjYCJBYWRxc3jpIO0g+SD+IAIhDCFyAHIAAKDXIXIAAAFocvIg9SBrAACgJClvoJch9wAGD28AdAAA4FAiOAN1AGkA9gC7CAABZWkGIQohYQByAACgKCntAN8I6SFzdPOgBCLlCHIAAOA12CvdAAJFZXN0/wgcISshLiHxoXEiIiEAABMJ8aFxIgAJAAAnIWwAYQBuAPQAEwlpAO0AGQlyoG8iAKBvIoABQWFwADghOyE/IXIA8gBeIHIAcgAAoK4hYQByAACg8ipzogsiSiEAAAAAxwtkoPwiAKD6ImMAeQBaZIADQUVhZGVzdABcIV8hYiFmIWkhkyGWIXIA8gBXIADgZiI4A3IAcgAAoJohcgAAoCUggKFwImZxcwBwIYQhjiF0AAABYXJ1IXohcgByAG8A9wBlIWkAZwBoAHQAYQByAHIAbwD3AD4h8aFwImAhAACKIWwAYQBuAPQAZwlz4H0qOAMAoG4iaQDtAG0JcqBuImkA5aDqIkUJaQDkADoKAAFwdKMhpyFmAADgNdhf3YCBrAA7aW4AriGvIcchrEBuAIChCSJFZHYAtyG6Ib8hAOD5IjgDbwB0AADg9SI4A+EB1gjEIcYhAKD3IgCg9iJpAHagDCLhAagJzyHRIQCg/iIAoP0igAFhb3IA2CHsIfEhcgCAoSYiYXN0AOAh5SHpIWwAbABlAOwAywhsAADg/SrlIADgAiI4A2wiaW50AACgFCrjoYAi9yEAAPohdQDlAJsJY+CvKjgDZaCAIvEAkwkAAkFhaXQHIgoiFyIeInIA8gBsIHIAcgAAoZshY3cRIhQiAOAzKTgDAOCdITgDZyRodGFycm93AACgmyFyAGkA5aDrIr4JgANjaGltcHF1AC8iPCJHIpwhTSJQIloigKGBImNlcgA2Iv0JOSJ1AOUABgoA4DXYw9zvIXJ0bQKdIQAAAABEImEAcgDhAOEhbQBloEEi8aBEIiYKYQDyAMsIcwB1AAABYnBWIlgi5QDUCeUA3wmAAWJjcABgInMieCKAoYQiRWVzAGci7glqIgDgxSo4A2UAdABl4IIi0iBxAPGgiCJoImMAZaCBIvEA/gmAoYUiRWVzAH8iFgqCIgDgxio4A2UAdABl4IMi0iBxAPGgiSKAIgACZ2lscpIilCKaIpwi7AAMCWwAZABlADuA8QDxQOcAWwlpI2FuZ2xlAAABbHKkIqoi5SFmdGWg6iLxAEUJaSJnaHQAZaDrIvEAvgltoL0DAKEjAGVzuCK8InIAbwAAoBYhcAAAoAcggARESGFkZ2lscnMAziLSItYi2iLeIugi7SICIw8j4SFzaACgrSLhIXJyAKAEKXAAAOBNItIg4SFzaACgrCIAAWV04iLlIgDgZSLSIADgPgDSIG4iZmluAACg3imAAUFldADzIvci+iJyAHIAAKACKQDgZCLSIHLgPADSIGkAZQAA4LQi0iAAAUF0BiMKI3IAcgAAoAMp8iFpZQDgtSLSIGkAbQAA4Dwi0iCAAUFhbgAaIx4jKiNyAHIAAKDWIXIAAAFociMjJiNrAACgIylvoJYh9wD/DuUhYXIAoCcpUxJqFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVCMAAF4jaSN/I4IjjSOeI8AUAAAAAKYjwCMAANoj3yMAAO8jHiQvJD8kRCQAAWNzVyNsFHUAdABlADuA8wDzQAABaXlhI2cjcgBjoJoiO4D0APRAPmSAAmFiaW9zAHEjdCN3I3EBeiNzAOgAdhTsIWFjUWF2AACgOCrvIWxkAKC8KewhaWdTYQABY3KFI4kjaQByAACgvykA4DXYLN1vA5QjAAAAAJYjAACcI24A22JhAHYAZQA7gPIA8kAAoMEpAAFibaEjjAphAHIAAKC1KQACYWNpdKwjryO6I70jcgDyAFkUAAFpcrMjtiNyAACgvinvIXNzAKC7KW4A5QDZCgCgwCmAAWFlaQDFI8gjyyNjAHIATWFnAGEAyWOAAWNkbgDRI9Qj1iPyIW9uv2MAoLYpdQDzAHgBcABmAADgNdhg3YABYWVsAOQj5yPrI3IAAKC3KXIAcAAAoLkpdQDzAHwBAKMoImFkaW9zdvkj/CMPJBMkFiQbJHIA8gBeFIChXSplZm0AAyQJJAwkcgBvoDQhZgAAoDQhO4CqAKpAO4C6ALpA5yFvZgCgtiJyAACgVipsIm9wZQAAoFcqAKBbKoABY2xvACMkJSQrJPIACCRhAHMAaAA7gPgA+EBsAACgmCJpAGwBMyQ4JGQAZQA7gPUA9UBlAHMAYaCXInMAAKA2Km0AbAA7gPYA9kDiIWFyAKA9I+EKXiQAAHokAAB8JJQkAACYJKkkAAAAALUkEQsAAPAkAAAAAAQleiUAAIMlcgCAoSUiYXN0AGUkbyQBCwCBtgA7bGokayS2QGwAZQDsABgDaQJ1JAAAAAB4JG0AAKDzKgCg/Sp5AD9kcgCAAmNpbXB0AIUkiCSLJJkSjyRuAHQAJWBvAGQALmBpAGwAAKAwIOUhbmsAoDEgcgAA4DXYLd2AAWltbwCdJKAkpCR2oMYD1WNtAGEA9AD+B24AZQAAoA4m9KHAA64kAAC0JGMjaGZvcmsAAKDUItZjAAFhdbgkxCRuAAABY2u9JMIkawBooA8hAKAOIfYAaRpzAACkKwBhYmNkZW1zdNMkIRPXJNsk4STjJOck6yTjIWlyAKAjKmkAcgAAoCIqAAFvdYsW3yQAoCUqAKByKm4AO4CxALFAaQBtAACgJip3AG8AAKAnKoABaXB1APUk+iT+JO4idGludACgFSpmAADgNdhh3W4AZAA7gKMAo0CApHoiRWFjZWlub3N1ABMlFSUYJRslTCVRJVklSSV1JQCgsypwAACgtyp1AOUAPwtjoK8qgKJ6ImFjZW5zACclLSU0JTYlSSVwAHAAcgBvAPgAFyV1AHIAbAB5AGUA8QA/C/EAOAuAAWFlcwA8JUElRSXwInByb3gAoLkqcQBxAACgtSppAG0AAKDoImkA7QBEC20AZQDzoDIgIguAAUVhcwBDJVclRSXwAEAlgAFkZnAATwtfJXElgAFhbHMAZSVpJW0l7CFhcgCgLiPpIW5lAKASI/UhcmYAoBMjdKAdIu8AWQvyIWVsAKCwIgABY2l9JYElcgAA4DXYxdzIY24iY3NwAACgCCAAA2Zpb3BzdZElKxuVJZolnyWkJXIAAOA12C7dcABmAADgNdhi3XIiaW1lAACgVyBjAHIAAOA12MbcgAFhZW8AqiW6JcAldAAAAWVpryW2JXIAbgBpAG8AbgDzABkFbgB0AACgFipzAHQAZaA/APEACRj0AG0LgApBQkhhYmNkZWZoaWxtbm9wcnN0dXgA4yXyJfYl+iVpJpAmpia9JtUm5ib4JlonaCdxJ3UnnietJ7EnyCfiJ+cngAFhcnQA6SXsJe4lcgDyAJkM8gD6AuEhaWwAoBwpYQByAPIA3BVhAHIAAKBkKYADY2RlbnFydAAGJhAmEyYYJiYmKyZaJgABZXUKJg0mAOA9IjEDdABlAFVhaQDjACAN7SJwdHl2AKCzKWcAgKHpJ2RlbAAgJiImJCYAoJIpAKClKeUA9wt1AG8AO4C7ALtAcgAApZIhYWJjZmhscHN0dz0mQCZFJkcmSiZMJk4mUSZVJlgmcAAAoHUpZqDlIXMAAKAgKQCgMylzAACgHinrALka8ACVHmwAAKBFKWkAbQAAoHQpbAAAoKMhAKCdIQABYWleJmImaQBsAACgGilvAG6gNiJhAGwA8wB2C4ABYWJyAG8mciZ2JnIA8gAvEnIAawAAoHMnAAFha3omgSZjAAABZWt/JoAmfWBdYAABZXOFJocmAKCMKWwAAAFkdYwmjiYAoI4pAKCQKQACYWV1eZcmmiajJqUm8iFvbllhAAFkaZ4moSZpAGwAV2HsAA8M4gCAJkBkAAJjbHFzrSawJrUmuiZhAACgNylkImhhcgAAoGkpdQBvAPKgHSCjAWgAAKCzIYABYWNnAMMm0iaUC2wAgKEcIWlwcwDLJs4migxuAOUAoAxhAHIA9ADaC3QAAKCtJYABaWxyANsm3ybjJvMhaHQAoH0pbwBvAPIANgwA4DXYL90AAWFv6ib1JnIAAAFkde8m8SYAoMEhbKDAIQCgbCl2oMED8WOAAWducwD+Jk4nUCdoAHQAAANhaGxyc3QKJxInISc1Jz0nRydyInJvdwB0oJIhYQDpAFYmYSNycG9vbgAAAWR1GiceJ28AdwDuAPAmcAAAoMAh5SFmdAABYWgnJy0ncgByAG8AdwDzAAkMYQByAHAAbwBvAG4A8wATBGklZ2h0YXJyb3dzAACgySFxAHUAaQBnAGEAcgByAG8A9wBZJugkcmVldGltZXMAoMwiZwDaYmkAbgBnAGQAbwB0AHMAZQDxABwYgAFhaG0AYCdjJ2YncgDyAAkMYQDyABMEAKAPIG8idXN0AGGgsSPjIWhlAKCxI+0haWQAoO4qAAJhYnB0fCeGJ4knmScAAW5ygCeDJ2cAAKDtJ3IAAKD+IXIA6wAcDIABYWZsAI8nkieVJ3IAAKCGKQDgNdhj3XUAcwAAoC4qaSJtZXMAAKA1KgABYXCiJ6gncgBnoCkAdAAAoJQp7yJsaW50AKASKmEAcgDyADwnAAJhY2hxuCe8J6EMwCfxIXVvAKA6IHIAAOA12MfcAAFidYAmxCdvAPKgGSCoAYABaGlyAM4n0ifWJ3IAZQDlAE0n7SFlcwCgyiJpAIChuSVlZmwAXAxjEt4n9CFyaQCgzinsInVoYXIAoGgpAKAeIWENBSgJKA0oSyhVKIYoAACLKLAoAAAAAOMo5ygAABApJCkxKW0pcSmHKaYpAACYKgAAAACxKmMidXRlAFthcQB1AO8ABR+ApHsiRWFjZWlucHN5ABwoHignKCooLygyKEEoRihJKACgtCrwASMoAAAlKACguCpvAG4AYWF1AOUAgw1koLAqaQBsAF9hcgBjAF1hgAFFYXMAOCg6KD0oAKC2KnAAAKC6KmkAbQAAoOki7yJsaW50AKATKmkA7QCIDUFkbwB0AGKixSKRFgAAAABTKACgZiqAA0FhY21zdHgAYChkKG8ocyh1KHkogihyAHIAAKDYIXIAAAFocmkoayjrAJAab6CYIfcAzAd0ADuApwCnQGkAO2D3IWFyAKApKW0AAAFpbn4ozQBuAHUA8wDOAHQAAKA2J3IA7+A12DDdIxkAAmFjb3mRKJUonSisKHIAcAAAoG8mAAFoeZkonChjAHkASWRIZHIAdABtAqUoAAAAAKgoaQDkAFsPYQByAGEA7ABsJDuArQCtQAABZ22zKLsobQBhAAChwwNmdroouijCY4CjPCJkZWdsbnByAMgozCjPKNMo1yjaKN4obwB0AACgairxoEMiCw5FoJ4qAKCgKkWgnSoAoJ8qZQAAoEYi7CF1cwCgJCrhIXJyAKByKWEAcgDyAPwMAAJhZWl07Sj8KAEpCCkAAWxz8Sj4KGwAcwBlAHQAbQDpAH8oaABwAACgMyrwImFyc2wAoOQpAAFkbFoPBSllAACgIyNloKoqc6CsKgDgrCoA/oABZmxwABUpGCkfKfQhY3lMZGKgLwBhoMQpcgAAoD8jZgAA4DXYZN1hAAABZHIoKRcDZQBzAHWgYCZpAHQAAKBgJoABY3N1ADYpRilhKQABYXU6KUApcABzoJMiAOCTIgD+cABzoJQiAOCUIgD+dQAAAWJwSylWKQChjyJlcz4NUCllAHQAZaCPIvEAPw0AoZAiZXNIDVspZQB0AGWgkCLxAEkNAKGhJWFmZilbBHIAZQFrKVwEAKChJWEAcgDyAAMNAAJjZW10dyl7KX8pgilyAADgNdjI3HQAbQDuAM4AaQDsAAYpYQByAOYAVw0AAWFyiimOKXIA5qAGJhESAAFhbpIpoylpImdodAAAAWVwmSmgKXAAcwBpAGwAbwDuANkXaADpAKAkcwCvYIACYmNtbnAArin8KY4NJSooKgCkgiJFZGVtbnByc7wpvinCKcgpzCnUKdgp3CkAoMUqbwB0AACgvSpkoIYibwB0AACgwyr1IWx0AKDBKgABRWXQKdIpAKDLKgCgiiLsIXVzAKC/KuEhcnIAoHkpgAFlaXUA4inxKfQpdAAAoYIiZW7oKewpcQDxoIYivSllAHEA8aCKItEpbQAAoMcqAAFicPgp+ikAoNUqAKDTKmMAgKJ7ImFjZW5zAAcqDSoUKhYqRihwAHAAcgBvAPgAIyh1AHIAbAB5AGUA8QCDDfEAfA2AAWFlcwAcKiIqPShwAHAAcgBvAPgAPChxAPEAOShnAACgaiYApoMiMTIzRWRlaGxtbnBzPCo/KkIqRSpHKlIqWCpjKmcqaypzKncqO4C5ALlAO4CyALJAO4CzALNAAKDGKgABb3NLKk4qdAAAoL4qdQBiAACg2CpkoIcibwB0AACgxCpzAAABb3VdKmAqbAAAoMknYgAAoNcq4SFycgCgeyn1IWx0AKDCKgABRWVvKnEqAKDMKgCgiyLsIXVzAKDAKoABZWl1AH0qjCqPKnQAAKGDImVugyqHKnEA8aCHIkYqZQBxAPGgiyJwKm0AAKDIKgABYnCTKpUqAKDUKgCg1iqAAUFhbgCdKqEqrCpyAHIAAKDZIXIAAAFocqYqqCrrAJUab6CZIfcAxQf3IWFyAKAqKWwAaQBnADuA3wDfQOELzyrZKtwq6SrsKvEqAAD1KjQrAAAAAAAAAAAAAEwrbCsAAHErvSsAAAAAAADRK3IC1CoAAAAA2CrnIWV0AKAWI8RjcgDrAOUKgAFhZXkA4SrkKucq8iFvbmVh5CFpbGNhQmRvAPQAIg5sInJlYwAAoBUjcgAA4DXYMd0AAmVpa2/7KhIrKCsuK/IBACsAAAkrZQAAATRm6g0EK28AcgDlAOsNYQBzorgDECsAAAAAEit5AG0A0WMAAWNuFislK2sAAAFhcxsrIStwAHAAcgBvAPgAFw5pAG0AAKA8InMA8AD9DQABYXMsKyEr8AAXDnIAbgA7gP4A/kDsATgrOyswG2QA5QBnAmUAcwCAgdcAO2JkAEMrRCtJK9dAYaCgInIAAKAxKgCgMCqAAWVwcwBRK1MraSvhAAkh4qKkIlsrXysAAAAAYytvAHQAAKA2I2kAcgAAoPEqb+A12GXdcgBrAACg2irhAHgociJpbWUAAKA0IIABYWlwAHYreSu3K2QA5QC+DYADYWRlbXBzdACFK6MrmiunK6wrsCuzK24iZ2xlAACitSVkbHFykCuUK5ornCvvIXduAKC/JeUhZnRloMMl8QACBwCgXCJpImdodABloLkl8QBdDG8AdAAAoOwlaSJudXMAAKA6KuwhdXMAoDkqYgAAoM0p6SFtZQCgOyrlInppdW0AoOIjgAFjaHQAwivKK80rAAFyecYrySsA4DXYydxGZGMAeQBbZPIhb2tnYQABaW/UK9creAD0ANERaCJlYWQAAAFsct4r5ytlAGYAdABhAHIAcgBvAPcAXQbpJGdodGFycm93AKCgIQAJQUhhYmNkZmdobG1vcHJzdHV3CiwNLBEsHSwnLDEsQCxLLFIsYix6LIQsjyzLLOgs7Sz/LAotcgDyAAkDYQByAACgYykAAWNyFSwbLHUAdABlADuA+gD6QPIACQ1yAOMBIywAACUseQBeZHYAZQBtYQABaXkrLDAscgBjADuA+wD7QENkgAFhYmgANyw6LD0scgDyANEO7CFhY3FhYQDyAOAOAAFpckQsSCzzIWh0AKB+KQDgNdgy3XIAYQB2AGUAO4D5APlAYQFWLF8scgAAAWxyWixcLACgvyEAoL4hbABrAACggCUAAWN0Zix2LG8CbCwAAAAAcyxyAG4AZaAcI3IAAKAcI28AcAAAoA8jcgBpAACg+CUAAWFsfiyBLGMAcgBrYTuAqACoQAABZ3CILIssbwBuAHNhZgAA4DXYZt0AA2FkaGxzdZksniynLLgsuyzFLHIAcgBvAPcACQ1vAHcAbgBhAHIAcgBvAPcA2A5hI3Jwb29uAAABbHKvLLMsZQBmAPQAWyxpAGcAaAD0AF0sdQDzAKYOaQAAocUDaGzBLMIs0mNvAG4AxWPwI2Fycm93cwCgyCGAAWNpdADRLOEs5CxvAtcsAAAAAN4scgBuAGWgHSNyAACgHSNvAHAAAKAOI24AZwBvYXIAaQAAoPklYwByAADgNdjK3IABZGlyAPMs9yz6LG8AdAAAoPAi7CFkZWlhaQBmoLUlAKC0JQABYW0DLQYtcgDyAMosbAA7gPwA/EDhIm5nbGUAoKcpgAdBQkRhY2RlZmxub3Byc3oAJy0qLTAtNC2bLZ0toS2/LcMtxy3TLdgt3C3gLfwtcgDyABADYQByAHag6CoAoOkqYQBzAOgA/gIAAW5yOC08LechcnQAoJwpgANla25wcnN0AJkpSC1NLVQtXi1iLYItYQBwAHAA4QAaHG8AdABoAGkAbgDnAKEXgAFoaXIAoSmzJFotbwBwAPQAdCVooJUh7wD4JgABaXVmLWotZwBtAOEAuygAAWJwbi14LXMjZXRuZXEAceCKIgD+AODLKgD+cyNldG5lcQBx4IsiAP4A4MwqAP4AAWhyhi2KLWUAdADhABIraSNhbmdsZQAAAWxyki2WLeUhZnQAoLIiaSJnaHQAAKCzInkAMmThIXNoAKCiIoABZWxyAKcttC24LWKiKCKuLQAAAACyLWEAcgAAoLsicQAAoFoi7CFpcACg7iIAAWJ0vC1eD2EA8gBfD3IAAOA12DPddAByAOkAlS1zAHUAAAFicM0t0C0A4IIi0iAA4IMi0iBwAGYAAOA12GfdcgBvAPAAWQt0AHIA6QCaLQABY3XkLegtcgAA4DXYy9wAAWJw7C30LW4AAAFFZXUt8S0A4IoiAP5uAAABRWV/LfktAOCLIgD+6SJnemFnAKCaKYADY2Vmb3BycwANLhAuJS4pLiMuLi40LukhcmN1YQABZGkULiEuAAFiZxguHC5hAHIAAKBfKmUAcaAnIgCgWSLlIXJwAKAYIXIAAOA12DTdcABmAADgNdho3WWgQCJhAHQA6ABqD2MAcgAA4DXYzNzjCuQRUC4AAFQuAABYLmIuAAAAAGMubS5wLnQuAAAAAIguki4AAJouJxIqEnQAcgDpAB0ScgAA4DXYNd0AAUFhWy5eLnIA8gDnAnIA8gCTB75jAAFBYWYuaS5yAPIA4AJyAPIAjAdhAPAAeh5pAHMAAKD7IoABZHB0APgReS6DLgABZmx9LoAuAOA12GnddQDzAP8RaQBtAOUABBIAAUFhiy6OLnIA8gDuAnIA8gCaBwABY3GVLgoScgAA4DXYzdwAAXB0nS6hLmwAdQDzACUScgDpACASAARhY2VmaW9zdbEuvC7ELsguzC7PLtQu2S5jAAABdXm2LrsudABlADuA/QD9QE9kAAFpecAuwy5yAGMAd2FLZG4AO4ClAKVAcgAA4DXYNt1jAHkAV2RwAGYAAOA12GrdYwByAADgNdjO3AABY23dLt8ueQBOZGwAO4D/AP9AAAVhY2RlZmhpb3N38y73Lv8uAi8MLxAvEy8YLx0vIi9jInV0ZQB6YQABYXn7Lv4u8iFvbn5hN2RvAHQAfGEAAWV0Bi8KL3QAcgDmAB8QYQC2Y3IAAOA12DfdYwB5ADZk5yJyYXJyAKDdIXAAZgAA4DXYa91jAHIAAOA12M/cAAFqbiYvKC8AoA0gagAAoAwg"),Ky}var Xy={},Vue;function Gue(){if(Vue)return Xy;Vue=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.xmlDecodeTree=void 0;const t=$2e();return Xy.xmlDecodeTree=(0,t.decodeBase64)("AAJhZ2xxBwARABMAFQBtAg0AAAAAAA8AcAAmYG8AcwAnYHQAPmB0ADxg9SFvdCJg"),Xy}var Jy={},Hue;function gut(){if(Hue)return Jy;Hue=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.BinTrieFlags=void 0;var t;return function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.FLAG13=8192]="FLAG13",e[e.BRANCH_LENGTH=8064]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(t||(Jy.BinTrieFlags=t={})),Jy}var kue;function Z2e(){return kue||(kue=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xmlDecodeTree=t.htmlDecodeTree=t.replaceCodePoint=t.fromCodePoint=t.decodeCodePoint=t.EntityDecoder=t.DecodingMode=void 0,t.determineBranch=_,t.decodeHTML=y,t.decodeHTMLAttribute=v,t.decodeHTMLStrict=A,t.decodeXML=T;const e=jue(),r=Uue(),n=Gue(),i=gut();var a;(function(F){F[F.NUM=35]="NUM",F[F.SEMI=59]="SEMI",F[F.EQUALS=61]="EQUALS",F[F.ZERO=48]="ZERO",F[F.NINE=57]="NINE",F[F.LOWER_A=97]="LOWER_A",F[F.LOWER_F=102]="LOWER_F",F[F.LOWER_X=120]="LOWER_X",F[F.LOWER_Z=122]="LOWER_Z",F[F.UPPER_A=65]="UPPER_A",F[F.UPPER_F=70]="UPPER_F",F[F.UPPER_Z=90]="UPPER_Z"})(a||(a={}));const s=32;function o(F){return F>=a.ZERO&&F<=a.NINE}function c(F){return F>=a.UPPER_A&&F<=a.UPPER_F||F>=a.LOWER_A&&F<=a.LOWER_F}function u(F){return F>=a.UPPER_A&&F<=a.UPPER_Z||F>=a.LOWER_A&&F<=a.LOWER_Z||o(F)}function l(F){return F===a.EQUALS||u(F)}var d;(function(F){F[F.EntityStart=0]="EntityStart",F[F.NumericStart=1]="NumericStart",F[F.NumericDecimal=2]="NumericDecimal",F[F.NumericHex=3]="NumericHex",F[F.NamedEntity=4]="NamedEntity"})(d||(d={}));var f;(function(F){F[F.Legacy=0]="Legacy",F[F.Strict=1]="Strict",F[F.Attribute=2]="Attribute"})(f||(t.DecodingMode=f={}));class h{constructor(N,R,C){this.decodeTree=N,this.emitCodePoint=R,this.errors=C,this.state=d.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict,this.runConsumed=0}startEntity(N){this.decodeMode=N,this.state=d.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1,this.runConsumed=0}write(N,R){switch(this.state){case d.EntityStart:return N.charCodeAt(R)===a.NUM?(this.state=d.NumericStart,this.consumed+=1,this.stateNumericStart(N,R+1)):(this.state=d.NamedEntity,this.stateNamedEntity(N,R));case d.NumericStart:return this.stateNumericStart(N,R);case d.NumericDecimal:return this.stateNumericDecimal(N,R);case d.NumericHex:return this.stateNumericHex(N,R);case d.NamedEntity:return this.stateNamedEntity(N,R)}}stateNumericStart(N,R){return R>=N.length?-1:(N.charCodeAt(R)|s)===a.LOWER_X?(this.state=d.NumericHex,this.consumed+=1,this.stateNumericHex(N,R+1)):(this.state=d.NumericDecimal,this.stateNumericDecimal(N,R))}stateNumericHex(N,R){for(;R<N.length;){const C=N.charCodeAt(R);if(o(C)||c(C)){const M=C<=a.NINE?C-a.ZERO:(C|s)-a.LOWER_A+10;this.result=this.result*16+M,this.consumed++,R++}else return this.emitNumericEntity(C,3)}return-1}stateNumericDecimal(N,R){for(;R<N.length;){const C=N.charCodeAt(R);if(o(C))this.result=this.result*10+(C-a.ZERO),this.consumed++,R++;else return this.emitNumericEntity(C,2)}return-1}emitNumericEntity(N,R){var C;if(this.consumed<=R)return(C=this.errors)===null||C===void 0||C.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(N===a.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,e.replaceCodePoint)(this.result),this.consumed),this.errors&&(N!==a.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(N,R){const{decodeTree:C}=this;let M=C[this.treeIndex],U=(M&i.BinTrieFlags.VALUE_LENGTH)>>14;for(;R<N.length;){if(U===0&&M&i.BinTrieFlags.FLAG13){const G=(M&i.BinTrieFlags.BRANCH_LENGTH)>>7;if(this.runConsumed===0){const K=M&i.BinTrieFlags.JUMP_TABLE;if(N.charCodeAt(R)!==K)return this.result===0?0:this.emitNotTerminatedNamedEntity();R++,this.excess++,this.runConsumed++}for(;this.runConsumed<G;){if(R>=N.length)return-1;const K=this.runConsumed-1,$=C[this.treeIndex+1+(K>>1)],se=K%2===0?$&255:$>>8&255;if(N.charCodeAt(R)!==se)return this.runConsumed=0,this.result===0?0:this.emitNotTerminatedNamedEntity();R++,this.excess++,this.runConsumed++}this.runConsumed=0,this.treeIndex+=1+(G>>1),M=C[this.treeIndex],U=(M&i.BinTrieFlags.VALUE_LENGTH)>>14}if(R>=N.length)break;const B=N.charCodeAt(R);if(B===a.SEMI&&U!==0&&M&i.BinTrieFlags.FLAG13)return this.emitNamedEntityData(this.treeIndex,U,this.consumed+this.excess);if(this.treeIndex=_(C,M,this.treeIndex+Math.max(1,U),B),this.treeIndex<0)return this.result===0||this.decodeMode===f.Attribute&&(U===0||l(B))?0:this.emitNotTerminatedNamedEntity();if(M=C[this.treeIndex],U=(M&i.BinTrieFlags.VALUE_LENGTH)>>14,U!==0){if(B===a.SEMI)return this.emitNamedEntityData(this.treeIndex,U,this.consumed+this.excess);this.decodeMode!==f.Strict&&!(M&i.BinTrieFlags.FLAG13)&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}R++,this.excess++}return-1}emitNotTerminatedNamedEntity(){var N;const{result:R,decodeTree:C}=this,M=(C[R]&i.BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(R,M,this.consumed),(N=this.errors)===null||N===void 0||N.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(N,R,C){const{decodeTree:M}=this;return this.emitCodePoint(R===1?M[N]&~(i.BinTrieFlags.VALUE_LENGTH|i.BinTrieFlags.FLAG13):M[N+1],C),R===3&&this.emitCodePoint(M[N+2],C),C}end(){var N;switch(this.state){case d.NamedEntity:return this.result!==0&&(this.decodeMode!==f.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case d.NumericDecimal:return this.emitNumericEntity(0,2);case d.NumericHex:return this.emitNumericEntity(0,3);case d.NumericStart:return(N=this.errors)===null||N===void 0||N.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case d.EntityStart:return 0}}}t.EntityDecoder=h;function p(F){let N="";const R=new h(F,C=>N+=(0,e.fromCodePoint)(C));return function(M,U){let B=0,G=0;for(;(G=M.indexOf("&",G))>=0;){N+=M.slice(B,G),R.startEntity(U);const $=R.write(M,G+1);if($<0){B=G+R.end();break}B=G+$,G=$===0?B+1:B}const K=N+M.slice(B);return N="",K}}function _(F,N,R,C){const M=(N&i.BinTrieFlags.BRANCH_LENGTH)>>7,U=N&i.BinTrieFlags.JUMP_TABLE;if(M===0)return U!==0&&C===U?R:-1;if(U){const $=C-U;return $<0||$>=M?-1:F[R+$]-1}const B=M+1>>1;let G=0,K=M-1;for(;G<=K;){const $=G+K>>>1,se=$>>1,we=F[R+se]>>($&1)*8&255;if(we<C)G=$+1;else if(we>C)K=$-1;else return F[R+B+$]}return-1}const g=p(r.htmlDecodeTree),m=p(n.xmlDecodeTree);function y(F,N=f.Legacy){return g(F,N)}function v(F){return g(F,f.Attribute)}function A(F){return g(F,f.Strict)}function T(F){return m(F,f.Strict)}var S=jue();Object.defineProperty(t,"decodeCodePoint",{enumerable:!0,get:function(){return S.decodeCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return S.fromCodePoint}}),Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return S.replaceCodePoint}});var P=Uue();Object.defineProperty(t,"htmlDecodeTree",{enumerable:!0,get:function(){return P.htmlDecodeTree}});var j=Gue();Object.defineProperty(t,"xmlDecodeTree",{enumerable:!0,get:function(){return j.xmlDecodeTree}})}(m8)),m8}var zue;function eRe(){if(zue)return Eh;zue=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.QuoteType=void 0;const t=Z2e();var e;(function(u){u[u.Tab=9]="Tab",u[u.NewLine=10]="NewLine",u[u.FormFeed=12]="FormFeed",u[u.CarriageReturn=13]="CarriageReturn",u[u.Space=32]="Space",u[u.ExclamationMark=33]="ExclamationMark",u[u.Number=35]="Number",u[u.Amp=38]="Amp",u[u.SingleQuote=39]="SingleQuote",u[u.DoubleQuote=34]="DoubleQuote",u[u.Dash=45]="Dash",u[u.Slash=47]="Slash",u[u.Zero=48]="Zero",u[u.Nine=57]="Nine",u[u.Semi=59]="Semi",u[u.Lt=60]="Lt",u[u.Eq=61]="Eq",u[u.Gt=62]="Gt",u[u.Questionmark=63]="Questionmark",u[u.UpperA=65]="UpperA",u[u.LowerA=97]="LowerA",u[u.UpperF=70]="UpperF",u[u.LowerF=102]="LowerF",u[u.UpperZ=90]="UpperZ",u[u.LowerZ=122]="LowerZ",u[u.LowerX=120]="LowerX",u[u.OpeningSquareBracket=91]="OpeningSquareBracket"})(e||(e={}));var r;(function(u){u[u.Text=1]="Text",u[u.BeforeTagName=2]="BeforeTagName",u[u.InTagName=3]="InTagName",u[u.InSelfClosingTag=4]="InSelfClosingTag",u[u.BeforeClosingTagName=5]="BeforeClosingTagName",u[u.InClosingTagName=6]="InClosingTagName",u[u.AfterClosingTagName=7]="AfterClosingTagName",u[u.BeforeAttributeName=8]="BeforeAttributeName",u[u.InAttributeName=9]="InAttributeName",u[u.AfterAttributeName=10]="AfterAttributeName",u[u.BeforeAttributeValue=11]="BeforeAttributeValue",u[u.InAttributeValueDq=12]="InAttributeValueDq",u[u.InAttributeValueSq=13]="InAttributeValueSq",u[u.InAttributeValueNq=14]="InAttributeValueNq",u[u.BeforeDeclaration=15]="BeforeDeclaration",u[u.InDeclaration=16]="InDeclaration",u[u.InProcessingInstruction=17]="InProcessingInstruction",u[u.BeforeComment=18]="BeforeComment",u[u.CDATASequence=19]="CDATASequence",u[u.InSpecialComment=20]="InSpecialComment",u[u.InCommentLike=21]="InCommentLike",u[u.BeforeSpecialS=22]="BeforeSpecialS",u[u.BeforeSpecialT=23]="BeforeSpecialT",u[u.SpecialStartSequence=24]="SpecialStartSequence",u[u.InSpecialTag=25]="InSpecialTag",u[u.InEntity=26]="InEntity"})(r||(r={}));function n(u){return u===e.Space||u===e.NewLine||u===e.Tab||u===e.FormFeed||u===e.CarriageReturn}function i(u){return u===e.Slash||u===e.Gt||n(u)}function a(u){return u>=e.LowerA&&u<=e.LowerZ||u>=e.UpperA&&u<=e.UpperZ}var s;(function(u){u[u.NoValue=0]="NoValue",u[u.Unquoted=1]="Unquoted",u[u.Single=2]="Single",u[u.Double=3]="Double"})(s||(Eh.QuoteType=s={}));const o={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};class c{constructor({xmlMode:l=!1,decodeEntities:d=!0},f){this.cbs=f,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=l,this.decodeEntities=d,this.entityDecoder=new t.EntityDecoder(l?t.xmlDecodeTree:t.htmlDecodeTree,(h,p)=>this.emitCodePoint(h,p))}reset(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(l){this.offset+=this.buffer.length,this.buffer=l,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(l){l===e.Lt||!this.decodeEntities&&this.fastForwardTo(e.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&l===e.Amp&&this.startEntity()}stateSpecialStartSequence(l){const d=this.sequenceIndex===this.currentSequence.length;if(!(d?i(l):(l|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!d){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(l)}stateInSpecialTag(l){if(this.sequenceIndex===this.currentSequence.length){if(l===e.Gt||n(l)){const d=this.index-this.currentSequence.length;if(this.sectionStart<d){const f=this.index;this.index=d,this.cbs.ontext(this.sectionStart,d),this.index=f}this.isSpecial=!1,this.sectionStart=d+2,this.stateInClosingTagName(l);return}this.sequenceIndex=0}(l|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===o.TitleEnd?this.decodeEntities&&l===e.Amp&&this.startEntity():this.fastForwardTo(e.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(l===e.Lt)}stateCDATASequence(l){l===o.Cdata[this.sequenceIndex]?++this.sequenceIndex===o.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=o.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(l))}fastForwardTo(l){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===l)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(l){l===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):l!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(l){return this.xmlMode?!i(l):a(l)}startSpecial(l,d){this.isSpecial=!0,this.currentSequence=l,this.sequenceIndex=d,this.state=r.SpecialStartSequence}stateBeforeTagName(l){if(l===e.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(l===e.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(l)){const d=l|32;this.sectionStart=this.index,this.xmlMode?this.state=r.InTagName:d===o.ScriptEnd[2]?this.state=r.BeforeSpecialS:d===o.TitleEnd[2]||d===o.XmpEnd[2]?this.state=r.BeforeSpecialT:this.state=r.InTagName}else l===e.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(l))}stateInTagName(l){i(l)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l))}stateBeforeClosingTagName(l){n(l)||(l===e.Gt?this.state=r.Text:(this.state=this.isTagStartChar(l)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(l){(l===e.Gt||n(l))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(l))}stateAfterClosingTagName(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.state=r.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(l){l===e.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.sectionStart=this.index+1):l===e.Slash?this.state=r.InSelfClosingTag:n(l)||(this.state=r.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(l){l===e.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(l)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l))}stateInAttributeName(l){(l===e.Eq||i(l))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=r.AfterAttributeName,this.stateAfterAttributeName(l))}stateAfterAttributeName(l){l===e.Eq?this.state=r.BeforeAttributeValue:l===e.Slash||l===e.Gt?(this.cbs.onattribend(s.NoValue,this.sectionStart),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l)):n(l)||(this.cbs.onattribend(s.NoValue,this.sectionStart),this.state=r.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(l){l===e.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):l===e.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):n(l)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(l))}handleInAttributeValue(l,d){l===d||!this.decodeEntities&&this.fastForwardTo(d)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(d===e.DoubleQuote?s.Double:s.Single,this.index+1),this.state=r.BeforeAttributeName):this.decodeEntities&&l===e.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(l){this.handleInAttributeValue(l,e.DoubleQuote)}stateInAttributeValueSingleQuotes(l){this.handleInAttributeValue(l,e.SingleQuote)}stateInAttributeValueNoQuotes(l){n(l)||l===e.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l)):this.decodeEntities&&l===e.Amp&&this.startEntity()}stateBeforeDeclaration(l){l===e.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=l===e.Dash?r.BeforeComment:r.InDeclaration}stateInDeclaration(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)}stateBeforeComment(l){l===e.Dash?(this.state=r.InCommentLike,this.currentSequence=o.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration}stateInSpecialComment(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(l){const d=l|32;d===o.ScriptEnd[3]?this.startSpecial(o.ScriptEnd,4):d===o.StyleEnd[3]?this.startSpecial(o.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(l))}stateBeforeSpecialT(l){switch(l|32){case o.TitleEnd[3]:{this.startSpecial(o.TitleEnd,4);break}case o.TextareaEnd[3]:{this.startSpecial(o.TextareaEnd,4);break}case o.XmpEnd[3]:{this.startSpecial(o.XmpEnd,4);break}default:this.state=r.InTagName,this.stateInTagName(l)}}startEntity(){this.baseState=this.state,this.state=r.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?t.DecodingMode.Strict:this.baseState===r.Text||this.baseState===r.InSpecialTag?t.DecodingMode.Legacy:t.DecodingMode.Attribute)}stateInEntity(){const l=this.index-this.offset,d=this.entityDecoder.write(this.buffer,l);if(d>=0)this.state=this.baseState,d===0&&(this.index-=1);else{if(l<this.buffer.length&&this.buffer.charCodeAt(l)===e.Amp){this.state=this.baseState,this.index-=1;return}this.index=this.offset+this.buffer.length-1}}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===r.InAttributeValueDq||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const l=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:{this.stateText(l);break}case r.SpecialStartSequence:{this.stateSpecialStartSequence(l);break}case r.InSpecialTag:{this.stateInSpecialTag(l);break}case r.CDATASequence:{this.stateCDATASequence(l);break}case r.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(l);break}case r.InAttributeName:{this.stateInAttributeName(l);break}case r.InCommentLike:{this.stateInCommentLike(l);break}case r.InSpecialComment:{this.stateInSpecialComment(l);break}case r.BeforeAttributeName:{this.stateBeforeAttributeName(l);break}case r.InTagName:{this.stateInTagName(l);break}case r.InClosingTagName:{this.stateInClosingTagName(l);break}case r.BeforeTagName:{this.stateBeforeTagName(l);break}case r.AfterAttributeName:{this.stateAfterAttributeName(l);break}case r.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(l);break}case r.BeforeAttributeValue:{this.stateBeforeAttributeValue(l);break}case r.BeforeClosingTagName:{this.stateBeforeClosingTagName(l);break}case r.AfterClosingTagName:{this.stateAfterClosingTagName(l);break}case r.BeforeSpecialS:{this.stateBeforeSpecialS(l);break}case r.BeforeSpecialT:{this.stateBeforeSpecialT(l);break}case r.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(l);break}case r.InSelfClosingTag:{this.stateInSelfClosingTag(l);break}case r.InDeclaration:{this.stateInDeclaration(l);break}case r.BeforeDeclaration:{this.stateBeforeDeclaration(l);break}case r.BeforeComment:{this.stateBeforeComment(l);break}case r.InProcessingInstruction:{this.stateInProcessingInstruction(l);break}case r.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===r.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const l=this.buffer.length+this.offset;this.sectionStart>=l||(this.state===r.InCommentLike?this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,l,0):this.cbs.oncomment(this.sectionStart,l,0):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,l))}emitCodePoint(l,d){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.onattribentity(l)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.ontextentity(l,this.sectionStart))}}return Eh.default=c,Eh}var Que;function Wue(){if(Que)return Wy;Que=1;var t=E&&E.__createBinding||(Object.create?function(g,m,y,v){v===void 0&&(v=y);var A=Object.getOwnPropertyDescriptor(m,y);(!A||("get"in A?!m.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(g,v,A)}:function(g,m,y,v){v===void 0&&(v=y),g[v]=m[y]}),e=E&&E.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),r=E&&E.__importStar||function(){var g=function(m){return g=Object.getOwnPropertyNames||function(y){var v=[];for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&(v[v.length]=A);return v},g(m)};return function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var v=g(m),A=0;A<v.length;A++)v[A]!=="default"&&t(y,m,v[A]);return e(y,m),y}}();Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.Parser=void 0;const n=r(eRe()),i=Z2e(),a=new Set(["input","option","optgroup","select","button","datalist","textarea"]),s=new Set(["p"]),o=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),u=new Set(["rt","rp"]),l=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",s],["h1",s],["h2",s],["h3",s],["h4",s],["h5",s],["h6",s],["select",a],["input",a],["output",a],["button",a],["datalist",a],["textarea",a],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",s],["article",s],["aside",s],["blockquote",s],["details",s],["div",s],["dl",s],["fieldset",s],["figcaption",s],["figure",s],["footer",s],["form",s],["header",s],["hr",s],["main",s],["nav",s],["ol",s],["pre",s],["section",s],["table",s],["ul",s],["rt",u],["rp",u],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//;class _{constructor(m,y={}){var v,A,T,S,P,j;this.options=y,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(v=y.lowerCaseTags)!==null&&v!==void 0?v:this.htmlMode,this.lowerCaseAttributeNames=(A=y.lowerCaseAttributeNames)!==null&&A!==void 0?A:this.htmlMode,this.recognizeSelfClosing=(T=y.recognizeSelfClosing)!==null&&T!==void 0?T:!this.htmlMode,this.tokenizer=new((S=y.Tokenizer)!==null&&S!==void 0?S:n.default)(this.options,this),this.foreignContext=[!this.htmlMode],(j=(P=this.cbs).onparserinit)===null||j===void 0||j.call(P,this)}ontext(m,y){var v,A;const T=this.getSlice(m,y);this.endIndex=y-1,(A=(v=this.cbs).ontext)===null||A===void 0||A.call(v,T),this.startIndex=y}ontextentity(m,y){var v,A;this.endIndex=y-1,(A=(v=this.cbs).ontext)===null||A===void 0||A.call(v,(0,i.fromCodePoint)(m)),this.startIndex=y}isVoidElement(m){return this.htmlMode&&d.has(m)}onopentagname(m,y){this.endIndex=y;let v=this.getSlice(m,y);this.lowerCaseTagNames&&(v=v.toLowerCase()),this.emitOpenTag(v)}emitOpenTag(m){var y,v,A,T;this.openTagStart=this.startIndex,this.tagname=m;const S=this.htmlMode&&l.get(m);if(S)for(;this.stack.length>0&&S.has(this.stack[0]);){const P=this.stack.shift();(v=(y=this.cbs).onclosetag)===null||v===void 0||v.call(y,P,!0)}this.isVoidElement(m)||(this.stack.unshift(m),this.htmlMode&&(f.has(m)?this.foreignContext.unshift(!0):h.has(m)&&this.foreignContext.unshift(!1))),(T=(A=this.cbs).onopentagname)===null||T===void 0||T.call(A,m),this.cbs.onopentag&&(this.attribs={})}endOpenTag(m){var y,v;this.startIndex=this.openTagStart,this.attribs&&((v=(y=this.cbs).onopentag)===null||v===void 0||v.call(y,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1}onclosetag(m,y){var v,A,T,S,P,j,F,N;this.endIndex=y;let R=this.getSlice(m,y);if(this.lowerCaseTagNames&&(R=R.toLowerCase()),this.htmlMode&&(f.has(R)||h.has(R))&&this.foreignContext.shift(),this.isVoidElement(R))this.htmlMode&&R==="br"&&((S=(T=this.cbs).onopentagname)===null||S===void 0||S.call(T,"br"),(j=(P=this.cbs).onopentag)===null||j===void 0||j.call(P,"br",{},!0),(N=(F=this.cbs).onclosetag)===null||N===void 0||N.call(F,"br",!1));else{const C=this.stack.indexOf(R);if(C!==-1)for(let M=0;M<=C;M++){const U=this.stack.shift();(A=(v=this.cbs).onclosetag)===null||A===void 0||A.call(v,U,M!==C)}else this.htmlMode&&R==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=y+1}onselfclosingtag(m){this.endIndex=m,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)}closeCurrentTag(m){var y,v;const A=this.tagname;this.endOpenTag(m),this.stack[0]===A&&((v=(y=this.cbs).onclosetag)===null||v===void 0||v.call(y,A,!m),this.stack.shift())}onattribname(m,y){this.startIndex=m;const v=this.getSlice(m,y);this.attribname=this.lowerCaseAttributeNames?v.toLowerCase():v}onattribdata(m,y){this.attribvalue+=this.getSlice(m,y)}onattribentity(m){this.attribvalue+=(0,i.fromCodePoint)(m)}onattribend(m,y){var v,A;this.endIndex=y,(A=(v=this.cbs).onattribute)===null||A===void 0||A.call(v,this.attribname,this.attribvalue,m===n.QuoteType.Double?'"':m===n.QuoteType.Single?"'":m===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(m){const y=m.search(p);let v=y<0?m:m.substr(0,y);return this.lowerCaseTagNames&&(v=v.toLowerCase()),v}ondeclaration(m,y){this.endIndex=y;const v=this.getSlice(m,y);if(this.cbs.onprocessinginstruction){const A=this.getInstructionName(v);this.cbs.onprocessinginstruction(`!${A}`,`!${v}`)}this.startIndex=y+1}onprocessinginstruction(m,y){this.endIndex=y;const v=this.getSlice(m,y);if(this.cbs.onprocessinginstruction){const A=this.getInstructionName(v);this.cbs.onprocessinginstruction(`?${A}`,`?${v}`)}this.startIndex=y+1}oncomment(m,y,v){var A,T,S,P;this.endIndex=y,(T=(A=this.cbs).oncomment)===null||T===void 0||T.call(A,this.getSlice(m,y-v)),(P=(S=this.cbs).oncommentend)===null||P===void 0||P.call(S),this.startIndex=y+1}oncdata(m,y,v){var A,T,S,P,j,F,N,R,C,M;this.endIndex=y;const U=this.getSlice(m,y-v);!this.htmlMode||this.options.recognizeCDATA?((T=(A=this.cbs).oncdatastart)===null||T===void 0||T.call(A),(P=(S=this.cbs).ontext)===null||P===void 0||P.call(S,U),(F=(j=this.cbs).oncdataend)===null||F===void 0||F.call(j)):((R=(N=this.cbs).oncomment)===null||R===void 0||R.call(N,`[CDATA[${U}]]`),(M=(C=this.cbs).oncommentend)===null||M===void 0||M.call(C)),this.startIndex=y+1}onend(){var m,y;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let v=0;v<this.stack.length;v++)this.cbs.onclosetag(this.stack[v],!0)}(y=(m=this.cbs).onend)===null||y===void 0||y.call(m)}reset(){var m,y,v,A;(y=(m=this.cbs).onreset)===null||y===void 0||y.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(A=(v=this.cbs).onparserinit)===null||A===void 0||A.call(v,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(m){this.reset(),this.end(m)}getSlice(m,y){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let v=this.buffers[0].slice(m-this.bufferOffset,y-this.bufferOffset);for(;y-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),v+=this.buffers[0].slice(0,y-this.bufferOffset);return v}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(m){var y,v;if(this.ended){(v=(y=this.cbs).onerror)===null||v===void 0||v.call(y,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)}end(m){var y,v;if(this.ended){(v=(y=this.cbs).onerror)===null||v===void 0||v.call(y,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(m){this.write(m)}done(m){this.end(m)}}return Wy.Parser=_,Wy}var Kue;function yut(){return Kue||(Kue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(y,v,A,T){T===void 0&&(T=A);var S=Object.getOwnPropertyDescriptor(v,A);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[A]}}),Object.defineProperty(y,T,S)}:function(y,v,A,T){T===void 0&&(T=A),y[T]=v[A]}),r=E&&E.__setModuleDefault||(Object.create?function(y,v){Object.defineProperty(y,"default",{enumerable:!0,value:v})}:function(y,v){y.default=v}),n=E&&E.__importStar||function(){var y=function(v){return y=Object.getOwnPropertyNames||function(A){var T=[];for(var S in A)Object.prototype.hasOwnProperty.call(A,S)&&(T[T.length]=S);return T},y(v)};return function(v){if(v&&v.__esModule)return v;var A={};if(v!=null)for(var T=y(v),S=0;S<T.length;S++)T[S]!=="default"&&e(A,v,T[S]);return r(A,v),A}}(),i=E&&E.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.getFeed=t.ElementType=t.QuoteType=t.Tokenizer=t.DefaultHandler=t.DomHandler=t.Parser=void 0,t.parseDocument=u,t.parseDOM=l,t.createDocumentStream=d,t.createDomStream=f,t.parseFeed=m;const a=Wue();var s=Wue();Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return s.Parser}});const o=hs();var c=hs();Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function u(y,v){const A=new o.DomHandler(void 0,v);return new a.Parser(A,v).end(y),A.root}function l(y,v){return u(y,v).children}function d(y,v,A){const T=new o.DomHandler(S=>y(S,T.root),v,A);return new a.Parser(T,v)}function f(y,v,A){const T=new o.DomHandler(y,v,A);return new a.Parser(T,v)}var h=eRe();Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),Object.defineProperty(t,"QuoteType",{enumerable:!0,get:function(){return h.QuoteType}}),t.ElementType=n(Mf());const p=Du();var _=Du();Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return _.getFeed}});const g={xmlMode:!0};function m(y,v=g){return(0,p.getFeed)(l(y,v))}t.DomUtils=n(Du())}(_8)),_8}var Xue;function but(){if(Xue)return Qy;Xue=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.ActorRdfParseHtml=void 0;const t=p0(),e=yut(),r=Wt;class n extends t.ActorRdfParseFixedMediaTypes{constructor(s){super(s);k(this,"busRdfParseHtml");this.busRdfParseHtml=s.busRdfParseHtml}async runHandle(s,o,c){var _;const u=new r.Readable({objectMode:!0});u._read=()=>{};let l=0,d=1;function f(g){u.emit("error",g)}function h(){--d===0&&u.push(null)}const p={baseIRI:((_=s.metadata)==null?void 0:_.baseIRI)??"",context:c,emit:g=>{l--,u.push(g)},end:h,error:f,headers:s.headers};try{const g=await Promise.all(this.busRdfParseHtml.publish(p));d+=g.length;const m=[];for(const A of g){const{htmlParseListener:T}=await A.actor.run(p,void 0);m.push(T)}const y=new e.Parser({onclosetag(){try{for(const A of m)A.onTagClose()}catch(A){f(A)}},onend(){try{for(const A of m)A.onEnd()}catch(A){f(A)}h()},onopentag(A,T){try{for(const S of m)S.onTagOpen(A,T)}catch(S){f(S)}},ontext(A){try{for(const T of m)T.onText(A)}catch(T){f(T)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1}),v=u._read=A=>{for(l=Math.max(A,l);l>0;){const T=s.data.read();if(T===null){s.data.once("readable",()=>v(0));return}y.write(T.toString())}};s.data.on("error",f).on("end",()=>y.end())}catch(g){setTimeout(()=>{u.emit("error",g)})}return{data:u}}}return Qy.ActorRdfParseHtml=n,Qy}var Jue;function vut(){return Jue||(Jue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(but(),t)}(p8)),p8}var y8={},Yy={},b8={},$y={},Yue;function Aut(){if(Yue)return $y;Yue=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.ActorRdfParseHtml=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return $y.ActorRdfParseHtml=e,$y}var $ue;function oQ(){return $ue||($ue=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Aut(),t)}(b8)),b8}var v8={},A8={},Zue;function Tut(){return Zue||(Zue=1,Object.defineProperty(A8,"__esModule",{value:!0})),A8}var Zy={},ece;function tRe(){if(ece)return Zy;ece=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.ItemPropertyHandlerContent=void 0;let t=class{canHandle(r,n){return"content"in n}getObject(r,n,i){return n.createLiteral(r.content,i)}};return Zy.ItemPropertyHandlerContent=t,Zy}var eb={},tb={},tce;function iM(){if(tce)return tb;tce=1,Object.defineProperty(tb,"__esModule",{value:!0}),tb.Util=void 0;const t=jr(),e=Bn();class r{constructor(i,a){this.dataFactory=i||new t.DataFactory,this.baseIRI=a||""}static isValidIri(i){return r.IRI_REGEX.test(i)}createVocabIris(i,a,s){return i.split(/\s+/u).filter(o=>!!o).map(o=>{if(!r.isValidIri(o)){if(!s)return;o=`${a.vocab||`${this.baseIRI}#`}${o}`}return this.dataFactory.namedNode(o)}).filter(o=>!!o)}getVocabularyExpansionType(i,a,s){const o=i.split(/\s+/u);if(o.includes("subPropertyOf")||o.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${r.RDF}type`)];if(a.vocab&&a.vocab in s&&s[a.vocab].properties){let c=[];for(const[u,l]of Object.entries(s[a.vocab].properties))o.includes(u)&&(c=[...Object.values(l).map(d=>this.dataFactory.namedNode(d))]);return c}return[]}createSubject(i){if(!r.isValidIri(i))try{i=(0,e.resolve)(i,this.baseIRI)}catch{return}return this.dataFactory.namedNode(i)}createLiteral(i,a){return this.dataFactory.literal(i,a.language)}deriveVocab(i,a){let s;for(const o in a)if(i.startsWith(o)){s=o,s.endsWith("/")||(s+="#");break}if(!s){const o=i.indexOf("#");o>0?s=i.slice(0,o+1):s=(0,e.resolve)(".",i)}return s}}return tb.Util=r,r.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r.XSD="http://www.w3.org/2001/XMLSchema#",r.RDFA="http://www.w3.org/ns/rdfa#",r.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u,tb}var rce;function rRe(){if(rce)return eb;rce=1,Object.defineProperty(eb,"__esModule",{value:!0}),eb.ItemPropertyHandlerNumber=void 0;const t=iM();let e=class{constructor(n,i){this.tagName=n,this.attributeName=i}canHandle(n,i){return this.tagName===n&&this.attributeName in i}getObject(n,i,a){const s=n[this.attributeName];let o;return!Number.isNaN(Number.parseInt(s,10))&&!s.includes(".")?o=`${t.Util.XSD}integer`:Number.isNaN(Number.parseFloat(s))||(o=`${t.Util.XSD}double`),i.dataFactory.literal(s,o&&i.dataFactory.namedNode(o))}};return eb.ItemPropertyHandlerNumber=e,eb}var rb={},nce;function iRe(){if(nce)return rb;nce=1,Object.defineProperty(rb,"__esModule",{value:!0}),rb.ItemPropertyHandlerTime=void 0;const t=iM();let e=class nRe{canHandle(n,i){return n==="time"&&"datetime"in i}getObject(n,i,a){const s=n.datetime;let o;for(const c of nRe.TIME_REGEXES)if(c.regex.test(s)){o=i.dataFactory.namedNode(t.Util.XSD+c.type);break}return i.dataFactory.literal(s,o)}};return rb.ItemPropertyHandlerTime=e,e.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}],rb}var nb={},ice;function aRe(){if(ice)return nb;ice=1,Object.defineProperty(nb,"__esModule",{value:!0}),nb.ItemPropertyHandlerUrl=void 0;const t=Bn();let e=class{constructor(n,i){this.tagName=n,this.attributeName=i}canHandle(n,i){return this.tagName===n&&this.attributeName in i}getObject(n,i,a){return i.dataFactory.namedNode((0,t.resolve)(n[this.attributeName],i.baseIRI))}};return nb.ItemPropertyHandlerUrl=e,nb}var T8={},ace;function wut(){return ace||(ace=1,Object.defineProperty(T8,"__esModule",{value:!0})),T8}var w8={},sce;function Sut(){return sce||(sce=1,Object.defineProperty(w8,"__esModule",{value:!0})),w8}var S8={},oce;function xut(){return oce||(oce=1,Object.defineProperty(S8,"__esModule",{value:!0})),S8}var ib={},x8={},ab={},Ih={},E8={},oP={},uce;function Eut(){return uce||(uce=1,Object.defineProperty(oP,"__esModule",{value:!0}),oP.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(t){return t.charCodeAt(0)}))),oP}var uP={},cce;function Iut(){return cce||(cce=1,Object.defineProperty(uP,"__esModule",{value:!0}),uP.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(t){return t.charCodeAt(0)}))),uP}var I8={},lce;function dce(){return lce||(lce=1,function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(a){var s="";return a>65535&&(a-=65536,s+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),s+=String.fromCharCode(a),s};function n(a){var s;return a>=55296&&a<=57343||a>1114111?65533:(s=r.get(a))!==null&&s!==void 0?s:a}t.replaceCodePoint=n;function i(a){return(0,t.fromCodePoint)(n(a))}t.default=i}(I8)),I8}var fce;function sRe(){return fce||(fce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(R,C,M,U){U===void 0&&(U=M);var B=Object.getOwnPropertyDescriptor(C,M);(!B||("get"in B?!C.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return C[M]}}),Object.defineProperty(R,U,B)}:function(R,C,M,U){U===void 0&&(U=M),R[U]=C[M]}),r=E&&E.__setModuleDefault||(Object.create?function(R,C){Object.defineProperty(R,"default",{enumerable:!0,value:C})}:function(R,C){R.default=C}),n=E&&E.__importStar||function(R){if(R&&R.__esModule)return R;var C={};if(R!=null)for(var M in R)M!=="default"&&Object.prototype.hasOwnProperty.call(R,M)&&e(C,R,M);return r(C,R),C},i=E&&E.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=i(Eut());t.htmlDecodeTree=a.default;var s=i(Iut());t.xmlDecodeTree=s.default;var o=n(dce());t.decodeCodePoint=o.default;var c=dce();Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var u;(function(R){R[R.NUM=35]="NUM",R[R.SEMI=59]="SEMI",R[R.EQUALS=61]="EQUALS",R[R.ZERO=48]="ZERO",R[R.NINE=57]="NINE",R[R.LOWER_A=97]="LOWER_A",R[R.LOWER_F=102]="LOWER_F",R[R.LOWER_X=120]="LOWER_X",R[R.LOWER_Z=122]="LOWER_Z",R[R.UPPER_A=65]="UPPER_A",R[R.UPPER_F=70]="UPPER_F",R[R.UPPER_Z=90]="UPPER_Z"})(u||(u={}));var l=32,d;(function(R){R[R.VALUE_LENGTH=49152]="VALUE_LENGTH",R[R.BRANCH_LENGTH=16256]="BRANCH_LENGTH",R[R.JUMP_TABLE=127]="JUMP_TABLE"})(d=t.BinTrieFlags||(t.BinTrieFlags={}));function f(R){return R>=u.ZERO&&R<=u.NINE}function h(R){return R>=u.UPPER_A&&R<=u.UPPER_F||R>=u.LOWER_A&&R<=u.LOWER_F}function p(R){return R>=u.UPPER_A&&R<=u.UPPER_Z||R>=u.LOWER_A&&R<=u.LOWER_Z||f(R)}function _(R){return R===u.EQUALS||p(R)}var g;(function(R){R[R.EntityStart=0]="EntityStart",R[R.NumericStart=1]="NumericStart",R[R.NumericDecimal=2]="NumericDecimal",R[R.NumericHex=3]="NumericHex",R[R.NamedEntity=4]="NamedEntity"})(g||(g={}));var m;(function(R){R[R.Legacy=0]="Legacy",R[R.Strict=1]="Strict",R[R.Attribute=2]="Attribute"})(m=t.DecodingMode||(t.DecodingMode={}));var y=function(){function R(C,M,U){this.decodeTree=C,this.emitCodePoint=M,this.errors=U,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return R.prototype.startEntity=function(C){this.decodeMode=C,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},R.prototype.write=function(C,M){switch(this.state){case g.EntityStart:return C.charCodeAt(M)===u.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(C,M+1)):(this.state=g.NamedEntity,this.stateNamedEntity(C,M));case g.NumericStart:return this.stateNumericStart(C,M);case g.NumericDecimal:return this.stateNumericDecimal(C,M);case g.NumericHex:return this.stateNumericHex(C,M);case g.NamedEntity:return this.stateNamedEntity(C,M)}},R.prototype.stateNumericStart=function(C,M){return M>=C.length?-1:(C.charCodeAt(M)|l)===u.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(C,M+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(C,M))},R.prototype.addToNumericResult=function(C,M,U,B){if(M!==U){var G=U-M;this.result=this.result*Math.pow(B,G)+parseInt(C.substr(M,G),B),this.consumed+=G}},R.prototype.stateNumericHex=function(C,M){for(var U=M;M<C.length;){var B=C.charCodeAt(M);if(f(B)||h(B))M+=1;else return this.addToNumericResult(C,U,M,16),this.emitNumericEntity(B,3)}return this.addToNumericResult(C,U,M,16),-1},R.prototype.stateNumericDecimal=function(C,M){for(var U=M;M<C.length;){var B=C.charCodeAt(M);if(f(B))M+=1;else return this.addToNumericResult(C,U,M,10),this.emitNumericEntity(B,2)}return this.addToNumericResult(C,U,M,10),-1},R.prototype.emitNumericEntity=function(C,M){var U;if(this.consumed<=M)return(U=this.errors)===null||U===void 0||U.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(C===u.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(C!==u.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},R.prototype.stateNamedEntity=function(C,M){for(var U=this.decodeTree,B=U[this.treeIndex],G=(B&d.VALUE_LENGTH)>>14;M<C.length;M++,this.excess++){var K=C.charCodeAt(M);if(this.treeIndex=A(U,B,this.treeIndex+Math.max(1,G),K),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(G===0||_(K))?0:this.emitNotTerminatedNamedEntity();if(B=U[this.treeIndex],G=(B&d.VALUE_LENGTH)>>14,G!==0){if(K===u.SEMI)return this.emitNamedEntityData(this.treeIndex,G,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},R.prototype.emitNotTerminatedNamedEntity=function(){var C,M=this,U=M.result,B=M.decodeTree,G=(B[U]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(U,G,this.consumed),(C=this.errors)===null||C===void 0||C.missingSemicolonAfterCharacterReference(),this.consumed},R.prototype.emitNamedEntityData=function(C,M,U){var B=this.decodeTree;return this.emitCodePoint(M===1?B[C]&~d.VALUE_LENGTH:B[C+1],U),M===3&&this.emitCodePoint(B[C+2],U),U},R.prototype.end=function(){var C;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(C=this.errors)===null||C===void 0||C.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},R}();t.EntityDecoder=y;function v(R){var C="",M=new y(R,function(U){return C+=(0,o.fromCodePoint)(U)});return function(B,G){for(var K=0,$=0;($=B.indexOf("&",$))>=0;){C+=B.slice(K,$),M.startEntity(G);var se=M.write(B,$+1);if(se<0){K=$+M.end();break}K=$+se,$=se===0?K+1:K}var pe=C+B.slice(K);return C="",pe}}function A(R,C,M,U){var B=(C&d.BRANCH_LENGTH)>>7,G=C&d.JUMP_TABLE;if(B===0)return G!==0&&U===G?M:-1;if(G){var K=U-G;return K<0||K>=B?-1:R[M+K]-1}for(var $=M,se=$+B-1;$<=se;){var pe=$+se>>>1,we=R[pe];if(we<U)$=pe+1;else if(we>U)se=pe-1;else return R[pe+B]}return-1}t.determineBranch=A;var T=v(a.default),S=v(s.default);function P(R,C){return C===void 0&&(C=m.Legacy),T(R,C)}t.decodeHTML=P;function j(R){return T(R,m.Attribute)}t.decodeHTMLAttribute=j;function F(R){return T(R,m.Strict)}t.decodeHTMLStrict=F;function N(R){return S(R,m.Strict)}t.decodeXML=N}(E8)),E8}var hce;function oRe(){if(hce)return Ih;hce=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.QuoteType=void 0;var t=sRe(),e;(function(u){u[u.Tab=9]="Tab",u[u.NewLine=10]="NewLine",u[u.FormFeed=12]="FormFeed",u[u.CarriageReturn=13]="CarriageReturn",u[u.Space=32]="Space",u[u.ExclamationMark=33]="ExclamationMark",u[u.Number=35]="Number",u[u.Amp=38]="Amp",u[u.SingleQuote=39]="SingleQuote",u[u.DoubleQuote=34]="DoubleQuote",u[u.Dash=45]="Dash",u[u.Slash=47]="Slash",u[u.Zero=48]="Zero",u[u.Nine=57]="Nine",u[u.Semi=59]="Semi",u[u.Lt=60]="Lt",u[u.Eq=61]="Eq",u[u.Gt=62]="Gt",u[u.Questionmark=63]="Questionmark",u[u.UpperA=65]="UpperA",u[u.LowerA=97]="LowerA",u[u.UpperF=70]="UpperF",u[u.LowerF=102]="LowerF",u[u.UpperZ=90]="UpperZ",u[u.LowerZ=122]="LowerZ",u[u.LowerX=120]="LowerX",u[u.OpeningSquareBracket=91]="OpeningSquareBracket"})(e||(e={}));var r;(function(u){u[u.Text=1]="Text",u[u.BeforeTagName=2]="BeforeTagName",u[u.InTagName=3]="InTagName",u[u.InSelfClosingTag=4]="InSelfClosingTag",u[u.BeforeClosingTagName=5]="BeforeClosingTagName",u[u.InClosingTagName=6]="InClosingTagName",u[u.AfterClosingTagName=7]="AfterClosingTagName",u[u.BeforeAttributeName=8]="BeforeAttributeName",u[u.InAttributeName=9]="InAttributeName",u[u.AfterAttributeName=10]="AfterAttributeName",u[u.BeforeAttributeValue=11]="BeforeAttributeValue",u[u.InAttributeValueDq=12]="InAttributeValueDq",u[u.InAttributeValueSq=13]="InAttributeValueSq",u[u.InAttributeValueNq=14]="InAttributeValueNq",u[u.BeforeDeclaration=15]="BeforeDeclaration",u[u.InDeclaration=16]="InDeclaration",u[u.InProcessingInstruction=17]="InProcessingInstruction",u[u.BeforeComment=18]="BeforeComment",u[u.CDATASequence=19]="CDATASequence",u[u.InSpecialComment=20]="InSpecialComment",u[u.InCommentLike=21]="InCommentLike",u[u.BeforeSpecialS=22]="BeforeSpecialS",u[u.BeforeSpecialT=23]="BeforeSpecialT",u[u.SpecialStartSequence=24]="SpecialStartSequence",u[u.InSpecialTag=25]="InSpecialTag",u[u.InEntity=26]="InEntity"})(r||(r={}));function n(u){return u===e.Space||u===e.NewLine||u===e.Tab||u===e.FormFeed||u===e.CarriageReturn}function i(u){return u===e.Slash||u===e.Gt||n(u)}function a(u){return u>=e.LowerA&&u<=e.LowerZ||u>=e.UpperA&&u<=e.UpperZ}var s;(function(u){u[u.NoValue=0]="NoValue",u[u.Unquoted=1]="Unquoted",u[u.Single=2]="Single",u[u.Double=3]="Double"})(s||(Ih.QuoteType=s={}));var o={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])},c=function(){function u(l,d){var f=l.xmlMode,h=f===void 0?!1:f,p=l.decodeEntities,_=p===void 0?!0:p,g=this;this.cbs=d,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=h,this.decodeEntities=_,this.entityDecoder=new t.EntityDecoder(h?t.xmlDecodeTree:t.htmlDecodeTree,function(m,y){return g.emitCodePoint(m,y)})}return u.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},u.prototype.write=function(l){this.offset+=this.buffer.length,this.buffer=l,this.parse()},u.prototype.end=function(){this.running&&this.finish()},u.prototype.pause=function(){this.running=!1},u.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},u.prototype.stateText=function(l){l===e.Lt||!this.decodeEntities&&this.fastForwardTo(e.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&l===e.Amp&&this.startEntity()},u.prototype.stateSpecialStartSequence=function(l){var d=this.sequenceIndex===this.currentSequence.length,f=d?i(l):(l|32)===this.currentSequence[this.sequenceIndex];if(!f)this.isSpecial=!1;else if(!d){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(l)},u.prototype.stateInSpecialTag=function(l){if(this.sequenceIndex===this.currentSequence.length){if(l===e.Gt||n(l)){var d=this.index-this.currentSequence.length;if(this.sectionStart<d){var f=this.index;this.index=d,this.cbs.ontext(this.sectionStart,d),this.index=f}this.isSpecial=!1,this.sectionStart=d+2,this.stateInClosingTagName(l);return}this.sequenceIndex=0}(l|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===o.TitleEnd?this.decodeEntities&&l===e.Amp&&this.startEntity():this.fastForwardTo(e.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(l===e.Lt)},u.prototype.stateCDATASequence=function(l){l===o.Cdata[this.sequenceIndex]?++this.sequenceIndex===o.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=o.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(l))},u.prototype.fastForwardTo=function(l){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===l)return!0;return this.index=this.buffer.length+this.offset-1,!1},u.prototype.stateInCommentLike=function(l){l===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):l!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},u.prototype.isTagStartChar=function(l){return this.xmlMode?!i(l):a(l)},u.prototype.startSpecial=function(l,d){this.isSpecial=!0,this.currentSequence=l,this.sequenceIndex=d,this.state=r.SpecialStartSequence},u.prototype.stateBeforeTagName=function(l){if(l===e.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(l===e.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(l)){var d=l|32;this.sectionStart=this.index,this.xmlMode?this.state=r.InTagName:d===o.ScriptEnd[2]?this.state=r.BeforeSpecialS:d===o.TitleEnd[2]?this.state=r.BeforeSpecialT:this.state=r.InTagName}else l===e.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(l))},u.prototype.stateInTagName=function(l){i(l)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l))},u.prototype.stateBeforeClosingTagName=function(l){n(l)||(l===e.Gt?this.state=r.Text:(this.state=this.isTagStartChar(l)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},u.prototype.stateInClosingTagName=function(l){(l===e.Gt||n(l))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(l))},u.prototype.stateAfterClosingTagName=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateBeforeAttributeName=function(l){l===e.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.sectionStart=this.index+1):l===e.Slash?this.state=r.InSelfClosingTag:n(l)||(this.state=r.InAttributeName,this.sectionStart=this.index)},u.prototype.stateInSelfClosingTag=function(l){l===e.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(l)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l))},u.prototype.stateInAttributeName=function(l){(l===e.Eq||i(l))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=r.AfterAttributeName,this.stateAfterAttributeName(l))},u.prototype.stateAfterAttributeName=function(l){l===e.Eq?this.state=r.BeforeAttributeValue:l===e.Slash||l===e.Gt?(this.cbs.onattribend(s.NoValue,this.sectionStart),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l)):n(l)||(this.cbs.onattribend(s.NoValue,this.sectionStart),this.state=r.InAttributeName,this.sectionStart=this.index)},u.prototype.stateBeforeAttributeValue=function(l){l===e.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):l===e.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):n(l)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(l))},u.prototype.handleInAttributeValue=function(l,d){l===d||!this.decodeEntities&&this.fastForwardTo(d)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(d===e.DoubleQuote?s.Double:s.Single,this.index+1),this.state=r.BeforeAttributeName):this.decodeEntities&&l===e.Amp&&this.startEntity()},u.prototype.stateInAttributeValueDoubleQuotes=function(l){this.handleInAttributeValue(l,e.DoubleQuote)},u.prototype.stateInAttributeValueSingleQuotes=function(l){this.handleInAttributeValue(l,e.SingleQuote)},u.prototype.stateInAttributeValueNoQuotes=function(l){n(l)||l===e.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(l)):this.decodeEntities&&l===e.Amp&&this.startEntity()},u.prototype.stateBeforeDeclaration=function(l){l===e.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=l===e.Dash?r.BeforeComment:r.InDeclaration},u.prototype.stateInDeclaration=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateInProcessingInstruction=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateBeforeComment=function(l){l===e.Dash?(this.state=r.InCommentLike,this.currentSequence=o.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},u.prototype.stateInSpecialComment=function(l){(l===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},u.prototype.stateBeforeSpecialS=function(l){var d=l|32;d===o.ScriptEnd[3]?this.startSpecial(o.ScriptEnd,4):d===o.StyleEnd[3]?this.startSpecial(o.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(l))},u.prototype.stateBeforeSpecialT=function(l){var d=l|32;d===o.TitleEnd[3]?this.startSpecial(o.TitleEnd,4):d===o.TextareaEnd[3]?this.startSpecial(o.TextareaEnd,4):(this.state=r.InTagName,this.stateInTagName(l))},u.prototype.startEntity=function(){this.baseState=this.state,this.state=r.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?t.DecodingMode.Strict:this.baseState===r.Text||this.baseState===r.InSpecialTag?t.DecodingMode.Legacy:t.DecodingMode.Attribute)},u.prototype.stateInEntity=function(){var l=this.entityDecoder.write(this.buffer,this.index-this.offset);l>=0?(this.state=this.baseState,l===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1},u.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===r.InAttributeValueDq||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},u.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},u.prototype.parse=function(){for(;this.shouldContinue();){var l=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:{this.stateText(l);break}case r.SpecialStartSequence:{this.stateSpecialStartSequence(l);break}case r.InSpecialTag:{this.stateInSpecialTag(l);break}case r.CDATASequence:{this.stateCDATASequence(l);break}case r.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(l);break}case r.InAttributeName:{this.stateInAttributeName(l);break}case r.InCommentLike:{this.stateInCommentLike(l);break}case r.InSpecialComment:{this.stateInSpecialComment(l);break}case r.BeforeAttributeName:{this.stateBeforeAttributeName(l);break}case r.InTagName:{this.stateInTagName(l);break}case r.InClosingTagName:{this.stateInClosingTagName(l);break}case r.BeforeTagName:{this.stateBeforeTagName(l);break}case r.AfterAttributeName:{this.stateAfterAttributeName(l);break}case r.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(l);break}case r.BeforeAttributeValue:{this.stateBeforeAttributeValue(l);break}case r.BeforeClosingTagName:{this.stateBeforeClosingTagName(l);break}case r.AfterClosingTagName:{this.stateAfterClosingTagName(l);break}case r.BeforeSpecialS:{this.stateBeforeSpecialS(l);break}case r.BeforeSpecialT:{this.stateBeforeSpecialT(l);break}case r.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(l);break}case r.InSelfClosingTag:{this.stateInSelfClosingTag(l);break}case r.InDeclaration:{this.stateInDeclaration(l);break}case r.BeforeDeclaration:{this.stateBeforeDeclaration(l);break}case r.BeforeComment:{this.stateBeforeComment(l);break}case r.InProcessingInstruction:{this.stateInProcessingInstruction(l);break}case r.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()},u.prototype.finish=function(){this.state===r.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()},u.prototype.handleTrailingData=function(){var l=this.buffer.length+this.offset;this.sectionStart>=l||(this.state===r.InCommentLike?this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,l,0):this.cbs.oncomment(this.sectionStart,l,0):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,l))},u.prototype.emitCodePoint=function(l,d){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.onattribentity(l)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.ontextentity(l,this.sectionStart))},u}();return Ih.default=c,Ih}var pce;function _ce(){if(pce)return ab;pce=1;var t=E&&E.__createBinding||(Object.create?function(g,m,y,v){v===void 0&&(v=y);var A=Object.getOwnPropertyDescriptor(m,y);(!A||("get"in A?!m.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(g,v,A)}:function(g,m,y,v){v===void 0&&(v=y),g[v]=m[y]}),e=E&&E.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),r=E&&E.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&t(m,g,y);return e(m,g),m};Object.defineProperty(ab,"__esModule",{value:!0}),ab.Parser=void 0;var n=r(oRe()),i=sRe(),a=new Set(["input","option","optgroup","select","button","datalist","textarea"]),s=new Set(["p"]),o=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),u=new Set(["rt","rp"]),l=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",s],["h1",s],["h2",s],["h3",s],["h4",s],["h5",s],["h6",s],["select",a],["input",a],["output",a],["button",a],["datalist",a],["textarea",a],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",s],["article",s],["aside",s],["blockquote",s],["details",s],["div",s],["dl",s],["fieldset",s],["figcaption",s],["figure",s],["footer",s],["form",s],["header",s],["hr",s],["main",s],["nav",s],["ol",s],["pre",s],["section",s],["table",s],["ul",s],["rt",u],["rp",u],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//,_=function(){function g(m,y){y===void 0&&(y={});var v,A,T,S,P,j;this.options=y,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(v=y.lowerCaseTags)!==null&&v!==void 0?v:this.htmlMode,this.lowerCaseAttributeNames=(A=y.lowerCaseAttributeNames)!==null&&A!==void 0?A:this.htmlMode,this.recognizeSelfClosing=(T=y.recognizeSelfClosing)!==null&&T!==void 0?T:!this.htmlMode,this.tokenizer=new((S=y.Tokenizer)!==null&&S!==void 0?S:n.default)(this.options,this),this.foreignContext=[!this.htmlMode],(j=(P=this.cbs).onparserinit)===null||j===void 0||j.call(P,this)}return g.prototype.ontext=function(m,y){var v,A,T=this.getSlice(m,y);this.endIndex=y-1,(A=(v=this.cbs).ontext)===null||A===void 0||A.call(v,T),this.startIndex=y},g.prototype.ontextentity=function(m,y){var v,A;this.endIndex=y-1,(A=(v=this.cbs).ontext)===null||A===void 0||A.call(v,(0,i.fromCodePoint)(m)),this.startIndex=y},g.prototype.isVoidElement=function(m){return this.htmlMode&&d.has(m)},g.prototype.onopentagname=function(m,y){this.endIndex=y;var v=this.getSlice(m,y);this.lowerCaseTagNames&&(v=v.toLowerCase()),this.emitOpenTag(v)},g.prototype.emitOpenTag=function(m){var y,v,A,T;this.openTagStart=this.startIndex,this.tagname=m;var S=this.htmlMode&&l.get(m);if(S)for(;this.stack.length>0&&S.has(this.stack[0]);){var P=this.stack.shift();(v=(y=this.cbs).onclosetag)===null||v===void 0||v.call(y,P,!0)}this.isVoidElement(m)||(this.stack.unshift(m),this.htmlMode&&(f.has(m)?this.foreignContext.unshift(!0):h.has(m)&&this.foreignContext.unshift(!1))),(T=(A=this.cbs).onopentagname)===null||T===void 0||T.call(A,m),this.cbs.onopentag&&(this.attribs={})},g.prototype.endOpenTag=function(m){var y,v;this.startIndex=this.openTagStart,this.attribs&&((v=(y=this.cbs).onopentag)===null||v===void 0||v.call(y,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},g.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},g.prototype.onclosetag=function(m,y){var v,A,T,S,P,j,F,N;this.endIndex=y;var R=this.getSlice(m,y);if(this.lowerCaseTagNames&&(R=R.toLowerCase()),this.htmlMode&&(f.has(R)||h.has(R))&&this.foreignContext.shift(),this.isVoidElement(R))this.htmlMode&&R==="br"&&((S=(T=this.cbs).onopentagname)===null||S===void 0||S.call(T,"br"),(j=(P=this.cbs).onopentag)===null||j===void 0||j.call(P,"br",{},!0),(N=(F=this.cbs).onclosetag)===null||N===void 0||N.call(F,"br",!1));else{var C=this.stack.indexOf(R);if(C!==-1)for(var M=0;M<=C;M++){var U=this.stack.shift();(A=(v=this.cbs).onclosetag)===null||A===void 0||A.call(v,U,M!==C)}else this.htmlMode&&R==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=y+1},g.prototype.onselfclosingtag=function(m){this.endIndex=m,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},g.prototype.closeCurrentTag=function(m){var y,v,A=this.tagname;this.endOpenTag(m),this.stack[0]===A&&((v=(y=this.cbs).onclosetag)===null||v===void 0||v.call(y,A,!m),this.stack.shift())},g.prototype.onattribname=function(m,y){this.startIndex=m;var v=this.getSlice(m,y);this.attribname=this.lowerCaseAttributeNames?v.toLowerCase():v},g.prototype.onattribdata=function(m,y){this.attribvalue+=this.getSlice(m,y)},g.prototype.onattribentity=function(m){this.attribvalue+=(0,i.fromCodePoint)(m)},g.prototype.onattribend=function(m,y){var v,A;this.endIndex=y,(A=(v=this.cbs).onattribute)===null||A===void 0||A.call(v,this.attribname,this.attribvalue,m===n.QuoteType.Double?'"':m===n.QuoteType.Single?"'":m===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},g.prototype.getInstructionName=function(m){var y=m.search(p),v=y<0?m:m.substr(0,y);return this.lowerCaseTagNames&&(v=v.toLowerCase()),v},g.prototype.ondeclaration=function(m,y){this.endIndex=y;var v=this.getSlice(m,y);if(this.cbs.onprocessinginstruction){var A=this.getInstructionName(v);this.cbs.onprocessinginstruction("!".concat(A),"!".concat(v))}this.startIndex=y+1},g.prototype.onprocessinginstruction=function(m,y){this.endIndex=y;var v=this.getSlice(m,y);if(this.cbs.onprocessinginstruction){var A=this.getInstructionName(v);this.cbs.onprocessinginstruction("?".concat(A),"?".concat(v))}this.startIndex=y+1},g.prototype.oncomment=function(m,y,v){var A,T,S,P;this.endIndex=y,(T=(A=this.cbs).oncomment)===null||T===void 0||T.call(A,this.getSlice(m,y-v)),(P=(S=this.cbs).oncommentend)===null||P===void 0||P.call(S),this.startIndex=y+1},g.prototype.oncdata=function(m,y,v){var A,T,S,P,j,F,N,R,C,M;this.endIndex=y;var U=this.getSlice(m,y-v);!this.htmlMode||this.options.recognizeCDATA?((T=(A=this.cbs).oncdatastart)===null||T===void 0||T.call(A),(P=(S=this.cbs).ontext)===null||P===void 0||P.call(S,U),(F=(j=this.cbs).oncdataend)===null||F===void 0||F.call(j)):((R=(N=this.cbs).oncomment)===null||R===void 0||R.call(N,"[CDATA[".concat(U,"]]")),(M=(C=this.cbs).oncommentend)===null||M===void 0||M.call(C)),this.startIndex=y+1},g.prototype.onend=function(){var m,y;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var v=0;v<this.stack.length;v++)this.cbs.onclosetag(this.stack[v],!0)}(y=(m=this.cbs).onend)===null||y===void 0||y.call(m)},g.prototype.reset=function(){var m,y,v,A;(y=(m=this.cbs).onreset)===null||y===void 0||y.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(A=(v=this.cbs).onparserinit)===null||A===void 0||A.call(v,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1},g.prototype.parseComplete=function(m){this.reset(),this.end(m)},g.prototype.getSlice=function(m,y){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var v=this.buffers[0].slice(m-this.bufferOffset,y-this.bufferOffset);y-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),v+=this.buffers[0].slice(0,y-this.bufferOffset);return v},g.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},g.prototype.write=function(m){var y,v;if(this.ended){(v=(y=this.cbs).onerror)===null||v===void 0||v.call(y,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},g.prototype.end=function(m){var y,v;if(this.ended){(v=(y=this.cbs).onerror)===null||v===void 0||v.call(y,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},g.prototype.pause=function(){this.tokenizer.pause()},g.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},g.prototype.parseChunk=function(m){this.write(m)},g.prototype.done=function(m){this.end(m)},g}();return ab.Parser=_,ab}var mce;function Out(){return mce||(mce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(y,v,A,T){T===void 0&&(T=A);var S=Object.getOwnPropertyDescriptor(v,A);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[A]}}),Object.defineProperty(y,T,S)}:function(y,v,A,T){T===void 0&&(T=A),y[T]=v[A]}),r=E&&E.__setModuleDefault||(Object.create?function(y,v){Object.defineProperty(y,"default",{enumerable:!0,value:v})}:function(y,v){y.default=v}),n=E&&E.__importStar||function(y){if(y&&y.__esModule)return y;var v={};if(y!=null)for(var A in y)A!=="default"&&Object.prototype.hasOwnProperty.call(y,A)&&e(v,y,A);return r(v,y),v},i=E&&E.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.QuoteType=t.Tokenizer=t.createDomStream=t.createDocumentStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var a=_ce(),s=_ce();Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return s.Parser}});var o=hs(),c=hs();Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function u(y,v){var A=new o.DomHandler(void 0,v);return new a.Parser(A,v).end(y),A.root}t.parseDocument=u;function l(y,v){return u(y,v).children}t.parseDOM=l;function d(y,v,A){var T=new o.DomHandler(function(S){return y(S,T.root)},v,A);return new a.Parser(T,v)}t.createDocumentStream=d;function f(y,v,A){var T=new o.DomHandler(y,v,A);return new a.Parser(T,v)}t.createDomStream=f;var h=oRe();Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),Object.defineProperty(t,"QuoteType",{enumerable:!0,get:function(){return h.QuoteType}}),t.ElementType=n(Mf());var p=Du(),_=Du();Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return _.getFeed}});var g={xmlMode:!0};function m(y,v){return v===void 0&&(v=g),(0,p.getFeed)(l(y,v))}t.parseFeed=m,t.DomUtils=n(Du())}(x8)),x8}const Rut={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}};var gce;function Put(){if(gce)return ib;gce=1,Object.defineProperty(ib,"__esModule",{value:!0}),ib.MicrodataRdfParser=void 0;const t=Out(),e=Wt,r=tRe(),n=rRe(),i=iRe(),a=aRe(),s=iM(),o=Rut;let c=class IG extends e.Transform{constructor(l){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},l=l||{},this.options=l,this.util=new s.Util(l.dataFactory,l.baseIRI),this.defaultGraph=l.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=l.htmlParseListener,this.vocabRegistry=l.vocabRegistry||o,this.parser=this.initializeParser(!!l.xmlMode)}import(l){const d=new e.PassThrough({readableObjectMode:!0});l.on("error",h=>f.emit("error",h)),l.on("data",h=>d.push(h)),l.on("end",()=>d.push(null));const f=d.pipe(new IG(this.options));return f}_transform(l,d,f){this.parser.write(l.toString()),f()}_flush(l){this.parser.end(),l()}getItemScope(l){let d=this.itemScopeStack.length-(l?2:1);for(;d>0&&!this.itemScopeStack[d];)d--;return this.itemScopeStack[d]}getDepth(){return this.itemScopeStack.length}onTagOpen(l,d){if(!this.isEmittingReferences){if("id"in d){const h=d.id;this.pendingItemRefsRangeCollecting[h]={events:[],counter:0,ids:[]}}for(const h of Object.values(this.pendingItemRefsRangeCollecting))h.counter++,h.events.push({type:"open",name:l,attributes:d})}this.textBufferStack.push(void 0);let f;if("itemscope"in d){let h;if(this.emittingReferencesItemScopeIdGenerator)h=this.emittingReferencesItemScopeIdGenerator();else{h="itemid"in d&&this.util.createSubject(d.itemid)||this.util.dataFactory.blankNode();for(const _ of Object.values(this.pendingItemRefsRangeCollecting))_.ids.push(h)}f={subject:h},this.isEmittingReferences&&(f.blockEmission=!0);const p=this.getItemScope();p&&p.vocab&&(f.vocab=p.vocab),this.itemScopeStack.push(f)}else f=this.getItemScope(),this.itemScopeStack.push(void 0);if(f){if("itemtype"in d)for(const h of this.util.createVocabIris(d.itemtype,f,!1))f.vocab||(f.vocab=this.util.deriveVocab(h.value,this.vocabRegistry)),f.blockEmission||this.emitTriple(f.subject,this.util.dataFactory.namedNode(`${s.Util.RDF}type`),h);if("lang"in d&&(f.language=d.lang),"xml:lang"in d&&(f.language=d["xml:lang"]),"itemscope"in d&&!this.isEmittingReferences&&"itemref"in d)for(const h of d.itemref.split(/\s+/u))h in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[h]=[]),this.pendingItemRefsDomain[h].push(f),this.tryToEmitReferences(h,f)}"itemprop"in d&&this.handleItemProperties(d.itemprop,!1,f,l,d),"itemprop-reverse"in d&&this.handleItemProperties(d["itemprop-reverse"],!0,f,l,d)}onText(l){if(!this.isEmittingReferences)for(const d of Object.values(this.pendingItemRefsRangeCollecting))d.events.push({type:"text",data:l});for(const d of this.textBufferStack)d&&d.push(l)}onTagClose(){if(!this.isEmittingReferences)for(const[d,f]of Object.entries(this.pendingItemRefsRangeCollecting))f.counter--,f.events.push({type:"close"}),f.counter===0&&(this.pendingItemRefsRangeFinalized[d]=f,delete this.pendingItemRefsRangeCollecting[d],this.tryToEmitReferences(d));const l=this.getItemScope(!0);if(l){const d=this.getDepth();if(l.predicates&&d in l.predicates)for(const[f,h]of Object.entries(l.predicates[d])){const p=this.util.createLiteral(this.textBufferStack[d].join(""),l);this.emitPredicateTriples(l,h,p,f==="reverse"),delete l.predicates[d][f]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(l){return new t.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(d){this.emit("error",d)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(d){this.emit("error",d)}},onopentag:(d,f)=>{try{this.onTagOpen(d,f),this.htmlParseListener&&this.htmlParseListener.onTagOpen(d,f)}catch(h){this.emit("error",h)}},ontext:d=>{try{this.onText(d),this.htmlParseListener&&this.htmlParseListener.onText(d)}catch(f){this.emit("error",f)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:l})}handleItemProperties(l,d,f,h,p){const _=this.getItemScope(!0);if(_){const g=this.getDepth(),m=this.util.createVocabIris(l,_,!0);_.predicates||(_.predicates={}),_.predicates[g]||(_.predicates[g]={});const y=d?"reverse":"forward";_.predicates[g][y]=m;for(const v of this.util.getVocabularyExpansionType(l,_,this.vocabRegistry))m.push(v);if(f&&"itemscope"in p)this.emitPredicateTriples(_,m,f.subject,d),delete _.predicates[g][y];else for(const v of IG.ITEM_PROPERTY_HANDLERS)if(v.canHandle(h,p)){const A=v.getObject(p,this.util,_);this.emitPredicateTriples(_,m,A,d),delete _.predicates[g][y]}_.predicates[g][y]&&(this.textBufferStack[g]=[])}}emitPredicateTriples(l,d,f,h){if(!l.blockEmission)for(const p of d)h?f.termType!=="Literal"&&this.emitTriple(f,p,l.subject):this.emitTriple(l.subject,p,f)}emitTriple(l,d,f){this.push(this.util.dataFactory.quad(l,d,f,this.defaultGraph))}tryToEmitReferences(l,d){const f=this.pendingItemRefsRangeFinalized[l];if(f){let h;if(d){h=[d];const p=this.pendingItemRefsDomain[l].indexOf(d);this.pendingItemRefsDomain[l].splice(p,1)}else h=this.pendingItemRefsDomain[l],delete this.pendingItemRefsDomain[l];if(h){const p=this.itemScopeStack,_=this.textBufferStack;this.isEmittingReferences=!0;for(const g of h){this.itemScopeStack=[g],this.textBufferStack=[void 0];const m=[...f.ids];this.emittingReferencesItemScopeIdGenerator=()=>m.shift();for(const y of f.events)switch(y.type){case"open":this.onTagOpen(y.name,y.attributes);break;case"text":this.onText(y.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=p,this.textBufferStack=_,this.isEmittingReferences=!1}}}};return ib.MicrodataRdfParser=c,c.ITEM_PROPERTY_HANDLERS=[new r.ItemPropertyHandlerContent,new a.ItemPropertyHandlerUrl("a","href"),new a.ItemPropertyHandlerUrl("area","href"),new a.ItemPropertyHandlerUrl("audio","src"),new a.ItemPropertyHandlerUrl("embed","src"),new a.ItemPropertyHandlerUrl("iframe","src"),new a.ItemPropertyHandlerUrl("img","src"),new a.ItemPropertyHandlerUrl("link","href"),new a.ItemPropertyHandlerUrl("object","data"),new a.ItemPropertyHandlerUrl("source","src"),new a.ItemPropertyHandlerUrl("track","src"),new a.ItemPropertyHandlerUrl("video","src"),new n.ItemPropertyHandlerNumber("data","value"),new n.ItemPropertyHandlerNumber("meter","value"),new i.ItemPropertyHandlerTime],ib}var yce;function Nut(){return yce||(yce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tut(),t),r(tRe(),t),r(rRe(),t),r(iRe(),t),r(aRe(),t),r(wut(),t),r(Sut(),t),r(xut(),t),r(Put(),t),r(iM(),t)}(v8)),v8}var bce;function Fut(){if(bce)return Yy;bce=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.ActorRdfParseHtmlMicrodata=void 0;const t=oQ(),e=dt,r=ke(),n=Nut();let i=class extends t.ActorRdfParseHtml{constructor(s){super(s)}async test(s){return(0,r.passTestVoid)()}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=s.headers?s.headers.get("content-type"):null,u=c==null?void 0:c.includes("xml"),l=new n.MicrodataRdfParser({dataFactory:o,baseIRI:s.baseIRI,xmlMode:u});l.on("error",s.error),l.on("data",s.emit);const d=l.onEnd;return l.onEnd=()=>{d.call(l),s.end()},{htmlParseListener:l}}};return Yy.ActorRdfParseHtmlMicrodata=i,Yy}var vce;function Mut(){return vce||(vce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fut(),t)}(y8)),y8}var O8={},sb={},Ace;function Dut(){if(Ace)return sb;Ace=1,Object.defineProperty(sb,"__esModule",{value:!0}),sb.ActorRdfParseHtmlRdfa=void 0;const t=oQ(),e=dt,r=ke(),n=P2e();let i=class extends t.ActorRdfParseHtml{constructor(s){super(s)}async test(s){return(0,r.passTestVoid)()}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=s.headers?s.headers.get("content-type"):null,u=(s.headers&&s.headers.get("content-language"))??void 0,l=c&&c.includes("xml")?"xhtml":"html",d=new n.RdfaParser({dataFactory:o,baseIRI:s.baseIRI,profile:l,language:u});d.on("error",s.error),d.on("data",s.emit);const f=d.onEnd;return d.onEnd=()=>{f.call(d),s.end()},{htmlParseListener:d}}};return sb.ActorRdfParseHtmlRdfa=i,sb}var Tce;function Cut(){return Tce||(Tce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dut(),t)}(O8)),O8}var R8={},ob={},P8={},ub={},wce;function Lut(){if(wce)return ub;wce=1,Object.defineProperty(ub,"__esModule",{value:!0}),ub.ActorRdfResolveHypermediaLinks=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return ub.ActorRdfResolveHypermediaLinks=e,ub}var Sce;function jut(){return Sce||(Sce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lut(),t)}(P8)),P8}var xce;function But(){if(xce)return ob;xce=1,Object.defineProperty(ob,"__esModule",{value:!0}),ob.ActorRdfResolveHypermediaLinksNext=void 0;const t=jut(),e=ke();let r=class extends t.ActorRdfResolveHypermediaLinks{constructor(i){super(i)}async test(i){return!i.metadata.next||i.metadata.next.length===0?(0,e.failTest)(`Actor ${this.name} requires a 'next' metadata entry.`):(0,e.passTestVoid)()}async run(i){return{links:i.metadata.next.map(a=>({url:a}))}}};return ob.ActorRdfResolveHypermediaLinksNext=r,ob}var Ece;function qut(){return Ece||(Ece=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(But(),t)}(R8)),R8}var N8={},cb={},F8={},lb={},Ice;function Uut(){if(Ice)return lb;Ice=1,Object.defineProperty(lb,"__esModule",{value:!0}),lb.ActorRdfResolveHypermediaLinksQueue=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return lb.ActorRdfResolveHypermediaLinksQueue=e,lb}var db={},Oce;function Vut(){if(Oce)return db;Oce=1,Object.defineProperty(db,"__esModule",{value:!0}),db.LinkQueueWrapper=void 0;let t=class{constructor(r){k(this,"linkQueue");this.linkQueue=r}push(r,n){return this.linkQueue.push(r,n)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}};return db.LinkQueueWrapper=t,db}var Rce;function Gut(){return Rce||(Rce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Uut(),t),r(Vut(),t)}(F8)),F8}var fb={},Pce;function uRe(){if(Pce)return fb;Pce=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.LinkQueueFifo=void 0;let t=class{constructor(){k(this,"links",[])}push(r){return this.links.push(r),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}};return fb.LinkQueueFifo=t,fb}var Nce;function Hut(){if(Nce)return cb;Nce=1,Object.defineProperty(cb,"__esModule",{value:!0}),cb.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const t=Gut(),e=ke(),r=uRe();let n=class extends t.ActorRdfResolveHypermediaLinksQueue{constructor(a){super(a)}async test(a){return(0,e.passTestVoid)()}async run(a){return{linkQueue:new r.LinkQueueFifo}}};return cb.ActorRdfResolveHypermediaLinksQueueFifo=n,cb}var Fce;function kut(){return Fce||(Fce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hut(),t),r(uRe(),t)}(N8)),N8}var M8={},hb={},D8={},pb={},Mce;function zut(){if(Mce)return pb;Mce=1,Object.defineProperty(pb,"__esModule",{value:!0}),pb.ActorRdfSerialize=void 0;const t=h0();let e=class extends t.ActorAbstractMediaTyped{constructor(n){super(n)}};return pb.ActorRdfSerialize=e,pb}var _b={},Dce;function Qut(){if(Dce)return _b;Dce=1,Object.defineProperty(_b,"__esModule",{value:!0}),_b.ActorRdfSerializeFixedMediaTypes=void 0;const t=h0(),e=ke();let r=class extends t.ActorAbstractMediaTypedFixed{constructor(i){super(i)}async testHandleChecked(){return(0,e.passTestVoid)()}};return _b.ActorRdfSerializeFixedMediaTypes=r,_b}var Cce;function uQ(){return Cce||(Cce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(zut(),t),r(Qut(),t)}(D8)),D8}const yd="http://www.w3.org/1999/02/22-rdf-syntax-ns#",mb="http://www.w3.org/2001/XMLSchema#",cP="http://www.w3.org/2000/10/swap/",Mn={xsd:{decimal:`${mb}decimal`,boolean:`${mb}boolean`,double:`${mb}double`,integer:`${mb}integer`,string:`${mb}string`},rdf:{type:`${yd}type`,nil:`${yd}nil`,first:`${yd}first`,rest:`${yd}rest`,langString:`${yd}langString`,dirLangString:`${yd}dirLangString`,reifies:`${yd}reifies`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${cP}reify#forSome`,forAll:`${cP}reify#forAll`},log:{implies:`${cP}log#implies`,isImpliedBy:`${cP}log#isImpliedBy`}},{xsd:lP}=Mn,Wut=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Lce={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Kut=/[\x00-\x20<>\\"\{\}\|\^\`]/,Xut={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_dircode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Jut=/$0^/;let cQ=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9])/i,this._dircode=/^--(ltr)|(rtl)/,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._atKeyword=/^@[a-z]+(?=[\s#<:])/i,this._keyword=/^(?:PREFIX|BASE|VERSION|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in Xut)&&this[r]instanceof RegExp&&(this[r]=Jut)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let o,c;for(;o=this._newline.exec(n);)this.comments&&(c=this._comment.exec(o[0]))&&a("comment",c[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),i=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(c=this._comment.exec(n))&&a("comment",c[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const u=this._line,l=n[0];let d="",f="",h="",p=null,_=0,g=!1;switch(l){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){g=!0;break}}else{this._n3Mode&&(_=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),f===null||Kut.test(f))return s(this);d="IRI"}else n.length>2&&n[1]==="<"&&n[2]==="("?(d="<<(",_=3):!this._lineMode&&n.length>(r?1:2)&&n[1]==="<"?(d="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(_=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",_=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))&&p[1]!=="version"?(d="langcode",f=p[1]):(p=this._atKeyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){d=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":if(n[1]==="-"){this._previousMarker==="langcode"&&(p=this._dircode.exec(n))&&(d="dircode",_=2,f=p[1]||p[2],_=f.length+2);break}(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h=typeof p[1]=="string"?lP.double:typeof p[2]=="string"?lP.decimal:lP.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":case"V":case"v":(p=this._keyword.exec(n))?d=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=lP.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(_=1,f="="):(_=2,f=">"));break;case"!":if(!this._n3Mode)break;case")":if(!r&&(n.length===1||n.length===2&&n[1]===">"))break;if(n.length>2&&n[1]===">"&&n[2]===">"){d=")>>",_=3;break}case",":case";":case"[":case"]":case"(":case"}":case"~":this._lineMode||(_=1,d=l);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",_=2):(d=l,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",_=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",f=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const m=_||p[0].length,y=a(d,f,h,u,m);this.previousToken=y,this._previousMarker=d,n=n.substr(m,n.length)}function a(o,c,u,l,d){const f=n?i-n.length:i,h=f+d,p={type:o,value:c,prefix:u,line:l,start:f,end:h};return e(null,p),p}function s(o){e(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(Wut,(i,a,s,o)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return o in Lce?Lce[o]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const s=e.substring(n,i),o=s.split(/\r\n|\r|\n/).length-1,c=i+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(s),matchLength:c}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,s)=>a?i=a:n.push(s),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Ni.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}};const{rdf:jce,xsd:Ud}=Mn;let y0,Yut=0;const Xs={namedNode:dRe,blankNode:fRe,variable:pRe,literal:hRe,defaultGraph:$ut,quad:OG,triple:OG,fromTerm:wE,fromQuad:_Re};let to=class cRe{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof cRe?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},aM=class extends to{get termType(){return"NamedNode"}},ef=class lRe extends to{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;const n=e.lastIndexOf("--");return r<e.length&&e[r++]==="@"?(n>r?e.substr(0,n):e).substr(r).toLowerCase():""}get direction(){const e=this.id,r=e.lastIndexOf("--")+2;return r>1&&r<e.length?e.substr(r).toLowerCase():""}get datatype(){return new aM(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?Ud.string:e.indexOf("--",r)>0?jce.dirLangString:jce.langString}equals(e){return e instanceof lRe?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(this.direction===e.direction||this.direction===""&&!e.direction)&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,direction:this.direction,datatype:{termType:"NamedNode",value:this.datatypeString}}}},lQ=class extends to{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},dQ=class extends to{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},fQ=class extends to{constructor(){return super(""),y0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};y0=new fQ;function tf(t,e,r){if(e=e||Xs,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Xs)return new ef(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);let i;if(t[n+1]==="@"){i=t.substr(n+2);const a=i.lastIndexOf("--");a>0&&a<i.length&&(i={language:i.substr(0,a),direction:i.substr(a+2)})}else i=e.namedNode(t.substr(n+3));return e.literal(t.substr(1,n-1),i);case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(tf(t[0],e,!0),tf(t[1],e,!0),tf(t[2],e,!0),t[3]&&tf(t[3],e,!0))}function cl(t,e){if(typeof t=="string")return t;if(t instanceof to&&t.termType!=="Quad")return t.id;if(!t)return y0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}${t.direction?`--${t.direction}`:""}`:t.datatype&&t.datatype.value!==Ud.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[cl(t.subject,!0),cl(t.predicate,!0),cl(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(cl(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}let Qp=class extends to{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||y0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function dRe(t){return new aM(t)}function fRe(t){return new lQ(t||`n3-${Yut++}`)}function hRe(t,e){if(typeof e=="string")return new ef(`"${t}"@${e.toLowerCase()}`);if(e!==void 0&&!("termType"in e))return new ef(`"${t}"@${e.language.toLowerCase()}${e.direction?`--${e.direction.toLowerCase()}`:""}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=Ud.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?Ud.integer:Ud.double:(r=Ud.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===Ud.string?new ef(`"${t}"`):new ef(`"${t}"^^${r}`)}function pRe(t){return new dQ(t)}function $ut(){return y0}function OG(t,e,r,n){return new Qp(t,e,r,n)}function wE(t){if(t instanceof to)return t;switch(t.termType){case"NamedNode":return dRe(t.value);case"BlankNode":return fRe(t.value);case"Variable":return pRe(t.value);case"DefaultGraph":return y0;case"Literal":return hRe(t.value,t.language||t.datatype);case"Quad":return _Re(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function _Re(t){if(t instanceof Qp)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return OG(wE(t.subject),wE(t.predicate),wE(t.object),wE(t.graph))}let Bce=0,IO=class mRe{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&gRe(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),o=this._n3Mode=/n3/.test(r),c=a||s;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||o),this._isImpliedBy=e.isImpliedBy,c&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new cQ({lineMode:c,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers,this._parseUnsupportedVersions=!!e.parseUnsupportedVersions,this._version=e.version}static _resetBlankNodePrefix(){Bce=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const s=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readBeforeTopContext(e){return this._version&&!this._isValidVersion(this._version)?this._error(`Detected unsupported version as media type parameter: "${this._version}"`,e):this._readInTopContext(e)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"VERSION":this._sparqlStyle=!0;case"@version":return this._readVersion;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(a+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<(":return this._n3Mode?(this._saveContext("<<(",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Disallowed triple term as subject",e);case"<<":return this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject;default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":case"|}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._validAnnotation=!0,this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<(":return this._saveContext("<<(",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;case"<<":return this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){if(e.type==="]")return this._subject=null,this._readBlankNodeTail(e);{const r=this._contextStack;return(r.length>1&&r[r.length-2]).type==="<<"?this._error("Unexpected compound blank node expression in reified triple",e):(this._predicate=null,this._readPredicate(e))}}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,s=this._contextStack,o=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":this._saveContext("<<",this._graph,null,null,null),this._graph=null,i=this._readSubject;break;default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),e.type==="<<"&&(s[s.length-1].subject=this._subject),a===null?o.predicate===null?o.subject=n:o.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e,r){let n=this._factory.literal(this._literalValue),i;switch(e.type){case"type":case"typeIRI":const a=this._readEntity(e);if(a===void 0)return;if(a.value===Mn.rdf.langString||a.value===Mn.rdf.dirLangString)return this._error("Detected illegal (directional) languaged-tagged string with explicit datatype",e);n=this._factory.literal(this._literalValue,a),e=null;break;case"langcode":if(e.value.length>8)return this._error("Detected language tag of length larger than 8",e);n=this._factory.literal(this._literalValue,e.value),this._literalLanguage=e.value,e=null,i=this._readDirCode.bind(this,r);break}return{token:e,literal:n,readCb:i}}_readDirCode(e,r,n){if(n.type==="dircode"){const i=this._factory.literal(this._literalValue,{language:this._literalLanguage,direction:n.value});e==="subject"?this._subject=i:this._object=i,this._literalLanguage=void 0,n=null}return e==="subject"?n===null?this._readPredicateOrNamedGraph:this._readPredicateOrNamedGraph(n):this._completeObjectLiteralPost(n,r)}_completeSubjectLiteral(e){const r=this._completeLiteral(e,"subject");return this._subject=r.literal,r.readCb?r.readCb.bind(this,!1):this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e,"object");if(n)return this._object=n.literal,n.readCb?n.readCb.bind(this,r):this._completeObjectLiteralPost(n.token,r)}_completeObjectLiteralPost(e,r){return r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),e===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(e))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,i=!1;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,this._tripleTerm=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"~":r=this._readReifierInAnnotation,i=!0;break;case"{|":this._subject=this._readTripleTerm(),this._validAnnotation=!1,i=!0,r=this._readPredicate;break;case"|}":if(!this._annotation)return this._error("Unexpected annotation syntax closing",e);if(!this._validAnnotation)return this._error("Annotation block can not be empty",e);this._subject=null,this._annotation=!1,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null&&(!i||i&&!this._annotation)){const o=this._predicate,c=this._object;s?this._emit(c,o,a,n):this._emit(a,o,c,n)}return i&&(this._annotation=!0),r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_isValidVersion(e){return this._parseUnsupportedVersions||mRe.SUPPORTED_VERSIONS.includes(e)}_readVersion(e){return e.type!=="literal"?this._error("Expected literal to follow version declaration",e):e.end-e.start!==e.value.length+2?this._error("Version declarations must use single quotes",e):(this._versionCallback(e.value),this._isValidVersion(e.value)?this._readDeclarationPunctuation:this._error(`Detected unsupported version: "${e.value}"`,e))}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._factory.blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readTripleTermTail(e){if(e.type!==")>>")return this._error(`Expected )>> but got ${e.type}`,e);const r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<(",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_readReifiedTripleTailOrReifier(e){return e.type==="~"?this._readReifier:this._readReifiedTripleTail(e)}_readReifiedTripleTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);this._tripleTerm=null;const r=this._readTripleTerm();this._restoreContext("<<",e);const n=this._contextStack,i=n.length&&n[n.length-1];return i&&i.type==="list"?(this._emit(this._subject,this.RDF_FIRST,r,this._graph),this._getContextEndReader()):this._subject===null?(this._subject=r,this._readPredicateOrReifierTripleEnd):(this._object=r,this._getContextEndReader())}_readPredicateOrReifierTripleEnd(e){return e.type==="."?(this._subject=null,this._readPunctuation(e)):this._readPredicate(e)}_readReifier(e){return this._reifier=this._readEntity(e),this._readReifiedTripleTail}_readReifierInAnnotation(e){return e.type==="IRI"||e.type==="typeIRI"||e.type==="type"||e.type==="prefixed"||e.type==="blank"||e.type==="var"?(this._reifier=this._readEntity(e),this._readPunctuation):(this._readTripleTerm(),this._subject=null,this._readPunctuation(e))}_readTripleTerm(){const e=this._contextStack,r=e.length&&e[e.length-1],n=r?r.graph:void 0,i=this._reifier||this._factory.blankNode();return this._reifier=null,this._tripleTerm=this._tripleTerm||this._factory.quad(this._subject,this._predicate,this._object),this._emit(i,this.RDF_REIFIES,this._tripleTerm,n||this.DEFAULTGRAPH),i}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<(":return this._readTripleTermTail;case"<<":return this._readReifiedTripleTailOrReifier}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=gb}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,s=0,o="/";for(;i<r;){switch(o){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(o=e[++i+1],o){case"/":n+=e.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return n+e.substring(s,i)+e.substr(i+1);case".":if(o=e[++i+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=e.substring(s,i-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),o!=="/")return`${n}/${e.substr(i+1)}`;s=i+1}}}o=e[++i]}return n+e.substring(s)}parse(e,r,n,i){let a,s,o,c;if(r&&(r.onQuad||r.onPrefix||r.onComment||r.onVersion)?(a=r.onQuad,s=r.onPrefix,o=r.onComment,c=r.onVersion):(a=r,s=n,c=i),this._readCallback=this._readBeforeTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Bce++}_`,this._prefixCallback=s||gb,this._versionCallback=c||gb,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const l=[];let d;if(this._callback=(f,h)=>{f?d=f:h&&l.push(h)},this._lexer.tokenize(e).every(f=>this._readCallback=this._readCallback(f)),d)throw d;return l}let u=(l,d)=>{l!==null?(this._callback(l),this._callback=gb):this._readCallback&&(this._readCallback=this._readCallback(d))};o&&(this._lexer.comments=!0,u=(l,d)=>{l!==null?(this._callback(l),this._callback=gb):this._readCallback&&(d.type==="comment"?o(d.value):this._readCallback=this._readCallback(d))}),this._callback=a,this._lexer.tokenize(e,u)}};function gb(){}function gRe(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(Mn.rdf.first),t.RDF_REST=e.namedNode(Mn.rdf.rest),t.RDF_NIL=e.namedNode(Mn.rdf.nil),t.RDF_REIFIES=e.namedNode(Mn.rdf.reifies),t.N3_FORALL=e.namedNode(Mn.r.forAll),t.N3_FORSOME=e.namedNode(Mn.r.forSome),t.ABBREVIATIONS={a:e.namedNode(Mn.rdf.type),"=":e.namedNode(Mn.owl.sameAs),">":e.namedNode(Mn.log.implies),"<":e.namedNode(Mn.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}IO.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"];gRe(IO.prototype,Xs);function Zut(t){return!!t&&t.termType==="NamedNode"}function ect(t){return!!t&&t.termType==="BlankNode"}function tct(t){return!!t&&t.termType==="Literal"}function rct(t){return!!t&&t.termType==="Variable"}function nct(t){return!!t&&t.termType==="Quad"}function BI(t){return!!t&&t.termType==="DefaultGraph"}function ict(t){return BI(t.graph)}function act(t,e){return yRe({"":t.value||t},e)("")}function yRe(t,e){const r=Object.create(null);for(const i in t)n(i,t[i]);e=e||Xs;function n(i,a){if(typeof a=="string"){const s=Object.create(null);r[i]=o=>s[o]||(s[o]=e.namedNode(a+o))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}const bRe=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:ict,isBlankNode:ect,isDefaultGraph:BI,isLiteral:tct,isNamedNode:Zut,isQuad:nct,isVariable:rct,prefix:act,prefixes:yRe},Symbol.toStringTag,{value:"Module"}));function D3(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const sct=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,oct=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,qce="./",uct="../",C8="?",Uce="#";let hQ=class vRe{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!sct.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!vRe.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",D3(e)],n=[],i=[],a=/[^/?#]*([/?#])/y;let s,o=0,c=0,u=a.lastIndex=e.length;for(;!o&&!c&&(s=a.exec(this.base));)s[1]===Uce?c=a.lastIndex-1:(r.push(D3(s[0]),"(?:"),n.push(")?"),s[1]!==C8?i.push(u=a.lastIndex):(o=u=a.lastIndex,c=this.base.indexOf(Uce,o),this._pathReplacements[o]=C8));for(let l=0;l<i.length;l++)this._pathReplacements[i[l]]=uct.repeat(i.length-l-1);return this._pathReplacements[i[i.length-1]]=qce,this._baseLength=c>0?c:this.base.length,r.push(D3(this.base.substring(u,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){const r=this._getBaseMatcher().exec(e);if(!r)return e;const n=r[0].length;if(n===this._baseLength&&n===e.length)return"";const i=this._pathReplacements[n];if(i){const a=e.substring(n);return i!==C8&&!oct.test(a)?e:i===qce&&/^[^?#]/.test(a)?a:i+a}return e.substring(n-1)}};const yb=Xs.defaultGraph(),{rdf:cct,xsd:Oh}=Mn,Vce=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Gce=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,lct={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};let bb=class extends to{equals(e){return e===this}},OO=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,s){n+=i,s&&s()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=yb,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new hQ(r.baseIRI)))}get _inDefaultGraph(){return yb.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(yb.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),Vce.test(r)&&(r=r.replace(Gce,Hce));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;Vce.test(r)&&(r=r.replace(Gce,Hce));const n=e.direction?`--${e.direction}`:"";if(e.language)return`"${r}"@${e.language}${n}`;if(this._lineMode){if(e.datatype.value===Oh.string)return`"${r}"`}else switch(e.datatype.value){case Oh.string:return`"${r}"`;case Oh.boolean:if(r==="true"||r==="false")return r;break;case Oh.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Oh.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Oh.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===cct.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<(${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${BI(i)?"":` ${this._encodeIriOrBlank(i)}`})>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,yb,i):this._writeQuad(e,r,n,i||yb,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];i=D3(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new bb("[]");case 1:if(i=n[0],!(i.object instanceof bb))return new bb(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let o=0;o<a;o++)i=n[o],i.predicate.equals(e)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(o?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new bb(`${s}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new bb(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function Hce(t){let e=lct[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const L8=Symbol("iter");function $E(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=$E(t[n]||Object.create(null),e[n],r-1);return t}function ARe(t,e,r=4){let n=!1;for(const i in t)if(i in e){const a=r===0?null:ARe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}function TRe(t,e,r=4){let n=!1;for(const i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:$E({},t[i],r-1);else if(r!==0){const a=TRe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}let pQ=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||Xs}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return tf(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(BI(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[cl(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${BI(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:cl(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}},sM=class ts{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||Xs,this._entityIndex=r.entityIndex||new pQ({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const s in n=r[a].subjects)for(const o in i=n[s])e+=Object.keys(i[o]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),s=a[n]||(a[n]={}),o=i in s;return o||(s[i]=null),!o}_removeFromIndex(e,r,n,i){const a=e[r],s=a[n];delete s[i];for(const o in s)return;delete a[n];for(const o in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,s,o,c){let u,l,d;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(const _ in e)if(l=e[_]){p[a]=this._termFromId(f[_]),n&&((u=l,l={})[n]=u[n]);for(const g in l)if(d=l[g]){p[s]=this._termFromId(f[g]);const m=i?i in d?[i]:[]:Object.keys(d);for(let y=0;y<m.length;y++)p[o]=this._termFromId(f[m[y]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,s,o;if((a=e[r])&&(s=a[n]))for(o in s)i(o)}_countInIndex(e,r,n,i){let a=0,s,o,c;r&&((s=e,e={})[r]=s[r]);for(const u in e)if(o=e[u]){n&&((s=o,o={})[n]=s[n]);for(const l in o)(c=o[l])&&(i?i in c&&a++:a+=Object.keys(c).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;const a=this._graphs;let s,o,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(s=a[i])||!(o=s.subjects[e])||!(c=o[r])||!(n in c))return!1;this._removeFromIndex(s.subjects,e,r,n),this._removeFromIndex(s.predicates,r,n,e),this._removeFromIndex(s.objects,n,e,r),this._size!==null&&this._size--;for(e in s.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Wt.Readable({objectMode:!0}),s=this.readQuads(e,r,n,i);return a._read=o=>{for(;--o>=0;){const{done:c,value:u}=s.next();if(c){a.push(null);return}a.push(u)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let s,o,c,u;if(!(e&&!(o=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(const l in a)(s=a[l])&&(o?u?yield*this._findInIndex(s.objects,u,o,c,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,o,c,null,"subject","predicate","object",l):c?yield*this._findInIndex(s.predicates,c,u,null,"predicate","object","subject",l):u?yield*this._findInIndex(s.objects,u,null,null,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",l))}match(e,r,n,i){return new Rh(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let s=0,o,c,u,l;if(e&&!(c=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n)))return 0;for(const d in a)(o=a[d])&&(e?n?s+=this._countInIndex(o.objects,l,c,u):s+=this._countInIndex(o.subjects,c,u,l):r?s+=this._countInIndex(o.predicates,u,l,c):s+=this._countInIndex(o.objects,l,c,u));return s}forEach(e,r,n,i,a){this.some(s=>(e(s,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(s=>!e(s,this),r,n,i,a)}some(e,r,n,i,a){for(const s of this.readQuads(r,n,i,a))if(e(s,this))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.predicates,o,c,e):this._loopByKey1(s.subjects,o,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.objects,c,o,e):this._loopByKey0(s.subjects,o,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.subjects,o,c,e):this._loopByKey1(s.objects,o,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(s=>(e(s.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(o,c)=>{throw new Error(`${o.value} ${c}`)},a=this.getQuads(null,Mn.rdf.rest,Mn.rdf.nil,null),s=e?[...a]:[];return a.forEach(o=>{const c=[];let u=!1,l,d;const f=o.graph;let h=o.subject;for(;h&&!u;){const p=this.getQuads(null,null,h,null),_=this.getQuads(h,null,null,null);let g,m=null,y=null,v=null;for(let A=0;A<_.length&&!u;A++)g=_[A],g.graph.equals(f)?l?u=i(h,"has non-list arcs out"):g.predicate.value===Mn.rdf.first?m?u=i(h,"has multiple rdf:first arcs"):s.push(m=g):g.predicate.value===Mn.rdf.rest?y?u=i(h,"has multiple rdf:rest arcs"):s.push(y=g):p.length?u=i(h,"can't be subject and object"):(l=g,d="subject"):u=i(h,"not confined to single graph");for(let A=0;A<p.length&&!u;++A)g=p[A],l?u=i(h,"can't have coreferences"):g.predicate.value===Mn.rdf.rest?v?u=i(h,"has incoming rdf:rest arcs"):v=g:(l=g,d="object");m?c.unshift(m.object):u=i(h,"has no list head"),h=v&&v.subject}u?e=!1:l&&(n[l[d].value]=c)}),e&&this.removeQuads(s),n}addAll(e){if(e instanceof Rh&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof ts&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=$E(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e instanceof Rh&&(e=e.filtered),e===this)return!0;if(!(e instanceof ts)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));const r=this._graphs,n=e._graphs;let i,a,s,o,c;for(const u in n){if(!(i=r[u]))return!1;i=i.subjects;for(const l in a=n[u].subjects){if(!(s=i[l]))return!1;for(const d in o=a[l]){if(!(c=s[d]))return!1;for(const f in o[d])if(!(f in c))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){if(e&&e instanceof Rh&&(e=e.filtered),e===this)return new ts({entityIndex:this._entityIndex});if(e instanceof ts&&e._entityIndex===this._entityIndex){const r=new ts({entityIndex:this._entityIndex}),n=TRe(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof Rh&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new ts({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof Rh&&(e=e.filtered),e===this){const r=new ts({entityIndex:this._entityIndex});return r._graphs=$E(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof ts&&this._entityIndex===e._entityIndex){const r=new ts({entityIndex:this._entityIndex}),n=ARe(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){const r=new ts({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new OO().quadsToString(this)}union(e){const r=new ts({entityIndex:this._entityIndex});return r._graphs=$E(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function yo(t,e,r=0){const n=e[r];if(n&&!(n in t))return!1;let i=!1;for(const a in n?{[n]:t[n]}:t){const s=r===2?null:yo(t[a],e,r+1);s!==!1&&(i=i||Object.create(null),i[a]=s)}return i}let Rh=class wRe extends Wt.Readable{constructor(e,r,n,i,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,s=this._filtered=new sM({factory:e._factory,entityIndex:this.options.entityIndex});let o,c,u;if(a&&!(o=s._termToNumericId(a))||i&&!(c=s._termToNumericId(i))||n&&!(u=s._termToNumericId(n)))return s;const l=e._getGraphs(r);for(const d in l){let f,h,p,_;(_=l[d])&&(!o&&c?(h=yo(_.predicates,[c,u,o]))&&(f=yo(_.subjects,[o,c,u]),p=yo(_.objects,[u,o,c])):u?(p=yo(_.objects,[u,o,c]))&&(f=yo(_.subjects,[o,c,u]),h=yo(_.predicates,[c,u,o])):(f=yo(_.subjects,[o,c,u]))&&(h=yo(_.predicates,[c,u,o]),p=yo(_.objects,[u,o,c])),f&&(s._graphs[d]={subjects:f,predicates:h,objects:p}))}s._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[L8]&&(this[L8]=this[Symbol.iterator]());const r=this[L8];for(;--e>=0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new OO().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new wRe(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}},SRe=class{dataset(e){return new sM(e)}};function xRe(t){const e=[];for(const{subject:r,object:n}of t.match(null,Xs.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Xs.defaultGraph())){const i=[...t.match(null,null,null,r)],a=[...t.match(null,null,null,n)];e.push({premise:i,conclusion:a})}return e}let ERe=class{constructor(e){this._store=e}_add(e,r,n,i,a){this._store._addToIndex(i.subjects,e,r,n)&&(this._store._addToIndex(i.predicates,r,n,e),this._store._addToIndex(i.objects,n,e,r),a())}_evaluatePremise(e,r,n,i=0){let a,s,o,c,u;const[l,d,f]=e.premise[i].value,h=r[e.premise[i].content],p=!(o=l.value);for(o in p?h:{[o]:h[o]})if(c=h[o]){p&&(l.value=Number(o)),a=!(o=d.value);for(o in a?c:{[o]:c[o]})if(u=c[o]){a&&(d.value=Number(o)),s=!(o=f.value);for(o in s?u:{[o]:u[o]})s&&(f.value=Number(o)),i===e.premise.length-1?e.conclusion.forEach(_=>{this._add(_.subject.value,_.predicate.value,_.object.value,r,()=>{n(_)})}):this._evaluatePremise(e,r,n,i+1);s&&(f.value=null)}a&&(d.value=null)}p&&(l.value=null)}_evaluateRules(e,r,n){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],r,n)}_reasonGraphNaive(e,r){const n=[];function i(o){o.next&&o.next.forEach(c=>{n.push([o.subject.value,o.predicate.value,o.object.value,c])})}const a=o=>{o.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,r,()=>{i(c)})})};this._evaluateRules(e,r,i);let s;for(;(s=n.pop())!==void 0;){const[o,c,u,l]=s,d=l.basePremise.subject.value;d||(l.basePremise.subject.value=o);const f=l.basePremise.predicate.value;f||(l.basePremise.predicate.value=c);const h=l.basePremise.object.value;h||(l.basePremise.object.value=u),l.premise.length===0?a(l.conclusion):this._evaluatePremise(l,r,i),d||(l.basePremise.subject.value=null),f||(l.basePremise.predicate.value=null),h||(l.basePremise.object.value=null)}}_createRule({premise:e,conclusion:r}){const n={},i=s=>s.termType==="Variable"?n[s.value]=n[s.value]||{}:{value:this._store._termToNewNumericId(s)},a=s=>({subject:i(s.subject),predicate:i(s.predicate),object:i(s.object)});return{premise:e.map(s=>a(s)),conclusion:r.map(s=>a(s)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=xRe(e)),e=e.map(n=>this._createRule(n));for(const n of e)for(const i of e)for(let a=0;a<i.premise.length;a++){const s=i.premise[a];for(const o of n.conclusion){if(j8(s.subject,o.subject)&&j8(s.predicate,o.predicate)&&j8(s.object,o.object)){const c=new Set,u=[];s.subject.value=s.subject.value||1,s.object.value=s.object.value||1,s.predicate.value=s.predicate.value||1;for(let l=0;l<i.premise.length;l++)l!==a&&u.push(kce(i.premise[l],c));(o.next=o.next||[]).push({premise:u,conclusion:i.conclusion,basePremise:s})}i.variables.forEach(c=>{c.value=null})}}for(const n of e){const i=new Set;n.premise=n.premise.map(a=>kce(a,i))}const r=this._store._getGraphs();for(const n in r)this._reasonGraphNaive(e,r[n]);this._store._size=null}};function kce({subject:t,predicate:e,object:r},n){const i=t.value||n.has(t)||(n.add(t),!1),a=e.value||n.has(e)||(n.add(e),!1),s=r.value||n.has(r)||(n.add(r),!1);return!i&&a?{content:"predicates",value:[e,r,t]}:s?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function j8(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}let IRe=class extends Wt.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new IO(e);let n,i;const a={onQuad:(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},onPrefix:(s,o)=>{this.emit("prefix",s,o)}};e&&e.comments&&(a.onComment=s=>{this.emit("comment",s)}),r.parse({on:(s,o)=>{switch(s){case"data":n=o;break;case"end":i=o;break}}},a),this._transform=(s,o,c)=>{n(s),c()},this._flush=s=>{i(),s()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}},ORe=class extends Wt.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new OO({write:(n,i,a)=>{this.push(n),a&&a()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,i,a)=>{r.addQuad(n,a)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}};const dct={Lexer:cQ,Parser:IO,Writer:OO,Store:sM,StoreFactory:SRe,EntityIndex:pQ,StreamParser:IRe,StreamWriter:ORe,Util:bRe,Reasoner:ERe,BaseIRI:hQ,DataFactory:Xs,Term:to,NamedNode:aM,Literal:ef,BlankNode:lQ,Variable:dQ,DefaultGraph:fQ,Quad:Qp,Triple:Qp,termFromId:tf,termToId:cl},fct=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:hQ,BlankNode:lQ,DataFactory:Xs,DefaultGraph:fQ,EntityIndex:pQ,Lexer:cQ,Literal:ef,NamedNode:aM,Parser:IO,Quad:Qp,Reasoner:ERe,Store:sM,StoreFactory:SRe,StreamParser:IRe,StreamWriter:ORe,Term:to,Triple:Qp,Util:bRe,Variable:dQ,Writer:OO,default:dct,getRulesFromDataset:xRe,termFromId:tf,termToId:cl},Symbol.toStringTag,{value:"Module"})),hct=Pl(fct);var zce;function pct(){if(zce)return hb;zce=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.ActorRdfSerializeN3=void 0;const t=uQ(),e=dt,r=hct;let n=class extends t.ActorRdfSerializeFixedMediaTypes{constructor(a){super(a)}async runHandle(a,s){const o=new r.StreamWriter({format:s,prefixes:a.context.get(e.KeysRdfSerialize.rdfSerializationPrefixes)});let c;return"pipe"in a.quadStream?(a.quadStream.on("error",u=>o.emit("error",u)),c=a.quadStream.pipe(o)):c=o.import(a.quadStream),{data:c,triples:s==="text/turtle"||s==="application/n-triples"||s==="text/n3"}}};return hb.ActorRdfSerializeN3=n,hb}var Qce;function _ct(){return Qce||(Qce=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(pct(),t)}(M8)),M8}var B8={},vb={},q8={},Ab={},U8={},Tb={},V8={},Wce;function oM(){return Wce||(Wce=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class e extends Error{constructor(n,i){super(n),this.code=i}}t.ErrorCoded=e,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))}(V8)),V8}var wb={},Kce;function RRe(){if(Kce)return wb;Kce=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.FetchDocumentLoader=void 0;const t=oM(),e=AO(),r=Bn();class n{constructor(a){this.fetcher=a}async load(a){const s=await(this.fetcher||fetch)(a,{headers:new Headers({accept:"application/ld+json"})});if(s.ok&&s.headers){let o=s.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await s.json();if(s.headers.has("Link")){let c;if(s.headers.forEach((u,l)=>{if(l==="link"){const d=(0,e.parse)(u);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+a);c=(0,r.resolve)(f.uri,a)}}}),c)return this.load(c)}throw new t.ErrorCoded(`Unsupported JSON-LD media type ${o}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(s.statusText||`Status code: ${s.status}`)}}return wb.FetchDocumentLoader=n,wb}var G8={},Sb={},Xce;function _Q(){if(Xce)return Sb;Xce=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.Util=void 0;class t{static isCompactIri(r){return r.indexOf(":")>0&&!(r&&r[0]==="#")}static getPrefix(r,n){if(r&&r[0]==="#")return null;const i=r.indexOf(":");if(i>=0){if(r.length>i+1&&r.charAt(i+1)==="/"&&r.charAt(i+2)==="/")return null;const a=r.substr(0,i);if(a==="_")return null;if(n[a])return a}return null}static getContextValueId(r){if(r===null||typeof r=="string")return r;const n=r["@id"];return n||null}static isSimpleTermDefinitionPrefix(r,n){return!t.isPotentialKeyword(r)&&(n.allowPrefixNonGenDelims||typeof r=="string"&&(r[0]==="_"||t.isPrefixIriEndingWithGenDelim(r)))}static isPotentialKeyword(r){return typeof r=="string"&&t.KEYWORD_REGEX.test(r)}static isPrefixIriEndingWithGenDelim(r){return t.ENDS_WITH_GEN_DELIM.test(r)}static isPrefixValue(r){return r&&(typeof r=="string"||r&&typeof r=="object")}static isValidIri(r){return!!(r&&t.IRI_REGEX.test(r))}static isValidIriWeak(r){return!!r&&r[0]!==":"&&t.IRI_REGEX_WEAK.test(r)}static isValidKeyword(r){return t.VALID_KEYWORDS[r]}static isTermProtected(r,n){const i=r[n];return typeof i!="string"&&i&&i["@protected"]}static hasProtectedTerms(r){for(const n of Object.keys(r))if(t.isTermProtected(r,n))return!0;return!1}static isReservedInternalKeyword(r){return r.startsWith("@__")}static deepEqual(r,n){const i=Object.keys(r),a=Object.keys(n);return i.length!==a.length?!1:i.every(s=>{const o=r[s],c=n[s];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}}return t.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,t.IRI_REGEX_WEAK=/(?::[^:])|\//,t.KEYWORD_REGEX=/^@[a-z]+$/i,t.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,t.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,t.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,t.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},t.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],t.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],t.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],t.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],t.CONTAINERS_1_0=["@list","@set","@index"],Sb.Util=t,Sb}var Jce;function PRe(){return Jce||(Jce=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const e=Bn(),r=oM(),n=_Q();class i{constructor(s){this.contextRaw=s}getContextRaw(){return this.contextRaw}expandTerm(s,o,c=t.defaultExpandOptions){const u=this.contextRaw[s];if(u===null||u&&u["@id"]===null)return null;let l=!0;if(u&&o){const g=n.Util.getContextValueId(u);if(g&&g!==s)if(typeof g!="string"||!n.Util.isValidIri(g)&&!n.Util.isValidKeyword(g))n.Util.isPotentialKeyword(g)||(l=!1);else return g}const d=n.Util.getPrefix(s,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],_=n.Util.isPotentialKeyword(s);if(d){const g=this.contextRaw[d],m=n.Util.getContextValueId(g);if(m){if(typeof g=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,c))return s}else if(m[0]!=="_"&&!_&&!g["@prefix"]&&!(s in this.contextRaw))return s;return m+s.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!_&&!n.Util.isCompactIri(s))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,e.resolve)(f,p):"")+s;throw new r.ErrorCoded(`Relative vocab expansion for term '${s}' with vocab '${f}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+s;else if(!o&&p&&!_&&!n.Util.isCompactIri(s))return(0,e.resolve)(s,p);if(l)return s;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${s}': '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(s,o){if(o&&this.contextRaw["@vocab"]&&s.startsWith(this.contextRaw["@vocab"]))return s.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&s.startsWith(this.contextRaw["@base"]))return s.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:s};for(const u in this.contextRaw){const l=this.contextRaw[u];if(l&&!n.Util.isPotentialKeyword(u)){const d=n.Util.getContextValueId(l);if(s.startsWith(d)){const f=s.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=u,c.suffix=f);else if(o)return u}}}return c.prefix?c.prefix+":"+c.suffix:s}}t.JsonLdContextNormalized=i,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(G8)),G8}var Yce;function mct(){if(Yce)return Tb;Yce=1,Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.ContextParser=void 0;const t=Bn(),e=oM(),r=RRe(),n=PRe(),i=_Q();class a{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new r.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,u){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,u);if(!i.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,u);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!i.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let u=o[c];if(u&&typeof u=="object"&&u["@reverse"]&&!u["@id"]){if(typeof u["@reverse"]!="string"||i.Util.isValidKeyword(u["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${u["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);u=o[c]=Object.assign(Object.assign({},u),{"@id":u["@reverse"]}),u["@id"]=u["@reverse"],i.Util.isPotentialKeyword(u["@reverse"])?delete u["@reverse"]:u["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,u){const l=o.getContextRaw();for(const d of u||Object.keys(l))if(i.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!i.Util.isReservedInternalKeyword(d)){const f=l[d];if(i.Util.isPotentialKeyword(d)&&i.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(i.Util.ALIAS_RANGE_BLACKLIST.indexOf(i.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&i.Util.isPotentialKeyword(i.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;i.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const _=h["@id"],g=h["@type"],m=!("@prefix"in h)||i.Util.isValidIri(d);if("@id"in h)_!=null&&typeof _=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(_,!0)}),p=p||_!==l[d]["@id"]);else if(!i.Util.isPotentialKeyword(d)&&m){const y=o.expandTerm(d,!0);y!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":y}),p=!0)}if(g&&typeof g=="string"&&g!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&m){let y=o.expandTerm(g,!0);c&&g===y&&(y=o.expandTerm(g,!1)),y!==g&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":y}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:u}){if(u||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const u=o[c];if(u&&typeof u=="object"){if(typeof u["@container"]=="string")o[c]=Object.assign(Object.assign({},u),{"@container":{[u["@container"]]:!0}});else if(Array.isArray(u["@container"])){const l={};for(const d of u["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},u),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},u){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!i.Util.isReservedInternalKeyword(l)&&!i.Util.isPotentialKeyword(l)&&!i.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},i.Util.isSimpleTermDefinitionPrefix(d,u)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,u,l){for(const d of l??Object.keys(c))if(i.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!i.Util.deepEqual(o[d],c[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(i.Util.getContextValueId(o[d]))} to ${JSON.stringify(i.Util.getContextValueId(c[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const u of Object.keys(o)){if(i.Util.isReservedInternalKeyword(u))continue;if(u==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${u}': '${JSON.stringify(o[u])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[u],d=typeof l;if(i.Util.isPotentialKeyword(u)){switch(u.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[u]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&a.validateLanguage(l,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${l}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&a.validateDirection(l,!0);break;case"propagate":if(c===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${l}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(i.Util.isValidKeyword(u)&&i.Util.isValidKeyword(i.Util.getContextValueId(l)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${i.Util.getContextValueId(l)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(i.Util.getPrefix(l,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(l==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!i.Util.isCompactIri(u)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(i.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(h==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.getPrefix(h,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!i.Util.isValidIri(h)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${u}':'${h}' and '${l["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||i.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${Object.keys(h)}') in 1.0, must be only one of ${i.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(i.Util.CONTAINERS.indexOf(p)<0)throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${p}'), must be one of ${i.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":a.validateLanguage(h,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":a.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!i.Util.isValidIri(u))throw new e.ErrorCoded(`Invalid @prefix definition for '${u}' ('${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(i.Util.isPotentialKeyword(h)&&h!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${u}': '${l}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,u){return typeof o=="string"||(u&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!i.Util.isValidIri(o["@base"])&&(o["@base"]=(0,t.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!i.Util.isValidIri(o))try{o=(0,t.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,u){for(const l of u??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},u={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=a.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:_,minimalProcessing:g}=c,m=c.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!_&&d&&i.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const y=this.normalizeContextIri(o,l),v=this.getOverriddenLoad(y,c);if(v)return new n.JsonLdContextNormalized(v);const A=await this.parse(await this.load(y),Object.assign(Object.assign({},c),{baseIRI:y,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[y]:!0})}));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(Array.isArray(o)){const y=[],v=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const P=this.normalizeContextIri(T,l);y[S]=P;const j=this.getOverriddenLoad(P,c);return j||this.load(P)}else return T}));if(g)return new n.JsonLdContextNormalized(v);const A=await v.reduce((T,S,P)=>T.then(j=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:y[P]||c.baseIRI,external:!!y[P]||c.external,parentContext:j.getContextRaw(),remoteContexts:y[P]?Object.assign(Object.assign({},m),{[y[P]]:!0}):m}),{skipValidation:P<v.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(typeof o=="object"){if("@context"in o){if(c!=null&&c.disallowDirectlyNestedContext)throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping @context to ${JSON.stringify(o["@context"])}`,e.ERROR_CODES.KEYWORD_REDEFINITION);return await this.parse(o["@context"],c)}if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),g)return new n.JsonLdContextNormalized(o);let y={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);y=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(y,{processingMode:h},n.defaultExpandOptions);const v=Object.assign(y,o);this.idifyReverseTerms(v),this.normalize(v,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(v,{processingMode:h},n.defaultExpandOptions);const A=Object.keys(v),T=[];if(typeof d=="object")for(const P in d)P in v?T.push(P):v[P]=d[P];await this.parseInnerContexts(v,c,A);const S=new n.JsonLdContextNormalized(v);return(v&&v["@version"]||a.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?v["@vocab"]=d["@vocab"]+o["@vocab"]:(i.Util.isCompactIri(o["@vocab"])||o["@vocab"]in v)&&(v["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,A),!_&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,v,n.defaultExpandOptions,T),this.validateContext&&!u.skipValidation&&this.validate(v,{processingMode:h}),S}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let u;try{u=await this.documentLoader.load(o)}catch(l){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in u))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=u["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return a.DEFAULT_PROCESSING_MODE=1.1,Tb.ContextParser=a,Tb}var H8={},$ce;function gct(){return $ce||($ce=1,Object.defineProperty(H8,"__esModule",{value:!0})),H8}var k8={},Zce;function yct(){return Zce||(Zce=1,Object.defineProperty(k8,"__esModule",{value:!0})),k8}var ele;function NRe(){return ele||(ele=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mct(),t),r(oM(),t),r(RRe(),t),r(gct(),t),r(yct(),t),r(PRe(),t),r(_Q(),t)}(U8)),U8}var xb={},tle;function bct(){if(tle)return xb;tle=1,Object.defineProperty(xb,"__esModule",{value:!0}),xb.SeparatorType=void 0;let t=class{constructor(r){this.label=r}};return xb.SeparatorType=t,t.COMMA=new t(","),t.OBJECT_START=new t("{"),t.OBJECT_END=new t("}"),t.OBJECT_END_COMMA=new t("},"),t.ARRAY_START=new t("["),t.ARRAY_END=new t("]"),t.ARRAY_END_COMMA=new t("],"),t.GRAPH_FIELD_NONCOMPACT=new t('"@graph": ['),t.GRAPH_FIELD_COMPACT=new t('"@graph":['),t.CONTEXT_FIELD=new t('"@context":'),xb}var Eb={},rle;function FRe(){if(rle)return Eb;rle=1,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.Util=void 0;const t=NRe();class e{static termToValue(n,i,a={compactIds:!1,useNativeTypes:!1}){switch(n.termType){case"NamedNode":const s=i.compactIri(n.value,a.vocab);return a.compactIds?s:{"@id":s};case"DefaultGraph":return a.compactIds?n.value:{"@id":n.value};case"BlankNode":const o=`_:${n.value}`;return a.compactIds?o:{"@id":o};case"Literal":if(n.datatype.value===e.RDF_JSON){let l;try{l=JSON.parse(n.value)}catch(d){throw new t.ErrorCoded("Invalid JSON literal: "+d.message,t.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":l,"@type":"@json"}}if(a.rdfDirection==="i18n-datatype"&&n.datatype.value.startsWith(e.I18N)){const[l,d]=n.datatype.value.substr(e.I18N.length,n.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":n.value},l?{"@language":l}:{}),d?{"@direction":d}:{})}const c=n.datatype.value===e.XSD_STRING,u={"@value":!c&&a.useNativeTypes?e.stringToNativeType(n.value,n.datatype.value):n.value};return n.language?n.direction&&!a.rdfDirection?Object.assign(Object.assign({},u),{"@language":n.language,"@direction":n.direction}):Object.assign(Object.assign({},u),{"@language":n.language}):!c&&typeof u["@value"]=="string"?Object.assign(Object.assign({},u),{"@type":n.datatype.value}):u}}static stringToNativeType(n,i){if(i.startsWith(e.XSD))switch(i.substr(e.XSD.length)){case"boolean":if(n==="true")return!0;if(n==="false")return!1;throw new Error(`Invalid xsd:boolean value '${n}'`);case"integer":case"number":case"int":case"byte":case"long":const s=parseInt(n,10);if(isNaN(s))throw new Error(`Invalid xsd:integer value '${n}'`);return s;case"float":case"double":const o=parseFloat(n);if(isNaN(o))throw new Error(`Invalid xsd:float value '${n}'`);return o}return n}}return Eb.Util=e,e.XSD="http://www.w3.org/2001/XMLSchema#",e.XSD_STRING=e.XSD+"string",e.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e.RDF_TYPE=e.RDF+"type",e.RDF_JSON=e.RDF+"JSON",e.I18N="https://www.w3.org/ns/i18n#",Eb}var nle;function vct(){if(nle)return Ab;nle=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.JsonLdSerializer=void 0;const t=NRe(),e=bct(),r=FRe(),n=Wt;let i=class MRe extends n.Transform{constructor(s={}){super({objectMode:!0}),this.indentation=0,this.options=s,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new t.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new t.JsonLdContextNormalized({}))}import(s){const o=new n.PassThrough({objectMode:!0});s.on("error",u=>c.emit("error",u)),s.on("data",u=>o.push(u)),s.on("end",()=>o.push(null));const c=o.pipe(new MRe(this.options));return c}_transform(s,o,c){this.context.then(u=>{this.transformQuad(s,u),c()}).catch(c)}async list(s){const o=await this.context;return{"@list":s.map(c=>r.Util.termToValue(c,o,this.options))}}_flush(s){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),s(null,null)}transformQuad(s,o){this.opened||this.pushDocumentStart();const c=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(s.subject);if(!c&&(!this.lastGraph||!s.graph.equals(this.lastGraph))){let u=s.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(s.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),u=!1):u?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),s.graph.termType!=="DefaultGraph"&&(u||this.pushId(s.graph,!0,o),this.pushSeparator(this.options.space?e.SeparatorType.GRAPH_FIELD_NONCOMPACT:e.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=s.graph}(!this.lastSubject||!s.subject.equals(this.lastSubject))&&(c?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END_COMMA),this.lastGraph=s.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(s.subject,!0,o)),this.lastSubject=s.subject),(!this.lastPredicate||!s.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(s.predicate,o)),this.pushObject(s.object,o)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(e.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(e.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?e.SeparatorType.GRAPH_FIELD_NONCOMPACT:e.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(e.SeparatorType.ARRAY_START),this.indentation++)}pushId(s,o,c){if(s.termType==="Quad")this.pushNestedQuad(s,!0,c);else{const u=s.termType==="BlankNode"?"_:"+s.value:c.compactIri(s.value,!1);o?this.pushSeparator(e.SeparatorType.OBJECT_START):(this.push(e.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${u}",`:`"@id":"${u}",`)}}pushPredicate(s,o){let c=s.value;!this.options.useRdfType&&c===r.Util.RDF_TYPE&&(c="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const u=o.compactIri(c,!0);this.pushIndented(this.options.space?`"${u}": [`:`"${u}":[`),this.indentation++,this.lastPredicate=s}pushObject(s,o){if(this.hadObjectForPredicate?this.pushSeparator(e.SeparatorType.COMMA):this.hadObjectForPredicate=!0,s.termType==="Quad"){const u=this.lastSubject,l=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(s,!1,o),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=l,this.lastSubject=u;return}let c;try{s["@list"]?c=s:c=r.Util.termToValue(s,o,this.objectOptions||this.options)}catch(u){return this.emit("error",u)}this.pushIndented(JSON.stringify(c,null,this.options.space))}pushNestedQuad(s,o,c){this.pushSeparator(e.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),s.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${s.graph.value}`)),this.pushId(s.subject,!1,c),this.pushPredicate(s.predicate,c),this.pushObject(s.object,c),this.endPredicate(!1),this.endSubject(o)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(e.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END))}endPredicate(s){this.indentation--,this.pushSeparator(s?e.SeparatorType.ARRAY_END_COMMA:e.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(s){this.indentation--,this.pushSeparator(s?e.SeparatorType.OBJECT_END_COMMA:e.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(s){this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(s?e.SeparatorType.OBJECT_END_COMMA:e.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(s){this.pushIndented(s.label)}pushIndented(s,o=!0){const c=this.getIndentPrefix(),u=s.split(`
`).map(l=>c+l).join(`
`);this.push(u),this.options.space&&o&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}};return Ab.JsonLdSerializer=i,Ab}var ile;function Act(){return ile||(ile=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vct(),t),r(FRe(),t)}(q8)),q8}var ale;function Tct(){if(ale)return vb;ale=1,Object.defineProperty(vb,"__esModule",{value:!0}),vb.ActorRdfSerializeJsonLd=void 0;const t=uQ(),e=Act();let r=class extends t.ActorRdfSerializeFixedMediaTypes{constructor(a){super(a);k(this,"jsonStringifyIndentSpaces");this.jsonStringifyIndentSpaces=a.jsonStringifyIndentSpaces}async runHandle(a,s,o){const c=new e.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let u;return"pipe"in a.quadStream?(a.quadStream.on("error",l=>c.emit("error",l)),u=a.quadStream.pipe(c)):u=c.import(a.quadStream),{data:u}}};return vb.ActorRdfSerializeJsonLd=r,vb}var sle;function wct(){return sle||(sle=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tct(),t)}(B8)),B8}var z8={},Ib={},dP={},ole;function Sct(){if(ole)return dP;ole=1,Object.defineProperty(dP,"__esModule",{value:!0});function t(r,n){return new Promise((i,a)=>{r.on("end",()=>i(n)),r.on("error",a)})}function e(r){const n=[];return t(r.on("data",i=>n.push(i)),n)}return dP.default=e,dP}var fP={};const bd="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Ob="http://www.w3.org/2001/XMLSchema#",hP="http://www.w3.org/2000/10/swap/",Dn={xsd:{decimal:`${Ob}decimal`,boolean:`${Ob}boolean`,double:`${Ob}double`,integer:`${Ob}integer`,string:`${Ob}string`},rdf:{type:`${bd}type`,nil:`${bd}nil`,first:`${bd}first`,rest:`${bd}rest`,langString:`${bd}langString`,dirLangString:`${bd}dirLangString`,reifies:`${bd}reifies`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${hP}reify#forSome`,forAll:`${hP}reify#forAll`},log:{implies:`${hP}log#implies`,isImpliedBy:`${hP}log#isImpliedBy`}},{xsd:pP}=Dn,xct=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,ule={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Ect=/[\x00-\x20<>\\"\{\}\|\^\`]/,Ict={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_dircode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Oct=/$0^/;let mQ=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9])/i,this._dircode=/^--(ltr)|(rtl)/,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._atKeyword=/^@[a-z]+(?=[\s#<:])/i,this._keyword=/^(?:PREFIX|BASE|VERSION|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in Ict)&&this[r]instanceof RegExp&&(this[r]=Oct)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let o,c;for(;o=this._newline.exec(n);)this.comments&&(c=this._comment.exec(o[0]))&&a("comment",c[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),i=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(c=this._comment.exec(n))&&a("comment",c[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const u=this._line,l=n[0];let d="",f="",h="",p=null,_=0,g=!1;switch(l){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){g=!0;break}}else{this._n3Mode&&(_=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),f===null||Ect.test(f))return s(this);d="IRI"}else n.length>2&&n[1]==="<"&&n[2]==="("?(d="<<(",_=3):!this._lineMode&&n.length>(r?1:2)&&n[1]==="<"?(d="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(_=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",_=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))&&p[1]!=="version"?(d="langcode",f=p[1]):(p=this._atKeyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){d=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":if(n[1]==="-"){this._previousMarker==="langcode"&&(p=this._dircode.exec(n))&&(d="dircode",_=2,f=p[1]||p[2],_=f.length+2);break}(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h=typeof p[1]=="string"?pP.double:typeof p[2]=="string"?pP.decimal:pP.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":case"V":case"v":(p=this._keyword.exec(n))?d=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=pP.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(_=1,f="="):(_=2,f=">"));break;case"!":if(!this._n3Mode)break;case")":if(!r&&(n.length===1||n.length===2&&n[1]===">"))break;if(n.length>2&&n[1]===">"&&n[2]===">"){d=")>>",_=3;break}case",":case";":case"[":case"]":case"(":case"}":case"~":this._lineMode||(_=1,d=l);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",_=2):(d=l,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",_=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",f=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const m=_||p[0].length,y=a(d,f,h,u,m);this.previousToken=y,this._previousMarker=d,n=n.substr(m,n.length)}function a(o,c,u,l,d){const f=n?i-n.length:i,h=f+d,p={type:o,value:c,prefix:u,line:l,start:f,end:h};return e(null,p),p}function s(o){e(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(xct,(i,a,s,o)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return o in ule?ule[o]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const s=e.substring(n,i),o=s.split(/\r\n|\r|\n/).length-1,c=i+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(s),matchLength:c}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,s)=>a?i=a:n.push(s),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Ni.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}};const{rdf:cle,xsd:Vd}=Dn;let b0,Rct=0;const Js={namedNode:LRe,blankNode:jRe,variable:qRe,literal:BRe,defaultGraph:Pct,quad:RG,triple:RG,fromTerm:SE,fromQuad:URe};let ro=class DRe{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof DRe?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},uM=class extends ro{get termType(){return"NamedNode"}},rf=class CRe extends ro{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;const n=e.lastIndexOf("--");return r<e.length&&e[r++]==="@"?(n>r?e.substr(0,n):e).substr(r).toLowerCase():""}get direction(){const e=this.id,r=e.lastIndexOf("--")+2;return r>1&&r<e.length?e.substr(r).toLowerCase():""}get datatype(){return new uM(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?Vd.string:e.indexOf("--",r)>0?cle.dirLangString:cle.langString}equals(e){return e instanceof CRe?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(this.direction===e.direction||this.direction===""&&!e.direction)&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,direction:this.direction,datatype:{termType:"NamedNode",value:this.datatypeString}}}},gQ=class extends ro{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},yQ=class extends ro{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},bQ=class extends ro{constructor(){return super(""),b0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};b0=new bQ;function nf(t,e,r){if(e=e||Js,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Js)return new rf(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);let i;if(t[n+1]==="@"){i=t.substr(n+2);const a=i.lastIndexOf("--");a>0&&a<i.length&&(i={language:i.substr(0,a),direction:i.substr(a+2)})}else i=e.namedNode(t.substr(n+3));return e.literal(t.substr(1,n-1),i);case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(nf(t[0],e,!0),nf(t[1],e,!0),nf(t[2],e,!0),t[3]&&nf(t[3],e,!0))}function ll(t,e){if(typeof t=="string")return t;if(t instanceof ro&&t.termType!=="Quad")return t.id;if(!t)return b0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}${t.direction?`--${t.direction}`:""}`:t.datatype&&t.datatype.value!==Vd.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[ll(t.subject,!0),ll(t.predicate,!0),ll(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(ll(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}let Wp=class extends ro{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||b0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function LRe(t){return new uM(t)}function jRe(t){return new gQ(t||`n3-${Rct++}`)}function BRe(t,e){if(typeof e=="string")return new rf(`"${t}"@${e.toLowerCase()}`);if(e!==void 0&&!("termType"in e))return new rf(`"${t}"@${e.language.toLowerCase()}${e.direction?`--${e.direction.toLowerCase()}`:""}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=Vd.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?Vd.integer:Vd.double:(r=Vd.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===Vd.string?new rf(`"${t}"`):new rf(`"${t}"^^${r}`)}function qRe(t){return new yQ(t)}function Pct(){return b0}function RG(t,e,r,n){return new Wp(t,e,r,n)}function SE(t){if(t instanceof ro)return t;switch(t.termType){case"NamedNode":return LRe(t.value);case"BlankNode":return jRe(t.value);case"Variable":return qRe(t.value);case"DefaultGraph":return b0;case"Literal":return BRe(t.value,t.language||t.datatype);case"Quad":return URe(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function URe(t){if(t instanceof Wp)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return RG(SE(t.subject),SE(t.predicate),SE(t.object),SE(t.graph))}let lle=0,RO=class VRe{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&GRe(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),o=this._n3Mode=/n3/.test(r),c=a||s;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||o),this._isImpliedBy=e.isImpliedBy,c&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new mQ({lineMode:c,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers,this._parseUnsupportedVersions=!!e.parseUnsupportedVersions,this._version=e.version}static _resetBlankNodePrefix(){lle=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const s=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readBeforeTopContext(e){return this._version&&!this._isValidVersion(this._version)?this._error(`Detected unsupported version as media type parameter: "${this._version}"`,e):this._readInTopContext(e)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"VERSION":this._sparqlStyle=!0;case"@version":return this._readVersion;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(a+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<(":return this._n3Mode?(this._saveContext("<<(",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Disallowed triple term as subject",e);case"<<":return this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject;default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":case"|}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._validAnnotation=!0,this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<(":return this._saveContext("<<(",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;case"<<":return this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){if(e.type==="]")return this._subject=null,this._readBlankNodeTail(e);{const r=this._contextStack;return(r.length>1&&r[r.length-2]).type==="<<"?this._error("Unexpected compound blank node expression in reified triple",e):(this._predicate=null,this._readPredicate(e))}}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,s=this._contextStack,o=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":this._saveContext("<<",this._graph,null,null,null),this._graph=null,i=this._readSubject;break;default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),e.type==="<<"&&(s[s.length-1].subject=this._subject),a===null?o.predicate===null?o.subject=n:o.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e,r){let n=this._factory.literal(this._literalValue),i;switch(e.type){case"type":case"typeIRI":const a=this._readEntity(e);if(a===void 0)return;if(a.value===Dn.rdf.langString||a.value===Dn.rdf.dirLangString)return this._error("Detected illegal (directional) languaged-tagged string with explicit datatype",e);n=this._factory.literal(this._literalValue,a),e=null;break;case"langcode":if(e.value.length>8)return this._error("Detected language tag of length larger than 8",e);n=this._factory.literal(this._literalValue,e.value),this._literalLanguage=e.value,e=null,i=this._readDirCode.bind(this,r);break}return{token:e,literal:n,readCb:i}}_readDirCode(e,r,n){if(n.type==="dircode"){const i=this._factory.literal(this._literalValue,{language:this._literalLanguage,direction:n.value});e==="subject"?this._subject=i:this._object=i,this._literalLanguage=void 0,n=null}return e==="subject"?n===null?this._readPredicateOrNamedGraph:this._readPredicateOrNamedGraph(n):this._completeObjectLiteralPost(n,r)}_completeSubjectLiteral(e){const r=this._completeLiteral(e,"subject");return this._subject=r.literal,r.readCb?r.readCb.bind(this,!1):this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e,"object");if(n)return this._object=n.literal,n.readCb?n.readCb.bind(this,r):this._completeObjectLiteralPost(n.token,r)}_completeObjectLiteralPost(e,r){return r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),e===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(e))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,i=!1;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,this._tripleTerm=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"~":r=this._readReifierInAnnotation,i=!0;break;case"{|":this._subject=this._readTripleTerm(),this._validAnnotation=!1,i=!0,r=this._readPredicate;break;case"|}":if(!this._annotation)return this._error("Unexpected annotation syntax closing",e);if(!this._validAnnotation)return this._error("Annotation block can not be empty",e);this._subject=null,this._annotation=!1,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null&&(!i||i&&!this._annotation)){const o=this._predicate,c=this._object;s?this._emit(c,o,a,n):this._emit(a,o,c,n)}return i&&(this._annotation=!0),r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_isValidVersion(e){return this._parseUnsupportedVersions||VRe.SUPPORTED_VERSIONS.includes(e)}_readVersion(e){return e.type!=="literal"?this._error("Expected literal to follow version declaration",e):e.end-e.start!==e.value.length+2?this._error("Version declarations must use single quotes",e):(this._versionCallback(e.value),this._isValidVersion(e.value)?this._readDeclarationPunctuation:this._error(`Detected unsupported version: "${e.value}"`,e))}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._factory.blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readTripleTermTail(e){if(e.type!==")>>")return this._error(`Expected )>> but got ${e.type}`,e);const r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<(",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_readReifiedTripleTailOrReifier(e){return e.type==="~"?this._readReifier:this._readReifiedTripleTail(e)}_readReifiedTripleTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);this._tripleTerm=null;const r=this._readTripleTerm();this._restoreContext("<<",e);const n=this._contextStack,i=n.length&&n[n.length-1];return i&&i.type==="list"?(this._emit(this._subject,this.RDF_FIRST,r,this._graph),this._getContextEndReader()):this._subject===null?(this._subject=r,this._readPredicateOrReifierTripleEnd):(this._object=r,this._getContextEndReader())}_readPredicateOrReifierTripleEnd(e){return e.type==="."?(this._subject=null,this._readPunctuation(e)):this._readPredicate(e)}_readReifier(e){return this._reifier=this._readEntity(e),this._readReifiedTripleTail}_readReifierInAnnotation(e){return e.type==="IRI"||e.type==="typeIRI"||e.type==="type"||e.type==="prefixed"||e.type==="blank"||e.type==="var"?(this._reifier=this._readEntity(e),this._readPunctuation):(this._readTripleTerm(),this._subject=null,this._readPunctuation(e))}_readTripleTerm(){const e=this._contextStack,r=e.length&&e[e.length-1],n=r?r.graph:void 0,i=this._reifier||this._factory.blankNode();return this._reifier=null,this._tripleTerm=this._tripleTerm||this._factory.quad(this._subject,this._predicate,this._object),this._emit(i,this.RDF_REIFIES,this._tripleTerm,n||this.DEFAULTGRAPH),i}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<(":return this._readTripleTermTail;case"<<":return this._readReifiedTripleTailOrReifier}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Rb}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,s=0,o="/";for(;i<r;){switch(o){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(o=e[++i+1],o){case"/":n+=e.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return n+e.substring(s,i)+e.substr(i+1);case".":if(o=e[++i+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=e.substring(s,i-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),o!=="/")return`${n}/${e.substr(i+1)}`;s=i+1}}}o=e[++i]}return n+e.substring(s)}parse(e,r,n,i){let a,s,o,c;if(r&&(r.onQuad||r.onPrefix||r.onComment||r.onVersion)?(a=r.onQuad,s=r.onPrefix,o=r.onComment,c=r.onVersion):(a=r,s=n,c=i),this._readCallback=this._readBeforeTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${lle++}_`,this._prefixCallback=s||Rb,this._versionCallback=c||Rb,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const l=[];let d;if(this._callback=(f,h)=>{f?d=f:h&&l.push(h)},this._lexer.tokenize(e).every(f=>this._readCallback=this._readCallback(f)),d)throw d;return l}let u=(l,d)=>{l!==null?(this._callback(l),this._callback=Rb):this._readCallback&&(this._readCallback=this._readCallback(d))};o&&(this._lexer.comments=!0,u=(l,d)=>{l!==null?(this._callback(l),this._callback=Rb):this._readCallback&&(d.type==="comment"?o(d.value):this._readCallback=this._readCallback(d))}),this._callback=a,this._lexer.tokenize(e,u)}};function Rb(){}function GRe(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(Dn.rdf.first),t.RDF_REST=e.namedNode(Dn.rdf.rest),t.RDF_NIL=e.namedNode(Dn.rdf.nil),t.RDF_REIFIES=e.namedNode(Dn.rdf.reifies),t.N3_FORALL=e.namedNode(Dn.r.forAll),t.N3_FORSOME=e.namedNode(Dn.r.forSome),t.ABBREVIATIONS={a:e.namedNode(Dn.rdf.type),"=":e.namedNode(Dn.owl.sameAs),">":e.namedNode(Dn.log.implies),"<":e.namedNode(Dn.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}RO.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"];GRe(RO.prototype,Js);function Nct(t){return!!t&&t.termType==="NamedNode"}function Fct(t){return!!t&&t.termType==="BlankNode"}function Mct(t){return!!t&&t.termType==="Literal"}function Dct(t){return!!t&&t.termType==="Variable"}function Cct(t){return!!t&&t.termType==="Quad"}function qI(t){return!!t&&t.termType==="DefaultGraph"}function Lct(t){return qI(t.graph)}function jct(t,e){return HRe({"":t.value||t},e)("")}function HRe(t,e){const r=Object.create(null);for(const i in t)n(i,t[i]);e=e||Js;function n(i,a){if(typeof a=="string"){const s=Object.create(null);r[i]=o=>s[o]||(s[o]=e.namedNode(a+o))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}const kRe=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:Lct,isBlankNode:Fct,isDefaultGraph:qI,isLiteral:Mct,isNamedNode:Nct,isQuad:Cct,isVariable:Dct,prefix:jct,prefixes:HRe},Symbol.toStringTag,{value:"Module"}));function C3(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const Bct=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,qct=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,dle="./",Uct="../",Q8="?",fle="#";let vQ=class zRe{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!Bct.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!zRe.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",C3(e)],n=[],i=[],a=/[^/?#]*([/?#])/y;let s,o=0,c=0,u=a.lastIndex=e.length;for(;!o&&!c&&(s=a.exec(this.base));)s[1]===fle?c=a.lastIndex-1:(r.push(C3(s[0]),"(?:"),n.push(")?"),s[1]!==Q8?i.push(u=a.lastIndex):(o=u=a.lastIndex,c=this.base.indexOf(fle,o),this._pathReplacements[o]=Q8));for(let l=0;l<i.length;l++)this._pathReplacements[i[l]]=Uct.repeat(i.length-l-1);return this._pathReplacements[i[i.length-1]]=dle,this._baseLength=c>0?c:this.base.length,r.push(C3(this.base.substring(u,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){const r=this._getBaseMatcher().exec(e);if(!r)return e;const n=r[0].length;if(n===this._baseLength&&n===e.length)return"";const i=this._pathReplacements[n];if(i){const a=e.substring(n);return i!==Q8&&!qct.test(a)?e:i===dle&&/^[^?#]/.test(a)?a:i+a}return e.substring(n-1)}};const Pb=Js.defaultGraph(),{rdf:Vct,xsd:Ph}=Dn,hle=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,ple=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Gct={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};let Nb=class extends ro{equals(e){return e===this}},PO=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,s){n+=i,s&&s()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Pb,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new vQ(r.baseIRI)))}get _inDefaultGraph(){return Pb.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Pb.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),hle.test(r)&&(r=r.replace(ple,_le));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;hle.test(r)&&(r=r.replace(ple,_le));const n=e.direction?`--${e.direction}`:"";if(e.language)return`"${r}"@${e.language}${n}`;if(this._lineMode){if(e.datatype.value===Ph.string)return`"${r}"`}else switch(e.datatype.value){case Ph.string:return`"${r}"`;case Ph.boolean:if(r==="true"||r==="false")return r;break;case Ph.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Ph.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Ph.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Vct.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<(${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${qI(i)?"":` ${this._encodeIriOrBlank(i)}`})>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,Pb,i):this._writeQuad(e,r,n,i||Pb,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];i=C3(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new Nb("[]");case 1:if(i=n[0],!(i.object instanceof Nb))return new Nb(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let o=0;o<a;o++)i=n[o],i.predicate.equals(e)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(o?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new Nb(`${s}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new Nb(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function _le(t){let e=Gct[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const W8=Symbol("iter");function ZE(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=ZE(t[n]||Object.create(null),e[n],r-1);return t}function QRe(t,e,r=4){let n=!1;for(const i in t)if(i in e){const a=r===0?null:QRe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}function WRe(t,e,r=4){let n=!1;for(const i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:ZE({},t[i],r-1);else if(r!==0){const a=WRe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}let AQ=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||Js}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return nf(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(qI(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[ll(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${qI(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:ll(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}},cM=class rs{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||Js,this._entityIndex=r.entityIndex||new AQ({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const s in n=r[a].subjects)for(const o in i=n[s])e+=Object.keys(i[o]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),s=a[n]||(a[n]={}),o=i in s;return o||(s[i]=null),!o}_removeFromIndex(e,r,n,i){const a=e[r],s=a[n];delete s[i];for(const o in s)return;delete a[n];for(const o in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,s,o,c){let u,l,d;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(const _ in e)if(l=e[_]){p[a]=this._termFromId(f[_]),n&&((u=l,l={})[n]=u[n]);for(const g in l)if(d=l[g]){p[s]=this._termFromId(f[g]);const m=i?i in d?[i]:[]:Object.keys(d);for(let y=0;y<m.length;y++)p[o]=this._termFromId(f[m[y]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,s,o;if((a=e[r])&&(s=a[n]))for(o in s)i(o)}_countInIndex(e,r,n,i){let a=0,s,o,c;r&&((s=e,e={})[r]=s[r]);for(const u in e)if(o=e[u]){n&&((s=o,o={})[n]=s[n]);for(const l in o)(c=o[l])&&(i?i in c&&a++:a+=Object.keys(c).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;const a=this._graphs;let s,o,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(s=a[i])||!(o=s.subjects[e])||!(c=o[r])||!(n in c))return!1;this._removeFromIndex(s.subjects,e,r,n),this._removeFromIndex(s.predicates,r,n,e),this._removeFromIndex(s.objects,n,e,r),this._size!==null&&this._size--;for(e in s.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Wt.Readable({objectMode:!0}),s=this.readQuads(e,r,n,i);return a._read=o=>{for(;--o>=0;){const{done:c,value:u}=s.next();if(c){a.push(null);return}a.push(u)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let s,o,c,u;if(!(e&&!(o=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(const l in a)(s=a[l])&&(o?u?yield*this._findInIndex(s.objects,u,o,c,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,o,c,null,"subject","predicate","object",l):c?yield*this._findInIndex(s.predicates,c,u,null,"predicate","object","subject",l):u?yield*this._findInIndex(s.objects,u,null,null,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",l))}match(e,r,n,i){return new Nh(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let s=0,o,c,u,l;if(e&&!(c=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n)))return 0;for(const d in a)(o=a[d])&&(e?n?s+=this._countInIndex(o.objects,l,c,u):s+=this._countInIndex(o.subjects,c,u,l):r?s+=this._countInIndex(o.predicates,u,l,c):s+=this._countInIndex(o.objects,l,c,u));return s}forEach(e,r,n,i,a){this.some(s=>(e(s,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(s=>!e(s,this),r,n,i,a)}some(e,r,n,i,a){for(const s of this.readQuads(r,n,i,a))if(e(s,this))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.predicates,o,c,e):this._loopByKey1(s.subjects,o,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.objects,c,o,e):this._loopByKey0(s.subjects,o,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.subjects,o,c,e):this._loopByKey1(s.objects,o,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(s=>(e(s.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(o,c)=>{throw new Error(`${o.value} ${c}`)},a=this.getQuads(null,Dn.rdf.rest,Dn.rdf.nil,null),s=e?[...a]:[];return a.forEach(o=>{const c=[];let u=!1,l,d;const f=o.graph;let h=o.subject;for(;h&&!u;){const p=this.getQuads(null,null,h,null),_=this.getQuads(h,null,null,null);let g,m=null,y=null,v=null;for(let A=0;A<_.length&&!u;A++)g=_[A],g.graph.equals(f)?l?u=i(h,"has non-list arcs out"):g.predicate.value===Dn.rdf.first?m?u=i(h,"has multiple rdf:first arcs"):s.push(m=g):g.predicate.value===Dn.rdf.rest?y?u=i(h,"has multiple rdf:rest arcs"):s.push(y=g):p.length?u=i(h,"can't be subject and object"):(l=g,d="subject"):u=i(h,"not confined to single graph");for(let A=0;A<p.length&&!u;++A)g=p[A],l?u=i(h,"can't have coreferences"):g.predicate.value===Dn.rdf.rest?v?u=i(h,"has incoming rdf:rest arcs"):v=g:(l=g,d="object");m?c.unshift(m.object):u=i(h,"has no list head"),h=v&&v.subject}u?e=!1:l&&(n[l[d].value]=c)}),e&&this.removeQuads(s),n}addAll(e){if(e instanceof Nh&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof rs&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=ZE(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e instanceof Nh&&(e=e.filtered),e===this)return!0;if(!(e instanceof rs)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));const r=this._graphs,n=e._graphs;let i,a,s,o,c;for(const u in n){if(!(i=r[u]))return!1;i=i.subjects;for(const l in a=n[u].subjects){if(!(s=i[l]))return!1;for(const d in o=a[l]){if(!(c=s[d]))return!1;for(const f in o[d])if(!(f in c))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){if(e&&e instanceof Nh&&(e=e.filtered),e===this)return new rs({entityIndex:this._entityIndex});if(e instanceof rs&&e._entityIndex===this._entityIndex){const r=new rs({entityIndex:this._entityIndex}),n=WRe(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof Nh&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new rs({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof Nh&&(e=e.filtered),e===this){const r=new rs({entityIndex:this._entityIndex});return r._graphs=ZE(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof rs&&this._entityIndex===e._entityIndex){const r=new rs({entityIndex:this._entityIndex}),n=QRe(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){const r=new rs({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new PO().quadsToString(this)}union(e){const r=new rs({entityIndex:this._entityIndex});return r._graphs=ZE(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function bo(t,e,r=0){const n=e[r];if(n&&!(n in t))return!1;let i=!1;for(const a in n?{[n]:t[n]}:t){const s=r===2?null:bo(t[a],e,r+1);s!==!1&&(i=i||Object.create(null),i[a]=s)}return i}let Nh=class KRe extends Wt.Readable{constructor(e,r,n,i,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,s=this._filtered=new cM({factory:e._factory,entityIndex:this.options.entityIndex});let o,c,u;if(a&&!(o=s._termToNumericId(a))||i&&!(c=s._termToNumericId(i))||n&&!(u=s._termToNumericId(n)))return s;const l=e._getGraphs(r);for(const d in l){let f,h,p,_;(_=l[d])&&(!o&&c?(h=bo(_.predicates,[c,u,o]))&&(f=bo(_.subjects,[o,c,u]),p=bo(_.objects,[u,o,c])):u?(p=bo(_.objects,[u,o,c]))&&(f=bo(_.subjects,[o,c,u]),h=bo(_.predicates,[c,u,o])):(f=bo(_.subjects,[o,c,u]))&&(h=bo(_.predicates,[c,u,o]),p=bo(_.objects,[u,o,c])),f&&(s._graphs[d]={subjects:f,predicates:h,objects:p}))}s._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[W8]&&(this[W8]=this[Symbol.iterator]());const r=this[W8];for(;--e>=0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new PO().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new KRe(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}},XRe=class{dataset(e){return new cM(e)}};function JRe(t){const e=[];for(const{subject:r,object:n}of t.match(null,Js.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Js.defaultGraph())){const i=[...t.match(null,null,null,r)],a=[...t.match(null,null,null,n)];e.push({premise:i,conclusion:a})}return e}let YRe=class{constructor(e){this._store=e}_add(e,r,n,i,a){this._store._addToIndex(i.subjects,e,r,n)&&(this._store._addToIndex(i.predicates,r,n,e),this._store._addToIndex(i.objects,n,e,r),a())}_evaluatePremise(e,r,n,i=0){let a,s,o,c,u;const[l,d,f]=e.premise[i].value,h=r[e.premise[i].content],p=!(o=l.value);for(o in p?h:{[o]:h[o]})if(c=h[o]){p&&(l.value=Number(o)),a=!(o=d.value);for(o in a?c:{[o]:c[o]})if(u=c[o]){a&&(d.value=Number(o)),s=!(o=f.value);for(o in s?u:{[o]:u[o]})s&&(f.value=Number(o)),i===e.premise.length-1?e.conclusion.forEach(_=>{this._add(_.subject.value,_.predicate.value,_.object.value,r,()=>{n(_)})}):this._evaluatePremise(e,r,n,i+1);s&&(f.value=null)}a&&(d.value=null)}p&&(l.value=null)}_evaluateRules(e,r,n){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],r,n)}_reasonGraphNaive(e,r){const n=[];function i(o){o.next&&o.next.forEach(c=>{n.push([o.subject.value,o.predicate.value,o.object.value,c])})}const a=o=>{o.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,r,()=>{i(c)})})};this._evaluateRules(e,r,i);let s;for(;(s=n.pop())!==void 0;){const[o,c,u,l]=s,d=l.basePremise.subject.value;d||(l.basePremise.subject.value=o);const f=l.basePremise.predicate.value;f||(l.basePremise.predicate.value=c);const h=l.basePremise.object.value;h||(l.basePremise.object.value=u),l.premise.length===0?a(l.conclusion):this._evaluatePremise(l,r,i),d||(l.basePremise.subject.value=null),f||(l.basePremise.predicate.value=null),h||(l.basePremise.object.value=null)}}_createRule({premise:e,conclusion:r}){const n={},i=s=>s.termType==="Variable"?n[s.value]=n[s.value]||{}:{value:this._store._termToNewNumericId(s)},a=s=>({subject:i(s.subject),predicate:i(s.predicate),object:i(s.object)});return{premise:e.map(s=>a(s)),conclusion:r.map(s=>a(s)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=JRe(e)),e=e.map(n=>this._createRule(n));for(const n of e)for(const i of e)for(let a=0;a<i.premise.length;a++){const s=i.premise[a];for(const o of n.conclusion){if(K8(s.subject,o.subject)&&K8(s.predicate,o.predicate)&&K8(s.object,o.object)){const c=new Set,u=[];s.subject.value=s.subject.value||1,s.object.value=s.object.value||1,s.predicate.value=s.predicate.value||1;for(let l=0;l<i.premise.length;l++)l!==a&&u.push(mle(i.premise[l],c));(o.next=o.next||[]).push({premise:u,conclusion:i.conclusion,basePremise:s})}i.variables.forEach(c=>{c.value=null})}}for(const n of e){const i=new Set;n.premise=n.premise.map(a=>mle(a,i))}const r=this._store._getGraphs();for(const n in r)this._reasonGraphNaive(e,r[n]);this._store._size=null}};function mle({subject:t,predicate:e,object:r},n){const i=t.value||n.has(t)||(n.add(t),!1),a=e.value||n.has(e)||(n.add(e),!1),s=r.value||n.has(r)||(n.add(r),!1);return!i&&a?{content:"predicates",value:[e,r,t]}:s?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function K8(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}let $Re=class extends Wt.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new RO(e);let n,i;const a={onQuad:(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},onPrefix:(s,o)=>{this.emit("prefix",s,o)}};e&&e.comments&&(a.onComment=s=>{this.emit("comment",s)}),r.parse({on:(s,o)=>{switch(s){case"data":n=o;break;case"end":i=o;break}}},a),this._transform=(s,o,c)=>{n(s),c()},this._flush=s=>{i(),s()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}},ZRe=class extends Wt.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new PO({write:(n,i,a)=>{this.push(n),a&&a()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,i,a)=>{r.addQuad(n,a)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}};const Hct={Lexer:mQ,Parser:RO,Writer:PO,Store:cM,StoreFactory:XRe,EntityIndex:AQ,StreamParser:$Re,StreamWriter:ZRe,Util:kRe,Reasoner:YRe,BaseIRI:vQ,DataFactory:Js,Term:ro,NamedNode:uM,Literal:rf,BlankNode:gQ,Variable:yQ,DefaultGraph:bQ,Quad:Wp,Triple:Wp,termFromId:nf,termToId:ll},kct=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:vQ,BlankNode:gQ,DataFactory:Js,DefaultGraph:bQ,EntityIndex:AQ,Lexer:mQ,Literal:rf,NamedNode:uM,Parser:RO,Quad:Wp,Reasoner:YRe,Store:cM,StoreFactory:XRe,StreamParser:$Re,StreamWriter:ZRe,Term:ro,Triple:Wp,Util:kRe,Variable:yQ,Writer:PO,default:Hct,getRulesFromDataset:JRe,termFromId:nf,termToId:ll},Symbol.toStringTag,{value:"Module"})),TQ=Pl(kct);var _P={},X8={},Fb={},gle;function zct(){if(gle)return Fb;gle=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.fragment=void 0;function t(n){let i=n;(i.endsWith("/")||i.endsWith("#"))&&(i=i.slice(0,i.length-1));const a=[];i.lastIndexOf("/")>0&&a.push(i.lastIndexOf("/")),i.lastIndexOf("#")>0&&a.push(i.lastIndexOf("#"));const s=Math.max(...a);return i.slice(s+1)}function e(n){var i;const a=(i=n.split(/[^a-z0-9]+/ig).filter(s=>s!=="").map(s=>s[0].toUpperCase()+s.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||i===void 0?void 0:i[0];return typeof a>"u"?void 0:a[0].toLowerCase()+a.slice(1)}function r(n){let i=t(n);return i=i?e(i):void 0,i||"v"}return Fb.fragment=r,Fb}var J8={},Mb={},vd={},mP={exports:{}},yle;function Qct(){return yle||(yle=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof E<"u"&&E,n=function(){function a(){this.fetch=!1,this.DOMException=r.DOMException}return a.prototype=r,new a}();(function(a){(function(s){var o=typeof a<"u"&&a||typeof self<"u"&&self||typeof E<"u"&&E||{},c={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function u(B){return B&&DataView.prototype.isPrototypeOf(B)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(B){return B&&l.indexOf(Object.prototype.toString.call(B))>-1};function f(B){if(typeof B!="string"&&(B=String(B)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(B)||B==="")throw new TypeError('Invalid character in header field name: "'+B+'"');return B.toLowerCase()}function h(B){return typeof B!="string"&&(B=String(B)),B}function p(B){var G={next:function(){var K=B.shift();return{done:K===void 0,value:K}}};return c.iterable&&(G[Symbol.iterator]=function(){return G}),G}function _(B){this.map={},B instanceof _?B.forEach(function(G,K){this.append(K,G)},this):Array.isArray(B)?B.forEach(function(G){if(G.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+G.length);this.append(G[0],G[1])},this):B&&Object.getOwnPropertyNames(B).forEach(function(G){this.append(G,B[G])},this)}_.prototype.append=function(B,G){B=f(B),G=h(G);var K=this.map[B];this.map[B]=K?K+", "+G:G},_.prototype.delete=function(B){delete this.map[f(B)]},_.prototype.get=function(B){return B=f(B),this.has(B)?this.map[B]:null},_.prototype.has=function(B){return this.map.hasOwnProperty(f(B))},_.prototype.set=function(B,G){this.map[f(B)]=h(G)},_.prototype.forEach=function(B,G){for(var K in this.map)this.map.hasOwnProperty(K)&&B.call(G,this.map[K],K,this)},_.prototype.keys=function(){var B=[];return this.forEach(function(G,K){B.push(K)}),p(B)},_.prototype.values=function(){var B=[];return this.forEach(function(G){B.push(G)}),p(B)},_.prototype.entries=function(){var B=[];return this.forEach(function(G,K){B.push([K,G])}),p(B)},c.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function g(B){if(!B._noBody){if(B.bodyUsed)return Promise.reject(new TypeError("Already read"));B.bodyUsed=!0}}function m(B){return new Promise(function(G,K){B.onload=function(){G(B.result)},B.onerror=function(){K(B.error)}})}function y(B){var G=new FileReader,K=m(G);return G.readAsArrayBuffer(B),K}function v(B){var G=new FileReader,K=m(G),$=/charset=([A-Za-z0-9_-]+)/.exec(B.type),se=$?$[1]:"utf-8";return G.readAsText(B,se),K}function A(B){for(var G=new Uint8Array(B),K=new Array(G.length),$=0;$<G.length;$++)K[$]=String.fromCharCode(G[$]);return K.join("")}function T(B){if(B.slice)return B.slice(0);var G=new Uint8Array(B.byteLength);return G.set(new Uint8Array(B)),G.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(B){this.bodyUsed=this.bodyUsed,this._bodyInit=B,B?typeof B=="string"?this._bodyText=B:c.blob&&Blob.prototype.isPrototypeOf(B)?this._bodyBlob=B:c.formData&&FormData.prototype.isPrototypeOf(B)?this._bodyFormData=B:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(B)?this._bodyText=B.toString():c.arrayBuffer&&c.blob&&u(B)?(this._bodyArrayBuffer=T(B.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(B)||d(B))?this._bodyArrayBuffer=T(B):this._bodyText=B=Object.prototype.toString.call(B):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof B=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(B)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var B=g(this);if(B)return B;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var B=g(this);return B||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var B=g(this);if(B)return B;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(N)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function j(B){var G=B.toUpperCase();return P.indexOf(G)>-1?G:B}function F(B,G){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');G=G||{};var K=G.body;if(B instanceof F){if(B.bodyUsed)throw new TypeError("Already read");this.url=B.url,this.credentials=B.credentials,G.headers||(this.headers=new _(B.headers)),this.method=B.method,this.mode=B.mode,this.signal=B.signal,!K&&B._bodyInit!=null&&(K=B._bodyInit,B.bodyUsed=!0)}else this.url=String(B);if(this.credentials=G.credentials||this.credentials||"same-origin",(G.headers||!this.headers)&&(this.headers=new _(G.headers)),this.method=j(G.method||this.method||"GET"),this.mode=G.mode||this.mode||null,this.signal=G.signal||this.signal||function(){if("AbortController"in o){var pe=new AbortController;return pe.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&K)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(K),(this.method==="GET"||this.method==="HEAD")&&(G.cache==="no-store"||G.cache==="no-cache")){var $=/([?&])_=[^&]*/;if($.test(this.url))this.url=this.url.replace($,"$1_="+new Date().getTime());else{var se=/\?/;this.url+=(se.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}F.prototype.clone=function(){return new F(this,{body:this._bodyInit})};function N(B){var G=new FormData;return B.trim().split("&").forEach(function(K){if(K){var $=K.split("="),se=$.shift().replace(/\+/g," "),pe=$.join("=").replace(/\+/g," ");G.append(decodeURIComponent(se),decodeURIComponent(pe))}}),G}function R(B){var G=new _,K=B.replace(/\r?\n[\t ]+/g," ");return K.split("\r").map(function($){return $.indexOf(`
`)===0?$.substr(1,$.length):$}).forEach(function($){var se=$.split(":"),pe=se.shift().trim();if(pe){var we=se.join(":").trim();try{G.append(pe,we)}catch(Ce){console.warn("Response "+Ce.message)}}}),G}S.call(F.prototype);function C(B,G){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(G||(G={}),this.type="default",this.status=G.status===void 0?200:G.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=G.statusText===void 0?"":""+G.statusText,this.headers=new _(G.headers),this.url=G.url||"",this._initBody(B)}S.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},C.error=function(){var B=new C(null,{status:200,statusText:""});return B.ok=!1,B.status=0,B.type="error",B};var M=[301,302,303,307,308];C.redirect=function(B,G){if(M.indexOf(G)===-1)throw new RangeError("Invalid status code");return new C(null,{status:G,headers:{location:B}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(G,K){this.message=G,this.name=K;var $=Error(G);this.stack=$.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function U(B,G){return new Promise(function(K,$){var se=new F(B,G);if(se.signal&&se.signal.aborted)return $(new s.DOMException("Aborted","AbortError"));var pe=new XMLHttpRequest;function we(){pe.abort()}pe.onload=function(){var Ie={statusText:pe.statusText,headers:R(pe.getAllResponseHeaders()||"")};se.url.indexOf("file://")===0&&(pe.status<200||pe.status>599)?Ie.status=200:Ie.status=pe.status,Ie.url="responseURL"in pe?pe.responseURL:Ie.headers.get("X-Request-URL");var Oe="response"in pe?pe.response:pe.responseText;setTimeout(function(){K(new C(Oe,Ie))},0)},pe.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},pe.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},pe.onabort=function(){setTimeout(function(){$(new s.DOMException("Aborted","AbortError"))},0)};function Ce(Ie){try{return Ie===""&&o.location.href?o.location.href:Ie}catch{return Ie}}if(pe.open(se.method,Ce(se.url),!0),se.credentials==="include"?pe.withCredentials=!0:se.credentials==="omit"&&(pe.withCredentials=!1),"responseType"in pe&&(c.blob?pe.responseType="blob":c.arrayBuffer&&(pe.responseType="arraybuffer")),G&&typeof G.headers=="object"&&!(G.headers instanceof _||o.Headers&&G.headers instanceof o.Headers)){var Le=[];Object.getOwnPropertyNames(G.headers).forEach(function(Ie){Le.push(f(Ie)),pe.setRequestHeader(Ie,h(G.headers[Ie]))}),se.headers.forEach(function(Ie,Oe){Le.indexOf(Oe)===-1&&pe.setRequestHeader(Oe,Ie)})}else se.headers.forEach(function(Ie,Oe){pe.setRequestHeader(Oe,Ie)});se.signal&&(se.signal.addEventListener("abort",we),pe.onreadystatechange=function(){pe.readyState===4&&se.signal.removeEventListener("abort",we)}),pe.send(typeof se._bodyInit>"u"?null:se._bodyInit)})}return U.polyfill=!0,o.fetch||(o.fetch=U,o.Headers=_,o.Request=F,o.Response=C),s.Headers=_,s.Request=F,s.Response=C,s.fetch=U,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(mP,mP.exports)),mP.exports}var ble;function wQ(){if(ble)return vd;ble=1;var t=E&&E.__awaiter||function(i,a,s,o){function c(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function d(p){try{h(o.next(p))}catch(_){l(_)}}function f(p){try{h(o.throw(p))}catch(_){l(_)}}function h(p){p.done?u(p.value):c(p.value).then(d,f)}h((o=o.apply(i,a||[])).next())})};Object.defineProperty(vd,"__esModule",{value:!0}),vd.fetchContext=vd.fetchJson=void 0;const e=Qct();function r(i,a){var s;return t(this,void 0,void 0,function*(){return(yield((s=a==null?void 0:a.fetch)!==null&&s!==void 0?s:e.fetch)(i)).json()})}vd.fetchJson=r;function n(i,a){return t(this,void 0,void 0,function*(){return(yield r(i,a))["@context"]})}return vd.fetchContext=n,vd}var vle;function Wct(){if(vle)return Mb;vle=1;var t=E&&E.__awaiter||function(n,i,a,s){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function l(h){try{f(s.next(h))}catch(p){u(p)}}function d(h){try{f(s.throw(h))}catch(p){u(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((s=s.apply(n,i||[])).next())})};Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.lookupUri=void 0;const e=wQ();function r(n,i){return t(this,void 0,void 0,function*(){const a=(yield(0,e.fetchContext)(`https://prefix.cc/${n}.file.jsonld`,i))[n];if(typeof a!="string")throw new Error(`Expected uri to be a string, received: ${a} of type ${typeof a}`);return a})}return Mb.lookupUri=r,Mb}var Db={},Ale;function Kct(){if(Ale)return Db;Ale=1;var t=E&&E.__awaiter||function(n,i,a,s){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function l(h){try{f(s.next(h))}catch(p){u(p)}}function d(h){try{f(s.throw(h))}catch(p){u(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((s=s.apply(n,i||[])).next())})};Object.defineProperty(Db,"__esModule",{value:!0}),Db.lookupPrefix=void 0;const e=wQ();function r(n,i){return t(this,void 0,void 0,function*(){const a=new URL("https://prefix.cc/reverse");a.searchParams.append("uri",n),a.searchParams.append("format","jsonld");const s=Object.keys(yield(0,e.fetchContext)(a,i));if(s.length===0)throw new Error("No prefixes returned");return s[0]})}return Db.lookupPrefix=r,Db}var Cb={},Tle;function Xct(){if(Tle)return Cb;Tle=1;var t=E&&E.__awaiter||function(n,i,a,s){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function l(h){try{f(s.next(h))}catch(p){u(p)}}function d(h){try{f(s.throw(h))}catch(p){u(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((s=s.apply(n,i||[])).next())})};Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.lookupAllPrefixes=void 0;const e=wQ();function r(n){return t(this,void 0,void 0,function*(){return(0,e.fetchContext)("https://prefix.cc/context",n)})}return Cb.lookupAllPrefixes=r,Cb}var wle;function Sle(){return wle||(wle=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wct(),t),r(Kct(),t),r(Xct(),t)}(J8)),J8}var xle;function Jct(){return xle||(xle=1,function(t){var e=E&&E.__awaiter||function(o,c,u,l){function d(f){return f instanceof u?f:new u(function(h){h(f)})}return new(u||(u=Promise))(function(f,h){function p(m){try{g(l.next(m))}catch(y){h(y)}}function _(m){try{g(l.throw(m))}catch(y){h(y)}}function g(m){m.done?f(m.value):d(m.value).then(p,_)}g((l=l.apply(o,c||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.lookupAllPrefixes=t.prefixToUri=t.uriToPrefix=void 0;const r=zct(),n=Sle();function i(o,c){return e(this,void 0,void 0,function*(){let u;try{u=yield(0,n.lookupPrefix)(o,c)}catch{c!=null&&c.mintOnUnknown&&(u=(0,r.fragment)(o).slice(0,4))}if(typeof u<"u"&&typeof(c==null?void 0:c.existingPrefixes)=="object"&&u in c.existingPrefixes){let l=0;for(;`${u}${l}`in c.existingPrefixes;)l+=1;u=`${u}${l}`}return u})}t.uriToPrefix=i;function a(o,c){return e(this,void 0,void 0,function*(){try{return yield(0,n.lookupUri)(o,c)}catch{return}})}t.prefixToUri=a;var s=Sle();Object.defineProperty(t,"lookupAllPrefixes",{enumerable:!0,get:function(){return s.lookupAllPrefixes}})}(X8)),X8}var gP={},Ele;function Yct(){if(Ele)return gP;Ele=1,Object.defineProperty(gP,"__esModule",{value:!0}),gP.getShaclName=t;function t(e){if(e.termType!=="NamedNode"||!e.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${e.value} is not part of the SHACL namespace`);return e.value.slice(27)}return gP}var yP={},Ile;function $ct(){return Ile||(Ile=1,Object.defineProperty(yP,"__esModule",{value:!0}),yP.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0}),yP}var bP={},Ole;function Zct(){return Ole||(Ole=1,Object.defineProperty(bP,"__esModule",{value:!0}),bP.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"}),bP}var vP={},Rle;function elt(){return Rle||(Rle=1,Object.defineProperty(vP,"__esModule",{value:!0}),vP.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0}),vP}var Ple;function tlt(){if(Ple)return _P;Ple=1;var t=E&&E.__awaiter||function(h,p,_,g){function m(y){return y instanceof _?y:new _(function(v){v(y)})}return new(_||(_=Promise))(function(y,v){function A(P){try{S(g.next(P))}catch(j){v(j)}}function T(P){try{S(g.throw(P))}catch(j){v(j)}}function S(P){P.done?y(P.value):m(P.value).then(A,T)}S((g=g.apply(h,p||[])).next())})},e=E&&E.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(_P,"__esModule",{value:!0});const r=TQ,n=Jct(),i=TO(),a=Yct(),s=e($ct()),o=e(Zct()),c=e(elt());function u(h){var p;return(p=/^[^]*[#/]/.exec(h))===null||p===void 0?void 0:p[0]}const l={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},d={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class f{constructor(p,_,g={},m=void 0,y=!0,v=!1,A,T=!1,S=!0){this.store=p,this.base=m,this.errorOnExtraQuads=y,this.mintUnspecifiedPrefixes=v,this.fetch=A,this.extendedSyntax=T,this.requireBase=S,this.prefixes={},this.prefixRev={};for(const P of Object.keys(g)){const j=g[P],F=typeof j=="string"?j:j.value;!(F in l)&&!(P in d)&&(this.prefixRev[F]=P,this.prefixes[P]=F)}this.writer=_,this.requireBase=S}write(){return t(this,void 0,void 0,function*(){const p=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(p.length===1&&p[0].subject.termType==="NamedNode"){const g=p[0].subject;this.store.removeQuads(p),g.equals(r.DataFactory.namedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,i.termToString)(g)}`),yield this.writeImports(g)}else if(this.requireBase)throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const g=new Set;for(const y of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(y.termType==="NamedNode"){const v=u(y.value);v&&!(v in this.prefixRev)&&!(v in l)&&g.add(v)}const m=Object.assign(Object.assign({},this.prefixes),d);yield Promise.all([...g].map(y=>(0,n.uriToPrefix)(y,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:m}).then(v=>{this.prefixes[v]=y,m[v]=y,this.prefixRev[y]=v})))}const _=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(g=>g.termType==="NamedNode").map(g=>u(g.value)).filter(g=>typeof g=="string"));for(const g in this.prefixRev)_.has(g)||(delete this.prefixes[this.prefixRev[g]],delete this.prefixRev[g]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),d),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),l),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const g=this.store.getSubjects(null,null,null);g.length>0&&this.writer.newLine(1);for(const m of g)this.writer.add(yield this.termToString(m,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(m),this.writer.deindent();g.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error(`Dataset contains quads that cannot be written in SHACLC [
${new r.Writer({prefixes:this.prefixes}).quadsToString(this.store.getQuads(null,null,null,null))}]`);this.writer.end()})}writeImports(p){return t(this,void 0,void 0,function*(){const _=this.store.getObjectsOnce(p,r.DataFactory.namedNode("http://www.w3.org/2002/07/owl#imports"),null);if(_.length>0)for(const g of _)this.writer.add(`IMPORTS <${g.value}>`,!0)})}writePrefixes(){return t(this,void 0,void 0,function*(){const p=Object.keys(this.prefixes).filter(_=>!(_ in o.default)).sort();if(p.length>0)for(const _ of p)this.writer.add(`PREFIX ${_}: <${this.prefixes[_]}>`,!0)})}termToString(p){return t(this,arguments,void 0,function*(_,g=!1,m=!1){try{if(g)throw new Error("Shacl name disabled");return(0,a.getShaclName)(_)}catch{}if(_.termType==="NamedNode"){const y=u(_.value);return y&&y in this.prefixRev&&y in this.prefixRev?`${this.prefixRev[y]}:${_.value.slice(y.length)}`:(0,i.termToString)(_)}if(_.termType==="Literal")return _.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||_.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?_.value:(0,i.termToString)(_);throw _.termType==="BlankNode"&&m&&(0,i.termToString)(_),new Error(`Invalid term type for extra statement ${_.value} (${_.termType})`)})}writeShapes(){return t(this,void 0,void 0,function*(){for(const p of this.store.getSubjectsOnce(r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),r.DataFactory.namedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(p,r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),r.DataFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(p)),this.writer.add(" ");const _=this.store.getObjectsOnce(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(_.length>0){this.writer.add("-> ");for(const m of _)m.termType==="NamedNode"?this.writer.add(yield this.termToString(m)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(m,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const g=this.store.getPredicates(p,null,null).filter(m=>[r.DataFactory.namedNode("http://www.w3.org/ns/shacl#targetClass"),r.DataFactory.namedNode("http://www.w3.org/ns/shacl#property"),r.DataFactory.namedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(c.default).map(y=>r.DataFactory.namedNode("http://www.w3.org/ns/shacl#"+y))].every(y=>!m.equals(y)));g.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(p,g)),g.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(p,!1)}})}getSingleProperty(p,_){let g=[p];try{let m=(0,a.getShaclName)(p.predicate),y="pred";if(m==="not"){const v=this.store.getQuadsOnce(p.object,null,null,null);if(g=g.concat(v),v.length!==1)throw new Error("Can only handle having one predicate of 'not'");[p]=v,m=(0,a.getShaclName)(p.predicate),y="not"}if(!(m in _))throw new Error(`${m} is not allowed`);return{name:m,type:y,object:p.object}}catch{this.store.addQuads(g)}}singleLayerPropertiesList(p,_){const g=[];for(const m of this.store.getQuadsOnce(p,null,null,null)){const y=this.getSingleProperty(m,_);y&&g.push(y)}return g}expectOneProperty(p,_){const g=this.store.getQuadsOnce(p,null,null,null);if(g.length===1){const m=this.getSingleProperty(g[0],_);if(m)return m}this.store.addQuads(g)}orProperties(p,_){const g=[];for(const m of this.store.getQuadsOnce(p,new r.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const y=[];for(const v of this.getList(m.object)){const A=this.expectOneProperty(v,_);if(!A)throw this.store.addQuad(m),new Error("Each entry of the 'or' statement must declare exactly one property");y.push(A)}g.push(y)}return g}getList(p){let _=p;const g=[];for(;!_.equals(r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)g.push(this.singleObject(_,r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),_=this.singleObject(_,r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return g}writeIriLiteralOrArray(p){return t(this,void 0,void 0,function*(){if(p.termType==="BlankNode"){this.writer.add("[");let _=!0;for(const g of this.getList(p))_?_=!1:this.writer.add(" "),this.writer.add(yield this.termToString(g));this.writer.add("]")}else this.writer.add(yield this.termToString(p))})}singleObject(p,_,g){var m;return(m=this.singleQuad(p,_,g))===null||m===void 0?void 0:m.object}singleQuad(p,_,g=!1){const m=this.store.getQuadsOnce(p,_,null,null);if(g&&m.length!==1)throw this.store.addQuads(m),new Error(`The subject and predicate ${p==null?void 0:p.value} ${_==null?void 0:_.value} must have exactly one object. Instead has ${m.length}`);if(m.length>1)throw this.store.addQuads(m),new Error(`The subject and predicate ${p==null?void 0:p.value} ${_==null?void 0:_.value} can have at most one object. Instead has ${m.length}`);return m.length===1?m[0]:void 0}writeAssigment(p){return t(this,arguments,void 0,function*({name:_,type:g,object:m}){g==="not"&&this.writer.add("!"),this.writer.add(_),this.writer.add("="),yield this.writeIriLiteralOrArray(m)})}writeAtom(p){return t(this,arguments,void 0,function*({name:_,type:g,object:m}){switch(g==="not"&&this.writer.add("!"),_){case"node":{if(m.termType==="NamedNode")this.writer.add(`@${yield this.termToString(m)}`);else if(m.termType==="BlankNode")yield this.writeShapeBody(m);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,a.getShaclName)(m));return}case"class":{this.writer.add(yield this.termToString(m));return}case"datatype":{this.writer.add(yield this.termToString(m));return}default:this.writer.add(_),this.writer.add("="),yield this.writeIriLiteralOrArray(m)}})}writeAssigments(p){return t(this,arguments,void 0,function*(_,g=" ",m=!0,y){for(const v of _)m?m=!1:this.writer.add(g),y?yield this.writeAtom(v):yield this.writeAssigment(v)})}writeParams(p){return t(this,arguments,void 0,function*(_,g=!0,m,y=!1,v=!1){const A=this.orProperties(_,m),T=this.singleLayerPropertiesList(_,m);v&&(A.length>0||T.length>0)&&this.writer.newLine(1);for(const S of A)g?g=!1:this.writer.add(" "),yield this.writeAssigments(S,"|",!0,y);yield this.writeAssigments(T," ",g,y),v&&(A.length>0||T.length>0)&&this.writer.add(" .")})}writeShapeBody(p){return t(this,arguments,void 0,function*(_,g=!0){this.writer.add("{").indent();const m=this.store.getObjectsOnce(_,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(_,!0,c.default,!1,!0);for(const y of m)this.writer.newLine(1),yield this.writeProperty(y);this.writer.deindent().newLine(1),g?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(p){return t(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#path"),!0));const _=this.singleObject(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#minCount")),g=this.singleObject(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#maxCount")),m=this.singleObject(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#nodeKind")),y=this.singleObject(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#class")),v=this.singleObject(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#datatype")),A=this.store.getObjectsOnce(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#node"),null);if(m&&(this.writer.add(" "),this.writer.add((0,a.getShaclName)(m))),y&&(this.writer.add(" "),this.writer.add(yield this.termToString(y))),v&&(this.writer.add(" "),this.writer.add(yield this.termToString(v))),_!==void 0||g!==void 0){if(this.writer.add(" ["),_){if(_.termType!=="Literal"||_.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(_.value)}else this.writer.add("0");if(this.writer.add(".."),g){if(g.termType!=="Literal"||g.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(p,r.DataFactory.namedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(g.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(p,!1,s.default,!0);const T=[];for(const S of A)if(S.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(S)}`);else if(S.termType==="BlankNode")T.push(S);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const S of T)this.writer.add(" "),yield this.writeShapeBody(S);this.extendedSyntax&&this.store.getQuads(p,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(p),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),T.length===0&&this.writer.add(" .")})}writeTurtlePredicates(p){return t(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(p,this.store.getPredicates(p,null,null))})}writeGivenTurtlePredicates(p,_){return t(this,void 0,void 0,function*(){let g=!1;if(_.some(m=>m.equals(r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const m=this.store.getObjectsOnce(p,r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);m.length>0&&(g=!0,this.writer.add("a "),yield this.writeTurtleObjects(m))}for(const m of _)m.equals(r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(g?(this.writer.add(" ;"),this.writer.newLine(1)):g=!0,this.writer.add(yield this.termToString(m,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(p,m,null)))})}writeTurtleObjects(p){return t(this,void 0,void 0,function*(){const _=[],g=[];for(const y of p)y.termType==="BlankNode"&&[...this.store.match(null,null,y),...this.store.match(null,y,null)].length===0?_.push(y):g.push(y);this.writer.add((yield Promise.all(g.map(y=>this.termToString(y,!0,!0)))).join(", "));let m=g.length>0;if(_.length>0)for(const y of _)m?this.writer.add(", "):m=!0,(yield this.writeList(y))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(y),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(p){return t(this,void 0,void 0,function*(){let _=p;const g=[],m=[];for(;!_.equals(r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const v=this.store.getQuadsOnce(_,r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),A=this.store.getQuadsOnce(_,r.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(m.push(...v,...A),v.length!==1||A.length!==1||this.store.getQuads(_,null,null,null).length!==0)return this.store.addQuads(m),!1;g.push(v[0].object),_=A[0].object}let y=!1;this.writer.add("(");for(const v of g)y?this.writer.add(" "):y=!0,yield this.writeTurtleObjects([v]);return this.writer.add(")"),!0})}writePath(p){return t(this,arguments,void 0,function*(_,g=!1){if(_.termType==="NamedNode")this.writer.add(yield this.termToString(_));else if(_.termType==="BlankNode"){const m=this.store.getQuadsOnce(_,null,null,null);if(m.length===1){const{predicate:y,object:v}=m[0];switch(y.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(v,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const A=this.getList(v);if(A.length===0)throw new Error("Invalid Alternative Path - no options");if(A.length===1)yield this.writePath(A[0]);else{g&&this.writer.add("(");let T=!0;for(const S of A)T?T=!1:this.writer.add("|"),yield this.writePath(S,!0);g&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(v,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(v,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(v,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${_.value}`)}}else{this.store.addQuads(m);const y=this.getList(_);if(y.length===0)throw new Error("Invalid Path");{g&&this.writer.add("(");let v=!0;for(const A of y)v?v=!1:this.writer.add("/"),yield this.writePath(A,!0);g&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}return _P.default=f,_P}var AP={},Nle;function rlt(){if(Nle)return AP;Nle=1,Object.defineProperty(AP,"__esModule",{value:!0});class t{constructor(r){this.indents=0,this.write=r.write,this.end=r.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(r,n=!1){return this.write(n?`
${"	".repeat(this.indents)}${r}`:r,"utf-8"),this}newLine(r=2){return this.write(`
`.repeat(r)+"	".repeat(this.indents),"utf-8"),this}}return AP.default=t,AP}var TP={},Fle;function nlt(){if(Fle)return TP;Fle=1,Object.defineProperty(TP,"__esModule",{value:!0});const t=TQ;class e extends t.Store{getQuadsOnce(n,i,a,s){const o=this.getQuads(n,i,a,s);return this.removeQuads(o),o}getSubjectsOnce(n,i,a){return this.getQuadsOnce(null,n,i,a).map(s=>s.subject)}getObjectsOnce(n,i,a){return this.getQuadsOnce(n,i,null,a).map(s=>s.object)}}return TP.default=e,TP}var Mle;function ilt(){if(Mle)return fP;Mle=1;var t=E&&E.__awaiter||function(o,c,u,l){function d(f){return f instanceof u?f:new u(function(h){h(f)})}return new(u||(u=Promise))(function(f,h){function p(m){try{g(l.next(m))}catch(y){h(y)}}function _(m){try{g(l.throw(m))}catch(y){h(y)}}function g(m){m.done?f(m.value):d(m.value).then(p,_)}g((l=l.apply(o,c||[])).next())})},e=E&&E.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(fP,"__esModule",{value:!0}),fP.write=s;const r=TQ,n=e(tlt()),i=e(rlt()),a=e(nlt());function s(o,c){return t(this,void 0,void 0,function*(){return new Promise((u,l)=>t(this,void 0,void 0,function*(){try{let d="";const f=new a.default(o),h=f.getGraphs(null,null,null);if(h.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(h.length===1&&!h[0].equals(r.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${h[0].value}`);const p=new i.default({write:g=>{d+=g},end:()=>{let g=f.getQuads(null,null,null,null);g.length===0&&(g=void 0),u({text:d,extraQuads:g})}});yield new n.default(f,p,c==null?void 0:c.prefixes,void 0,(c==null?void 0:c.errorOnUnused)!==!1,c==null?void 0:c.mintPrefixes,c==null?void 0:c.fetch,c==null?void 0:c.extendedSyntax,(c==null?void 0:c.requireBase)!==!1).write()}catch(d){l(d)}}))})}return fP}var Dle;function alt(){if(Dle)return Ib;Dle=1,Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.ActorRdfSerializeShaclc=void 0;const t=uQ(),e=Sct(),r=Wt,n=ilt();let i=class extends t.ActorRdfSerializeFixedMediaTypes{constructor(s){super(s)}async runHandle(s,o){const c=new r.Readable;c._read=()=>{};try{const u={};s.quadStream.on("prefix",(d,f)=>{u[d]=f});const{text:l}=await(0,n.write)(await(0,e.default)(s.quadStream),{errorOnUnused:!0,extendedSyntax:o==="text/shaclc-ext",prefixes:u});c.push(l),c.push(null)}catch(u){c._read=()=>{c.emit("error",u)}}return{data:c,triples:!0}}};return Ib.ActorRdfSerializeShaclc=i,Ib}var Cle;function slt(){return Cle||(Cle=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(alt(),t)}(z8)),z8}var Y8={},Lb={},$8={},jb={},Lle;function ePe(){if(Lle)return jb;Lle=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.ActorRdfUpdateQuads=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return jb.ActorRdfUpdateQuads=e,jb}var Ad={},Z8={},Bb={},qb={},eB={},tB={},Ub={},jle;function olt(){if(jle)return Ub;jle=1,Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.BlankNodeScoped=void 0;let t=class{constructor(r,n){k(this,"termType","BlankNode");k(this,"value");k(this,"skolemized");this.value=r,this.skolemized=n}equals(r){return!!r&&r.termType==="BlankNode"&&r.value===this.value}};return Ub.BlankNodeScoped=t,Ub}var Vb={},Ble;function ult(){if(Ble)return Vb;Ble=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.BlankNodeBindingsScoped=void 0;let t=class{constructor(r){k(this,"termType","BlankNode");k(this,"singleBindingsScope",!0);k(this,"value");this.value=r}equals(r){return!!r&&r.termType==="BlankNode"&&r.value===this.value}};return Vb.BlankNodeBindingsScoped=t,Vb}var qle;function SQ(){return qle||(qle=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(olt(),t),r(ult(),t)}(tB)),tB}var Ule;function xQ(){return Ule||(Ule=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SKOLEM_PREFIX=void 0,t.getSourceId=i,t.skolemizeTerm=a,t.skolemizeQuad=s,t.skolemizeBindings=o,t.skolemizeQuadStream=c,t.skolemizeBindingsStream=u,t.deskolemizeTerm=l,t.deskolemizeTermNestedThrowing=d,t.deskolemizeQuad=f,t.deskolemizeOperation=h;const e=Ft(),r=SQ(),n=Fi();t.SKOLEM_PREFIX="urn:comunica_skolem:source_";function i(p,_){let g=p.get(_.referenceValue);return g===void 0&&(g=`${p.size}`,p.set(_.referenceValue,g)),g}function a(p,_,g){return _.termType==="BlankNode"?new r.BlankNodeScoped(`bc_${g}_${_.value}`,p.namedNode(`${t.SKOLEM_PREFIX}${g}:${_.value}`)):_}function s(p,_,g){return(0,n.mapTermsNested)(_,m=>a(p,m,g))}function o(p,_,g){return _.map(m=>m.termType==="Quad"?s(p,m,g):a(p,m,g))}function c(p,_,g){const m=_.map(v=>s(p,v,g));function y(){_.getProperty("metadata",v=>{m.setProperty("metadata",v),v.state.addInvalidateListener(y)})}return y(),m}function u(p,_,g){const m=_.map(v=>o(p,v,g));function y(){_.getProperty("metadata",v=>{m.setProperty("metadata",v),v.state.addInvalidateListener(y)})}return y(),m}function l(p,_,g){if(_.termType==="BlankNode"&&"skolemized"in _&&(_=_.skolemized),_.termType==="NamedNode"&&_.value.startsWith(t.SKOLEM_PREFIX)){const m=_.value.indexOf(":",t.SKOLEM_PREFIX.length);if(_.value.slice(t.SKOLEM_PREFIX.length,m)===g){const v=_.value.slice(m+1,_.value.length);return p.blankNode(v)}return null}return _}function d(p,_,g){if(_.termType==="Quad")return(0,n.mapTermsNested)(_,y=>{const v=l(p,y,g);if(!v)throw new Error("Skolemized term is not in scope for this source");return v});const m=l(p,_,g);if(m===null)throw new Error("Skolemized term is not in scope for this source");return m}function f(p,_,g){return(0,n.mapTermsNested)(_,m=>l(p,m,g)??m)}function h(p,_,g){const m=new e.AlgebraFactory;try{return e.algebraUtils.mapOperation(_,{[e.Algebra.Types.PATTERN]:{preVisitor:()=>({continue:!1}),transform:y=>Object.assign(m.createPattern(d(p,y.subject,g),d(p,y.predicate,g),d(p,y.object,g),d(p,y.graph,g)),{metadata:y.metadata})},[e.Algebra.Types.PATH]:{preVisitor:()=>({continue:!1}),transform:y=>Object.assign(m.createPath(d(p,y.subject,g),y.predicate,d(p,y.object,g),d(p,y.graph,g)),{metadata:y.metadata})}})}catch{}}}(eB)),eB}var Vle;function tPe(){if(Vle)return qb;Vle=1,Object.defineProperty(qb,"__esModule",{value:!0}),qb.QuerySourceSkolemized=void 0;const t=dt,e=Mi(),r=ir(),n=xQ();let i=class{constructor(s,o){k(this,"innerSource");k(this,"sourceId");this.innerSource=s,this.sourceId=o}async getSelectorShape(s){return this.innerSource.getSelectorShape(s)}async getFilterFactor(s){return await this.innerSource.getFilterFactor(s)}queryBindings(s,o,c){const u=o.getSafe(t.KeysInitQuery.dataFactory),l=(0,n.deskolemizeOperation)(u,s,this.sourceId);if(!l){const d=new r.ArrayIterator([],{autoStart:!1});return d.setProperty("metadata",{state:new e.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),d}return(0,n.skolemizeBindingsStream)(u,this.innerSource.queryBindings(l,o,c),this.sourceId)}queryBoolean(s,o){return this.innerSource.queryBoolean(s,o)}queryQuads(s,o){const c=o.getSafe(t.KeysInitQuery.dataFactory),u=(0,n.deskolemizeOperation)(c,s,this.sourceId);if(!u){const l=new r.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new e.MetadataValidationState,cardinality:{type:"exact",value:0}}),l}return(0,n.skolemizeQuadStream)(c,this.innerSource.queryQuads(u,o),this.sourceId)}queryVoid(s,o){return this.innerSource.queryVoid(s,o)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return qb.QuerySourceSkolemized=i,qb}var Gle;function clt(){if(Gle)return Bb;Gle=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.ActorOptimizeQueryOperationQuerySourceSkolemize=void 0;const t=Yi(),e=dt,r=ke(),n=tPe(),i=xQ();let a=class extends t.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,r.passTestVoid)()}async run(o){let c=o.context;c.has(e.KeysQuerySourceIdentify.sourceIds)||(c=c.set(e.KeysQuerySourceIdentify.sourceIds,new Map));const u=c.getSafe(e.KeysQuerySourceIdentify.sourceIds);if(c.has(e.KeysQueryOperation.querySources)){let l=c.getSafe(e.KeysQueryOperation.querySources);l=l.map(d=>({source:new n.QuerySourceSkolemized(d.source,(0,i.getSourceId)(u,d.source)),context:d.context})),c=c.set(e.KeysQueryOperation.querySources,l)}if(c.has(e.KeysQueryOperation.serviceSources)){let l=c.getSafe(e.KeysQueryOperation.serviceSources);l=Object.fromEntries(Object.entries(l).map(([d,f])=>[d,{source:new n.QuerySourceSkolemized(f.source,(0,i.getSourceId)(u,f.source)),context:f.context}])),c=c.set(e.KeysQueryOperation.serviceSources,l)}return{context:c,operation:o.operation}}};return Bb.ActorOptimizeQueryOperationQuerySourceSkolemize=a,Bb}var Hle;function rPe(){return Hle||(Hle=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(clt(),t),r(tPe(),t),r(xQ(),t)}(Z8)),Z8}var kle;function llt(){if(kle)return Ad;kle=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.ActorRdfUpdateQuadsDestination=void 0,Ad.deskolemizeStream=i,Ad.deskolemize=a;const t=rPe(),e=dt,r=ke(),n=ePe();function i(o,c,u){return c==null?void 0:c.map(l=>(0,t.deskolemizeQuad)(o,l,u))}function a(o){var d;const c=o.context.getSafe(e.KeysInitQuery.dataFactory),u=o.context.get(e.KeysRdfUpdateQuads.destination),l=(d=o.context.get(e.KeysQuerySourceIdentify.sourceIds))==null?void 0:d.get(u);return l?{...o,quadStreamInsert:i(c,o.quadStreamInsert,l),quadStreamDelete:i(c,o.quadStreamDelete,l)}:o}let s=class extends n.ActorRdfUpdateQuads{async test(c){return(0,r.passTestVoid)()}async run(c){const u=await this.getDestination(c.context);return await this.getOutput(u,a(c))}async getOutput(c,u){return{execute:async()=>{await c.update({insert:u.quadStreamInsert,delete:u.quadStreamDelete}),await(u.deleteGraphs?c.deleteGraphs(u.deleteGraphs.graphs,u.deleteGraphs.requireExistence,u.deleteGraphs.dropGraphs):Promise.resolve()),await(u.createGraphs?c.createGraphs(u.createGraphs.graphs,u.createGraphs.requireNonExistence):Promise.resolve())}}}};return Ad.ActorRdfUpdateQuadsDestination=s,Ad}var rB={},zle;function dlt(){return zle||(zle=1,Object.defineProperty(rB,"__esModule",{value:!0})),rB}var Qle;function nPe(){return Qle||(Qle=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ePe(),t),r(llt(),t),r(dlt(),t)}($8)),$8}var Gb={},Wle;function flt(){if(Wle)return Gb;Wle=1,Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.RdfJsQuadDestination=void 0;const t=N2e(),e=Br();let r=class{constructor(i,a){k(this,"dataFactory");k(this,"store");this.dataFactory=i,this.store=a}async update(i){i.delete&&await(0,t.promisifyEventEmitter)(this.store.remove(i.delete)),i.insert&&await(0,t.promisifyEventEmitter)(this.store.import(i.insert))}async deleteGraphs(i,a,s){switch(i){case"ALL":await(0,t.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const o=this.store.match(),c={};o.on("data",u=>{u.graph.termType!=="DefaultGraph"&&(c[(0,e.termToString)(u.graph)]=!0)}),await(0,t.promisifyEventEmitter)(o),await Promise.all(Object.keys(c).map(u=>(0,t.promisifyEventEmitter)(this.store.deleteGraph((0,e.stringToTerm)(u,this.dataFactory)))));break;default:for(const u of Array.isArray(i)?i:[i])await(0,t.promisifyEventEmitter)(this.store.deleteGraph(u))}}async createGraphs(i,a){if(a)for(const s of i){const o=this.store.match(void 0,void 0,void 0,s);await new Promise((c,u)=>{o.once("data",()=>{u(new Error(`Unable to create graph ${s.value} as it already exists`))}),o.on("end",c),o.on("error",u)})}}};return Gb.RdfJsQuadDestination=r,Gb}var Kle;function hlt(){if(Kle)return Lb;Kle=1,Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.ActorRdfUpdateQuadsRdfJsStore=void 0;const t=nPe(),e=dt,r=ke(),n=rr(),i=flt();let a=class extends t.ActorRdfUpdateQuadsDestination{constructor(o){super(o)}async test(o){var u;const c=(0,n.getContextDestination)(o.context);return!c||typeof c=="string"||!("remove"in c)&&"value"in c&&!((u=c.value)!=null&&u.remove)?(0,r.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,r.passTestVoid)()}async getDestination(o){const c=(0,n.getContextDestination)(o);return new i.RdfJsQuadDestination(o.getSafe(e.KeysInitQuery.dataFactory),"remove"in c?c:c.value)}};return Lb.ActorRdfUpdateQuadsRdfJsStore=a,Lb}var Xle;function plt(){return Xle||(Xle=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(hlt(),t)}(Y8)),Y8}var nB={},Hb={},kb={},Jle;function _lt(){var a;if(Jle)return kb;Jle=1,Object.defineProperty(kb,"__esModule",{value:!0}),kb.ExpressionFunctionBnode=void 0;const t=et(),e=dt,r=SQ(),n=Ye();let i=(a=class extends t.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.BNODE,apply:async o=>{const{args:c,mapping:u,exprEval:l}=o,d=c.length===1?await l.evaluatorExpressionEvaluation(c[0],u):void 0;let f;if(d){const p=a.bnodeTree.search([d],l.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider),l.context.getSafe(e.KeysInitQuery.functionArgumentsCache));if(!p)throw new n.InvalidArgumentTypes(c,n.SparqlOperator.BNODE);f=p(l)([d]).str()}const h=new r.BlankNodeBindingsScoped(f??`BNODE_${a.bnodeCounter++}`);return new n.BlankNode(h)}})}checkArity(o){return o.length===0||o.length===1}},k(a,"bnodeTree",(0,n.declare)(n.SparqlOperator.BNODE).onString1(()=>o=>o).collect()),k(a,"bnodeCounter",0),a);return kb.ExpressionFunctionBnode=i,kb}var Yle;function mlt(){if(Yle)return Hb;Yle=1,Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.ActorFunctionFactoryExpressionBnode=void 0;const t=et(),e=Ye(),r=_lt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.BNODE],termFunction:!1})}async run(a){return new r.ExpressionFunctionBnode}};return Hb.ActorFunctionFactoryExpressionBnode=n,Hb}var $le;function glt(){return $le||($le=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mlt(),t)}(nB)),nB}var iB={},zb={},Qb={},Zle;function ylt(){if(Zle)return Qb;Zle=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.ExpressionFunctionBound=void 0;const t=et(),e=dt,r=Bl(),n=Ye();let i=class extends t.ExpressionFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.BOUND,apply:async({args:s,mapping:o,exprEval:c})=>{const u=s[0];if(u.expressionType!==r.ExpressionType.Variable)throw new n.InvalidArgumentTypes(s,n.SparqlOperator.BOUND);const l=o.has((0,n.expressionToVar)(c.context.getSafe(e.KeysInitQuery.dataFactory),u));return(0,n.bool)(l)}})}};return Qb.ExpressionFunctionBound=i,Qb}var ede;function blt(){if(ede)return zb;ede=1,Object.defineProperty(zb,"__esModule",{value:!0}),zb.ActorFunctionFactoryExpressionBound=void 0;const t=et(),e=Ye(),r=ylt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.BOUND],termFunction:!1})}async run(a){return new r.ExpressionFunctionBound}};return zb.ActorFunctionFactoryExpressionBound=n,zb}var tde;function vlt(){return tde||(tde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(blt(),t)}(iB)),iB}var aB={},Wb={},Kb={},rde;function Alt(){if(rde)return Kb;rde=1,Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.ExpressionFunctionCoalesce=void 0;const t=et(),e=Ye();let r=class extends t.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:e.SparqlOperator.COALESCE,apply:async({args:i,mapping:a,exprEval:s})=>{const o=[];for(const c of i)try{return await s.evaluatorExpressionEvaluation(c,a)}catch(u){o.push(u)}throw new e.CoalesceError(o)}})}};return Kb.ExpressionFunctionCoalesce=r,Kb}var nde;function Tlt(){if(nde)return Wb;nde=1,Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.ActorFunctionFactoryExpressionCoalesce=void 0;const t=et(),e=Ye(),r=Alt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.COALESCE],termFunction:!1})}async run(a){return new r.ExpressionFunctionCoalesce}};return Wb.ActorFunctionFactoryExpressionCoalesce=n,Wb}var ide;function wlt(){return ide||(ide=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tlt(),t)}(aB)),aB}var sB={},Xb={},Jb={},ade;function Slt(){var a;if(ade)return Jb;ade=1,Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.ExpressionFunctionConcat=void 0;const t=et(),e=dt,r=Ye(),n=Yu();let i=(a=class extends t.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.CONCAT,apply:async o=>{const{args:c,mapping:u,exprEval:l}=o,d=c.map(async m=>l.evaluatorExpressionEvaluation(m,u)).map(async m=>{const y=a.concatTree.search([await m],l.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider),l.context.getSafe(e.KeysInitQuery.functionArgumentsCache));if(!y)throw new r.InvalidArgumentTypes(c,r.SparqlOperator.CONCAT);return y(l)([await m])}),f=await Promise.all(d),p=f.map(m=>m.typedValue).join(""),_=a.langAllEqual(f)?f[0].language:void 0,g=a.dirAllEqual(f)?f[0].direction:void 0;return _?g?(0,n.dirLangString)(p,_,g):(0,r.langString)(p,_):(0,r.string)(p)}})}static langAllEqual(o){return o.length>0&&o.every(c=>c.language===o[0].language)}static dirAllEqual(o){return o.length>0&&o.every(c=>c.direction===o[0].direction)}},k(a,"concatTree",(0,r.declare)(r.SparqlOperator.CONCAT).onStringly1(()=>o=>o).collect()),a);return Jb.ExpressionFunctionConcat=i,Jb}var sde;function xlt(){if(sde)return Xb;sde=1,Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.ActorFunctionFactoryExpressionConcat=void 0;const t=et(),e=Ye(),r=Slt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.CONCAT],termFunction:!1})}async run(a){return new r.ExpressionFunctionConcat}};return Xb.ActorFunctionFactoryExpressionConcat=n,Xb}var ode;function Elt(){return ode||(ode=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(xlt(),t)}(sB)),sB}var oB={},Yb={},$b={},ude;function Ilt(){if(ude)return $b;ude=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.NamedExtension=void 0;const t=iOe(),e=dt,r=Ye();let n=class extends t.ExpressionFunctionBase{constructor({operator:a,functionDefinition:s}){super({arity:Number.POSITIVE_INFINITY,operator:a,apply:async({args:o,exprEval:c,mapping:u})=>{const l=await Promise.all(o.map(d=>c.evaluatorExpressionEvaluation(d,u)));try{return new r.TermTransformer(c.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await s(l.map(d=>d.toRDF(c.context.getSafe(e.KeysInitQuery.dataFactory)))))}catch(d){throw new r.ExtensionFunctionError(this.operator,d)}}})}};return $b.NamedExtension=n,$b}var cde;function Olt(){if(cde)return Yb;cde=1,Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.ActorFunctionFactoryExpressionExtensions=void 0;const t=et(),e=dt,r=ke(),n=jr(),i=Ilt();let a=class extends t.ActorFunctionFactory{constructor(o){super(o)}async test({context:o,functionName:c}){return await o.getSafe(e.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c))?(0,r.passTestVoid)():(0,r.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${e.KeysInitQuery.extensionFunctionCreator.name} or ${e.KeysInitQuery.extensionFunctions.name}`)}async run({context:o,functionName:c}){const l=await o.getSafe(e.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c));return new i.NamedExtension({operator:c,functionDefinition:l})}};return Yb.ActorFunctionFactoryExpressionExtensions=a,Yb}var lde;function Rlt(){return lde||(lde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Olt(),t)}(oB)),oB}var uB={},Zb={},ev={},dde;function Plt(){if(dde)return ev;dde=1,Object.defineProperty(ev,"__esModule",{value:!0}),ev.ExpressionFunctionIf=void 0;const t=et(),e=Ye();let r=class extends t.ExpressionFunctionBase{constructor(){super({arity:3,operator:e.SparqlOperator.IF,apply:async({args:i,mapping:a,exprEval:s})=>(await s.evaluatorExpressionEvaluation(i[0],a)).coerceEBV()?s.evaluatorExpressionEvaluation(i[1],a):s.evaluatorExpressionEvaluation(i[2],a)})}};return ev.ExpressionFunctionIf=r,ev}var fde;function Nlt(){if(fde)return Zb;fde=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.ActorFunctionFactoryExpressionIf=void 0;const t=et(),e=Ye(),r=Plt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.IF],termFunction:!1})}async run(a){return new r.ExpressionFunctionIf}};return Zb.ActorFunctionFactoryExpressionIf=n,Zb}var hde;function Flt(){return hde||(hde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Nlt(),t)}(uB)),uB}var cB={},tv={},rv={},pde;function Mlt(){if(pde)return rv;pde=1,Object.defineProperty(rv,"__esModule",{value:!0}),rv.ExpressionFunctionLogicalAnd=void 0;const t=et(),e=Ye();let r=class extends t.ExpressionFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.LOGICAL_AND,apply:async({args:i,mapping:a,exprEval:s})=>{const[o,c]=i;try{if(!(await s.evaluatorExpressionEvaluation(o,a)).coerceEBV())return(0,e.bool)(!1);const f=(await s.evaluatorExpressionEvaluation(c,a)).coerceEBV();return(0,e.bool)(f)}catch(u){if((await s.evaluatorExpressionEvaluation(c,a)).coerceEBV())throw u;return(0,e.bool)(!1)}}})}};return rv.ExpressionFunctionLogicalAnd=r,rv}var _de;function Dlt(){if(_de)return tv;_de=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.ActorFunctionFactoryExpressionLogicalAnd=void 0;const t=et(),e=Ye(),r=Mlt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(a){return new r.ExpressionFunctionLogicalAnd}};return tv.ActorFunctionFactoryExpressionLogicalAnd=n,tv}var mde;function Clt(){return mde||(mde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dlt(),t)}(cB)),cB}var lB={},nv={},iv={},gde;function Llt(){if(gde)return iv;gde=1,Object.defineProperty(iv,"__esModule",{value:!0}),iv.ExpressionFunctionLogicalOr=void 0;const t=et(),e=Ye();let r=class extends t.ExpressionFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.LOGICAL_OR,apply:async({args:i,mapping:a,exprEval:s})=>{const[o,c]=i;try{if((await s.evaluatorExpressionEvaluation(o,a)).coerceEBV())return(0,e.bool)(!0);const f=(await s.evaluatorExpressionEvaluation(c,a)).coerceEBV();return(0,e.bool)(f)}catch(u){if(!(await s.evaluatorExpressionEvaluation(c,a)).coerceEBV())throw u;return(0,e.bool)(!0)}}})}};return iv.ExpressionFunctionLogicalOr=r,iv}var yde;function jlt(){if(yde)return nv;yde=1,Object.defineProperty(nv,"__esModule",{value:!0}),nv.ActorFunctionFactoryExpressionLogicalOr=void 0;const t=et(),e=Ye(),r=Llt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(a){return new r.ExpressionFunctionLogicalOr}};return nv.ActorFunctionFactoryExpressionLogicalOr=n,nv}var bde;function Blt(){return bde||(bde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(jlt(),t)}(lB)),lB}var dB={},av={},sv={},vde;function qlt(){if(vde)return sv;vde=1,Object.defineProperty(sv,"__esModule",{value:!0}),sv.ExpressionFunctionSameTerm=void 0;const t=et(),e=dt,r=Ye();let n=class extends t.ExpressionFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.SAME_TERM,apply:async({args:a,mapping:s,exprEval:o})=>{const c=o.context.getSafe(e.KeysInitQuery.dataFactory),[u,l]=a.map(h=>o.evaluatorExpressionEvaluation(h,s)),[d,f]=await Promise.all([u,l]);return(0,r.bool)(d.toRDF(c).equals(f.toRDF(c)))}})}};return sv.ExpressionFunctionSameTerm=n,sv}var Ade;function Ult(){if(Ade)return av;Ade=1,Object.defineProperty(av,"__esModule",{value:!0}),av.ActorFunctionFactoryExpressionSameTerm=void 0;const t=et(),e=Ye(),r=qlt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SAME_TERM],termFunction:!1})}async run(a){return new r.ExpressionFunctionSameTerm}};return av.ActorFunctionFactoryExpressionSameTerm=n,av}var Tde;function Vlt(){return Tde||(Tde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ult(),t)}(dB)),dB}var fB={},ov={},uv={},wde;function Glt(){if(wde)return uv;wde=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.TermFunctionAbs=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.ABS,overloads:(0,e.declare)(e.SparqlOperator.ABS).numericConverter(()=>i=>Math.abs(i)).collect()})}};return uv.TermFunctionAbs=r,uv}var Sde;function Hlt(){if(Sde)return ov;Sde=1,Object.defineProperty(ov,"__esModule",{value:!0}),ov.ActorFunctionFactoryTermAbs=void 0;const t=et(),e=Ye(),r=Glt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.ABS],termFunction:!0})}async run(a){return new r.TermFunctionAbs}};return ov.ActorFunctionFactoryTermAbs=n,ov}var xde;function klt(){return xde||(xde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hlt(),t)}(fB)),fB}var hB={},cv={},lv={},pB={exports:{}},Ede;function lM(){return Ede||(Ede=1,function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,a=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(S){var P,j,F,N=Ie.prototype={constructor:Ie,toString:null,valueOf:null},R=new Ie(1),C=20,M=4,U=-7,B=21,G=-1e7,K=1e7,$=!1,se=1,pe=0,we={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ce="0123456789abcdefghijklmnopqrstuvwxyz",Le=!0;function Ie(le,me){var Z,q,J,re,_e,he,ue,Ue,De=this;if(!(De instanceof Ie))return new Ie(le,me);if(me==null){if(le&&le._isBigNumber===!0){De.s=le.s,!le.c||le.e>K?De.c=De.e=null:le.e<G?De.c=[De.e=0]:(De.e=le.e,De.c=le.c.slice());return}if((he=typeof le=="number")&&le*0==0){if(De.s=1/le<0?(le=-le,-1):1,le===~~le){for(re=0,_e=le;_e>=10;_e/=10,re++);re>K?De.c=De.e=null:(De.e=re,De.c=[le]);return}Ue=String(le)}else{if(!n.test(Ue=String(le)))return F(De,Ue,he);De.s=Ue.charCodeAt(0)==45?(Ue=Ue.slice(1),-1):1}(re=Ue.indexOf("."))>-1&&(Ue=Ue.replace(".","")),(_e=Ue.search(/e/i))>0?(re<0&&(re=_e),re+=+Ue.slice(_e+1),Ue=Ue.substring(0,_e)):re<0&&(re=Ue.length)}else{if(y(me,2,Ce.length,"Base"),me==10&&Le)return De=new Ie(le),W(De,C+De.e+1,M);if(Ue=String(le),he=typeof le=="number"){if(le*0!=0)return F(De,Ue,he,me);if(De.s=1/le<0?(Ue=Ue.slice(1),-1):1,Ie.DEBUG&&Ue.replace(/^0\.0*|\./,"").length>15)throw Error(o+le)}else De.s=Ue.charCodeAt(0)===45?(Ue=Ue.slice(1),-1):1;for(Z=Ce.slice(0,me),re=_e=0,ue=Ue.length;_e<ue;_e++)if(Z.indexOf(q=Ue.charAt(_e))<0){if(q=="."){if(_e>re){re=ue;continue}}else if(!J&&(Ue==Ue.toUpperCase()&&(Ue=Ue.toLowerCase())||Ue==Ue.toLowerCase()&&(Ue=Ue.toUpperCase()))){J=!0,_e=-1,re=0;continue}return F(De,String(le),he,me)}he=!1,Ue=j(Ue,me,10,De.s),(re=Ue.indexOf("."))>-1?Ue=Ue.replace(".",""):re=Ue.length}for(_e=0;Ue.charCodeAt(_e)===48;_e++);for(ue=Ue.length;Ue.charCodeAt(--ue)===48;);if(Ue=Ue.slice(_e,++ue)){if(ue-=_e,he&&Ie.DEBUG&&ue>15&&(le>l||le!==a(le)))throw Error(o+De.s*le);if((re=re-_e-1)>K)De.c=De.e=null;else if(re<G)De.c=[De.e=0];else{if(De.e=re,De.c=[],_e=(re+1)%u,re<0&&(_e+=u),_e<ue){for(_e&&De.c.push(+Ue.slice(0,_e)),ue-=u;_e<ue;)De.c.push(+Ue.slice(_e,_e+=u));_e=u-(Ue=Ue.slice(_e)).length}else _e-=ue;for(;_e--;Ue+="0");De.c.push(+Ue)}}else De.c=[De.e=0]}Ie.clone=p,Ie.ROUND_UP=0,Ie.ROUND_DOWN=1,Ie.ROUND_CEIL=2,Ie.ROUND_FLOOR=3,Ie.ROUND_HALF_UP=4,Ie.ROUND_HALF_DOWN=5,Ie.ROUND_HALF_EVEN=6,Ie.ROUND_HALF_CEIL=7,Ie.ROUND_HALF_FLOOR=8,Ie.EUCLID=9,Ie.config=Ie.set=function(le){var me,Z;if(le!=null)if(typeof le=="object"){if(le.hasOwnProperty(me="DECIMAL_PLACES")&&(Z=le[me],y(Z,0,h,me),C=Z),le.hasOwnProperty(me="ROUNDING_MODE")&&(Z=le[me],y(Z,0,8,me),M=Z),le.hasOwnProperty(me="EXPONENTIAL_AT")&&(Z=le[me],Z&&Z.pop?(y(Z[0],-h,0,me),y(Z[1],0,h,me),U=Z[0],B=Z[1]):(y(Z,-h,h,me),U=-(B=Z<0?-Z:Z))),le.hasOwnProperty(me="RANGE"))if(Z=le[me],Z&&Z.pop)y(Z[0],-h,-1,me),y(Z[1],1,h,me),G=Z[0],K=Z[1];else if(y(Z,-h,h,me),Z)G=-(K=Z<0?-Z:Z);else throw Error(s+me+" cannot be zero: "+Z);if(le.hasOwnProperty(me="CRYPTO"))if(Z=le[me],Z===!!Z)if(Z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))$=Z;else throw $=!Z,Error(s+"crypto unavailable");else $=Z;else throw Error(s+me+" not true or false: "+Z);if(le.hasOwnProperty(me="MODULO_MODE")&&(Z=le[me],y(Z,0,9,me),se=Z),le.hasOwnProperty(me="POW_PRECISION")&&(Z=le[me],y(Z,0,h,me),pe=Z),le.hasOwnProperty(me="FORMAT"))if(Z=le[me],typeof Z=="object")we=Z;else throw Error(s+me+" not an object: "+Z);if(le.hasOwnProperty(me="ALPHABET"))if(Z=le[me],typeof Z=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Z))Le=Z.slice(0,10)=="0123456789",Ce=Z;else throw Error(s+me+" invalid: "+Z)}else throw Error(s+"Object expected: "+le);return{DECIMAL_PLACES:C,ROUNDING_MODE:M,EXPONENTIAL_AT:[U,B],RANGE:[G,K],CRYPTO:$,MODULO_MODE:se,POW_PRECISION:pe,FORMAT:we,ALPHABET:Ce}},Ie.isBigNumber=function(le){if(!le||le._isBigNumber!==!0)return!1;if(!Ie.DEBUG)return!0;var me,Z,q=le.c,J=le.e,re=le.s;e:if({}.toString.call(q)=="[object Array]"){if((re===1||re===-1)&&J>=-h&&J<=h&&J===a(J)){if(q[0]===0){if(J===0&&q.length===1)return!0;break e}if(me=(J+1)%u,me<1&&(me+=u),String(q[0]).length==me){for(me=0;me<q.length;me++)if(Z=q[me],Z<0||Z>=c||Z!==a(Z))break e;if(Z!==0)return!0}}}else if(q===null&&J===null&&(re===null||re===1||re===-1))return!0;throw Error(s+"Invalid BigNumber: "+le)},Ie.maximum=Ie.max=function(){return ye(arguments,-1)},Ie.minimum=Ie.min=function(){return ye(arguments,1)},Ie.random=function(){var le=9007199254740992,me=Math.random()*le&2097151?function(){return a(Math.random()*le)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Z){var q,J,re,_e,he,ue=0,Ue=[],De=new Ie(R);if(Z==null?Z=C:y(Z,0,h),_e=i(Z/u),$)if(crypto.getRandomValues){for(q=crypto.getRandomValues(new Uint32Array(_e*=2));ue<_e;)he=q[ue]*131072+(q[ue+1]>>>11),he>=9e15?(J=crypto.getRandomValues(new Uint32Array(2)),q[ue]=J[0],q[ue+1]=J[1]):(Ue.push(he%1e14),ue+=2);ue=_e/2}else if(crypto.randomBytes){for(q=crypto.randomBytes(_e*=7);ue<_e;)he=(q[ue]&31)*281474976710656+q[ue+1]*1099511627776+q[ue+2]*4294967296+q[ue+3]*16777216+(q[ue+4]<<16)+(q[ue+5]<<8)+q[ue+6],he>=9e15?crypto.randomBytes(7).copy(q,ue):(Ue.push(he%1e14),ue+=7);ue=_e/7}else throw $=!1,Error(s+"crypto unavailable");if(!$)for(;ue<_e;)he=me(),he<9e15&&(Ue[ue++]=he%1e14);for(_e=Ue[--ue],Z%=u,_e&&Z&&(he=d[u-Z],Ue[ue]=a(_e/he)*he);Ue[ue]===0;Ue.pop(),ue--);if(ue<0)Ue=[re=0];else{for(re=-1;Ue[0]===0;Ue.splice(0,1),re-=u);for(ue=1,he=Ue[0];he>=10;he/=10,ue++);ue<u&&(re-=u-ue)}return De.e=re,De.c=Ue,De}}(),Ie.sum=function(){for(var le=1,me=arguments,Z=new Ie(me[0]);le<me.length;)Z=Z.plus(me[le++]);return Z},j=function(){var le="0123456789";function me(Z,q,J,re){for(var _e,he=[0],ue,Ue=0,De=Z.length;Ue<De;){for(ue=he.length;ue--;he[ue]*=q);for(he[0]+=re.indexOf(Z.charAt(Ue++)),_e=0;_e<he.length;_e++)he[_e]>J-1&&(he[_e+1]==null&&(he[_e+1]=0),he[_e+1]+=he[_e]/J|0,he[_e]%=J)}return he.reverse()}return function(Z,q,J,re,_e){var he,ue,Ue,De,Je,ze,ve,de,Ge=Z.indexOf("."),it=C,ae=M;for(Ge>=0&&(De=pe,pe=0,Z=Z.replace(".",""),de=new Ie(q),ze=de.pow(Z.length-Ge),pe=De,de.c=me(T(g(ze.c),ze.e,"0"),10,J,le),de.e=de.c.length),ve=me(Z,q,J,_e?(he=Ce,le):(he=le,Ce)),Ue=De=ve.length;ve[--De]==0;ve.pop());if(!ve[0])return he.charAt(0);if(Ge<0?--Ue:(ze.c=ve,ze.e=Ue,ze.s=re,ze=P(ze,de,it,ae,J),ve=ze.c,Je=ze.r,Ue=ze.e),ue=Ue+it+1,Ge=ve[ue],De=J/2,Je=Je||ue<0||ve[ue+1]!=null,Je=ae<4?(Ge!=null||Je)&&(ae==0||ae==(ze.s<0?3:2)):Ge>De||Ge==De&&(ae==4||Je||ae==6&&ve[ue-1]&1||ae==(ze.s<0?8:7)),ue<1||!ve[0])Z=Je?T(he.charAt(1),-it,he.charAt(0)):he.charAt(0);else{if(ve.length=ue,Je)for(--J;++ve[--ue]>J;)ve[ue]=0,ue||(++Ue,ve=[1].concat(ve));for(De=ve.length;!ve[--De];);for(Ge=0,Z="";Ge<=De;Z+=he.charAt(ve[Ge++]));Z=T(Z,Ue,he.charAt(0))}return Z}}(),P=function(){function le(q,J,re){var _e,he,ue,Ue,De=0,Je=q.length,ze=J%f,ve=J/f|0;for(q=q.slice();Je--;)ue=q[Je]%f,Ue=q[Je]/f|0,_e=ve*ue+Ue*ze,he=ze*ue+_e%f*f+De,De=(he/re|0)+(_e/f|0)+ve*Ue,q[Je]=he%re;return De&&(q=[De].concat(q)),q}function me(q,J,re,_e){var he,ue;if(re!=_e)ue=re>_e?1:-1;else for(he=ue=0;he<re;he++)if(q[he]!=J[he]){ue=q[he]>J[he]?1:-1;break}return ue}function Z(q,J,re,_e){for(var he=0;re--;)q[re]-=he,he=q[re]<J[re]?1:0,q[re]=he*_e+q[re]-J[re];for(;!q[0]&&q.length>1;q.splice(0,1));}return function(q,J,re,_e,he){var ue,Ue,De,Je,ze,ve,de,Ge,it,ae,z,V,x,O,D,H,Y,Q=q.s==J.s?1:-1,ee=q.c,ie=J.c;if(!ee||!ee[0]||!ie||!ie[0])return new Ie(!q.s||!J.s||(ee?ie&&ee[0]==ie[0]:!ie)?NaN:ee&&ee[0]==0||!ie?Q*0:Q/0);for(Ge=new Ie(Q),it=Ge.c=[],Ue=q.e-J.e,Q=re+Ue+1,he||(he=c,Ue=_(q.e/u)-_(J.e/u),Q=Q/u|0),De=0;ie[De]==(ee[De]||0);De++);if(ie[De]>(ee[De]||0)&&Ue--,Q<0)it.push(1),Je=!0;else{for(O=ee.length,H=ie.length,De=0,Q+=2,ze=a(he/(ie[0]+1)),ze>1&&(ie=le(ie,ze,he),ee=le(ee,ze,he),H=ie.length,O=ee.length),x=H,ae=ee.slice(0,H),z=ae.length;z<H;ae[z++]=0);Y=ie.slice(),Y=[0].concat(Y),D=ie[0],ie[1]>=he/2&&D++;do{if(ze=0,ue=me(ie,ae,H,z),ue<0){if(V=ae[0],H!=z&&(V=V*he+(ae[1]||0)),ze=a(V/D),ze>1)for(ze>=he&&(ze=he-1),ve=le(ie,ze,he),de=ve.length,z=ae.length;me(ve,ae,de,z)==1;)ze--,Z(ve,H<de?Y:ie,de,he),de=ve.length,ue=1;else ze==0&&(ue=ze=1),ve=ie.slice(),de=ve.length;if(de<z&&(ve=[0].concat(ve)),Z(ae,ve,z,he),z=ae.length,ue==-1)for(;me(ie,ae,H,z)<1;)ze++,Z(ae,H<z?Y:ie,z,he),z=ae.length}else ue===0&&(ze++,ae=[0]);it[De++]=ze,ae[0]?ae[z++]=ee[x]||0:(ae=[ee[x]],z=1)}while((x++<O||ae[0]!=null)&&Q--);Je=ae[0]!=null,it[0]||it.splice(0,1)}if(he==c){for(De=1,Q=it[0];Q>=10;Q/=10,De++);W(Ge,re+(Ge.e=De+Ue*u-1)+1,_e,Je)}else Ge.e=Ue,Ge.r=+Je;return Ge}}();function Oe(le,me,Z,q){var J,re,_e,he,ue;if(Z==null?Z=M:y(Z,0,8),!le.c)return le.toString();if(J=le.c[0],_e=le.e,me==null)ue=g(le.c),ue=q==1||q==2&&(_e<=U||_e>=B)?A(ue,_e):T(ue,_e,"0");else if(le=W(new Ie(le),me,Z),re=le.e,ue=g(le.c),he=ue.length,q==1||q==2&&(me<=re||re<=U)){for(;he<me;ue+="0",he++);ue=A(ue,re)}else if(me-=_e+(q===2&&re>_e),ue=T(ue,re,"0"),re+1>he){if(--me>0)for(ue+=".";me--;ue+="0");}else if(me+=re-he,me>0)for(re+1==he&&(ue+=".");me--;ue+="0");return le.s<0&&J?"-"+ue:ue}function ye(le,me){for(var Z,q,J=1,re=new Ie(le[0]);J<le.length;J++)q=new Ie(le[J]),(!q.s||(Z=m(re,q))===me||Z===0&&re.s===me)&&(re=q);return re}function Me(le,me,Z){for(var q=1,J=me.length;!me[--J];me.pop());for(J=me[0];J>=10;J/=10,q++);return(Z=q+Z*u-1)>K?le.c=le.e=null:Z<G?le.c=[le.e=0]:(le.e=Z,le.c=me),le}F=function(){var le=/^(-?)0([xbo])(?=\w[\w.]*$)/i,me=/^([^.]+)\.$/,Z=/^\.([^.]+)$/,q=/^-?(Infinity|NaN)$/,J=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(re,_e,he,ue){var Ue,De=he?_e:_e.replace(J,"");if(q.test(De))re.s=isNaN(De)?null:De<0?-1:1;else{if(!he&&(De=De.replace(le,function(Je,ze,ve){return Ue=(ve=ve.toLowerCase())=="x"?16:ve=="b"?2:8,!ue||ue==Ue?ze:Je}),ue&&(Ue=ue,De=De.replace(me,"$1").replace(Z,"0.$1")),_e!=De))return new Ie(De,Ue);if(Ie.DEBUG)throw Error(s+"Not a"+(ue?" base "+ue:"")+" number: "+_e);re.s=null}re.c=re.e=null}}();function W(le,me,Z,q){var J,re,_e,he,ue,Ue,De,Je=le.c,ze=d;if(Je){e:{for(J=1,he=Je[0];he>=10;he/=10,J++);if(re=me-J,re<0)re+=u,_e=me,ue=Je[Ue=0],De=a(ue/ze[J-_e-1]%10);else if(Ue=i((re+1)/u),Ue>=Je.length)if(q){for(;Je.length<=Ue;Je.push(0));ue=De=0,J=1,re%=u,_e=re-u+1}else break e;else{for(ue=he=Je[Ue],J=1;he>=10;he/=10,J++);re%=u,_e=re-u+J,De=_e<0?0:a(ue/ze[J-_e-1]%10)}if(q=q||me<0||Je[Ue+1]!=null||(_e<0?ue:ue%ze[J-_e-1]),q=Z<4?(De||q)&&(Z==0||Z==(le.s<0?3:2)):De>5||De==5&&(Z==4||q||Z==6&&(re>0?_e>0?ue/ze[J-_e]:0:Je[Ue-1])%10&1||Z==(le.s<0?8:7)),me<1||!Je[0])return Je.length=0,q?(me-=le.e+1,Je[0]=ze[(u-me%u)%u],le.e=-me||0):Je[0]=le.e=0,le;if(re==0?(Je.length=Ue,he=1,Ue--):(Je.length=Ue+1,he=ze[u-re],Je[Ue]=_e>0?a(ue/ze[J-_e]%ze[_e])*he:0),q)for(;;)if(Ue==0){for(re=1,_e=Je[0];_e>=10;_e/=10,re++);for(_e=Je[0]+=he,he=1;_e>=10;_e/=10,he++);re!=he&&(le.e++,Je[0]==c&&(Je[0]=1));break}else{if(Je[Ue]+=he,Je[Ue]!=c)break;Je[Ue--]=0,he=1}for(re=Je.length;Je[--re]===0;Je.pop());}le.e>K?le.c=le.e=null:le.e<G&&(le.c=[le.e=0])}return le}function ft(le){var me,Z=le.e;return Z===null?le.toString():(me=g(le.c),me=Z<=U||Z>=B?A(me,Z):T(me,Z,"0"),le.s<0?"-"+me:me)}return N.absoluteValue=N.abs=function(){var le=new Ie(this);return le.s<0&&(le.s=1),le},N.comparedTo=function(le,me){return m(this,new Ie(le,me))},N.decimalPlaces=N.dp=function(le,me){var Z,q,J,re=this;if(le!=null)return y(le,0,h),me==null?me=M:y(me,0,8),W(new Ie(re),le+re.e+1,me);if(!(Z=re.c))return null;if(q=((J=Z.length-1)-_(this.e/u))*u,J=Z[J])for(;J%10==0;J/=10,q--);return q<0&&(q=0),q},N.dividedBy=N.div=function(le,me){return P(this,new Ie(le,me),C,M)},N.dividedToIntegerBy=N.idiv=function(le,me){return P(this,new Ie(le,me),0,1)},N.exponentiatedBy=N.pow=function(le,me){var Z,q,J,re,_e,he,ue,Ue,De,Je=this;if(le=new Ie(le),le.c&&!le.isInteger())throw Error(s+"Exponent not an integer: "+ft(le));if(me!=null&&(me=new Ie(me)),he=le.e>14,!Je.c||!Je.c[0]||Je.c[0]==1&&!Je.e&&Je.c.length==1||!le.c||!le.c[0])return De=new Ie(Math.pow(+ft(Je),he?le.s*(2-v(le)):+ft(le))),me?De.mod(me):De;if(ue=le.s<0,me){if(me.c?!me.c[0]:!me.s)return new Ie(NaN);q=!ue&&Je.isInteger()&&me.isInteger(),q&&(Je=Je.mod(me))}else{if(le.e>9&&(Je.e>0||Je.e<-1||(Je.e==0?Je.c[0]>1||he&&Je.c[1]>=24e7:Je.c[0]<8e13||he&&Je.c[0]<=9999975e7)))return re=Je.s<0&&v(le)?-0:0,Je.e>-1&&(re=1/re),new Ie(ue?1/re:re);pe&&(re=i(pe/u+2))}for(he?(Z=new Ie(.5),ue&&(le.s=1),Ue=v(le)):(J=Math.abs(+ft(le)),Ue=J%2),De=new Ie(R);;){if(Ue){if(De=De.times(Je),!De.c)break;re?De.c.length>re&&(De.c.length=re):q&&(De=De.mod(me))}if(J){if(J=a(J/2),J===0)break;Ue=J%2}else if(le=le.times(Z),W(le,le.e+1,1),le.e>14)Ue=v(le);else{if(J=+ft(le),J===0)break;Ue=J%2}Je=Je.times(Je),re?Je.c&&Je.c.length>re&&(Je.c.length=re):q&&(Je=Je.mod(me))}return q?De:(ue&&(De=R.div(De)),me?De.mod(me):re?W(De,pe,M,_e):De)},N.integerValue=function(le){var me=new Ie(this);return le==null?le=M:y(le,0,8),W(me,me.e+1,le)},N.isEqualTo=N.eq=function(le,me){return m(this,new Ie(le,me))===0},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(le,me){return m(this,new Ie(le,me))>0},N.isGreaterThanOrEqualTo=N.gte=function(le,me){return(me=m(this,new Ie(le,me)))===1||me===0},N.isInteger=function(){return!!this.c&&_(this.e/u)>this.c.length-2},N.isLessThan=N.lt=function(le,me){return m(this,new Ie(le,me))<0},N.isLessThanOrEqualTo=N.lte=function(le,me){return(me=m(this,new Ie(le,me)))===-1||me===0},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&this.c[0]==0},N.minus=function(le,me){var Z,q,J,re,_e=this,he=_e.s;if(le=new Ie(le,me),me=le.s,!he||!me)return new Ie(NaN);if(he!=me)return le.s=-me,_e.plus(le);var ue=_e.e/u,Ue=le.e/u,De=_e.c,Je=le.c;if(!ue||!Ue){if(!De||!Je)return De?(le.s=-me,le):new Ie(Je?_e:NaN);if(!De[0]||!Je[0])return Je[0]?(le.s=-me,le):new Ie(De[0]?_e:M==3?-0:0)}if(ue=_(ue),Ue=_(Ue),De=De.slice(),he=ue-Ue){for((re=he<0)?(he=-he,J=De):(Ue=ue,J=Je),J.reverse(),me=he;me--;J.push(0));J.reverse()}else for(q=(re=(he=De.length)<(me=Je.length))?he:me,he=me=0;me<q;me++)if(De[me]!=Je[me]){re=De[me]<Je[me];break}if(re&&(J=De,De=Je,Je=J,le.s=-le.s),me=(q=Je.length)-(Z=De.length),me>0)for(;me--;De[Z++]=0);for(me=c-1;q>he;){if(De[--q]<Je[q]){for(Z=q;Z&&!De[--Z];De[Z]=me);--De[Z],De[q]+=c}De[q]-=Je[q]}for(;De[0]==0;De.splice(0,1),--Ue);return De[0]?Me(le,De,Ue):(le.s=M==3?-1:1,le.c=[le.e=0],le)},N.modulo=N.mod=function(le,me){var Z,q,J=this;return le=new Ie(le,me),!J.c||!le.s||le.c&&!le.c[0]?new Ie(NaN):!le.c||J.c&&!J.c[0]?new Ie(J):(se==9?(q=le.s,le.s=1,Z=P(J,le,0,3),le.s=q,Z.s*=q):Z=P(J,le,0,se),le=J.minus(Z.times(le)),!le.c[0]&&se==1&&(le.s=J.s),le)},N.multipliedBy=N.times=function(le,me){var Z,q,J,re,_e,he,ue,Ue,De,Je,ze,ve,de,Ge,it,ae=this,z=ae.c,V=(le=new Ie(le,me)).c;if(!z||!V||!z[0]||!V[0])return!ae.s||!le.s||z&&!z[0]&&!V||V&&!V[0]&&!z?le.c=le.e=le.s=null:(le.s*=ae.s,!z||!V?le.c=le.e=null:(le.c=[0],le.e=0)),le;for(q=_(ae.e/u)+_(le.e/u),le.s*=ae.s,ue=z.length,Je=V.length,ue<Je&&(de=z,z=V,V=de,J=ue,ue=Je,Je=J),J=ue+Je,de=[];J--;de.push(0));for(Ge=c,it=f,J=Je;--J>=0;){for(Z=0,ze=V[J]%it,ve=V[J]/it|0,_e=ue,re=J+_e;re>J;)Ue=z[--_e]%it,De=z[_e]/it|0,he=ve*Ue+De*ze,Ue=ze*Ue+he%it*it+de[re]+Z,Z=(Ue/Ge|0)+(he/it|0)+ve*De,de[re--]=Ue%Ge;de[re]=Z}return Z?++q:de.splice(0,1),Me(le,de,q)},N.negated=function(){var le=new Ie(this);return le.s=-le.s||null,le},N.plus=function(le,me){var Z,q=this,J=q.s;if(le=new Ie(le,me),me=le.s,!J||!me)return new Ie(NaN);if(J!=me)return le.s=-me,q.minus(le);var re=q.e/u,_e=le.e/u,he=q.c,ue=le.c;if(!re||!_e){if(!he||!ue)return new Ie(J/0);if(!he[0]||!ue[0])return ue[0]?le:new Ie(he[0]?q:J*0)}if(re=_(re),_e=_(_e),he=he.slice(),J=re-_e){for(J>0?(_e=re,Z=ue):(J=-J,Z=he),Z.reverse();J--;Z.push(0));Z.reverse()}for(J=he.length,me=ue.length,J-me<0&&(Z=ue,ue=he,he=Z,me=J),J=0;me;)J=(he[--me]=he[me]+ue[me]+J)/c|0,he[me]=c===he[me]?0:he[me]%c;return J&&(he=[J].concat(he),++_e),Me(le,he,_e)},N.precision=N.sd=function(le,me){var Z,q,J,re=this;if(le!=null&&le!==!!le)return y(le,1,h),me==null?me=M:y(me,0,8),W(new Ie(re),le,me);if(!(Z=re.c))return null;if(J=Z.length-1,q=J*u+1,J=Z[J]){for(;J%10==0;J/=10,q--);for(J=Z[0];J>=10;J/=10,q++);}return le&&re.e+1>q&&(q=re.e+1),q},N.shiftedBy=function(le){return y(le,-l,l),this.times("1e"+le)},N.squareRoot=N.sqrt=function(){var le,me,Z,q,J,re=this,_e=re.c,he=re.s,ue=re.e,Ue=C+4,De=new Ie("0.5");if(he!==1||!_e||!_e[0])return new Ie(!he||he<0&&(!_e||_e[0])?NaN:_e?re:1/0);if(he=Math.sqrt(+ft(re)),he==0||he==1/0?(me=g(_e),(me.length+ue)%2==0&&(me+="0"),he=Math.sqrt(+me),ue=_((ue+1)/2)-(ue<0||ue%2),he==1/0?me="5e"+ue:(me=he.toExponential(),me=me.slice(0,me.indexOf("e")+1)+ue),Z=new Ie(me)):Z=new Ie(he+""),Z.c[0]){for(ue=Z.e,he=ue+Ue,he<3&&(he=0);;)if(J=Z,Z=De.times(J.plus(P(re,J,Ue,1))),g(J.c).slice(0,he)===(me=g(Z.c)).slice(0,he))if(Z.e<ue&&--he,me=me.slice(he-3,he+1),me=="9999"||!q&&me=="4999"){if(!q&&(W(J,J.e+C+2,0),J.times(J).eq(re))){Z=J;break}Ue+=4,he+=4,q=1}else{(!+me||!+me.slice(1)&&me.charAt(0)=="5")&&(W(Z,Z.e+C+2,1),le=!Z.times(Z).eq(re));break}}return W(Z,Z.e+C+1,M,le)},N.toExponential=function(le,me){return le!=null&&(y(le,0,h),le++),Oe(this,le,me,1)},N.toFixed=function(le,me){return le!=null&&(y(le,0,h),le=le+this.e+1),Oe(this,le,me)},N.toFormat=function(le,me,Z){var q,J=this;if(Z==null)le!=null&&me&&typeof me=="object"?(Z=me,me=null):le&&typeof le=="object"?(Z=le,le=me=null):Z=we;else if(typeof Z!="object")throw Error(s+"Argument not an object: "+Z);if(q=J.toFixed(le,me),J.c){var re,_e=q.split("."),he=+Z.groupSize,ue=+Z.secondaryGroupSize,Ue=Z.groupSeparator||"",De=_e[0],Je=_e[1],ze=J.s<0,ve=ze?De.slice(1):De,de=ve.length;if(ue&&(re=he,he=ue,ue=re,de-=re),he>0&&de>0){for(re=de%he||he,De=ve.substr(0,re);re<de;re+=he)De+=Ue+ve.substr(re,he);ue>0&&(De+=Ue+ve.slice(re)),ze&&(De="-"+De)}q=Je?De+(Z.decimalSeparator||"")+((ue=+Z.fractionGroupSize)?Je.replace(new RegExp("\\d{"+ue+"}\\B","g"),"$&"+(Z.fractionGroupSeparator||"")):Je):De}return(Z.prefix||"")+q+(Z.suffix||"")},N.toFraction=function(le){var me,Z,q,J,re,_e,he,ue,Ue,De,Je,ze,ve=this,de=ve.c;if(le!=null&&(he=new Ie(le),!he.isInteger()&&(he.c||he.s!==1)||he.lt(R)))throw Error(s+"Argument "+(he.isInteger()?"out of range: ":"not an integer: ")+ft(he));if(!de)return new Ie(ve);for(me=new Ie(R),Ue=Z=new Ie(R),q=ue=new Ie(R),ze=g(de),re=me.e=ze.length-ve.e-1,me.c[0]=d[(_e=re%u)<0?u+_e:_e],le=!le||he.comparedTo(me)>0?re>0?me:Ue:he,_e=K,K=1/0,he=new Ie(ze),ue.c[0]=0;De=P(he,me,0,1),J=Z.plus(De.times(q)),J.comparedTo(le)!=1;)Z=q,q=J,Ue=ue.plus(De.times(J=Ue)),ue=J,me=he.minus(De.times(J=me)),he=J;return J=P(le.minus(Z),q,0,1),ue=ue.plus(J.times(Ue)),Z=Z.plus(J.times(q)),ue.s=Ue.s=ve.s,re=re*2,Je=P(Ue,q,re,M).minus(ve).abs().comparedTo(P(ue,Z,re,M).minus(ve).abs())<1?[Ue,q]:[ue,Z],K=_e,Je},N.toNumber=function(){return+ft(this)},N.toPrecision=function(le,me){return le!=null&&y(le,1,h),Oe(this,le,me,2)},N.toString=function(le){var me,Z=this,q=Z.s,J=Z.e;return J===null?q?(me="Infinity",q<0&&(me="-"+me)):me="NaN":(le==null?me=J<=U||J>=B?A(g(Z.c),J):T(g(Z.c),J,"0"):le===10&&Le?(Z=W(new Ie(Z),C+J+1,M),me=T(g(Z.c),Z.e,"0")):(y(le,2,Ce.length,"Base"),me=j(T(g(Z.c),J,"0"),10,le,q,!0)),q<0&&Z.c[0]&&(me="-"+me)),me},N.valueOf=N.toJSON=function(){return ft(this)},N._isBigNumber=!0,S!=null&&Ie.set(S),Ie}function _(S){var P=S|0;return S>0||S===P?P:P-1}function g(S){for(var P,j,F=1,N=S.length,R=S[0]+"";F<N;){for(P=S[F++]+"",j=u-P.length;j--;P="0"+P);R+=P}for(N=R.length;R.charCodeAt(--N)===48;);return R.slice(0,N+1||1)}function m(S,P){var j,F,N=S.c,R=P.c,C=S.s,M=P.s,U=S.e,B=P.e;if(!C||!M)return null;if(j=N&&!N[0],F=R&&!R[0],j||F)return j?F?0:-M:C;if(C!=M)return C;if(j=C<0,F=U==B,!N||!R)return F?0:!N^j?1:-1;if(!F)return U>B^j?1:-1;for(M=(U=N.length)<(B=R.length)?U:B,C=0;C<M;C++)if(N[C]!=R[C])return N[C]>R[C]^j?1:-1;return U==B?0:U>B^j?1:-1}function y(S,P,j,F){if(S<P||S>j||S!==a(S))throw Error(s+(F||"Argument")+(typeof S=="number"?S<P||S>j?" out of range: ":" not an integer: ":" not a primitive number: ")+String(S))}function v(S){var P=S.c.length-1;return _(S.e/u)==P&&S.c[P]%2!=0}function A(S,P){return(S.length>1?S.charAt(0)+"."+S.slice(1):S)+(P<0?"e":"e+")+P}function T(S,P,j){var F,N;if(P<0){for(N=j+".";++P;N+=j);S=N+S}else if(F=S.length,++P>F){for(N=j,P-=F;--P;N+=j);S+=N}else P<F&&(S=S.slice(0,P)+"."+S.slice(P));return S}r=p(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(E)}(pB)),pB.exports}var Ide;function zlt(){if(Ide)return lv;Ide=1,Object.defineProperty(lv,"__esModule",{value:!0}),lv.TermFunctionAddition=void 0;const t=et(),e=Ye(),r=lM();let n=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.ADDITION,overloads:(0,e.declare)(e.SparqlOperator.ADDITION).arithmetic(()=>(a,s)=>new r.BigNumber(a).plus(s).toNumber()).set([e.TypeURL.XSD_DATE_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,s])=>new e.DateTimeLiteral((0,e.addDurationToDateTime)(a.typedValue,(0,e.defaultedDurationRepresentation)(s.typedValue)))).copy({from:[e.TypeURL.XSD_DATE_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],to:[e.TypeURL.XSD_DATE_TIME,e.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([e.TypeURL.XSD_DATE,e.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,s])=>new e.DateLiteral((0,e.addDurationToDateTime)((0,e.defaultedDateTimeRepresentation)(a.typedValue),(0,e.defaultedDurationRepresentation)(s.typedValue)))).copy({from:[e.TypeURL.XSD_DATE,e.TypeURL.XSD_DAY_TIME_DURATION],to:[e.TypeURL.XSD_DATE,e.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([e.TypeURL.XSD_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,s])=>new e.TimeLiteral((0,e.addDurationToDateTime)((0,e.defaultedDateTimeRepresentation)(a.typedValue),(0,e.defaultedDurationRepresentation)(s.typedValue)))).copy({from:[e.TypeURL.XSD_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],to:[e.TypeURL.XSD_TIME,e.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return lv.TermFunctionAddition=n,lv}var Ode;function Qlt(){if(Ode)return cv;Ode=1,Object.defineProperty(cv,"__esModule",{value:!0}),cv.ActorFunctionFactoryTermAddition=void 0;const t=et(),e=Ye(),r=zlt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.ADDITION],termFunction:!0})}async run(a){return new r.TermFunctionAddition}};return cv.ActorFunctionFactoryTermAddition=n,cv}var Rde;function Wlt(){return Rde||(Rde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qlt(),t)}(hB)),hB}var _B={},dv={},fv={},Pde;function Klt(){if(Pde)return fv;Pde=1,Object.defineProperty(fv,"__esModule",{value:!0}),fv.TermFunctionContains=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.CONTAINS,overloads:(0,e.declare)(e.SparqlOperator.CONTAINS).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],()=>(i,a)=>(0,e.bool)(i.includes(a))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(i,a)=>{if(i.language!==a.language)throw new e.IncompatibleLanguageOperation(i,a);return(0,e.bool)(i.typedValue.includes(a.typedValue))}).collect()})}};return fv.TermFunctionContains=r,fv}var Nde;function Xlt(){if(Nde)return dv;Nde=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.ActorFunctionFactoryTermContains=void 0;const t=et(),e=Ye(),r=Klt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.CONTAINS],termFunction:!0})}async run(a){return new r.TermFunctionContains}};return dv.ActorFunctionFactoryTermContains=n,dv}var Fde;function Jlt(){return Fde||(Fde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xlt(),t)}(_B)),_B}var mB={},hv={},pv={},Mde;function Ylt(){if(Mde)return pv;Mde=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.TermFunctionDatatype=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.DATATYPE,overloads:(0,e.declare)(e.SparqlOperator.DATATYPE).onLiteral1(()=>i=>new e.NamedNode(i.dataType)).collect()})}};return pv.TermFunctionDatatype=r,pv}var Dde;function $lt(){if(Dde)return hv;Dde=1,Object.defineProperty(hv,"__esModule",{value:!0}),hv.ActorFunctionFactoryTermDatatype=void 0;const t=et(),e=Ye(),r=Ylt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.DATATYPE],termFunction:!0})}async run(a){return new r.TermFunctionDatatype}};return hv.ActorFunctionFactoryTermDatatype=n,hv}var Cde;function Zlt(){return Cde||(Cde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r($lt(),t)}(mB)),mB}var gB={},_v={},mv={},Lde;function edt(){if(Lde)return mv;Lde=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.TermFunctionDay=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.DAY,overloads:(0,e.declare)(e.SparqlOperator.DAY).onDateTime1(()=>i=>(0,e.integer)(i.typedValue.day)).set([e.TypeURL.XSD_DATE],()=>([i])=>(0,e.integer)(i.typedValue.day)).collect()})}};return mv.TermFunctionDay=r,mv}var jde;function tdt(){if(jde)return _v;jde=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.ActorFunctionFactoryTermDay=void 0;const t=et(),e=Ye(),r=edt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.DAY],termFunction:!0})}async run(a){return new r.TermFunctionDay}};return _v.ActorFunctionFactoryTermDay=n,_v}var Bde;function rdt(){return Bde||(Bde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(tdt(),t)}(gB)),gB}var yB={},gv={},yv={},qde;function ndt(){if(qde)return yv;qde=1,Object.defineProperty(yv,"__esModule",{value:!0}),yv.TermFunctionDivision=void 0;const t=et(),e=Ye(),r=lM();let n=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.DIVISION,overloads:(0,e.declare)(e.SparqlOperator.DIVISION).arithmetic(()=>(a,s)=>new r.BigNumber(a).div(s).toNumber()).onBinaryTyped([e.TypeURL.XSD_INTEGER,e.TypeURL.XSD_INTEGER],()=>(a,s)=>{if(s===0)throw new e.ExpressionError("Integer division by 0");return(0,e.decimal)(new r.BigNumber(a).div(s).toNumber())}).collect()})}};return yv.TermFunctionDivision=n,yv}var Ude;function idt(){if(Ude)return gv;Ude=1,Object.defineProperty(gv,"__esModule",{value:!0}),gv.ActorFunctionFactoryTermDivision=void 0;const t=et(),e=Ye(),r=ndt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.DIVISION],termFunction:!0})}async run(a){return new r.TermFunctionDivision}};return gv.ActorFunctionFactoryTermDivision=n,gv}var Vde;function adt(){return Vde||(Vde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(idt(),t)}(yB)),yB}var bB={},bv={},vv={},Gde;function sdt(){if(Gde)return vv;Gde=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.TermFunctionEncodeForUri=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.ENCODE_FOR_URI,overloads:(0,e.declare)(e.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>i=>(0,e.string)(encodeURI(i))).collect()})}};return vv.TermFunctionEncodeForUri=r,vv}var Hde;function odt(){if(Hde)return bv;Hde=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.ActorFunctionFactoryTermEncodeForUri=void 0;const t=et(),e=Ye(),r=sdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(a){return new r.TermFunctionEncodeForUri}};return bv.ActorFunctionFactoryTermEncodeForUri=n,bv}var kde;function udt(){return kde||(kde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(odt(),t)}(bB)),bB}var vB={},Av={},Tv={},zde;function cdt(){if(zde)return Tv;zde=1,Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.TermFunctionEquality=void 0;const t=et(),e=dt,r=Ye();let n=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.EQUAL,overloads:(0,r.declare)(r.SparqlOperator.EQUAL).numberTest(()=>(a,s)=>a===s).stringTest(()=>(a,s)=>a.localeCompare(s)===0).set([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>([a,s])=>(0,r.bool)(a.str()===s.str()&&a.language===s.language)).set([r.TypeAlias.SPARQL_STRINGLY,r.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,r.bool)(!1)).booleanTest(()=>(a,s)=>a===s).dateTimeTest(a=>(s,o)=>(0,r.toUTCDate)(s,a.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,r.toUTCDate)(o,a.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DATE]}).set(["quad","quad"],a=>([s,o])=>(0,r.bool)(this.applyOnTerms([s.subject,o.subject],a).coerceEBV()&&this.applyOnTerms([s.predicate,o.predicate],a).coerceEBV()&&this.applyOnTerms([s.object,o.object],a).coerceEBV()&&this.applyOnTerms([s.graph,o.graph],a).coerceEBV()),!1).set(["term","term"],a=>([s,o])=>{const c=s.toRDF(a.context.getSafe(e.KeysInitQuery.dataFactory)),u=o.toRDF(a.context.getSafe(e.KeysInitQuery.dataFactory)),l=c.equals(u);if(!l&&c.termType==="Literal"&&u.termType==="Literal")throw new r.RDFEqualTypeError([s,o]);return(0,r.bool)(l)},!1).set([r.TypeURL.XSD_DURATION,r.TypeURL.XSD_DURATION],()=>([a,s])=>(0,r.bool)((0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(a.typedValue))===(0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(s.typedValue))&&(0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(a.typedValue))===(0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(s.typedValue)))).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_TIME],a=>([s,o])=>(0,r.bool)((0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(s.typedValue),a.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(o.typedValue),a.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return Tv.TermFunctionEquality=n,Tv}var Qde;function ldt(){if(Qde)return Av;Qde=1,Object.defineProperty(Av,"__esModule",{value:!0}),Av.ActorFunctionFactoryTermEquality=void 0;const t=et(),e=Ye(),r=cdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.EQUAL],termFunction:!0})}async run(a){return new r.TermFunctionEquality}};return Av.ActorFunctionFactoryTermEquality=n,Av}var Wde;function ddt(){return Wde||(Wde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ldt(),t)}(vB)),vB}var AB={},wv={},Sv={},Kde;function fdt(){if(Kde)return Sv;Kde=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.TermFunctionCeil=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.CEIL,overloads:(0,e.declare)(e.SparqlOperator.CEIL).numericConverter(()=>i=>Math.ceil(i)).collect()})}};return Sv.TermFunctionCeil=r,Sv}var Xde;function hdt(){if(Xde)return wv;Xde=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.ActorFunctionFactoryTermCeil=void 0;const t=et(),e=Ye(),r=fdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.CEIL],termFunction:!0})}async run(a){return new r.TermFunctionCeil}};return wv.ActorFunctionFactoryTermCeil=n,wv}var Jde;function pdt(){return Jde||(Jde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(hdt(),t)}(AB)),AB}var TB={},xv={},Ev={},Yde;function _dt(){if(Yde)return Ev;Yde=1,Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.TermFunctionHasLang=void 0;const t=et(),e=Ye(),r=Qu();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.HAS_LANG,overloads:(0,e.declare)(e.SparqlOperator.HAS_LANG).onTerm1(()=>a=>(0,e.bool)(a instanceof e.LangStringLiteral||a instanceof r.DirLangStringLiteral)).collect()})}};return Ev.TermFunctionHasLang=n,Ev}var $de;function mdt(){if($de)return xv;$de=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.ActorFunctionFactoryTermHasLang=void 0;const t=et(),e=Ye(),r=_dt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.HAS_LANG],termFunction:!0})}async run(a){return new r.TermFunctionHasLang}};return xv.ActorFunctionFactoryTermHasLang=n,xv}var Zde;function gdt(){return Zde||(Zde=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mdt(),t)}(TB)),TB}var wB={},Iv={},Ov={},efe;function ydt(){if(efe)return Ov;efe=1,Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.TermFunctionHasLangdir=void 0;const t=et(),e=Ye(),r=Qu();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.HAS_LANGDIR,overloads:(0,e.declare)(e.SparqlOperator.HAS_LANGDIR).onTerm1(()=>a=>(0,e.bool)(a instanceof r.DirLangStringLiteral)).collect()})}};return Ov.TermFunctionHasLangdir=n,Ov}var tfe;function bdt(){if(tfe)return Iv;tfe=1,Object.defineProperty(Iv,"__esModule",{value:!0}),Iv.ActorFunctionFactoryTermHasLangdir=void 0;const t=et(),e=Ye(),r=ydt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.HAS_LANGDIR],termFunction:!0})}async run(a){return new r.TermFunctionHasLangdir}};return Iv.ActorFunctionFactoryTermHasLangdir=n,Iv}var rfe;function vdt(){return rfe||(rfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(bdt(),t)}(wB)),wB}var SB={},Rv={},Pv={},nfe;function Adt(){if(nfe)return Pv;nfe=1,Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.TermFunctionHours=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.HOURS,overloads:(0,e.declare)(e.SparqlOperator.HOURS).onDateTime1(()=>i=>(0,e.integer)(i.typedValue.hours)).set([e.TypeURL.XSD_TIME],()=>([i])=>(0,e.integer)(i.typedValue.hours)).collect()})}};return Pv.TermFunctionHours=r,Pv}var ife;function Tdt(){if(ife)return Rv;ife=1,Object.defineProperty(Rv,"__esModule",{value:!0}),Rv.ActorFunctionFactoryTermHours=void 0;const t=et(),e=Ye(),r=Adt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.HOURS],termFunction:!0})}async run(a){return new r.TermFunctionHours}};return Rv.ActorFunctionFactoryTermHours=n,Rv}var afe;function wdt(){return afe||(afe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tdt(),t)}(SB)),SB}var xB={},Nv={},Fv={},sfe;function Sdt(){if(sfe)return Fv;sfe=1,Object.defineProperty(Fv,"__esModule",{value:!0}),Fv.TermFunctionIri=void 0;const t=et(),e=dt,r=Ye(),n=Bn();let i=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IRI,overloads:(0,r.declare)(r.SparqlOperator.IRI).set(["namedNode"],s=>o=>{const c=o[0],u=(0,n.resolve)(c.str(),s.context.get(e.KeysInitQuery.baseIRI)??"");return new r.NamedNode(u)}).onString1(s=>o=>{const c=(0,n.resolve)(o.str(),s.context.get(e.KeysInitQuery.baseIRI)??"");return new r.NamedNode(c)}).collect()})}};return Fv.TermFunctionIri=i,Fv}var ofe;function xdt(){if(ofe)return Nv;ofe=1,Object.defineProperty(Nv,"__esModule",{value:!0}),Nv.ActorFunctionFactoryTermIri=void 0;const t=et(),e=Ye(),r=Sdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.IRI,e.SparqlOperator.URI],termFunction:!0})}async run(a){return new r.TermFunctionIri}};return Nv.ActorFunctionFactoryTermIri=n,Nv}var ufe;function Edt(){return ufe||(ufe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(xdt(),t)}(xB)),xB}var EB={},Mv={},Dv={},cfe;function Idt(){if(cfe)return Dv;cfe=1,Object.defineProperty(Dv,"__esModule",{value:!0}),Dv.TermFunctionIsBlank=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_BLANK,overloads:(0,e.declare)(e.SparqlOperator.IS_BLANK).onTerm1(()=>i=>(0,e.bool)(i.termType==="blankNode")).collect()})}};return Dv.TermFunctionIsBlank=r,Dv}var lfe;function Odt(){if(lfe)return Mv;lfe=1,Object.defineProperty(Mv,"__esModule",{value:!0}),Mv.ActorFunctionFactoryTermIsBlank=void 0;const t=et(),e=Ye(),r=Idt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.IS_BLANK],termFunction:!0})}async run(a){return new r.TermFunctionIsBlank}};return Mv.ActorFunctionFactoryTermIsBlank=n,Mv}var dfe;function Rdt(){return dfe||(dfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Odt(),t)}(EB)),EB}var IB={},Cv={},Lv={},ffe;function Pdt(){if(ffe)return Lv;ffe=1,Object.defineProperty(Lv,"__esModule",{value:!0}),Lv.TermFunctionFloor=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.FLOOR,overloads:(0,e.declare)(e.SparqlOperator.FLOOR).numericConverter(()=>i=>Math.floor(i)).collect()})}};return Lv.TermFunctionFloor=r,Lv}var hfe;function Ndt(){if(hfe)return Cv;hfe=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.ActorFunctionFactoryTermFloor=void 0;const t=et(),e=Ye(),r=Pdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.FLOOR],termFunction:!0})}async run(a){return new r.TermFunctionFloor}};return Cv.ActorFunctionFactoryTermFloor=n,Cv}var pfe;function Fdt(){return pfe||(pfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ndt(),t)}(IB)),IB}var OB={},jv={},Bv={},_fe;function Mdt(){if(_fe)return Bv;_fe=1,Object.defineProperty(Bv,"__esModule",{value:!0}),Bv.TermFunctionIsNumeric=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_NUMERIC,overloads:(0,e.declare)(e.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,e.bool)(!0)).onTerm1(()=>()=>(0,e.bool)(!1)).collect()})}};return Bv.TermFunctionIsNumeric=r,Bv}var mfe;function Ddt(){if(mfe)return jv;mfe=1,Object.defineProperty(jv,"__esModule",{value:!0}),jv.ActorFunctionFactoryTermIsNumeric=void 0;const t=et(),e=Ye(),r=Mdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(a){return new r.TermFunctionIsNumeric}};return jv.ActorFunctionFactoryTermIsNumeric=n,jv}var gfe;function Cdt(){return gfe||(gfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ddt(),t)}(OB)),OB}var RB={},qv={},Uv={},yfe;function Ldt(){if(yfe)return Uv;yfe=1,Object.defineProperty(Uv,"__esModule",{value:!0}),Uv.TermFunctionIsIri=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_IRI,overloads:(0,e.declare)(e.SparqlOperator.IS_IRI).onTerm1(()=>i=>(0,e.bool)(i.termType==="namedNode")).collect()})}};return Uv.TermFunctionIsIri=r,Uv}var bfe;function jdt(){if(bfe)return qv;bfe=1,Object.defineProperty(qv,"__esModule",{value:!0}),qv.ActorFunctionFactoryTermIsIri=void 0;const t=et(),e=Ye(),r=Ldt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.IS_IRI,e.SparqlOperator.IS_URI],termFunction:!0})}async run(a){return new r.TermFunctionIsIri}};return qv.ActorFunctionFactoryTermIsIri=n,qv}var vfe;function Bdt(){return vfe||(vfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(jdt(),t)}(RB)),RB}var PB={},Vv={},Gv={},Afe;function qdt(){if(Afe)return Gv;Afe=1,Object.defineProperty(Gv,"__esModule",{value:!0}),Gv.TermFunctionIsTriple=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_TRIPLE,overloads:(0,e.declare)(e.SparqlOperator.IS_TRIPLE).onTerm1(()=>i=>(0,e.bool)(i.termType==="quad")).collect()})}};return Gv.TermFunctionIsTriple=r,Gv}var Tfe;function Udt(){if(Tfe)return Vv;Tfe=1,Object.defineProperty(Vv,"__esModule",{value:!0}),Vv.ActorFunctionFactoryTermIsTriple=void 0;const t=et(),e=Ye(),r=qdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(a){return new r.TermFunctionIsTriple}};return Vv.ActorFunctionFactoryTermIsTriple=n,Vv}var wfe;function Vdt(){return wfe||(wfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Udt(),t)}(PB)),PB}var NB={},Hv={},kv={},Sfe;function Gdt(){if(Sfe)return kv;Sfe=1,Object.defineProperty(kv,"__esModule",{value:!0}),kv.TermFunctionLang=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.LANG,overloads:(0,e.declare)(e.SparqlOperator.LANG).onLiteral1(()=>i=>(0,e.string)(i.language??"")).collect()})}};return kv.TermFunctionLang=r,kv}var xfe;function Hdt(){if(xfe)return Hv;xfe=1,Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.ActorFunctionFactoryTermLang=void 0;const t=et(),e=Ye(),r=Gdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.LANG],termFunction:!0})}async run(a){return new r.TermFunctionLang}};return Hv.ActorFunctionFactoryTermLang=n,Hv}var Efe;function kdt(){return Efe||(Efe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hdt(),t)}(NB)),NB}var FB={},zv={},Qv={},Ife;function zdt(){if(Ife)return Qv;Ife=1,Object.defineProperty(Qv,"__esModule",{value:!0}),Qv.TermFunctionLangdir=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.LANGDIR,overloads:(0,e.declare)(e.SparqlOperator.LANGDIR).onLiteral1(()=>i=>(0,e.string)(i.direction??"")).collect()})}};return Qv.TermFunctionLangdir=r,Qv}var Ofe;function Qdt(){if(Ofe)return zv;Ofe=1,Object.defineProperty(zv,"__esModule",{value:!0}),zv.ActorFunctionFactoryTermLangdir=void 0;const t=et(),e=Ye(),r=zdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.LANGDIR],termFunction:!0})}async run(a){return new r.TermFunctionLangdir}};return zv.ActorFunctionFactoryTermLangdir=n,zv}var Rfe;function Wdt(){return Rfe||(Rfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qdt(),t)}(FB)),FB}var MB={},Wv={},Kv={},Pfe;function Kdt(){if(Pfe)return Kv;Pfe=1,Object.defineProperty(Kv,"__esModule",{value:!0}),Kv.TermFunctionIsLiteral=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_LITERAL,overloads:(0,e.declare)(e.SparqlOperator.IS_LITERAL).onTerm1(()=>i=>(0,e.bool)(i.termType==="literal")).collect()})}};return Kv.TermFunctionIsLiteral=r,Kv}var Nfe;function Xdt(){if(Nfe)return Wv;Nfe=1,Object.defineProperty(Wv,"__esModule",{value:!0}),Wv.ActorFunctionFactoryTermIsLiteral=void 0;const t=et(),e=Ye(),r=Kdt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(a){return new r.TermFunctionIsLiteral}};return Wv.ActorFunctionFactoryTermIsLiteral=n,Wv}var Ffe;function Jdt(){return Ffe||(Ffe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xdt(),t)}(MB)),MB}var DB={},Xv={},Jv={},Mfe;function Ydt(){if(Mfe)return Jv;Mfe=1,Object.defineProperty(Jv,"__esModule",{value:!0}),Jv.TermFunctionLangmatches=void 0;const t=et(),e=Ye();let r=class Uh extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.LANG_MATCHES,overloads:(0,e.declare)(e.SparqlOperator.LANG_MATCHES).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(i,a)=>(0,e.bool)(Uh.langMatches(i,a))).collect()})}static langMatches(i,a){const s=i.split("-"),o=a.split("-");if(!Uh.matchLangTag(o[0],s[0])&&!Uh.isWildCard(s[0]))return!1;let c=1,u=1;for(;u<o.length;){if(Uh.isWildCard(o[u])){u++;continue}if(c===s.length)return!1;if(Uh.matchLangTag(o[u],s[c])){c++,u++;continue}if(s[c].length===1)return!1;c++}return!0}static isWildCard(i){return i==="*"}static matchLangTag(i,a){return new RegExp(`/${i}/`,"iu").test(`/${a}/`)}};return Jv.TermFunctionLangmatches=r,Jv}var Dfe;function $dt(){if(Dfe)return Xv;Dfe=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.ActorFunctionFactoryTermLangmatches=void 0;const t=et(),e=Ye(),r=Ydt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(a){return new r.TermFunctionLangmatches}};return Xv.ActorFunctionFactoryTermLangmatches=n,Xv}var Cfe;function Zdt(){return Cfe||(Cfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r($dt(),t)}(DB)),DB}var CB={},Yv={},$v={},Lfe;function eft(){if(Lfe)return $v;Lfe=1,Object.defineProperty($v,"__esModule",{value:!0}),$v.TermFunctionLcase=void 0;const t=et(),e=Ye(),r=Yu();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.LCASE,overloads:(0,e.declare)(e.SparqlOperator.LCASE).onString1Typed(()=>a=>(0,e.string)(a.toLowerCase())).onLangString1(()=>a=>(0,e.langString)(a.typedValue.toLowerCase(),a.language)).onDirLangString1(()=>a=>(0,r.dirLangString)(a.typedValue.toLowerCase(),a.language,a.direction)).collect()})}};return $v.TermFunctionLcase=n,$v}var jfe;function tft(){if(jfe)return Yv;jfe=1,Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.ActorFunctionFactoryTermLcase=void 0;const t=et(),e=Ye(),r=eft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.LCASE],termFunction:!0})}async run(a){return new r.TermFunctionLcase}};return Yv.ActorFunctionFactoryTermLcase=n,Yv}var Bfe;function rft(){return Bfe||(Bfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(tft(),t)}(CB)),CB}var LB={},Zv={},eA={},qfe;function nft(){if(qfe)return eA;qfe=1,Object.defineProperty(eA,"__esModule",{value:!0}),eA.TermFunctionMinutes=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.MINUTES,overloads:(0,e.declare)(e.SparqlOperator.MINUTES).onDateTime1(()=>i=>(0,e.integer)(i.typedValue.minutes)).set([e.TypeURL.XSD_TIME],()=>([i])=>(0,e.integer)(i.typedValue.minutes)).collect()})}};return eA.TermFunctionMinutes=r,eA}var Ufe;function ift(){if(Ufe)return Zv;Ufe=1,Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.ActorFunctionFactoryTermMinutes=void 0;const t=et(),e=Ye(),r=nft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.MINUTES],termFunction:!0})}async run(a){return new r.TermFunctionMinutes}};return Zv.ActorFunctionFactoryTermMinutes=n,Zv}var Vfe;function aft(){return Vfe||(Vfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ift(),t)}(LB)),LB}var jB={},tA={},rA={},Gfe;function sft(){if(Gfe)return rA;Gfe=1,Object.defineProperty(rA,"__esModule",{value:!0}),rA.TermFunctionMonth=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.MONTH,overloads:(0,e.declare)(e.SparqlOperator.MONTH).onDateTime1(()=>i=>(0,e.integer)(i.typedValue.month)).set([e.TypeURL.XSD_DATE],()=>([i])=>(0,e.integer)(i.typedValue.month)).collect()})}};return rA.TermFunctionMonth=r,rA}var Hfe;function oft(){if(Hfe)return tA;Hfe=1,Object.defineProperty(tA,"__esModule",{value:!0}),tA.ActorFunctionFactoryTermMonth=void 0;const t=et(),e=Ye(),r=sft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.MONTH],termFunction:!0})}async run(a){return new r.TermFunctionMonth}};return tA.ActorFunctionFactoryTermMonth=n,tA}var kfe;function uft(){return kfe||(kfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(oft(),t)}(jB)),jB}var BB={},nA={},iA={},zfe;function cft(){if(zfe)return iA;zfe=1,Object.defineProperty(iA,"__esModule",{value:!0}),iA.TermFunctionMultiplication=void 0;const t=et(),e=Ye(),r=lM();let n=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.MULTIPLICATION,overloads:(0,e.declare)(e.SparqlOperator.MULTIPLICATION).arithmetic(()=>(a,s)=>new r.BigNumber(a).times(s).toNumber()).collect()})}};return iA.TermFunctionMultiplication=n,iA}var Qfe;function lft(){if(Qfe)return nA;Qfe=1,Object.defineProperty(nA,"__esModule",{value:!0}),nA.ActorFunctionFactoryTermMultiplication=void 0;const t=et(),e=Ye(),r=cft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(a){return new r.TermFunctionMultiplication}};return nA.ActorFunctionFactoryTermMultiplication=n,nA}var Wfe;function dft(){return Wfe||(Wfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(lft(),t)}(BB)),BB}var qB={},aA={},sA={},Kfe;function fft(){if(Kfe)return sA;Kfe=1,Object.defineProperty(sA,"__esModule",{value:!0}),sA.TermFunctionNot=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.NOT,overloads:(0,e.declare)(e.SparqlOperator.NOT).onTerm1(()=>i=>(0,e.bool)(!i.coerceEBV())).collect()})}};return sA.TermFunctionNot=r,sA}var Xfe;function hft(){if(Xfe)return aA;Xfe=1,Object.defineProperty(aA,"__esModule",{value:!0}),aA.ActorFunctionFactoryTermNot=void 0;const t=et(),e=Ye(),r=fft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.NOT],termFunction:!0})}async run(a){return new r.TermFunctionNot}};return aA.ActorFunctionFactoryTermNot=n,aA}var Jfe;function pft(){return Jfe||(Jfe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(hft(),t)}(qB)),qB}var UB={},oA={},uA={},VB={exports:{}},Yfe;function _ft(){return Yfe||(Yfe=1,function(t,e){(function(r){t.exports=r()})(function(r){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(m,y){var v=m[0],A=m[1],T=m[2],S=m[3];v+=(A&T|~A&S)+y[0]-680876936|0,v=(v<<7|v>>>25)+A|0,S+=(v&A|~v&T)+y[1]-389564586|0,S=(S<<12|S>>>20)+v|0,T+=(S&v|~S&A)+y[2]+606105819|0,T=(T<<17|T>>>15)+S|0,A+=(T&S|~T&v)+y[3]-1044525330|0,A=(A<<22|A>>>10)+T|0,v+=(A&T|~A&S)+y[4]-176418897|0,v=(v<<7|v>>>25)+A|0,S+=(v&A|~v&T)+y[5]+1200080426|0,S=(S<<12|S>>>20)+v|0,T+=(S&v|~S&A)+y[6]-1473231341|0,T=(T<<17|T>>>15)+S|0,A+=(T&S|~T&v)+y[7]-45705983|0,A=(A<<22|A>>>10)+T|0,v+=(A&T|~A&S)+y[8]+1770035416|0,v=(v<<7|v>>>25)+A|0,S+=(v&A|~v&T)+y[9]-1958414417|0,S=(S<<12|S>>>20)+v|0,T+=(S&v|~S&A)+y[10]-42063|0,T=(T<<17|T>>>15)+S|0,A+=(T&S|~T&v)+y[11]-1990404162|0,A=(A<<22|A>>>10)+T|0,v+=(A&T|~A&S)+y[12]+1804603682|0,v=(v<<7|v>>>25)+A|0,S+=(v&A|~v&T)+y[13]-40341101|0,S=(S<<12|S>>>20)+v|0,T+=(S&v|~S&A)+y[14]-1502002290|0,T=(T<<17|T>>>15)+S|0,A+=(T&S|~T&v)+y[15]+1236535329|0,A=(A<<22|A>>>10)+T|0,v+=(A&S|T&~S)+y[1]-165796510|0,v=(v<<5|v>>>27)+A|0,S+=(v&T|A&~T)+y[6]-1069501632|0,S=(S<<9|S>>>23)+v|0,T+=(S&A|v&~A)+y[11]+643717713|0,T=(T<<14|T>>>18)+S|0,A+=(T&v|S&~v)+y[0]-373897302|0,A=(A<<20|A>>>12)+T|0,v+=(A&S|T&~S)+y[5]-701558691|0,v=(v<<5|v>>>27)+A|0,S+=(v&T|A&~T)+y[10]+38016083|0,S=(S<<9|S>>>23)+v|0,T+=(S&A|v&~A)+y[15]-660478335|0,T=(T<<14|T>>>18)+S|0,A+=(T&v|S&~v)+y[4]-405537848|0,A=(A<<20|A>>>12)+T|0,v+=(A&S|T&~S)+y[9]+568446438|0,v=(v<<5|v>>>27)+A|0,S+=(v&T|A&~T)+y[14]-1019803690|0,S=(S<<9|S>>>23)+v|0,T+=(S&A|v&~A)+y[3]-187363961|0,T=(T<<14|T>>>18)+S|0,A+=(T&v|S&~v)+y[8]+1163531501|0,A=(A<<20|A>>>12)+T|0,v+=(A&S|T&~S)+y[13]-1444681467|0,v=(v<<5|v>>>27)+A|0,S+=(v&T|A&~T)+y[2]-51403784|0,S=(S<<9|S>>>23)+v|0,T+=(S&A|v&~A)+y[7]+1735328473|0,T=(T<<14|T>>>18)+S|0,A+=(T&v|S&~v)+y[12]-1926607734|0,A=(A<<20|A>>>12)+T|0,v+=(A^T^S)+y[5]-378558|0,v=(v<<4|v>>>28)+A|0,S+=(v^A^T)+y[8]-2022574463|0,S=(S<<11|S>>>21)+v|0,T+=(S^v^A)+y[11]+1839030562|0,T=(T<<16|T>>>16)+S|0,A+=(T^S^v)+y[14]-35309556|0,A=(A<<23|A>>>9)+T|0,v+=(A^T^S)+y[1]-1530992060|0,v=(v<<4|v>>>28)+A|0,S+=(v^A^T)+y[4]+1272893353|0,S=(S<<11|S>>>21)+v|0,T+=(S^v^A)+y[7]-155497632|0,T=(T<<16|T>>>16)+S|0,A+=(T^S^v)+y[10]-1094730640|0,A=(A<<23|A>>>9)+T|0,v+=(A^T^S)+y[13]+681279174|0,v=(v<<4|v>>>28)+A|0,S+=(v^A^T)+y[0]-358537222|0,S=(S<<11|S>>>21)+v|0,T+=(S^v^A)+y[3]-722521979|0,T=(T<<16|T>>>16)+S|0,A+=(T^S^v)+y[6]+76029189|0,A=(A<<23|A>>>9)+T|0,v+=(A^T^S)+y[9]-640364487|0,v=(v<<4|v>>>28)+A|0,S+=(v^A^T)+y[12]-421815835|0,S=(S<<11|S>>>21)+v|0,T+=(S^v^A)+y[15]+530742520|0,T=(T<<16|T>>>16)+S|0,A+=(T^S^v)+y[2]-995338651|0,A=(A<<23|A>>>9)+T|0,v+=(T^(A|~S))+y[0]-198630844|0,v=(v<<6|v>>>26)+A|0,S+=(A^(v|~T))+y[7]+1126891415|0,S=(S<<10|S>>>22)+v|0,T+=(v^(S|~A))+y[14]-1416354905|0,T=(T<<15|T>>>17)+S|0,A+=(S^(T|~v))+y[5]-57434055|0,A=(A<<21|A>>>11)+T|0,v+=(T^(A|~S))+y[12]+1700485571|0,v=(v<<6|v>>>26)+A|0,S+=(A^(v|~T))+y[3]-1894986606|0,S=(S<<10|S>>>22)+v|0,T+=(v^(S|~A))+y[10]-1051523|0,T=(T<<15|T>>>17)+S|0,A+=(S^(T|~v))+y[1]-2054922799|0,A=(A<<21|A>>>11)+T|0,v+=(T^(A|~S))+y[8]+1873313359|0,v=(v<<6|v>>>26)+A|0,S+=(A^(v|~T))+y[15]-30611744|0,S=(S<<10|S>>>22)+v|0,T+=(v^(S|~A))+y[6]-1560198380|0,T=(T<<15|T>>>17)+S|0,A+=(S^(T|~v))+y[13]+1309151649|0,A=(A<<21|A>>>11)+T|0,v+=(T^(A|~S))+y[4]-145523070|0,v=(v<<6|v>>>26)+A|0,S+=(A^(v|~T))+y[11]-1120210379|0,S=(S<<10|S>>>22)+v|0,T+=(v^(S|~A))+y[2]+718787259|0,T=(T<<15|T>>>17)+S|0,A+=(S^(T|~v))+y[9]-343485551|0,A=(A<<21|A>>>11)+T|0,m[0]=v+m[0]|0,m[1]=A+m[1]|0,m[2]=T+m[2]|0,m[3]=S+m[3]|0}function a(m){var y=[],v;for(v=0;v<64;v+=4)y[v>>2]=m.charCodeAt(v)+(m.charCodeAt(v+1)<<8)+(m.charCodeAt(v+2)<<16)+(m.charCodeAt(v+3)<<24);return y}function s(m){var y=[],v;for(v=0;v<64;v+=4)y[v>>2]=m[v]+(m[v+1]<<8)+(m[v+2]<<16)+(m[v+3]<<24);return y}function o(m){var y=m.length,v=[1732584193,-271733879,-1732584194,271733878],A,T,S,P,j,F;for(A=64;A<=y;A+=64)i(v,a(m.substring(A-64,A)));for(m=m.substring(A-64),T=m.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=0;A<T;A+=1)S[A>>2]|=m.charCodeAt(A)<<(A%4<<3);if(S[A>>2]|=128<<(A%4<<3),A>55)for(i(v,S),A=0;A<16;A+=1)S[A]=0;return P=y*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(P[2],16),F=parseInt(P[1],16)||0,S[14]=j,S[15]=F,i(v,S),v}function c(m){var y=m.length,v=[1732584193,-271733879,-1732584194,271733878],A,T,S,P,j,F;for(A=64;A<=y;A+=64)i(v,s(m.subarray(A-64,A)));for(m=A-64<y?m.subarray(A-64):new Uint8Array(0),T=m.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=0;A<T;A+=1)S[A>>2]|=m[A]<<(A%4<<3);if(S[A>>2]|=128<<(A%4<<3),A>55)for(i(v,S),A=0;A<16;A+=1)S[A]=0;return P=y*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(P[2],16),F=parseInt(P[1],16)||0,S[14]=j,S[15]=F,i(v,S),v}function u(m){var y="",v;for(v=0;v<4;v+=1)y+=n[m>>v*8+4&15]+n[m>>v*8&15];return y}function l(m){var y;for(y=0;y<m.length;y+=1)m[y]=u(m[y]);return m.join("")}l(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(y,v){return y=y|0||0,y<0?Math.max(y+v,0):Math.min(y,v)}ArrayBuffer.prototype.slice=function(y,v){var A=this.byteLength,T=m(y,A),S=A,P,j,F,N;return v!==r&&(S=m(v,A)),T>S?new ArrayBuffer(0):(P=S-T,j=new ArrayBuffer(P),F=new Uint8Array(j),N=new Uint8Array(this,T,P),F.set(N),j)}}();function d(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function f(m,y){var v=m.length,A=new ArrayBuffer(v),T=new Uint8Array(A),S;for(S=0;S<v;S+=1)T[S]=m.charCodeAt(S);return y?T:A}function h(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function p(m,y,v){var A=new Uint8Array(m.byteLength+y.byteLength);return A.set(new Uint8Array(m)),A.set(new Uint8Array(y),m.byteLength),A}function _(m){var y=[],v=m.length,A;for(A=0;A<v-1;A+=2)y.push(parseInt(m.substr(A,2),16));return String.fromCharCode.apply(String,y)}function g(){this.reset()}return g.prototype.append=function(m){return this.appendBinary(d(m)),this},g.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var y=this._buff.length,v;for(v=64;v<=y;v+=64)i(this._hash,a(this._buff.substring(v-64,v)));return this._buff=this._buff.substring(v-64),this},g.prototype.end=function(m){var y=this._buff,v=y.length,A,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S;for(A=0;A<v;A+=1)T[A>>2]|=y.charCodeAt(A)<<(A%4<<3);return this._finish(T,v),S=l(this._hash),m&&(S=_(S)),this.reset(),S},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},g.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(m,y){var v=y,A,T,S;if(m[v>>2]|=128<<(v%4<<3),v>55)for(i(this._hash,m),v=0;v<16;v+=1)m[v]=0;A=this._length*8,A=A.toString(16).match(/(.*?)(.{0,8})$/),T=parseInt(A[2],16),S=parseInt(A[1],16)||0,m[14]=T,m[15]=S,i(this._hash,m)},g.hash=function(m,y){return g.hashBinary(d(m),y)},g.hashBinary=function(m,y){var v=o(m),A=l(v);return y?_(A):A},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(m){var y=p(this._buff.buffer,m),v=y.length,A;for(this._length+=m.byteLength,A=64;A<=v;A+=64)i(this._hash,s(y.subarray(A-64,A)));return this._buff=A-64<v?new Uint8Array(y.buffer.slice(A-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(m){var y=this._buff,v=y.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T,S;for(T=0;T<v;T+=1)A[T>>2]|=y[T]<<(T%4<<3);return this._finish(A,v),S=l(this._hash),m&&(S=_(S)),this.reset(),S},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var m=g.prototype.getState.call(this);return m.buff=h(m.buff),m},g.ArrayBuffer.prototype.setState=function(m){return m.buff=f(m.buff,!0),g.prototype.setState.call(this,m)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(m,y){var v=c(new Uint8Array(m)),A=l(v);return y?_(A):A},g})}(VB)),VB.exports}var $fe;function mft(){if($fe)return uA;$fe=1,Object.defineProperty(uA,"__esModule",{value:!0}),uA.TermFunctionMd5=void 0;const t=et(),e=Ye(),r=_ft();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.MD5,overloads:(0,e.declare)(e.SparqlOperator.MD5).onString1Typed(()=>a=>(0,e.string)((0,r.hash)(a))).collect()})}};return uA.TermFunctionMd5=n,uA}var Zfe;function gft(){if(Zfe)return oA;Zfe=1,Object.defineProperty(oA,"__esModule",{value:!0}),oA.ActorFunctionFactoryTermMd5=void 0;const t=et(),e=Ye(),r=mft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.MD5],termFunction:!0})}async run(a){return new r.TermFunctionMd5}};return oA.ActorFunctionFactoryTermMd5=n,oA}var ehe;function yft(){return ehe||(ehe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(gft(),t)}(UB)),UB}var GB={},cA={},lA={},the;function bft(){if(the)return lA;the=1,Object.defineProperty(lA,"__esModule",{value:!0}),lA.TermFunctionNow=void 0;const t=et(),e=dt,r=Ye();let n=class extends t.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.NOW,overloads:(0,r.declare)(r.SparqlOperator.NOW).set([],a=>()=>new r.DateTimeLiteral((0,r.toDateTimeRepresentation)({date:a.context.getSafe(e.KeysInitQuery.queryTimestamp),timeZone:a.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return lA.TermFunctionNow=n,lA}var rhe;function vft(){if(rhe)return cA;rhe=1,Object.defineProperty(cA,"__esModule",{value:!0}),cA.ActorFunctionFactoryTermNow=void 0;const t=et(),e=Ye(),r=bft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.NOW],termFunction:!0})}async run(a){return new r.TermFunctionNow}};return cA.ActorFunctionFactoryTermNow=n,cA}var nhe;function Aft(){return nhe||(nhe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vft(),t)}(GB)),GB}var HB={},dA={},fA={},ihe;function Tft(){if(ihe)return fA;ihe=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.TermFunctionObject=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.OBJECT,overloads:(0,e.declare)(e.SparqlOperator.OBJECT).onQuad1(()=>i=>i.object).collect()})}};return fA.TermFunctionObject=r,fA}var ahe;function wft(){if(ahe)return dA;ahe=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.ActorFunctionFactoryTermObject=void 0;const t=et(),e=Ye(),r=Tft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.OBJECT],termFunction:!0})}async run(a){return new r.TermFunctionObject}};return dA.ActorFunctionFactoryTermObject=n,dA}var she;function Sft(){return she||(she=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(wft(),t)}(HB)),HB}var kB={},hA={},pA={},ohe;function xft(){if(ohe)return pA;ohe=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.TermFunctionRand=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:0,operator:e.SparqlOperator.RAND,overloads:(0,e.declare)(e.SparqlOperator.RAND).set([],()=>()=>(0,e.double)(Math.random())).collect()})}};return pA.TermFunctionRand=r,pA}var uhe;function Eft(){if(uhe)return hA;uhe=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.ActorFunctionFactoryTermRand=void 0;const t=et(),e=Ye(),r=xft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.RAND],termFunction:!0})}async run(a){return new r.TermFunctionRand}};return hA.ActorFunctionFactoryTermRand=n,hA}var che;function Ift(){return che||(che=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Eft(),t)}(kB)),kB}var zB={},_A={},mA={},lhe;function iPe(){if(lhe)return mA;lhe=1,Object.defineProperty(mA,"__esModule",{value:!0}),mA.TermFunctionRegex=void 0;const t=et(),e=Ye();let r=class Ec extends t.TermFunctionBase{constructor(){super({arity:[2,3],operator:e.SparqlOperator.REGEX,overloads:(0,e.declare)(e.SparqlOperator.REGEX).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],Ec.regex2).onTernaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],Ec.regex3).collect()})}static regex2(){return(i,a)=>(0,e.bool)(Ec.matches(i,a))}static regex3(){return(i,a,s)=>(0,e.bool)(Ec.matches(i,a,s))}static matches(i,a,s=""){return s=Ec.cleanFlags(s),s.includes("x")&&(a=Ec.flagX(a)),s.includes("q")&&(a=Ec.flagQ(a)),new RegExp(a,s.replaceAll(/[qx]/gu,"")).test(i)}static cleanFlags(i){if(!/^[imsxq]*$/u.test(i))throw new Error("Invalid flags");const a=[...i].find((s,o,c)=>c.indexOf(s)!==o);if(a)throw new Error(`Duplicate flag: ${a}`);return i!=null&&i.includes("q")&&(i=i.replaceAll(/[msx]/gu,"")),`${i}u`}static flagX(i){if(!i)return i;let a=i[0];for(;["	",`
`,"\r"," "].includes(a);)i=i.slice(1),a=i[0];let s=a==="[";for(let o=1;o<i.length;o++){const c=i[o];["	",`
`,"\r"," "].includes(c)&&!s?(i=i.slice(0,o)+i.slice(o+1),o--):c==="["&&a!=="\\"?s=!0:c==="]"&&a!=="\\"&&(s=!1),a=c}return i}static flagQ(i){return i.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return mA.TermFunctionRegex=r,mA}var dhe;function Oft(){if(dhe)return _A;dhe=1,Object.defineProperty(_A,"__esModule",{value:!0}),_A.ActorFunctionFactoryTermRegex=void 0;const t=et(),e=Ye(),r=iPe();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.REGEX],termFunction:!0})}async run(a){return new r.TermFunctionRegex}};return _A.ActorFunctionFactoryTermRegex=n,_A}var fhe;function aPe(){return fhe||(fhe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Oft(),t),r(iPe(),t)}(zB)),zB}var QB={},gA={},yA={},hhe;function Rft(){if(hhe)return yA;hhe=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.TermFunctionPredicate=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.PREDICATE,overloads:(0,e.declare)(e.SparqlOperator.PREDICATE).onQuad1(()=>i=>i.predicate).collect()})}};return yA.TermFunctionPredicate=r,yA}var phe;function Pft(){if(phe)return gA;phe=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.ActorFunctionFactoryTermPredicate=void 0;const t=et(),e=Ye(),r=Rft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.PREDICATE],termFunction:!0})}async run(a){return new r.TermFunctionPredicate}};return gA.ActorFunctionFactoryTermPredicate=n,gA}var _he;function Nft(){return _he||(_he=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pft(),t)}(QB)),QB}var WB={},bA={},vA={},mhe;function Fft(){if(mhe)return vA;mhe=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.TermFunctionRound=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.ROUND,overloads:(0,e.declare)(e.SparqlOperator.ROUND).numericConverter(()=>i=>Math.round(i)).collect()})}};return vA.TermFunctionRound=r,vA}var ghe;function Mft(){if(ghe)return bA;ghe=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.ActorFunctionFactoryTermRound=void 0;const t=et(),e=Ye(),r=Fft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.ROUND],termFunction:!0})}async run(a){return new r.TermFunctionRound}};return bA.ActorFunctionFactoryTermRound=n,bA}var yhe;function Dft(){return yhe||(yhe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Mft(),t)}(WB)),WB}var KB={},AA={},TA={},bhe;function Cft(){if(bhe)return TA;bhe=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.TermFunctionReplace=void 0;const t=aPe(),e=et(),r=Ye(),n=Yu();let i=class Rd extends e.TermFunctionBase{constructor(){super({arity:[3,4],operator:r.SparqlOperator.REPLACE,overloads:(0,r.declare)(r.SparqlOperator.REPLACE).onTernaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(s,o,c)=>(0,r.string)(Rd.replace(s,o,c))).set([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>([s,o,c])=>{const u=Rd.replace(s.typedValue,o.typedValue,c.typedValue);return(0,r.langString)(u,s.language)}).set([r.TypeURL.RDF_DIR_LANG_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>([s,o,c])=>{const u=Rd.replace(s.typedValue,o.typedValue,c.typedValue);return(0,n.dirLangString)(u,s.language,s.direction)}).onQuaternaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(s,o,c,u)=>(0,r.string)(Rd.replace(s,o,c,u))).set([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>([s,o,c,u])=>{const l=Rd.replace(s.typedValue,o.typedValue,c.typedValue,u.typedValue);return(0,r.langString)(l,s.language)}).set([r.TypeURL.RDF_DIR_LANG_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>([s,o,c,u])=>{const l=Rd.replace(s.typedValue,o.typedValue,c.typedValue,u.typedValue);return(0,n.dirLangString)(l,s.language,s.direction)}).collect()})}static replace(s,o,c,u=""){return u=t.TermFunctionRegex.cleanFlags(u),u.includes("x")&&(o=t.TermFunctionRegex.flagX(o)),u.includes("q")?o=t.TermFunctionRegex.flagQ(o):c=c.replaceAll("$0",()=>"$&"),u=`${u.replaceAll(/[qx]/gu,"")}g`,s.replaceAll(new RegExp(o,u),c)}};return TA.TermFunctionReplace=i,TA}var vhe;function Lft(){if(vhe)return AA;vhe=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.ActorFunctionFactoryTermReplace=void 0;const t=et(),e=Ye(),r=Cft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.REPLACE],termFunction:!0})}async run(a){return new r.TermFunctionReplace}};return AA.ActorFunctionFactoryTermReplace=n,AA}var Ahe;function jft(){return Ahe||(Ahe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lft(),t)}(KB)),KB}var XB={},wA={},SA={},JB={},Fr={},YB,The;function NO(){if(The)return YB;The=1,YB=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},YB}var wP={exports:{}},whe;function Bft(){return whe||(whe=1,typeof Object.create=="function"?wP.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:wP.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),wP.exports}var She;function Jo(){if(She)return Fr;She=1;var t=NO(),e=Bft();Fr.inherits=e;function r(C,M){return(C.charCodeAt(M)&64512)!==55296||M<0||M+1>=C.length?!1:(C.charCodeAt(M+1)&64512)===56320}function n(C,M){if(Array.isArray(C))return C.slice();if(!C)return[];var U=[];if(typeof C=="string")if(M){if(M==="hex")for(C=C.replace(/[^a-z0-9]+/ig,""),C.length%2!==0&&(C="0"+C),G=0;G<C.length;G+=2)U.push(parseInt(C[G]+C[G+1],16))}else for(var B=0,G=0;G<C.length;G++){var K=C.charCodeAt(G);K<128?U[B++]=K:K<2048?(U[B++]=K>>6|192,U[B++]=K&63|128):r(C,G)?(K=65536+((K&1023)<<10)+(C.charCodeAt(++G)&1023),U[B++]=K>>18|240,U[B++]=K>>12&63|128,U[B++]=K>>6&63|128,U[B++]=K&63|128):(U[B++]=K>>12|224,U[B++]=K>>6&63|128,U[B++]=K&63|128)}else for(G=0;G<C.length;G++)U[G]=C[G]|0;return U}Fr.toArray=n;function i(C){for(var M="",U=0;U<C.length;U++)M+=o(C[U].toString(16));return M}Fr.toHex=i;function a(C){var M=C>>>24|C>>>8&65280|C<<8&16711680|(C&255)<<24;return M>>>0}Fr.htonl=a;function s(C,M){for(var U="",B=0;B<C.length;B++){var G=C[B];M==="little"&&(G=a(G)),U+=c(G.toString(16))}return U}Fr.toHex32=s;function o(C){return C.length===1?"0"+C:C}Fr.zero2=o;function c(C){return C.length===7?"0"+C:C.length===6?"00"+C:C.length===5?"000"+C:C.length===4?"0000"+C:C.length===3?"00000"+C:C.length===2?"000000"+C:C.length===1?"0000000"+C:C}Fr.zero8=c;function u(C,M,U,B){var G=U-M;t(G%4===0);for(var K=new Array(G/4),$=0,se=M;$<K.length;$++,se+=4){var pe;B==="big"?pe=C[se]<<24|C[se+1]<<16|C[se+2]<<8|C[se+3]:pe=C[se+3]<<24|C[se+2]<<16|C[se+1]<<8|C[se],K[$]=pe>>>0}return K}Fr.join32=u;function l(C,M){for(var U=new Array(C.length*4),B=0,G=0;B<C.length;B++,G+=4){var K=C[B];M==="big"?(U[G]=K>>>24,U[G+1]=K>>>16&255,U[G+2]=K>>>8&255,U[G+3]=K&255):(U[G+3]=K>>>24,U[G+2]=K>>>16&255,U[G+1]=K>>>8&255,U[G]=K&255)}return U}Fr.split32=l;function d(C,M){return C>>>M|C<<32-M}Fr.rotr32=d;function f(C,M){return C<<M|C>>>32-M}Fr.rotl32=f;function h(C,M){return C+M>>>0}Fr.sum32=h;function p(C,M,U){return C+M+U>>>0}Fr.sum32_3=p;function _(C,M,U,B){return C+M+U+B>>>0}Fr.sum32_4=_;function g(C,M,U,B,G){return C+M+U+B+G>>>0}Fr.sum32_5=g;function m(C,M,U,B){var G=C[M],K=C[M+1],$=B+K>>>0,se=($<B?1:0)+U+G;C[M]=se>>>0,C[M+1]=$}Fr.sum64=m;function y(C,M,U,B){var G=M+B>>>0,K=(G<M?1:0)+C+U;return K>>>0}Fr.sum64_hi=y;function v(C,M,U,B){var G=M+B;return G>>>0}Fr.sum64_lo=v;function A(C,M,U,B,G,K,$,se){var pe=0,we=M;we=we+B>>>0,pe+=we<M?1:0,we=we+K>>>0,pe+=we<K?1:0,we=we+se>>>0,pe+=we<se?1:0;var Ce=C+U+G+$+pe;return Ce>>>0}Fr.sum64_4_hi=A;function T(C,M,U,B,G,K,$,se){var pe=M+B+K+se;return pe>>>0}Fr.sum64_4_lo=T;function S(C,M,U,B,G,K,$,se,pe,we){var Ce=0,Le=M;Le=Le+B>>>0,Ce+=Le<M?1:0,Le=Le+K>>>0,Ce+=Le<K?1:0,Le=Le+se>>>0,Ce+=Le<se?1:0,Le=Le+we>>>0,Ce+=Le<we?1:0;var Ie=C+U+G+$+pe+Ce;return Ie>>>0}Fr.sum64_5_hi=S;function P(C,M,U,B,G,K,$,se,pe,we){var Ce=M+B+K+se+we;return Ce>>>0}Fr.sum64_5_lo=P;function j(C,M,U){var B=M<<32-U|C>>>U;return B>>>0}Fr.rotr64_hi=j;function F(C,M,U){var B=C<<32-U|M>>>U;return B>>>0}Fr.rotr64_lo=F;function N(C,M,U){return C>>>U}Fr.shr64_hi=N;function R(C,M,U){var B=C<<32-U|M>>>U;return B>>>0}return Fr.shr64_lo=R,Fr}var $B={},xhe;function FO(){if(xhe)return $B;xhe=1;var t=Jo(),e=NO();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return $B.BlockHash=r,r.prototype.update=function(i,a){if(i=t.toArray(i,a),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var s=i.length%this._delta8;this.pending=i.slice(i.length-s,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-s,this.endian);for(var o=0;o<i.length;o+=this._delta32)this._update(i,o,o+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,a=this._delta8,s=a-(i+this.padLength)%a,o=new Array(s+this.padLength);o[0]=128;for(var c=1;c<s;c++)o[c]=0;if(i<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=i>>>24&255,o[c++]=i>>>16&255,o[c++]=i>>>8&255,o[c++]=i&255}else for(o[c++]=i&255,o[c++]=i>>>8&255,o[c++]=i>>>16&255,o[c++]=i>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,u=8;u<this.padLength;u++)o[c++]=0;return o},$B}var Td={},ho={},Ehe;function sPe(){if(Ehe)return ho;Ehe=1;var t=Jo(),e=t.rotr32;function r(l,d,f,h){if(l===0)return n(d,f,h);if(l===1||l===3)return a(d,f,h);if(l===2)return i(d,f,h)}ho.ft_1=r;function n(l,d,f){return l&d^~l&f}ho.ch32=n;function i(l,d,f){return l&d^l&f^d&f}ho.maj32=i;function a(l,d,f){return l^d^f}ho.p32=a;function s(l){return e(l,2)^e(l,13)^e(l,22)}ho.s0_256=s;function o(l){return e(l,6)^e(l,11)^e(l,25)}ho.s1_256=o;function c(l){return e(l,7)^e(l,18)^l>>>3}ho.g0_256=c;function u(l){return e(l,17)^e(l,19)^l>>>10}return ho.g1_256=u,ho}var ZB,Ihe;function qft(){if(Ihe)return ZB;Ihe=1;var t=Jo(),e=FO(),r=sPe(),n=t.rotl32,i=t.sum32,a=t.sum32_5,s=r.ft_1,o=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,o),ZB=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(d,f){for(var h=this.W,p=0;p<16;p++)h[p]=d[f+p];for(;p<h.length;p++)h[p]=n(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);var _=this.h[0],g=this.h[1],m=this.h[2],y=this.h[3],v=this.h[4];for(p=0;p<h.length;p++){var A=~~(p/20),T=a(n(_,5),s(A,g,m,y),v,h[p],c[A]);v=y,y=m,m=n(g,30),g=_,_=T}this.h[0]=i(this.h[0],_),this.h[1]=i(this.h[1],g),this.h[2]=i(this.h[2],m),this.h[3]=i(this.h[3],y),this.h[4]=i(this.h[4],v)},u.prototype._digest=function(d){return d==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},ZB}var e5,Ohe;function oPe(){if(Ohe)return e5;Ohe=1;var t=Jo(),e=FO(),r=sPe(),n=NO(),i=t.sum32,a=t.sum32_4,s=t.sum32_5,o=r.ch32,c=r.maj32,u=r.s0_256,l=r.s1_256,d=r.g0_256,f=r.g1_256,h=e.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _(){if(!(this instanceof _))return new _;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return t.inherits(_,h),e5=_,_.blockSize=512,_.outSize=256,_.hmacStrength=192,_.padLength=64,_.prototype._update=function(m,y){for(var v=this.W,A=0;A<16;A++)v[A]=m[y+A];for(;A<v.length;A++)v[A]=a(f(v[A-2]),v[A-7],d(v[A-15]),v[A-16]);var T=this.h[0],S=this.h[1],P=this.h[2],j=this.h[3],F=this.h[4],N=this.h[5],R=this.h[6],C=this.h[7];for(n(this.k.length===v.length),A=0;A<v.length;A++){var M=s(C,l(F),o(F,N,R),this.k[A],v[A]),U=i(u(T),c(T,S,P));C=R,R=N,N=F,F=i(j,M),j=P,P=S,S=T,T=i(M,U)}this.h[0]=i(this.h[0],T),this.h[1]=i(this.h[1],S),this.h[2]=i(this.h[2],P),this.h[3]=i(this.h[3],j),this.h[4]=i(this.h[4],F),this.h[5]=i(this.h[5],N),this.h[6]=i(this.h[6],R),this.h[7]=i(this.h[7],C)},_.prototype._digest=function(m){return m==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},e5}var t5,Rhe;function Uft(){if(Rhe)return t5;Rhe=1;var t=Jo(),e=oPe();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),t5=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},t5}var r5,Phe;function uPe(){if(Phe)return r5;Phe=1;var t=Jo(),e=FO(),r=NO(),n=t.rotr64_hi,i=t.rotr64_lo,a=t.shr64_hi,s=t.shr64_lo,o=t.sum64,c=t.sum64_hi,u=t.sum64_lo,l=t.sum64_4_hi,d=t.sum64_4_lo,f=t.sum64_5_hi,h=t.sum64_5_lo,p=e.BlockHash,_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function g(){if(!(this instanceof g))return new g;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_,this.W=new Array(160)}t.inherits(g,p),r5=g,g.blockSize=1024,g.outSize=512,g.hmacStrength=192,g.padLength=128,g.prototype._prepareBlock=function(U,B){for(var G=this.W,K=0;K<32;K++)G[K]=U[B+K];for(;K<G.length;K+=2){var $=R(G[K-4],G[K-3]),se=C(G[K-4],G[K-3]),pe=G[K-14],we=G[K-13],Ce=F(G[K-30],G[K-29]),Le=N(G[K-30],G[K-29]),Ie=G[K-32],Oe=G[K-31];G[K]=l($,se,pe,we,Ce,Le,Ie,Oe),G[K+1]=d($,se,pe,we,Ce,Le,Ie,Oe)}},g.prototype._update=function(U,B){this._prepareBlock(U,B);var G=this.W,K=this.h[0],$=this.h[1],se=this.h[2],pe=this.h[3],we=this.h[4],Ce=this.h[5],Le=this.h[6],Ie=this.h[7],Oe=this.h[8],ye=this.h[9],Me=this.h[10],W=this.h[11],ft=this.h[12],le=this.h[13],me=this.h[14],Z=this.h[15];r(this.k.length===G.length);for(var q=0;q<G.length;q+=2){var J=me,re=Z,_e=P(Oe,ye),he=j(Oe,ye),ue=m(Oe,ye,Me,W,ft),Ue=y(Oe,ye,Me,W,ft,le),De=this.k[q],Je=this.k[q+1],ze=G[q],ve=G[q+1],de=f(J,re,_e,he,ue,Ue,De,Je,ze,ve),Ge=h(J,re,_e,he,ue,Ue,De,Je,ze,ve);J=T(K,$),re=S(K,$),_e=v(K,$,se,pe,we),he=A(K,$,se,pe,we,Ce);var it=c(J,re,_e,he),ae=u(J,re,_e,he);me=ft,Z=le,ft=Me,le=W,Me=Oe,W=ye,Oe=c(Le,Ie,de,Ge),ye=u(Ie,Ie,de,Ge),Le=we,Ie=Ce,we=se,Ce=pe,se=K,pe=$,K=c(de,Ge,it,ae),$=u(de,Ge,it,ae)}o(this.h,0,K,$),o(this.h,2,se,pe),o(this.h,4,we,Ce),o(this.h,6,Le,Ie),o(this.h,8,Oe,ye),o(this.h,10,Me,W),o(this.h,12,ft,le),o(this.h,14,me,Z)},g.prototype._digest=function(U){return U==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function m(M,U,B,G,K){var $=M&B^~M&K;return $<0&&($+=4294967296),$}function y(M,U,B,G,K,$){var se=U&G^~U&$;return se<0&&(se+=4294967296),se}function v(M,U,B,G,K){var $=M&B^M&K^B&K;return $<0&&($+=4294967296),$}function A(M,U,B,G,K,$){var se=U&G^U&$^G&$;return se<0&&(se+=4294967296),se}function T(M,U){var B=n(M,U,28),G=n(U,M,2),K=n(U,M,7),$=B^G^K;return $<0&&($+=4294967296),$}function S(M,U){var B=i(M,U,28),G=i(U,M,2),K=i(U,M,7),$=B^G^K;return $<0&&($+=4294967296),$}function P(M,U){var B=n(M,U,14),G=n(M,U,18),K=n(U,M,9),$=B^G^K;return $<0&&($+=4294967296),$}function j(M,U){var B=i(M,U,14),G=i(M,U,18),K=i(U,M,9),$=B^G^K;return $<0&&($+=4294967296),$}function F(M,U){var B=n(M,U,1),G=n(M,U,8),K=a(M,U,7),$=B^G^K;return $<0&&($+=4294967296),$}function N(M,U){var B=i(M,U,1),G=i(M,U,8),K=s(M,U,7),$=B^G^K;return $<0&&($+=4294967296),$}function R(M,U){var B=n(M,U,19),G=n(U,M,29),K=a(M,U,6),$=B^G^K;return $<0&&($+=4294967296),$}function C(M,U){var B=i(M,U,19),G=i(U,M,29),K=s(M,U,6),$=B^G^K;return $<0&&($+=4294967296),$}return r5}var n5,Nhe;function Vft(){if(Nhe)return n5;Nhe=1;var t=Jo(),e=uPe();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),n5=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},n5}var Fhe;function Gft(){return Fhe||(Fhe=1,Td.sha1=qft(),Td.sha224=Uft(),Td.sha256=oPe(),Td.sha384=Vft(),Td.sha512=uPe()),Td}var i5={},Mhe;function Hft(){if(Mhe)return i5;Mhe=1;var t=Jo(),e=FO(),r=t.rotl32,n=t.sum32,i=t.sum32_3,a=t.sum32_4,s=e.BlockHash;function o(){if(!(this instanceof o))return new o;s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(o,s),i5.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(g,m){for(var y=this.h[0],v=this.h[1],A=this.h[2],T=this.h[3],S=this.h[4],P=y,j=v,F=A,N=T,R=S,C=0;C<80;C++){var M=n(r(a(y,c(C,v,A,T),g[d[C]+m],u(C)),h[C]),S);y=S,S=T,T=r(A,10),A=v,v=M,M=n(r(a(P,c(79-C,j,F,N),g[f[C]+m],l(C)),p[C]),R),P=R,R=N,N=r(F,10),F=j,j=M}M=i(this.h[1],A,N),this.h[1]=i(this.h[2],T,R),this.h[2]=i(this.h[3],S,P),this.h[3]=i(this.h[4],y,j),this.h[4]=i(this.h[0],v,F),this.h[0]=M},o.prototype._digest=function(g){return g==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(_,g,m,y){return _<=15?g^m^y:_<=31?g&m|~g&y:_<=47?(g|~m)^y:_<=63?g&y|m&~y:g^(m|~y)}function u(_){return _<=15?0:_<=31?1518500249:_<=47?1859775393:_<=63?2400959708:2840853838}function l(_){return _<=15?1352829926:_<=31?1548603684:_<=47?1836072691:_<=63?2053994217:0}var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return i5}var a5,Dhe;function kft(){if(Dhe)return a5;Dhe=1;var t=Jo(),e=NO();function r(n,i,a){if(!(this instanceof r))return new r(n,i,a);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,a))}return a5=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var a=i.length;a<this.blockSize;a++)i.push(0);for(a=0;a<i.length;a++)i[a]^=54;for(this.inner=new this.Hash().update(i),a=0;a<i.length;a++)i[a]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,a){return this.inner.update(i,a),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},a5}var Che;function dM(){return Che||(Che=1,function(t){var e=t;e.utils=Jo(),e.common=FO(),e.sha=Gft(),e.ripemd=Hft(),e.hmac=kft(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(JB)),JB}var Lhe;function zft(){if(Lhe)return SA;Lhe=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.TermFunctionSha1=void 0;const t=et(),e=Ye(),r=dM();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA1,overloads:(0,e.declare)(e.SparqlOperator.SHA1).onString1Typed(()=>a=>(0,e.string)((0,r.sha1)().update(a).digest("hex"))).collect()})}};return SA.TermFunctionSha1=n,SA}var jhe;function Qft(){if(jhe)return wA;jhe=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.ActorFunctionFactoryTermSha1=void 0;const t=et(),e=Ye(),r=zft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SHA1],termFunction:!0})}async run(a){return new r.TermFunctionSha1}};return wA.ActorFunctionFactoryTermSha1=n,wA}var Bhe;function Wft(){return Bhe||(Bhe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qft(),t)}(XB)),XB}var s5={},xA={},EA={},qhe;function Kft(){if(qhe)return EA;qhe=1,Object.defineProperty(EA,"__esModule",{value:!0}),EA.TermFunctionSha384=void 0;const t=et(),e=Ye(),r=dM();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA384,overloads:(0,e.declare)(e.SparqlOperator.SHA384).onString1Typed(()=>a=>(0,e.string)((0,r.sha384)().update(a).digest("hex"))).collect()})}};return EA.TermFunctionSha384=n,EA}var Uhe;function Xft(){if(Uhe)return xA;Uhe=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.ActorFunctionFactoryTermSha384=void 0;const t=et(),e=Ye(),r=Kft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SHA384],termFunction:!0})}async run(a){return new r.TermFunctionSha384}};return xA.ActorFunctionFactoryTermSha384=n,xA}var Vhe;function Jft(){return Vhe||(Vhe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xft(),t)}(s5)),s5}var o5={},IA={},OA={},Ghe;function Yft(){if(Ghe)return OA;Ghe=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.TermFunctionSha512=void 0;const t=et(),e=Ye(),r=dM();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA512,overloads:(0,e.declare)(e.SparqlOperator.SHA512).onString1Typed(()=>a=>(0,e.string)((0,r.sha512)().update(a).digest("hex"))).collect()})}};return OA.TermFunctionSha512=n,OA}var Hhe;function $ft(){if(Hhe)return IA;Hhe=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.ActorFunctionFactoryTermSha512=void 0;const t=et(),e=Ye(),r=Yft();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SHA512],termFunction:!0})}async run(a){return new r.TermFunctionSha512}};return IA.ActorFunctionFactoryTermSha512=n,IA}var khe;function Zft(){return khe||(khe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r($ft(),t)}(o5)),o5}var u5={},RA={},PA={},zhe;function eht(){if(zhe)return PA;zhe=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.TermFunctionStrAfter=void 0;const t=et(),e=Ye(),r=Yu(),n=Rl();let i=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRAFTER,overloads:(0,e.declare)(e.SparqlOperator.STRAFTER).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(s,o)=>(0,e.string)(s.slice(s.indexOf(o)).slice(o.length))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_STRING],()=>(s,o)=>{const[c,u]=[s.typedValue,o.typedValue],l=c.slice(c.indexOf(u)).slice(u.length);return l||!u?(0,e.langString)(l,s.language):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(s,o)=>{if(s.language!==o.language)throw new e.IncompatibleLanguageOperation(s,o);const[c,u]=[s.typedValue,o.typedValue],l=c.slice(c.indexOf(u)).slice(u.length);return l||!u?(0,e.langString)(l,s.language):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.XSD_STRING],()=>(s,o)=>{const[c,u]=[s.typedValue,o.typedValue],l=c.slice(c.indexOf(u)).slice(u.length);return l||!u?(0,r.dirLangString)(l,s.language,s.direction):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(s,o)=>{if(s.language!==o.language)throw new e.IncompatibleLanguageOperation(s,o);const[c,u]=[s.typedValue,o.typedValue],l=c.slice(c.indexOf(u)).slice(u.length);return l||!u?(0,r.dirLangString)(l,s.language,s.direction):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.RDF_DIR_LANG_STRING],()=>(s,o)=>{if(s.language!==o.language)throw new e.IncompatibleLanguageOperation(s,o);if(s.direction!==o.direction)throw new n.IncompatibleDirectionalLanguageOperation(s,o);const[c,u]=[s.typedValue,o.typedValue],l=c.slice(c.indexOf(u)).slice(u.length);return l||!u?(0,r.dirLangString)(l,s.language,s.direction):(0,e.string)(l)}).collect()})}};return PA.TermFunctionStrAfter=i,PA}var Qhe;function tht(){if(Qhe)return RA;Qhe=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.ActorFunctionFactoryTermStrAfter=void 0;const t=et(),e=Ye(),r=eht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRAFTER],termFunction:!0})}async run(a){return new r.TermFunctionStrAfter}};return RA.ActorFunctionFactoryTermStrAfter=n,RA}var Whe;function rht(){return Whe||(Whe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(tht(),t)}(u5)),u5}var c5={},NA={},FA={},Khe;function nht(){if(Khe)return FA;Khe=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.TermFunctionStrDt=void 0;const t=et(),e=dt,r=Ye();let n=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRDT,overloads:(0,r.declare)(r.SparqlOperator.STRDT).set([r.TypeURL.XSD_STRING,"namedNode"],a=>([s,o])=>{const c=a.context.getSafe(e.KeysInitQuery.dataFactory),u=c.literal(s.typedValue,c.namedNode(o.value));return new r.TermTransformer(a.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(u)}).collect()})}};return FA.TermFunctionStrDt=n,FA}var Xhe;function iht(){if(Xhe)return NA;Xhe=1,Object.defineProperty(NA,"__esModule",{value:!0}),NA.ActorFunctionFactoryTermStrDt=void 0;const t=et(),e=Ye(),r=nht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRDT],termFunction:!0})}async run(a){return new r.TermFunctionStrDt}};return NA.ActorFunctionFactoryTermStrDt=n,NA}var Jhe;function aht(){return Jhe||(Jhe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(iht(),t)}(c5)),c5}var l5={},MA={},DA={},Yhe;function sht(){if(Yhe)return DA;Yhe=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.TermFunctionSeconds=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SECONDS,overloads:(0,e.declare)(e.SparqlOperator.SECONDS).onDateTime1(()=>i=>(0,e.decimal)(i.typedValue.seconds)).set([e.TypeURL.XSD_TIME],()=>([i])=>(0,e.integer)(i.typedValue.seconds)).collect()})}};return DA.TermFunctionSeconds=r,DA}var $he;function oht(){if($he)return MA;$he=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.ActorFunctionFactoryTermSeconds=void 0;const t=et(),e=Ye(),r=sht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SECONDS],termFunction:!0})}async run(a){return new r.TermFunctionSeconds}};return MA.ActorFunctionFactoryTermSeconds=n,MA}var Zhe;function uht(){return Zhe||(Zhe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(oht(),t)}(l5)),l5}var d5={},CA={},LA={},epe;function cht(){if(epe)return LA;epe=1,Object.defineProperty(LA,"__esModule",{value:!0}),LA.TermFunctionStrEnds=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRENDS,overloads:(0,e.declare)(e.SparqlOperator.STRENDS).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],()=>(i,a)=>(0,e.bool)(i.endsWith(a))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(i,a)=>{if(i.language!==a.language)throw new e.IncompatibleLanguageOperation(i,a);return(0,e.bool)(i.typedValue.endsWith(a.typedValue))}).collect()})}};return LA.TermFunctionStrEnds=r,LA}var tpe;function lht(){if(tpe)return CA;tpe=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.ActorFunctionFactoryTermStrEnds=void 0;const t=et(),e=Ye(),r=cht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRENDS],termFunction:!0})}async run(a){return new r.TermFunctionStrEnds}};return CA.ActorFunctionFactoryTermStrEnds=n,CA}var rpe;function dht(){return rpe||(rpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(lht(),t)}(d5)),d5}var f5={},jA={},BA={},npe;function fht(){if(npe)return BA;npe=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.TermFunctionStrLangdir=void 0;const t=et(),e=Ye(),r=Qu();let n=class extends t.TermFunctionBase{constructor(){super({arity:3,operator:e.SparqlOperator.STRLANGDIR,overloads:(0,e.declare)(e.SparqlOperator.STRLANGDIR).onTernaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(a,s,o)=>{if(!s)throw new e.ExpressionError("Unable to create directional language string for empty languages");if(o!=="ltr"&&o!=="rtl")throw new e.ExpressionError(`Unable to create directional language string for direction "${o}"`);return new r.DirLangStringLiteral(a,s.toLowerCase(),o)}).collect()})}};return BA.TermFunctionStrLangdir=n,BA}var ipe;function hht(){if(ipe)return jA;ipe=1,Object.defineProperty(jA,"__esModule",{value:!0}),jA.ActorFunctionFactoryTermStrLangdir=void 0;const t=et(),e=Ye(),r=fht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRLANGDIR],termFunction:!0})}async run(a){return new r.TermFunctionStrLangdir}};return jA.ActorFunctionFactoryTermStrLangdir=n,jA}var ape;function pht(){return ape||(ape=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(hht(),t)}(f5)),f5}var h5={},qA={},UA={},spe;function _ht(){if(spe)return UA;spe=1,Object.defineProperty(UA,"__esModule",{value:!0}),UA.TermFunctionStrLen=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.STRLEN,overloads:(0,e.declare)(e.SparqlOperator.STRLEN).onStringly1(()=>i=>(0,e.integer)([...i.typedValue].length)).collect()})}};return UA.TermFunctionStrLen=r,UA}var ope;function mht(){if(ope)return qA;ope=1,Object.defineProperty(qA,"__esModule",{value:!0}),qA.ActorFunctionFactoryTermStrLen=void 0;const t=et(),e=Ye(),r=_ht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRLEN],termFunction:!0})}async run(a){return new r.TermFunctionStrLen}};return qA.ActorFunctionFactoryTermStrLen=n,qA}var upe;function ght(){return upe||(upe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mht(),t)}(h5)),h5}var p5={},VA={},GA={},cpe;function yht(){if(cpe)return GA;cpe=1,Object.defineProperty(GA,"__esModule",{value:!0}),GA.TermFunctionSha256=void 0;const t=et(),e=Ye(),r=dM();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA256,overloads:(0,e.declare)(e.SparqlOperator.SHA256).onString1Typed(()=>a=>(0,e.string)((0,r.sha256)().update(a).digest("hex"))).collect()})}};return GA.TermFunctionSha256=n,GA}var lpe;function bht(){if(lpe)return VA;lpe=1,Object.defineProperty(VA,"__esModule",{value:!0}),VA.ActorFunctionFactoryTermSha256=void 0;const t=et(),e=Ye(),r=yht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SHA256],termFunction:!0})}async run(a){return new r.TermFunctionSha256}};return VA.ActorFunctionFactoryTermSha256=n,VA}var dpe;function vht(){return dpe||(dpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(bht(),t)}(p5)),p5}var _5={},HA={},kA={},fpe;function Aht(){if(fpe)return kA;fpe=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.TermFunctionStrBefore=void 0;const t=et(),e=Ye(),r=Yu(),n=Rl();let i=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRBEFORE,overloads:(0,e.declare)(e.SparqlOperator.STRBEFORE).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(s,o)=>(0,e.string)(s.slice(0,Math.max(0,s.indexOf(o))))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_STRING],()=>(s,o)=>{const[c,u]=[s.typedValue,o.typedValue],l=s.typedValue.slice(0,Math.max(0,c.indexOf(u)));return l||!u?(0,e.langString)(l,s.language):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(s,o)=>{if(s.language!==o.language)throw new e.IncompatibleLanguageOperation(s,o);const[c,u]=[s.typedValue,o.typedValue],l=s.typedValue.slice(0,Math.max(0,c.indexOf(u)));return l||!u?(0,e.langString)(l,s.language):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.XSD_STRING],()=>(s,o)=>{const[c,u]=[s.typedValue,o.typedValue],l=s.typedValue.slice(0,Math.max(0,c.indexOf(u)));return l||!u?(0,r.dirLangString)(l,s.language,s.direction):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(s,o)=>{if(s.language!==o.language)throw new e.IncompatibleLanguageOperation(s,o);const[c,u]=[s.typedValue,o.typedValue],l=s.typedValue.slice(0,Math.max(0,c.indexOf(u)));return l||!u?(0,r.dirLangString)(l,s.language,s.direction):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.RDF_DIR_LANG_STRING],()=>(s,o)=>{if(s.language!==o.language)throw new e.IncompatibleLanguageOperation(s,o);if(s.direction!==o.direction)throw new n.IncompatibleDirectionalLanguageOperation(s,o);const[c,u]=[s.typedValue,o.typedValue],l=s.typedValue.slice(0,Math.max(0,c.indexOf(u)));return l||!u?(0,r.dirLangString)(l,s.language,s.direction):(0,e.string)(l)}).collect()})}};return kA.TermFunctionStrBefore=i,kA}var hpe;function Tht(){if(hpe)return HA;hpe=1,Object.defineProperty(HA,"__esModule",{value:!0}),HA.ActorFunctionFactoryTermStrBefore=void 0;const t=et(),e=Ye(),r=Aht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRBEFORE],termFunction:!0})}async run(a){return new r.TermFunctionStrBefore}};return HA.ActorFunctionFactoryTermStrBefore=n,HA}var ppe;function wht(){return ppe||(ppe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tht(),t)}(_5)),_5}var m5={},zA={},QA={},_pe;function Sht(){if(_pe)return QA;_pe=1,Object.defineProperty(QA,"__esModule",{value:!0}),QA.TermFunctionStrLang=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRLANG,overloads:(0,e.declare)(e.SparqlOperator.STRLANG).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(i,a)=>{if(!a)throw new e.ExpressionError("Unable to create language string for empty languages");return new e.LangStringLiteral(i,a.toLowerCase())}).collect()})}};return QA.TermFunctionStrLang=r,QA}var mpe;function xht(){if(mpe)return zA;mpe=1,Object.defineProperty(zA,"__esModule",{value:!0}),zA.ActorFunctionFactoryTermStrLang=void 0;const t=et(),e=Ye(),r=Sht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRLANG],termFunction:!0})}async run(a){return new r.TermFunctionStrLang}};return zA.ActorFunctionFactoryTermStrLang=n,zA}var gpe;function Eht(){return gpe||(gpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(xht(),t)}(m5)),m5}var g5={},WA={},KA={},y5={},SP={},ype;function Iht(){return ype||(ype=1,Object.defineProperty(SP,"__esModule",{value:!0}),SP.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),SP}var xP={},bpe;function Oht(){return bpe||(bpe=1,Object.defineProperty(xP,"__esModule",{value:!0}),xP.default="00000000-0000-0000-0000-000000000000"),xP}var EP={},IP={},OP={},vpe;function Rht(){return vpe||(vpe=1,Object.defineProperty(OP,"__esModule",{value:!0}),OP.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),OP}var Ape;function fM(){if(Ape)return IP;Ape=1,Object.defineProperty(IP,"__esModule",{value:!0});const t=Rht();function e(r){return typeof r=="string"&&t.default.test(r)}return IP.default=e,IP}var Tpe;function hM(){if(Tpe)return EP;Tpe=1,Object.defineProperty(EP,"__esModule",{value:!0});const t=fM();function e(r){if(!(0,t.default)(r))throw TypeError("Invalid UUID");let n;return Uint8Array.of((n=parseInt(r.slice(0,8),16))>>>24,n>>>16&255,n>>>8&255,n&255,(n=parseInt(r.slice(9,13),16))>>>8,n&255,(n=parseInt(r.slice(14,18),16))>>>8,n&255,(n=parseInt(r.slice(19,23),16))>>>8,n&255,(n=parseInt(r.slice(24,36),16))/1099511627776&255,n/4294967296&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255)}return EP.default=e,EP}var Fh={},wpe;function Vl(){if(wpe)return Fh;wpe=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.unsafeStringify=void 0;const t=fM(),e=[];for(let i=0;i<256;++i)e.push((i+256).toString(16).slice(1));function r(i,a=0){return(e[i[a+0]]+e[i[a+1]]+e[i[a+2]]+e[i[a+3]]+"-"+e[i[a+4]]+e[i[a+5]]+"-"+e[i[a+6]]+e[i[a+7]]+"-"+e[i[a+8]]+e[i[a+9]]+"-"+e[i[a+10]]+e[i[a+11]]+e[i[a+12]]+e[i[a+13]]+e[i[a+14]]+e[i[a+15]]).toLowerCase()}Fh.unsafeStringify=r;function n(i,a=0){const s=r(i,a);if(!(0,t.default)(s))throw TypeError("Stringified UUID is invalid");return s}return Fh.default=n,Fh}var Mh={},RP={},Spe;function EQ(){if(Spe)return RP;Spe=1,Object.defineProperty(RP,"__esModule",{value:!0});let t;const e=new Uint8Array(16);function r(){if(!t){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(e)}return RP.default=r,RP}var xpe;function cPe(){if(xpe)return Mh;xpe=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.updateV1State=void 0;const t=EQ(),e=Vl(),r={};function n(s,o,c){var d;let u;const l=(s==null?void 0:s._v6)??!1;if(s){const f=Object.keys(s);f.length===1&&f[0]==="_v6"&&(s=void 0)}if(s)u=a(s.random??((d=s.rng)==null?void 0:d.call(s))??(0,t.default)(),s.msecs,s.nsecs,s.clockseq,s.node,o,c);else{const f=Date.now(),h=(0,t.default)();i(r,f,h),u=a(h,r.msecs,r.nsecs,l?void 0:r.clockseq,l?void 0:r.node,o,c)}return o??(0,e.unsafeStringify)(u)}function i(s,o,c){return s.msecs??(s.msecs=-1/0),s.nsecs??(s.nsecs=0),o===s.msecs?(s.nsecs++,s.nsecs>=1e4&&(s.node=void 0,s.nsecs=0)):o>s.msecs?s.nsecs=0:o<s.msecs&&(s.node=void 0),s.node||(s.node=c.slice(10,16),s.node[0]|=1,s.clockseq=(c[8]<<8|c[9])&16383),s.msecs=o,s}Mh.updateV1State=i;function a(s,o,c,u,l,d,f=0){if(s.length<16)throw new Error("Random bytes length must be >= 16");if(!d)d=new Uint8Array(16),f=0;else if(f<0||f+16>d.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);o??(o=Date.now()),c??(c=0),u??(u=(s[8]<<8|s[9])&16383),l??(l=s.slice(10,16)),o+=122192928e5;const h=((o&268435455)*1e4+c)%4294967296;d[f++]=h>>>24&255,d[f++]=h>>>16&255,d[f++]=h>>>8&255,d[f++]=h&255;const p=o/4294967296*1e4&268435455;d[f++]=p>>>8&255,d[f++]=p&255,d[f++]=p>>>24&15|16,d[f++]=p>>>16&255,d[f++]=u>>>8|128,d[f++]=u&255;for(let _=0;_<6;++_)d[f++]=l[_];return d}return Mh.default=n,Mh}var PP={},Epe;function lPe(){if(Epe)return PP;Epe=1,Object.defineProperty(PP,"__esModule",{value:!0});const t=hM(),e=Vl();function r(i){const a=typeof i=="string"?(0,t.default)(i):i,s=n(a);return typeof i=="string"?(0,e.unsafeStringify)(s):s}PP.default=r;function n(i){return Uint8Array.of((i[6]&15)<<4|i[7]>>4&15,(i[7]&15)<<4|(i[4]&240)>>4,(i[4]&15)<<4|(i[5]&240)>>4,(i[5]&15)<<4|(i[0]&240)>>4,(i[0]&15)<<4|(i[1]&240)>>4,(i[1]&15)<<4|(i[2]&240)>>4,96|i[2]&15,i[3],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}return PP}var b5={},NP={},Ipe;function Pht(){if(Ipe)return NP;Ipe=1,Object.defineProperty(NP,"__esModule",{value:!0});function t(f){const h=i(f),p=n(h,f.length*8);return e(p)}function e(f){const h=new Uint8Array(f.length*4);for(let p=0;p<f.length*4;p++)h[p]=f[p>>2]>>>p%4*8&255;return h}function r(f){return(f+64>>>9<<4)+14+1}function n(f,h){const p=new Uint32Array(r(h)).fill(0);p.set(f),p[h>>5]|=128<<h%32,p[p.length-1]=h,f=p;let _=1732584193,g=-271733879,m=-1732584194,y=271733878;for(let v=0;v<f.length;v+=16){const A=_,T=g,S=m,P=y;_=c(_,g,m,y,f[v],7,-680876936),y=c(y,_,g,m,f[v+1],12,-389564586),m=c(m,y,_,g,f[v+2],17,606105819),g=c(g,m,y,_,f[v+3],22,-1044525330),_=c(_,g,m,y,f[v+4],7,-176418897),y=c(y,_,g,m,f[v+5],12,1200080426),m=c(m,y,_,g,f[v+6],17,-1473231341),g=c(g,m,y,_,f[v+7],22,-45705983),_=c(_,g,m,y,f[v+8],7,1770035416),y=c(y,_,g,m,f[v+9],12,-1958414417),m=c(m,y,_,g,f[v+10],17,-42063),g=c(g,m,y,_,f[v+11],22,-1990404162),_=c(_,g,m,y,f[v+12],7,1804603682),y=c(y,_,g,m,f[v+13],12,-40341101),m=c(m,y,_,g,f[v+14],17,-1502002290),g=c(g,m,y,_,f[v+15],22,1236535329),_=u(_,g,m,y,f[v+1],5,-165796510),y=u(y,_,g,m,f[v+6],9,-1069501632),m=u(m,y,_,g,f[v+11],14,643717713),g=u(g,m,y,_,f[v],20,-373897302),_=u(_,g,m,y,f[v+5],5,-701558691),y=u(y,_,g,m,f[v+10],9,38016083),m=u(m,y,_,g,f[v+15],14,-660478335),g=u(g,m,y,_,f[v+4],20,-405537848),_=u(_,g,m,y,f[v+9],5,568446438),y=u(y,_,g,m,f[v+14],9,-1019803690),m=u(m,y,_,g,f[v+3],14,-187363961),g=u(g,m,y,_,f[v+8],20,1163531501),_=u(_,g,m,y,f[v+13],5,-1444681467),y=u(y,_,g,m,f[v+2],9,-51403784),m=u(m,y,_,g,f[v+7],14,1735328473),g=u(g,m,y,_,f[v+12],20,-1926607734),_=l(_,g,m,y,f[v+5],4,-378558),y=l(y,_,g,m,f[v+8],11,-2022574463),m=l(m,y,_,g,f[v+11],16,1839030562),g=l(g,m,y,_,f[v+14],23,-35309556),_=l(_,g,m,y,f[v+1],4,-1530992060),y=l(y,_,g,m,f[v+4],11,1272893353),m=l(m,y,_,g,f[v+7],16,-155497632),g=l(g,m,y,_,f[v+10],23,-1094730640),_=l(_,g,m,y,f[v+13],4,681279174),y=l(y,_,g,m,f[v],11,-358537222),m=l(m,y,_,g,f[v+3],16,-722521979),g=l(g,m,y,_,f[v+6],23,76029189),_=l(_,g,m,y,f[v+9],4,-640364487),y=l(y,_,g,m,f[v+12],11,-421815835),m=l(m,y,_,g,f[v+15],16,530742520),g=l(g,m,y,_,f[v+2],23,-995338651),_=d(_,g,m,y,f[v],6,-198630844),y=d(y,_,g,m,f[v+7],10,1126891415),m=d(m,y,_,g,f[v+14],15,-1416354905),g=d(g,m,y,_,f[v+5],21,-57434055),_=d(_,g,m,y,f[v+12],6,1700485571),y=d(y,_,g,m,f[v+3],10,-1894986606),m=d(m,y,_,g,f[v+10],15,-1051523),g=d(g,m,y,_,f[v+1],21,-2054922799),_=d(_,g,m,y,f[v+8],6,1873313359),y=d(y,_,g,m,f[v+15],10,-30611744),m=d(m,y,_,g,f[v+6],15,-1560198380),g=d(g,m,y,_,f[v+13],21,1309151649),_=d(_,g,m,y,f[v+4],6,-145523070),y=d(y,_,g,m,f[v+11],10,-1120210379),m=d(m,y,_,g,f[v+2],15,718787259),g=d(g,m,y,_,f[v+9],21,-343485551),_=a(_,A),g=a(g,T),m=a(m,S),y=a(y,P)}return Uint32Array.of(_,g,m,y)}function i(f){if(f.length===0)return new Uint32Array;const h=new Uint32Array(r(f.length*8)).fill(0);for(let p=0;p<f.length;p++)h[p>>2]|=(f[p]&255)<<p%4*8;return h}function a(f,h){const p=(f&65535)+(h&65535);return(f>>16)+(h>>16)+(p>>16)<<16|p&65535}function s(f,h){return f<<h|f>>>32-h}function o(f,h,p,_,g,m){return a(s(a(a(h,f),a(_,m)),g),p)}function c(f,h,p,_,g,m,y){return o(h&p|~h&_,f,h,g,m,y)}function u(f,h,p,_,g,m,y){return o(h&_|p&~_,f,h,g,m,y)}function l(f,h,p,_,g,m,y){return o(h^p^_,f,h,g,m,y)}function d(f,h,p,_,g,m,y){return o(p^(h|~_),f,h,g,m,y)}return NP.default=t,NP}var po={},Ope;function QN(){if(Ope)return po;Ope=1,Object.defineProperty(po,"__esModule",{value:!0}),po.URL=po.DNS=po.stringToBytes=void 0;const t=hM(),e=Vl();function r(i){i=unescape(encodeURIComponent(i));const a=new Uint8Array(i.length);for(let s=0;s<i.length;++s)a[s]=i.charCodeAt(s);return a}po.stringToBytes=r,po.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",po.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function n(i,a,s,o,c,u){const l=typeof s=="string"?r(s):s,d=typeof o=="string"?(0,t.default)(o):o;if(typeof o=="string"&&(o=(0,t.default)(o)),(o==null?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+l.length);if(f.set(d),f.set(l,d.length),f=a(f),f[6]=f[6]&15|i,f[8]=f[8]&63|128,c){u=u||0;for(let h=0;h<16;++h)c[u+h]=f[h];return c}return(0,e.unsafeStringify)(f)}return po.default=n,po}var Rpe;function Nht(){return Rpe||(Rpe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const e=Pht(),r=QN();var n=QN();Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return n.URL}});function i(a,s,o,c){return(0,r.default)(48,e.default,a,s,o,c)}i.DNS=r.DNS,i.URL=r.URL,t.default=i}(b5)),b5}var FP={},MP={},Ppe;function Fht(){if(Ppe)return MP;Ppe=1,Object.defineProperty(MP,"__esModule",{value:!0});const t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return MP.default={randomUUID:t},MP}var Npe;function Mht(){if(Npe)return FP;Npe=1,Object.defineProperty(FP,"__esModule",{value:!0});const t=Fht(),e=EQ(),r=Vl();function n(i,a,s){var c;if(t.default.randomUUID&&!a&&!i)return t.default.randomUUID();i=i||{};const o=i.random??((c=i.rng)==null?void 0:c.call(i))??(0,e.default)();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,a){if(s=s||0,s<0||s+16>a.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let u=0;u<16;++u)a[s+u]=o[u];return a}return(0,r.unsafeStringify)(o)}return FP.default=n,FP}var v5={},DP={},Fpe;function Dht(){if(Fpe)return DP;Fpe=1,Object.defineProperty(DP,"__esModule",{value:!0});function t(n,i,a,s){switch(n){case 0:return i&a^~i&s;case 1:return i^a^s;case 2:return i&a^i&s^a&s;case 3:return i^a^s}}function e(n,i){return n<<i|n>>>32-i}function r(n){const i=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520],s=new Uint8Array(n.length+1);s.set(n),s[n.length]=128,n=s;const o=n.length/4+2,c=Math.ceil(o/16),u=new Array(c);for(let l=0;l<c;++l){const d=new Uint32Array(16);for(let f=0;f<16;++f)d[f]=n[l*64+f*4]<<24|n[l*64+f*4+1]<<16|n[l*64+f*4+2]<<8|n[l*64+f*4+3];u[l]=d}u[c-1][14]=(n.length-1)*8/Math.pow(2,32),u[c-1][14]=Math.floor(u[c-1][14]),u[c-1][15]=(n.length-1)*8&4294967295;for(let l=0;l<c;++l){const d=new Uint32Array(80);for(let m=0;m<16;++m)d[m]=u[l][m];for(let m=16;m<80;++m)d[m]=e(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);let f=a[0],h=a[1],p=a[2],_=a[3],g=a[4];for(let m=0;m<80;++m){const y=Math.floor(m/20),v=e(f,5)+t(y,h,p,_)+g+i[y]+d[m]>>>0;g=_,_=p,p=e(h,30)>>>0,h=f,f=v}a[0]=a[0]+f>>>0,a[1]=a[1]+h>>>0,a[2]=a[2]+p>>>0,a[3]=a[3]+_>>>0,a[4]=a[4]+g>>>0}return Uint8Array.of(a[0]>>24,a[0]>>16,a[0]>>8,a[0],a[1]>>24,a[1]>>16,a[1]>>8,a[1],a[2]>>24,a[2]>>16,a[2]>>8,a[2],a[3]>>24,a[3]>>16,a[3]>>8,a[3],a[4]>>24,a[4]>>16,a[4]>>8,a[4])}return DP.default=r,DP}var Mpe;function Cht(){return Mpe||(Mpe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const e=Dht(),r=QN();var n=QN();Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return n.URL}});function i(a,s,o,c){return(0,r.default)(80,e.default,a,s,o,c)}i.DNS=r.DNS,i.URL=r.URL,t.default=i}(v5)),v5}var CP={},Dpe;function Lht(){if(Dpe)return CP;Dpe=1,Object.defineProperty(CP,"__esModule",{value:!0});const t=Vl(),e=cPe(),r=lPe();function n(i,a,s){i??(i={}),s??(s=0);let o=(0,e.default)({...i,_v6:!0},new Uint8Array(16));if(o=(0,r.default)(o),a){for(let c=0;c<16;c++)a[s+c]=o[c];return a}return(0,t.unsafeStringify)(o)}return CP.default=n,CP}var LP={},Cpe;function jht(){if(Cpe)return LP;Cpe=1,Object.defineProperty(LP,"__esModule",{value:!0});const t=hM(),e=Vl();function r(i){const a=typeof i=="string"?(0,t.default)(i):i,s=n(a);return typeof i=="string"?(0,e.unsafeStringify)(s):s}LP.default=r;function n(i){return Uint8Array.of((i[3]&15)<<4|i[4]>>4&15,(i[4]&15)<<4|(i[5]&240)>>4,(i[5]&15)<<4|i[6]&15,i[7],(i[1]&15)<<4|(i[2]&240)>>4,(i[2]&15)<<4|(i[3]&240)>>4,16|(i[0]&240)>>4,(i[0]&15)<<4|(i[1]&240)>>4,i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}return LP}var Dh={},Lpe;function Bht(){if(Lpe)return Dh;Lpe=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.updateV7State=void 0;const t=EQ(),e=Vl(),r={};function n(s,o,c){var l;let u;if(s)u=a(s.random??((l=s.rng)==null?void 0:l.call(s))??(0,t.default)(),s.msecs,s.seq,o,c);else{const d=Date.now(),f=(0,t.default)();i(r,d,f),u=a(f,r.msecs,r.seq,o,c)}return o??(0,e.unsafeStringify)(u)}function i(s,o,c){return s.msecs??(s.msecs=-1/0),s.seq??(s.seq=0),o>s.msecs?(s.seq=c[6]<<23|c[7]<<16|c[8]<<8|c[9],s.msecs=o):(s.seq=s.seq+1|0,s.seq===0&&s.msecs++),s}Dh.updateV7State=i;function a(s,o,c,u,l=0){if(s.length<16)throw new Error("Random bytes length must be >= 16");if(!u)u=new Uint8Array(16),l=0;else if(l<0||l+16>u.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);return o??(o=Date.now()),c??(c=s[6]*127<<24|s[7]<<16|s[8]<<8|s[9]),u[l++]=o/1099511627776&255,u[l++]=o/4294967296&255,u[l++]=o/16777216&255,u[l++]=o/65536&255,u[l++]=o/256&255,u[l++]=o&255,u[l++]=112|c>>>28&15,u[l++]=c>>>20&255,u[l++]=128|c>>>14&63,u[l++]=c>>>6&255,u[l++]=c<<2&255|s[10]&3,u[l++]=s[11],u[l++]=s[12],u[l++]=s[13],u[l++]=s[14],u[l++]=s[15],u}return Dh.default=n,Dh}var jP={},jpe;function qht(){if(jpe)return jP;jpe=1,Object.defineProperty(jP,"__esModule",{value:!0});const t=fM();function e(r){if(!(0,t.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}return jP.default=e,jP}var Bpe;function dPe(){return Bpe||(Bpe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.validate=t.v7=t.v6ToV1=t.v6=t.v5=t.v4=t.v3=t.v1ToV6=t.v1=t.stringify=t.parse=t.NIL=t.MAX=void 0;var e=Iht();Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return e.default}});var r=Oht();Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return r.default}});var n=hM();Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return n.default}});var i=Vl();Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.default}});var a=cPe();Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return a.default}});var s=lPe();Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return s.default}});var o=Nht();Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}});var c=Mht();Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return c.default}});var u=Cht();Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return u.default}});var l=Lht();Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return l.default}});var d=jht();Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return d.default}});var f=Bht();Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return f.default}});var h=fM();Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return h.default}});var p=qht();Object.defineProperty(t,"version",{enumerable:!0,get:function(){return p.default}})}(y5)),y5}var qpe;function Uht(){if(qpe)return KA;qpe=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.TermFunctionStrUuid=void 0;const t=et(),e=Ye(),r=dPe();let n=class extends t.TermFunctionBase{constructor(){super({arity:0,operator:e.SparqlOperator.STRUUID,overloads:(0,e.declare)(e.SparqlOperator.STRUUID).set([],()=>()=>(0,e.string)(r.v4())).collect()})}};return KA.TermFunctionStrUuid=n,KA}var Upe;function Vht(){if(Upe)return WA;Upe=1,Object.defineProperty(WA,"__esModule",{value:!0}),WA.ActorFunctionFactoryTermStrUuid=void 0;const t=et(),e=Ye(),r=Uht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRUUID],termFunction:!0})}async run(a){return new r.TermFunctionStrUuid}};return WA.ActorFunctionFactoryTermStrUuid=n,WA}var Vpe;function Ght(){return Vpe||(Vpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vht(),t)}(g5)),g5}var A5={},XA={},JA={},Gpe;function Hht(){if(Gpe)return JA;Gpe=1,Object.defineProperty(JA,"__esModule",{value:!0}),JA.TermFunctionStr=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.STR,overloads:(0,e.declare)(e.SparqlOperator.STR).onTerm1(()=>i=>(0,e.string)(i.str())).collect()})}};return JA.TermFunctionStr=r,JA}var Hpe;function kht(){if(Hpe)return XA;Hpe=1,Object.defineProperty(XA,"__esModule",{value:!0}),XA.ActorFunctionFactoryTermStr=void 0;const t=et(),e=Ye(),r=Hht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STR],termFunction:!0})}async run(a){return new r.TermFunctionStr}};return XA.ActorFunctionFactoryTermStr=n,XA}var kpe;function zht(){return kpe||(kpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(kht(),t)}(A5)),A5}var T5={},YA={},$A={},zpe;function Qht(){if(zpe)return $A;zpe=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.TermFunctionSubject=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SUBJECT,overloads:(0,e.declare)(e.SparqlOperator.SUBJECT).onQuad1(()=>i=>i.subject).collect()})}};return $A.TermFunctionSubject=r,$A}var Qpe;function Wht(){if(Qpe)return YA;Qpe=1,Object.defineProperty(YA,"__esModule",{value:!0}),YA.ActorFunctionFactoryTermSubject=void 0;const t=et(),e=Ye(),r=Qht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SUBJECT],termFunction:!0})}async run(a){return new r.TermFunctionSubject}};return YA.ActorFunctionFactoryTermSubject=n,YA}var Wpe;function Kht(){return Wpe||(Wpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wht(),t)}(T5)),T5}var w5={},ZA={},e1={},Kpe;function Xht(){if(Kpe)return e1;Kpe=1,Object.defineProperty(e1,"__esModule",{value:!0}),e1.TermFunctionStrStarts=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRSTARTS,overloads:(0,e.declare)(e.SparqlOperator.STRSTARTS).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],()=>(i,a)=>(0,e.bool)(i.startsWith(a))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(i,a)=>{if(i.language!==a.language)throw new e.IncompatibleLanguageOperation(i,a);return(0,e.bool)(i.typedValue.startsWith(a.typedValue))}).collect()})}};return e1.TermFunctionStrStarts=r,e1}var Xpe;function Jht(){if(Xpe)return ZA;Xpe=1,Object.defineProperty(ZA,"__esModule",{value:!0}),ZA.ActorFunctionFactoryTermStrStarts=void 0;const t=et(),e=Ye(),r=Xht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.STRSTARTS],termFunction:!0})}async run(a){return new r.TermFunctionStrStarts}};return ZA.ActorFunctionFactoryTermStrStarts=n,ZA}var Jpe;function Yht(){return Jpe||(Jpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jht(),t)}(w5)),w5}var S5={},t1={},r1={},Ype;function $ht(){if(Ype)return r1;Ype=1,Object.defineProperty(r1,"__esModule",{value:!0}),r1.TermFunctionSubStr=void 0;const t=et(),e=Ye(),r=Yu();let n=class extends t.TermFunctionBase{constructor(){super({arity:[2,3],operator:e.SparqlOperator.SUBSTR,overloads:(0,e.declare)(e.SparqlOperator.SUBSTR).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_INTEGER],()=>(a,s)=>(0,e.string)([...a].slice(s-1).join(""))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_INTEGER],()=>(a,s)=>{const o=[...a.typedValue].slice(s.typedValue-1).join("");return(0,e.langString)(o,a.language)}).onBinary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.XSD_INTEGER],()=>(a,s)=>{const o=[...a.typedValue].slice(s.typedValue-1).join("");return(0,r.dirLangString)(o,a.language,a.direction)}).onTernaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_INTEGER,e.TypeURL.XSD_INTEGER],()=>(a,s,o)=>(0,e.string)([...a].slice(s-1,o+s-1).join(""))).onTernary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_INTEGER,e.TypeURL.XSD_INTEGER],()=>(a,s,o)=>{const c=[...a.typedValue].slice(s.typedValue-1,o.typedValue+s.typedValue-1).join("");return(0,e.langString)(c,a.language)}).onTernary([e.TypeURL.RDF_DIR_LANG_STRING,e.TypeURL.XSD_INTEGER,e.TypeURL.XSD_INTEGER],()=>(a,s,o)=>{const c=[...a.typedValue].slice(s.typedValue-1,o.typedValue+s.typedValue-1).join("");return(0,r.dirLangString)(c,a.language,a.direction)}).collect()})}};return r1.TermFunctionSubStr=n,r1}var $pe;function Zht(){if($pe)return t1;$pe=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.ActorFunctionFactoryTermSubStr=void 0;const t=et(),e=Ye(),r=$ht();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SUBSTR],termFunction:!0})}async run(a){return new r.TermFunctionSubStr}};return t1.ActorFunctionFactoryTermSubStr=n,t1}var Zpe;function ept(){return Zpe||(Zpe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zht(),t)}(S5)),S5}var x5={},n1={},i1={},e0e;function tpt(){if(e0e)return i1;e0e=1,Object.defineProperty(i1,"__esModule",{value:!0}),i1.TermFunctionTimezone=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.TIMEZONE,overloads:(0,e.declare)(e.SparqlOperator.TIMEZONE).onDateTime1(()=>i=>{const a={hours:i.typedValue.zoneHours,minutes:i.typedValue.zoneMinutes};if(a.hours===void 0&&a.minutes===void 0)throw new e.InvalidTimezoneCall(i.str());return new e.DayTimeDurationLiteral(a)}).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_DATE]}).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_TIME]}).collect()})}};return i1.TermFunctionTimezone=r,i1}var t0e;function rpt(){if(t0e)return n1;t0e=1,Object.defineProperty(n1,"__esModule",{value:!0}),n1.ActorFunctionFactoryTermTimezone=void 0;const t=et(),e=Ye(),r=tpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.TIMEZONE],termFunction:!0})}async run(a){return new r.TermFunctionTimezone}};return n1.ActorFunctionFactoryTermTimezone=n,n1}var r0e;function npt(){return r0e||(r0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(rpt(),t)}(x5)),x5}var E5={},a1={},s1={},n0e;function ipt(){if(n0e)return s1;n0e=1,Object.defineProperty(s1,"__esModule",{value:!0}),s1.TermFunctionSubtraction=void 0;const t=et(),e=dt,r=Ye(),n=lM();let i=class extends t.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.SUBTRACTION,overloads:(0,r.declare)(r.SparqlOperator.SUBTRACTION).arithmetic(()=>(s,o)=>new n.BigNumber(s).minus(o).toNumber()).set([r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],s=>([o,c])=>new r.DayTimeDurationLiteral((0,r.elapsedDuration)(o.typedValue,c.typedValue,s.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DATE]}).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_TIME,r.TypeURL.XSD_TIME]}).set([r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([s,o])=>new r.DateTimeLiteral((0,r.addDurationToDateTime)(s.typedValue,(0,r.defaultedDurationRepresentation)((0,r.negateDuration)(o.typedValue))))).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([s,o])=>new r.DateLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(s.typedValue),(0,r.defaultedDurationRepresentation)((0,r.negateDuration)(o.typedValue))))).copy({from:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([s,o])=>new r.TimeLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(s.typedValue),(0,r.defaultedDurationRepresentation)((0,r.negateDuration)(o.typedValue))))).collect()})}};return s1.TermFunctionSubtraction=i,s1}var i0e;function apt(){if(i0e)return a1;i0e=1,Object.defineProperty(a1,"__esModule",{value:!0}),a1.ActorFunctionFactoryTermSubtraction=void 0;const t=et(),e=Ye(),r=ipt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(a){return new r.TermFunctionSubtraction}};return a1.ActorFunctionFactoryTermSubtraction=n,a1}var a0e;function spt(){return a0e||(a0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(apt(),t)}(E5)),E5}var I5={},o1={},u1={},s0e;function opt(){if(s0e)return u1;s0e=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.TermFunctionTriple=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:3,operator:e.SparqlOperator.TRIPLE,overloads:(0,e.declare)(e.SparqlOperator.TRIPLE).onTerm3(i=>(...a)=>new e.Quad(a[0],a[1],a[2],new e.DefaultGraph)).collect()})}};return u1.TermFunctionTriple=r,u1}var o0e;function upt(){if(o0e)return o1;o0e=1,Object.defineProperty(o1,"__esModule",{value:!0}),o1.ActorFunctionFactoryTermTriple=void 0;const t=et(),e=Ye(),r=opt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.TRIPLE],termFunction:!0})}async run(a){return new r.TermFunctionTriple}};return o1.ActorFunctionFactoryTermTriple=n,o1}var u0e;function cpt(){return u0e||(u0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(upt(),t)}(I5)),I5}var O5={},c1={},l1={},c0e;function lpt(){if(c0e)return l1;c0e=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.TermFunctionUnaryMinus=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.UMINUS,overloads:(0,e.declare)(e.SparqlOperator.UMINUS).numericConverter(()=>i=>-i).collect()})}};return l1.TermFunctionUnaryMinus=r,l1}var l0e;function dpt(){if(l0e)return c1;l0e=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.ActorFunctionFactoryTermUnaryMinus=void 0;const t=et(),e=Ye(),r=lpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.UMINUS],termFunction:!0})}async run(a){return new r.TermFunctionUnaryMinus}};return c1.ActorFunctionFactoryTermUnaryMinus=n,c1}var d0e;function fpt(){return d0e||(d0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(dpt(),t)}(O5)),O5}var R5={},d1={},f1={},f0e;function hpt(){if(f0e)return f1;f0e=1,Object.defineProperty(f1,"__esModule",{value:!0}),f1.TermFunctionUnaryPlus=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.UPLUS,overloads:(0,e.declare)(e.SparqlOperator.UPLUS).numericConverter(()=>i=>i).collect()})}};return f1.TermFunctionUnaryPlus=r,f1}var h0e;function ppt(){if(h0e)return d1;h0e=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.ActorFunctionFactoryTermUnaryPlus=void 0;const t=et(),e=Ye(),r=hpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.UPLUS],termFunction:!0})}async run(a){return new r.TermFunctionUnaryPlus}};return d1.ActorFunctionFactoryTermUnaryPlus=n,d1}var p0e;function _pt(){return p0e||(p0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ppt(),t)}(R5)),R5}var P5={},h1={},p1={},_0e;function mpt(){if(_0e)return p1;_0e=1,Object.defineProperty(p1,"__esModule",{value:!0}),p1.TermFunctionUuid=void 0;const t=et(),e=Ye(),r=dPe();let n=class extends t.TermFunctionBase{constructor(){super({arity:0,operator:e.SparqlOperator.UUID,overloads:(0,e.declare)(e.SparqlOperator.UUID).set([],()=>()=>new e.NamedNode(`urn:uuid:${r.v4()}`)).collect()})}};return p1.TermFunctionUuid=n,p1}var m0e;function gpt(){if(m0e)return h1;m0e=1,Object.defineProperty(h1,"__esModule",{value:!0}),h1.ActorFunctionFactoryTermUuid=void 0;const t=et(),e=Ye(),r=mpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.UUID],termFunction:!0})}async run(a){return new r.TermFunctionUuid}};return h1.ActorFunctionFactoryTermUuid=n,h1}var g0e;function ypt(){return g0e||(g0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(gpt(),t)}(P5)),P5}var N5={},_1={},m1={},y0e;function bpt(){if(y0e)return m1;y0e=1,Object.defineProperty(m1,"__esModule",{value:!0}),m1.TermFunctionXsdToBoolean=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_BOOLEAN,overloads:(0,e.declare)(e.TypeURL.XSD_BOOLEAN).onNumeric1(()=>i=>(0,e.bool)(i.coerceEBV()),!0).onUnary(e.TypeURL.XSD_BOOLEAN,()=>i=>(0,e.bool)(i.coerceEBV()),!0).onUnary(e.TypeURL.XSD_STRING,()=>i=>{switch(i.str()){case"true":return(0,e.bool)(!0);case"false":return(0,e.bool)(!1);case"1":return(0,e.bool)(!0);case"0":return(0,e.bool)(!1);default:throw new e.CastError(i,e.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return m1.TermFunctionXsdToBoolean=r,m1}var b0e;function vpt(){if(b0e)return _1;b0e=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.ActorFunctionFactoryTermXsdToBoolean=void 0;const t=et(),e=Ye(),r=bpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(a){return new r.TermFunctionXsdToBoolean}};return _1.ActorFunctionFactoryTermXsdToBoolean=n,_1}var v0e;function Apt(){return v0e||(v0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vpt(),t)}(N5)),N5}var F5={},g1={},y1={},A0e;function Tpt(){if(A0e)return y1;A0e=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.TermFunctionXsdToDate=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DATE,overloads:(0,e.declare)(e.TypeURL.XSD_DATE).onUnary(e.TypeURL.XSD_DATE,()=>i=>new e.DateLiteral(i.typedValue,i.strValue)).onUnary(e.TypeURL.XSD_DATE_TIME,()=>i=>new e.DateLiteral(i.typedValue)).onStringly1(()=>i=>new e.DateLiteral((0,e.parseDate)(i.str()))).collect()})}};return y1.TermFunctionXsdToDate=r,y1}var T0e;function wpt(){if(T0e)return g1;T0e=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.ActorFunctionFactoryTermXsdToDate=void 0;const t=et(),e=Ye(),r=Tpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_DATE],termFunction:!0})}async run(a){return new r.TermFunctionXsdToDate}};return g1.ActorFunctionFactoryTermXsdToDate=n,g1}var w0e;function Spt(){return w0e||(w0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(wpt(),t)}(F5)),F5}var M5={},b1={},v1={},S0e;function xpt(){if(S0e)return v1;S0e=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.TermFunctionXsdToDatetime=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DATE_TIME,overloads:(0,e.declare)(e.TypeURL.XSD_DATE_TIME).onUnary(e.TypeURL.XSD_DATE_TIME,()=>i=>i).onUnary(e.TypeURL.XSD_STRING,()=>i=>(0,e.dateTime)((0,e.parseDateTime)(i.str()),i.str()),!1).onUnary(e.TypeURL.XSD_DATE,()=>i=>new e.DateTimeLiteral({...i.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return v1.TermFunctionXsdToDatetime=r,v1}var x0e;function Ept(){if(x0e)return b1;x0e=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.ActorFunctionFactoryTermXsdToDatetime=void 0;const t=et(),e=Ye(),r=xpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(a){return new r.TermFunctionXsdToDatetime}};return b1.ActorFunctionFactoryTermXsdToDatetime=n,b1}var E0e;function Ipt(){return E0e||(E0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ept(),t)}(M5)),M5}var D5={},A1={},T1={},I0e;function Opt(){if(I0e)return T1;I0e=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.TermFunctionTz=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.TZ,overloads:(0,e.declare)(e.SparqlOperator.TZ).onDateTime1(()=>i=>(0,e.string)((0,e.extractRawTimeZone)(i.str()))).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_DATE]}).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_TIME]}).collect()})}};return T1.TermFunctionTz=r,T1}var O0e;function Rpt(){if(O0e)return A1;O0e=1,Object.defineProperty(A1,"__esModule",{value:!0}),A1.ActorFunctionFactoryTermTz=void 0;const t=et(),e=Ye(),r=Opt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.TZ],termFunction:!0})}async run(a){return new r.TermFunctionTz}};return A1.ActorFunctionFactoryTermTz=n,A1}var R0e;function Ppt(){return R0e||(R0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rpt(),t)}(D5)),D5}var C5={},w1={},S1={},P0e;function Npt(){if(P0e)return S1;P0e=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.TermFunctionXsdToDayTimeDuration=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,e.declare)(e.TypeURL.XSD_DAY_TIME_DURATION).onUnary(e.TypeURL.XSD_DURATION,()=>i=>new e.DayTimeDurationLiteral((0,e.trimToDayTimeDuration)(i.typedValue))).onStringly1(()=>i=>new e.DayTimeDurationLiteral((0,e.parseDayTimeDuration)(i.str()))).collect()})}};return S1.TermFunctionXsdToDayTimeDuration=r,S1}var N0e;function Fpt(){if(N0e)return w1;N0e=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const t=et(),e=Ye(),r=Npt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(a){return new r.TermFunctionXsdToDayTimeDuration}};return w1.ActorFunctionFactoryTermXsdToDayTimeDuration=n,w1}var F0e;function Mpt(){return F0e||(F0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fpt(),t)}(C5)),C5}var L5={},x1={},E1={},M0e;function Dpt(){if(M0e)return E1;M0e=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.TermFunctionXsdToDecimal=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DECIMAL,overloads:(0,e.declare)(e.TypeURL.XSD_DECIMAL).onNumeric1(()=>i=>{const a=(0,e.parseXSDDecimal)(i.str());if(a===void 0)throw new e.CastError(i,e.TypeURL.XSD_DECIMAL);return(0,e.decimal)(a)}).onString1(()=>i=>{const a=i.str(),s=/^([+-])?(\d+(\.\d+)?)$/u.test(a)?(0,e.parseXSDDecimal)(a):void 0;if(s===void 0)throw new e.CastError(i,e.TypeURL.XSD_DECIMAL);return(0,e.decimal)(s)},!1).onBoolean1Typed(()=>i=>(0,e.decimal)(i?1:0)).collect()})}};return E1.TermFunctionXsdToDecimal=r,E1}var D0e;function Cpt(){if(D0e)return x1;D0e=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.ActorFunctionFactoryTermXsdToDecimal=void 0;const t=et(),e=Ye(),r=Dpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(a){return new r.TermFunctionXsdToDecimal}};return x1.ActorFunctionFactoryTermXsdToDecimal=n,x1}var C0e;function Lpt(){return C0e||(C0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Cpt(),t)}(L5)),L5}var j5={},I1={},O1={},L0e;function jpt(){if(L0e)return O1;L0e=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.TermFunctionUcase=void 0;const t=et(),e=Ye(),r=Yu();let n=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.UCASE,overloads:(0,e.declare)(e.SparqlOperator.UCASE).onString1Typed(()=>a=>(0,e.string)(a.toUpperCase())).onLangString1(()=>a=>(0,e.langString)(a.typedValue.toUpperCase(),a.language)).onDirLangString1(()=>a=>(0,r.dirLangString)(a.typedValue.toUpperCase(),a.language,a.direction)).collect()})}};return O1.TermFunctionUcase=n,O1}var j0e;function Bpt(){if(j0e)return I1;j0e=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.ActorFunctionFactoryTermUcase=void 0;const t=et(),e=Ye(),r=jpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.UCASE],termFunction:!0})}async run(a){return new r.TermFunctionUcase}};return I1.ActorFunctionFactoryTermUcase=n,I1}var B0e;function qpt(){return B0e||(B0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Bpt(),t)}(j5)),j5}var B5={},R1={},P1={},q0e;function Upt(){if(q0e)return P1;q0e=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.TermFunctionXsdToDuration=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,e.declare)(e.TypeURL.XSD_DURATION).onUnary(e.TypeURL.XSD_DURATION,()=>i=>new e.DurationLiteral(i.typedValue,i.strValue)).onStringly1(()=>i=>new e.DurationLiteral((0,e.parseDuration)(i.str()))).collect()})}};return P1.TermFunctionXsdToDuration=r,P1}var U0e;function Vpt(){if(U0e)return R1;U0e=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.ActorFunctionFactoryTermXsdToDuration=void 0;const t=et(),e=Ye(),r=Upt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_DURATION],termFunction:!0})}async run(a){return new r.TermFunctionXsdToDuration}};return R1.ActorFunctionFactoryTermXsdToDuration=n,R1}var V0e;function Gpt(){return V0e||(V0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vpt(),t)}(B5)),B5}var q5={},N1={},F1={},G0e;function Hpt(){if(G0e)return F1;G0e=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.TermFunctionXsdToFloat=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_FLOAT,overloads:(0,e.declare)(e.TypeURL.XSD_FLOAT).onNumeric1(()=>i=>(0,e.float)(i.typedValue)).onBoolean1Typed(()=>i=>(0,e.float)(i?1:0)).onUnary(e.TypeURL.XSD_STRING,()=>i=>{const a=(0,e.parseXSDFloat)(i.str());if(a===void 0)throw new e.CastError(i,e.TypeURL.XSD_FLOAT);return(0,e.float)(a)},!1).collect()})}};return F1.TermFunctionXsdToFloat=r,F1}var H0e;function kpt(){if(H0e)return N1;H0e=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.ActorFunctionFactoryTermXsdToFloat=void 0;const t=et(),e=Ye(),r=Hpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_FLOAT],termFunction:!0})}async run(a){return new r.TermFunctionXsdToFloat}};return N1.ActorFunctionFactoryTermXsdToFloat=n,N1}var k0e;function zpt(){return k0e||(k0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(kpt(),t)}(q5)),q5}var U5={},M1={},D1={},z0e;function Qpt(){if(z0e)return D1;z0e=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.TermFunctionXsdToDouble=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DOUBLE,overloads:(0,e.declare)(e.TypeURL.XSD_DOUBLE).onNumeric1(()=>i=>(0,e.double)(i.typedValue)).onBoolean1Typed(()=>i=>(0,e.double)(i?1:0)).onUnary(e.TypeURL.XSD_STRING,()=>i=>{const a=(0,e.parseXSDFloat)(i.str());if(a===void 0)throw new e.CastError(i,e.TypeURL.XSD_DOUBLE);return(0,e.double)(a)},!1).collect()})}};return D1.TermFunctionXsdToDouble=r,D1}var Q0e;function Wpt(){if(Q0e)return M1;Q0e=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.ActorFunctionFactoryTermXsdToDouble=void 0;const t=et(),e=Ye(),r=Qpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(a){return new r.TermFunctionXsdToDouble}};return M1.ActorFunctionFactoryTermXsdToDouble=n,M1}var W0e;function Kpt(){return W0e||(W0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wpt(),t)}(U5)),U5}var V5={},C1={},L1={},K0e;function Xpt(){if(K0e)return L1;K0e=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.TermFunctionXsdToInteger=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_INTEGER,overloads:(0,e.declare)(e.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>i=>(0,e.integer)(i?1:0)).onNumeric1(()=>i=>{if(!Number.isFinite(i.typedValue))throw new e.CastError(i,e.TypeURL.XSD_INTEGER);return(0,e.integer)(Math.trunc(i.typedValue))}).onString1(()=>i=>{const a=i.str(),s=/^\d+$/u.test(a)?Number.parseInt(a,10):void 0;if(s===void 0)throw new e.CastError(i,e.TypeURL.XSD_INTEGER);return(0,e.integer)(s)}).collect()})}};return L1.TermFunctionXsdToInteger=r,L1}var X0e;function Jpt(){if(X0e)return C1;X0e=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.ActorFunctionFactoryTermXsdToInteger=void 0;const t=et(),e=Ye(),r=Xpt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_INTEGER],termFunction:!0})}async run(a){return new r.TermFunctionXsdToInteger}};return C1.ActorFunctionFactoryTermXsdToInteger=n,C1}var J0e;function Ypt(){return J0e||(J0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jpt(),t)}(V5)),V5}var G5={},j1={},B1={},Y0e;function $pt(){if(Y0e)return B1;Y0e=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.TermFunctionXsdToString=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_STRING,overloads:(0,e.declare)(e.TypeURL.XSD_STRING).onNumeric1(()=>i=>(0,e.string)((0,e.float)(i.typedValue).str())).onBoolean1Typed(()=>i=>(0,e.string)((0,e.bool)(i).str())).onTerm1(()=>i=>(0,e.string)(i.str())).collect()})}};return B1.TermFunctionXsdToString=r,B1}var $0e;function Zpt(){if($0e)return j1;$0e=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.ActorFunctionFactoryTermXsdToString=void 0;const t=et(),e=Ye(),r=$pt();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_STRING],termFunction:!0})}async run(a){return new r.TermFunctionXsdToString}};return j1.ActorFunctionFactoryTermXsdToString=n,j1}var Z0e;function e0t(){return Z0e||(Z0e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zpt(),t)}(G5)),G5}var H5={},q1={},U1={},e_e;function t0t(){if(e_e)return U1;e_e=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.TermFunctionXsdToYearMonthDuration=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,e.declare)(e.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(e.TypeURL.XSD_DURATION,()=>i=>new e.YearMonthDurationLiteral((0,e.trimToYearMonthDuration)(i.typedValue))).onStringly1(()=>i=>new e.YearMonthDurationLiteral((0,e.parseYearMonthDuration)(i.str()))).collect()})}};return U1.TermFunctionXsdToYearMonthDuration=r,U1}var t_e;function r0t(){if(t_e)return q1;t_e=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const t=et(),e=Ye(),r=t0t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(a){return new r.TermFunctionXsdToYearMonthDuration}};return q1.ActorFunctionFactoryTermXsdToYearMonthDuration=n,q1}var r_e;function n0t(){return r_e||(r_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(r0t(),t)}(H5)),H5}var k5={},V1={},G1={},n_e;function i0t(){if(n_e)return G1;n_e=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.TermFunctionXsdToTime=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_TIME,overloads:(0,e.declare)(e.TypeURL.XSD_TIME).onUnary(e.TypeURL.XSD_TIME,()=>i=>new e.TimeLiteral(i.typedValue,i.strValue)).onUnary(e.TypeURL.XSD_DATE_TIME,()=>i=>new e.TimeLiteral(i.typedValue)).onStringly1(()=>i=>new e.TimeLiteral((0,e.parseTime)(i.str()))).collect()})}};return G1.TermFunctionXsdToTime=r,G1}var i_e;function a0t(){if(i_e)return V1;i_e=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.ActorFunctionFactoryTermXsdToTime=void 0;const t=et(),e=Ye(),r=i0t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.TypeURL.XSD_TIME],termFunction:!0})}async run(a){return new r.TermFunctionXsdToTime}};return V1.ActorFunctionFactoryTermXsdToTime=n,V1}var a_e;function s0t(){return a_e||(a_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(a0t(),t)}(k5)),k5}var z5={},H1={},k1={},s_e;function o0t(){if(s_e)return k1;s_e=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.TermFunctionYear=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.YEAR,overloads:(0,e.declare)(e.SparqlOperator.YEAR).onDateTime1(()=>i=>(0,e.integer)(i.typedValue.year)).set([e.TypeURL.XSD_DATE],()=>([i])=>(0,e.integer)(i.typedValue.year)).collect()})}};return k1.TermFunctionYear=r,k1}var o_e;function u0t(){if(o_e)return H1;o_e=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.ActorFunctionFactoryTermYear=void 0;const t=et(),e=Ye(),r=o0t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(a){super({...a,functionNames:[e.SparqlOperator.YEAR],termFunction:!0})}async run(a){return new r.TermFunctionYear}};return H1.ActorFunctionFactoryTermYear=n,H1}var u_e;function c0t(){return u_e||(u_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(u0t(),t)}(z5)),z5}var Q5={},z1={},c_e;function l0t(){if(c_e)return z1;c_e=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.ActorQueryOperationSource=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=Mi(),a=rr();let s=class extends t.ActorQueryOperation{constructor(c){super(c)}async test(c){return(0,a.getOperationSource)(c.operation)?(0,r.passTest)({httpRequests:1}):(0,r.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(c){const u=c.context.get(e.KeysInitQuery.physicalQueryPlanLogger);u&&(u.logOperation(c.operation.type,void 0,c.operation,c.context.get(e.KeysInitQuery.physicalQueryPlanNode),this.name,{}),c.context=c.context.set(e.KeysInitQuery.physicalQueryPlanNode,c.operation));const l=(0,a.getOperationSource)(c.operation),d=l.context?c.context.merge(l.context):c.context;let f=!1;if(n.algebraUtils.visitOperation(c.operation,{[n.Algebra.Types.CONSTRUCT]:{preVisitor:()=>(f=!0,{shortcut:!0})}}),f){const _=l.source.queryQuads(c.operation,d),g=(0,i.getMetadataQuads)(_);return{type:"quads",quadStream:_,metadata:g}}switch(c.operation.type){case n.Algebra.Types.ASK:return{type:"boolean",execute:()=>l.source.queryBoolean(c.operation,d)};case n.Algebra.Types.COMPOSITE_UPDATE:case n.Algebra.Types.DELETE_INSERT:case n.Algebra.Types.LOAD:case n.Algebra.Types.CLEAR:case n.Algebra.Types.CREATE:case n.Algebra.Types.DROP:case n.Algebra.Types.ADD:case n.Algebra.Types.MOVE:case n.Algebra.Types.COPY:return{type:"void",execute:()=>l.source.queryVoid(c.operation,d)}}const h=l.source.queryBindings(c.operation,d),p=(0,i.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:p}}};return z1.ActorQueryOperationSource=s,z1}var l_e;function d0t(){return l_e||(l_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(l0t(),t)}(Q5)),Q5}var W5={},Q1={},d_e;function f0t(){if(d_e)return Q1;d_e=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.MediatorJoinCoefficientsFixed=void 0;const t=dt,e=ke();let r=class extends e.Mediator{constructor(a){super(a);k(this,"cpuWeight");k(this,"memoryWeight");k(this,"timeWeight");k(this,"ioWeight");this.cpuWeight=a.cpuWeight,this.memoryWeight=a.memoryWeight,this.timeWeight=a.timeWeight,this.ioWeight=a.ioWeight}async mediateWith(a,s){var g;const o=[],c=s.map(({reply:m})=>m),u=(await Promise.all(c)).map(m=>{if(m.isFailed()){o.push(m.getFailMessage());return}return{value:m.get(),sideData:m.getSideData()}});let l=u.map(m=>{if(m)return m.value.iterations*this.cpuWeight+m.value.persistedItems*this.memoryWeight+m.value.blockingItems*this.timeWeight+m.value.requestTime*this.ioWeight});const d=Math.max(...l.filter(m=>m!==void 0)),f=a.context.get(t.KeysQueryOperation.limitIndicator);f&&(l=l.map((m,y)=>{var v,A;return m!==void 0&&((v=u[y])==null?void 0:v.value).blockingItems>0&&((A=u[y])==null?void 0:A.value).iterations>f?m+d:m}));let h=-1,p=Number.POSITIVE_INFINITY;for(const[m,y]of l.entries())y!==void 0&&(h===-1||y<p)&&(h=m,p=y);if(h<0)return(0,e.failTest)(this.constructFailureMessage(a,o));const _=s[h].actor;return _.includeInLogs&&((g=e.Actor.getContextLogger(a.context))==null||g.debug(`Determined physical join operator '${_.logicalType}-${_.physicalName}'`,{entries:a.entries.length,variables:await Promise.all(a.entries.map(async m=>(await m.output.metadata()).variables.map(y=>y.variable.value))),costs:Object.fromEntries(l.map((m,y)=>[`${s[y].actor.logicalType}-${s[y].actor.physicalName}`,m]).filter(m=>m[1]!==void 0)),coefficients:Object.fromEntries(u.map((m,y)=>[`${s[y].actor.logicalType}-${s[y].actor.physicalName}`,m==null?void 0:m.value]).filter(m=>m[1]!==void 0))})),(0,e.passTestWithSideData)(_,u[h].sideData)}};return Q1.MediatorJoinCoefficientsFixed=r,Q1}var f_e;function h0t(){return f_e||(f_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(f0t(),t)}(W5)),W5}var K5={},W1={},h_e;function p0t(){if(h_e)return W1;h_e=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.MediatorAll=void 0;const t=ke();let e=class extends t.Mediator{constructor(n){super(n)}async mediate(n){const i=[];let a;try{a=this.publish(n)}catch{a=[]}for(const o of a){const c=await o.reply;c.isPassed()&&i.push({actor:o.actor,sideData:c.getSideData()})}return(await Promise.all(i.map(o=>o.actor.runObservable(n,o.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return W1.MediatorAll=e,W1}var p_e;function _0t(){return p_e||(p_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(p0t(),t)}(K5)),K5}var X5={},K1={},__e;function fPe(){if(__e)return K1;__e=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.ActorHttpInvalidate=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return K1.ActorHttpInvalidate=e,K1}var X1={},m_e;function m0t(){if(m_e)return X1;m_e=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.ActorHttpInvalidateListenable=void 0;const t=ke(),e=fPe();let r=class extends e.ActorHttpInvalidate{constructor(a){super(a);k(this,"invalidateListeners",[]);this.invalidateListeners=[]}addInvalidateListener(a){this.invalidateListeners.push(a)}async test(a){return(0,t.passTestVoid)()}async run(a){for(const s of this.invalidateListeners)s(a);return{}}};return X1.ActorHttpInvalidateListenable=r,X1}var g_e;function Tc(){return g_e||(g_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(fPe(),t),r(m0t(),t)}(X5)),X5}var J5={},J1={},y_e;function g0t(){if(y_e)return J1;y_e=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.ActorRdfJoinEntriesSortSelectivity=void 0;const t=ZOe(),e=ke();let r=class extends t.ActorRdfJoinEntriesSort{constructor(a){super(a);k(this,"mediatorJoinSelectivity");this.mediatorJoinSelectivity=a.mediatorJoinSelectivity}async test(a){return(0,e.passTest)({accuracy:.501})}async run(a){const s=[...a.entries],o=[];for(;s.length>0;){let c=Number.MAX_VALUE,u=-1;for(const[l,d]of s.entries()){const{selectivity:f}=await this.mediatorJoinSelectivity.mediate({entries:[d,...o],context:a.context});f<c&&(c=f,u=l)}o.push(s[u]),s.splice(u,1)}return{entries:o}}};return J1.ActorRdfJoinEntriesSortSelectivity=r,J1}var b_e;function y0t(){return b_e||(b_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(g0t(),t)}(J5)),J5}var Y5={},Y1={},$5={},$1={},Z5={},Z1={},v_e;function b0t(){if(v_e)return Z1;v_e=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.ChunkedIterator=void 0;const t=ir();let e=class extends t.TransformIterator{constructor(i,a,s){super(i,s);k(this,"blockSize");k(this,"chunk",[]);this.blockSize=a}consumeChunkAsIterator(){const i=new t.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],i}_transform(i,a,s){this.chunk.push(i),this.chunk.length>=this.blockSize&&s(this.consumeChunkAsIterator()),a()}_flush(i){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(i)}};return Z1.ChunkedIterator=e,Z1}var eT={},A_e;function v0t(){if(A_e)return eT;A_e=1,Object.defineProperty(eT,"__esModule",{value:!0}),eT.ClosableIterator=void 0;const t=ir();let e=class extends t.AsyncIterator{constructor(o,c){super();k(this,"_source");k(this,"onClose");this.onClose=c.onClose,this._source=o,this._source[t.DESTINATION]=this,this._source.on("end",i),this._source.on("error",n),this._source.on("readable",r),this.readable=this._source.readable}read(){const o=this._source.read();return o||(this.readable=!1,this._source.done&&this.close()),o}_end(o){this.onClose(),this._source.removeListener("end",i),this._source.removeListener("error",n),this._source.removeListener("readable",r),delete this._source[t.DESTINATION],this._source.destroy(),super._end(o)}};eT.ClosableIterator=e;function r(){this[t.DESTINATION].readable=!0}function n(a){this[t.DESTINATION].emit("error",a)}function i(){this[t.DESTINATION].close()}return eT}var tT={},T_e;function A0t(){if(T_e)return tT;T_e=1,Object.defineProperty(tT,"__esModule",{value:!0}),tT.ClosableTransformIterator=void 0;const t=ir();let e=class extends t.TransformIterator{constructor(i,a){super(i,a);k(this,"onClose");this.onClose=a.onClose}_end(i){this.onClose(),super._end(i)}};return tT.ClosableTransformIterator=e,tT}var BP={},w_e;function T0t(){if(w_e)return BP;w_e=1,Object.defineProperty(BP,"__esModule",{value:!0}),BP.instrumentIterator=t;function t(r){const n={count:0,timeSelf:0,timeLife:0};return e(r,n,!0),new Promise(i=>{r.on("end",()=>{i(n)})})}function e(r,n,i){if(!("_profileInstrumented"in r)){if(r._profileInstrumented=!0,"_read"in r){const s=r._read;r._read=(o,c)=>{const u=performance.now();s.call(r,o,()=>{n.timeSelf+=performance.now()-u,c()})}}const a=r.read;if(r.read=()=>{const s=performance.now(),o=a.call(r);return i&&o&&n.count++,n.timeSelf+=performance.now()-s,o},i){const s=performance.now();r.on("end",()=>{n.timeLife=performance.now()-s})}"_source"in r&&e(r._source,n,!1)}}return BP}var S_e;function Df(){return S_e||(S_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(b0t(),t),r(v0t(),t),r(A0t(),t),r(T0t(),t)}(Z5)),Z5}var x_e;function w0t(){if(x_e)return $1;x_e=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.ActorRdfJoin=void 0;const t=dt,e=ke(),r=Df(),n=Mi();let i=class Ic extends e.Actor{constructor(o,c){super(o);k(this,"mediatorJoinSelectivity");k(this,"includeInLogs",!0);k(this,"logicalType");k(this,"physicalName");k(this,"limitEntries");k(this,"limitEntriesMin");k(this,"canHandleUndefs");k(this,"isLeaf");k(this,"requiresVariableOverlap");k(this,"canHandleOperationRequired");this.mediatorJoinSelectivity=o.mediatorJoinSelectivity,this.logicalType=c.logicalType,this.physicalName=c.physicalName,this.limitEntries=c.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=c.limitEntriesMin??!1,this.canHandleUndefs=c.canHandleUndefs??!1,this.isLeaf=c.isLeaf??!0,this.requiresVariableOverlap=c.requiresVariableOverlap??!1,this.canHandleOperationRequired=c.canHandleOperationRequired??!1}static overlappingVariables(o){const c={};for(const u of o)for(const l of u.variables){c[l.variable.value]||(c[l.variable.value]={variable:l.variable,canBeUndef:l.canBeUndef,occurrences:0});const d=c[l.variable.value];d.canBeUndef=d.canBeUndef||l.canBeUndef,d.occurrences++}return Object.values(c).filter(u=>u.occurrences===o.length).map(u=>({variable:u.variable,canBeUndef:u.canBeUndef}))}static joinVariables(o,c,u=!1){const l={};let d=!0;for(const f of c){for(const h of f.variables)l[h.variable.value]=l[h.variable.value]||h.canBeUndef||!d&&u&&!(h.variable.value in l);d=!1}return Object.entries(l).map(([f,h])=>({variable:o.variable(f),canBeUndef:h}))}static joinBindings(...o){if(o.length===0)return null;if(o.length===1)return o[0];let c=o[0];for(const u of o.slice(1)){const l=c.merge(u);if(!l)return null;c=l}return c}static getCardinality(o){return o.cardinality}static async getMetadatas(o){return await Promise.all(o.map(c=>c.output.metadata()))}static async getEntriesWithMetadatas(o){const c=await Ic.getMetadatas(o);return o.map((u,l)=>({...u,metadata:c[l]}))}static getRequestInitialTimes(o){return o.map(c=>c.pageSize?0:c.requestTime??0)}static getRequestItemTimes(o){return o.map(c=>c.pageSize?(c.requestTime??0)/c.pageSize:0)}constructState(o){const c=new n.MetadataValidationState,u=()=>c.invalidate();for(const l of o)l.state.addInvalidateListener(u);return c}async constructResultMetadata(o,c,u,l={},d=!1){let f;if(l.cardinality)f=l.cardinality;else{let h=!1;f=c.reduce((p,_)=>{const g=Ic.getCardinality(_);return g.value===0&&(h=!0),{type:g.type==="estimate"?"estimate":p.type,value:p.value*(d?Math.max(1,g.value):g.value)}},{type:"exact",value:1}),(!h||d)&&(f.value*=(await this.mediatorJoinSelectivity.mediate({entries:o,context:u})).selectivity,f.value===0&&(f.value=Number.MIN_VALUE))}return{state:this.constructState(c),...l,cardinality:{type:f.type,value:f.value},variables:Ic.joinVariables(u.getSafe(t.KeysInitQuery.dataFactory),c,d)}}static async sortJoinEntries(o,c,u){if(c.some(h=>h.metadata.variables.some(p=>p.canBeUndef)))return(0,e.passTest)(c);const d={};for(const h of c)for(const p of h.metadata.variables){let _=d[p.variable.value];_||(_=0),d[p.variable.value]=++_}const f=[];for(const[h,p]of Object.entries(d))p>=2&&f.push(h);return f.length===0?(0,e.failTest)("Bind join can only join entries with at least one common variable"):(0,e.passTest)((await o.mediate({entries:c,context:u})).entries)}async test(o){if(o.type!==this.logicalType)return(0,e.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${o.type}' was given.`);if(o.entries.length<=1)return(0,e.failTest)(`${this.name} requires at least two join entries.`);const c=o.entries.some(d=>d.operationRequired);if(!this.canHandleOperationRequired&&c)return(0,e.failTest)(`${this.name} does not work with operationRequired.`);if(this.limitEntriesMin?o.entries.length<this.limitEntries:o.entries.length>this.limitEntries)return(0,e.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${o.entries.length}.`);for(const d of o.entries)if(d.output.type!=="bindings")return(0,e.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${d.output.type}'`);const u=await Ic.getMetadatas(o.entries);let l;return!this.canHandleUndefs&&(l=Ic.overlappingVariables(u),l.some(d=>d.canBeUndef))?(0,e.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(l??Ic.overlappingVariables(u)).length===0&&!c?(0,e.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(o,{metadatas:u})}async run(o,c){let u;o.context.has(t.KeysInitQuery.physicalQueryPlanLogger)&&(u=o.context.get(t.KeysInitQuery.physicalQueryPlanNode),o.context=o.context.set(t.KeysInitQuery.physicalQueryPlanNode,o));const l=o.context.get(t.KeysInitQuery.physicalQueryPlanLogger);let d;this.includeInLogs&&l&&(d={},l.stashChildren(u,p=>p.logicalOperator.startsWith("join")),l.logOperation(`join-${this.logicalType}`,this.physicalName,o,u,this.name,d));const{result:f,physicalPlanMetadata:h}=await this.getOutput(o,c);if(d){(0,r.instrumentIterator)(f.bindingsStream).then(_=>{l.appendMetadata(o,{cardinalityReal:_.count,timeSelf:_.timeSelf,timeLife:_.timeLife})}),Object.assign(d,h);const p=c.metadatas.map(Ic.getCardinality);if(d.cardinalities=p,d.joinCoefficients=(await this.getJoinCoefficients(o,c)).getOrThrow(),this.isLeaf)for(let _=0;_<o.entries.length;_++){const g=o.entries[_];l.unstashChild(g.operation,o),l.appendMetadata(g.operation,{cardinality:p[_]})}}return f.metadata=(0,n.cachifyMetadata)(f.metadata),f}};return $1.ActorRdfJoin=i,$1}var E_e;function $i(){return E_e||(E_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(w0t(),t)}($5)),$5}var I_e;function S0t(){if(I_e)return Y1;I_e=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.ActorRdfJoinSingle=void 0;const t=$i(),e=ke();let r=class extends t.ActorRdfJoin{constructor(i){super(i,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(i){return i.entries.length!==1?(0,e.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(i,void 0)}async getOutput(i){return{result:i.entries[0].output}}async getJoinCoefficients(i,a){return(0,e.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},a)}};return Y1.ActorRdfJoinSingle=r,Y1}var O_e;function x0t(){return O_e||(O_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(S0t(),t)}(Y5)),Y5}var eq={},rT={},R_e;function E0t(){if(R_e)return rT;R_e=1,Object.defineProperty(rT,"__esModule",{value:!0}),rT.ActorRdfJoinMultiEmpty=void 0;const t=$i(),e=dt,r=ke(),n=Mi(),i=ir();let a=class extends t.ActorRdfJoin{constructor(o){super(o,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(o){return(await t.ActorRdfJoin.getMetadatas(o.entries)).every(c=>t.ActorRdfJoin.getCardinality(c).value>0)?(0,r.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(o)}async getOutput(o){for(const u of o.entries)u.output.bindingsStream.close();const c=o.context.getSafe(e.KeysInitQuery.dataFactory);return{result:{bindingsStream:new i.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:t.ActorRdfJoin.joinVariables(c,await t.ActorRdfJoin.getMetadatas(o.entries))}),type:"bindings"}}}async getJoinCoefficients(o,c){return(0,r.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},c)}};return rT.ActorRdfJoinMultiEmpty=a,rT}var P_e;function I0t(){return P_e||(P_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(E0t(),t)}(eq)),eq}var tq={},nT={},rq={},iT={},N_e;function O0t(){if(N_e)return iT;N_e=1,Object.defineProperty(iT,"__esModule",{value:!0}),iT.BindingsIndexDef=void 0;let t=class{constructor(r,n){k(this,"keys");k(this,"hashFn");k(this,"index");this.keys=r.map(i=>i.variable),this.hashFn=n,this.index={}}put(r,n){return this.index[this.hashFn(r,this.keys)]=n}get(r){const n=this.getFirst(r);return n?[n]:[]}getFirst(r){return this.index[this.hashFn(r,this.keys)]}values(){return Object.values(this.index)}};return iT.BindingsIndexDef=t,iT}var aT={},F_e;function R0t(){if(F_e)return aT;F_e=1,Object.defineProperty(aT,"__esModule",{value:!0}),aT.BindingsIndexUndef=void 0;let t=class{constructor(r,n,i){k(this,"keys");k(this,"data",{});k(this,"hashFn");k(this,"allowDisjointDomains");this.keys=r.map(a=>a.variable),this.hashFn=n,this.allowDisjointDomains=i&&this.keys.length>0}put(r,n){if(this.allowDisjointDomains||this.isBindingsValid(r)){let i=this.data;for(let a=0;a<this.keys.length;a++){const s=this.keys[a],o=this.hashFn(r.get(s));let c=i[o];c||(c=i[o]=a===this.keys.length-1?n:{}),i=c}}return n}isBindingsValid(r){let n=!1;for(const i of this.keys)if(r.has(i)){n=!0;break}return n}get(r){return this.allowDisjointDomains||this.isBindingsValid(r)?this.getRecursive(r,this.keys,[this.data]):[]}getRecursive(r,n,i){if(n.length===0)return i;let a;[a,...n]=n;const s=[];for(const o of i){const c=this.hashFn(r==null?void 0:r.get(a));if(c){const u=[o[c],o[""]].filter(Boolean);if(u.length===0)continue;s.push(this.getRecursive(r,n,u))}else{const u=Object.values(o);if(u.length===0)continue;s.push(this.getRecursive(r,n,u))}}return s.flat()}getFirst(r,n=!0){if(this.allowDisjointDomains||this.isBindingsValid(r))return this.getRecursiveFirst(r,this.keys,[this.data],n)}getRecursiveFirst(r,n,i,a){if(n.length===0)return i[0];let s;[s,...n]=n;for(const o of i){const c=this.hashFn(r.get(s));if(c||!a){const u=[o[c],o[""]].filter(Boolean);if(u.length===0)continue;const l=this.getRecursiveFirst(r,n,u,a);if(l)return l}else{const u=Object.values(o);if(u.length===0)continue;const l=this.getRecursiveFirst(r,n,u,a);if(l)return l}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return aT.BindingsIndexUndef=t,aT}var nq={},M_e;function P0t(){return M_e||(M_e=1,Object.defineProperty(nq,"__esModule",{value:!0})),nq}var D_e;function IQ(){return D_e||(D_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(O0t(),t),r(R0t(),t),r(P0t(),t)}(rq)),rq}var iq,C_e;function N0t(){if(C_e)return iq;C_e=1;let t=ir(),e=t.MultiTransformIterator,r=t.SimpleTransformIterator;class n extends e{constructor(a,s,o,c){super(a,c),this.funRight=s,this.funJoin=o}_createTransformer(a){return new r(this.funRight(a),{transform:(s,o,c)=>{let u=this.funJoin(a,s);u!==null&&c(u),o()}})}}return iq=n,iq}var aq,L_e;function F0t(){if(L_e)return aq;L_e=1;let t=ir().AsyncIterator;class e extends t{constructor(n,i,a,s){super(),this.addedDataListener=!1,this.left=n,this.right=i,this.funHash=a,this.funJoin=s,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",c=>this.destroy(c)),this.right.on("error",c=>this.destroy(c)),this.readable=!1,this.left.on("end",o.bind(this));function o(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",c=>{c==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let i=this.matches[this.matchIdx++],a=this.funJoin(i,this.match);if(a!==null)return a}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let n=this.funHash(this.match);this.matches=this.leftMap.get(n)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",n.bind(this));function n(i){let a=this.funHash(i),s=this.leftMap.get(a);s||(s=[],this.leftMap.set(a,s)),s.push(i)}}}return aq=e,aq}var sq,j_e;function M0t(){if(j_e)return sq;j_e=1;const{MultiTransformIterator:t,SimpleTransformIterator:e,scheduleTask:r}=ir();class n extends t{constructor(a,s,o,c){super(a,c),this.right=s,this.funJoin=o,this.on("end",()=>this.right.close())}_end(){super._end(),r(()=>this.right.destroy())}_createTransformer(a){return new e(this.right.clone(),{transform:(s,o,c)=>{let u=this.funJoin(a,s);u!==null&&c(u),o()}})}}return sq=n,sq}var oq,B_e;function D0t(){if(B_e)return oq;B_e=1;let t=ir().AsyncIterator;class e extends t{constructor(n,i,a,s){super(),this.left=n,this.right=i,this.funHash=a,this.funJoin=s,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",o=>this.destroy(o)),this.right.on("error",o=>this.destroy(o)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let a=this.matches[this.matchIdx++],s=this.usedLeft?this.funJoin(this.match,a):this.funJoin(a,this.match);if(s!==null)return s}this.hasResults()||this._end();let n=null;for(let a=0;a<2&&(n=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,n===null);++a);if(this.done||n===null)return this.readable=!1,null;let i=this.funHash(n);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let a=this.usedLeft?this.leftMap:this.rightMap;a.has(i)||a.set(i,[]);let s=a.get(i);s||(s=[],a.set(i,s)),s.push(n)}this.match=n,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(i)||[],this.matchIdx=0}}}return oq=e,oq}var uq,q_e;function C0t(){if(q_e)return uq;q_e=1;let t=ir().AsyncIterator;class e extends t{constructor(n){super(),Array.isArray(n)||(n=Array.prototype.slice.call(arguments)),this.streams=n;for(let i of n)i.on("readable",()=>this.emit("readable")),i.on("end",()=>this._removeStream(i));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(n){let i=this.streams.indexOf(n);i<0||(this.streams.splice(i,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let n of this.streams)n.close()}read(){for(let n=0;n<this.streams.length;++n){this.idx=(this.idx+1)%this.streams.length;let i=this.streams[this.idx].read();if(i!==null)return i}return null}}return uq=e,uq}var cq,U_e;function pM(){if(U_e)return cq;U_e=1;const t=N0t(),e=F0t(),r=M0t(),n=D0t(),i=C0t();return cq={DynamicNestedLoopJoin:t,HashJoin:e,NestedLoopJoin:r,SymmetricHashJoin:n,MergeStream:i},cq}var V_e;function L0t(){if(V_e)return nT;V_e=1,Object.defineProperty(nT,"__esModule",{value:!0}),nT.ActorRdfJoinHash=void 0;const t=$i(),e=ke(),r=IQ(),n=Df(),i=ir(),a=pM(),s=Br();let o=class extends t.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:`hash-${l.canHandleUndefs?"undef":"def"}`,limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:l.canHandleUndefs});k(this,"mediatorHashBindings");this.mediatorHashBindings=l.mediatorHashBindings}async getOutput(l,d){const f=d.metadatas;let h;const p=t.ActorRdfJoin.overlappingVariables(f);if(this.canHandleUndefs){const _=d.entriesSorted[0].output,g=d.entriesSorted[1].output;h=new n.ClosableTransformIterator(async()=>{const m=new r.BindingsIndexUndef(p,y=>y&&y.termType!=="Variable"?(0,s.termToString)(y):"",!0);return await new Promise(y=>{_.bindingsStream.on("data",v=>{(m.getFirst(v,!1)??m.put(v,[])).push(v)}),_.bindingsStream.on("end",y),_.bindingsStream.on("error",v=>{h.emit("error",v)})}),new i.MultiTransformIterator(g.bindingsStream,{multiTransform:y=>new i.ArrayIterator(m.get(y).flat().map(v=>t.ActorRdfJoin.joinBindings(y,v)).filter(v=>v!==null),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){_.bindingsStream.destroy(),g.bindingsStream.destroy()}})}else{const{hashFunction:_}=await this.mediatorHashBindings.mediate({context:l.context}),g=p.map(m=>m.variable);h=new a.HashJoin(d.entriesSorted[0].output.bindingsStream,d.entriesSorted[1].output.bindingsStream,m=>_(m,g),t.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:h,metadata:async()=>await this.constructResultMetadata(d.entriesSorted,f,l.context)}}}async getJoinCoefficients(l,d){let f=l.entries;d.metadatas[1].cardinality.value<d.metadatas[0].cardinality.value&&(d.metadatas=[d.metadatas[1],d.metadatas[0]],f=[l.entries[1],l.entries[0]]);const{metadatas:h}=d,p=t.ActorRdfJoin.getRequestInitialTimes(h),_=t.ActorRdfJoin.getRequestItemTimes(h);let g=h[0].cardinality.value+h[1].cardinality.value;return this.canHandleUndefs||(g*=.8),(0,e.passTestWithSideData)({iterations:g,persistedItems:h[0].cardinality.value,blockingItems:h[0].cardinality.value,requestTime:p[0]+h[0].cardinality.value*_[0]+p[1]+h[1].cardinality.value*_[1]},{...d,entriesSorted:f})}};return nT.ActorRdfJoinHash=o,nT}var G_e;function H_e(){return G_e||(G_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(L0t(),t)}(tq)),tq}var lq={},sT={},k_e;function j0t(){if(k_e)return sT;k_e=1,Object.defineProperty(sT,"__esModule",{value:!0}),sT.ActorRdfJoinSymmetricHash=void 0;const t=$i(),e=ke(),r=pM();let n=class extends t.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0});k(this,"mediatorHashBindings");this.mediatorHashBindings=s.mediatorHashBindings}async getOutput(s){const o=await t.ActorRdfJoin.getMetadatas(s.entries),c=t.ActorRdfJoin.overlappingVariables(o),{hashFunction:u}=await this.mediatorHashBindings.mediate({context:s.context}),l=c.map(f=>f.variable);return{result:{type:"bindings",bindingsStream:new r.SymmetricHashJoin(s.entries[0].output.bindingsStream,s.entries[1].output.bindingsStream,f=>u(f,l),t.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(s.entries,o,s.context)}}}async getJoinCoefficients(s,o){const{metadatas:c}=o,u=t.ActorRdfJoin.getRequestInitialTimes(c),l=t.ActorRdfJoin.getRequestItemTimes(c);return(0,e.passTestWithSideData)({iterations:c[0].cardinality.value+c[1].cardinality.value,persistedItems:c[0].cardinality.value+c[1].cardinality.value,blockingItems:0,requestTime:u[0]+c[0].cardinality.value*l[0]+u[1]+c[1].cardinality.value*l[1]},o)}};return sT.ActorRdfJoinSymmetricHash=n,sT}var z_e;function B0t(){return z_e||(z_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(j0t(),t)}(lq)),lq}var dq={},oT={},Q_e;function q0t(){if(Q_e)return oT;Q_e=1,Object.defineProperty(oT,"__esModule",{value:!0}),oT.ActorRdfJoinNestedLoop=void 0;const t=$i(),e=ke(),r=pM();let n=class extends t.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(a){return{result:{type:"bindings",bindingsStream:new r.NestedLoopJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,t.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(a.entries,await t.ActorRdfJoin.getMetadatas(a.entries),a.context)}}}async getJoinCoefficients(a,s){const{metadatas:o}=s,c=t.ActorRdfJoin.getRequestInitialTimes(o),u=t.ActorRdfJoin.getRequestItemTimes(o);return(0,e.passTestWithSideData)({iterations:o[0].cardinality.value*o[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+o[0].cardinality.value*u[0]+c[1]+o[1].cardinality.value*u[1]},s)}};return oT.ActorRdfJoinNestedLoop=n,oT}var W_e;function U0t(){return W_e||(W_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(q0t(),t)}(dq)),dq}var fq={},uT={},hq={},cT={},lT={},K_e;function hPe(){if(K_e)return lT;K_e=1,Object.defineProperty(lT,"__esModule",{value:!0}),lT.bindingsToString=e,lT.bindingsToCompactString=r;const t=Br();function e(n){const i={};for(const a of n.keys())i[a.value]=(0,t.termToString)(n.get(a));return JSON.stringify(i,null,"  ")}function r(n,i){return i.map(a=>{const s=n.get(a);return s?(0,t.termToString)(s):""}).join("")}return lT}var X_e;function pPe(){if(X_e)return cT;X_e=1,Object.defineProperty(cT,"__esModule",{value:!0}),cT.Bindings=void 0;const t=ke(),e=yz,r=hPe();let n=class Ti{constructor(a,s,o){k(this,"type","bindings");k(this,"dataFactory");k(this,"entries");k(this,"contextHolder");this.dataFactory=a,this.entries=s,this.contextHolder=o}has(a){return this.entries.has(typeof a=="string"?a:a.value)}get(a){return this.entries.get(typeof a=="string"?a:a.value)}set(a,s){return new Ti(this.dataFactory,this.entries.set(typeof a=="string"?a:a.value,s),this.contextHolder)}delete(a){return new Ti(this.dataFactory,this.entries.delete(typeof a=="string"?a:a.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),a=>this.dataFactory.variable(a))}values(){return this.iteratorToIterable(this.entries.values())}forEach(a){for(const[s,o]of this.entries.entries())a(o,this.dataFactory.variable(s))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([a,s])=>[this.dataFactory.variable(a),s])[Symbol.iterator]()}equals(a){var s;if(!a)return!1;if(this===a)return!0;if(this.size!==a.size)return!1;for(const o of this.keys())if(!((s=this.get(o))!=null&&s.equals(a.get(o))))return!1;return!0}filter(a){return new Ti(this.dataFactory,(0,e.Map)(this.entries.filter((s,o)=>a(s,this.dataFactory.variable(o)))),this.contextHolder)}map(a){return new Ti(this.dataFactory,(0,e.Map)(this.entries.map((s,o)=>a(s,this.dataFactory.variable(o)))),this.contextHolder)}merge(a){if(this.size<a.size&&a instanceof Ti)return a.merge(this);let s=this.entries;if(a instanceof Ti)for(const[o,c]of a.entries){const u=this.entries.get(o);if(u&&!u.equals(c))return;s=s.set(o,c)}else for(const[o,c]of a){const u=this.entries.get(o.value);if(u&&!u.equals(c))return;s=s.set(o.value,c)}return this.createBindingsWithContexts(s,a)}mergeWith(a,s){if(this.size<s.size&&s instanceof Ti)return s.mergeWith(a,this);let o=this.entries;if(s instanceof Ti)for(const[c,u]of s.entries){const l=this.entries.get(c);let d;l&&!l.equals(u)?d=a(l,u,this.dataFactory.variable(c)):d=u,o=o.set(c,d)}else for(const[c,u]of s){const l=this.entries.get(c.value);let d;l&&!l.equals(u)?d=a(l,u,c):d=u,o=o.set(c.value,d)}return this.createBindingsWithContexts(o,s)}createBindingsWithContexts(a,s){if(this.contextHolder&&this.contextHolder.context){let o=this.contextHolder.context;return"contextHolder"in s&&s.contextHolder&&s.contextHolder.context&&(o=Ti.mergeContext(this.contextHolder.contextMergeHandlers,o,s.contextHolder.context)),new Ti(this.dataFactory,a,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:o})}return new Ti(this.dataFactory,a,s.contextHolder)}static mergeContext(a,s,o){const c=[...s.keys(),...o.keys()],u={},l={},d=new Set(o.keys().map(h=>h.name)),f=s.keys().filter(h=>d.has(h.name));for(const h of c){if(l[h.name]===1)continue;l[h.name]=1;const p=f.some(_=>_.name===h.name);if(a[h.name]&&p){u[h.name]=a[h.name].run(s.get(h),o.get(h));continue}!a[h.name]&&p||(u[h.name]=s.get(h)||o.get(h))}return new t.ActionContext(u)}setContextEntry(a,s){return this.setContextEntryRaw(a,s)}setContextEntryRaw(a,s){var o;return this.contextHolder&&this.contextHolder.context?new Ti(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(a,s)}):new Ti(this.dataFactory,this.entries,{contextMergeHandlers:((o=this.contextHolder)==null?void 0:o.contextMergeHandlers)??{},context:new t.ActionContext().set(a,s)})}deleteContextEntry(a){return this.deleteContextEntryRaw(a)}deleteContextEntryRaw(a){var s;return this.contextHolder?new Ti(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:(s=this.contextHolder.context)==null?void 0:s.delete(a)}):new Ti(this.dataFactory,this.entries)}getContext(){var a;return(a=this.contextHolder)==null?void 0:a.context}getContextEntry(a){var s;return(s=this.getContext())==null?void 0:s.get(a)}toString(){return(0,r.bindingsToString)(this)}*mapIterable(a,s){for(const o of a)yield s(o)}iteratorToIterable(a){return{[Symbol.iterator]:()=>a}}};return cT.Bindings=n,cT}var dT={},J_e;function V0t(){if(J_e)return dT;J_e=1,Object.defineProperty(dT,"__esModule",{value:!0}),dT.BindingsFactory=void 0;const t=yz,e=pPe();let r=class _Pe{constructor(i,a){k(this,"dataFactory");k(this,"contextMergeHandlers");this.dataFactory=i,this.contextMergeHandlers=a}static async create(i,a,s){return new _Pe(s,(await i.mediate({context:a})).mergeHandlers)}bindings(i=[]){return new e.Bindings(this.dataFactory,(0,t.Map)(i.map(([a,s])=>[a.value,s])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(i){return this.bindings([...i])}fromRecord(i){return this.bindings(Object.entries(i).map(([a,s])=>[this.dataFactory.variable(a),s]))}};return dT.BindingsFactory=r,dT}var Y_e;function ln(){return Y_e||(Y_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(pPe(),t),r(V0t(),t),r(hPe(),t)}(hq)),hq}var $_e;function G0t(){if($_e)return uT;$_e=1,Object.defineProperty(uT,"__esModule",{value:!0}),uT.ActorRdfJoinMinusHash=void 0;const t=$i(),e=ke(),r=ln(),n=IQ(),i=Df(),a=Br();let s=class mPe extends t.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:`hash-${c.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:c.canHandleUndefs})}static constructIndex(c,u){return c?new n.BindingsIndexUndef(u,l=>l&&l.termType!=="Variable"?(0,a.termToString)(l):"",!1):new n.BindingsIndexDef(u,r.bindingsToCompactString)}async getOutput(c){const u=c.entries[1].output,l=c.entries[0].output,d=await t.ActorRdfJoin.getMetadatas(c.entries);let f=t.ActorRdfJoin.overlappingVariables(d);if(c.graphVariableFromParentScope&&(f=f.filter(p=>!p.variable.equals(c.graphVariableFromParentScope))),f.length===0)return u.bindingsStream.destroy(),{result:l};const h=new i.ClosableTransformIterator(async()=>{const p=mPe.constructIndex(this.canHandleUndefs,f);return await new Promise(_=>{u.bindingsStream.on("data",g=>p.put(g,!0)),u.bindingsStream.on("end",_),u.bindingsStream.on("error",g=>h.emit("error",g))}),l.bindingsStream.filter(_=>!p.getFirst(_,!0))},{autoStart:!1,onClose(){u.bindingsStream.destroy(),l.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,metadata:l.metadata}}}async getJoinCoefficients(c,u){const{metadatas:l}=u,d=t.ActorRdfJoin.getRequestInitialTimes(l),f=t.ActorRdfJoin.getRequestItemTimes(l);let h=l[0].cardinality.value+l[1].cardinality.value;return this.canHandleUndefs||(h*=.8),(0,e.passTestWithSideData)({iterations:h,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:d[0]+l[0].cardinality.value*f[0]+d[1]+l[1].cardinality.value*f[1]},u)}};return uT.ActorRdfJoinMinusHash=s,uT}var Z_e;function eme(){return Z_e||(Z_e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(G0t(),t)}(fq)),fq}var pq={},fT={},tme;function H0t(){if(tme)return fT;tme=1,Object.defineProperty(fT,"__esModule",{value:!0}),fT.ActorRdfJoinOptionalHash=void 0;const t=$i(),e=ke(),r=ln(),n=IQ(),i=Df(),a=ir(),s=Br();let o=class PG extends t.ActorRdfJoin{constructor(l){super(l,{logicalType:"optional",physicalName:`hash-${l.canHandleUndefs?"undef":"def"}-${l.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:l.canHandleUndefs,requiresVariableOverlap:!0});k(this,"blocking");this.blocking=l.blocking}static constructIndex(l,d){return l?new n.BindingsIndexUndef(d,f=>f&&f.termType!=="Variable"?(0,s.termToString)(f):"",!0):new n.BindingsIndexDef(d,r.bindingsToCompactString)}async getOutput(l){const d=l.entries[1].output,f=l.entries[0].output,h=await t.ActorRdfJoin.getMetadatas(l.entries),p=t.ActorRdfJoin.overlappingVariables(h);let _;return this.blocking?_=new i.ClosableTransformIterator(async()=>{const g=PG.constructIndex(this.canHandleUndefs,p);return await new Promise(m=>{d.bindingsStream.on("data",y=>{(g.getFirst(y,!0)??g.put(y,[])).push(y)}),d.bindingsStream.on("end",m),d.bindingsStream.on("error",y=>{_.emit("error",y)})}),new a.MultiTransformIterator(f.bindingsStream,{multiTransform:m=>new a.ArrayIterator(g.get(m).flat().map(y=>t.ActorRdfJoin.joinBindings(m,y)).filter(y=>y!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){d.bindingsStream.destroy(),f.bindingsStream.destroy()}}):_=new i.ClosableTransformIterator(async()=>{const g=PG.constructIndex(this.canHandleUndefs,p);let m=!0;return d.bindingsStream.on("data",y=>{(g.getFirst(y,!0)??g.put(y,new a.BufferedIterator({autoStart:!1})))._push(y)}),d.bindingsStream.on("end",()=>{for(const y of g.values())y.close();m=!1}),d.bindingsStream.on("error",y=>{_.emit("error",y)}),new a.MultiTransformIterator(f.bindingsStream,{multiTransform:y=>{let v=g.get(y);return v.length===0&&(m?v=[g.put(y,new a.BufferedIterator({autoStart:!1}))]:v=[]),new a.UnionIterator(v.map(T=>T.clone()),{autoStart:!1}).map(T=>t.ActorRdfJoin.joinBindings(y,T))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){d.bindingsStream.destroy(),f.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:_,metadata:async()=>await this.constructResultMetadata(l.entries,h,l.context,{},!0)}}}async getJoinCoefficients(l,d){const{metadatas:f}=d,h=t.ActorRdfJoin.getRequestInitialTimes(f),p=t.ActorRdfJoin.getRequestItemTimes(f);let _=f[0].cardinality.value+f[1].cardinality.value;return this.canHandleUndefs||(_*=.8),this.blocking&&(_*=.9),(0,e.passTestWithSideData)({iterations:_,persistedItems:f[0].cardinality.value,blockingItems:this.blocking?f[0].cardinality.value:0,requestTime:h[0]+f[0].cardinality.value*p[0]+h[1]+f[1].cardinality.value*p[1]},d)}};return fT.ActorRdfJoinOptionalHash=o,fT}var rme;function qP(){return rme||(rme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(H0t(),t)}(pq)),pq}var _q={},hT={},nme;function k0t(){if(nme)return hT;nme=1,Object.defineProperty(hT,"__esModule",{value:!0}),hT.ActorRdfJoinOptionalNestedLoop=void 0;const t=$i(),e=ke(),r=pM();let n=class extends t.ActorRdfJoin{constructor(a){super(a,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(a){return{result:{type:"bindings",bindingsStream:new r.NestedLoopJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,t.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(a.entries,await t.ActorRdfJoin.getMetadatas(a.entries),a.context,{},!0)}}}async getJoinCoefficients(a,s){const{metadatas:o}=s,c=t.ActorRdfJoin.getRequestInitialTimes(o),u=t.ActorRdfJoin.getRequestItemTimes(o);return(0,e.passTestWithSideData)({iterations:o[0].cardinality.value*o[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+o[0].cardinality.value*u[0]+c[1]+o[1].cardinality.value*u[1]},s)}};return hT.ActorRdfJoinOptionalNestedLoop=n,hT}var ime;function z0t(){return ime||(ime=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(k0t(),t)}(_q)),_q}var mq={},pT={},gq={},_T={},ame;function Q0t(){if(ame)return _T;ame=1,Object.defineProperty(_T,"__esModule",{value:!0}),_T.ActorQuerySourceDereferenceLink=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return _T.ActorQuerySourceDereferenceLink=e,_T}var sme;function gPe(){return sme||(sme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Q0t(),t)}(gq)),gq}var mT={},ome;function bPe(){if(ome)return mT;ome=1,Object.defineProperty(mT,"__esModule",{value:!0}),mT.QuerySourceCachePolicyDereferenceWrapper=void 0;let t=class yPe{constructor(r){k(this,"cachePolicy");this.cachePolicy=r}storable(){return this.cachePolicy.storable()}async satisfiesWithoutRevalidation(r){return this.cachePolicy.satisfiesWithoutRevalidation({url:r.link.url,context:r.context})}responseHeaders(){return this.cachePolicy.responseHeaders()}timeToLive(){return this.cachePolicy.timeToLive()}async revalidationHeaders(r){return this.cachePolicy.revalidationHeaders({url:r.link.url,context:r.context})}async revalidatedPolicy(r,n){const i=await this.cachePolicy.revalidatedPolicy({url:r.link.url,context:r.context},n);return{policy:new yPe(i.policy),modified:i.modified,matches:i.matches}}};return mT.QuerySourceCachePolicyDereferenceWrapper=t,mT}var ume;function W0t(){if(ume)return pT;ume=1,Object.defineProperty(pT,"__esModule",{value:!0}),pT.ActorQuerySourceDereferenceLinkHypermedia=void 0;const t=gPe(),e=dt,r=ke(),n=Wt,i=bPe();let a=class extends t.ActorQuerySourceDereferenceLink{constructor(c){super(c);k(this,"mediatorDereferenceRdf");k(this,"mediatorMetadata");k(this,"mediatorMetadataExtract");k(this,"mediatorMetadataAccumulate");k(this,"mediatorQuerySourceIdentifyHypermedia");this.mediatorDereferenceRdf=c.mediatorDereferenceRdf,this.mediatorMetadata=c.mediatorMetadata,this.mediatorMetadataExtract=c.mediatorMetadataExtract,this.mediatorMetadataAccumulate=c.mediatorMetadataAccumulate,this.mediatorQuerySourceIdentifyHypermedia=c.mediatorQuerySourceIdentifyHypermedia}async test(c){return(0,r.passTestVoid)()}async run(c){var g,m;const u=c.link.context?c.context.merge(c.link.context):c.context;let l=c.link.url,d,f,h;try{const y=await this.mediatorDereferenceRdf.mediate({context:u,url:l});l=y.url,y.cachePolicy&&(h=new i.QuerySourceCachePolicyDereferenceWrapper(y.cachePolicy));const v=await this.mediatorMetadata.mediate({context:u,url:l,quads:y.data,triples:(g=y.metadata)==null?void 0:g.triples});v.data.on("error",()=>{}),f=(await this.mediatorMetadataExtract.mediate({context:u,url:l,metadata:v.metadata,headers:y.headers,requestTime:y.requestTime})).metadata,d=v.data,c.link.transform&&(d=await c.link.transform(d))}catch(y){d=new n.Readable,d.read=()=>(setTimeout(()=>d.emit("error",y)),null),{metadata:f}=await this.mediatorMetadataAccumulate.mediate({context:u,mode:"initialize"}),this.logWarn(u,`Metadata extraction for ${c.link.url} failed: ${y.message}`)}const{source:p,dataset:_}=await this.mediatorQuerySourceIdentifyHypermedia.mediate({context:u,forceSourceType:c.link.forceSourceType,handledDatasets:c.handledDatasets,metadata:f,quads:d,url:l});return _&&c.handledDatasets&&(c.handledDatasets[_]=!0),(m=u.get(e.KeysStatistics.dereferencedLinks))==null||m.updateStatistic({url:c.link.url,metadata:f},p),{source:p,metadata:f,dataset:_,cachePolicy:h}}};return pT.ActorQuerySourceDereferenceLinkHypermedia=a,pT}var cme;function K0t(){return cme||(cme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(W0t(),t),r(bPe(),t)}(mq)),mq}var yq={},gT={},bq={},yT={},lme;function X0t(){if(lme)return yT;lme=1,Object.defineProperty(yT,"__esModule",{value:!0}),yT.ActorDereferenceRdf=void 0;const t=Qz();let e=class extends t.ActorDereferenceParse{constructor(n){super(n)}};return yT.ActorDereferenceRdf=e,yT}var dme;function J0t(){return dme||(dme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(X0t(),t)}(bq)),bq}var fme;function Y0t(){if(fme)return gT;fme=1,Object.defineProperty(gT,"__esModule",{value:!0}),gT.ActorDereferenceRdfParse=void 0;const t=J0t();let e=class extends t.ActorDereferenceRdf{constructor(n){super(n)}async getMetadata(n){return{baseIRI:n.baseIRI??n.url,version:n.version}}};return gT.ActorDereferenceRdfParse=e,gT}var hme;function $0t(){return hme||(hme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Y0t(),t)}(yq)),yq}var vq={},bT={},vT={},pme;function Z0t(){if(pme)return vT;pme=1,Object.defineProperty(vT,"__esModule",{value:!0}),vT.HtmlScriptListener=void 0;const t=dt,e=Wt,r=Bn();let n=class xE{constructor(a,s,o,c,u,l,d,f){k(this,"mediatorRdfParseHandle");k(this,"cbQuad");k(this,"cbError");k(this,"cbEnd");k(this,"supportedTypes");k(this,"context");k(this,"baseIRI");k(this,"headers");k(this,"onlyFirstScript");k(this,"targetScriptId");k(this,"handleMediaType");k(this,"textChunks");k(this,"textChunksJsonLd",[]);k(this,"endBarrier",1);k(this,"passedScripts",0);k(this,"isFinalJsonLdProcessing",!1);this.mediatorRdfParseHandle=a,this.cbQuad=s,this.cbError=o,this.cbEnd=c,this.supportedTypes=u,this.context=l.set(t.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=d,this.headers=f,this.onlyFirstScript=l.get(t.KeysRdfParseHtmlScript.extractAllScripts)===!1;const h=this.baseIRI.indexOf("#");this.targetScriptId=h>0?this.baseIRI.slice(h+1,this.baseIRI.length):null}static newErrorCoded(a,s){const o=new Error(a);return o.code=s,o}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(xE.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const a=new e.Readable({objectMode:!0});a._read=()=>{};const s=this.textChunks,o={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:a,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(o).then(({handle:c})=>{c.data.on("error",u=>this.cbError(xE.newErrorCoded(u.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const u of s)a.push(u);a.push(null)}).catch(c=>{this.targetScriptId?this.cbError(xE.newErrorCoded(c.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(a,s){a==="base"&&s.href&&(this.baseIRI=(0,r.resolve)(s.href,this.baseIRI)),a==="script"&&(!this.targetScriptId||s.id===this.targetScriptId)?this.supportedTypes[s.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=s.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(xE.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(a){this.handleMediaType&&this.textChunks.push(a)}requiresCustomJsonLdHandling(a){return!this.onlyFirstScript&&!this.targetScriptId&&a==="application/ld+json"}};return vT.HtmlScriptListener=n,vT}var _me;function e_t(){if(_me)return bT;_me=1,Object.defineProperty(bT,"__esModule",{value:!0}),bT.ActorRdfParseHtmlScript=void 0;const t=oQ(),e=ke(),r=Z0t();let n=class extends t.ActorRdfParseHtml{constructor(s){super(s);k(this,"mediatorRdfParseMediatypes");k(this,"mediatorRdfParseHandle");this.mediatorRdfParseMediatypes=s.mediatorRdfParseMediatypes,this.mediatorRdfParseHandle=s.mediatorRdfParseHandle}async test(s){return(0,e.passTestVoid)()}async run(s){const o=(await this.mediatorRdfParseMediatypes.mediate({context:s.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new r.HtmlScriptListener(this.mediatorRdfParseHandle,s.emit,s.error,s.end,o,s.context,s.baseIRI,s.headers)}}};return bT.ActorRdfParseHtmlScript=n,bT}var mme;function t_t(){return mme||(mme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(e_t(),t)}(vq)),vq}var Aq={},AT={},gme;function r_t(){if(gme)return AT;gme=1,Object.defineProperty(AT,"__esModule",{value:!0}),AT.ActorQueryResultSerializeRdf=void 0;const t=Ko(),e=ke();let r=class extends t.ActorQueryResultSerialize{constructor(a){super(a);k(this,"mediatorRdfSerialize");k(this,"mediatorMediaTypeCombiner");k(this,"mediatorMediaTypeFormatCombiner");this.mediatorRdfSerialize=a.mediatorRdfSerialize,this.mediatorMediaTypeCombiner=a.mediatorMediaTypeCombiner,this.mediatorMediaTypeFormatCombiner=a.mediatorMediaTypeFormatCombiner}async testHandle(a,s,o){if(a.type!=="quads")return(0,e.failTest)(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:c}=await this.mediatorMediaTypeCombiner.mediate({context:o,mediaTypes:!0});return s in c?(0,e.passTestVoid)():(0,e.failTest)(`Actor ${this.name} can not handle media type ${s}. All available types: ${Object.keys(c)}`)}async runHandle(a,s,o){return(await this.mediatorRdfSerialize.mediate({context:o,handle:{context:o,quadStream:a.quadStream},handleMediaType:s})).handle}async testMediaType(a){return(0,e.passTestVoid)()}async getMediaTypes(a){return(await this.mediatorMediaTypeCombiner.mediate({context:a,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(a){return(0,e.passTestVoid)()}async getMediaTypeFormats(a){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:a,mediaTypeFormats:!0})).mediaTypeFormats}};return AT.ActorQueryResultSerializeRdf=r,AT}var yme;function n_t(){return yme||(yme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(r_t(),t)}(Aq)),Aq}var Tq={},TT={},wT={},bme;function i_t(){if(bme)return wT;bme=1,Object.defineProperty(wT,"__esModule",{value:!0}),wT.ExpressionFunctionIn=void 0;const t=et(),e=Ye();let r=class extends t.ExpressionFunctionBase{constructor(a){super({arity:Number.POSITIVE_INFINITY,operator:e.SparqlOperator.IN,apply:async s=>{const{args:o,mapping:c,exprEval:u}=s,[l,...d]=o,f=await u.evaluatorExpressionEvaluation(l,c);return await this.inRecursive(f,{...s,args:d},[])}});k(this,"equalityFunction");this.equalityFunction=a}checkArity(a){return a.length>0}async inRecursive(a,s,o){const{args:c,mapping:u,exprEval:l}=s;if(c.length===0)return o.every(f=>!f)?(0,e.bool)(!1):Promise.reject(new e.InError(o));try{const d=c.shift(),f=await l.evaluatorExpressionEvaluation(d,u);return this.equalityFunction.applyOnTerms([a,f],l).typedValue?(0,e.bool)(!0):this.inRecursive(a,s,[...o,!1])}catch(d){return this.inRecursive(a,s,[...o,d])}}};return wT.ExpressionFunctionIn=r,wT}var vme;function a_t(){if(vme)return TT;vme=1,Object.defineProperty(TT,"__esModule",{value:!0}),TT.ActorFunctionFactoryExpressionIn=void 0;const t=et(),e=Ye(),r=i_t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(s){super({...s,functionNames:[e.SparqlOperator.IN],termFunction:!1});k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=s.mediatorFunctionFactory}async run(s){const o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:s.context,arguments:s.arguments});return new r.ExpressionFunctionIn(o)}};return TT.ActorFunctionFactoryExpressionIn=n,TT}var Ame;function s_t(){return Ame||(Ame=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(a_t(),t)}(Tq)),Tq}var wq={},ST={},xT={},Tme;function o_t(){if(Tme)return xT;Tme=1,Object.defineProperty(xT,"__esModule",{value:!0}),xT.ExpressionFunctionNotIn=void 0;const t=et(),e=Ye();let r=class extends t.ExpressionFunctionBase{constructor(a){super({arity:Number.POSITIVE_INFINITY,operator:e.SparqlOperator.NOT_IN,apply:async s=>{const o=await this.inFunction.apply(s);return(0,e.bool)(!o.typedValue)}});k(this,"inFunction");this.inFunction=a}checkArity(a){return a.length>0}};return xT.ExpressionFunctionNotIn=r,xT}var wme;function u_t(){if(wme)return ST;wme=1,Object.defineProperty(ST,"__esModule",{value:!0}),ST.ActorFunctionFactoryExpressionNotIn=void 0;const t=et(),e=Ye(),r=o_t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(s){super({...s,functionNames:[e.SparqlOperator.NOT_IN],termFunction:!1});k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=s.mediatorFunctionFactory}async run(s){const o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.IN,context:s.context,arguments:s.arguments});return new r.ExpressionFunctionNotIn(o)}};return ST.ActorFunctionFactoryExpressionNotIn=n,ST}var Sme;function c_t(){return Sme||(Sme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(u_t(),t)}(wq)),wq}var Sq={},ET={},IT={},xme;function l_t(){if(xme)return IT;xme=1,Object.defineProperty(IT,"__esModule",{value:!0}),IT.TermFunctionGreaterThanEqual=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(a){super({arity:2,operator:e.SparqlOperator.GTE,overloads:(0,e.declare)(e.SparqlOperator.GTE).set(["term","term"],s=>([o,c])=>this.lessThanEqualFunction.applyOnTerms([c,o],s)).collect()});k(this,"lessThanEqualFunction");this.lessThanEqualFunction=a}};return IT.TermFunctionGreaterThanEqual=r,IT}var Eme;function d_t(){if(Eme)return ET;Eme=1,Object.defineProperty(ET,"__esModule",{value:!0}),ET.ActorFunctionFactoryTermGreaterThanEqual=void 0;const t=et(),e=Ye(),r=l_t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(s){super({...s,functionNames:[e.SparqlOperator.GTE],termFunction:!0});k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=s.mediatorFunctionFactory}async run(s){const o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LTE,requireTermExpression:!0,context:s.context,arguments:s.arguments});return new r.TermFunctionGreaterThanEqual(o)}};return ET.ActorFunctionFactoryTermGreaterThanEqual=n,ET}var Ime;function f_t(){return Ime||(Ime=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(d_t(),t)}(Sq)),Sq}var xq={},OT={},RT={},Ome;function h_t(){if(Ome)return RT;Ome=1,Object.defineProperty(RT,"__esModule",{value:!0}),RT.TermFunctionGreaterThan=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(a){super({arity:2,operator:e.SparqlOperator.GT,overloads:(0,e.declare)(e.SparqlOperator.GT).set(["term","term"],s=>([o,c])=>this.lessThanFunction.applyOnTerms([c,o],s)).collect()});k(this,"lessThanFunction");this.lessThanFunction=a}};return RT.TermFunctionGreaterThan=r,RT}var Rme;function p_t(){if(Rme)return OT;Rme=1,Object.defineProperty(OT,"__esModule",{value:!0}),OT.ActorFunctionFactoryTermGreaterThan=void 0;const t=et(),e=Ye(),r=h_t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(s){super({...s,functionNames:[e.SparqlOperator.GT],termFunction:!0});k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=s.mediatorFunctionFactory}async run(s){const o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,requireTermExpression:!0,context:s.context,arguments:s.arguments});return new r.TermFunctionGreaterThan(o)}};return OT.ActorFunctionFactoryTermGreaterThan=n,OT}var Pme;function __t(){return Pme||(Pme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(p_t(),t)}(xq)),xq}var Eq={},PT={},NT={},Nme;function m_t(){if(Nme)return NT;Nme=1,Object.defineProperty(NT,"__esModule",{value:!0}),NT.TermFunctionInequality=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(a){super({arity:2,operator:e.SparqlOperator.NOT_EQUAL,overloads:(0,e.declare)(e.SparqlOperator.NOT_EQUAL).set(["term","term"],s=>([o,c])=>(0,e.bool)(!this.equalityFunction.applyOnTerms([o,c],s).typedValue)).collect()});k(this,"equalityFunction");this.equalityFunction=a}};return NT.TermFunctionInequality=r,NT}var Fme;function g_t(){if(Fme)return PT;Fme=1,Object.defineProperty(PT,"__esModule",{value:!0}),PT.ActorFunctionFactoryTermInequality=void 0;const t=et(),e=Ye(),r=m_t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(s){super({...s,functionNames:[e.SparqlOperator.NOT_EQUAL],termFunction:!0});k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=s.mediatorFunctionFactory}async run(s){const o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:s.context,arguments:s.arguments});return new r.TermFunctionInequality(o)}};return PT.ActorFunctionFactoryTermInequality=n,PT}var Mme;function y_t(){return Mme||(Mme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(g_t(),t)}(Eq)),Eq}var Iq={},FT={},MT={},Dme;function b_t(){if(Dme)return MT;Dme=1,Object.defineProperty(MT,"__esModule",{value:!0}),MT.TermFunctionLesserThanEqual=void 0;const t=et(),e=Ye();let r=class extends t.TermFunctionBase{constructor(a,s){super({arity:2,operator:e.SparqlOperator.LTE,overloads:(0,e.declare)(e.SparqlOperator.LTE).set(["term","term"],o=>([c,u])=>{let l;try{if(this.lessThanFunction.applyOnTerms([c,u],o).typedValue)return(0,e.bool)(!0)}catch(d){l=d}if(this.equalityFunction.applyOnTerms([c,u],o).typedValue)return(0,e.bool)(!0);if(l)throw l;return(0,e.bool)(!1)}).collect()});k(this,"equalityFunction");k(this,"lessThanFunction");this.equalityFunction=a,this.lessThanFunction=s}};return MT.TermFunctionLesserThanEqual=r,MT}var Cme;function v_t(){if(Cme)return FT;Cme=1,Object.defineProperty(FT,"__esModule",{value:!0}),FT.ActorFunctionFactoryTermLesserThanEqual=void 0;const t=et(),e=Ye(),r=b_t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(s){super({...s,functionNames:[e.SparqlOperator.LTE],termFunction:!0});k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=s.mediatorFunctionFactory}async run(s){const o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:s.context,arguments:s.arguments}),c=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,requireTermExpression:!0,context:s.context,arguments:s.arguments});return new r.TermFunctionLesserThanEqual(o,c)}};return FT.ActorFunctionFactoryTermLesserThanEqual=n,FT}var Lme;function A_t(){return Lme||(Lme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(v_t(),t)}(Iq)),Iq}var Oq={},DT={},CT={},jme;function T_t(){if(jme)return CT;jme=1,Object.defineProperty(CT,"__esModule",{value:!0}),CT.TermFunctionLesserThan=void 0;const t=et(),e=dt,r=Ye();let n=class extends t.TermFunctionBase{constructor(s){super({arity:2,operator:r.SparqlOperator.LT,overloads:(0,r.declare)(r.SparqlOperator.LT).numberTest(()=>(o,c)=>o<c).stringTest(()=>(o,c)=>o.localeCompare(c)===-1).booleanTest(()=>(o,c)=>o<c).dateTimeTest(o=>(c,u)=>(0,r.toUTCDate)(c,o.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,r.toUTCDate)(u,o.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DATE]}).set([r.TypeURL.XSD_YEAR_MONTH_DURATION,r.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([o,c])=>(0,r.bool)((0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(o.typedValue))<(0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(c.typedValue)))).set([r.TypeURL.XSD_DAY_TIME_DURATION,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([o,c])=>(0,r.bool)((0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(o.typedValue))<(0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(c.typedValue)))).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_TIME],o=>([c,u])=>(0,r.bool)((0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(c.typedValue),o.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(u.typedValue),o.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],o=>([c,u])=>{const l=this.quadComponentTest(c.subject,u.subject,o);if(l!==void 0)return(0,r.bool)(l);const d=this.quadComponentTest(c.predicate,u.predicate,o);if(d!==void 0)return(0,r.bool)(d);const f=this.quadComponentTest(c.object,u.object,o);return f!==void 0?(0,r.bool)(f):(0,r.bool)(this.quadComponentTest(c.graph,u.graph,o)??!1)},!1).collect()});k(this,"equalityFunction");this.equalityFunction=s}quadComponentTest(s,o,c){return this.equalityFunction.applyOnTerms([s,o],c).typedValue?void 0:this.applyOnTerms([s,o],c).typedValue}};return CT.TermFunctionLesserThan=n,CT}var Bme;function w_t(){if(Bme)return DT;Bme=1,Object.defineProperty(DT,"__esModule",{value:!0}),DT.ActorFunctionFactoryTermLesserThan=void 0;const t=et(),e=Ye(),r=T_t();let n=class extends t.ActorFunctionFactoryDedicated{constructor(s){super({...s,functionNames:[e.SparqlOperator.LT],termFunction:!0});k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=s.mediatorFunctionFactory}async run(s){const o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:s.context,arguments:s.arguments});return new r.TermFunctionLesserThan(o)}};return DT.ActorFunctionFactoryTermLesserThan=n,DT}var qme;function S_t(){return qme||(qme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(w_t(),t)}(Oq)),Oq}var Rq={},LT={},Pq={},jT={},Ume;function x_t(){if(Ume)return jT;Ume=1,Object.defineProperty(jT,"__esModule",{value:!0}),jT.ActorBindingsAggregatorFactory=void 0;const t=ke();let e=class extends t.Actor{constructor(i){super(i);k(this,"mediatorExpressionEvaluatorFactory");this.mediatorExpressionEvaluatorFactory=i.mediatorExpressionEvaluatorFactory}};return jT.ActorBindingsAggregatorFactory=e,jT}var BT={},Vme;function E_t(){if(Vme)return BT;Vme=1,Object.defineProperty(BT,"__esModule",{value:!0}),BT.AggregateEvaluator=void 0;const t=dt,e=Ye(),r=Br();let n=class{constructor(a,s,o=!1){k(this,"evaluator");k(this,"distinct");k(this,"throwError");k(this,"errorOccurred",!1);k(this,"variableValues");k(this,"superTypeProvider");k(this,"termTransformer");this.evaluator=a,this.distinct=s,this.throwError=o,this.errorOccurred=!1,this.superTypeProvider=a.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new e.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const a=this.emptyValueTerm();if(a===void 0&&this.throwError)throw new e.EmptyAggregateError;return a}async putBindings(a){if(!this.errorOccurred)try{const s=await this.evaluator.evaluate(a);if(!s||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(r.termToString(s)))&&(this.putTerm(s),this.distinct&&this.variableValues.add(r.termToString(s)))}catch(s){this.safeThrow(s)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(a){if(this.throwError)throw a;this.errorOccurred=!0}termToNumericOrError(a){if(a.termType!=="Literal")throw new Error(`Term with value ${a.value} has type ${a.termType} and is not a numeric literal`);if(!e.isSubTypeOf(a.datatype.value,e.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${a.datatype.value} with value ${a.value} has type ${a.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(a)}};return BT.AggregateEvaluator=n,BT}var Gme;function Di(){return Gme||(Gme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(x_t(),t),r(E_t(),t)}(Pq)),Pq}var qT={},Hme;function vPe(){if(Hme)return qT;Hme=1,Object.defineProperty(qT,"__esModule",{value:!0}),qT.AverageAggregator=void 0;const t=Di(),e=Ye();let r=class extends t.AggregateEvaluator{constructor(a,s,o,c,u,l){super(a,s,l);k(this,"dataFactory");k(this,"additionFunction");k(this,"divisionFunction");k(this,"state");this.dataFactory=o,this.additionFunction=c,this.divisionFunction=u}emptyValueTerm(){return e.typedLiteral("0",e.TypeURL.XSD_INTEGER)}putTerm(a){if(this.state===void 0){const s=this.termToNumericOrError(a);this.state={sum:s,count:1}}else{const s=this.termToNumericOrError(a);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,s],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const a=new e.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,a],this.evaluator).toRDF(this.dataFactory)}};return qT.AverageAggregator=r,qT}var kme;function I_t(){if(kme)return LT;kme=1,Object.defineProperty(LT,"__esModule",{value:!0}),LT.ActorBindingsAggregatorFactoryAverage=void 0;const t=Di(),e=dt,r=ke(),n=Ye(),i=vPe();let a=class extends t.ActorBindingsAggregatorFactory{constructor(c){super(c);k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=c.mediatorFunctionFactory}async test(c){return c.expr.aggregator!=="avg"?(0,r.failTest)("This actor only supports the 'avg' aggregator."):(0,r.passTestVoid)()}async run({context:c,expr:u}){return new i.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:c}),u.distinct,c.getSafe(e.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:c,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.DIVISION,context:c,requireTermExpression:!0}))}};return LT.ActorBindingsAggregatorFactoryAverage=a,LT}var zme;function O_t(){return zme||(zme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(I_t(),t),r(vPe(),t)}(Rq)),Rq}var Nq={},UT={},VT={},Qme;function APe(){if(Qme)return VT;Qme=1,Object.defineProperty(VT,"__esModule",{value:!0}),VT.CountAggregator=void 0;const t=Di(),e=Ye();let r=class extends t.AggregateEvaluator{constructor(a,s,o){super(a,s,o);k(this,"state")}emptyValueTerm(){return(0,e.typedLiteral)("0",e.TypeURL.XSD_INTEGER)}putTerm(a){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,e.typedLiteral)(String(this.state),e.TypeURL.XSD_INTEGER)}};return VT.CountAggregator=r,VT}var Wme;function R_t(){if(Wme)return UT;Wme=1,Object.defineProperty(UT,"__esModule",{value:!0}),UT.ActorBindingsAggregatorFactoryCount=void 0;const t=Di(),e=ke(),r=Ft(),n=APe();let i=class extends t.ActorBindingsAggregatorFactory{constructor(s){super(s)}async test(s){return s.expr.aggregator!=="count"||s.expr.expression.subType===r.Algebra.ExpressionTypes.WILDCARD?(0,e.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,e.passTestVoid)()}async run({context:s,expr:o}){return new n.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:s}),o.distinct)}};return UT.ActorBindingsAggregatorFactoryCount=i,UT}var Kme;function P_t(){return Kme||(Kme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(R_t(),t),r(APe(),t)}(Nq)),Nq}var Fq={},GT={},HT={},Xme;function TPe(){if(Xme)return HT;Xme=1,Object.defineProperty(HT,"__esModule",{value:!0}),HT.GroupConcatAggregator=void 0;const t=Di(),e=Ye();let r=class extends t.AggregateEvaluator{constructor(a,s,o,c,u){super(a,s,u);k(this,"dataFactory");k(this,"state");k(this,"lastLanguageValid",!0);k(this,"lastLanguage");k(this,"separator");this.dataFactory=o,this.separator=c??" "}emptyValueTerm(){return e.typedLiteral("",e.TypeURL.XSD_STRING)}putTerm(a){this.state===void 0?(this.state=a.value,a.termType==="Literal"&&(this.lastLanguage=a.language)):(this.state+=this.separator+a.value,this.lastLanguageValid&&a.termType==="Literal"&&this.lastLanguage!==a.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?e.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):e.typedLiteral(this.state,e.TypeURL.XSD_STRING)}};return HT.GroupConcatAggregator=r,HT}var Jme;function N_t(){if(Jme)return GT;Jme=1,Object.defineProperty(GT,"__esModule",{value:!0}),GT.ActorBindingsAggregatorFactoryGroupConcat=void 0;const t=Di(),e=dt,r=ke(),n=TPe();let i=class extends t.ActorBindingsAggregatorFactory{constructor(s){super(s)}async test(s){return s.expr.aggregator!=="group_concat"?(0,r.failTest)("This actor only supports the 'group_concat' aggregator."):(0,r.passTestVoid)()}async run({context:s,expr:o}){return new n.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:s}),o.distinct,s.getSafe(e.KeysInitQuery.dataFactory),o.separator)}};return GT.ActorBindingsAggregatorFactoryGroupConcat=i,GT}var Yme;function F_t(){return Yme||(Yme=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(N_t(),t),r(TPe(),t)}(Fq)),Fq}var Mq={},kT={},zT={},$me;function wPe(){if($me)return zT;$me=1,Object.defineProperty(zT,"__esModule",{value:!0}),zT.SampleAggregator=void 0;const t=Di();let e=class extends t.AggregateEvaluator{constructor(i,a,s){super(i,a,s);k(this,"state")}putTerm(i){this.state===void 0&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return zT.SampleAggregator=e,zT}var Zme;function M_t(){if(Zme)return kT;Zme=1,Object.defineProperty(kT,"__esModule",{value:!0}),kT.ActorBindingsAggregatorFactorySample=void 0;const t=Di(),e=ke(),r=wPe();let n=class extends t.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="sample"?(0,e.failTest)("This actor only supports the 'sample' aggregator."):(0,e.passTestVoid)()}async run({context:a,expr:s}){return new r.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s.expression,context:a}),s.distinct)}};return kT.ActorBindingsAggregatorFactorySample=n,kT}var ege;function D_t(){return ege||(ege=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(M_t(),t),r(wPe(),t)}(Mq)),Mq}var Dq={},QT={},WT={},tge;function SPe(){if(tge)return WT;tge=1,Object.defineProperty(WT,"__esModule",{value:!0}),WT.SumAggregator=void 0;const t=Di(),e=Ye();let r=class extends t.AggregateEvaluator{constructor(a,s,o,c,u){super(a,s,u);k(this,"dataFactory");k(this,"additionFunction");k(this,"state");this.dataFactory=o,this.additionFunction=c}emptyValueTerm(){return(0,e.typedLiteral)("0",e.TypeURL.XSD_INTEGER)}putTerm(a){if(this.state===void 0)this.state=this.termToNumericOrError(a);else{const s=this.termToNumericOrError(a);this.state=this.additionFunction.applyOnTerms([this.state,s],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return WT.SumAggregator=r,WT}var rge;function C_t(){if(rge)return QT;rge=1,Object.defineProperty(QT,"__esModule",{value:!0}),QT.ActorBindingsAggregatorFactorySum=void 0;const t=Di(),e=dt,r=ke(),n=Ye(),i=SPe();let a=class extends t.ActorBindingsAggregatorFactory{constructor(c){super(c);k(this,"mediatorFunctionFactory");this.mediatorFunctionFactory=c.mediatorFunctionFactory}async test(c){return c.expr.aggregator!=="sum"?(0,r.failTest)("This actor only supports the 'sum' aggregator."):(0,r.passTestVoid)()}async run({expr:c,context:u}){return new i.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:c.expression,context:u}),c.distinct,u.getSafe(e.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:u,requireTermExpression:!0}))}};return QT.ActorBindingsAggregatorFactorySum=a,QT}var nge;function L_t(){return nge||(nge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(C_t(),t),r(SPe(),t)}(Dq)),Dq}var Cq={},KT={},XT={},ige;function xPe(){if(ige)return XT;ige=1,Object.defineProperty(XT,"__esModule",{value:!0}),XT.WildcardCountAggregator=void 0;const t=Di(),e=Ye(),r=Br();let n=class extends t.AggregateEvaluator{constructor(s,o,c){super(s,o,c);k(this,"bindingValues",new Map);k(this,"state")}putTerm(s){}async putBindings(s){this.handleDistinct(s)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,e.typedLiteral)("0",e.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,e.typedLiteral)(String(this.state),e.TypeURL.XSD_INTEGER)}handleDistinct(s){if(this.distinct){const o=[...s];o.sort((f,h)=>f[0].value.localeCompare(h[0].value));const c=o.map(([f])=>f.value).join(","),u=o.map(([,f])=>r.termToString(f)).join(","),l=this.bindingValues.get(c),d=l!==void 0&&l.has(u);return l||this.bindingValues.set(c,new Set),this.bindingValues.get(c).add(u),d}return!1}};return XT.WildcardCountAggregator=n,XT}var age;function j_t(){if(age)return KT;age=1,Object.defineProperty(KT,"__esModule",{value:!0}),KT.ActorBindingsAggregatorFactoryWildcardCount=void 0;const t=Di(),e=ke(),r=xPe();let n=class extends t.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="count"||a.expr.expression.subType!=="wildcard"?(0,e.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,e.passTestVoid)()}async run({context:a,expr:s}){return new r.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s.expression,context:a}),s.distinct)}};return KT.ActorBindingsAggregatorFactoryWildcardCount=n,KT}var sge;function B_t(){return sge||(sge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(j_t(),t),r(xPe(),t)}(Cq)),Cq}var Lq={},JT={},jq={},YT={},Bq={},wd={},oge;function q_t(){if(oge)return wd;oge=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.readableFromWeb=wd.ReadableFromWeb=void 0;const t=Wt;let e=class extends t.Readable{constructor(i,a){super(a),this.reader=i.getReader(),this.readerClosed=!1,this.reader.closed.then(()=>{this.readerClosed=!0}).catch(s=>{this.readerClosed=!0,this.destroy(s)})}_read(){this.reader.read().then(i=>this.push(i.done?null:i.value)).catch(i=>this.destroy(i))}destroy(i){return this.readerClosed||this.reader.cancel(i).then().catch(()=>{}),super.destroy(i)}};wd.ReadableFromWeb=e;function r(n,i){return new e(n,i)}return wd.readableFromWeb=r,wd}var uge;function EPe(){return uge||(uge=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.readableFromWeb=void 0;var e=q_t();Object.defineProperty(t,"readableFromWeb",{enumerable:!0,get:function(){return e.readableFromWeb}})}(Bq)),Bq}var qq,cge;function IPe(){if(cge)return qq;cge=1;const t=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";return t.writable=e=>t(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object",t.readable=e=>t(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object",t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&typeof e._transform=="function",qq=t,qq}var Uq={exports:{}},lge;function U_t(){return lge||(lge=1,function(t){t.exports=e,t.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function e(r){if(!t.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var n=!1,i={};function a(c){i.data=l,i.end=l,i.end=d,i.close=d,i.error=d;for(var u in i)r.on(u,i[u]);r.pause();function l(f){n||(c.enqueue(f),r.pause())}function d(f){if(!n){n=!0;for(var h in i)r.removeListener(h,i[h]);f?c.error(f):c.close()}}}function s(){n||r.resume()}function o(){n=!0;for(var c in i)r.removeListener(c,i[c]);r.push(null),r.pause(),r.destroy?r.destroy():r.close&&r.close()}return new ReadableStream({start:a,pull:s,cancel:o})}}(Uq)),Uq.exports}var dge;function RPe(){if(dge)return YT;dge=1,Object.defineProperty(YT,"__esModule",{value:!0}),YT.ActorHttp=void 0;const t=ke(),e=EPe(),r=IPe(),n=U_t();let i=class OPe extends t.Actor{constructor(s){super(s)}static toNodeReadable(s){return r(s)||s===null?s:(0,e.readableFromWeb)(s)}static toWebReadableStream(s){return n(s)}static headersToHash(s){const o={};return s.forEach((c,u)=>{o[u]=c}),o}static getInputUrl(s){return new URL(s instanceof Request?s.url:s)}static createUserAgent(s,o){if(!OPe.isBrowser()){const c=[`Comunica/${o.split(".")[0]}.0`,`${s}/${o}`];return typeof globalThis.navigator=="object"&&typeof globalThis.navigator.userAgent=="string"?c.push(globalThis.navigator.userAgent):typeof globalThis.process=="object"&&typeof globalThis.process.versions=="object"&&typeof globalThis.process.versions.node=="string"&&c.push(`Node.js/${globalThis.process.versions.node.split(".")[0]}`),typeof globalThis.process=="object"&&typeof globalThis.process.platform=="string"&&typeof globalThis.process.arch=="string"&&c.splice(1,0,`(${globalThis.process.platform}; ${globalThis.process.arch})`),c.join(" ")}}static isBrowser(){return typeof globalThis.window=="object"&&typeof globalThis.window.document=="object"||typeof globalThis.importScripts=="function"}};return YT.ActorHttp=i,YT}var UP={},fge;function V_t(){if(fge)return UP;fge=1,Object.defineProperty(UP,"__esModule",{value:!0}),UP.validateAndCloseHttpResponse=r;const t=m0(),e=RPe();async function r(n,i){var a;if(i.status>=400){let s="empty response";if(i.body){const o=e.ActorHttp.toNodeReadable(i.body);s=await(0,t.stringify)(o)}throw new Error(`Could not update ${n} (HTTP status ${i.status}):
${s}`)}await((a=i.body)==null?void 0:a.cancel())}return UP}var hge;function Yo(){return hge||(hge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(RPe(),t),r(V_t(),t)}(jq)),jq}var pge;function G_t(){if(pge)return JT;pge=1,Object.defineProperty(JT,"__esModule",{value:!0}),JT.ActorHttpWayback=void 0;const t=Yo(),e=dt,r=ke(),n=m0(),i="http://wayback.archive-it.org/";function a(c){const u=new Request(c.input,c.init);return{input:new Request(new URL(`/${u.url}`,i),u)}}function s(c){const u=c.get(e.KeysHttpProxy.httpProxyHandler);return u?l=>u.getProxy(a(l)):l=>Promise.resolve(a(l))}let o=class extends t.ActorHttp{constructor(l){super(l);k(this,"mediatorHttp");this.mediatorHttp=l.mediatorHttp}async test(l){return(0,r.passTestVoid)()}async run(l){let d=await this.mediatorHttp.mediate(l);if(d.status===404&&l.context.get(e.KeysHttpWayback.recoverBrokenLinks)){let f=await this.mediatorHttp.mediate({...l,context:l.context.set(e.KeysHttpWayback.recoverBrokenLinks,!1).set(e.KeysHttpProxy.httpProxyHandler,{getProxy:s(l.context)})});f.status===200&&([d,f]=[f,d]);const{body:h}=f;h&&("cancel"in h&&typeof h.cancel=="function"?await h.cancel():"destroy"in h&&typeof h.destroy=="function"?h.destroy():await(0,n.stringify)(t.ActorHttp.toNodeReadable(h)))}return d}};return JT.ActorHttpWayback=o,JT}var _ge;function H_t(){return _ge||(_ge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(G_t(),t)}(Lq)),Lq}var Vq={},$T={},Gq={},ZT={},mge;function k_t(){if(mge)return ZT;mge=1,Object.defineProperty(ZT,"__esModule",{value:!0}),ZT.ActorRdfUpdateHypermedia=void 0;const t=ke();let e=class extends t.Actor{constructor(i,a){super(i);k(this,"destinationType");this.destinationType=a}async test(i){return i.forceDestinationType&&this.destinationType!==i.forceDestinationType?(0,t.failTest)(`Actor ${this.name} is not able to handle destination type ${i.forceDestinationType}.`):this.testMetadata(i)}};return ZT.ActorRdfUpdateHypermedia=e,ZT}var gge;function OQ(){return gge||(gge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(k_t(),t)}(Gq)),Gq}var ew={},yge;function PPe(){if(yge)return ew;yge=1,Object.defineProperty(ew,"__esModule",{value:!0}),ew.QuadDestinationPatchSparqlUpdate=void 0;const t=Yo(),e=ir(),r=TO(),n=Wt;let i=class{constructor(s,o,c){k(this,"url");k(this,"context");k(this,"mediatorHttp");this.url=s,this.context=o,this.mediatorHttp=c}async update(s){const o=this.createCombinedQuadsQuery(s.insert,s.delete);await this.wrapSparqlUpdateRequest(o)}createCombinedQuadsQuery(s,o){return new e.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",o)).append(o&&s?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",s))}createQuadsQuery(s,o){return o?o.map(c=>{let u=`${(0,r.termToString)(c.subject)} ${(0,r.termToString)(c.predicate)} ${(0,r.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?u=`  ${u}
`:u=`  GRAPH ${(0,r.termToString)(c.graph)} { ${u} }
`,u}).prepend([`${s} DATA {
`]).append(["}"]):new e.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(s){const o=new n.Readable;o.wrap(s);const c=new Headers({"content-type":"application/sparql-update"}),u=await this.mediatorHttp.mediate({context:this.context,init:{headers:c,method:"PATCH",body:t.ActorHttp.toWebReadableStream(o)},input:this.url});await(0,t.validateAndCloseHttpResponse)(this.url,u)}async deleteGraphs(s,o,c){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(s,o){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}};return ew.QuadDestinationPatchSparqlUpdate=i,ew}var bge;function z_t(){if(bge)return $T;bge=1,Object.defineProperty($T,"__esModule",{value:!0}),$T.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const t=OQ(),e=ke(),r=PPe();let n=class extends t.ActorRdfUpdateHypermedia{constructor(s){super(s,"patchSparqlUpdate");k(this,"mediatorHttp");this.mediatorHttp=s.mediatorHttp}async testMetadata(s){return!s.forceDestinationType&&!s.metadata.patchSparqlUpdate?(0,e.failTest)(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`):!s.forceDestinationType&&!s.exists?(0,e.failTest)(`Actor ${this.name} can only patch a destination that already exists.`):(0,e.passTestVoid)()}async run(s){return this.logInfo(s.context,`Identified as patchSparqlUpdate destination: ${s.url}`),{destination:new r.QuadDestinationPatchSparqlUpdate(s.url,s.context,this.mediatorHttp)}}};return $T.ActorRdfUpdateHypermediaPatchSparqlUpdate=n,$T}var vge;function Q_t(){return vge||(vge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(z_t(),t),r(PPe(),t)}(Vq)),Vq}var Hq={},tw={},rw={},Age;function NPe(){if(Age)return rw;Age=1,Object.defineProperty(rw,"__esModule",{value:!0}),rw.QuadDestinationPutLdp=void 0;const t=Yo();let e=class{constructor(n,i,a,s,o,c){k(this,"url");k(this,"context");k(this,"mediaTypes");k(this,"mediatorHttp");k(this,"mediatorRdfSerializeMediatypes");k(this,"mediatorRdfSerialize");this.url=n,this.context=i,this.mediaTypes=a,this.mediatorHttp=s,this.mediatorRdfSerializeMediatypes=o,this.mediatorRdfSerialize=c}async update(n){if(n.delete)throw new Error("Put-based LDP destinations don't support deletions");n.insert&&await this.wrapRdfUpdateRequest("INSERT",n.insert)}async wrapRdfUpdateRequest(n,i){const{mediaTypes:a}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),s=this.mediaTypes.filter(d=>d in a),o=s.length>0?s[0]:Object.keys(a).sort((d,f)=>a[f]-a[d])[0],{handle:{data:c}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:i,context:this.context},handleMediaType:o}),u=new Headers({"content-type":o}),l=await this.mediatorHttp.mediate({context:this.context,init:{headers:u,method:"PUT",body:t.ActorHttp.toWebReadableStream(c)},input:this.url});await(0,t.validateAndCloseHttpResponse)(this.url,l)}async deleteGraphs(n,i,a){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(n,i){throw new Error("Put-based LDP destinations don't support named graphs")}};return rw.QuadDestinationPutLdp=e,rw}var Tge;function W_t(){if(Tge)return tw;Tge=1,Object.defineProperty(tw,"__esModule",{value:!0}),tw.ActorRdfUpdateHypermediaPutLdp=void 0;const t=OQ(),e=ke(),r=NPe();let n=class extends t.ActorRdfUpdateHypermedia{constructor(s){super(s,"putLdp");k(this,"mediatorHttp");k(this,"mediatorRdfSerializeMediatypes");k(this,"mediatorRdfSerialize");this.mediatorHttp=s.mediatorHttp,this.mediatorRdfSerializeMediatypes=s.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize=s.mediatorRdfSerialize}async testMetadata(s){if(!s.forceDestinationType){if(!s.metadata.allowHttpMethods||!s.metadata.allowHttpMethods.includes("PUT"))return(0,e.failTest)(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(s.exists)return(0,e.failTest)(`Actor ${this.name} can only put on a destination that does not already exists.`)}return(0,e.passTestVoid)()}async run(s){return this.logInfo(s.context,`Identified as putLdp destination: ${s.url}`),{destination:new r.QuadDestinationPutLdp(s.url,s.context,s.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}};return tw.ActorRdfUpdateHypermediaPutLdp=n,tw}var wge;function K_t(){return wge||(wge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(W_t(),t),r(NPe(),t)}(Hq)),Hq}var kq={},nw={},iw={},zq={},aw={};const Sd="http://www.w3.org/1999/02/22-rdf-syntax-ns#",sw="http://www.w3.org/2001/XMLSchema#",VP="http://www.w3.org/2000/10/swap/",Cn={xsd:{decimal:`${sw}decimal`,boolean:`${sw}boolean`,double:`${sw}double`,integer:`${sw}integer`,string:`${sw}string`},rdf:{type:`${Sd}type`,nil:`${Sd}nil`,first:`${Sd}first`,rest:`${Sd}rest`,langString:`${Sd}langString`,dirLangString:`${Sd}dirLangString`,reifies:`${Sd}reifies`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${VP}reify#forSome`,forAll:`${VP}reify#forAll`},log:{implies:`${VP}log#implies`,isImpliedBy:`${VP}log#isImpliedBy`}},{xsd:GP}=Cn,X_t=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Sge={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},J_t=/[\x00-\x20<>\\"\{\}\|\^\`]/,Y_t={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_dircode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},$_t=/$0^/;class RQ{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9])/i,this._dircode=/^--(ltr)|(rtl)/,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._atKeyword=/^@[a-z]+(?=[\s#<:])/i,this._keyword=/^(?:PREFIX|BASE|VERSION|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const r in this)!(r in Y_t)&&this[r]instanceof RegExp&&(this[r]=$_t)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let o,c;for(;o=this._newline.exec(n);)this.comments&&(c=this._comment.exec(o[0]))&&a("comment",c[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),i=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(c=this._comment.exec(n))&&a("comment",c[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const u=this._line,l=n[0];let d="",f="",h="",p=null,_=0,g=!1;switch(l){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){g=!0;break}}else{this._n3Mode&&(_=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),f===null||J_t.test(f))return s(this);d="IRI"}else n.length>2&&n[1]==="<"&&n[2]==="("?(d="<<(",_=3):!this._lineMode&&n.length>(r?1:2)&&n[1]==="<"?(d="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(_=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",_=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if({value:f,matchLength:_}=this._parseLiteral(n),f===null)return s(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))&&p[1]!=="version"?(d="langcode",f=p[1]):(p=this._atKeyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){d=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":if(n[1]==="-"){this._previousMarker==="langcode"&&(p=this._dircode.exec(n))&&(d="dircode",_=2,f=p[1]||p[2],_=f.length+2);break}(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h=typeof p[1]=="string"?GP.double:typeof p[2]=="string"?GP.decimal:GP.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":case"V":case"v":(p=this._keyword.exec(n))?d=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=GP.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(_=1,f="="):(_=2,f=">"));break;case"!":if(!this._n3Mode)break;case")":if(!r&&(n.length===1||n.length===2&&n[1]===">"))break;if(n.length>2&&n[1]===">"&&n[2]===">"){d=")>>",_=3;break}case",":case";":case"[":case"]":case"(":case"}":case"~":this._lineMode||(_=1,d=l);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",_=2):(d=l,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",_=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",f=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const m=_||p[0].length,y=a(d,f,h,u,m);this.previousToken=y,this._previousMarker=d,n=n.substr(m,n.length)}function a(o,c,u,l,d){const f=n?i-n.length:i,h=f+d,p={type:o,value:c,prefix:u,line:l,start:f,end:h};return e(null,p),p}function s(o){e(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1;const n=e.replace(X_t,(i,a,s,o)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return o in Sge?Sge[o]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){const r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let a=0;for(;e[i-a-1]==="\\";)a++;if(a%2===0){const s=e.substring(n,i),o=s.split(/\r\n|\r|\n/).length-1,c=i+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(s),matchLength:c}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((a,s)=>a?i=a:n.push(s),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Ni.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}}const{rdf:xge,xsd:Gd}=Cn;let v0,Z_t=0;const Ys={namedNode:FPe,blankNode:MPe,variable:CPe,literal:DPe,defaultGraph:emt,quad:NG,triple:NG,fromTerm:EE,fromQuad:LPe};class Ha{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Ha?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class _M extends Ha{get termType(){return"NamedNode"}}class Pu extends Ha{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let r=e.lastIndexOf('"')+1;const n=e.lastIndexOf("--");return r<e.length&&e[r++]==="@"?(n>r?e.substr(0,n):e).substr(r).toLowerCase():""}get direction(){const e=this.id,r=e.lastIndexOf("--")+2;return r>1&&r<e.length?e.substr(r).toLowerCase():""}get datatype(){return new _M(this.datatypeString)}get datatypeString(){const e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?Gd.string:e.indexOf("--",r)>0?xge.dirLangString:xge.langString}equals(e){return e instanceof Pu?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(this.direction===e.direction||this.direction===""&&!e.direction)&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,direction:this.direction,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class PQ extends Ha{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class NQ extends Ha{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class FQ extends Ha{constructor(){return super(""),v0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}v0=new FQ;function af(t,e,r){if(e=e||Ys,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Ys)return new Pu(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);let i;if(t[n+1]==="@"){i=t.substr(n+2);const a=i.lastIndexOf("--");a>0&&a<i.length&&(i={language:i.substr(0,a),direction:i.substr(a+2)})}else i=e.namedNode(t.substr(n+3));return e.literal(t.substr(1,n-1),i);case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(af(t[0],e,!0),af(t[1],e,!0),af(t[2],e,!0),t[3]&&af(t[3],e,!0))}function dl(t,e){if(typeof t=="string")return t;if(t instanceof Ha&&t.termType!=="Quad")return t.id;if(!t)return v0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}${t.direction?`--${t.direction}`:""}`:t.datatype&&t.datatype.value!==Gd.string?`^^${t.datatype.value}`:""}`;case"Quad":const r=[dl(t.subject,!0),dl(t.predicate,!0),dl(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(dl(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}class Kp extends Ha{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||v0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function FPe(t){return new _M(t)}function MPe(t){return new PQ(t||`n3-${Z_t++}`)}function DPe(t,e){if(typeof e=="string")return new Pu(`"${t}"@${e.toLowerCase()}`);if(e!==void 0&&!("termType"in e))return new Pu(`"${t}"@${e.language.toLowerCase()}${e.direction?`--${e.direction.toLowerCase()}`:""}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=Gd.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?Gd.integer:Gd.double:(r=Gd.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===Gd.string?new Pu(`"${t}"`):new Pu(`"${t}"^^${r}`)}function CPe(t){return new NQ(t)}function emt(){return v0}function NG(t,e,r,n){return new Kp(t,e,r,n)}function EE(t){if(t instanceof Ha)return t;switch(t.termType){case"NamedNode":return FPe(t.value);case"BlankNode":return MPe(t.value);case"Variable":return CPe(t.value);case"DefaultGraph":return v0;case"Literal":return DPe(t.value,t.language||t.datatype);case"Quad":return LPe(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function LPe(t){if(t instanceof Kp)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return NG(EE(t.subject),EE(t.predicate),EE(t.object),EE(t.graph))}let Ege=0;class Cf{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&jPe(this,e.factory);const r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),o=this._n3Mode=/n3/.test(r),c=a||s;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||a||o),this._isImpliedBy=e.isImpliedBy,c&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new RQ({lineMode:c,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers,this._parseUnsupportedVersions=!!e.parseUnsupportedVersions,this._version=e.version}static _resetBlankNodePrefix(){Ege=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,a){const s=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readBeforeTopContext(e){return this._version&&!this._isValidVersion(this._version)?this._error(`Detected unsupported version as media type parameter: "${this._version}"`,e):this._readInTopContext(e)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"VERSION":this._sparqlStyle=!0;case"@version":return this._readVersion;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":const a=this._prefixes[e.prefix];if(a===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(a+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<(":return this._n3Mode?(this._saveContext("<<(",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Disallowed triple term as subject",e);case"<<":return this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject;default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":case"|}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._validAnnotation=!0,this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":const r=this._contextStack;return(r.length&&r[r.length-1]).type==="<<"?this._error("Unexpected list in reified triple",e):(this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem);case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<(":return this._saveContext("<<(",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;case"<<":return this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){if(e.type==="]")return this._subject=null,this._readBlankNodeTail(e);{const r=this._contextStack;return(r.length>1&&r[r.length-2]).type==="<<"?this._error("Unexpected compound blank node expression in reified triple",e):(this._predicate=null,this._readPredicate(e))}}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem;const a=this._subject,s=this._contextStack,o=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":this._saveContext("<<",this._graph,null,null,null),this._graph=null,i=this._readSubject;break;default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),e.type==="<<"&&(s[s.length-1].subject=this._subject),a===null?o.predicate===null?o.subject=n:o.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e,r){let n=this._factory.literal(this._literalValue),i;switch(e.type){case"type":case"typeIRI":const a=this._readEntity(e);if(a===void 0)return;if(a.value===Cn.rdf.langString||a.value===Cn.rdf.dirLangString)return this._error("Detected illegal (directional) languaged-tagged string with explicit datatype",e);n=this._factory.literal(this._literalValue,a),e=null;break;case"langcode":if(e.value.length>8)return this._error("Detected language tag of length larger than 8",e);n=this._factory.literal(this._literalValue,e.value),this._literalLanguage=e.value,e=null,i=this._readDirCode.bind(this,r);break}return{token:e,literal:n,readCb:i}}_readDirCode(e,r,n){if(n.type==="dircode"){const i=this._factory.literal(this._literalValue,{language:this._literalLanguage,direction:n.value});e==="subject"?this._subject=i:this._object=i,this._literalLanguage=void 0,n=null}return e==="subject"?n===null?this._readPredicateOrNamedGraph:this._readPredicateOrNamedGraph(n):this._completeObjectLiteralPost(n,r)}_completeSubjectLiteral(e){const r=this._completeLiteral(e,"subject");return this._subject=r.literal,r.readCb?r.readCb.bind(this,!1):this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){const n=this._completeLiteral(e,"object");if(n)return this._object=n.literal,n.readCb?n.readCb.bind(this,r):this._completeObjectLiteralPost(n.token,r)}_completeObjectLiteralPost(e,r){return r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),e===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(e))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,i=!1;const a=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,this._tripleTerm=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"~":r=this._readReifierInAnnotation,i=!0;break;case"{|":this._subject=this._readTripleTerm(),this._validAnnotation=!1,i=!0,r=this._readPredicate;break;case"|}":if(!this._annotation)return this._error("Unexpected annotation syntax closing",e);if(!this._validAnnotation)return this._error("Annotation block can not be empty",e);this._subject=null,this._annotation=!1,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null&&(!i||i&&!this._annotation)){const o=this._predicate,c=this._object;s?this._emit(c,o,a,n):this._emit(a,o,c,n)}return i&&(this._annotation=!0),r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){const r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_isValidVersion(e){return this._parseUnsupportedVersions||Cf.SUPPORTED_VERSIONS.includes(e)}_readVersion(e){return e.type!=="literal"?this._error("Expected literal to follow version declaration",e):e.end-e.start!==e.value.length+2?this._error("Version declarations must use single quotes",e):(this._versionCallback(e.value),this._isValidVersion(e.value)?this._readDeclarationPunctuation:this._error(`Detected unsupported version: "${e.value}"`,e))}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n;const i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){const r=this._factory.blankNode();let n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readTripleTermTail(e){if(e.type!==")>>")return this._error(`Expected )>> but got ${e.type}`,e);const r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<(",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_readReifiedTripleTailOrReifier(e){return e.type==="~"?this._readReifier:this._readReifiedTripleTail(e)}_readReifiedTripleTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);this._tripleTerm=null;const r=this._readTripleTerm();this._restoreContext("<<",e);const n=this._contextStack,i=n.length&&n[n.length-1];return i&&i.type==="list"?(this._emit(this._subject,this.RDF_FIRST,r,this._graph),this._getContextEndReader()):this._subject===null?(this._subject=r,this._readPredicateOrReifierTripleEnd):(this._object=r,this._getContextEndReader())}_readPredicateOrReifierTripleEnd(e){return e.type==="."?(this._subject=null,this._readPunctuation(e)):this._readPredicate(e)}_readReifier(e){return this._reifier=this._readEntity(e),this._readReifiedTripleTail}_readReifierInAnnotation(e){return e.type==="IRI"||e.type==="typeIRI"||e.type==="type"||e.type==="prefixed"||e.type==="blank"||e.type==="var"?(this._reifier=this._readEntity(e),this._readPunctuation):(this._readTripleTerm(),this._subject=null,this._readPunctuation(e))}_readTripleTerm(){const e=this._contextStack,r=e.length&&e[e.length-1],n=r?r.graph:void 0,i=this._reifier||this._factory.blankNode();return this._reifier=null,this._tripleTerm=this._tripleTerm||this._factory.quad(this._subject,this._predicate,this._object),this._emit(i,this.RDF_REIFIES,this._tripleTerm,n||this.DEFAULTGRAPH),i}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<(":return this._readTripleTermTail;case"<<":return this._readReifiedTripleTailOrReifier}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){const n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=ow}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const r=e.length;let n="",i=-1,a=-1,s=0,o="/";for(;i<r;){switch(o){case":":if(a<0&&e[++i]==="/"&&e[++i]==="/")for(;(a=i+1)<r&&e[a]!=="/";)i=a;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(o=e[++i+1],o){case"/":n+=e.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return n+e.substring(s,i)+e.substr(i+1);case".":if(o=e[++i+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=e.substring(s,i-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),o!=="/")return`${n}/${e.substr(i+1)}`;s=i+1}}}o=e[++i]}return n+e.substring(s)}parse(e,r,n,i){let a,s,o,c;if(r&&(r.onQuad||r.onPrefix||r.onComment||r.onVersion)?(a=r.onQuad,s=r.onPrefix,o=r.onComment,c=r.onVersion):(a=r,s=n,c=i),this._readCallback=this._readBeforeTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Ege++}_`,this._prefixCallback=s||ow,this._versionCallback=c||ow,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const l=[];let d;if(this._callback=(f,h)=>{f?d=f:h&&l.push(h)},this._lexer.tokenize(e).every(f=>this._readCallback=this._readCallback(f)),d)throw d;return l}let u=(l,d)=>{l!==null?(this._callback(l),this._callback=ow):this._readCallback&&(this._readCallback=this._readCallback(d))};o&&(this._lexer.comments=!0,u=(l,d)=>{l!==null?(this._callback(l),this._callback=ow):this._readCallback&&(d.type==="comment"?o(d.value):this._readCallback=this._readCallback(d))}),this._callback=a,this._lexer.tokenize(e,u)}}function ow(){}function jPe(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(Cn.rdf.first),t.RDF_REST=e.namedNode(Cn.rdf.rest),t.RDF_NIL=e.namedNode(Cn.rdf.nil),t.RDF_REIFIES=e.namedNode(Cn.rdf.reifies),t.N3_FORALL=e.namedNode(Cn.r.forAll),t.N3_FORSOME=e.namedNode(Cn.r.forSome),t.ABBREVIATIONS={a:e.namedNode(Cn.rdf.type),"=":e.namedNode(Cn.owl.sameAs),">":e.namedNode(Cn.log.implies),"<":e.namedNode(Cn.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}Cf.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"];jPe(Cf.prototype,Ys);function tmt(t){return!!t&&t.termType==="NamedNode"}function rmt(t){return!!t&&t.termType==="BlankNode"}function nmt(t){return!!t&&t.termType==="Literal"}function imt(t){return!!t&&t.termType==="Variable"}function amt(t){return!!t&&t.termType==="Quad"}function UI(t){return!!t&&t.termType==="DefaultGraph"}function smt(t){return UI(t.graph)}function omt(t,e){return BPe({"":t.value||t},e)("")}function BPe(t,e){const r=Object.create(null);for(const i in t)n(i,t[i]);e=e||Ys;function n(i,a){if(typeof a=="string"){const s=Object.create(null);r[i]=o=>s[o]||(s[o]=e.namedNode(a+o))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}const qPe=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:smt,isBlankNode:rmt,isDefaultGraph:UI,isLiteral:nmt,isNamedNode:tmt,isQuad:amt,isVariable:imt,prefix:omt,prefixes:BPe},Symbol.toStringTag,{value:"Module"}));function L3(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const umt=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,cmt=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,Ige="./",lmt="../",Qq="?",Oge="#";class MO{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!umt.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!MO.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",L3(e)],n=[],i=[],a=/[^/?#]*([/?#])/y;let s,o=0,c=0,u=a.lastIndex=e.length;for(;!o&&!c&&(s=a.exec(this.base));)s[1]===Oge?c=a.lastIndex-1:(r.push(L3(s[0]),"(?:"),n.push(")?"),s[1]!==Qq?i.push(u=a.lastIndex):(o=u=a.lastIndex,c=this.base.indexOf(Oge,o),this._pathReplacements[o]=Qq));for(let l=0;l<i.length;l++)this._pathReplacements[i[l]]=lmt.repeat(i.length-l-1);return this._pathReplacements[i[i.length-1]]=Ige,this._baseLength=c>0?c:this.base.length,r.push(L3(this.base.substring(u,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){const r=this._getBaseMatcher().exec(e);if(!r)return e;const n=r[0].length;if(n===this._baseLength&&n===e.length)return"";const i=this._pathReplacements[n];if(i){const a=e.substring(n);return i!==Qq&&!cmt.test(a)?e:i===Ige&&/^[^?#]/.test(a)?a:i+a}return e.substring(n-1)}}const uw=Ys.defaultGraph(),{rdf:dmt,xsd:Ch}=Cn,Rge=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Pge=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,fmt={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class cw extends Ha{equals(e){return e===this}}class DO{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,a,s){n+=i,s&&s()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=uw,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new MO(r.baseIRI)))}get _inDefaultGraph(){return uw.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,a){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(uw.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(e,r,n,i,a){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),a)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(const n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),Rge.test(r)&&(r=r.replace(Pge,Nge));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;Rge.test(r)&&(r=r.replace(Pge,Nge));const n=e.direction?`--${e.direction}`:"";if(e.language)return`"${r}"@${e.language}${n}`;if(this._lineMode){if(e.datatype.value===Ch.string)return`"${r}"`}else switch(e.datatype.value){case Ch.string:return`"${r}"`;case Ch.boolean:if(r==="true"||r==="false")return r;break;case Ch.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Ch.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Ch.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===dmt.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<(${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${UI(i)?"":` ${this._encodeIriOrBlank(i)}`})>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,a){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,uw,i):this._writeQuad(e,r,n,i||uw,a)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){const i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let a=e[i];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=i+=":",this._write(`@prefix ${i} <${a}>.
`)}if(n){let i="",a="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];i=L3(i),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,a;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),a=n.length){case 0:return new cw("[]");case 1:if(i=n[0],!(i.object instanceof cw))return new cw(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let o=0;o<a;o++)i=n[o],i.predicate.equals(e)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(o?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new cw(`${s}
]`)}}list(e){const r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new cw(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function Nge(t){let e=fmt[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const Wq=Symbol("iter");function eI(t,e,r=4){if(r===0)return Object.assign(t,e);for(const n in e)t[n]=eI(t[n]||Object.create(null),e[n],r-1);return t}function UPe(t,e,r=4){let n=!1;for(const i in t)if(i in e){const a=r===0?null:UPe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}function VPe(t,e,r=4){let n=!1;for(const i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:eI({},t[i],r-1);else if(r!==0){const a=VPe(t[i],e[i],r-1);if(a!==!1)n=n||Object.create(null),n[i]=a;else if(r===3)return!1}return n}class MQ{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||Ys}_termFromId(e){if(e[0]==="."){const r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return af(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);let a;return r&&n&&i&&(UI(e.graph)||(a=this._termToNumericId(e.graph)))&&this._ids[a?`.${r}.${n}.${i}.${a}`:`.${r}.${n}.${i}`]}return this._ids[dl(e)]}_termToNewNumericId(e){const r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${UI(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:dl(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}}class wi{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||Ys,this._entityIndex=r.entityIndex||new MQ({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const r=this._graphs;let n,i;for(const a in r)for(const s in n=r[a].subjects)for(const o in i=n[s])e+=Object.keys(i[o]).length;return this._size=e}_addToIndex(e,r,n,i){const a=e[r]||(e[r]={}),s=a[n]||(a[n]={}),o=i in s;return o||(s[i]=null),!o}_removeFromIndex(e,r,n,i){const a=e[r],s=a[n];delete s[i];for(const o in s)return;delete a[n];for(const o in a)return;delete e[r]}*_findInIndex(e,r,n,i,a,s,o,c){let u,l,d;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(const _ in e)if(l=e[_]){p[a]=this._termFromId(f[_]),n&&((u=l,l={})[n]=u[n]);for(const g in l)if(d=l[g]){p[s]=this._termFromId(f[g]);const m=i?i in d?[i]:[]:Object.keys(d);for(let y=0;y<m.length;y++)p[o]=this._termFromId(f[m[y]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(e,r){for(const n in e)r(n)}_loopByKey0(e,r,n){let i,a;if(i=e[r])for(a in i)n(a)}_loopByKey1(e,r,n){let i,a;for(i in e)a=e[i],a[r]&&n(i)}_loopBy2Keys(e,r,n,i){let a,s,o;if((a=e[r])&&(s=a[n]))for(o in s)i(o)}_countInIndex(e,r,n,i){let a=0,s,o,c;r&&((s=e,e={})[r]=s[r]);for(const u in e)if(o=e[u]){n&&((s=o,o={})[n]=s[n]);for(const l in o)(c=o[l])&&(i?i in c&&a++:a+=Object.keys(c).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let a=this._graphs[i];return a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(a.subjects,e,r,n)?(this._addToIndex(a.predicates,r,n,e),this._addToIndex(a.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;const a=this._graphs;let s,o,c;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(s=a[i])||!(o=s.subjects[e])||!(c=o[r])||!(n in c))return!1;this._removeFromIndex(s.subjects,e,r,n),this._removeFromIndex(s.predicates,r,n,e),this._removeFromIndex(s.objects,n,e,r),this._size!==null&&this._size--;for(e in s.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){const a=new Wt.Readable({objectMode:!0}),s=this.readQuads(e,r,n,i);return a._read=o=>{for(;--o>=0;){const{done:c,value:u}=s.next();if(c){a.push(null);return}a.push(u)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){const a=this._getGraphs(i);let s,o,c,u;if(!(e&&!(o=this._termToNumericId(e))||r&&!(c=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(const l in a)(s=a[l])&&(o?u?yield*this._findInIndex(s.objects,u,o,c,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,o,c,null,"subject","predicate","object",l):c?yield*this._findInIndex(s.predicates,c,u,null,"predicate","object","subject",l):u?yield*this._findInIndex(s.objects,u,null,null,"object","subject","predicate",l):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",l))}match(e,r,n,i){return new Zc(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){const a=this._getGraphs(i);let s=0,o,c,u,l;if(e&&!(c=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n)))return 0;for(const d in a)(o=a[d])&&(e?n?s+=this._countInIndex(o.objects,l,c,u):s+=this._countInIndex(o.subjects,c,u,l):r?s+=this._countInIndex(o.predicates,u,l,c):s+=this._countInIndex(o.objects,l,c,u));return s}forEach(e,r,n,i,a){this.some(s=>(e(s,this),!1),r,n,i,a)}every(e,r,n,i,a){return!this.some(s=>!e(s,this),r,n,i,a)}some(e,r,n,i,a){for(const s of this.readQuads(r,n,i,a))if(e(s,this))return!0;return!1}getSubjects(e,r,n){const i=[];return this.forSubjects(a=>{i.push(a)},e,r,n),i}forSubjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.predicates,o,c,e):this._loopByKey1(s.subjects,o,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,r,n){const i=[];return this.forPredicates(a=>{i.push(a)},e,r,n),i}forPredicates(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.objects,c,o,e):this._loopByKey0(s.subjects,o,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,r,n){const i=[];return this.forObjects(a=>{i.push(a)},e,r,n),i}forObjects(e,r,n,i){const a=this._getGraphs(i);let s,o,c;if(e=this._uniqueEntities(e),!(r&&!(o=this._termToNumericId(r))||n&&!(c=this._termToNumericId(n))))for(i in a)(s=a[i])&&(o?c?this._loopBy2Keys(s.subjects,o,c,e):this._loopByKey1(s.objects,o,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,r,n){const i=[];return this.forGraphs(a=>{i.push(a)},e,r,n),i}forGraphs(e,r,n,i){for(const a in this._graphs)this.some(s=>(e(s.graph),!0),r,n,i,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(o,c)=>{throw new Error(`${o.value} ${c}`)},a=this.getQuads(null,Cn.rdf.rest,Cn.rdf.nil,null),s=e?[...a]:[];return a.forEach(o=>{const c=[];let u=!1,l,d;const f=o.graph;let h=o.subject;for(;h&&!u;){const p=this.getQuads(null,null,h,null),_=this.getQuads(h,null,null,null);let g,m=null,y=null,v=null;for(let A=0;A<_.length&&!u;A++)g=_[A],g.graph.equals(f)?l?u=i(h,"has non-list arcs out"):g.predicate.value===Cn.rdf.first?m?u=i(h,"has multiple rdf:first arcs"):s.push(m=g):g.predicate.value===Cn.rdf.rest?y?u=i(h,"has multiple rdf:rest arcs"):s.push(y=g):p.length?u=i(h,"can't be subject and object"):(l=g,d="subject"):u=i(h,"not confined to single graph");for(let A=0;A<p.length&&!u;++A)g=p[A],l?u=i(h,"can't have coreferences"):g.predicate.value===Cn.rdf.rest?v?u=i(h,"has incoming rdf:rest arcs"):v=g:(l=g,d="object");m?c.unshift(m.object):u=i(h,"has no list head"),h=v&&v.subject}u?e=!1:l&&(n[l[d].value]=c)}),e&&this.removeQuads(s),n}addAll(e){if(e instanceof Zc&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof wi&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=eI(this._graphs,e._graphs),this._size=null);else for(const r of e)this.add(r);return this}contains(e){if(e instanceof Zc&&(e=e.filtered),e===this)return!0;if(!(e instanceof wi)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));const r=this._graphs,n=e._graphs;let i,a,s,o,c;for(const u in n){if(!(i=r[u]))return!1;i=i.subjects;for(const l in a=n[u].subjects){if(!(s=i[l]))return!1;for(const d in o=a[l]){if(!(c=s[d]))return!1;for(const f in o[d])if(!(f in c))return!1}}}return!0}deleteMatches(e,r,n,i){for(const a of this.match(e,r,n,i))this.removeQuad(a);return this}difference(e){if(e&&e instanceof Zc&&(e=e.filtered),e===this)return new wi({entityIndex:this._entityIndex});if(e instanceof wi&&e._entityIndex===this._entityIndex){const r=new wi({entityIndex:this._entityIndex}),n=VPe(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof Zc&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const r=new wi({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof Zc&&(e=e.filtered),e===this){const r=new wi({entityIndex:this._entityIndex});return r._graphs=eI(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof wi&&this._entityIndex===e._entityIndex){const r=new wi({entityIndex:this._entityIndex}),n=UPe(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){const r=new wi({entityIndex:this._entityIndex});for(const n of this)r.add(e(n,this));return r}reduce(e,r){const n=this.readQuads();let i=r===void 0?n.next().value:r;for(const a of n)i=e(i,a,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new DO().quadsToString(this)}union(e){const r=new wi({entityIndex:this._entityIndex});return r._graphs=eI(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}}function vo(t,e,r=0){const n=e[r];if(n&&!(n in t))return!1;let i=!1;for(const a in n?{[n]:t[n]}:t){const s=r===2?null:vo(t[a],e,r+1);s!==!1&&(i=i||Object.create(null),i[a]=s)}return i}class Zc extends Wt.Readable{constructor(e,r,n,i,a,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:a,options:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:r,object:n,predicate:i,subject:a}=this,s=this._filtered=new wi({factory:e._factory,entityIndex:this.options.entityIndex});let o,c,u;if(a&&!(o=s._termToNumericId(a))||i&&!(c=s._termToNumericId(i))||n&&!(u=s._termToNumericId(n)))return s;const l=e._getGraphs(r);for(const d in l){let f,h,p,_;(_=l[d])&&(!o&&c?(h=vo(_.predicates,[c,u,o]))&&(f=vo(_.subjects,[o,c,u]),p=vo(_.objects,[u,o,c])):u?(p=vo(_.objects,[u,o,c]))&&(f=vo(_.subjects,[o,c,u]),h=vo(_.predicates,[c,u,o])):(f=vo(_.subjects,[o,c,u]))&&(h=vo(_.predicates,[c,u,o]),p=vo(_.objects,[u,o,c])),f&&(s._graphs[d]={subjects:f,predicates:h,objects:p}))}s._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[Wq]&&(this[Wq]=this[Symbol.iterator]());const r=this[Wq];for(;--e>=0;){const{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,a){return this.filtered.every(e,r,n,i,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,a){return this.filtered.forEach(e,r,n,i,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,a){return this.filtered.some(e,r,n,i,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new DO().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new Zc(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class GPe{dataset(e){return new wi(e)}}function HPe(t){const e=[];for(const{subject:r,object:n}of t.match(null,Ys.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Ys.defaultGraph())){const i=[...t.match(null,null,null,r)],a=[...t.match(null,null,null,n)];e.push({premise:i,conclusion:a})}return e}class kPe{constructor(e){this._store=e}_add(e,r,n,i,a){this._store._addToIndex(i.subjects,e,r,n)&&(this._store._addToIndex(i.predicates,r,n,e),this._store._addToIndex(i.objects,n,e,r),a())}_evaluatePremise(e,r,n,i=0){let a,s,o,c,u;const[l,d,f]=e.premise[i].value,h=r[e.premise[i].content],p=!(o=l.value);for(o in p?h:{[o]:h[o]})if(c=h[o]){p&&(l.value=Number(o)),a=!(o=d.value);for(o in a?c:{[o]:c[o]})if(u=c[o]){a&&(d.value=Number(o)),s=!(o=f.value);for(o in s?u:{[o]:u[o]})s&&(f.value=Number(o)),i===e.premise.length-1?e.conclusion.forEach(_=>{this._add(_.subject.value,_.predicate.value,_.object.value,r,()=>{n(_)})}):this._evaluatePremise(e,r,n,i+1);s&&(f.value=null)}a&&(d.value=null)}p&&(l.value=null)}_evaluateRules(e,r,n){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],r,n)}_reasonGraphNaive(e,r){const n=[];function i(o){o.next&&o.next.forEach(c=>{n.push([o.subject.value,o.predicate.value,o.object.value,c])})}const a=o=>{o.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,r,()=>{i(c)})})};this._evaluateRules(e,r,i);let s;for(;(s=n.pop())!==void 0;){const[o,c,u,l]=s,d=l.basePremise.subject.value;d||(l.basePremise.subject.value=o);const f=l.basePremise.predicate.value;f||(l.basePremise.predicate.value=c);const h=l.basePremise.object.value;h||(l.basePremise.object.value=u),l.premise.length===0?a(l.conclusion):this._evaluatePremise(l,r,i),d||(l.basePremise.subject.value=null),f||(l.basePremise.predicate.value=null),h||(l.basePremise.object.value=null)}}_createRule({premise:e,conclusion:r}){const n={},i=s=>s.termType==="Variable"?n[s.value]=n[s.value]||{}:{value:this._store._termToNewNumericId(s)},a=s=>({subject:i(s.subject),predicate:i(s.predicate),object:i(s.object)});return{premise:e.map(s=>a(s)),conclusion:r.map(s=>a(s)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=HPe(e)),e=e.map(n=>this._createRule(n));for(const n of e)for(const i of e)for(let a=0;a<i.premise.length;a++){const s=i.premise[a];for(const o of n.conclusion){if(Kq(s.subject,o.subject)&&Kq(s.predicate,o.predicate)&&Kq(s.object,o.object)){const c=new Set,u=[];s.subject.value=s.subject.value||1,s.object.value=s.object.value||1,s.predicate.value=s.predicate.value||1;for(let l=0;l<i.premise.length;l++)l!==a&&u.push(Fge(i.premise[l],c));(o.next=o.next||[]).push({premise:u,conclusion:i.conclusion,basePremise:s})}i.variables.forEach(c=>{c.value=null})}}for(const n of e){const i=new Set;n.premise=n.premise.map(a=>Fge(a,i))}const r=this._store._getGraphs();for(const n in r)this._reasonGraphNaive(e,r[n]);this._store._size=null}}function Fge({subject:t,predicate:e,object:r},n){const i=t.value||n.has(t)||(n.add(t),!1),a=e.value||n.has(e)||(n.add(e),!1),s=r.value||n.has(r)||(n.add(r),!1);return!i&&a?{content:"predicates",value:[e,r,t]}:s?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function Kq(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}class zPe extends Wt.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new Cf(e);let n,i;const a={onQuad:(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},onPrefix:(s,o)=>{this.emit("prefix",s,o)}};e&&e.comments&&(a.onComment=s=>{this.emit("comment",s)}),r.parse({on:(s,o)=>{switch(s){case"data":n=o;break;case"end":i=o;break}}},a),this._transform=(s,o,c)=>{n(s),c()},this._flush=s=>{i(),s()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}}class QPe extends Wt.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new DO({write:(n,i,a)=>{this.push(n),a&&a()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,i,a)=>{r.addQuad(n,a)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}}const hmt={Lexer:RQ,Parser:Cf,Writer:DO,Store:wi,StoreFactory:GPe,EntityIndex:MQ,StreamParser:zPe,StreamWriter:QPe,Util:qPe,Reasoner:kPe,BaseIRI:MO,DataFactory:Ys,Term:Ha,NamedNode:_M,Literal:Pu,BlankNode:PQ,Variable:NQ,DefaultGraph:FQ,Quad:Kp,Triple:Kp,termFromId:af,termToId:dl},pmt=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:MO,BlankNode:PQ,DataFactory:Ys,DefaultGraph:FQ,EntityIndex:MQ,Lexer:RQ,Literal:Pu,NamedNode:_M,Parser:Cf,Quad:Kp,Reasoner:kPe,Store:wi,StoreFactory:GPe,StreamParser:zPe,StreamWriter:QPe,Term:Ha,Triple:Kp,Util:qPe,Variable:NQ,Writer:DO,default:hmt,getRulesFromDataset:HPe,termFromId:af,termToId:dl},Symbol.toStringTag,{value:"Module"})),_mt=Pl(pmt);var Xq={},lw={},Mge;function mmt(){if(Mge)return lw;Mge=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.SparqlJsonParser=void 0;const t=jr(),e=Wt,r=kz();let n=class WPe{constructor(a){var s;a=a||{},this.dataFactory=a.dataFactory||new t.DataFactory,this.prefixVariableQuestionMark=!!a.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(s=a.suppressMissingStreamResultsError)!==null&&s!==void 0?s:!0,this.parseUnsupportedVersions=!!a.parseUnsupportedVersions}isValidVersion(a){return this.parseUnsupportedVersions||WPe.SUPPORTED_VERSIONS.includes(a)}parseJsonResults(a,s){if(s&&!this.isValidVersion(s))throw new Error(`Detected unsupported version as media type parameter: ${s}`);return a.results.bindings.map(o=>this.parseJsonBindings(o))}parseJsonResultsStream(a,s){const o=f=>d.emit("error",f);a.on("error",o);const c=new r;c.onError=o;let u=!1,l=!1;c.onValue=f=>{if(c.key==="vars"&&c.stack.length===2&&c.stack[1].key==="head")d.emit("variables",f.map(h=>this.dataFactory.variable(h))),u=!0;else if(c.key==="link"&&c.stack.length===2&&c.stack[1].key==="head")d.emit("link",f);else if(c.key==="version"&&c.stack.length===2&&c.stack[1].key==="head")this.isValidVersion(f)||d.emit("error",new Error(`Detected unsupported version: ${f}`)),d.emit("version",f);else if(c.key==="results"&&c.stack.length===1)l=!0;else if(typeof c.key=="number"&&c.stack.length===3&&c.stack[1].key==="results"&&c.stack[2].key==="bindings")try{d.push(this.parseJsonBindings(f))}catch(h){d.emit("error",h)}else c.key==="metadata"&&c.stack.length===1&&d.emit("metadata",f)};const d=a.on("end",f=>{!l&&!this.suppressMissingStreamResultsError?d.emit("error",new Error("No valid SPARQL query results were found.")):u||d.emit("variables",[])}).pipe(new e.Transform({objectMode:!0,transform(f,h,p){c.write(f),p()}}));return s&&!this.isValidVersion(s)&&d.destroy(new Error(`Detected unsupported version as media type parameter: ${s}`)),d}parseJsonBindings(a){const s={};for(const o in a){const c=a[o];s[this.prefixVariableQuestionMark?"?"+o:o]=this.parseJsonValue(c)}return s}parseJsonValue(a){let s;switch(a.type){case"bnode":s=this.dataFactory.blankNode(a.value);break;case"literal":if(a["xml:lang"]){const c=a["xml:lang"],u=a["its:dir"];s=this.dataFactory.literal(a.value,{language:c,direction:u})}else a.datatype?s=this.dataFactory.literal(a.value,this.dataFactory.namedNode(a.datatype)):s=this.dataFactory.literal(a.value);break;case"typed-literal":s=this.dataFactory.literal(a.value,this.dataFactory.namedNode(a.datatype));break;case"triple":const o=a.value;if(!o||!o.subject||!o.predicate||!o.object)throw new Error("Invalid quoted triple: "+JSON.stringify(a));s=this.dataFactory.quad(this.parseJsonValue(o.subject),this.parseJsonValue(o.predicate),this.parseJsonValue(o.object));break;default:s=this.dataFactory.namedNode(a.value);break}return s}parseJsonBoolean(a,s){if(s&&!this.isValidVersion(s))throw new Error(`Detected unsupported version as media type parameter: ${s}`);if("boolean"in a)return a.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(a,s){return s&&!this.isValidVersion(s)?Promise.reject(new Error(`Detected unsupported version as media type parameter: ${s}`)):new Promise((o,c)=>{const u=new r;u.onError=c,u.onValue=l=>{u.key==="boolean"&&typeof l=="boolean"&&u.stack.length===1&&o(l)},a.on("error",c).on("data",l=>u.write(l)).on("end",()=>c(new Error("No valid ASK response was found.")))})}};return lw.SparqlJsonParser=n,n.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"],lw}var Dge;function gmt(){return Dge||(Dge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mmt(),t)}(Xq)),Xq}var Jq={},dw={},Cge;function ymt(){if(Cge)return dw;Cge=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.SparqlXmlParser=void 0;const t=jr(),e=T2e(),r=Wt;let n=class KPe{constructor(a){a=a||{},this.dataFactory=a.dataFactory||new t.DataFactory,this.prefixVariableQuestionMark=!!a.prefixVariableQuestionMark,this.parseUnsupportedVersions=!!a.parseUnsupportedVersions}isValidVersion(a){return this.parseUnsupportedVersions||KPe.SUPPORTED_VERSIONS.includes(a)}parseXmlResultsStream(a,s){const o=A=>v.emit("error",A);a.on("error",o);const c=new e.SaxesParser,u=[];let l=!1,d=!1;const f=[];let h={},p="",_="",g,m="",y=[];c.on("error",o),c.on("opentag",A=>{A.name==="variable"&&this.stackEquals(u,["sparql","head"])?f.push(this.dataFactory.variable(A.attributes.name)):A.name==="results"&&this.stackEquals(u,["sparql"])?d=!0:A.name==="result"&&this.stackEquals(u,["sparql","results"])?h={}:A.name==="binding"&&this.stackEquals(u,["sparql","results","result"])?(p=A.attributes.name||"",_="",g=void 0,m="",y=[]):A.name==="triple"&&this.stackBeginsWith(u,["sparql","results","result"])?y.push({components:{}}):u[u.length-1]==="triple"&&this.stackBeginsWith(u,["sparql","results","result","binding"])?(_="",g=void 0,m="",["subject","predicate","object"].includes(A.name)?y[y.length-1].currentComponent=A.name:o(new Error(`Illegal quoted triple component '${A.name}' found on line ${c.line+1}`))):this.stackBeginsWith(u,["sparql","results","result","binding"])?(_=A.name,"xml:lang"in A.attributes?g={language:A.attributes["xml:lang"],direction:A.attributes["its:dir"]}:"datatype"in A.attributes?g=this.dataFactory.namedNode(A.attributes.datatype):g=void 0):A.name==="sparql"&&A.attributes.version&&(this.isValidVersion(A.attributes.version)||v.emit("error",new Error(`Detected unsupported version: ${A.attributes.version}`)),v.emit("version",A.attributes.version)),u.push(A.name)}),c.on("closetag",A=>{if(this.stackEquals(u,["sparql","head"])&&(v.emit("variables",f),l=!0),this.stackEquals(u,["sparql","results","result"])&&v.push(h),this.stackBeginsWith(u,["sparql","results","result","binding"])){let T;if(!p&&_)o(new Error(`Terms should have a name on line ${c.line+1}`));else if(_==="uri")T=this.dataFactory.namedNode(m);else if(_==="bnode")T=this.dataFactory.blankNode(m);else if(_==="literal")T=this.dataFactory.literal(m,g);else if(u[u.length-1]==="triple"){const S=y.pop();S&&S.components.subject&&S.components.predicate&&S.components.object?T=this.dataFactory.quad(S.components.subject,S.components.predicate,S.components.object):o(new Error(`Incomplete quoted triple on line ${c.line+1}`))}else _&&o(new Error(`Invalid term type '${_}' on line ${c.line+1}`));if(T)if(y.length>0){const S=y[y.length-1];S.components[S.currentComponent]&&o(new Error(`The ${S.currentComponent} in a quoted triple on line ${c.line+1} was already defined before`)),S.components[S.currentComponent]=T}else{const S=this.prefixVariableQuestionMark?"?"+p:p;h[S]=T}_=void 0}u.pop()}),c.on("text",A=>{this.stackBeginsWith(u,["sparql","results","result","binding"])&&u[u.length-1]===_&&(m=A)});const v=a.on("end",A=>{d?l||v.emit("variables",[]):v.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new r.Transform({objectMode:!0,transform(A,T,S){c.write(A),S()}}));return s&&!this.isValidVersion(s)&&v.destroy(new Error(`Detected unsupported version as media type parameter: ${s}`)),v}parseXmlBooleanStream(a,s){return s&&!this.isValidVersion(s)?Promise.reject(new Error(`Detected unsupported version as media type parameter: ${s}`)):new Promise((o,c)=>{const u=new e.SaxesParser,l=[];u.on("error",c),u.on("opentag",d=>{l.push(d.name)}),u.on("closetag",d=>{l.pop()}),u.on("text",d=>{this.stackEquals(l,["sparql","boolean"])&&o(d==="true")}),a.on("error",c).on("data",d=>u.write(d)).on("end",()=>c(new Error("No valid ASK response was found.")))})}stackEquals(a,s){return a.length===s.length&&a.every((o,c)=>s[c]===o)}stackBeginsWith(a,s){return a.length>=s.length&&s.every((o,c)=>a[c]===o)}};return dw.SparqlXmlParser=n,n.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"],dw}var Lge;function bmt(){return Lge||(Lge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ymt(),t)}(Jq)),Jq}var Yq={exports:{}},jge;function vmt(){return jge||(jge=1,function(t){(function(){var e;typeof window=="object"&&window?e=window:e=E,t.exports?t.exports=e.Promise?e.Promise:a:e.Promise||(e.Promise=a);var r=e.setImmediate||function(f){setTimeout(f,1)};function n(f,h){return function(){f.apply(h,arguments)}}var i=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function a(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],d(f,n(o,this),n(c,this))}function s(f){var h=this;if(this._state===null){this._deferreds.push(f);return}r(function(){var p=h._state?f.onFulfilled:f.onRejected;if(p===null){(h._state?f.resolve:f.reject)(h._value);return}var _;try{_=p(h._value)}catch(g){f.reject(g);return}f.resolve(_)})}function o(f){try{if(f===this)throw new TypeError("A promise cannot be resolved with itself.");if(f&&(typeof f=="object"||typeof f=="function")){var h=f.then;if(typeof h=="function"){d(n(h,f),n(o,this),n(c,this));return}}this._state=!0,this._value=f,u.call(this)}catch(p){c.call(this,p)}}function c(f){this._state=!1,this._value=f,u.call(this)}function u(){for(var f=0,h=this._deferreds.length;f<h;f++)s.call(this,this._deferreds[f]);this._deferreds=null}function l(f,h,p,_){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof h=="function"?h:null,this.resolve=p,this.reject=_}function d(f,h,p){var _=!1;try{f(function(g){_||(_=!0,h(g))},function(g){_||(_=!0,p(g))})}catch(g){if(_)return;_=!0,p(g)}}a.prototype.catch=function(f){return this.then(null,f)},a.prototype.then=function(f,h){var p=this;return new a(function(_,g){s.call(p,new l(f,h,_,g))})},a.all=function(){var f=Array.prototype.slice.call(arguments.length===1&&i(arguments[0])?arguments[0]:arguments);return new a(function(h,p){if(f.length===0)return h([]);var _=f.length;function g(y,v){try{if(v&&(typeof v=="object"||typeof v=="function")){var A=v.then;if(typeof A=="function"){A.call(v,function(T){g(y,T)},p);return}}f[y]=v,--_===0&&h(f)}catch(T){p(T)}}for(var m=0;m<f.length;m++)g(m,f[m])})},a.resolve=function(f){return f&&typeof f=="object"&&f.constructor===a?f:new a(function(h){h(f)})},a.reject=function(f){return new a(function(h,p){p(f)})},a.race=function(f){return new a(function(h,p){for(var _=0,g=f.length;_<g;_++)f[_].then(h,p)})}})()}(Yq)),Yq.exports}var $q,Bge;function Amt(){if(Bge)return $q;Bge=1;var t=vmt();return $q=function(e,r,n){typeof r=="function"&&(n=r,r=null);var i="",a=new t(function(s,o){e.on("data",function(c){i+=typeof r=="string"?c.toString(r):c.toString()}),e.on("end",function(){s(i)}),e.on("error",o)});return n&&a.then(function(s){n(null,s)},n),a},$q}var qge;function Tmt(){if(qge)return aw;qge=1;var t=E&&E.__awaiter||function(u,l,d,f){function h(p){return p instanceof d?p:new d(function(_){_(p)})}return new(d||(d=Promise))(function(p,_){function g(v){try{y(f.next(v))}catch(A){_(A)}}function m(v){try{y(f.throw(v))}catch(A){_(A)}}function y(v){v.done?p(v.value):h(v.value).then(g,m)}y((f=f.apply(u,l||[])).next())})};Object.defineProperty(aw,"__esModule",{value:!0}),aw.SparqlEndpointFetcher=void 0;const e=gOe(),r=IPe(),n=_mt,i=EPe(),a=gmt(),s=bmt(),o=Amt();let c=class Pd{constructor(l){var d,f,h,p,_,g;this.method=(d=l==null?void 0:l.method)!==null&&d!==void 0?d:"POST",this.timeout=l==null?void 0:l.timeout,this.forceGetIfUrlLengthBelow=(f=l==null?void 0:l.forceGetIfUrlLengthBelow)!==null&&f!==void 0?f:0,this.directPost=(h=l==null?void 0:l.directPost)!==null&&h!==void 0?h:!1,this.additionalUrlParams=(p=l==null?void 0:l.additionalUrlParams)!==null&&p!==void 0?p:new URLSearchParams,this.defaultHeaders=(_=l==null?void 0:l.defaultHeaders)!==null&&_!==void 0?_:new Headers,this.fetchCb=l==null?void 0:l.fetch,this.parseUnsupportedVersions=!!(l!=null&&l.parseUnsupportedVersions),this.sparqlQueryParser=(g=l==null?void 0:l.sparqlQueryParser)!==null&&g!==void 0?g:new e.Parser({lexerConfig:{positionTracking:"onlyOffset"}}),this.sparqlJsonParser=new a.SparqlJsonParser(l),this.sparqlXmlParser=new s.SparqlXmlParser(l),this.sparqlParsers={[Pd.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:(m,y)=>this.sparqlJsonParser.parseJsonBooleanStream(m,y),parseResultsStream:(m,y)=>this.sparqlJsonParser.parseJsonResultsStream(m,y)},[Pd.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:(m,y)=>this.sparqlXmlParser.parseXmlBooleanStream(m,y),parseResultsStream:(m,y)=>this.sparqlXmlParser.parseXmlResultsStream(m,y)}}}getQueryType(l){const d=this.sparqlQueryParser.parse(l);return d.type==="query"?d.subType==="describe"?"CONSTRUCT":d.subType.toUpperCase():"UNKNOWN"}getUpdateTypes(l){const d=this.sparqlQueryParser.parse(l);if(d.type==="update"){const f={};for(const h of d.updates)h.operation&&(f[h.operation.subType]=!0);return f}return"UNKNOWN"}fetchBindings(l,d){return t(this,void 0,void 0,function*(){const[f,h,p]=yield this.fetchRawStream(l,d,Pd.CONTENTTYPE_SPARQL),_=this.sparqlParsers[f];if(!_)throw new Error(`Unknown SPARQL results content type: ${f}`);return _.parseResultsStream(p,h)})}fetchAsk(l,d){return t(this,void 0,void 0,function*(){const[f,h,p]=yield this.fetchRawStream(l,d,Pd.CONTENTTYPE_SPARQL),_=this.sparqlParsers[f];if(!_)throw new Error(`Unknown SPARQL results content type: ${f}`);return _.parseBooleanStream(p,h)})}fetchTriples(l,d){return t(this,void 0,void 0,function*(){const[f,h,p]=yield this.fetchRawStream(l,d,Pd.CONTENTTYPE_TURTLE);return p.pipe(new n.StreamParser({format:f,version:h,parseUnsupportedVersions:this.parseUnsupportedVersions}))})}fetchUpdate(l,d){return t(this,void 0,void 0,function*(){const f=new AbortController,h={};this.defaultHeaders.forEach((_,g)=>{h[g]=_});const p={method:"POST",headers:Object.assign(Object.assign({},h),{"content-type":"application/sparql-update"}),body:d,signal:f.signal};yield this.handleFetchCall(l,p,{ignoreBody:!0}),f.abort()})}fetchRawStream(l,d,f){return t(this,void 0,void 0,function*(){let h,p;if(this.method==="POST"&&this.forceGetIfUrlLengthBelow<=l.length)h=this.method,p=l;else{const m=`${l}?query=${encodeURIComponent(d)}`;h=this.method==="GET"||m.length<this.forceGetIfUrlLengthBelow?"GET":"POST",p=h==="POST"?l:m}let _;const g=new Headers(this.defaultHeaders);if(g.append("Accept",f),h==="POST"){if(this.directPost)g.append("Content-Type","application/sparql-query"),_=d,this.additionalUrlParams.toString().length>0&&(p+=`?${this.additionalUrlParams.toString()}`);else{g.append("Content-Type","application/x-www-form-urlencoded"),_=new URLSearchParams,_.set("query",d);for(const[m,y]of this.additionalUrlParams.entries())_.set(m,y)}g.append("Content-Length",_.toString().length.toString())}else this.additionalUrlParams.toString().length>0&&(p+=`&${this.additionalUrlParams.toString()}`);return this.handleFetchCall(p,{headers:g,method:h,body:_})})}handleFetchCall(l,d,f){return t(this,void 0,void 0,function*(){var h,p;let _,g;if(this.timeout){const T=new AbortController;d.signal=T.signal,_=setTimeout(()=>T.abort(),this.timeout)}const m=yield((h=this.fetchCb)!==null&&h!==void 0?h:fetch)(l,d);if(clearTimeout(_),!(f!=null&&f.ignoreBody)&&m.body&&(g=r(m.body)?m.body:(0,i.readableFromWeb)(m.body)),!m.ok||!g&&!(f!=null&&f.ignoreBody)){const T=l.split("?").at(0),S=g?yield o(g):"empty response";throw new Error(`Invalid SPARQL endpoint response from ${T} (HTTP status ${m.status}):
${S}`)}const y=m.headers.get("Content-Type"),v=(p=y==null?void 0:y.split(";").at(0))!==null&&p!==void 0?p:"";let A;if(y){const T=Pd.REGEX_VERSION_HEADER.exec(y);T&&(A=T[1])}return[v,A,g]})}};return aw.SparqlEndpointFetcher=c,c.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json",c.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml",c.CONTENTTYPE_TURTLE="text/turtle",c.CONTENTTYPE_SPARQL=`${c.CONTENTTYPE_SPARQL_JSON};q=1.0,${c.CONTENTTYPE_SPARQL_XML};q=0.7`,c.REGEX_VERSION_HEADER=/version=([^ ;]*)/u,aw}var Uge;function XPe(){return Uge||(Uge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Tmt(),t)}(zq)),zq}var Vge;function JPe(){if(Vge)return iw;Vge=1,Object.defineProperty(iw,"__esModule",{value:!0}),iw.QuadDestinationSparql=void 0;const t=m0(),e=ir(),r=XPe(),n=TO();let i=class{constructor(s,o,c,u,l){k(this,"url");k(this,"context");k(this,"mediatorHttp");k(this,"endpointFetcher");this.url=s,this.context=o,this.mediatorHttp=c,this.endpointFetcher=new r.SparqlEndpointFetcher({fetch:(d,f)=>this.mediatorHttp.mediate({input:d,init:f,context:this.context}),prefixVariableQuestionMark:!0,dataFactory:u,parseUnsupportedVersions:l})}async update(s){const o=this.createCombinedQuadsQuery(s.insert,s.delete);await this.wrapSparqlUpdateRequest(o)}createCombinedQuadsQuery(s,o){return new e.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",o)).append(o&&s?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",s))}createQuadsQuery(s,o){return o?o.map(c=>{let u=`${(0,n.termToString)(c.subject)} ${(0,n.termToString)(c.predicate)} ${(0,n.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?u=`  ${u}
`:u=`  GRAPH ${(0,n.termToString)(c.graph)} { ${u} }
`,u}).prepend([`${s} DATA {
`]).append(["}"]):new e.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(s){const o=await(0,t.stringify)(s);await this.endpointFetcher.fetchUpdate(this.url,o)}async deleteGraphs(s,o,c){const u=Array.isArray(s)?s:[s],l=[];for(const d of u){let f;typeof d=="string"?f=d:d.termType==="DefaultGraph"?f="DEFAULT":f=`GRAPH <${d.value}>`,l.push(`${c?"DROP":"CLEAR"} ${o?"":"SILENT "}${f}`)}await this.endpointFetcher.fetchUpdate(this.url,l.join("; "))}async createGraphs(s,o){const c=[];for(const u of s)c.push(`CREATE${o?"":" SILENT"} GRAPH <${u.value}>`);await this.endpointFetcher.fetchUpdate(this.url,c.join("; "))}};return iw.QuadDestinationSparql=i,iw}var Gge;function wmt(){if(Gge)return nw;Gge=1,Object.defineProperty(nw,"__esModule",{value:!0}),nw.ActorRdfUpdateHypermediaSparql=void 0;const t=OQ(),e=dt,r=ke(),n=JPe();let i=class extends t.ActorRdfUpdateHypermedia{constructor(o){super(o,"sparql");k(this,"mediatorHttp");k(this,"checkUrlSuffixSparql");k(this,"checkUrlSuffixUpdate");this.mediatorHttp=o.mediatorHttp,this.checkUrlSuffixSparql=o.checkUrlSuffixSparql,this.checkUrlSuffixUpdate=o.checkUrlSuffixUpdate}async testMetadata(o){return!o.forceDestinationType&&!o.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&(o.url.endsWith("/sparql")||o.url.endsWith("/sparql/")))&&!(this.checkUrlSuffixUpdate&&(o.url.endsWith("/update")||o.url.endsWith("/update/")))?(0,r.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`):(0,r.passTestVoid)()}async run(o){this.logInfo(o.context,`Identified as sparql destination: ${o.url}`);const c=o.context.getSafe(e.KeysInitQuery.dataFactory);return{destination:new n.QuadDestinationSparql(o.metadata.sparqlService||o.url,o.context,this.mediatorHttp,c,!!o.context.get(e.KeysInitQuery.parseUnsupportedVersions))}}};return nw.ActorRdfUpdateHypermediaSparql=i,nw}var Hge;function Smt(){return Hge||(Hge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(wmt(),t),r(JPe(),t)}(kq)),kq}var Zq={},fw={},kge;function xmt(){if(kge)return fw;kge=1,Object.defineProperty(fw,"__esModule",{value:!0}),fw.ActorQueryOperationAsk=void 0;const t=qr(),e=ke(),r=Ft(),n=rr();let i=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,r.Algebra.Types.ASK)}async testOperation(s,o){return(0,e.passTestVoid)()}async runOperation(s,o){const c=await this.mediatorQueryOperation.mediate({operation:s.input,context:o}),{bindingsStream:u}=(0,n.getSafeBindings)(c);return{type:"boolean",execute:async()=>(await u.take(1).toArray()).length===1}}};return fw.ActorQueryOperationAsk=i,fw}var zge;function Emt(){return zge||(zge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(xmt(),t)}(Zq)),Zq}var e9={},hw={},pw={},Qge;function YPe(){if(Qge)return pw;Qge=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.BindingsToQuadsIterator=void 0;const t=ir(),e=Fi();let r=class IE extends t.MultiTransformIterator{constructor(a,s,o){super(o,{autoStart:!1});k(this,"dataFactory");k(this,"template");k(this,"blankNodeCounter");this.dataFactory=a,this.template=s,this.blankNodeCounter=0}static bindTerm(a,s){return s.termType==="Variable"?a.get(s):s}static bindQuad(a,s){try{return(0,e.mapTermsNested)(s,o=>{const c=IE.bindTerm(a,o);if(!c)throw new Error("Unbound term");return c})}catch{}}static localizeBlankNode(a,s,o){return o.termType==="BlankNode"?a.blankNode(`${o.value}${s}`):o}static localizeQuad(a,s,o){return(0,e.mapTermsNested)(o,c=>IE.localizeBlankNode(a,s,c))}bindTemplate(a,s,o){return s.map(IE.localizeQuad.bind(null,this.dataFactory,o)).map(u=>IE.bindQuad.bind(null,a)(u)).filter(Boolean)}_createTransformer(a){return new t.ArrayIterator(this.bindTemplate(a,this.template,this.blankNodeCounter++),{autoStart:!1})}};return pw.BindingsToQuadsIterator=r,pw}var Wge;function Imt(){if(Wge)return hw;Wge=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.ActorQueryOperationConstruct=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=rr(),a=Fi(),s=YPe();let o=class $Pe extends t.ActorQueryOperationTypedMediated{constructor(u){super(u,n.Algebra.Types.CONSTRUCT)}static getVariables(u){return(0,a.uniqTerms)([].concat.apply([],u.map(l=>(0,a.getVariables)((0,a.getTermsNested)(l)))))}async testOperation(u,l){return(0,r.passTestVoid)()}async runOperation(u,l){const d=l.getSafe(e.KeysInitQuery.dataFactory),f=new n.AlgebraFactory(d),h=$Pe.getVariables(u.template),p=f.createProject(u.input,h),_=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:p,context:l})),g=new s.BindingsToQuadsIterator(d,u.template,_.bindingsStream);return{metadata:()=>_.metadata().then(y=>({...y,order:void 0,cardinality:{type:y.cardinality.type,value:y.cardinality.value*u.template.length},availableOrders:void 0})),quadStream:g,type:"quads"}}};return hw.ActorQueryOperationConstruct=o,hw}var Kge;function ZPe(){return Kge||(Kge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Imt(),t),r(YPe(),t)}(e9)),e9}var t9={},_w={},Xge;function Omt(){if(Xge)return _w;Xge=1,Object.defineProperty(_w,"__esModule",{value:!0}),_w.ActorQueryOperationDistinctIdentity=void 0;const t=qr(),e=ke(),r=rr(),n=Br();let i=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,"distinct")}async testOperation(s,o){return(0,e.passTestVoid)()}async runOperation(s,o){const c=await this.mediatorQueryOperation.mediate({operation:s.input,context:o});if(c.type==="quads"){const f=(0,r.getSafeQuads)(c);return{type:"quads",quadStream:f.quadStream.filter(await this.newIdentityFilterQuads()),metadata:f.metadata}}const u=(0,r.getSafeBindings)(c),l=(await u.metadata()).variables.map(f=>f.variable);return{type:"bindings",bindingsStream:u.bindingsStream.filter(await this.newIdentityFilter(l)),metadata:u.metadata}}async newIdentityFilter(s){const o={};return c=>{const u=s.map(l=>n.termToString(c.get(l))).join("-");return!(u in o)&&(o[u]=!0)}}async newIdentityFilterQuads(){const s={};return o=>{const c=Object.values(n.quadToStringQuad(o)).join(" ");return!(c in s)&&(s[c]=!0)}}};return _w.ActorQueryOperationDistinctIdentity=i,_w}var Jge;function Rmt(){return Jge||(Jge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Omt(),t)}(t9)),t9}var r9={},mw={},Yge;function Pmt(){if(Yge)return mw;Yge=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.ActorQueryOperationExtend=void 0;const t=qr(),e=ke(),r=Ft(),n=ln(),i=Ye(),a=rr();let s=class extends t.ActorQueryOperationTypedMediated{constructor(u){super(u,r.Algebra.Types.EXTEND);k(this,"mediatorExpressionEvaluatorFactory");this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,e.passTestVoid)()}async runOperation(u,l){const{expression:d,input:f,variable:h}=u,p=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:l}));if((await p.metadata()).variables.some(y=>y.variable.equals(h)))throw new Error(`Illegal binding to variable '${h.value}' that has already been bound`);const _=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:d,context:l}),g=async(y,v,A)=>{try{const T=await _.evaluate(y),S=y.set(h,T);A(S)}catch(T){(0,i.isExpressionError)(T)?(A(y),this.logWarn(l,`Expression error for extend operation (${T.message})with bindings '${(0,n.bindingsToString)(y)}'`)):m.emit("error",T)}v()},m=p.bindingsStream.transform({autoStart:!1,transform:g});return{type:"bindings",bindingsStream:m,async metadata(){const y=await p.metadata();return{...y,variables:[...y.variables,{variable:h,canBeUndef:!1}]}}}}};return mw.ActorQueryOperationExtend=s,mw}var $ge;function Nmt(){return $ge||($ge=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pmt(),t)}(r9)),r9}var n9={},gw={},Zge;function Fmt(){if(Zge)return gw;Zge=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.ActorQueryOperationBgpJoin=void 0;const t=qr(),e=dt,r=ke(),n=Ft();let i=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,n.Algebra.Types.BGP)}async testOperation(s,o){return(0,r.passTestVoid)()}async runOperation(s,o){const c=o.getSafe(e.KeysInitQuery.dataFactory),u=new n.AlgebraFactory(c);return this.mediatorQueryOperation.mediate({operation:u.createJoin(s.patterns),context:o})}};return gw.ActorQueryOperationBgpJoin=i,gw}var eye;function Mmt(){return eye||(eye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fmt(),t)}(n9)),n9}var i9={},yw={},tye;function Dmt(){if(tye)return yw;tye=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.ActorQueryOperationFilter=void 0;const t=qr(),e=ke(),r=Ft(),n=ln(),i=Ye(),a=rr();let s=class extends t.ActorQueryOperationTypedMediated{constructor(u){super(u,r.Algebra.Types.FILTER);k(this,"mediatorExpressionEvaluatorFactory");this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,e.passTestVoid)()}async runOperation(u,l){const d=await this.mediatorQueryOperation.mediate({operation:u.input,context:l}),f=(0,a.getSafeBindings)(d);(0,a.validateQueryOutput)(f,"bindings");const h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:l}),p=async(g,m,y)=>{try{await h.evaluateAsEBV(g)&&y(g)}catch(v){(0,i.isExpressionError)(v)?this.logWarn(l,"Error occurred while filtering.",()=>({error:v,bindings:(0,n.bindingsToString)(g)})):_.emit("error",v)}m()},_=f.bindingsStream.transform({transform:p,autoStart:!1});return{type:"bindings",bindingsStream:_,metadata:f.metadata}}};return yw.ActorQueryOperationFilter=s,yw}var rye;function Cmt(){return rye||(rye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dmt(),t)}(i9)),i9}var a9={},bw={},nye;function Lmt(){var a;if(nye)return bw;nye=1,Object.defineProperty(bw,"__esModule",{value:!0}),bw.ActorQueryOperationFromQuad=void 0;const t=qr(),e=dt,r=ke(),n=Ft();let i=(a=class extends t.ActorQueryOperationTypedMediated{constructor(o){super(o,n.Algebra.Types.FROM)}static copyOperation(o,c){const u={};for(const[l,d]of Object.entries(o)){const f=l;Array.isArray(d)&&l!=="template"?l==="variables"?u[f]=d:u[f]=d.map(c):a.ALGEBRA_TYPES.includes(d.type)?u[f]=c(d):u[f]=d}return u}static applyOperationDefaultGraph(o,c,u){if((0,n.isKnownOperation)(c,n.Algebra.Types.BGP)&&c.patterns.length>0||(0,n.isKnownOperation)(c,n.Algebra.Types.PATH)||(0,n.isKnownOperation)(c,n.Algebra.Types.PATTERN)){if((0,n.isKnownOperation)(c,n.Algebra.Types.BGP))return a.joinOperations(o,c.patterns.map(d=>{if(d.graph.termType!=="DefaultGraph")return o.createBgp([d]);const f=u.map(h=>o.createBgp([Object.assign(o.createPattern(d.subject,d.predicate,d.object,h),{metadata:d.metadata})]));return a.unionOperations(o,f)}));if(c.graph.termType!=="DefaultGraph")return c;const l=u.map(d=>(0,n.isKnownOperation)(c,n.Algebra.Types.PATH)?o.createPath(c.subject,c.predicate,c.object,d):Object.assign(o.createPattern(c.subject,c.predicate,c.object,d),{metadata:c.metadata}));return a.unionOperations(o,l)}return a.copyOperation(c,l=>this.applyOperationDefaultGraph(o,l,u))}static applyOperationNamedGraph(o,c,u,l){if((0,n.isKnownOperation)(c,n.Algebra.Types.BGP)&&c.patterns.length>0||(0,n.isKnownOperation)(c,n.Algebra.Types.PATH)||(0,n.isKnownOperation)(c,n.Algebra.Types.PATTERN)){const d=c.type==="bgp"?c.patterns[0].graph:c.graph;if(d.termType==="DefaultGraph")return o.createBgp([]);if(d.termType==="Variable"){if(u.length===1){const h=u[0],p={};p[d.value]=h;const _=o.createValues([d],[p]);let g;return c.type==="bgp"?g=o.createBgp(c.patterns.map(m=>o.createPattern(m.subject,m.predicate,m.object,h))):c.type==="path"?g=o.createPath(c.subject,c.predicate,c.object,h):g=o.createPattern(c.subject,c.predicate,c.object,h),o.createJoin([_,g])}return a.unionOperations(o,u.map(h=>a.applyOperationNamedGraph(o,c,[h],l)))}return[...u,...l].some(h=>h.equals(d))?c:o.createBgp([])}return a.copyOperation(c,d=>this.applyOperationNamedGraph(o,d,u,l))}static joinOperations(o,c){if(c.length===1)return c[0];if(c.length>1)return o.createJoin(c);throw new Error("A join can only be applied on at least one operation")}static unionOperations(o,c){if(c.length===1)return c[0];if(c.length>1)return o.createUnion(c);throw new Error("A union can only be applied on at least one operation")}static createOperation(o,c){let u=c.input;return c.default.length>0&&(u=a.applyOperationDefaultGraph(o,u,c.default)),(c.named.length>0||c.default.length>0)&&(u=a.applyOperationNamedGraph(o,u,c.named,c.default)),u}async testOperation(o,c){return(0,r.passTestVoid)()}async runOperation(o,c){const u=c.getSafe(e.KeysInitQuery.dataFactory),l=new n.AlgebraFactory(u),d=a.createOperation(l,o);return this.mediatorQueryOperation.mediate({operation:d,context:c})}},k(a,"ALGEBRA_TYPES",Object.keys(n.Algebra.Types).map(o=>n.Algebra.Types[o])),a);return bw.ActorQueryOperationFromQuad=i,bw}var iye;function jmt(){return iye||(iye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lmt(),t)}(a9)),a9}var s9={},vw={},aye;function Bmt(){if(aye)return vw;aye=1,Object.defineProperty(vw,"__esModule",{value:!0}),vw.ActorQueryOperationProject=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=SQ(),a=rr();let s=class extends t.ActorQueryOperationTypedMediated{constructor(c){super(c,n.Algebra.Types.PROJECT)}async testOperation(c,u){return(0,r.passTestVoid)()}async runOperation(c,u){const l=u.getSafe(e.KeysInitQuery.dataFactory),d=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.input,context:u})),f=await d.metadata(),h=Object.fromEntries(f.variables.map(A=>[A.variable.value,A])),p=c.variables.map(A=>({variable:A,canBeUndef:!1})),_=Object.fromEntries(p.map(A=>[A.variable.value,A])),g=f.variables.filter(A=>!(A.variable.value in _)),m=p.map(A=>({variable:A.variable,canBeUndef:!(A.variable.value in h)||h[A.variable.value].canBeUndef}));let y=g.length===0?d.bindingsStream:d.bindingsStream.map(A=>{for(const T of g)A=A.delete(T.variable);return A}),v=0;return y=y.map(A=>{v++;const T=new Map;return A.map(S=>{if(S instanceof i.BlankNodeBindingsScoped){let P=T.get(S.value);return P||(P=l.blankNode(`${S.value}${v}`),T.set(S.value,P)),P}return S})}),{type:"bindings",bindingsStream:y,metadata:async()=>({...f,variables:m})}}};return vw.ActorQueryOperationProject=s,vw}var sye;function qmt(){return sye||(sye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Bmt(),t)}(s9)),s9}var o9={},Aw={},Tw={},oye;function Umt(){var f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R,C,M,U,B,G,K,$,se,pe,we,Ce,Le,Ie,Oe,ye,Me,W,FG,le,me,Z,q,e3e,re,_e,he,Oc,Rc,MG,j3,B3,Yr,DG,OE,Pc,CG,z;if(oye)return Tw;oye=1,Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,r=typeof process=="object"&&process?process:{},n=(V,x,O,D)=>{typeof r.emitWarning=="function"?r.emitWarning(V,x,O,D):console.error(`[${O}] ${x}: ${V}`)},i=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof i>"u"){a=class{constructor(){k(this,"onabort");k(this,"_onabort",[]);k(this,"reason");k(this,"aborted",!1)}addEventListener(O,D){this._onabort.push(D)}},i=class{constructor(){k(this,"signal",new a);x()}abort(O){var D,H;if(!this.signal.aborted){this.signal.reason=O,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(O);(H=(D=this.signal).onabort)==null||H.call(D,O)}}};let V=((f=r.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{V&&(V=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var s=V=>!e.has(V),o=V=>V&&V===Math.floor(V)&&V>0&&isFinite(V),c=V=>o(V)?V<=Math.pow(2,8)?Uint8Array:V<=Math.pow(2,16)?Uint16Array:V<=Math.pow(2,32)?Uint32Array:V<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(V){super(V),this.fill(0)}},l=(h=class{constructor(x,O){k(this,"heap");k(this,"length");if(!w(h,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new O(x),this.length=0}static create(x){let O=c(x);if(!O)return[];be(h,p,!0);let D=new h(x,O);return be(h,p,!1),D}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},p=new WeakMap,qe(h,p,!1),h),d=(z=class{constructor(x){qe(this,W);qe(this,m);qe(this,y);qe(this,v);qe(this,A);qe(this,T);qe(this,S);qe(this,P);qe(this,j);k(this,"ttl");k(this,"ttlResolution");k(this,"ttlAutopurge");k(this,"updateAgeOnGet");k(this,"updateAgeOnHas");k(this,"allowStale");k(this,"noDisposeOnSet");k(this,"noUpdateTTL");k(this,"maxEntrySize");k(this,"sizeCalculation");k(this,"noDeleteOnFetchRejection");k(this,"noDeleteOnStaleGet");k(this,"allowStaleOnFetchAbort");k(this,"allowStaleOnFetchRejection");k(this,"ignoreFetchAbort");qe(this,F);qe(this,N);qe(this,R);qe(this,C);qe(this,M);qe(this,U);qe(this,B);qe(this,G);qe(this,K);qe(this,$);qe(this,se);qe(this,pe);qe(this,we);qe(this,Ce);qe(this,Le);qe(this,Ie);qe(this,Oe);qe(this,ye);qe(this,Me);qe(this,le,()=>{});qe(this,me,()=>{});qe(this,Z,()=>{});qe(this,q,()=>!1);qe(this,re,x=>{});qe(this,_e,(x,O,D)=>{});qe(this,he,(x,O,D,H)=>{if(D||H)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});k(this,_,"LRUCache");let{max:O=0,ttl:D,ttlResolution:H=1,ttlAutopurge:Y,updateAgeOnGet:Q,updateAgeOnHas:ee,allowStale:ie,dispose:Re,onInsert:oe,disposeAfter:Te,noDisposeOnSet:We,noUpdateTTL:Qe,maxSize:Xe=0,maxEntrySize:Pe=0,sizeCalculation:He,fetchMethod:Ee,memoMethod:ce,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:ht,ignoreFetchAbort:Et,perf:rt}=x;if(rt!==void 0&&typeof(rt==null?void 0:rt.now)!="function")throw new TypeError("perf option must have a now() method if specified");if(be(this,j,rt??t),O!==0&&!o(O))throw new TypeError("max option must be a nonnegative integer");let _t=O?c(O):Array;if(!_t)throw new Error("invalid max value: "+O);if(be(this,m,O),be(this,y,Xe),this.maxEntrySize=Pe||w(this,y),this.sizeCalculation=He,this.sizeCalculation){if(!w(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ce!==void 0&&typeof ce!="function")throw new TypeError("memoMethod must be a function if defined");if(be(this,P,ce),Ee!==void 0&&typeof Ee!="function")throw new TypeError("fetchMethod must be a function if specified");if(be(this,S,Ee),be(this,Oe,!!Ee),be(this,R,new Map),be(this,C,new Array(O).fill(void 0)),be(this,M,new Array(O).fill(void 0)),be(this,U,new _t(O)),be(this,B,new _t(O)),be(this,G,0),be(this,K,0),be(this,$,l.create(O)),be(this,F,0),be(this,N,0),typeof Re=="function"&&be(this,v,Re),typeof oe=="function"&&be(this,A,oe),typeof Te=="function"?(be(this,T,Te),be(this,se,[])):(be(this,T,void 0),be(this,se,void 0)),be(this,Ie,!!w(this,v)),be(this,Me,!!w(this,A)),be(this,ye,!!w(this,T)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!Qe,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!Be,this.allowStaleOnFetchAbort=!!ht,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(w(this,y)!==0&&!o(w(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,W,e3e).call(this)}if(this.allowStale=!!ie,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!Q,this.updateAgeOnHas=!!ee,this.ttlResolution=o(H)||H===0?H:1,this.ttlAutopurge=!!Y,this.ttl=D||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,W,FG).call(this)}if(w(this,m)===0&&this.ttl===0&&w(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!w(this,m)&&!w(this,y)){let ut="LRU_CACHE_UNBOUNDED";s(ut)&&(e.add(ut),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,z))}}get perf(){return w(this,j)}static unsafeExposeInternals(x){return{starts:w(x,we),ttls:w(x,Ce),autopurgeTimers:w(x,Le),sizes:w(x,pe),keyMap:w(x,R),keyList:w(x,C),valList:w(x,M),next:w(x,U),prev:w(x,B),get head(){return w(x,G)},get tail(){return w(x,K)},free:w(x,$),isBackgroundFetch:O=>{var D;return fe(D=x,W,Yr).call(D,O)},backgroundFetch:(O,D,H,Y)=>{var Q;return fe(Q=x,W,B3).call(Q,O,D,H,Y)},moveToTail:O=>{var D;return fe(D=x,W,OE).call(D,O)},indexes:O=>{var D;return fe(D=x,W,Oc).call(D,O)},rindexes:O=>{var D;return fe(D=x,W,Rc).call(D,O)},isStale:O=>{var D;return w(D=x,q).call(D,O)}}}get max(){return w(this,m)}get maxSize(){return w(this,y)}get calculatedSize(){return w(this,N)}get size(){return w(this,F)}get fetchMethod(){return w(this,S)}get memoMethod(){return w(this,P)}get dispose(){return w(this,v)}get onInsert(){return w(this,A)}get disposeAfter(){return w(this,T)}getRemainingTTL(x){return w(this,R).has(x)?1/0:0}*entries(){for(let x of fe(this,W,Oc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,Yr).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*rentries(){for(let x of fe(this,W,Rc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,Yr).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*keys(){for(let x of fe(this,W,Oc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,Yr).call(this,w(this,M)[x])&&(yield O)}}*rkeys(){for(let x of fe(this,W,Rc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,Yr).call(this,w(this,M)[x])&&(yield O)}}*values(){for(let x of fe(this,W,Oc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,Yr).call(this,w(this,M)[x])&&(yield w(this,M)[x])}*rvalues(){for(let x of fe(this,W,Rc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,Yr).call(this,w(this,M)[x])&&(yield w(this,M)[x])}[(g=Symbol.iterator,_=Symbol.toStringTag,g)](){return this.entries()}find(x,O={}){for(let D of fe(this,W,Oc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Yr).call(this,H)?H.__staleWhileFetching:H;if(Y!==void 0&&x(Y,w(this,C)[D],this))return this.get(w(this,C)[D],O)}}forEach(x,O=this){for(let D of fe(this,W,Oc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Yr).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}rforEach(x,O=this){for(let D of fe(this,W,Rc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Yr).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}purgeStale(){let x=!1;for(let O of fe(this,W,Rc).call(this,{allowStale:!0}))w(this,q).call(this,O)&&(fe(this,W,Pc).call(this,w(this,C)[O],"expire"),x=!0);return x}info(x){let O=w(this,R).get(x);if(O===void 0)return;let D=w(this,M)[O],H=fe(this,W,Yr).call(this,D)?D.__staleWhileFetching:D;if(H===void 0)return;let Y={value:H};if(w(this,Ce)&&w(this,we)){let Q=w(this,Ce)[O],ee=w(this,we)[O];if(Q&&ee){let ie=Q-(w(this,j).now()-ee);Y.ttl=ie,Y.start=Date.now()}}return w(this,pe)&&(Y.size=w(this,pe)[O]),Y}dump(){let x=[];for(let O of fe(this,W,Oc).call(this,{allowStale:!0})){let D=w(this,C)[O],H=w(this,M)[O],Y=fe(this,W,Yr).call(this,H)?H.__staleWhileFetching:H;if(Y===void 0||D===void 0)continue;let Q={value:Y};if(w(this,Ce)&&w(this,we)){Q.ttl=w(this,Ce)[O];let ee=w(this,j).now()-w(this,we)[O];Q.start=Math.floor(Date.now()-ee)}w(this,pe)&&(Q.size=w(this,pe)[O]),x.unshift([D,Q])}return x}load(x){this.clear();for(let[O,D]of x){if(D.start){let H=Date.now()-D.start;D.start=w(this,j).now()-H}this.set(O,D.value,D)}}set(x,O,D={}){var We,Qe,Xe,Pe,He,Ee,ce;if(O===void 0)return this.delete(x),this;let{ttl:H=this.ttl,start:Y,noDisposeOnSet:Q=this.noDisposeOnSet,sizeCalculation:ee=this.sizeCalculation,status:ie}=D,{noUpdateTTL:Re=this.noUpdateTTL}=D,oe=w(this,he).call(this,x,O,D.size||0,ee);if(this.maxEntrySize&&oe>this.maxEntrySize)return ie&&(ie.set="miss",ie.maxEntrySizeExceeded=!0),fe(this,W,Pc).call(this,x,"set"),this;let Te=w(this,F)===0?void 0:w(this,R).get(x);if(Te===void 0)Te=w(this,F)===0?w(this,K):w(this,$).length!==0?w(this,$).pop():w(this,F)===w(this,m)?fe(this,W,j3).call(this,!1):w(this,F),w(this,C)[Te]=x,w(this,M)[Te]=O,w(this,R).set(x,Te),w(this,U)[w(this,K)]=Te,w(this,B)[Te]=w(this,K),be(this,K,Te),vn(this,F)._++,w(this,_e).call(this,Te,oe,ie),ie&&(ie.set="add"),Re=!1,w(this,Me)&&((We=w(this,A))==null||We.call(this,O,x,"add"));else{fe(this,W,OE).call(this,Te);let ne=w(this,M)[Te];if(O!==ne){if(w(this,Oe)&&fe(this,W,Yr).call(this,ne)){ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=ne;xe!==void 0&&!Q&&(w(this,Ie)&&((Qe=w(this,v))==null||Qe.call(this,xe,x,"set")),w(this,ye)&&((Xe=w(this,se))==null||Xe.push([xe,x,"set"])))}else Q||(w(this,Ie)&&((Pe=w(this,v))==null||Pe.call(this,ne,x,"set")),w(this,ye)&&((He=w(this,se))==null||He.push([ne,x,"set"])));if(w(this,re).call(this,Te),w(this,_e).call(this,Te,oe,ie),w(this,M)[Te]=O,ie){ie.set="replace";let xe=ne&&fe(this,W,Yr).call(this,ne)?ne.__staleWhileFetching:ne;xe!==void 0&&(ie.oldValue=xe)}}else ie&&(ie.set="update");w(this,Me)&&((Ee=this.onInsert)==null||Ee.call(this,O,x,O===ne?"update":"replace"))}if(H!==0&&!w(this,Ce)&&fe(this,W,FG).call(this),w(this,Ce)&&(Re||w(this,Z).call(this,Te,H,Y),ie&&w(this,me).call(this,ie,Te)),!Q&&w(this,ye)&&w(this,se)){let ne=w(this,se),xe;for(;xe=ne==null?void 0:ne.shift();)(ce=w(this,T))==null||ce.call(this,...xe)}return this}pop(){var x;try{for(;w(this,F);){let O=w(this,M)[w(this,G)];if(fe(this,W,j3).call(this,!0),fe(this,W,Yr).call(this,O)){if(O.__staleWhileFetching)return O.__staleWhileFetching}else if(O!==void 0)return O}}finally{if(w(this,ye)&&w(this,se)){let O=w(this,se),D;for(;D=O==null?void 0:O.shift();)(x=w(this,T))==null||x.call(this,...D)}}}has(x,O={}){let{updateAgeOnHas:D=this.updateAgeOnHas,status:H}=O,Y=w(this,R).get(x);if(Y!==void 0){let Q=w(this,M)[Y];if(fe(this,W,Yr).call(this,Q)&&Q.__staleWhileFetching===void 0)return!1;if(w(this,q).call(this,Y))H&&(H.has="stale",w(this,me).call(this,H,Y));else return D&&w(this,le).call(this,Y),H&&(H.has="hit",w(this,me).call(this,H,Y)),!0}else H&&(H.has="miss");return!1}peek(x,O={}){let{allowStale:D=this.allowStale}=O,H=w(this,R).get(x);if(H===void 0||!D&&w(this,q).call(this,H))return;let Y=w(this,M)[H];return fe(this,W,Yr).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:Q=this.ttl,noDisposeOnSet:ee=this.noDisposeOnSet,size:ie=0,sizeCalculation:Re=this.sizeCalculation,noUpdateTTL:oe=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:We=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:Pe,forceRefresh:He=!1,status:Ee,signal:ce}=O;if(!w(this,Oe))return Ee&&(Ee.fetch="get"),this.get(x,{allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,status:Ee});let ne={allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,ttl:Q,noDisposeOnSet:ee,size:ie,sizeCalculation:Re,noUpdateTTL:oe,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:We,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ee,signal:ce},xe=w(this,R).get(x);if(xe===void 0){Ee&&(Ee.fetch="miss");let Be=fe(this,W,B3).call(this,x,xe,ne,Pe);return Be.__returned=Be}else{let Be=w(this,M)[xe];if(fe(this,W,Yr).call(this,Be)){let _t=D&&Be.__staleWhileFetching!==void 0;return Ee&&(Ee.fetch="inflight",_t&&(Ee.returnedStale=!0)),_t?Be.__staleWhileFetching:Be.__returned=Be}let ht=w(this,q).call(this,xe);if(!He&&!ht)return Ee&&(Ee.fetch="hit"),fe(this,W,OE).call(this,xe),H&&w(this,le).call(this,xe),Ee&&w(this,me).call(this,Ee,xe),Be;let Et=fe(this,W,B3).call(this,x,xe,ne,Pe),rt=Et.__staleWhileFetching!==void 0&&D;return Ee&&(Ee.fetch=ht?"stale":"refresh",rt&&ht&&(Ee.returnedStale=!0)),rt?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(x,O={}){let D=await this.fetch(x,O);if(D===void 0)throw new Error("fetch() returned undefined");return D}memo(x,O={}){let D=w(this,P);if(!D)throw new Error("no memoMethod provided to constructor");let{context:H,forceRefresh:Y,...Q}=O,ee=this.get(x,Q);if(!Y&&ee!==void 0)return ee;let ie=D(x,ee,{options:Q,context:H});return this.set(x,ie,Q),ie}get(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:Q}=O,ee=w(this,R).get(x);if(ee!==void 0){let ie=w(this,M)[ee],Re=fe(this,W,Yr).call(this,ie);return Q&&w(this,me).call(this,Q,ee),w(this,q).call(this,ee)?(Q&&(Q.get="stale"),Re?(Q&&D&&ie.__staleWhileFetching!==void 0&&(Q.returnedStale=!0),D?ie.__staleWhileFetching:void 0):(Y||fe(this,W,Pc).call(this,x,"expire"),Q&&D&&(Q.returnedStale=!0),D?ie:void 0)):(Q&&(Q.get="hit"),Re?ie.__staleWhileFetching:(fe(this,W,OE).call(this,ee),H&&w(this,le).call(this,ee),ie))}else Q&&(Q.get="miss")}delete(x){return fe(this,W,Pc).call(this,x,"delete")}clear(){return fe(this,W,CG).call(this,"delete")}},m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,j=new WeakMap,F=new WeakMap,N=new WeakMap,R=new WeakMap,C=new WeakMap,M=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,K=new WeakMap,$=new WeakMap,se=new WeakMap,pe=new WeakMap,we=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Me=new WeakMap,W=new WeakSet,FG=function(){let x=new u(w(this,m)),O=new u(w(this,m));be(this,Ce,x),be(this,we,O);let D=this.ttlAutopurge?new Array(w(this,m)):void 0;be(this,Le,D),be(this,Z,(Q,ee,ie=w(this,j).now())=>{if(O[Q]=ee!==0?ie:0,x[Q]=ee,D!=null&&D[Q]&&(clearTimeout(D[Q]),D[Q]=void 0),ee!==0&&D){let Re=setTimeout(()=>{w(this,q).call(this,Q)&&fe(this,W,Pc).call(this,w(this,C)[Q],"expire")},ee+1);Re.unref&&Re.unref(),D[Q]=Re}}),be(this,le,Q=>{O[Q]=x[Q]!==0?w(this,j).now():0}),be(this,me,(Q,ee)=>{if(x[ee]){let ie=x[ee],Re=O[ee];if(!ie||!Re)return;Q.ttl=ie,Q.start=Re,Q.now=H||Y();let oe=Q.now-Re;Q.remainingTTL=ie-oe}});let H=0,Y=()=>{let Q=w(this,j).now();if(this.ttlResolution>0){H=Q;let ee=setTimeout(()=>H=0,this.ttlResolution);ee.unref&&ee.unref()}return Q};this.getRemainingTTL=Q=>{let ee=w(this,R).get(Q);if(ee===void 0)return 0;let ie=x[ee],Re=O[ee];if(!ie||!Re)return 1/0;let oe=(H||Y())-Re;return ie-oe},be(this,q,Q=>{let ee=O[Q],ie=x[Q];return!!ie&&!!ee&&(H||Y())-ee>ie})},le=new WeakMap,me=new WeakMap,Z=new WeakMap,q=new WeakMap,e3e=function(){let x=new u(w(this,m));be(this,N,0),be(this,pe,x),be(this,re,O=>{be(this,N,w(this,N)-x[O]),x[O]=0}),be(this,he,(O,D,H,Y)=>{if(fe(this,W,Yr).call(this,D))return 0;if(!o(H))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(H=Y(D,O),!o(H))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return H}),be(this,_e,(O,D,H)=>{if(x[O]=D,w(this,y)){let Y=w(this,y)-x[O];for(;w(this,N)>Y;)fe(this,W,j3).call(this,!0)}be(this,N,w(this,N)+x[O]),H&&(H.entrySize=D,H.totalCalculatedSize=w(this,N))})},re=new WeakMap,_e=new WeakMap,he=new WeakMap,Oc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,K);!(!fe(this,W,MG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,G)));)O=w(this,B)[O]},Rc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,G);!(!fe(this,W,MG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,K)));)O=w(this,U)[O]},MG=function(x){return x!==void 0&&w(this,R).get(w(this,C)[x])===x},j3=function(x){var Y,Q,ee;let O=w(this,G),D=w(this,C)[O],H=w(this,M)[O];return w(this,Oe)&&fe(this,W,Yr).call(this,H)?H.__abortController.abort(new Error("evicted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Y=w(this,v))==null||Y.call(this,H,D,"evict")),w(this,ye)&&((Q=w(this,se))==null||Q.push([H,D,"evict"]))),w(this,re).call(this,O),(ee=w(this,Le))!=null&&ee[O]&&(clearTimeout(w(this,Le)[O]),w(this,Le)[O]=void 0),x&&(w(this,C)[O]=void 0,w(this,M)[O]=void 0,w(this,$).push(O)),w(this,F)===1?(be(this,G,be(this,K,0)),w(this,$).length=0):be(this,G,w(this,U)[O]),w(this,R).delete(D),vn(this,F)._--,O},B3=function(x,O,D,H){let Y=O===void 0?void 0:w(this,M)[O];if(fe(this,W,Yr).call(this,Y))return Y;let Q=new i,{signal:ee}=D;ee==null||ee.addEventListener("abort",()=>Q.abort(ee.reason),{signal:Q.signal});let ie={signal:Q.signal,options:D,context:H},Re=(Pe,He=!1)=>{let{aborted:Ee}=Q.signal,ce=D.ignoreFetchAbort&&Pe!==void 0,ne=D.ignoreFetchAbort||!!(D.allowStaleOnFetchAbort&&Pe!==void 0);if(D.status&&(Ee&&!He?(D.status.fetchAborted=!0,D.status.fetchError=Q.signal.reason,ce&&(D.status.fetchAbortIgnored=!0)):D.status.fetchResolved=!0),Ee&&!ce&&!He)return Te(Q.signal.reason,ne);let xe=Qe,Be=w(this,M)[O];return(Be===Qe||ce&&He&&Be===void 0)&&(Pe===void 0?xe.__staleWhileFetching!==void 0?w(this,M)[O]=xe.__staleWhileFetching:fe(this,W,Pc).call(this,x,"fetch"):(D.status&&(D.status.fetchUpdated=!0),this.set(x,Pe,ie.options))),Pe},oe=Pe=>(D.status&&(D.status.fetchRejected=!0,D.status.fetchError=Pe),Te(Pe,!1)),Te=(Pe,He)=>{let{aborted:Ee}=Q.signal,ce=Ee&&D.allowStaleOnFetchAbort,ne=ce||D.allowStaleOnFetchRejection,xe=ne||D.noDeleteOnFetchRejection,Be=Qe;if(w(this,M)[O]===Qe&&(!xe||!He&&Be.__staleWhileFetching===void 0?fe(this,W,Pc).call(this,x,"fetch"):ce||(w(this,M)[O]=Be.__staleWhileFetching)),ne)return D.status&&Be.__staleWhileFetching!==void 0&&(D.status.returnedStale=!0),Be.__staleWhileFetching;if(Be.__returned===Be)throw Pe},We=(Pe,He)=>{var ce;let Ee=(ce=w(this,S))==null?void 0:ce.call(this,x,Y,ie);Ee&&Ee instanceof Promise&&Ee.then(ne=>Pe(ne===void 0?void 0:ne),He),Q.signal.addEventListener("abort",()=>{(!D.ignoreFetchAbort||D.allowStaleOnFetchAbort)&&(Pe(void 0),D.allowStaleOnFetchAbort&&(Pe=ne=>Re(ne,!0)))})};D.status&&(D.status.fetchDispatched=!0);let Qe=new Promise(We).then(Re,oe),Xe=Object.assign(Qe,{__abortController:Q,__staleWhileFetching:Y,__returned:void 0});return O===void 0?(this.set(x,Xe,{...ie.options,status:void 0}),O=w(this,R).get(x)):w(this,M)[O]=Xe,Xe},Yr=function(x){if(!w(this,Oe))return!1;let O=x;return!!O&&O instanceof Promise&&O.hasOwnProperty("__staleWhileFetching")&&O.__abortController instanceof i},DG=function(x,O){w(this,B)[O]=x,w(this,U)[x]=O},OE=function(x){x!==w(this,K)&&(x===w(this,G)?be(this,G,w(this,U)[x]):fe(this,W,DG).call(this,w(this,B)[x],w(this,U)[x]),fe(this,W,DG).call(this,w(this,K),x),be(this,K,x))},Pc=function(x,O){var H,Y,Q,ee,ie,Re;let D=!1;if(w(this,F)!==0){let oe=w(this,R).get(x);if(oe!==void 0)if((H=w(this,Le))!=null&&H[oe]&&(clearTimeout((Y=w(this,Le))==null?void 0:Y[oe]),w(this,Le)[oe]=void 0),D=!0,w(this,F)===1)fe(this,W,CG).call(this,O);else{w(this,re).call(this,oe);let Te=w(this,M)[oe];if(fe(this,W,Yr).call(this,Te)?Te.__abortController.abort(new Error("deleted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Q=w(this,v))==null||Q.call(this,Te,x,O)),w(this,ye)&&((ee=w(this,se))==null||ee.push([Te,x,O]))),w(this,R).delete(x),w(this,C)[oe]=void 0,w(this,M)[oe]=void 0,oe===w(this,K))be(this,K,w(this,B)[oe]);else if(oe===w(this,G))be(this,G,w(this,U)[oe]);else{let We=w(this,B)[oe];w(this,U)[We]=w(this,U)[oe];let Qe=w(this,U)[oe];w(this,B)[Qe]=w(this,B)[oe]}vn(this,F)._--,w(this,$).push(oe)}}if(w(this,ye)&&((ie=w(this,se))!=null&&ie.length)){let oe=w(this,se),Te;for(;Te=oe==null?void 0:oe.shift();)(Re=w(this,T))==null||Re.call(this,...Te)}return D},CG=function(x){var O,D,H,Y;for(let Q of fe(this,W,Rc).call(this,{allowStale:!0})){let ee=w(this,M)[Q];if(fe(this,W,Yr).call(this,ee))ee.__abortController.abort(new Error("deleted"));else{let ie=w(this,C)[Q];w(this,Ie)&&((O=w(this,v))==null||O.call(this,ee,ie,x)),w(this,ye)&&((D=w(this,se))==null||D.push([ee,ie,x]))}}if(w(this,R).clear(),w(this,M).fill(void 0),w(this,C).fill(void 0),w(this,Ce)&&w(this,we)){w(this,Ce).fill(0),w(this,we).fill(0);for(let Q of w(this,Le)??[])Q!==void 0&&clearTimeout(Q);(H=w(this,Le))==null||H.fill(void 0)}if(w(this,pe)&&w(this,pe).fill(0),be(this,G,0),be(this,K,0),w(this,$).length=0,be(this,N,0),be(this,F,0),w(this,ye)&&w(this,se)){let Q=w(this,se),ee;for(;ee=Q==null?void 0:Q.shift();)(Y=w(this,T))==null||Y.call(this,...ee)}},z);return Tw.LRUCache=d,Tw}var uye;function Vmt(){if(uye)return Aw;uye=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.ActorQueryOperationReducedHash=void 0;const t=qr(),e=ke(),r=Ft(),n=rr(),i=Umt();let a=class extends t.ActorQueryOperationTypedMediated{constructor(c){super(c,r.Algebra.Types.REDUCED);k(this,"mediatorHashBindings");k(this,"cacheSize");this.mediatorHashBindings=c.mediatorHashBindings,this.cacheSize=c.cacheSize}async testOperation(c,u){return(0,e.passTestVoid)()}async runOperation(c,u){const l=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.input,context:u})),d=(await l.metadata()).variables.map(h=>h.variable);return{type:"bindings",bindingsStream:l.bindingsStream.filter(await this.newHashFilter(u,d)),metadata:l.metadata}}async newHashFilter(c,u){const{hashFunction:l}=await this.mediatorHashBindings.mediate({context:c}),d=new i.LRUCache({max:this.cacheSize});return f=>{const h=l(f,u);return d.has(h)?!1:(d.set(h,!0),!0)}}};return Aw.ActorQueryOperationReducedHash=a,Aw}var cye;function Gmt(){return cye||(cye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Vmt(),t)}(o9)),o9}var u9={},ww={},lye;function Hmt(){if(lye)return ww;lye=1,Object.defineProperty(ww,"__esModule",{value:!0}),ww.ActorQueryOperationSlice=void 0;const t=qr(),e=dt,r=ke(),n=Ft();let i=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,n.Algebra.Types.SLICE)}async testOperation(s,o){return(0,r.passTestVoid)()}async runOperation(s,o){s.length&&(o=o.set(e.KeysQueryOperation.limitIndicator,s.length));const c=await this.mediatorQueryOperation.mediate({operation:s.input,context:o});return c.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(c.bindingsStream,s),metadata:this.sliceMetadata(c,s)}:c.type==="quads"?{type:"quads",quadStream:this.sliceStream(c.quadStream,s),metadata:this.sliceMetadata(c,s)}:c}sliceStream(s,o){const c=!!o.length||o.length===0,{start:u}=o,l=c?o.start+o.length-1:Number.POSITIVE_INFINITY;return s.transform({offset:u,limit:Math.max(l-u+1,0),autoStart:!1})}sliceMetadata(s,o){const c=!!o.length||o.length===0;return()=>s.metadata().then(u=>{const l={...u.cardinality};return Number.isFinite(l.value)&&(l.value=Math.max(0,l.value-o.start),c&&(l.value=Math.min(l.value,o.length))),{...u,cardinality:l}})}};return ww.ActorQueryOperationSlice=i,ww}var dye;function kmt(){return dye||(dye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Hmt(),t)}(u9)),u9}var c9={},Sw={},fye;function zmt(){if(fye)return Sw;fye=1,Object.defineProperty(Sw,"__esModule",{value:!0}),Sw.ActorQueryOperationUnion=void 0;const t=qr(),e=ke(),r=Ft(),n=Mi(),i=rr(),a=ir();let s=class q3 extends t.ActorQueryOperationTypedMediated{constructor(u){super(u,r.Algebra.Types.UNION);k(this,"mediatorRdfMetadataAccumulate");this.mediatorRdfMetadataAccumulate=u.mediatorRdfMetadataAccumulate}static unionVariables(u){const l={};for(const d of u)for(const f of d){l[f.variable.value]||(l[f.variable.value]={variable:f.variable,canBeUndef:f.canBeUndef,occurrences:0});const h=l[f.variable.value];h.canBeUndef=h.canBeUndef||f.canBeUndef,h.occurrences++}return Object.values(l).map(d=>d.occurrences===u.length?{variable:d.variable,canBeUndef:d.canBeUndef}:{variable:d.variable,canBeUndef:!0})}static async unionMetadata(u,l,d,f){let h=(await f.mediate({mode:"initialize",context:d})).metadata;for(const _ of u)h={..._,...(await f.mediate({mode:"append",accumulatedMetadata:h,appendingMetadata:_,context:d})).metadata};h.state=new n.MetadataValidationState;const p=()=>h.state.invalidate();for(const _ of u)_.state.addInvalidateListener(p);if(l){const _=u.map(g=>g.variables);h.variables=q3.unionVariables(_)}return h}async testOperation(u,l){return(0,e.passTestVoid)()}async runOperation(u,l){const d=await Promise.all(u.input.map(h=>this.mediatorQueryOperation.mediate({operation:h,context:l})));let f;for(const h of d)if(f===void 0)f=h.type;else if(f!==h.type)throw new Error(`Unable to union ${f} and ${h.type}`);if(f==="bindings"||u.input.length===0){const h=d.map(i.getSafeBindings);return{type:"bindings",bindingsStream:new a.UnionIterator(h.map(g=>g.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(g=>g.metadata())).then(g=>q3.unionMetadata(g,!0,l,this.mediatorRdfMetadataAccumulate))}}if(f==="quads"){const h=d.map(i.getSafeQuads);return{type:"quads",quadStream:new a.UnionIterator(h.map(g=>g.quadStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(g=>g.metadata())).then(g=>q3.unionMetadata(g,!1,l,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${f}`)}};return Sw.ActorQueryOperationUnion=s,Sw}var hye;function t3e(){return hye||(hye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(zmt(),t)}(c9)),c9}var l9={},xw={},d9={},Ew={},Iw={},pye;function r3e(){if(pye)return Iw;pye=1,Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.PathVariableObjectIterator=void 0;const t=rr(),e=ir(),r=Br();let n=class extends e.BufferedIterator{constructor(s,o,c,u,l,d,f,h=16){super({autoStart:!1});k(this,"algebraFactory");k(this,"subject");k(this,"predicate");k(this,"graph");k(this,"context");k(this,"mediatorQueryOperation");k(this,"maxRunningOperations");k(this,"termHashes",new Map);k(this,"runningOperations",[]);k(this,"pendingOperations",[]);k(this,"started",!1);this.algebraFactory=s,this.subject=o,this.predicate=c,this.graph=u,this.context=l,this.mediatorQueryOperation=d,this.maxRunningOperations=h,this._push(this.subject,f)}getProperty(s,o){return!this.started&&s==="metadata"&&this.startNextOperation(!1).catch(c=>this.emit("error",c)),super.getProperty(s,o)}_end(s){for(const o of this.runningOperations)o.destroy();super._end(s)}_push(s,o=!0){let c;if(o&&(c=(0,r.termToString)(s),this.termHashes.has(c)))return!1;const u=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:u,operation:this.algebraFactory.createPath(s,this.predicate,u,this.graph)}),c&&(this.termHashes.set(c,s),super._push(s)),!0}async startNextOperation(s){this.started=!0;const o=this.pendingOperations.pop(),c=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:o.operation,context:this.context})),u=c.bindingsStream.map(l=>l.get(o.variable));this.runningOperations.push(u),u.on("error",l=>this.destroy(l)),u.on("readable",()=>{s&&this._fillBufferAsync(),this.readable=!0}),u.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(u),1),s&&this._fillBufferAsync(),this.readable=!0}),this.getProperty("metadata")||this.setProperty("metadata",c.metadata)}_read(s,o){const c=this;(async function(){for(;c.runningOperations.length<c.maxRunningOperations&&c.pendingOperations.length!==0;)await c.startNextOperation(!0);let u=0,l,d=!0;for(;!d||u!==(u=s);){d=!0;for(let f=0;f<c.runningOperations.length&&s>0;f++)(l=c.runningOperations[f].read())!==null&&(c._push(l)?s--:d=!1)}c.closeIfNeeded()})().then(()=>{o()},u=>this.destroy(u))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return Iw.PathVariableObjectIterator=n,Iw}var _ye;function Qmt(){if(_ye)return Ew;_ye=1,Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.ActorAbstractPath=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=rr(),a=ir(),s=Br(),o=r3e();let c=class extends t.ActorQueryOperationTypedMediated{constructor(d,f){super(d,"path");k(this,"predicateType");this.predicateType=f}async testOperation(d,f){return d.predicate.type!==this.predicateType?(0,r.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,r.passTestVoid)()}generateVariable(d,f,h){return h?f&&(f.subject.value===h||f.object.value===h)?this.generateVariable(d,f,`${h}b`):d.variable(h):this.generateVariable(d,f,"b")}async isPathArbitraryLengthDistinct(d,f,h){return f.get(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(f=f.set(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:f,operation:void 0}):(f=f.set(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:f,operation:(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d.createDistinct(h),context:f}))})}async predicateStarGraphVariable(d,f,h,p,_,g,m){const y=this.getPathSources(h),v=this.generateVariable(g.dataFactory,g.createPath(d,h,f,p)),A=g.createUnion([this.assignPatternSources(g,g.createPattern(d,v,f,p),y),this.assignPatternSources(g,g.createPattern(f,v,d,p),y)]),T=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:_,operation:A})),S=new Set;return{bindingsStream:new a.MultiTransformIterator(T.bindingsStream,{multiTransform:j=>{const F=j.get(p);return S.has(F.value)?new a.EmptyIterator:(S.add(F.value),new a.TransformIterator(async()=>{const N=new a.BufferedIterator;return await this.getObjectsPredicateStar(g,d,h,F,_,{},N,{count:0}),N.map(R=>m.bindings([[f,R],[p,F]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:T.metadata}}async getObjectsPredicateStarEval(d,f,h,p,_,g,m,y){if(p.termType==="Variable")return this.predicateStarGraphVariable(d,h,f,p,_,m,y);const v=new o.PathVariableObjectIterator(m,d,f,p,_,this.mediatorQueryOperation,g);return{bindingsStream:v.map(T=>y.bindings([[h,T]])),async metadata(){const T=await new Promise(S=>{v.getProperty("metadata",P=>S(P()))});return T.cardinality.value++,T}}}async getObjectsPredicateStar(d,f,h,p,_,g,m,y){const v=(0,s.termToString)(f);if(g[v])return;m._push(f),g[v]=f,y.count++;const A=this.generateVariable(d.dataFactory),T=d.createPath(f,h,A,p),S=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:T,context:_}));return S.bindingsStream.on("data",async P=>{const j=P.get(A);await this.getObjectsPredicateStar(d,j,h,p,_,g,m,y)}),S.bindingsStream.on("end",()=>{--y.count===0&&m.close()}),S.metadata}async getSubjectAndObjectBindingsPredicateStar(d,f,h,p,_,g,m,y,v,A,T,S,P){const j=(0,s.termToString)(p)+(0,s.termToString)(g);if(v[j])return;if(T.count++,v[j]=!0,A._push(P.bindings([[d,h],[f,p]])),j in y){const N=await y[j];for(const R of N)await this.getSubjectAndObjectBindingsPredicateStar(d,f,h,R,_,g,m,y,v,A,T,S,P);--T.count===0&&A.close();return}const F=new Promise(async(N,R)=>{const C=[],M=this.generateVariable(S.dataFactory),U=S.createPath(p,_,M,g),B=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:U,context:m}));B.bindingsStream.on("data",async G=>{const K=G.get(M);C.push(K),await this.getSubjectAndObjectBindingsPredicateStar(d,f,h,K,_,g,m,y,v,A,T,S,P)}),B.bindingsStream.on("error",R),B.bindingsStream.on("end",()=>{--T.count===0&&A.close(),N(C)})});y[j]=F}getPathSources(d){if((0,n.isKnownOperation)(d,n.Algebra.Types.ALT)||(0,n.isKnownOperation)(d,n.Algebra.Types.SEQ))return d.input.flatMap(f=>this.getPathSources(f));if((0,n.isKnownOperation)(d,n.Algebra.Types.INV)||(0,n.isKnownOperation)(d,n.Algebra.Types.ONE_OR_MORE_PATH)||(0,n.isKnownOperation)(d,n.Algebra.Types.ZERO_OR_MORE_PATH)||(0,n.isKnownOperation)(d,n.Algebra.Types.ZERO_OR_ONE_PATH))return this.getPathSources(d.path);if((0,n.isKnownOperation)(d,n.Algebra.Types.LINK)||(0,n.isKnownOperation)(d,n.Algebra.Types.NPS)){const f=(0,i.getOperationSource)(d);if(!f)throw new Error("Could not find a required source on a link path operation");return[f]}throw new Error(`Can not extract path sources from operation of type ${d.type}`)}assignPatternSources(d,f,h){if(h.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return h.length===1?(0,i.assignOperationSource)(f,h[0]):d.createUnion(h.map(p=>(0,i.assignOperationSource)(f,p)),!0)}};return Ew.ActorAbstractPath=c,Ew}var mye;function Gl(){return mye||(mye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qmt(),t),r(r3e(),t)}(d9)),d9}var gye;function Wmt(){if(gye)return xw;gye=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.ActorQueryOperationPathAlt=void 0;const t=Gl(),e=t3e(),r=dt,n=Ft(),i=rr(),a=ir();let s=class extends t.ActorAbstractPath{constructor(u){super(u,n.Algebra.Types.ALT);k(this,"mediatorRdfMetadataAccumulate");this.mediatorRdfMetadataAccumulate=u.mediatorRdfMetadataAccumulate}async runOperation(u,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=new n.AlgebraFactory(d),h=u.predicate,p=(await Promise.all(h.input.map(m=>this.mediatorQueryOperation.mediate({context:l,operation:f.createPath(u.subject,m,u.object,u.graph)})))).map(i.getSafeBindings);return{type:"bindings",bindingsStream:new a.UnionIterator(p.map(m=>m.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(p.map(m=>m.metadata())).then(m=>e.ActorQueryOperationUnion.unionMetadata(m,!0,l,this.mediatorRdfMetadataAccumulate))}}};return xw.ActorQueryOperationPathAlt=s,xw}var yye;function Kmt(){return yye||(yye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wmt(),t)}(l9)),l9}var f9={},Ow={},bye;function Xmt(){if(bye)return Ow;bye=1,Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.ActorQueryOperationPathLink=void 0;const t=Gl(),e=dt,r=Ft();let n=class extends t.ActorAbstractPath{constructor(a){super(a,r.Algebra.Types.LINK)}async runOperation(a,s){const o=s.getSafe(e.KeysInitQuery.dataFactory),c=new r.AlgebraFactory(o),u=a.predicate,l=Object.assign(c.createPattern(a.subject,u.iri,a.object,a.graph),{metadata:u.metadata});return this.mediatorQueryOperation.mediate({operation:l,context:s})}};return Ow.ActorQueryOperationPathLink=n,Ow}var vye;function Jmt(){return vye||(vye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xmt(),t)}(f9)),f9}var h9={},Rw={},Aye;function Ymt(){if(Aye)return Rw;Aye=1,Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.ActorQueryOperationPathInv=void 0;const t=Gl(),e=dt,r=Ft();let n=class extends t.ActorAbstractPath{constructor(a){super(a,r.Algebra.Types.INV)}async runOperation(a,s){const o=s.getSafe(e.KeysInitQuery.dataFactory),c=new r.AlgebraFactory(o),u=a.predicate,l=c.createPath(a.object,u.path,a.subject,a.graph);return this.mediatorQueryOperation.mediate({operation:l,context:s})}};return Rw.ActorQueryOperationPathInv=n,Rw}var Tye;function $mt(){return Tye||(Tye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ymt(),t)}(h9)),h9}var p9={},Pw={},wye;function Zmt(){if(wye)return Pw;wye=1,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.ActorQueryOperationPathNps=void 0;const t=Gl(),e=dt,r=Ft(),n=rr();let i=class extends t.ActorAbstractPath{constructor(s){super(s,r.Algebra.Types.NPS)}async runOperation(s,o){const c=o.getSafe(e.KeysInitQuery.dataFactory),u=new r.AlgebraFactory(c),l=s.predicate,d=this.generateVariable(c,s),f=Object.assign(u.createPattern(s.subject,d,s.object,s.graph),{metadata:l.metadata}),h=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:o}));return{type:"bindings",bindingsStream:h.bindingsStream.map(_=>l.iris.some(g=>g.equals(_.get(d)))?null:_.delete(d)),metadata:h.metadata}}};return Pw.ActorQueryOperationPathNps=i,Pw}var Sye;function egt(){return Sye||(Sye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zmt(),t)}(p9)),p9}var _9={},Nw={},xye;function tgt(){if(xye)return Nw;xye=1,Object.defineProperty(Nw,"__esModule",{value:!0}),Nw.ActorQueryOperationClear=void 0;const t=qr(),e=dt,r=Ft(),n=rr();let i=class extends t.ActorQueryOperationTypedMediated{constructor(o){super(o,r.Algebra.Types.CLEAR);k(this,"mediatorUpdateQuads");this.mediatorUpdateQuads=o.mediatorUpdateQuads}async testOperation(o,c){return(0,n.testReadOnly)(c)}async runOperation(o,c){const u=c.getSafe(e.KeysInitQuery.dataFactory);let l;o.source==="DEFAULT"?l=u.defaultGraph():typeof o.source=="string"?l=o.source:l=[o.source];const{execute:d}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:l,requireExistence:!o.silent,dropGraphs:!1},context:c});return{type:"void",execute:d}}};return Nw.ActorQueryOperationClear=i,Nw}var Eye;function rgt(){return Eye||(Eye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(tgt(),t)}(_9)),_9}var m9={},Fw={},Iye;function ngt(){if(Iye)return Fw;Iye=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.ActorQueryOperationUpdateCompositeUpdate=void 0;const t=qr(),e=Ft(),r=rr();let n=class extends t.ActorQueryOperationTypedMediated{constructor(a){super(a,e.Algebra.Types.COMPOSITE_UPDATE)}async testOperation(a,s){return(0,r.testReadOnly)(s)}async runOperation(a,s){return{type:"void",execute:()=>(async()=>{for(const c of a.updates)await(0,r.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:c,context:s})).execute()})()}}};return Fw.ActorQueryOperationUpdateCompositeUpdate=n,Fw}var Oye;function igt(){return Oye||(Oye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ngt(),t)}(m9)),m9}var g9={},Mw={},Rye;function agt(){if(Rye)return Mw;Rye=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.ActorQueryOperationCreate=void 0;const t=qr(),e=Ft(),r=rr();let n=class extends t.ActorQueryOperationTypedMediated{constructor(s){super(s,e.Algebra.Types.CREATE);k(this,"mediatorUpdateQuads");this.mediatorUpdateQuads=s.mediatorUpdateQuads}async testOperation(s,o){return(0,r.testReadOnly)(o)}async runOperation(s,o){const{execute:c}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[s.source],requireNonExistence:!s.silent},context:o});return{type:"void",execute:c}}};return Mw.ActorQueryOperationCreate=n,Mw}var Pye;function sgt(){return Pye||(Pye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(agt(),t)}(g9)),g9}var y9={},Dw={},Nye;function ogt(){if(Nye)return Dw;Nye=1,Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.ActorQueryOperationDrop=void 0;const t=qr(),e=dt,r=Ft(),n=rr();let i=class extends t.ActorQueryOperationTypedMediated{constructor(o){super(o,r.Algebra.Types.DROP);k(this,"mediatorUpdateQuads");this.mediatorUpdateQuads=o.mediatorUpdateQuads}async testOperation(o,c){return(0,n.testReadOnly)(c)}async runOperation(o,c){const u=c.getSafe(e.KeysInitQuery.dataFactory);let l;o.source==="DEFAULT"?l=u.defaultGraph():typeof o.source=="string"?l=o.source:l=[o.source];const{execute:d}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:l,requireExistence:!o.silent,dropGraphs:!0},context:c});return{type:"void",execute:d}}};return Dw.ActorQueryOperationDrop=i,Dw}var Fye;function ugt(){return Fye||(Fye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ogt(),t)}(y9)),y9}var b9={},Cw={},Mye;function cgt(){if(Mye)return Cw;Mye=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.ActorQueryOperationLoad=void 0;const t=qr(),e=dt,r=Ft(),n=rr();let i=class extends t.ActorQueryOperationTypedMediated{constructor(o){super(o,r.Algebra.Types.LOAD);k(this,"mediatorUpdateQuads");k(this,"mediatorQuerySourceIdentify");this.mediatorUpdateQuads=o.mediatorUpdateQuads,this.mediatorQuerySourceIdentify=o.mediatorQuerySourceIdentify}async testOperation(o,c){return(0,n.testReadOnly)(c)}async runOperation(o,c){const u=c.getSafe(e.KeysInitQuery.dataFactory),l=new r.AlgebraFactory(u);let d=c;o.silent&&(d=d.set(e.KeysInitQuery.lenient,!0));const{querySource:f}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:o.source.value},context:d});let p=(0,n.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:l.createConstruct((0,n.assignOperationSource)(l.createPattern(u.variable("s"),u.variable("p"),u.variable("o")),f),[l.createPattern(u.variable("s"),u.variable("p"),u.variable("o"))]),context:d})).quadStream;o.destination&&(p=p.map(g=>u.quad(g.subject,g.predicate,g.object,o.destination)));const{execute:_}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:p,context:c});return{type:"void",execute:_}}};return Cw.ActorQueryOperationLoad=i,Cw}var Dye;function lgt(){return Dye||(Dye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(cgt(),t)}(b9)),b9}var v9={},Lw={},Cye;function dgt(){if(Cye)return Lw;Cye=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.ActorQueryOperationJoin=void 0;const t=qr(),e=$i(),r=ke(),n=Ft(),i=Mi(),a=rr(),s=ir(),o=jr();let c=class extends t.ActorQueryOperationTypedMediated{constructor(d){super(d,n.Algebra.Types.JOIN);k(this,"mediatorJoin");this.mediatorJoin=d.mediatorJoin}async testOperation(d,f){return(0,r.passTestVoid)()}async runOperation(d,f){const h=(await Promise.all(d.input.map(async p=>({output:await this.mediatorQueryOperation.mediate({operation:p,context:f}),operation:p})))).map(({output:p,operation:_})=>({output:(0,a.getSafeBindings)(p),operation:_}));if((await Promise.all(h.map(p=>p.output.metadata()))).some(p=>p.cardinality.value===0&&p.cardinality.type==="exact")){for(const p of h)p.output.bindingsStream.close();return{bindingsStream:new s.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new i.MetadataValidationState,cardinality:{type:"exact",value:0},variables:e.ActorRdfJoin.joinVariables(new o.DataFactory,await e.ActorRdfJoin.getMetadatas(h))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:h,context:f})}};return Lw.ActorQueryOperationJoin=c,Lw}var Lye;function fgt(){return Lye||(Lye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(dgt(),t)}(v9)),v9}var A9={},jw={},jye;function hgt(){if(jye)return jw;jye=1,Object.defineProperty(jw,"__esModule",{value:!0}),jw.ActorQueryOperationLeftJoin=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=rr();let a=class extends t.ActorQueryOperationTypedMediated{constructor(c){super(c,n.Algebra.Types.LEFT_JOIN);k(this,"mediatorJoin");this.mediatorJoin=c.mediatorJoin}async testOperation(c,u){return(0,r.passTestVoid)()}async runOperation(c,u){const l=u.getSafe(e.KeysInitQuery.dataFactory),d=new n.AlgebraFactory(l),f=await Promise.all(c.input.map(async(h,p)=>{const _=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:h,context:u}));return c.expression&&p===1?{output:_,operation:d.createFilter(h,c.expression),operationRequired:!0}:{output:_,operation:h}}));return await this.mediatorJoin.mediate({type:"optional",entries:f,context:u})}};return jw.ActorQueryOperationLeftJoin=a,jw}var Bye;function pgt(){return Bye||(Bye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(hgt(),t)}(A9)),A9}var T9={},Bw={},qye;function _gt(){if(qye)return Bw;qye=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.ActorQueryOperationMinus=void 0;const t=qr(),e=ke(),r=Ft(),n=rr();let i=class extends t.ActorQueryOperationTypedMediated{constructor(o){super(o,r.Algebra.Types.MINUS);k(this,"mediatorJoin");this.mediatorJoin=o.mediatorJoin}async testOperation(o,c){return(0,e.passTestVoid)()}async runOperation(o,c){const u=o.graphScopeVar,l=(await Promise.all(o.input.map(async d=>({output:await this.mediatorQueryOperation.mediate({operation:d,context:c}),operation:d})))).map(({output:d,operation:f})=>({output:(0,n.getSafeBindings)(d),operation:f}));return this.mediatorJoin.mediate({type:"minus",entries:l,context:c,graphVariableFromParentScope:u})}};return Bw.ActorQueryOperationMinus=i,Bw}var Uye;function mgt(){return Uye||(Uye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(_gt(),t)}(T9)),T9}var w9={},qw={},Vye;function ggt(){if(Vye)return qw;Vye=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.ActorQueryOperationPathSeq=void 0;const t=Gl(),e=dt,r=Ft(),n=rr();let i=class extends t.ActorAbstractPath{constructor(o){super(o,r.Algebra.Types.SEQ);k(this,"mediatorJoin");this.mediatorJoin=o.mediatorJoin}async runOperation(o,c){const u=c.getSafe(e.KeysInitQuery.dataFactory),l=new r.AlgebraFactory(u),d=o.predicate;let f=o.subject;const h=[],p=await Promise.all(d.input.map((m,y)=>{const v=y===d.input.length-1?o.object:this.generateVariable(u,o,`b${y}`),A=l.createPath(f,m,v,o.graph),T=this.mediatorQueryOperation.mediate({context:c,operation:A});return f=v,y<d.input.length-1&&h.push(v),{output:T,operation:A}}).map(async({output:m,operation:y})=>({output:(0,n.getSafeBindings)(await m),operation:y}))),_=(0,n.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:p,context:c}));return{type:"bindings",bindingsStream:_.bindingsStream.transform({transform(m,y,v){for(const A of h)m=m.delete(A);v(m),y()}}),async metadata(){const m=await _.metadata(),y=m.variables.filter(v=>!h.some(A=>A.value===v.variable.value));return{...m,variables:y}}}}};return qw.ActorQueryOperationPathSeq=i,qw}var Gye;function ygt(){return Gye||(Gye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ggt(),t)}(w9)),w9}var S9={},Uw={},Hye;function bgt(){if(Hye)return Uw;Hye=1,Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.ActorRdfJoinMultiSmallest=void 0;const t=$i(),e=dt,r=ke(),n=Ft(),i=rr();let a=class extends t.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1});k(this,"mediatorJoinEntriesSort");k(this,"mediatorJoin");this.mediatorJoinEntriesSort=c.mediatorJoinEntriesSort,this.mediatorJoin=c.mediatorJoin}getJoinIndexes(c){for(let u=0;u<c.length;u++)for(let l=u+1;l<c.length;l++)if(this.hasCommonVariables(c[u],c[l]))return[u,l];return[0,1]}hasCommonVariables(c,u){const l=c.metadata.variables.map(f=>f.variable.value),d=new Set(u.metadata.variables.map(f=>f.variable.value));return l.some(f=>d.has(f))}async sortJoinEntries(c,u){return(await this.mediatorJoinEntriesSort.mediate({entries:c,context:u})).entries}async getOutput(c,u){const l=c.context.getSafe(e.KeysInitQuery.dataFactory),d=new n.AlgebraFactory(l),f=u.sortedEntries,h=await t.ActorRdfJoin.getEntriesWithMetadatas(f),p=this.getJoinIndexes(h),_=f[p[0]],g=f[p[1]];f.splice(p[1],1),f.splice(p[0],1);const m={output:(0,i.getSafeBindings)(await this.mediatorJoin.mediate({type:c.type,entries:[_,g],context:c.context})),operation:d.createJoin([_.operation,g.operation],!1)};return f.push(m),{result:await this.mediatorJoin.mediate({type:c.type,entries:f,context:c.context})}}async getJoinCoefficients(c,u){let{metadatas:l}=u;l=[...l];const d=await this.sortJoinEntries(c.entries.map((p,_)=>({...p,metadata:l[_]})),c.context);l=d.map(p=>p.metadata);const f=t.ActorRdfJoin.getRequestInitialTimes(l),h=t.ActorRdfJoin.getRequestItemTimes(l);return(0,r.passTestWithSideData)({iterations:l.reduce((p,_)=>p*_.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:l.reduce((p,_,g)=>p+f[g]+_.cardinality.value*h[g],0)},{...u,sortedEntries:d})}};return Uw.ActorRdfJoinMultiSmallest=a,Uw}var kye;function vgt(){return kye||(kye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(bgt(),t)}(S9)),S9}var x9={},Vw={},Gw={},zye;function n3e(){if(zye)return Gw;zye=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.MaxAggregator=void 0;const t=Di();let e=class extends t.AggregateEvaluator{constructor(i,a,s,o){super(i,a,o);k(this,"orderByEvaluator");k(this,"state");this.orderByEvaluator=s}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===-1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Gw.MaxAggregator=e,Gw}var Qye;function Agt(){if(Qye)return Vw;Qye=1,Object.defineProperty(Vw,"__esModule",{value:!0}),Vw.ActorBindingsAggregatorFactoryMax=void 0;const t=Di(),e=ke(),r=n3e();let n=class extends t.ActorBindingsAggregatorFactory{constructor(s){super(s);k(this,"mediatorTermComparatorFactory");this.mediatorTermComparatorFactory=s.mediatorTermComparatorFactory}async test(s){return s.expr.aggregator!=="max"?(0,e.failTest)("This actor only supports the 'max' aggregator."):(0,e.passTestVoid)()}async run({expr:s,context:o}){return new r.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s.expression,context:o}),s.distinct,await this.mediatorTermComparatorFactory.mediate({context:o}))}};return Vw.ActorBindingsAggregatorFactoryMax=n,Vw}var Wye;function Tgt(){return Wye||(Wye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Agt(),t),r(n3e(),t)}(x9)),x9}var E9={},Hw={},kw={},Kye;function i3e(){if(Kye)return kw;Kye=1,Object.defineProperty(kw,"__esModule",{value:!0}),kw.MinAggregator=void 0;const t=Di();let e=class extends t.AggregateEvaluator{constructor(i,a,s,o){super(i,a,o);k(this,"orderByEvaluator");k(this,"state");this.orderByEvaluator=s}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return kw.MinAggregator=e,kw}var Xye;function wgt(){if(Xye)return Hw;Xye=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.ActorBindingsAggregatorFactoryMin=void 0;const t=Di(),e=ke(),r=i3e();let n=class extends t.ActorBindingsAggregatorFactory{constructor(s){super(s);k(this,"mediatorTermComparatorFactory");this.mediatorTermComparatorFactory=s.mediatorTermComparatorFactory}async test(s){return s.expr.aggregator!=="min"?(0,e.failTest)("This actor only supports the 'min' aggregator."):(0,e.passTestVoid)()}async run({context:s,expr:o}){return new r.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:s}),o.distinct,await this.mediatorTermComparatorFactory.mediate({context:s}))}};return Hw.ActorBindingsAggregatorFactoryMin=n,Hw}var Jye;function Sgt(){return Jye||(Jye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(wgt(),t),r(i3e(),t)}(E9)),E9}var I9={},zw={},Qw={},Yye;function xgt(){if(Yye)return Qw;Yye=1,Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.SortIterator=void 0;const t=ir();let e=class extends t.TransformIterator{constructor(i,a,s){super(i,s);k(this,"windowLength");k(this,"sort");k(this,"sorted");const o=s&&s.window;this.windowLength=Number.isFinite(o)&&o>0?o:Number.POSITIVE_INFINITY,this.sort=a,this.sorted=[]}_read(i,a){let s,{length:o}=this.sorted;for(;o!==this.windowLength&&(s=this.source.read(),s!==null);){let c=0,u=o-1,l,d;for(;c<=u;)l=Math.trunc((c+u)/2),d=this.sort(s,this.sorted[l]),d<0?c=l+1:d>0?u=l-1:(c=l,u=-1);this.sorted.splice(c,0,s),o++}o===this.windowLength&&this._push(this.sorted.pop()),a()}_flush(i){let{length:a}=this.sorted;for(;a--;)this._push(this.sorted.pop());i()}};return Qw.SortIterator=e,Qw}var $ye;function Egt(){if($ye)return zw;$ye=1,Object.defineProperty(zw,"__esModule",{value:!0}),zw.ActorQueryOperationOrderBy=void 0;const t=qr(),e=ke(),r=Ft(),n=Ye(),i=rr(),a=xgt();let s=class extends t.ActorQueryOperationTypedMediated{constructor(u){super(u,r.Algebra.Types.ORDER_BY);k(this,"window");k(this,"mediatorExpressionEvaluatorFactory");k(this,"mediatorTermComparatorFactory");this.window=u.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=u.mediatorTermComparatorFactory}async testOperation(){return(0,e.passTestVoid)()}async runOperation(u,l){const d=await this.mediatorQueryOperation.mediate({operation:u.input,context:l}),f=(0,i.getSafeBindings)(d),h={window:this.window};let{bindingsStream:p}=f;const _=await this.mediatorTermComparatorFactory.mediate({context:l});for(let g=u.expressions.length-1;g>=0;g--){let m=u.expressions[g];const y=this.isAscending(m);m=this.extractSortExpression(m);const v=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:m,context:l}),A=async(P,j,F)=>{try{const N=await v.evaluate(P);F({bindings:P,result:N})}catch(N){(0,n.isExpressionError)(N)||p.emit("error",N),F({bindings:P,result:void 0})}j()},T=p.transform({transform:A});p=new a.SortIterator(T,(P,j)=>{let F=_.orderTypes(P.result,j.result);return y||(F*=-1),F},h).map(({bindings:P})=>P)}return{type:"bindings",bindingsStream:p,metadata:f.metadata}}extractSortExpression(u){return(0,r.isKnownSubType)(u,r.Algebra.ExpressionTypes.OPERATOR)&&u.operator==="desc"?u.args[0]:u}isAscending(u){return(0,r.isKnownSubType)(u,r.Algebra.ExpressionTypes.OPERATOR)?u.operator!=="desc":!0}};return zw.ActorQueryOperationOrderBy=s,zw}var Zye;function Igt(){return Zye||(Zye=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Egt(),t)}(I9)),I9}var O9={},Ww={},ebe;function Ogt(){if(ebe)return Ww;ebe=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.ActorOptimizeQueryOperationFilterPushdown=void 0;const t=Yi(),e=dt,r=ke(),n=Ft(),i=rr(),a=Fi();let s=class extends t.ActorOptimizeQueryOperation{constructor(u){super(u);k(this,"aggressivePushdown");k(this,"maxIterations");k(this,"splitConjunctive");k(this,"mergeConjunctive");k(this,"pushIntoLeftJoins");k(this,"pushEqualityIntoPatterns");this.aggressivePushdown=u.aggressivePushdown,this.maxIterations=u.maxIterations,this.splitConjunctive=u.splitConjunctive,this.mergeConjunctive=u.mergeConjunctive,this.pushIntoLeftJoins=u.pushIntoLeftJoins,this.pushEqualityIntoPatterns=u.pushEqualityIntoPatterns}async test(u){return(0,r.passTestVoid)()}async run(u){const l=u.context.getSafe(e.KeysInitQuery.dataFactory),d=new n.AlgebraFactory(l);let f=u.operation;this.splitConjunctive&&(f=n.algebraUtils.mapOperation(f,{[n.Algebra.Types.FILTER]:{transform:m=>(0,n.isKnownSubType)(m.expression,n.Algebra.ExpressionTypes.OPERATOR)&&m.expression.operator==="&&"?(this.logDebug(u.context,`Split conjunctive filter into ${m.expression.args.length} nested filters`),m.expression.args.reduce((y,v)=>d.createFilter(y,v),m.input)):m}}));const h=this.getSources(f),p=new Map(await Promise.all(h.map(async m=>[m,await m.source.getSelectorShape(m.context?u.context.merge(m.context):u.context)])));let _=!0,g=0;for(;_&&g<this.maxIterations;)_=!1,f=n.algebraUtils.mapOperation(f,{[n.Algebra.Types.FILTER]:{transform:m=>{const y=u.context.get(e.KeysInitQuery.extensionFunctions),v=u.context.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!this.shouldAttemptPushDown(m,h,p,y,v))return m;const A=(0,i.getExpressionVariables)(m.expression),[T,S]=this.filterPushdown(m.expression,A,m.input,d,u.context);return T&&(_=!0),S}}}),g++;return g>1&&this.logDebug(u.context,`Pushed down filters in ${g} iterations`),this.mergeConjunctive&&(f=n.algebraUtils.mapOperation(f,{[n.Algebra.Types.FILTER]:{transform:m=>{if(m.input.type===n.Algebra.Types.FILTER){const{nestedExpressions:y,input:v}=this.getNestedFilterExpressions(m);return this.logDebug(u.context,`Merge ${y.length} nested filters into conjunctive filter`),d.createFilter(v,y.slice(1).reduce((A,T)=>d.createOperatorExpression("&&",[A,T]),y[0]))}return m}}})),{operation:f,context:u.context}}shouldAttemptPushDown(u,l,d,f,h){if(this.aggressivePushdown)return!0;const p=u.expression;return(0,n.isKnownSubType)(p,n.Algebra.ExpressionTypes.OPERATOR)&&p.operator==="="&&((0,n.isKnownSubType)(p.args[0],n.Algebra.ExpressionTypes.TERM)&&p.args[0].term.termType!=="Variable"&&(0,n.isKnownSubType)(p.args[1],n.Algebra.ExpressionTypes.TERM)&&p.args[1].term.termType==="Variable"||(0,n.isKnownSubType)(p.args[0],n.Algebra.ExpressionTypes.TERM)&&p.args[0].term.termType==="Variable"&&(0,n.isKnownSubType)(p.args[1],n.Algebra.ExpressionTypes.TERM)&&p.args[1].term.termType!=="Variable")?!0:f&&(0,n.isKnownSubType)(p,n.Algebra.ExpressionTypes.NAMED)&&p.name.value in f&&!l.some(_=>(0,i.doesShapeAcceptOperation)(d.get(_),p))?!1:!!l.some(_=>(0,i.doesShapeAcceptOperation)(d.get(_),u,{wildcardAcceptAllExtensionFunctions:h}))}getSources(u){const l=new Set,d=f=>{const h=(0,i.getOperationSource)(f);return h&&l.add(h),!1};return n.algebraUtils.visitOperation(u,{[n.Algebra.Types.PATTERN]:{visitor:d},[n.Algebra.Types.SERVICE]:{visitor:d},[n.Algebra.Types.LINK]:{visitor:d},[n.Algebra.Types.NPS]:{visitor:d}}),[...l]}getOverlappingOperations(u,l){const d=[],f=[],h=[];for(const p of u.input){const _=n.algebraUtils.inScopeVariables(p);this.variablesSubSetOf(l,_)?d.push(p):this.variablesIntersect(l,_)?f.push(p):h.push(p)}return{fullyOverlapping:d,partiallyOverlapping:f,notOverlapping:h}}filterPushdown(u,l,d,f,h){if(this.isExpressionFalse(u))return[!0,f.createUnion([])];if((0,n.isKnownOperation)(u,n.Algebra.Types.EXPRESSION,n.Algebra.ExpressionTypes.EXISTENCE))return[!1,f.createFilter(d,u)];if((0,n.isKnownOperation)(d,n.Algebra.Types.EXTEND))return this.variablesIntersect([d.variable],l)?[!1,f.createFilter(d,u)]:[!0,f.createExtend(this.filterPushdown(u,l,d.input,f,h)[1],d.variable,d.expression)];if((0,n.isKnownOperation)(d,n.Algebra.Types.FILTER)){const[p,_]=this.filterPushdown(u,l,d.input,f,h);return[p,f.createFilter(_,d.expression)]}if((0,n.isKnownOperation)(d,n.Algebra.Types.JOIN)){if(d.input.length===0)return[!1,f.createFilter(d,u)];const{fullyOverlapping:p,partiallyOverlapping:_,notOverlapping:g}=this.getOverlappingOperations(d,l),m=[];let y=!1;return p.length>0&&(y=!0,m.push(f.createJoin(p.map(v=>this.filterPushdown(u,l,v,f,h)[1])))),_.length>0&&m.push(f.createFilter(f.createJoin(_,!1),u)),g.length>0&&m.push(...g),m.length>1&&(y=!0),y&&this.logDebug(h,`Push down filter across join entries with ${p.length} fully overlapping, ${_.length} partially overlapping, and ${g.length} not overlapping`),[y,m.length===1?m[0]:f.createJoin(m)]}if((0,n.isKnownOperation)(d,n.Algebra.Types.NOP))return[!0,d];if((0,n.isKnownOperation)(d,n.Algebra.Types.PROJECT))return this.variablesIntersect(d.variables,l)?[!0,f.createProject(this.filterPushdown(u,l,d.input,f,h)[1],d.variables)]:[!0,d];if((0,n.isKnownOperation)(d,n.Algebra.Types.UNION)){const{fullyOverlapping:p,partiallyOverlapping:_,notOverlapping:g}=this.getOverlappingOperations(d,l),m=[];let y=!1;return p.length>0&&(y=!0,m.push(f.createUnion(p.map(v=>this.filterPushdown(u,l,v,f,h)[1])))),_.length>0&&m.push(f.createFilter(f.createUnion(_,!1),u)),g.length>0&&m.push(...g),m.length>1&&(y=!0),y&&this.logDebug(h,`Push down filter across union entries with ${p.length} fully overlapping, ${_.length} partially overlapping, and ${g.length} not overlapping`),[y,m.length===1?m[0]:f.createUnion(m)]}if((0,n.isKnownOperation)(d,n.Algebra.Types.VALUES))return this.variablesIntersect(d.variables,l)?[!1,f.createFilter(d,u)]:[!0,d];if((0,n.isKnownOperation)(d,n.Algebra.Types.LEFT_JOIN)){if(this.pushIntoLeftJoins){const p=n.algebraUtils.inScopeVariables(d.input[1]);if(!this.variablesIntersect(l,p))return this.logDebug(h,"Push down filter into left join"),[!0,f.createLeftJoin(this.filterPushdown(u,l,d.input[0],f,h)[1],d.input[1],d.expression)]}return[!1,f.createFilter(d,u)]}if((0,n.isKnownOperation)(d,n.Algebra.Types.PATTERN)){if(this.pushEqualityIntoPatterns){const p=this.getEqualityExpressionPushableIntoPattern(u);if(p){let _=!1;const g=d.metadata;if(d=(0,a.mapTermsNested)(d,m=>m.equals(p.variable)?(_=!0,p.term):m),d.type=n.Algebra.Types.PATTERN,d.metadata=g,_)return this.logDebug(h,`Push down filter into pattern for ?${p.variable.value}`),[!0,f.createJoin([d,f.createValues([p.variable],[{[p.variable.value]:p.term}])])]}}return[!1,f.createFilter(d,u)]}if((0,n.isKnownOperation)(d,n.Algebra.Types.PATH)){if(this.pushEqualityIntoPatterns){const p=this.getEqualityExpressionPushableIntoPattern(u);if(p&&(d.subject.equals(p.variable)||d.object.equals(p.variable))){this.logDebug(h,`Push down filter into path for ?${p.variable.value}`);const _=d.metadata;return d=f.createPath(d.subject.equals(p.variable)?p.term:d.subject,d.predicate,d.object.equals(p.variable)?p.term:d.object),d.metadata=_,[!0,f.createJoin([d,f.createValues([p.variable],[{[p.variable.value]:p.term}])])]}}return[!1,f.createFilter(d,u)]}return[!1,f.createFilter(d,u)]}getEqualityExpressionPushableIntoPattern(u){if((0,n.isKnownSubType)(u,n.Algebra.ExpressionTypes.OPERATOR)&&u.operator==="="){const l=u.args[0],d=u.args[1];if((0,n.isKnownSubType)(l,n.Algebra.ExpressionTypes.TERM)&&l.term.termType!=="Variable"&&(l.term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(l.term))&&(0,n.isKnownSubType)(d,n.Algebra.ExpressionTypes.TERM)&&d.term.termType==="Variable")return{variable:d.term,term:l.term};if((0,n.isKnownSubType)(l,n.Algebra.ExpressionTypes.TERM)&&l.term.termType==="Variable"&&(0,n.isKnownSubType)(d,n.Algebra.ExpressionTypes.TERM)&&d.term.termType!=="Variable"&&(d.term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(d.term)))return{variable:l.term,term:d.term}}}isLiteralWithCanonicalLexicalForm(u){switch(u.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(u,l){return u.some(d=>l.some(f=>d.equals(f)))}variablesSubSetOf(u,l){return u.length<=l.length&&u.every(d=>l.some(f=>d.equals(f)))}isExpressionFalse(u){const l=u;return l.term&&l.term.termType==="Literal"&&l.term.value==="false"}getNestedFilterExpressions(u){if((0,n.isKnownOperation)(u.input,n.Algebra.Types.FILTER)){const l=this.getNestedFilterExpressions(u.input);return{nestedExpressions:[u.expression,...l.nestedExpressions],input:l.input}}return{nestedExpressions:[u.expression],input:u.input}}};return Ww.ActorOptimizeQueryOperationFilterPushdown=s,Ww}var tbe;function Rgt(){return tbe||(tbe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ogt(),t)}(O9)),O9}var R9={},Kw={},Lh={},Xw={},rbe;function s3e(){if(rbe)return Xw;rbe=1,Object.defineProperty(Xw,"__esModule",{value:!0}),Xw.DereferenceCachePolicyHttpWrapper=void 0;const t=DQ();let e=class a3e{constructor(n,i){k(this,"cachePolicy");k(this,"maxAcceptHeaderLength");this.cachePolicy=n,this.maxAcceptHeaderLength=i}storable(){return this.cachePolicy.storable()}async satisfiesWithoutRevalidation(n){return this.cachePolicy.satisfiesWithoutRevalidation({input:n.url,init:{headers:await t.ActorDereferenceHttpBase.establishAcceptHeader(n,this.maxAcceptHeaderLength),method:n.method},context:n.context})}responseHeaders(){return this.cachePolicy.responseHeaders()}timeToLive(){return this.cachePolicy.timeToLive()}async revalidationHeaders(n){return this.cachePolicy.revalidationHeaders({input:n.url,init:{headers:await t.ActorDereferenceHttpBase.establishAcceptHeader(n,this.maxAcceptHeaderLength),method:n.method},context:n.context})}async revalidatedPolicy(n,i){const a=await this.cachePolicy.revalidatedPolicy({input:n.url,init:{headers:await t.ActorDereferenceHttpBase.establishAcceptHeader(n,this.maxAcceptHeaderLength),method:n.method},context:n.context},i);return{policy:new a3e(a.policy,this.maxAcceptHeaderLength),modified:a.modified,matches:a.matches}}};return Xw.DereferenceCachePolicyHttpWrapper=e,Xw}var nbe;function DQ(){if(nbe)return Lh;nbe=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.ActorDereferenceHttpBase=void 0,Lh.mediaTypesToAcceptString=c;const t=Qz(),e=Yo(),r=ke(),n=m0(),i=Bn(),a=s3e(),s=/^[^ ;]*/u,o=/version=([^ ;]*)/u;function c(l,d){const f="*/*;q=0.1",h=[],p=Object.entries(l).map(([g,m])=>({mediaType:g,priority:m})).sort((g,m)=>m.priority===g.priority?g.mediaType.localeCompare(m.mediaType):m.priority-g.priority);let _=p.length-1;for(const{mediaType:g,priority:m}of p){const y=g+(m===1?"":`;q=${m.toFixed(3).replace(/0*$/u,"")}`);if(_+y.length>d){for(;_+f.length>d;){const v=h.pop()??"";_-=v.length+1}h.push(f);break}h.push(y),_+=y.length}return h.length===0?"*/*":h.join(",")}let u=class o3e extends t.ActorDereference{constructor(f){super(f);k(this,"mediatorHttp");k(this,"maxAcceptHeaderLength");k(this,"maxAcceptHeaderLengthBrowser");this.mediatorHttp=f.mediatorHttp,this.maxAcceptHeaderLength=f.maxAcceptHeaderLength,this.maxAcceptHeaderLengthBrowser=f.maxAcceptHeaderLengthBrowser}async test({url:f}){return/^https?:/u.test(f)?(0,r.passTestVoid)():(0,r.failTest)(`Cannot retrieve ${f} because it is not an HTTP(S) URL.`)}async run(f){var P,j;let h=!0;const p=this.getMaxAcceptHeaderLength(),_=await o3e.establishAcceptHeader(f,p);let g;const m=Date.now();try{g=await this.mediatorHttp.mediate({context:f.context,init:{headers:_,method:f.method},input:f.url})}catch(F){return this.handleDereferenceErrors(f,F)}const y=(0,i.resolve)(g.url,f.url),v=Date.now()-m;if(g.status!==200){h=!1;const F=g.body?await(0,n.stringify)(e.ActorHttp.toNodeReadable(g.body)):"empty response";if(!f.acceptErrors){const N=new Error(`Could not retrieve ${f.url} (HTTP status ${g.status}):
${F}`);return this.handleDereferenceErrors(f,N,g.headers,v)}}const A=g.headers.get("content-type")??"",T=(P=s.exec(A))==null?void 0:P[0],S=(j=o.exec(A))==null?void 0:j[1];return{url:y,data:h?e.ActorHttp.toNodeReadable(g.body):(0,t.emptyReadable)(),exists:h,requestTime:v,status:g.status,headers:g.headers,mediaType:T==="text/plain"?void 0:T,version:S,cachePolicy:g.cachePolicy?new a.DereferenceCachePolicyHttpWrapper(g.cachePolicy,p):void 0}}static async establishAcceptHeader(f,h){var _;const p=new Headers(f.headers);return p.append("Accept",c(await((_=f.mediaTypes)==null?void 0:_.call(f))??{},h)),p}};return Lh.ActorDereferenceHttpBase=u,Lh}var ibe;function Pgt(){if(ibe)return Kw;ibe=1,Object.defineProperty(Kw,"__esModule",{value:!0}),Kw.ActorDereferenceHttp=void 0;const t=DQ();class e extends t.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}return Kw.ActorDereferenceHttp=e,Kw}var abe;function Ngt(){return abe||(abe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pgt(),t),r(DQ(),t),r(s3e(),t)}(R9)),R9}var P9={},Jw={},N9={},Yw={},F9={},$w={},M9={},sbe;function CO(){return sbe||(sbe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class e extends Error{constructor(n,i){super(n),this.code=i}}t.ErrorCoded=e,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))}(M9)),M9}var Zw={},obe;function u3e(){if(obe)return Zw;obe=1,Object.defineProperty(Zw,"__esModule",{value:!0}),Zw.FetchDocumentLoader=void 0;const t=CO(),e=AO(),r=Bn();class n{constructor(a){this.fetcher=a}async load(a){const s=await(this.fetcher||fetch)(a,{headers:new Headers({accept:"application/ld+json"})});if(s.ok&&s.headers){let o=s.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await s.json();if(s.headers.has("Link")){let c;if(s.headers.forEach((u,l)=>{if(l==="link"){const d=(0,e.parse)(u);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+a);c=(0,r.resolve)(f.uri,a)}}}),c)return this.load(c)}throw new t.ErrorCoded(`Unsupported JSON-LD media type ${o}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(s.statusText||`Status code: ${s.status}`)}}return Zw.FetchDocumentLoader=n,Zw}var D9={},eS={},ube;function CQ(){if(ube)return eS;ube=1,Object.defineProperty(eS,"__esModule",{value:!0}),eS.Util=void 0;class t{static isCompactIri(r){return r.indexOf(":")>0&&!(r&&r[0]==="#")}static getPrefix(r,n){if(r&&r[0]==="#")return null;const i=r.indexOf(":");if(i>=0){if(r.length>i+1&&r.charAt(i+1)==="/"&&r.charAt(i+2)==="/")return null;const a=r.substr(0,i);if(a==="_")return null;if(n[a])return a}return null}static getContextValueId(r){if(r===null||typeof r=="string")return r;const n=r["@id"];return n||null}static isSimpleTermDefinitionPrefix(r,n){return!t.isPotentialKeyword(r)&&(n.allowPrefixNonGenDelims||typeof r=="string"&&(r[0]==="_"||t.isPrefixIriEndingWithGenDelim(r)))}static isPotentialKeyword(r){return typeof r=="string"&&t.KEYWORD_REGEX.test(r)}static isPrefixIriEndingWithGenDelim(r){return t.ENDS_WITH_GEN_DELIM.test(r)}static isPrefixValue(r){return r&&(typeof r=="string"||r&&typeof r=="object")}static isValidIri(r){return!!(r&&t.IRI_REGEX.test(r))}static isValidIriWeak(r){return!!r&&r[0]!==":"&&t.IRI_REGEX_WEAK.test(r)}static isValidKeyword(r){return t.VALID_KEYWORDS[r]}static isTermProtected(r,n){const i=r[n];return typeof i!="string"&&i&&i["@protected"]}static hasProtectedTerms(r){for(const n of Object.keys(r))if(t.isTermProtected(r,n))return!0;return!1}static isReservedInternalKeyword(r){return r.startsWith("@__")}static deepEqual(r,n){const i=Object.keys(r),a=Object.keys(n);return i.length!==a.length?!1:i.every(s=>{const o=r[s],c=n[s];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}}return t.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,t.IRI_REGEX_WEAK=/(?::[^:])|\//,t.KEYWORD_REGEX=/^@[a-z]+$/i,t.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,t.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,t.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,t.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},t.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],t.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],t.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],t.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],t.CONTAINERS_1_0=["@list","@set","@index"],eS.Util=t,eS}var cbe;function c3e(){return cbe||(cbe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const e=Bn(),r=CO(),n=CQ();class i{constructor(s){this.contextRaw=s}getContextRaw(){return this.contextRaw}expandTerm(s,o,c=t.defaultExpandOptions){const u=this.contextRaw[s];if(u===null||u&&u["@id"]===null)return null;let l=!0;if(u&&o){const g=n.Util.getContextValueId(u);if(g&&g!==s)if(typeof g!="string"||!n.Util.isValidIri(g)&&!n.Util.isValidKeyword(g))n.Util.isPotentialKeyword(g)||(l=!1);else return g}const d=n.Util.getPrefix(s,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],_=n.Util.isPotentialKeyword(s);if(d){const g=this.contextRaw[d],m=n.Util.getContextValueId(g);if(m){if(typeof g=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,c))return s}else if(m[0]!=="_"&&!_&&!g["@prefix"]&&!(s in this.contextRaw))return s;return m+s.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!_&&!n.Util.isCompactIri(s))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,e.resolve)(f,p):"")+s;throw new r.ErrorCoded(`Relative vocab expansion for term '${s}' with vocab '${f}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+s;else if(!o&&p&&!_&&!n.Util.isCompactIri(s))return(0,e.resolve)(s,p);if(l)return s;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${s}': '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(s,o){if(o&&this.contextRaw["@vocab"]&&s.startsWith(this.contextRaw["@vocab"]))return s.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&s.startsWith(this.contextRaw["@base"]))return s.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:s};for(const u in this.contextRaw){const l=this.contextRaw[u];if(l&&!n.Util.isPotentialKeyword(u)){const d=n.Util.getContextValueId(l);if(s.startsWith(d)){const f=s.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=u,c.suffix=f);else if(o)return u}}}return c.prefix?c.prefix+":"+c.suffix:s}}t.JsonLdContextNormalized=i,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(D9)),D9}var lbe;function Fgt(){if(lbe)return $w;lbe=1,Object.defineProperty($w,"__esModule",{value:!0}),$w.ContextParser=void 0;const t=Bn(),e=CO(),r=u3e(),n=c3e(),i=CQ();class a{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new r.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,u){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,u);if(!i.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,u);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!i.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let u=o[c];if(u&&typeof u=="object"&&u["@reverse"]&&!u["@id"]){if(typeof u["@reverse"]!="string"||i.Util.isValidKeyword(u["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${u["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);u=o[c]=Object.assign(Object.assign({},u),{"@id":u["@reverse"]}),u["@id"]=u["@reverse"],i.Util.isPotentialKeyword(u["@reverse"])?delete u["@reverse"]:u["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,u){const l=o.getContextRaw();for(const d of u||Object.keys(l))if(i.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!i.Util.isReservedInternalKeyword(d)){const f=l[d];if(i.Util.isPotentialKeyword(d)&&i.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(i.Util.ALIAS_RANGE_BLACKLIST.indexOf(i.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&i.Util.isPotentialKeyword(i.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;i.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const _=h["@id"],g=h["@type"],m=!("@prefix"in h)||i.Util.isValidIri(d);if("@id"in h)_!=null&&typeof _=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(_,!0)}),p=p||_!==l[d]["@id"]);else if(!i.Util.isPotentialKeyword(d)&&m){const y=o.expandTerm(d,!0);y!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":y}),p=!0)}if(g&&typeof g=="string"&&g!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&m){let y=o.expandTerm(g,!0);c&&g===y&&(y=o.expandTerm(g,!1)),y!==g&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":y}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:u}){if(u||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const u=o[c];if(u&&typeof u=="object"){if(typeof u["@container"]=="string")o[c]=Object.assign(Object.assign({},u),{"@container":{[u["@container"]]:!0}});else if(Array.isArray(u["@container"])){const l={};for(const d of u["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},u),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},u){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!i.Util.isReservedInternalKeyword(l)&&!i.Util.isPotentialKeyword(l)&&!i.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},i.Util.isSimpleTermDefinitionPrefix(d,u)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,u,l){for(const d of l??Object.keys(c))if(i.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!i.Util.deepEqual(o[d],c[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(i.Util.getContextValueId(o[d]))} to ${JSON.stringify(i.Util.getContextValueId(c[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const u of Object.keys(o)){if(i.Util.isReservedInternalKeyword(u))continue;if(u==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${u}': '${JSON.stringify(o[u])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[u],d=typeof l;if(i.Util.isPotentialKeyword(u)){switch(u.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[u]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&a.validateLanguage(l,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${l}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&a.validateDirection(l,!0);break;case"propagate":if(c===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${l}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(i.Util.isValidKeyword(u)&&i.Util.isValidKeyword(i.Util.getContextValueId(l)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${i.Util.getContextValueId(l)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(i.Util.getPrefix(l,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(l==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!i.Util.isCompactIri(u)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(i.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(h==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.getPrefix(h,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!i.Util.isValidIri(h)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${u}':'${h}' and '${l["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||i.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${Object.keys(h)}') in 1.0, must be only one of ${i.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(i.Util.CONTAINERS.indexOf(p)<0)throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${p}'), must be one of ${i.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":a.validateLanguage(h,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":a.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!i.Util.isValidIri(u))throw new e.ErrorCoded(`Invalid @prefix definition for '${u}' ('${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(i.Util.isPotentialKeyword(h)&&h!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${u}': '${l}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,u){return typeof o=="string"||(u&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!i.Util.isValidIri(o["@base"])&&(o["@base"]=(0,t.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!i.Util.isValidIri(o))try{o=(0,t.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,u){for(const l of u??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},u={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=a.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:_,minimalProcessing:g}=c,m=c.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!_&&d&&i.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const y=this.normalizeContextIri(o,l),v=this.getOverriddenLoad(y,c);if(v)return new n.JsonLdContextNormalized(v);const A=await this.parse(await this.load(y),Object.assign(Object.assign({},c),{baseIRI:y,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[y]:!0})}));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(Array.isArray(o)){const y=[],v=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const P=this.normalizeContextIri(T,l);y[S]=P;const j=this.getOverriddenLoad(P,c);return j||this.load(P)}else return T}));if(g)return new n.JsonLdContextNormalized(v);const A=await v.reduce((T,S,P)=>T.then(j=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:y[P]||c.baseIRI,external:!!y[P]||c.external,parentContext:j.getContextRaw(),remoteContexts:y[P]?Object.assign(Object.assign({},m),{[y[P]]:!0}):m}),{skipValidation:P<v.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(typeof o=="object"){if("@context"in o){if(c!=null&&c.disallowDirectlyNestedContext)throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping @context to ${JSON.stringify(o["@context"])}`,e.ERROR_CODES.KEYWORD_REDEFINITION);return await this.parse(o["@context"],c)}if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),g)return new n.JsonLdContextNormalized(o);let y={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);y=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(y,{processingMode:h},n.defaultExpandOptions);const v=Object.assign(y,o);this.idifyReverseTerms(v),this.normalize(v,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(v,{processingMode:h},n.defaultExpandOptions);const A=Object.keys(v),T=[];if(typeof d=="object")for(const P in d)P in v?T.push(P):v[P]=d[P];await this.parseInnerContexts(v,c,A);const S=new n.JsonLdContextNormalized(v);return(v&&v["@version"]||a.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?v["@vocab"]=d["@vocab"]+o["@vocab"]:(i.Util.isCompactIri(o["@vocab"])||o["@vocab"]in v)&&(v["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,A),!_&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,v,n.defaultExpandOptions,T),this.validateContext&&!u.skipValidation&&this.validate(v,{processingMode:h}),S}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let u;try{u=await this.documentLoader.load(o)}catch(l){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in u))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=u["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return a.DEFAULT_PROCESSING_MODE=1.1,$w.ContextParser=a,$w}var C9={},dbe;function Mgt(){return dbe||(dbe=1,Object.defineProperty(C9,"__esModule",{value:!0})),C9}var L9={},fbe;function Dgt(){return fbe||(fbe=1,Object.defineProperty(L9,"__esModule",{value:!0})),L9}var hbe;function ba(){return hbe||(hbe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fgt(),t),r(CO(),t),r(u3e(),t),r(Mgt(),t),r(Dgt(),t),r(c3e(),t),r(CQ(),t)}(F9)),F9}var tS={},rS={},nS={},iS={},pbe;function Cgt(){if(pbe)return iS;pbe=1,Object.defineProperty(iS,"__esModule",{value:!0}),iS.ContainerHandlerIdentifier=void 0;let t=class{canCombineWithGraph(){return!0}async handle(r,n,i,a,s,o){let c;if(n.emittedStack[o+1]&&n.idStack[o+1])c=n.idStack[o+1][0];else{const d=await i.getContainerKey(a[o],a,o)!==null?await i.resourceToTerm(await n.getContext(a),a[o]):i.dataFactory.blankNode();if(!d){n.emittedStack[o]=!1;return}c=d,n.idStack[o+1]=[c]}let u=n.idStack[o];u||(u=n.idStack[o]=[]),u.some(l=>l.equals(c))||u.push(c),await n.handlePendingContainerFlushBuffers()||(n.emittedStack[o]=!1)}};return iS.ContainerHandlerIdentifier=t,iS}var aS={},sS={},_be;function mM(){if(_be)return sS;_be=1,Object.defineProperty(sS,"__esModule",{value:!0}),sS.EntryHandlerPredicate=void 0;const t=ba(),e=Lf();let r=class l3e{static async handlePredicateObject(i,a,s,o,c,u,l,d,f){const h=await a.getPropertiesDepth(s,o),p=await a.getDepthOffsetGraph(o,s),_=o-p,g=i.idStack[h];if(g&&!f)for(const m of g)if(p>=0){const v=i.idStack[_-1];if(v)for(const A of v)a.emitQuadChecked(o,m,c,u,A,l,d);else l?(a.validateReverseSubject(u),i.getUnidentifiedGraphBufferSafe(_-1).push({subject:u,predicate:c,object:m,isEmbedded:d})):i.getUnidentifiedGraphBufferSafe(_-1).push({subject:m,predicate:c,object:u,isEmbedded:d})}else{const v=await a.getGraphContainerValue(s,h);a.emitQuadChecked(o,m,c,u,v,l,d)}else if(l&&a.validateReverseSubject(u),f){if(i.rdfstar){i.idStack[o]&&i.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${i.idStack[o][0].value}`,t.ERROR_CODES.INVALID_ANNOTATION));for(let v=0;v<o;v++)await a.unaliasKeyword(s[v],s,v)==="@id"&&i.emitError(new t.ErrorCoded("Found an illegal annotation inside an embedded node",t.ERROR_CODES.INVALID_ANNOTATION));const m=i.getAnnotationsBufferSafe(h),y={predicate:c,object:u,reverse:l,nestedAnnotations:[],depth:h};m.push(y);for(let v=m.length-2;v>=0;v--){const A=m[v];A.depth>h&&(y.nestedAnnotations.push(A),m.splice(v,1))}}}else i.getUnidentifiedValueBufferSafe(h).push({predicate:c,object:u,reverse:l,isEmbedded:d})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(i,a,s,o,c){const u=s[o];if(u){const l=await i.getContext(s);if(!i.jsonLiteralStack[o]&&await a.predicateToTerm(l,s[o]))return e.Util.getContextValueType(l,u)==="@json"&&(i.jsonLiteralStack[o+1]=!0),!0}return!1}async test(i,a,s,o,c){return o[c]}async handle(i,a,s,o,c,u,l){const d=o[u],f=await i.getContext(o),h=await a.predicateToTerm(f,s);if(h){const p=await a.valueToTerm(f,s,c,u,o);if(p.length)for(let _ of p){let g=await a.unaliasKeywordParent(o,u);const m=e.Util.isPropertyReverse(f,d,g);let y=0;for(;g==="@reverse"||typeof g=="number";)typeof g=="number"?y++:u--,g=await a.unaliasKeywordParent(o,u-y);const v=e.Util.isPropertyInEmbeddedNode(g);a.validateReverseInEmbeddedNode(s,m,v);const A=e.Util.isPropertyInAnnotationObject(g);if(c){const T="@list"in e.Util.getContextValueContainer(f,s);if(T||c["@list"]){if((T&&!Array.isArray(c)&&!c["@list"]||c["@list"]&&!Array.isArray(c["@list"]))&&_!==a.rdfNil){const S=a.dataFactory.blankNode();i.emitQuad(u,a.dataFactory.quad(S,a.rdfRest,a.rdfNil,a.getDefaultGraph())),i.emitQuad(u,a.dataFactory.quad(S,a.rdfFirst,_,a.getDefaultGraph())),_=S}if(m&&!i.allowSubjectList)throw new t.ErrorCoded(`Found illegal list value in subject position at ${s}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await l3e.handlePredicateObject(i,a,o,u,h,_,m,v,A)}}}};return sS.EntryHandlerPredicate=r,sS}var mbe;function Lgt(){if(mbe)return aS;mbe=1,Object.defineProperty(aS,"__esModule",{value:!0}),aS.ContainerHandlerIndex=void 0;const t=ba(),e=mM(),r=Lf();let n=class{canCombineWithGraph(){return!0}async handle(a,s,o,c,u,l){if(!Array.isArray(u)){const d="@graph"in a,f=await s.getContext(c),h=c[l-1],p=r.Util.getContextValueIndex(f,h);if(p){if(t.Util.isPotentialKeyword(p))throw new t.ErrorCoded(`Keywords can not be used as @index value, got: ${p}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof p!="string")throw new t.ErrorCoded(`@index values must be strings, got: ${p}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof u!="object"){if(r.Util.getContextValueType(f,h)!=="@id")throw new t.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${u}`,t.ERROR_CODES.INVALID_VALUE_OBJECT);const m=o.resourceToTerm(f,u);m&&(s.idStack[l+1]=[m])}const g=o.createVocabOrBaseTerm(f,p);if(g){const m=await o.valueToTerm(f,p,await o.getContainerKey(c[l],c,l),l,c);if(d){const y=await o.getGraphContainerValue(c,l+1);for(const v of m)s.emitQuad(l,o.dataFactory.quad(y,g,v,o.getDefaultGraph()))}else for(const y of m)await e.EntryHandlerPredicate.handlePredicateObject(s,o,c,l+1,g,y,!1,!1,!1)}}const _=d?2:1;await s.newOnValueJob(c.slice(0,c.length-_),u,l-_,!0),await s.handlePendingContainerFlushBuffers()}s.emittedStack[l]=!1}};return aS.ContainerHandlerIndex=n,aS}var oS={},gbe;function jgt(){if(gbe)return oS;gbe=1,Object.defineProperty(oS,"__esModule",{value:!0}),oS.ContainerHandlerLanguage=void 0;const t=ba();let e=class{canCombineWithGraph(){return!1}async handle(n,i,a,s,o,c){const u=await a.getContainerKey(s[c],s,c);if(Array.isArray(o))o=o.map(l=>({"@value":l,"@language":u}));else{if(typeof o!="string")throw new t.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(o)}', but expected string`,t.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);o={"@value":o,"@language":u}}await i.newOnValueJob(s.slice(0,s.length-1),o,c-1,!0),i.emittedStack[c]=!1}};return oS.ContainerHandlerLanguage=e,oS}var uS={},ybe;function Bgt(){if(ybe)return uS;ybe=1,Object.defineProperty(uS,"__esModule",{value:!0}),uS.ContainerHandlerType=void 0;const t=mM(),e=Lf();let r=class{canCombineWithGraph(){return!1}async handle(i,a,s,o,c,u){if(!Array.isArray(c)){if(typeof c=="string"){const f=await a.getContext(o),p=e.Util.getContextValueType(f,o[u-1])==="@vocab"?await s.createVocabOrBaseTerm(f,c):await s.resourceToTerm(f,c);if(p){const _={"@id":p.termType==="NamedNode"?p.value:c};await a.newOnValueJob(o.slice(0,o.length-1),_,u-1,!0),a.idStack[u+1]=[p]}}else{const f=!!a.idStack[u+1];f||delete a.idStack[u],await a.newOnValueJob(o.slice(0,o.length-1),c,u-1,!0),f||(a.idStack[u+1]=a.idStack[u])}const l=await s.getContainerKey(o[u],o,u),d=l!==null?s.createVocabOrBaseTerm(await a.getContext(o),l):null;d&&await t.EntryHandlerPredicate.handlePredicateObject(a,s,o,u+1,s.rdfType,d,!1,!1,!1),await a.handlePendingContainerFlushBuffers()}a.emittedStack[u]=!1}};return uS.ContainerHandlerType=r,uS}var bbe;function d3e(){if(bbe)return nS;bbe=1,Object.defineProperty(nS,"__esModule",{value:!0}),nS.EntryHandlerContainer=void 0;const t=Cgt(),e=Lgt(),r=jgt(),n=Bgt(),i=Lf();let a=class Nc{static isSimpleGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length===2||Object.keys(o).length===1)}static isComplexGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length>2||!("@set"in o)&&Object.keys(o).length>1)}static getContainerGraphIndex(o,c,u){let l=Nc.isSimpleGraphContainer(o),d="";for(let f=c;f<u.length;f++)(!l||typeof u[f]=="number")&&(d+=":"+u[f]),!l&&typeof u[f]!="number"&&(l=!0);return d}static async getContainerHandler(o,c,u){const l={containers:{"@set":!0},depth:u,fallback:!0};let d=!1;const f=await o.getContext(c,2);for(let h=u-1;h>=0;h--)if(typeof c[h]!="number"){const p=i.Util.getContextValue(f,"@container",c[h],!1);if(p&&Nc.isSimpleGraphContainer(p))return{containers:p,depth:h+1,fallback:!1};const _=i.Util.getContextValue(f,"@container",c[h-1],!1);if(_){const g="@graph"in _;for(const m in Nc.CONTAINER_HANDLERS)if(_[m])return g?Nc.CONTAINER_HANDLERS[m].canCombineWithGraph()?{containers:_,depth:h,fallback:!1}:l:d?l:{containers:_,depth:h,fallback:!1};return l}else{if(d)return l;d=!0}}return l}static async isBufferableContainerHandler(o,c,u){const l=await Nc.getContainerHandler(o,c,u);return!l.fallback&&!("@graph"in l.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,c,u,l,d){return!!await this.test(o,c,null,u,l)}async test(o,c,u,l,d){const f=i.Util.getContextValueContainer(await o.getContext(l,2),l[d-1]);for(const h in Nc.CONTAINER_HANDLERS)if(f[h])return{containers:f,handler:Nc.CONTAINER_HANDLERS[h]};return null}async handle(o,c,u,l,d,f,h){return h.handler.handle(h.containers,o,c,l,d,f)}};return nS.EntryHandlerContainer=a,a.CONTAINER_HANDLERS={"@id":new t.ContainerHandlerIdentifier,"@index":new e.ContainerHandlerIndex,"@language":new r.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},nS}var j9,vbe;function qgt(){return vbe||(vbe=1,j9=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((r,n,i)=>{const a=i===0?"":",",s=n===void 0||typeof n=="symbol"?null:n;return r+a+t(s)},"")+"]":"{"+Object.keys(e).sort().reduce((r,n,i)=>{if(e[n]===void 0||typeof e[n]=="symbol")return r;const a=r.length===0?"":",";return r+a+t(n)+":"+t(e[n])},"")+"}"}),j9}var Abe;function Lf(){if(Abe)return rS;Abe=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.Util=void 0;const t=ba(),e=jr(),r=d3e(),n=qgt();class i{constructor(s){this.parsingContext=s.parsingContext,this.dataFactory=s.dataFactory||new e.DataFactory,this.rdfFirst=this.dataFactory.namedNode(i.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(i.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(i.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(i.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(i.RDF+"JSON")}static getContextValue(s,o,c,u){const l=s.getContextRaw()[c];if(!l)return u;const d=l[o];return d===void 0?u:d}static getContextValueContainer(s,o){return i.getContextValue(s,"@container",o,{"@set":!0})}static getContextValueType(s,o){const c=i.getContextValue(s,"@type",o,null);return c==="@none"?null:c}static getContextValueLanguage(s,o){return i.getContextValue(s,"@language",o,s.getContextRaw()["@language"]||null)}static getContextValueDirection(s,o){return i.getContextValue(s,"@direction",o,s.getContextRaw()["@direction"]||null)}static isContextValueReverse(s,o){return!!i.getContextValue(s,"@reverse",o,null)}static getContextValueIndex(s,o){return i.getContextValue(s,"@index",o,s.getContextRaw()["@index"]||null)}static isPropertyReverse(s,o,c){return c==="@reverse"!==i.isContextValueReverse(s,o)}static isPropertyInEmbeddedNode(s){return s==="@id"}static isPropertyInAnnotationObject(s){return s==="@annotation"}static isValidIri(s){return s!==null&&t.Util.isValidIri(s)}static isPrefixArray(s,o){if(s.length>o.length)return!1;for(let c=0;c<s.length;c++)if(s[c]!==o[c])return!1;return!0}async validateValueIndexes(s){if(this.parsingContext.validateValueIndexes){const o={};for(const c of s)if(c&&typeof c=="object"){const u=c["@id"],l=c["@index"];if(u&&l){const d=o[u];if(d&&d!==l)throw new t.ErrorCoded(`Conflicting @index value for ${u}`,t.ERROR_CODES.CONFLICTING_INDEXES);o[u]=l}}}}async valueToTerm(s,o,c,u,l){if(i.getContextValueType(s,o)==="@json")return[this.dataFactory.literal(this.valueToJsonString(c),this.rdfJson)];const d=typeof c;switch(d){case"object":if(c==null)return[];if(Array.isArray(c))return"@list"in i.getContextValueContainer(s,o)?c.length===0?[this.rdfNil]:this.parsingContext.idStack[u+1]||[]:(await this.validateValueIndexes(c),[]);if(s=await this.getContextSelfOrPropertyScoped(s,o),"@context"in c&&(s=await this.parsingContext.parseContext(c["@context"],(await this.parsingContext.getContext(l,0)).getContextRaw())),c=await this.unaliasKeywords(c,l,u,s),"@value"in c){let f,h,p,_,g;for(o in c){const m=c[o];switch(o){case"@value":f=m;break;case"@language":h=m;break;case"@direction":p=m;break;case"@type":_=m;break;case"@index":g=m;break;case"@annotation":break;default:if(o.startsWith("@"))throw new t.ErrorCoded(`Unknown value entry '${o}' in @value: ${JSON.stringify(c)}`,t.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(_,l,u,!0,s)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];if(f===null)return[];if(typeof f=="object")throw new t.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&g&&typeof g!="string")throw new t.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(g)}'`,t.ERROR_CODES.INVALID_INDEX_VALUE);if(h){if(typeof f!="string")throw new t.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!t.ContextParser.validateLanguage(h,this.parsingContext.strictValues,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(h=h.toLowerCase())}if(p){if(typeof f!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`);if(!t.ContextParser.validateDirection(p,this.parsingContext.strictValues))return[]}if(h&&p){if(_)throw new t.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(u,f,h,p))}else if(h){if(_)throw new t.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(f,h)]}else if(p){if(_)throw new t.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(u,f,h,p))}else if(_){if(typeof _!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(_)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);const m=this.createVocabOrBaseTerm(s,_);if(!m)throw new t.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(_)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);if(m.termType!=="NamedNode")throw new t.ErrorCoded(`Illegal value type (${m.termType}): ${_}`,t.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(f,m)]}return await this.valueToTerm(new t.JsonLdContextNormalized({}),o,f,u,l)}else if("@set"in c){if(Object.keys(c).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${o}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in c){if(Object.keys(c).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const f=c["@list"];return Array.isArray(f)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[u+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(l),o,f,u-1,l.slice(0,-1))}else{if("@reverse"in c&&typeof c["@reverse"]=="boolean")return[];if("@graph"in i.getContextValueContainer(await this.parsingContext.getContext(l),o)){const f=this.parsingContext.graphContainerTermStack[u+1];return f?Object.values(f):[this.dataFactory.blankNode()]}else if("@id"in c){if(Object.keys(c).length>1&&(s=await this.parsingContext.getContext(l,0)),"@context"in c&&(s=await this.parsingContext.parseContext(c["@context"],s.getContextRaw())),c["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(s,c["@id"]));{const f=c["@id"];let h;if(typeof f=="object")if(this.parsingContext.rdfstar)h=this.parsingContext.idStack[u+1][0];else throw new t.ErrorCoded(`Found illegal @id '${c}'`,t.ERROR_CODES.INVALID_ID_VALUE);else h=this.resourceToTerm(s,f);return this.nullableTermToArray(h)}}else return this.parsingContext.emittedStack[u+1]||c&&typeof c=="object"&&Object.keys(c).length===0?this.parsingContext.idStack[u+1]||(this.parsingContext.idStack[u+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(u,await this.getContextSelfOrPropertyScoped(s,o),o,c,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(u,await this.getContextSelfOrPropertyScoped(s,o),o,(!!c).toString(),this.dataFactory.namedNode(i.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(u,await this.getContextSelfOrPropertyScoped(s,o),o,c,this.dataFactory.namedNode(c%1===0&&c<1e21?i.XSD_INTEGER:i.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${d}`)),[]}}async getContextSelfOrPropertyScoped(s,o){const c=s.getContextRaw()[o];return c&&typeof c=="object"&&"@context"in c&&(s=await this.parsingContext.parseContext(c,s.getContextRaw(),!0,!0)),s}nullableTermToArray(s){return s?[s]:[]}predicateToTerm(s,o){const c=s.expandTerm(o,!0,this.parsingContext.getExpandOptions());if(!c)return null;if(c[0]==="_"&&c[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(c.substr(2)):null;if(i.isValidIri(c))return this.dataFactory.namedNode(c);if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new t.ErrorCoded(`Invalid predicate IRI: ${c}`,t.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(s,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const c=s.expandTerm(o,!1,this.parsingContext.getExpandOptions());if(!i.isValidIri(c))if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}createVocabOrBaseTerm(s,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const c=this.parsingContext.getExpandOptions();let u=s.expandTerm(o,!0,c);if(u===o&&(u=s.expandTerm(o,!1,c)),!i.isValidIri(u))if(u&&this.parsingContext.strictValues&&!u.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${u}`));else return null;return this.dataFactory.namedNode(u)}intToString(s,o){return typeof s=="number"?Number.isFinite(s)?s%1===0&&(!o||o.value!==i.XSD_DOUBLE)?Number(s).toString():s.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):s>0?"INF":"-INF":s}stringValueToTerm(s,o,c,u,l){const d=i.getContextValueType(o,c);if(d)if(d==="@id"){if(!l)return this.resourceToTerm(o,this.intToString(u,l))}else if(d==="@vocab"){if(!l)return this.createVocabOrBaseTerm(o,this.intToString(u,l))}else l=this.dataFactory.namedNode(d);if(!l){const f=i.getContextValueLanguage(o,c),h=i.getContextValueDirection(o,c);return h&&this.parsingContext.rdfDirection!=="disabled"?this.createLanguageDirectionLiteral(s,this.intToString(u,l),f,h):this.dataFactory.literal(this.intToString(u,l),f)}return this.dataFactory.literal(this.intToString(u,l),l)}createLanguageDirectionLiteral(s,o,c,u){if(this.parsingContext.rdfDirection==="i18n-datatype")return c||(c=""),this.dataFactory.literal(o,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${c}_${u}`));if(this.parsingContext.rdfDirection==="compound-literal"){const l=this.dataFactory.blankNode(),d=this.getDefaultGraph();return this.parsingContext.emitQuad(s,this.dataFactory.quad(l,this.dataFactory.namedNode(i.RDF+"value"),this.dataFactory.literal(o),d)),c&&this.parsingContext.emitQuad(s,this.dataFactory.quad(l,this.dataFactory.namedNode(i.RDF+"language"),this.dataFactory.literal(c),d)),this.parsingContext.emitQuad(s,this.dataFactory.quad(l,this.dataFactory.namedNode(i.RDF+"direction"),this.dataFactory.literal(u),d)),l}else return this.dataFactory.literal(o,{language:c||"",direction:u})}valueToJsonString(s){return n(s)}async unaliasKeyword(s,o,c,u,l){if(Number.isInteger(s))return s;if(!u){const d=this.parsingContext.unaliasedKeywordCacheStack[c];if(d)return d}if(!t.Util.isPotentialKeyword(s)){l=l||await this.parsingContext.getContext(o);let d=l.getContextRaw()[s];d&&typeof d=="object"&&(d=d["@id"]),t.Util.isValidKeyword(d)&&(s=d)}return u?s:this.parsingContext.unaliasedKeywordCacheStack[c]=s}async unaliasKeywordParent(s,o){return await this.unaliasKeyword(o>0&&s[o-1],s,o-1)}async unaliasKeywords(s,o,c,u){const l={};for(const d in s)l[await this.unaliasKeyword(d,o,c+1,!0,u)]=s[d];return l}async isLiteral(s,o){for(let c=o;c>=0;c--){if(await this.unaliasKeyword(s[c],s,c)==="@annotation")return!1;if(this.parsingContext.literalStack[c]||this.parsingContext.jsonLiteralStack[c])return!0}return!1}async getDepthOffsetGraph(s,o){for(let c=s-1;c>0;c--)if(await this.unaliasKeyword(o[c],o,c)==="@graph"){const u=(await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,o,c)).containers;return r.EntryHandlerContainer.isComplexGraphContainer(u)?-1:s-c-1}return-1}validateReverseSubject(s){if(s.termType==="Literal")throw new t.ErrorCoded(`Found illegal literal in subject position: ${s.value}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(s,o){let c=this.getDefaultGraph();const{containers:u,depth:l}=await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,s,o);if("@graph"in u){const d=r.EntryHandlerContainer.getContainerGraphIndex(u,l,s),f=this.parsingContext.graphContainerTermStack[l];if(c=f?f[d]:null,!c){let h=null;if("@id"in u){const p=await this.getContainerKey(s[l],s,l);p!==null&&(h=await this.resourceToTerm(await this.parsingContext.getContext(s),p))}h||(h=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[l]||(this.parsingContext.graphContainerTermStack[l]={}),c=this.parsingContext.graphContainerTermStack[l][d]=h}}return c}async getPropertiesDepth(s,o){let c=o;for(let u=o-1;u>0;u--)if(typeof s[u]!="number"){const l=await this.unaliasKeyword(s[u],s,u);if(l==="@reverse")return u;if(l==="@nest")c=u;else return c}return c}async getContainerKey(s,o,c){const u=await this.unaliasKeyword(s,o,c);return u==="@none"?null:u}validateReverseInEmbeddedNode(s,o,c){if(c&&o&&!this.parsingContext.rdfstarReverseInEmbedded)throw new t.ErrorCoded(`Illegal reverse property in embedded node in ${s}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(s,o,c,u,l,d,f){let h;if(d?(this.validateReverseSubject(u),h=this.dataFactory.quad(u,c,o,l)):h=this.dataFactory.quad(o,c,u,l),f){if(h.graph.termType!=="DefaultGraph"&&(h=this.dataFactory.quad(h.subject,h.predicate,h.object)),this.parsingContext.idStack[s-1])throw new t.ErrorCoded("Illegal multiple properties in an embedded node",t.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[s-1]=[h]}else this.parsingContext.emitQuad(s,h);const p=this.parsingContext.annotationsBuffer[s];if(p){for(const _ of p)this.emitAnnotation(s,h,_);delete this.parsingContext.annotationsBuffer[s]}}emitAnnotation(s,o,c){let u;c.reverse?(this.validateReverseSubject(c.object),u=this.dataFactory.quad(c.object,c.predicate,o)):u=this.dataFactory.quad(o,c.predicate,c.object),this.parsingContext.emitQuad(s,u);for(const l of c.nestedAnnotations)this.emitAnnotation(s,u,l)}}return rS.Util=i,i.XSD="http://www.w3.org/2001/XMLSchema#",i.XSD_BOOLEAN=i.XSD+"boolean",i.XSD_INTEGER=i.XSD+"integer",i.XSD_DOUBLE=i.XSD+"double",i.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",rS}var Tbe;function Ugt(){if(Tbe)return tS;Tbe=1,Object.defineProperty(tS,"__esModule",{value:!0}),tS.EntryHandlerArrayValue=void 0;const t=Lf(),e=ba();let r=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(i,a,s,o,c){return this.test(i,a,null,s,o)}async test(i,a,s,o,c){return typeof o[c]=="number"}async handle(i,a,s,o,c,u){let l=await a.unaliasKeywordParent(o,u);if(l==="@list"){let d=null,f=0;for(let h=u-2;h>0;h--){const p=o[h];if(typeof p=="string"||typeof p=="number"){f=h,d=p;break}}if(d!==null){const h=await a.valueToTerm(await i.getContext(o),d,c,u,o);for(const p of h)await this.handleListElement(i,a,p,c,u,o.slice(0,f),f);h.length===0&&await this.handleListElement(i,a,null,c,u,o.slice(0,f),f)}}else if(l==="@set")await i.newOnValueJob(o.slice(0,-2),c,u-2,!1);else if(l!==void 0&&l!=="@type"){for(let f=u-1;f>0;f--)if(typeof o[f]!="number"){l=await a.unaliasKeyword(o[f],o,f);break}const d=await i.getContext(o.slice(0,-1));if("@list"in t.Util.getContextValueContainer(d,l)){i.emittedStack[u+1]=!0;const f=await a.valueToTerm(await i.getContext(o),l,c,u,o);for(const h of f)await this.handleListElement(i,a,h,c,u,o.slice(0,-1),u-1);f.length===0&&await this.handleListElement(i,a,null,c,u,o.slice(0,-1),u-1)}else i.shiftStack(u,1),await i.newOnValueJob(o.slice(0,-1),c,u-1,!1),i.contextTree.removeContext(o.slice(0,-1))}}async handleListElement(i,a,s,o,c,u,l){let d=i.listPointerStack[c];if(o!==null&&(await a.unaliasKeywords(o,u,c))["@value"]!==null){if(!d||!d.value){const f=a.dataFactory.blankNode();d={value:f,listRootDepth:l,listId:f}}else{const f=a.dataFactory.blankNode();i.emitQuad(c,a.dataFactory.quad(d.value,a.rdfRest,f,a.getDefaultGraph())),d.value=f}s&&i.emitQuad(c,a.dataFactory.quad(d.value,a.rdfFirst,s,a.getDefaultGraph()))}else d||(d={listRootDepth:l,listId:a.rdfNil});i.listPointerStack[c]=d,i.rdfstar&&i.annotationsBuffer[c]&&i.emitError(new e.ErrorCoded("Found an illegal annotation inside a list",e.ERROR_CODES.INVALID_ANNOTATION))}};return tS.EntryHandlerArrayValue=r,tS}var cS={},wbe;function Vgt(){if(wbe)return cS;wbe=1,Object.defineProperty(cS,"__esModule",{value:!0}),cS.EntryHandlerInvalidFallback=void 0;let t=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,n,i,a,s){return!1}async test(r,n,i,a,s){return!0}async handle(r,n,i,a,s,o){r.emittedStack[o]=!1}};return cS.EntryHandlerInvalidFallback=t,cS}var lS={},dS={},Sbe;function Hl(){if(Sbe)return dS;Sbe=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.EntryHandlerKeyword=void 0;let t=class{constructor(r){this.keyword=r}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,n,i,a,s){return!1}async test(r,n,i,a,s){return i===this.keyword}};return dS.EntryHandlerKeyword=t,dS}var xbe;function Ggt(){if(xbe)return lS;xbe=1,Object.defineProperty(lS,"__esModule",{value:!0}),lS.EntryHandlerKeywordContext=void 0;const t=ba(),e=Hl();let r=class extends e.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(i,a,s,o,c,u){i.streamingProfile&&(i.processingStack[u]||i.processingType[u]||i.idStack[u]!==void 0)&&i.emitError(new t.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",t.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const l=i.getContext(o),d=i.parseContext(c,(await l).getContextRaw());i.contextTree.setContext(o.slice(0,-1),d),i.emitContext(c),await i.validateContext(await d)}};return lS.EntryHandlerKeywordContext=r,lS}var fS={},Ebe;function Hgt(){if(Ebe)return fS;Ebe=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.EntryHandlerKeywordGraph=void 0;const t=Hl();let e=class extends t.EntryHandlerKeyword{constructor(){super("@graph")}async handle(n,i,a,s,o,c){n.graphStack[c+1]=!0}};return fS.EntryHandlerKeywordGraph=e,fS}var hS={},Ibe;function kgt(){if(Ibe)return hS;Ibe=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.EntryHandlerKeywordId=void 0;const t=ba(),e=Hl();let r=class extends e.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(i,a,s,o,c,u){if(typeof c!="string"){if(i.rdfstar&&typeof c=="object"){const d=Object.keys(c);d.length===1&&d[0]==="@id"&&i.emitError(new t.ErrorCoded(`Invalid embedded node without property with @id ${c["@id"]}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE))}else i.emitError(new t.ErrorCoded(`Found illegal @id '${c}'`,t.ERROR_CODES.INVALID_ID_VALUE));return}const l=await a.getPropertiesDepth(o,u);if(i.idStack[l]!==void 0&&(i.idStack[l][0].listHead?i.emitError(new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o[u-1]}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):i.emitError(new t.ErrorCoded(`Found duplicate @ids '${i.idStack[l][0].value}' and '${c}'`,t.ERROR_CODES.COLLIDING_KEYWORDS))),i.rdfstar&&i.annotationsBuffer[u])for(const d of i.annotationsBuffer[u])d.depth===u&&i.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${c}`,t.ERROR_CODES.INVALID_ANNOTATION));i.idStack[l]=a.nullableTermToArray(await a.resourceToTerm(await i.getContext(o),c))}};return hS.EntryHandlerKeywordId=r,hS}var pS={},Obe;function zgt(){if(Obe)return pS;Obe=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.EntryHandlerKeywordIncluded=void 0;const t=ba(),e=Hl();let r=class extends e.EntryHandlerKeyword{constructor(){super("@included")}async handle(i,a,s,o,c,u){typeof c!="object"&&i.emitError(new t.ErrorCoded(`Found illegal @included '${c}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE));const l=await a.unaliasKeywords(c,o,u,await i.getContext(o));"@value"in l&&i.emitError(new t.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in l&&i.emitError(new t.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(c)}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE)),i.emittedStack[u]=!1}};return pS.EntryHandlerKeywordIncluded=r,pS}var _S={},Rbe;function Qgt(){if(Rbe)return _S;Rbe=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.EntryHandlerKeywordNest=void 0;const t=ba(),e=Hl();let r=class extends e.EntryHandlerKeyword{constructor(){super("@nest")}async handle(i,a,s,o,c,u){typeof c!="object"&&i.emitError(new t.ErrorCoded(`Found invalid @nest entry for '${s}': '${c}'`,t.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await a.unaliasKeywords(c,o,u,await i.getContext(o))&&i.emitError(new t.ErrorCoded(`Found an invalid @value node for '${s}'`,t.ERROR_CODES.INVALID_NEST_VALUE)),i.emittedStack[u]=!1}};return _S.EntryHandlerKeywordNest=r,_S}var mS={},Pbe;function Wgt(){if(Pbe)return mS;Pbe=1,Object.defineProperty(mS,"__esModule",{value:!0}),mS.EntryHandlerKeywordType=void 0;const t=ba(),e=Lf(),r=mM(),n=Hl();let i=class extends n.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(s,o,c,u,l,d){const f=u[d],h=await s.getContext(u),p=o.rdfType,_=await o.unaliasKeywordParent(u,d),g=e.Util.isPropertyReverse(h,f,_),m=e.Util.isPropertyInEmbeddedNode(_);o.validateReverseInEmbeddedNode(c,g,m);const y=e.Util.isPropertyInAnnotationObject(_),v=Array.isArray(l)?l:[l];for(const S of v){typeof S!="string"&&s.emitError(new t.ErrorCoded(`Found illegal @type '${S}'`,t.ERROR_CODES.INVALID_TYPE_VALUE));const P=o.createVocabOrBaseTerm(h,S);P&&await r.EntryHandlerPredicate.handlePredicateObject(s,o,u,d,p,P,g,m,y)}let A=Promise.resolve(h),T=!1;for(const S of v.sort()){const P=e.Util.getContextValue(h,"@context",S,null);P&&(T=!0,A=A.then(j=>s.parseContext(P,j.getContextRaw())))}s.streamingProfile&&(T||!s.streamingProfileAllowOutOfOrderPlainType)&&(s.processingStack[d]||s.idStack[d])&&s.emitError(new t.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",t.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),T&&(A=A.then(S=>S.getContextRaw()["@propagate"]!==!0?new t.JsonLdContextNormalized(Object.assign(Object.assign({},S.getContextRaw()),{"@propagate":!1,"@__propagateFallback":h.getContextRaw()})):S),s.contextTree.setContext(u.slice(0,u.length-1),A)),s.processingType[d]=!0}};return mS.EntryHandlerKeywordType=i,mS}var gS={},Nbe;function Kgt(){if(Nbe)return gS;Nbe=1,Object.defineProperty(gS,"__esModule",{value:!0}),gS.EntryHandlerKeywordUnknownFallback=void 0;const t=ba();let e=class f3e{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(n,i,a,s,o){const c=await i.unaliasKeyword(a[s],a,s);return t.Util.isPotentialKeyword(c)?!(!o&&c==="@list"):!1}async test(n,i,a,s,o){return t.Util.isPotentialKeyword(a)}async handle(n,i,a,s,o,c){const u=f3e.VALID_KEYWORDS_TYPES[a];u!==void 0?u&&typeof o!==u.type&&n.emitError(new t.ErrorCoded(`Invalid value type for '${a}' with value '${o}'`,u.errorCode)):n.strictValues&&n.emitError(new Error(`Unknown keyword '${a}' with value '${o}'`)),n.emittedStack[c]=!1}};return gS.EntryHandlerKeywordUnknownFallback=e,e.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:t.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:t.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},gS}var yS={},Fbe;function Xgt(){if(Fbe)return yS;Fbe=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.EntryHandlerKeywordValue=void 0;const t=Hl();let e=class extends t.EntryHandlerKeyword{constructor(){super("@value")}async validate(n,i,a,s,o){const c=a[s];return c&&!n.literalStack[s]&&await this.test(n,i,c,a,s)&&(n.literalStack[s]=!0),super.validate(n,i,a,s,o)}async test(n,i,a,s,o){return await i.unaliasKeyword(s[o],s.slice(0,s.length-1),o-1,!0)==="@value"}async handle(n,i,a,s,o,c){n.literalStack[c]=!0,delete n.unidentifiedValuesBuffer[c],delete n.unidentifiedGraphsBuffer[c],n.emittedStack[c]=!1}};return yS.EntryHandlerKeywordValue=e,yS}var bS={},vS={},Mbe;function Jgt(){if(Mbe)return vS;Mbe=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.ContextTree=void 0;let t=class h3e{constructor(){this.subTrees={}}getContext(r){if(r.length>0){const[n,...i]=r,a=this.subTrees[n];if(a){const s=a.getContext(i);if(s)return s.then(({context:o,depth:c})=>({context:o,depth:c+1}))}}return this.context?this.context.then(n=>({context:n,depth:0})):null}setContext(r,n){if(r.length===0)this.context=n;else{const[i,...a]=r;let s=this.subTrees[i];s||(s=this.subTrees[i]=new h3e),s.setContext(a,n)}}removeContext(r){this.setContext(r,null)}};return vS.ContextTree=t,vS}var Dbe;function Ygt(){if(Dbe)return bS;Dbe=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.ParsingContext=void 0;const t=ba(),e=CO(),r=Jgt(),n=_3e();let i=class p3e{constructor(s){this.contextParser=new t.ContextParser({documentLoader:s.documentLoader,skipValidation:s.skipContextValidation}),this.streamingProfile=!!s.streamingProfile,this.baseIRI=s.baseIRI,this.produceGeneralizedRdf=!!s.produceGeneralizedRdf,this.allowSubjectList=!!s.allowSubjectList,this.processingMode=s.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!s.strictValues,this.validateValueIndexes=!!s.validateValueIndexes,this.defaultGraph=s.defaultGraph,this.rdfDirection=s.rdfDirection,this.normalizeLanguageTags=s.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=s.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=s.rdfstar!==!1,this.rdfstarReverseInEmbedded=s.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new r.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=s.parser,s.context?(this.rootContext=this.parseContext(s.context,void 0,void 0,!0),this.rootContext.then(o=>this.validateContext(o))):this.rootContext=Promise.resolve(new t.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(s,o,c,u){return this.contextParser.parse(s,{baseIRI:this.baseIRI,ignoreProtection:c,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:o,processingMode:this.activeProcessingMode,disallowDirectlyNestedContext:!u})}validateContext(s){const o=s.getContextRaw()["@version"];if(o){if(this.activeProcessingMode&&o>this.activeProcessingMode)throw new e.ErrorCoded(`Unsupported JSON-LD version '${o}' under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&o<this.activeProcessingMode)throw new e.ErrorCoded(`Invalid JSON-LD version ${o} under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=o}}async getContext(s,o=1){const c=s;for(;typeof s[s.length-1]=="number";)s=s.slice(0,s.length-1);o&&(s=s.slice(0,-o));const u=await this.getContextPropagationAware(s);let d=u.context.getContextRaw();for(let f=u.depth;f<c.length-o;f++){const h=c[f],p=d[h];if(p&&typeof p=="object"&&"@context"in p){const _=(await this.parseContext(p,d,!0,!0)).getContextRaw(),g=!(h in _)||_[h]["@context"]["@propagate"];(g!==!1||f===c.length-1-o)&&(d=Object.assign({},_),delete d["@propagate"],d[h]=Object.assign({},d[h]),"@id"in p&&(d[h]["@id"]=p["@id"]),delete d[h]["@context"],g!==!1&&this.contextTree.setContext(c.slice(0,f+o),Promise.resolve(new t.JsonLdContextNormalized(d))))}}return new t.JsonLdContextNormalized(d)}async getContextPropagationAware(s){const o=s.length;let c=null,u;do{u=!1,c&&"@__propagateFallback"in c.context.getContextRaw()?c.context=new t.JsonLdContextNormalized(c.context.getContextRaw()["@__propagateFallback"]):(c&&(s=s.slice(0,c.depth-1)),c=await this.contextTree.getContext(s)||{context:await this.rootContext,depth:0});const l=s[s.length-1];if(l in c.context.getContextRaw()){const d=c.context.getContextRaw()[l];d&&typeof d=="object"&&"@context"in d&&(u=!0)}}while(c.depth>0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==o&&!u);return c.depth===0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==o&&(c.context=new t.JsonLdContextNormalized({})),c}async newOnValueJob(s,o,c,u){await this.parser.newOnValueJob(s,o,c,u)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const s of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(s.depth,s.keys),this.parser.flushStacks(s.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(s,o){s===1&&(this.topLevelProperties=!0),this.parser.push(o)}emitError(s){this.parser.emit("error",s)}emitContext(s){this.parser.emit("context",s)}getUnidentifiedValueBufferSafe(s){let o=this.unidentifiedValuesBuffer[s];return o||(o=[],this.unidentifiedValuesBuffer[s]=o),o}getUnidentifiedGraphBufferSafe(s){let o=this.unidentifiedGraphsBuffer[s];return o||(o=[],this.unidentifiedGraphsBuffer[s]=o),o}getAnnotationsBufferSafe(s){let o=this.annotationsBuffer[s];return o||(o=[],this.annotationsBuffer[s]=o),o}getExpandOptions(){return p3e.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(s,o){const c=this.idStack[s+o];if(c&&(this.idStack[s]=c,this.emittedStack[s]=!0,delete this.idStack[s+o]),this.pendingContainerFlushBuffers.length)for(const u of this.pendingContainerFlushBuffers)u.depth>=s+o&&(u.depth-=o,u.keys.splice(s,o));this.unidentifiedValuesBuffer[s+o]&&(this.unidentifiedValuesBuffer[s]=this.unidentifiedValuesBuffer[s+o],delete this.unidentifiedValuesBuffer[s+o]),this.annotationsBuffer[s+o-1]&&(this.annotationsBuffer[s-1]||(this.annotationsBuffer[s-1]=[]),this.annotationsBuffer[s-1]=[...this.annotationsBuffer[s-1],...this.annotationsBuffer[s+o-1]],delete this.annotationsBuffer[s+o-1])}};return bS.ParsingContext=i,i.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},bS}var AS={},Cbe;function $gt(){if(Cbe)return AS;Cbe=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.EntryHandlerKeywordAnnotation=void 0;const t=Hl(),e=ba();let r=class extends t.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(i,a,s,o,c,u){(typeof c=="string"||typeof c=="object"&&c["@value"])&&i.emitError(new e.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(c)}`,e.ERROR_CODES.INVALID_ANNOTATION))}};return AS.EntryHandlerKeywordAnnotation=r,AS}var Lbe;function _3e(){if(Lbe)return Yw;Lbe=1,Object.defineProperty(Yw,"__esModule",{value:!0}),Yw.JsonLdParser=void 0;const t=kz(),e=ba(),r=Wt,n=Ugt(),i=d3e(),a=Vgt(),s=mM(),o=Ggt(),c=Hgt(),u=kgt(),l=zgt(),d=Qgt(),f=Wgt(),h=Kgt(),p=Xgt(),_=Ygt(),g=Lf(),m=AO(),y=$gt();let v=class Vh extends r.Transform{constructor(T){super({readableObjectMode:!0}),T=T||{},this.options=T,this.parsingContext=new _.ParsingContext(Object.assign({parser:this},T)),this.util=new g.Util({dataFactory:T.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new t,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(T,S,P,j){let F,N=["application/activity+json"];if(j&&j.wellKnownMediaTypes&&(N=j.wellKnownMediaTypes),S!=="application/ld+json"&&!N.includes(S)){if(S!=="application/json"&&!S.endsWith("+json"))throw new e.ErrorCoded(`Unsupported JSON-LD media type ${S}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(P&&P.has("Link")&&P.forEach((C,M)=>{if(M==="link"){const U=(0,m.parse)(C);for(const B of U.get("rel","http://www.w3.org/ns/json-ld#context")){if(F)throw new e.ErrorCoded("Multiple JSON-LD context link headers were found on "+T,e.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);F=B.uri}}}),!F&&!(j!=null&&j.ignoreMissingContextLinkHeader))throw new e.ErrorCoded(`Missing context link header for media type ${S} on ${T}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let R;if(P&&P.has("Content-Type")){const C=P.get("Content-Type"),M=/; *profile=([^"]*)/.exec(C);M&&M[1]==="http://www.w3.org/ns/json-ld#streaming"&&(R=!0)}return new Vh(Object.assign({baseIRI:T,context:F,streamingProfile:R},j||{}))}import(T){if("pipe"in T){T.on("error",P=>S.emit("error",P));const S=T.pipe(new Vh(this.options));return S}else{const S=new r.PassThrough({readableObjectMode:!0});T.on("error",j=>P.emit("error",j)),T.on("data",j=>S.push(j)),T.on("end",()=>S.push(null));const P=S.pipe(new Vh(this.options));return P}}_transform(T,S,P){this.jsonParser.write(T),this.lastOnValueJob.then(()=>P(),j=>P(j))}async newOnValueJob(T,S,P,j){let F=!0;if(j&&P<this.lastDepth){const U=this.parsingContext.listPointerStack[this.lastDepth];U&&(U.value&&this.push(this.util.dataFactory.quad(U.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),U.listId.listHead=!0,this.parsingContext.idStack[U.listRootDepth+1]=[U.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await i.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),F=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const N=await this.util.unaliasKeyword(T[P],T,P),R=await this.util.unaliasKeywordParent(T,P);this.parsingContext.emittedStack[P]=!0;let C=!0;e.Util.isValidKeyword(N)&&R==="@reverse"&&N!=="@context"&&this.emit("error",new e.ErrorCoded(`Found the @id '${S}' inside an @reverse property`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let M=!1;this.parsingContext.validationStack.length>1&&(M=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let U=Math.max(1,this.parsingContext.validationStack.length-1);U<T.length-1;U++){const B=this.parsingContext.validationStack[U]||(this.parsingContext.validationStack[U]=await this.validateKey(T.slice(0,U+1),U,M));if(B.valid)!M&&B.property&&(M=!0);else{this.parsingContext.emittedStack[P]=!1,C=!1;break}}if(await this.util.isLiteral(T,P)&&(C=!1),C)for(const U of Vh.ENTRY_HANDLERS){const B=await U.test(this.parsingContext,this.util,N,T,P);if(B){await U.handle(this.parsingContext,this.util,N,T,S,P,B),U.isStackProcessor()&&(this.parsingContext.processingStack[P]=!0);break}}P===0&&Array.isArray(S)&&await this.util.validateValueIndexes(S),F&&P<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=P,this.lastKeys=T,this.parsingContext.unaliasedKeywordCacheStack.splice(P-1)}flushStacks(T){this.parsingContext.processingStack.splice(T,1),this.parsingContext.processingType.splice(T,1),this.parsingContext.emittedStack.splice(T,1),this.parsingContext.idStack.splice(T,1),this.parsingContext.graphStack.splice(T+1,1),this.parsingContext.graphContainerTermStack.splice(T,1),this.parsingContext.jsonLiteralStack.splice(T,1),this.parsingContext.validationStack.splice(T-1,2),this.parsingContext.literalStack.splice(T,this.parsingContext.literalStack.length-T),this.parsingContext.annotationsBuffer.splice(T,1)}async flushBuffer(T,S){let P=this.parsingContext.idStack[T];!!P||(P=this.parsingContext.idStack[T]=[this.util.dataFactory.blankNode()]);const F=this.parsingContext.unidentifiedValuesBuffer[T];if(F){for(const C of P){const M=await this.util.getDepthOffsetGraph(T,S),U=this.parsingContext.graphStack[T]||M>=0?this.parsingContext.idStack[T-M-1]:[await this.util.getGraphContainerValue(S,T)];if(U)for(const B of U){this.parsingContext.emittedStack[T]=!0;for(const G of F)this.util.emitQuadChecked(T,C,G.predicate,G.object,B,G.reverse,G.isEmbedded)}else{const B=this.parsingContext.getUnidentifiedGraphBufferSafe(T-await this.util.getDepthOffsetGraph(T,S)-1);for(const G of F)G.reverse?B.push({object:C,predicate:G.predicate,subject:G.object,isEmbedded:G.isEmbedded}):B.push({object:G.object,predicate:G.predicate,subject:C,isEmbedded:G.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(T,1),this.parsingContext.literalStack.splice(T,1),this.parsingContext.jsonLiteralStack.splice(T,1)}const N=this.parsingContext.unidentifiedGraphsBuffer[T];if(N){for(const C of P){const M=T===1&&C.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():C;this.parsingContext.emittedStack[T]=!0;for(const U of N)this.parsingContext.emitQuad(T,this.util.dataFactory.quad(U.subject,U.predicate,U.object,M))}this.parsingContext.unidentifiedGraphsBuffer.splice(T,1)}const R=this.parsingContext.annotationsBuffer[T];if(R){R.length>0&&T===1&&this.parsingContext.emitError(new e.ErrorCoded("Annotations can not be made on top-level nodes",e.ERROR_CODES.INVALID_ANNOTATION));const C=this.parsingContext.getAnnotationsBufferSafe(T-1);for(const M of R)C.push(M);delete this.parsingContext.annotationsBuffer[T]}}async validateKey(T,S,P){for(const j of Vh.ENTRY_HANDLERS)if(await j.validate(this.parsingContext,this.util,T,S,P))return{valid:!0,property:P||j.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=T=>{const S=this.jsonParser.stack.length,P=new Array(S+1).fill(0).map((j,F)=>F===S?this.jsonParser.key:this.jsonParser.stack[F].key);if(!this.isParsingContextInner(S)){const j=()=>this.newOnValueJob(P,T,S,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(P.slice(0,-1)))if(P[S]==="@context"){let F=this.contextJobs[S];F||(F=this.contextJobs[S]=[]),F.push(j)}else this.contextAwaitingJobs.push({job:j,keys:P,depth:S});else this.lastOnValueJob=this.lastOnValueJob.then(j);!this.parsingContext.streamingProfile&&S===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=T=>{this.emit("error",T)}}isParsingContextInner(T){for(let S=T;S>0;S--)if(this.jsonParser.stack[S-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const S of this.contextJobs)if(S)for(const P of S)await P();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const T=[];for(const S of this.contextAwaitingJobs)await this.util.unaliasKeyword(S.keys[S.depth],S.keys,S.depth,!0)==="@type"||typeof S.keys[S.depth]=="number"&&await this.util.unaliasKeyword(S.keys[S.depth-1],S.keys,S.depth-1,!0)==="@type"?this.typeJobs.push({job:S.job,keys:S.keys.slice(0,S.keys.length-1)}):T.push(S);for(const S of T){if(this.typeJobs.length>0){const P=[],j=[];for(let R=0;R<this.typeJobs.length;R++){const C=this.typeJobs[R];g.Util.isPrefixArray(C.keys,S.keys)&&(P.push(C),j.push(R))}const F=P.sort((R,C)=>R.keys.length-C.keys.length);for(const R of F)await R.job();const N=j.sort().reverse();for(const R of N)this.typeJobs.splice(R,1)}await S.job()}}};return Yw.JsonLdParser=v,v.DEFAULT_PROCESSING_MODE="1.1",v.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new o.EntryHandlerKeywordContext,new u.EntryHandlerKeywordId,new l.EntryHandlerKeywordIncluded,new c.EntryHandlerKeywordGraph,new d.EntryHandlerKeywordNest,new f.EntryHandlerKeywordType,new p.EntryHandlerKeywordValue,new y.EntryHandlerKeywordAnnotation,new i.EntryHandlerContainer,new h.EntryHandlerKeywordUnknownFallback,new s.EntryHandlerPredicate,new a.EntryHandlerInvalidFallback],Yw}var jbe;function Zgt(){return jbe||(jbe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(_3e(),t)}(N9)),N9}var TS={},Bbe;function eyt(){var f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R,C,M,U,B,G,K,$,se,pe,we,Ce,Le,Ie,Oe,ye,Me,W,LG,le,me,Z,q,m3e,re,_e,he,Fc,Mc,jG,U3,V3,$r,BG,RE,Dc,qG,z;if(Bbe)return TS;Bbe=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,r=typeof process=="object"&&process?process:{},n=(V,x,O,D)=>{typeof r.emitWarning=="function"?r.emitWarning(V,x,O,D):console.error(`[${O}] ${x}: ${V}`)},i=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof i>"u"){a=class{constructor(){k(this,"onabort");k(this,"_onabort",[]);k(this,"reason");k(this,"aborted",!1)}addEventListener(O,D){this._onabort.push(D)}},i=class{constructor(){k(this,"signal",new a);x()}abort(O){var D,H;if(!this.signal.aborted){this.signal.reason=O,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(O);(H=(D=this.signal).onabort)==null||H.call(D,O)}}};let V=((f=r.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{V&&(V=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var s=V=>!e.has(V),o=V=>V&&V===Math.floor(V)&&V>0&&isFinite(V),c=V=>o(V)?V<=Math.pow(2,8)?Uint8Array:V<=Math.pow(2,16)?Uint16Array:V<=Math.pow(2,32)?Uint32Array:V<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(V){super(V),this.fill(0)}},l=(h=class{constructor(x,O){k(this,"heap");k(this,"length");if(!w(h,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new O(x),this.length=0}static create(x){let O=c(x);if(!O)return[];be(h,p,!0);let D=new h(x,O);return be(h,p,!1),D}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},p=new WeakMap,qe(h,p,!1),h),d=(z=class{constructor(x){qe(this,W);qe(this,m);qe(this,y);qe(this,v);qe(this,A);qe(this,T);qe(this,S);qe(this,P);qe(this,j);k(this,"ttl");k(this,"ttlResolution");k(this,"ttlAutopurge");k(this,"updateAgeOnGet");k(this,"updateAgeOnHas");k(this,"allowStale");k(this,"noDisposeOnSet");k(this,"noUpdateTTL");k(this,"maxEntrySize");k(this,"sizeCalculation");k(this,"noDeleteOnFetchRejection");k(this,"noDeleteOnStaleGet");k(this,"allowStaleOnFetchAbort");k(this,"allowStaleOnFetchRejection");k(this,"ignoreFetchAbort");qe(this,F);qe(this,N);qe(this,R);qe(this,C);qe(this,M);qe(this,U);qe(this,B);qe(this,G);qe(this,K);qe(this,$);qe(this,se);qe(this,pe);qe(this,we);qe(this,Ce);qe(this,Le);qe(this,Ie);qe(this,Oe);qe(this,ye);qe(this,Me);qe(this,le,()=>{});qe(this,me,()=>{});qe(this,Z,()=>{});qe(this,q,()=>!1);qe(this,re,x=>{});qe(this,_e,(x,O,D)=>{});qe(this,he,(x,O,D,H)=>{if(D||H)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});k(this,_,"LRUCache");let{max:O=0,ttl:D,ttlResolution:H=1,ttlAutopurge:Y,updateAgeOnGet:Q,updateAgeOnHas:ee,allowStale:ie,dispose:Re,onInsert:oe,disposeAfter:Te,noDisposeOnSet:We,noUpdateTTL:Qe,maxSize:Xe=0,maxEntrySize:Pe=0,sizeCalculation:He,fetchMethod:Ee,memoMethod:ce,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:ht,ignoreFetchAbort:Et,perf:rt}=x;if(rt!==void 0&&typeof(rt==null?void 0:rt.now)!="function")throw new TypeError("perf option must have a now() method if specified");if(be(this,j,rt??t),O!==0&&!o(O))throw new TypeError("max option must be a nonnegative integer");let _t=O?c(O):Array;if(!_t)throw new Error("invalid max value: "+O);if(be(this,m,O),be(this,y,Xe),this.maxEntrySize=Pe||w(this,y),this.sizeCalculation=He,this.sizeCalculation){if(!w(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ce!==void 0&&typeof ce!="function")throw new TypeError("memoMethod must be a function if defined");if(be(this,P,ce),Ee!==void 0&&typeof Ee!="function")throw new TypeError("fetchMethod must be a function if specified");if(be(this,S,Ee),be(this,Oe,!!Ee),be(this,R,new Map),be(this,C,new Array(O).fill(void 0)),be(this,M,new Array(O).fill(void 0)),be(this,U,new _t(O)),be(this,B,new _t(O)),be(this,G,0),be(this,K,0),be(this,$,l.create(O)),be(this,F,0),be(this,N,0),typeof Re=="function"&&be(this,v,Re),typeof oe=="function"&&be(this,A,oe),typeof Te=="function"?(be(this,T,Te),be(this,se,[])):(be(this,T,void 0),be(this,se,void 0)),be(this,Ie,!!w(this,v)),be(this,Me,!!w(this,A)),be(this,ye,!!w(this,T)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!Qe,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!Be,this.allowStaleOnFetchAbort=!!ht,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(w(this,y)!==0&&!o(w(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,W,m3e).call(this)}if(this.allowStale=!!ie,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!Q,this.updateAgeOnHas=!!ee,this.ttlResolution=o(H)||H===0?H:1,this.ttlAutopurge=!!Y,this.ttl=D||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,W,LG).call(this)}if(w(this,m)===0&&this.ttl===0&&w(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!w(this,m)&&!w(this,y)){let ut="LRU_CACHE_UNBOUNDED";s(ut)&&(e.add(ut),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,z))}}get perf(){return w(this,j)}static unsafeExposeInternals(x){return{starts:w(x,we),ttls:w(x,Ce),autopurgeTimers:w(x,Le),sizes:w(x,pe),keyMap:w(x,R),keyList:w(x,C),valList:w(x,M),next:w(x,U),prev:w(x,B),get head(){return w(x,G)},get tail(){return w(x,K)},free:w(x,$),isBackgroundFetch:O=>{var D;return fe(D=x,W,$r).call(D,O)},backgroundFetch:(O,D,H,Y)=>{var Q;return fe(Q=x,W,V3).call(Q,O,D,H,Y)},moveToTail:O=>{var D;return fe(D=x,W,RE).call(D,O)},indexes:O=>{var D;return fe(D=x,W,Fc).call(D,O)},rindexes:O=>{var D;return fe(D=x,W,Mc).call(D,O)},isStale:O=>{var D;return w(D=x,q).call(D,O)}}}get max(){return w(this,m)}get maxSize(){return w(this,y)}get calculatedSize(){return w(this,N)}get size(){return w(this,F)}get fetchMethod(){return w(this,S)}get memoMethod(){return w(this,P)}get dispose(){return w(this,v)}get onInsert(){return w(this,A)}get disposeAfter(){return w(this,T)}getRemainingTTL(x){return w(this,R).has(x)?1/0:0}*entries(){for(let x of fe(this,W,Fc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,$r).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*rentries(){for(let x of fe(this,W,Mc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,$r).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*keys(){for(let x of fe(this,W,Fc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,$r).call(this,w(this,M)[x])&&(yield O)}}*rkeys(){for(let x of fe(this,W,Mc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,$r).call(this,w(this,M)[x])&&(yield O)}}*values(){for(let x of fe(this,W,Fc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,$r).call(this,w(this,M)[x])&&(yield w(this,M)[x])}*rvalues(){for(let x of fe(this,W,Mc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,$r).call(this,w(this,M)[x])&&(yield w(this,M)[x])}[(g=Symbol.iterator,_=Symbol.toStringTag,g)](){return this.entries()}find(x,O={}){for(let D of fe(this,W,Fc).call(this)){let H=w(this,M)[D],Y=fe(this,W,$r).call(this,H)?H.__staleWhileFetching:H;if(Y!==void 0&&x(Y,w(this,C)[D],this))return this.get(w(this,C)[D],O)}}forEach(x,O=this){for(let D of fe(this,W,Fc).call(this)){let H=w(this,M)[D],Y=fe(this,W,$r).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}rforEach(x,O=this){for(let D of fe(this,W,Mc).call(this)){let H=w(this,M)[D],Y=fe(this,W,$r).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}purgeStale(){let x=!1;for(let O of fe(this,W,Mc).call(this,{allowStale:!0}))w(this,q).call(this,O)&&(fe(this,W,Dc).call(this,w(this,C)[O],"expire"),x=!0);return x}info(x){let O=w(this,R).get(x);if(O===void 0)return;let D=w(this,M)[O],H=fe(this,W,$r).call(this,D)?D.__staleWhileFetching:D;if(H===void 0)return;let Y={value:H};if(w(this,Ce)&&w(this,we)){let Q=w(this,Ce)[O],ee=w(this,we)[O];if(Q&&ee){let ie=Q-(w(this,j).now()-ee);Y.ttl=ie,Y.start=Date.now()}}return w(this,pe)&&(Y.size=w(this,pe)[O]),Y}dump(){let x=[];for(let O of fe(this,W,Fc).call(this,{allowStale:!0})){let D=w(this,C)[O],H=w(this,M)[O],Y=fe(this,W,$r).call(this,H)?H.__staleWhileFetching:H;if(Y===void 0||D===void 0)continue;let Q={value:Y};if(w(this,Ce)&&w(this,we)){Q.ttl=w(this,Ce)[O];let ee=w(this,j).now()-w(this,we)[O];Q.start=Math.floor(Date.now()-ee)}w(this,pe)&&(Q.size=w(this,pe)[O]),x.unshift([D,Q])}return x}load(x){this.clear();for(let[O,D]of x){if(D.start){let H=Date.now()-D.start;D.start=w(this,j).now()-H}this.set(O,D.value,D)}}set(x,O,D={}){var We,Qe,Xe,Pe,He,Ee,ce;if(O===void 0)return this.delete(x),this;let{ttl:H=this.ttl,start:Y,noDisposeOnSet:Q=this.noDisposeOnSet,sizeCalculation:ee=this.sizeCalculation,status:ie}=D,{noUpdateTTL:Re=this.noUpdateTTL}=D,oe=w(this,he).call(this,x,O,D.size||0,ee);if(this.maxEntrySize&&oe>this.maxEntrySize)return ie&&(ie.set="miss",ie.maxEntrySizeExceeded=!0),fe(this,W,Dc).call(this,x,"set"),this;let Te=w(this,F)===0?void 0:w(this,R).get(x);if(Te===void 0)Te=w(this,F)===0?w(this,K):w(this,$).length!==0?w(this,$).pop():w(this,F)===w(this,m)?fe(this,W,U3).call(this,!1):w(this,F),w(this,C)[Te]=x,w(this,M)[Te]=O,w(this,R).set(x,Te),w(this,U)[w(this,K)]=Te,w(this,B)[Te]=w(this,K),be(this,K,Te),vn(this,F)._++,w(this,_e).call(this,Te,oe,ie),ie&&(ie.set="add"),Re=!1,w(this,Me)&&((We=w(this,A))==null||We.call(this,O,x,"add"));else{fe(this,W,RE).call(this,Te);let ne=w(this,M)[Te];if(O!==ne){if(w(this,Oe)&&fe(this,W,$r).call(this,ne)){ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=ne;xe!==void 0&&!Q&&(w(this,Ie)&&((Qe=w(this,v))==null||Qe.call(this,xe,x,"set")),w(this,ye)&&((Xe=w(this,se))==null||Xe.push([xe,x,"set"])))}else Q||(w(this,Ie)&&((Pe=w(this,v))==null||Pe.call(this,ne,x,"set")),w(this,ye)&&((He=w(this,se))==null||He.push([ne,x,"set"])));if(w(this,re).call(this,Te),w(this,_e).call(this,Te,oe,ie),w(this,M)[Te]=O,ie){ie.set="replace";let xe=ne&&fe(this,W,$r).call(this,ne)?ne.__staleWhileFetching:ne;xe!==void 0&&(ie.oldValue=xe)}}else ie&&(ie.set="update");w(this,Me)&&((Ee=this.onInsert)==null||Ee.call(this,O,x,O===ne?"update":"replace"))}if(H!==0&&!w(this,Ce)&&fe(this,W,LG).call(this),w(this,Ce)&&(Re||w(this,Z).call(this,Te,H,Y),ie&&w(this,me).call(this,ie,Te)),!Q&&w(this,ye)&&w(this,se)){let ne=w(this,se),xe;for(;xe=ne==null?void 0:ne.shift();)(ce=w(this,T))==null||ce.call(this,...xe)}return this}pop(){var x;try{for(;w(this,F);){let O=w(this,M)[w(this,G)];if(fe(this,W,U3).call(this,!0),fe(this,W,$r).call(this,O)){if(O.__staleWhileFetching)return O.__staleWhileFetching}else if(O!==void 0)return O}}finally{if(w(this,ye)&&w(this,se)){let O=w(this,se),D;for(;D=O==null?void 0:O.shift();)(x=w(this,T))==null||x.call(this,...D)}}}has(x,O={}){let{updateAgeOnHas:D=this.updateAgeOnHas,status:H}=O,Y=w(this,R).get(x);if(Y!==void 0){let Q=w(this,M)[Y];if(fe(this,W,$r).call(this,Q)&&Q.__staleWhileFetching===void 0)return!1;if(w(this,q).call(this,Y))H&&(H.has="stale",w(this,me).call(this,H,Y));else return D&&w(this,le).call(this,Y),H&&(H.has="hit",w(this,me).call(this,H,Y)),!0}else H&&(H.has="miss");return!1}peek(x,O={}){let{allowStale:D=this.allowStale}=O,H=w(this,R).get(x);if(H===void 0||!D&&w(this,q).call(this,H))return;let Y=w(this,M)[H];return fe(this,W,$r).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:Q=this.ttl,noDisposeOnSet:ee=this.noDisposeOnSet,size:ie=0,sizeCalculation:Re=this.sizeCalculation,noUpdateTTL:oe=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:We=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:Pe,forceRefresh:He=!1,status:Ee,signal:ce}=O;if(!w(this,Oe))return Ee&&(Ee.fetch="get"),this.get(x,{allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,status:Ee});let ne={allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,ttl:Q,noDisposeOnSet:ee,size:ie,sizeCalculation:Re,noUpdateTTL:oe,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:We,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ee,signal:ce},xe=w(this,R).get(x);if(xe===void 0){Ee&&(Ee.fetch="miss");let Be=fe(this,W,V3).call(this,x,xe,ne,Pe);return Be.__returned=Be}else{let Be=w(this,M)[xe];if(fe(this,W,$r).call(this,Be)){let _t=D&&Be.__staleWhileFetching!==void 0;return Ee&&(Ee.fetch="inflight",_t&&(Ee.returnedStale=!0)),_t?Be.__staleWhileFetching:Be.__returned=Be}let ht=w(this,q).call(this,xe);if(!He&&!ht)return Ee&&(Ee.fetch="hit"),fe(this,W,RE).call(this,xe),H&&w(this,le).call(this,xe),Ee&&w(this,me).call(this,Ee,xe),Be;let Et=fe(this,W,V3).call(this,x,xe,ne,Pe),rt=Et.__staleWhileFetching!==void 0&&D;return Ee&&(Ee.fetch=ht?"stale":"refresh",rt&&ht&&(Ee.returnedStale=!0)),rt?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(x,O={}){let D=await this.fetch(x,O);if(D===void 0)throw new Error("fetch() returned undefined");return D}memo(x,O={}){let D=w(this,P);if(!D)throw new Error("no memoMethod provided to constructor");let{context:H,forceRefresh:Y,...Q}=O,ee=this.get(x,Q);if(!Y&&ee!==void 0)return ee;let ie=D(x,ee,{options:Q,context:H});return this.set(x,ie,Q),ie}get(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:Q}=O,ee=w(this,R).get(x);if(ee!==void 0){let ie=w(this,M)[ee],Re=fe(this,W,$r).call(this,ie);return Q&&w(this,me).call(this,Q,ee),w(this,q).call(this,ee)?(Q&&(Q.get="stale"),Re?(Q&&D&&ie.__staleWhileFetching!==void 0&&(Q.returnedStale=!0),D?ie.__staleWhileFetching:void 0):(Y||fe(this,W,Dc).call(this,x,"expire"),Q&&D&&(Q.returnedStale=!0),D?ie:void 0)):(Q&&(Q.get="hit"),Re?ie.__staleWhileFetching:(fe(this,W,RE).call(this,ee),H&&w(this,le).call(this,ee),ie))}else Q&&(Q.get="miss")}delete(x){return fe(this,W,Dc).call(this,x,"delete")}clear(){return fe(this,W,qG).call(this,"delete")}},m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,j=new WeakMap,F=new WeakMap,N=new WeakMap,R=new WeakMap,C=new WeakMap,M=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,K=new WeakMap,$=new WeakMap,se=new WeakMap,pe=new WeakMap,we=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Me=new WeakMap,W=new WeakSet,LG=function(){let x=new u(w(this,m)),O=new u(w(this,m));be(this,Ce,x),be(this,we,O);let D=this.ttlAutopurge?new Array(w(this,m)):void 0;be(this,Le,D),be(this,Z,(Q,ee,ie=w(this,j).now())=>{if(O[Q]=ee!==0?ie:0,x[Q]=ee,D!=null&&D[Q]&&(clearTimeout(D[Q]),D[Q]=void 0),ee!==0&&D){let Re=setTimeout(()=>{w(this,q).call(this,Q)&&fe(this,W,Dc).call(this,w(this,C)[Q],"expire")},ee+1);Re.unref&&Re.unref(),D[Q]=Re}}),be(this,le,Q=>{O[Q]=x[Q]!==0?w(this,j).now():0}),be(this,me,(Q,ee)=>{if(x[ee]){let ie=x[ee],Re=O[ee];if(!ie||!Re)return;Q.ttl=ie,Q.start=Re,Q.now=H||Y();let oe=Q.now-Re;Q.remainingTTL=ie-oe}});let H=0,Y=()=>{let Q=w(this,j).now();if(this.ttlResolution>0){H=Q;let ee=setTimeout(()=>H=0,this.ttlResolution);ee.unref&&ee.unref()}return Q};this.getRemainingTTL=Q=>{let ee=w(this,R).get(Q);if(ee===void 0)return 0;let ie=x[ee],Re=O[ee];if(!ie||!Re)return 1/0;let oe=(H||Y())-Re;return ie-oe},be(this,q,Q=>{let ee=O[Q],ie=x[Q];return!!ie&&!!ee&&(H||Y())-ee>ie})},le=new WeakMap,me=new WeakMap,Z=new WeakMap,q=new WeakMap,m3e=function(){let x=new u(w(this,m));be(this,N,0),be(this,pe,x),be(this,re,O=>{be(this,N,w(this,N)-x[O]),x[O]=0}),be(this,he,(O,D,H,Y)=>{if(fe(this,W,$r).call(this,D))return 0;if(!o(H))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(H=Y(D,O),!o(H))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return H}),be(this,_e,(O,D,H)=>{if(x[O]=D,w(this,y)){let Y=w(this,y)-x[O];for(;w(this,N)>Y;)fe(this,W,U3).call(this,!0)}be(this,N,w(this,N)+x[O]),H&&(H.entrySize=D,H.totalCalculatedSize=w(this,N))})},re=new WeakMap,_e=new WeakMap,he=new WeakMap,Fc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,K);!(!fe(this,W,jG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,G)));)O=w(this,B)[O]},Mc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,G);!(!fe(this,W,jG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,K)));)O=w(this,U)[O]},jG=function(x){return x!==void 0&&w(this,R).get(w(this,C)[x])===x},U3=function(x){var Y,Q,ee;let O=w(this,G),D=w(this,C)[O],H=w(this,M)[O];return w(this,Oe)&&fe(this,W,$r).call(this,H)?H.__abortController.abort(new Error("evicted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Y=w(this,v))==null||Y.call(this,H,D,"evict")),w(this,ye)&&((Q=w(this,se))==null||Q.push([H,D,"evict"]))),w(this,re).call(this,O),(ee=w(this,Le))!=null&&ee[O]&&(clearTimeout(w(this,Le)[O]),w(this,Le)[O]=void 0),x&&(w(this,C)[O]=void 0,w(this,M)[O]=void 0,w(this,$).push(O)),w(this,F)===1?(be(this,G,be(this,K,0)),w(this,$).length=0):be(this,G,w(this,U)[O]),w(this,R).delete(D),vn(this,F)._--,O},V3=function(x,O,D,H){let Y=O===void 0?void 0:w(this,M)[O];if(fe(this,W,$r).call(this,Y))return Y;let Q=new i,{signal:ee}=D;ee==null||ee.addEventListener("abort",()=>Q.abort(ee.reason),{signal:Q.signal});let ie={signal:Q.signal,options:D,context:H},Re=(Pe,He=!1)=>{let{aborted:Ee}=Q.signal,ce=D.ignoreFetchAbort&&Pe!==void 0,ne=D.ignoreFetchAbort||!!(D.allowStaleOnFetchAbort&&Pe!==void 0);if(D.status&&(Ee&&!He?(D.status.fetchAborted=!0,D.status.fetchError=Q.signal.reason,ce&&(D.status.fetchAbortIgnored=!0)):D.status.fetchResolved=!0),Ee&&!ce&&!He)return Te(Q.signal.reason,ne);let xe=Qe,Be=w(this,M)[O];return(Be===Qe||ce&&He&&Be===void 0)&&(Pe===void 0?xe.__staleWhileFetching!==void 0?w(this,M)[O]=xe.__staleWhileFetching:fe(this,W,Dc).call(this,x,"fetch"):(D.status&&(D.status.fetchUpdated=!0),this.set(x,Pe,ie.options))),Pe},oe=Pe=>(D.status&&(D.status.fetchRejected=!0,D.status.fetchError=Pe),Te(Pe,!1)),Te=(Pe,He)=>{let{aborted:Ee}=Q.signal,ce=Ee&&D.allowStaleOnFetchAbort,ne=ce||D.allowStaleOnFetchRejection,xe=ne||D.noDeleteOnFetchRejection,Be=Qe;if(w(this,M)[O]===Qe&&(!xe||!He&&Be.__staleWhileFetching===void 0?fe(this,W,Dc).call(this,x,"fetch"):ce||(w(this,M)[O]=Be.__staleWhileFetching)),ne)return D.status&&Be.__staleWhileFetching!==void 0&&(D.status.returnedStale=!0),Be.__staleWhileFetching;if(Be.__returned===Be)throw Pe},We=(Pe,He)=>{var ce;let Ee=(ce=w(this,S))==null?void 0:ce.call(this,x,Y,ie);Ee&&Ee instanceof Promise&&Ee.then(ne=>Pe(ne===void 0?void 0:ne),He),Q.signal.addEventListener("abort",()=>{(!D.ignoreFetchAbort||D.allowStaleOnFetchAbort)&&(Pe(void 0),D.allowStaleOnFetchAbort&&(Pe=ne=>Re(ne,!0)))})};D.status&&(D.status.fetchDispatched=!0);let Qe=new Promise(We).then(Re,oe),Xe=Object.assign(Qe,{__abortController:Q,__staleWhileFetching:Y,__returned:void 0});return O===void 0?(this.set(x,Xe,{...ie.options,status:void 0}),O=w(this,R).get(x)):w(this,M)[O]=Xe,Xe},$r=function(x){if(!w(this,Oe))return!1;let O=x;return!!O&&O instanceof Promise&&O.hasOwnProperty("__staleWhileFetching")&&O.__abortController instanceof i},BG=function(x,O){w(this,B)[O]=x,w(this,U)[x]=O},RE=function(x){x!==w(this,K)&&(x===w(this,G)?be(this,G,w(this,U)[x]):fe(this,W,BG).call(this,w(this,B)[x],w(this,U)[x]),fe(this,W,BG).call(this,w(this,K),x),be(this,K,x))},Dc=function(x,O){var H,Y,Q,ee,ie,Re;let D=!1;if(w(this,F)!==0){let oe=w(this,R).get(x);if(oe!==void 0)if((H=w(this,Le))!=null&&H[oe]&&(clearTimeout((Y=w(this,Le))==null?void 0:Y[oe]),w(this,Le)[oe]=void 0),D=!0,w(this,F)===1)fe(this,W,qG).call(this,O);else{w(this,re).call(this,oe);let Te=w(this,M)[oe];if(fe(this,W,$r).call(this,Te)?Te.__abortController.abort(new Error("deleted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Q=w(this,v))==null||Q.call(this,Te,x,O)),w(this,ye)&&((ee=w(this,se))==null||ee.push([Te,x,O]))),w(this,R).delete(x),w(this,C)[oe]=void 0,w(this,M)[oe]=void 0,oe===w(this,K))be(this,K,w(this,B)[oe]);else if(oe===w(this,G))be(this,G,w(this,U)[oe]);else{let We=w(this,B)[oe];w(this,U)[We]=w(this,U)[oe];let Qe=w(this,U)[oe];w(this,B)[Qe]=w(this,B)[oe]}vn(this,F)._--,w(this,$).push(oe)}}if(w(this,ye)&&((ie=w(this,se))!=null&&ie.length)){let oe=w(this,se),Te;for(;Te=oe==null?void 0:oe.shift();)(Re=w(this,T))==null||Re.call(this,...Te)}return D},qG=function(x){var O,D,H,Y;for(let Q of fe(this,W,Mc).call(this,{allowStale:!0})){let ee=w(this,M)[Q];if(fe(this,W,$r).call(this,ee))ee.__abortController.abort(new Error("deleted"));else{let ie=w(this,C)[Q];w(this,Ie)&&((O=w(this,v))==null||O.call(this,ee,ie,x)),w(this,ye)&&((D=w(this,se))==null||D.push([ee,ie,x]))}}if(w(this,R).clear(),w(this,M).fill(void 0),w(this,C).fill(void 0),w(this,Ce)&&w(this,we)){w(this,Ce).fill(0),w(this,we).fill(0);for(let Q of w(this,Le)??[])Q!==void 0&&clearTimeout(Q);(H=w(this,Le))==null||H.fill(void 0)}if(w(this,pe)&&w(this,pe).fill(0),be(this,G,0),be(this,K,0),w(this,$).length=0,be(this,N,0),be(this,F,0),w(this,ye)&&w(this,se)){let Q=w(this,se),ee;for(;ee=Q==null?void 0:Q.shift();)(Y=w(this,T))==null||Y.call(this,...ee)}},z);return TS.LRUCache=d,TS}var wS={},B9={},SS={},qbe={},Ube;function g3e(){return Ube||(Ube=1,function(){(function(t){(function(e){var r=typeof globalThis<"u"&&globalThis||typeof t<"u"&&t||typeof E<"u"&&E||{},n={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function i(N){return N&&DataView.prototype.isPrototypeOf(N)}if(n.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(N){return N&&a.indexOf(Object.prototype.toString.call(N))>-1};function o(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function c(N){return typeof N!="string"&&(N=String(N)),N}function u(N){var R={next:function(){var C=N.shift();return{done:C===void 0,value:C}}};return n.iterable&&(R[Symbol.iterator]=function(){return R}),R}function l(N){this.map={},N instanceof l?N.forEach(function(R,C){this.append(C,R)},this):Array.isArray(N)?N.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(R){this.append(R,N[R])},this)}l.prototype.append=function(N,R){N=o(N),R=c(R);var C=this.map[N];this.map[N]=C?C+", "+R:R},l.prototype.delete=function(N){delete this.map[o(N)]},l.prototype.get=function(N){return N=o(N),this.has(N)?this.map[N]:null},l.prototype.has=function(N){return this.map.hasOwnProperty(o(N))},l.prototype.set=function(N,R){this.map[o(N)]=c(R)},l.prototype.forEach=function(N,R){for(var C in this.map)this.map.hasOwnProperty(C)&&N.call(R,this.map[C],C,this)},l.prototype.keys=function(){var N=[];return this.forEach(function(R,C){N.push(C)}),u(N)},l.prototype.values=function(){var N=[];return this.forEach(function(R){N.push(R)}),u(N)},l.prototype.entries=function(){var N=[];return this.forEach(function(R,C){N.push([C,R])}),u(N)},n.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function d(N){if(!N._noBody){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}}function f(N){return new Promise(function(R,C){N.onload=function(){R(N.result)},N.onerror=function(){C(N.error)}})}function h(N){var R=new FileReader,C=f(R);return R.readAsArrayBuffer(N),C}function p(N){var R=new FileReader,C=f(R),M=/charset=([A-Za-z0-9_-]+)/.exec(N.type),U=M?M[1]:"utf-8";return R.readAsText(N,U),C}function _(N){for(var R=new Uint8Array(N),C=new Array(R.length),M=0;M<R.length;M++)C[M]=String.fromCharCode(R[M]);return C.join("")}function g(N){if(N.slice)return N.slice(0);var R=new Uint8Array(N.byteLength);return R.set(new Uint8Array(N)),R.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(N){this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:n.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:n.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():n.arrayBuffer&&n.blob&&i(N)?(this._bodyArrayBuffer=g(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||s(N))?this._bodyArrayBuffer=g(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=d(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(n.blob)return this.blob().then(h);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var N=d(this);if(N)return N;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var y=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function v(N){var R=N.toUpperCase();return y.indexOf(R)>-1?R:N}function A(N,R){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var C=R.body;if(N instanceof A){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,R.headers||(this.headers=new l(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!C&&N._bodyInit!=null&&(C=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new l(R.headers)),this.method=v(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in r){var B=new AbortController;return B.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(C),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var U=/\?/;this.url+=(U.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function T(N){var R=new FormData;return N.trim().split("&").forEach(function(C){if(C){var M=C.split("="),U=M.shift().replace(/\+/g," "),B=M.join("=").replace(/\+/g," ");R.append(decodeURIComponent(U),decodeURIComponent(B))}}),R}function S(N){var R=new l,C=N.replace(/\r?\n[\t ]+/g," ");return C.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var U=M.split(":"),B=U.shift().trim();if(B){var G=U.join(":").trim();try{R.append(B,G)}catch(K){console.warn("Response "+K.message)}}}),R}m.call(A.prototype);function P(N,R){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new l(R.headers),this.url=R.url||"",this._initBody(N)}m.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},P.error=function(){var N=new P(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var j=[301,302,303,307,308];P.redirect=function(N,R){if(j.indexOf(R)===-1)throw new RangeError("Invalid status code");return new P(null,{status:R,headers:{location:N}})},e.DOMException=r.DOMException;try{new e.DOMException}catch{e.DOMException=function(R,C){this.message=R,this.name=C;var M=Error(R);this.stack=M.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function F(N,R){return new Promise(function(C,M){var U=new A(N,R);if(U.signal&&U.signal.aborted)return M(new e.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function G(){B.abort()}B.onload=function(){var se={statusText:B.statusText,headers:S(B.getAllResponseHeaders()||"")};U.url.indexOf("file://")===0&&(B.status<200||B.status>599)?se.status=200:se.status=B.status,se.url="responseURL"in B?B.responseURL:se.headers.get("X-Request-URL");var pe="response"in B?B.response:B.responseText;setTimeout(function(){C(new P(pe,se))},0)},B.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request timed out"))},0)},B.onabort=function(){setTimeout(function(){M(new e.DOMException("Aborted","AbortError"))},0)};function K(se){try{return se===""&&r.location.href?r.location.href:se}catch{return se}}if(B.open(U.method,K(U.url),!0),U.credentials==="include"?B.withCredentials=!0:U.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(n.blob?B.responseType="blob":n.arrayBuffer&&(B.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof l||r.Headers&&R.headers instanceof r.Headers)){var $=[];Object.getOwnPropertyNames(R.headers).forEach(function(se){$.push(o(se)),B.setRequestHeader(se,c(R.headers[se]))}),U.headers.forEach(function(se,pe){$.indexOf(pe)===-1&&B.setRequestHeader(pe,se)})}else U.headers.forEach(function(se,pe){B.setRequestHeader(pe,se)});U.signal&&(U.signal.addEventListener("abort",G),B.onreadystatechange=function(){B.readyState===4&&U.signal.removeEventListener("abort",G)}),B.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return F.polyfill=!0,r.fetch||(r.fetch=F,r.Headers=l,r.Request=A,r.Response=P),e.Headers=l,e.Request=A,e.Response=P,e.fetch=F,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:E)}()),qbe}var q9={},Vbe;function gM(){return Vbe||(Vbe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class e extends Error{constructor(n,i){super(n),this.code=i}}t.ErrorCoded=e,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))}(q9)),q9}var xS={},Gbe;function y3e(){if(Gbe)return xS;Gbe=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.FetchDocumentLoader=void 0,g3e();const t=gM(),e=AO(),r=Bn();let n=class{constructor(a){this.fetcher=a}async load(a){const s=await(this.fetcher||fetch)(a,{headers:new Headers({accept:"application/ld+json"})});if(s.ok&&s.headers){let o=s.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await s.json();if(s.headers.has("Link")){let c;if(s.headers.forEach((u,l)=>{if(l==="link"){const d=(0,e.parse)(u);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+a);c=(0,r.resolve)(f.uri,a)}}}),c)return this.load(c)}throw new t.ErrorCoded(`Unsupported JSON-LD media type ${o}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(s.statusText||`Status code: ${s.status}`)}};return xS.FetchDocumentLoader=n,xS}var U9={},ES={},Hbe;function LQ(){if(Hbe)return ES;Hbe=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.Util=void 0;let t=class yu{static isCompactIri(r){return r.indexOf(":")>0&&!(r&&r[0]==="#")}static getPrefix(r,n){if(r&&r[0]==="#")return null;const i=r.indexOf(":");if(i>=0){if(r.length>i+1&&r.charAt(i+1)==="/"&&r.charAt(i+2)==="/")return null;const a=r.substr(0,i);if(a==="_")return null;if(n[a])return a}return null}static getContextValueId(r){if(r===null||typeof r=="string")return r;const n=r["@id"];return n||null}static isSimpleTermDefinitionPrefix(r,n){return!yu.isPotentialKeyword(r)&&(n.allowPrefixNonGenDelims||typeof r=="string"&&(r[0]==="_"||yu.isPrefixIriEndingWithGenDelim(r)))}static isPotentialKeyword(r){return typeof r=="string"&&yu.KEYWORD_REGEX.test(r)}static isPrefixIriEndingWithGenDelim(r){return yu.ENDS_WITH_GEN_DELIM.test(r)}static isPrefixValue(r){return r&&(typeof r=="string"||r&&typeof r=="object")}static isValidIri(r){return!!(r&&yu.IRI_REGEX.test(r))}static isValidIriWeak(r){return!!r&&r[0]!==":"&&yu.IRI_REGEX_WEAK.test(r)}static isValidKeyword(r){return yu.VALID_KEYWORDS[r]}static isTermProtected(r,n){const i=r[n];return typeof i!="string"&&i&&i["@protected"]}static hasProtectedTerms(r){for(const n of Object.keys(r))if(yu.isTermProtected(r,n))return!0;return!1}static isReservedInternalKeyword(r){return r.startsWith("@__")}static deepEqual(r,n){const i=Object.keys(r),a=Object.keys(n);return i.length!==a.length?!1:i.every(s=>{const o=r[s],c=n[s];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}};return t.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,t.IRI_REGEX_WEAK=/(?::[^:])|\//,t.KEYWORD_REGEX=/^@[a-z]+$/i,t.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,t.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,t.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,t.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},t.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],t.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],t.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],t.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],t.CONTAINERS_1_0=["@list","@set","@index"],ES.Util=t,ES}var kbe;function b3e(){return kbe||(kbe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const e=Bn(),r=gM(),n=LQ();class i{constructor(s){this.contextRaw=s}getContextRaw(){return this.contextRaw}expandTerm(s,o,c=t.defaultExpandOptions){const u=this.contextRaw[s];if(u===null||u&&u["@id"]===null)return null;let l=!0;if(u&&o){const g=n.Util.getContextValueId(u);if(g&&g!==s)if(typeof g!="string"||!n.Util.isValidIri(g)&&!n.Util.isValidKeyword(g))n.Util.isPotentialKeyword(g)||(l=!1);else return g}const d=n.Util.getPrefix(s,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],_=n.Util.isPotentialKeyword(s);if(d){const g=this.contextRaw[d],m=n.Util.getContextValueId(g);if(m){if(typeof g=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,c))return s}else if(m[0]!=="_"&&!_&&!g["@prefix"]&&!(s in this.contextRaw))return s;return m+s.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!_&&!n.Util.isCompactIri(s))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,e.resolve)(f,p):"")+s;throw new r.ErrorCoded(`Relative vocab expansion for term '${s}' with vocab '${f}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+s;else if(!o&&p&&!_&&!n.Util.isCompactIri(s))return(0,e.resolve)(s,p);if(l)return s;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${s}': '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(s,o){if(o&&this.contextRaw["@vocab"]&&s.startsWith(this.contextRaw["@vocab"]))return s.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&s.startsWith(this.contextRaw["@base"]))return s.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:s};for(const u in this.contextRaw){const l=this.contextRaw[u];if(l&&!n.Util.isPotentialKeyword(u)){const d=n.Util.getContextValueId(l);if(s.startsWith(d)){const f=s.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=u,c.suffix=f);else if(o)return u}}}return c.prefix?c.prefix+":"+c.suffix:s}}t.JsonLdContextNormalized=i,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(U9)),U9}var zbe;function tyt(){if(zbe)return SS;zbe=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS.ContextParser=void 0,g3e();const t=Bn(),e=gM(),r=y3e(),n=b3e(),i=LQ();let a=class Nd{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new r.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,u){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,u);if(!i.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,u);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!i.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let u=o[c];if(u&&typeof u=="object"&&u["@reverse"]&&!u["@id"]){if(typeof u["@reverse"]!="string"||i.Util.isValidKeyword(u["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${u["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);u=o[c]=Object.assign(Object.assign({},u),{"@id":u["@reverse"]}),u["@id"]=u["@reverse"],i.Util.isPotentialKeyword(u["@reverse"])?delete u["@reverse"]:u["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,u){const l=o.getContextRaw();for(const d of u||Object.keys(l))if(i.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!i.Util.isReservedInternalKeyword(d)){const f=l[d];if(i.Util.isPotentialKeyword(d)&&i.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(i.Util.ALIAS_RANGE_BLACKLIST.indexOf(i.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&i.Util.isPotentialKeyword(i.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;i.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const _=h["@id"],g=h["@type"],m=!("@prefix"in h)||i.Util.isValidIri(d);if("@id"in h)_!=null&&typeof _=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(_,!0)}),p=p||_!==l[d]["@id"]);else if(!i.Util.isPotentialKeyword(d)&&m){const y=o.expandTerm(d,!0);y!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":y}),p=!0)}if(g&&typeof g=="string"&&g!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&m){let y=o.expandTerm(g,!0);c&&g===y&&(y=o.expandTerm(g,!1)),y!==g&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":y}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:u}){if(u||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const u=o[c];if(u&&typeof u=="object"){if(typeof u["@container"]=="string")o[c]=Object.assign(Object.assign({},u),{"@container":{[u["@container"]]:!0}});else if(Array.isArray(u["@container"])){const l={};for(const d of u["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},u),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},u){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!i.Util.isReservedInternalKeyword(l)&&!i.Util.isPotentialKeyword(l)&&!i.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},i.Util.isSimpleTermDefinitionPrefix(d,u)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,u,l){for(const d of l??Object.keys(c))if(i.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!i.Util.deepEqual(o[d],c[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(i.Util.getContextValueId(o[d]))} to ${JSON.stringify(i.Util.getContextValueId(c[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const u of Object.keys(o)){if(i.Util.isReservedInternalKeyword(u))continue;if(u==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${u}': '${JSON.stringify(o[u])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[u],d=typeof l;if(i.Util.isPotentialKeyword(u)){switch(u.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[u]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&Nd.validateLanguage(l,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${l}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&Nd.validateDirection(l,!0);break;case"propagate":if(c===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${l}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(i.Util.isValidKeyword(u)&&i.Util.isValidKeyword(i.Util.getContextValueId(l)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${i.Util.getContextValueId(l)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(i.Util.getPrefix(l,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(l==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${l}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!i.Util.isCompactIri(u)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(i.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIriWeak(u)){if(h==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(u))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.getPrefix(h,o)===u)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!i.Util.isValidIri(h)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${u}': '${h}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${u}':'${h}' and '${l["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||i.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${Object.keys(h)}') in 1.0, must be only one of ${i.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${u}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(i.Util.CONTAINERS.indexOf(p)<0)throw new e.ErrorCoded(`Invalid term @container for '${u}' ('${p}'), must be one of ${i.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":Nd.validateLanguage(h,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":Nd.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!i.Util.isValidIri(u))throw new e.ErrorCoded(`Invalid @prefix definition for '${u}' ('${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(i.Util.isPotentialKeyword(h)&&h!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${u}': '${JSON.stringify(l)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${u}': '${l}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,u){return typeof o=="string"||(u&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!i.Util.isValidIri(o["@base"])&&(o["@base"]=(0,t.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!i.Util.isValidIri(o))try{o=(0,t.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,u){for(const l of u??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},u={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=Nd.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:_,minimalProcessing:g}=c,m=c.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!_&&d&&i.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const y=this.normalizeContextIri(o,l),v=this.getOverriddenLoad(y,c);if(v)return new n.JsonLdContextNormalized(v);const A=await this.parse(await this.load(y),Object.assign(Object.assign({},c),{baseIRI:y,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[y]:!0})}));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(Array.isArray(o)){const y=[],v=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const P=this.normalizeContextIri(T,l);y[S]=P;const j=this.getOverriddenLoad(P,c);return j||this.load(P)}else return T}));if(g)return new n.JsonLdContextNormalized(v);const A=await v.reduce((T,S,P)=>T.then(j=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:y[P]||c.baseIRI,external:!!y[P]||c.external,parentContext:j.getContextRaw(),remoteContexts:y[P]?Object.assign(Object.assign({},m),{[y[P]]:!0}):m}),{skipValidation:P<v.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(A.getContextRaw(),c,!0),A}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],c);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),g)return new n.JsonLdContextNormalized(o);let y={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);y=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(y,{processingMode:h},n.defaultExpandOptions);const v=Object.assign(y,o);this.idifyReverseTerms(v),this.normalize(v,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(v,{processingMode:h},n.defaultExpandOptions);const A=Object.keys(v),T=[];if(typeof d=="object")for(const P in d)P in v?T.push(P):v[P]=d[P];await this.parseInnerContexts(v,c,A);const S=new n.JsonLdContextNormalized(v);return(v&&v["@version"]||Nd.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?v["@vocab"]=d["@vocab"]+o["@vocab"]:(i.Util.isCompactIri(o["@vocab"])||o["@vocab"]in v)&&(v["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,A),!_&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,v,n.defaultExpandOptions,T),this.validateContext&&!u.skipValidation&&this.validate(v,{processingMode:h}),S}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let u;try{u=await this.documentLoader.load(o)}catch(l){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in u))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=u["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}};return a.DEFAULT_PROCESSING_MODE=1.1,SS.ContextParser=a,SS}var V9={},Qbe;function ryt(){return Qbe||(Qbe=1,Object.defineProperty(V9,"__esModule",{value:!0})),V9}var G9={},Wbe;function nyt(){return Wbe||(Wbe=1,Object.defineProperty(G9,"__esModule",{value:!0})),G9}var Kbe;function iyt(){return Kbe||(Kbe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(tyt(),t),r(gM(),t),r(y3e(),t),r(ryt(),t),r(nyt(),t),r(b3e(),t),r(LQ(),t)}(B9)),B9}var Xbe;function A3e(){if(Xbe)return wS;Xbe=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.DocumentLoaderMediated=void 0;const t=Yo(),e=m0(),r=iyt();let n=class v3e extends r.FetchDocumentLoader{constructor(s,o,c,u={}){super(v3e.createFetcher(s,o,u));k(this,"context");k(this,"lastCachePolicies");k(this,"cache");this.context=o,this.lastCachePolicies=u,this.cache=c}static createFetcher(s,o,c){return async(u,l)=>{const d=await s.mediate({input:u,init:l,context:o});return d.cachePolicy&&(c[u]=f=>d.cachePolicy.satisfiesWithoutRevalidation({input:u,init:l,context:f})),d.json=async()=>JSON.parse(await(0,e.stringify)(t.ActorHttp.toNodeReadable(d.body))),d}}async load(s){var u;const o=this.cache;if(o){const l=o.get(s);if(l){if(l.isStillValid&&await l.isStillValid(this.context))return l.context;o.delete(s)}}const c=await super.load(s);return(u=this.cache)==null||u.set(s,{context:c,isStillValid:this.lastCachePolicies[s]}),c}};return wS.DocumentLoaderMediated=n,wS}var Jbe;function ayt(){if(Jbe)return Jw;Jbe=1,Object.defineProperty(Jw,"__esModule",{value:!0}),Jw.ActorRdfParseJsonLd=void 0;const t=p0(),e=dt,r=ke(),n=Zgt(),i=eyt(),a=A3e();let s=class extends t.ActorRdfParseFixedMediaTypes{constructor(u){super(u);k(this,"mediatorHttp");k(this,"httpInvalidator");k(this,"cache");this.mediatorHttp=u.mediatorHttp,this.httpInvalidator=u.httpInvalidator,this.cache=u.cacheSize?new i.LRUCache({max:u.cacheSize}):void 0;const l=this.cache;l&&this.httpInvalidator.addInvalidateListener(({url:d})=>d?l.delete(d):l.clear())}async testHandle(u,l,d){return d.has(e.KeysRdfParseHtmlScript.processingHtmlScript)&&l!=="application/ld+json"?(0,r.failTest)("JSON-LD in script tags can only have media type 'application/ld+json'"):!l||!(l in this.mediaTypePriorities||l.endsWith("+json"))?(0,r.failTest)(`Unrecognized media type: ${l}`):await this.testHandleChecked(u)}async runHandle(u,l,d){var _;const f=u.context.getSafe(e.KeysInitQuery.dataFactory);return{data:n.JsonLdParser.fromHttpResponse(((_=u.metadata)==null?void 0:_.baseIRI)??"",l,u.headers,{dataFactory:f,documentLoader:d.get(e.KeysRdfParseJsonLd.documentLoader)??new a.DocumentLoaderMediated(this.mediatorHttp,d,this.cache),strictValues:d.get(e.KeysRdfParseJsonLd.strictValues),...d.get(e.KeysRdfParseJsonLd.parserOptions)}).import(u.data)}}};return Jw.ActorRdfParseJsonLd=s,Jw}var Ybe;function syt(){return Ybe||(Ybe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ayt(),t),r(A3e(),t)}(P9)),P9}var H9={},IS={},OS={},$be;function oyt(){var f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R,C,M,U,B,G,K,$,se,pe,we,Ce,Le,Ie,Oe,ye,Me,W,UG,le,me,Z,q,T3e,re,_e,he,Cc,Lc,VG,G3,H3,Zr,GG,PE,jc,HG,z;if($be)return OS;$be=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,r=typeof process=="object"&&process?process:{},n=(V,x,O,D)=>{typeof r.emitWarning=="function"?r.emitWarning(V,x,O,D):console.error(`[${O}] ${x}: ${V}`)},i=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof i>"u"){a=class{constructor(){k(this,"onabort");k(this,"_onabort",[]);k(this,"reason");k(this,"aborted",!1)}addEventListener(O,D){this._onabort.push(D)}},i=class{constructor(){k(this,"signal",new a);x()}abort(O){var D,H;if(!this.signal.aborted){this.signal.reason=O,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(O);(H=(D=this.signal).onabort)==null||H.call(D,O)}}};let V=((f=r.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{V&&(V=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var s=V=>!e.has(V),o=V=>V&&V===Math.floor(V)&&V>0&&isFinite(V),c=V=>o(V)?V<=Math.pow(2,8)?Uint8Array:V<=Math.pow(2,16)?Uint16Array:V<=Math.pow(2,32)?Uint32Array:V<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(V){super(V),this.fill(0)}},l=(h=class{constructor(x,O){k(this,"heap");k(this,"length");if(!w(h,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new O(x),this.length=0}static create(x){let O=c(x);if(!O)return[];be(h,p,!0);let D=new h(x,O);return be(h,p,!1),D}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},p=new WeakMap,qe(h,p,!1),h),d=(z=class{constructor(x){qe(this,W);qe(this,m);qe(this,y);qe(this,v);qe(this,A);qe(this,T);qe(this,S);qe(this,P);qe(this,j);k(this,"ttl");k(this,"ttlResolution");k(this,"ttlAutopurge");k(this,"updateAgeOnGet");k(this,"updateAgeOnHas");k(this,"allowStale");k(this,"noDisposeOnSet");k(this,"noUpdateTTL");k(this,"maxEntrySize");k(this,"sizeCalculation");k(this,"noDeleteOnFetchRejection");k(this,"noDeleteOnStaleGet");k(this,"allowStaleOnFetchAbort");k(this,"allowStaleOnFetchRejection");k(this,"ignoreFetchAbort");qe(this,F);qe(this,N);qe(this,R);qe(this,C);qe(this,M);qe(this,U);qe(this,B);qe(this,G);qe(this,K);qe(this,$);qe(this,se);qe(this,pe);qe(this,we);qe(this,Ce);qe(this,Le);qe(this,Ie);qe(this,Oe);qe(this,ye);qe(this,Me);qe(this,le,()=>{});qe(this,me,()=>{});qe(this,Z,()=>{});qe(this,q,()=>!1);qe(this,re,x=>{});qe(this,_e,(x,O,D)=>{});qe(this,he,(x,O,D,H)=>{if(D||H)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});k(this,_,"LRUCache");let{max:O=0,ttl:D,ttlResolution:H=1,ttlAutopurge:Y,updateAgeOnGet:Q,updateAgeOnHas:ee,allowStale:ie,dispose:Re,onInsert:oe,disposeAfter:Te,noDisposeOnSet:We,noUpdateTTL:Qe,maxSize:Xe=0,maxEntrySize:Pe=0,sizeCalculation:He,fetchMethod:Ee,memoMethod:ce,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:ht,ignoreFetchAbort:Et,perf:rt}=x;if(rt!==void 0&&typeof(rt==null?void 0:rt.now)!="function")throw new TypeError("perf option must have a now() method if specified");if(be(this,j,rt??t),O!==0&&!o(O))throw new TypeError("max option must be a nonnegative integer");let _t=O?c(O):Array;if(!_t)throw new Error("invalid max value: "+O);if(be(this,m,O),be(this,y,Xe),this.maxEntrySize=Pe||w(this,y),this.sizeCalculation=He,this.sizeCalculation){if(!w(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ce!==void 0&&typeof ce!="function")throw new TypeError("memoMethod must be a function if defined");if(be(this,P,ce),Ee!==void 0&&typeof Ee!="function")throw new TypeError("fetchMethod must be a function if specified");if(be(this,S,Ee),be(this,Oe,!!Ee),be(this,R,new Map),be(this,C,new Array(O).fill(void 0)),be(this,M,new Array(O).fill(void 0)),be(this,U,new _t(O)),be(this,B,new _t(O)),be(this,G,0),be(this,K,0),be(this,$,l.create(O)),be(this,F,0),be(this,N,0),typeof Re=="function"&&be(this,v,Re),typeof oe=="function"&&be(this,A,oe),typeof Te=="function"?(be(this,T,Te),be(this,se,[])):(be(this,T,void 0),be(this,se,void 0)),be(this,Ie,!!w(this,v)),be(this,Me,!!w(this,A)),be(this,ye,!!w(this,T)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!Qe,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!Be,this.allowStaleOnFetchAbort=!!ht,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(w(this,y)!==0&&!o(w(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,W,T3e).call(this)}if(this.allowStale=!!ie,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!Q,this.updateAgeOnHas=!!ee,this.ttlResolution=o(H)||H===0?H:1,this.ttlAutopurge=!!Y,this.ttl=D||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,W,UG).call(this)}if(w(this,m)===0&&this.ttl===0&&w(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!w(this,m)&&!w(this,y)){let ut="LRU_CACHE_UNBOUNDED";s(ut)&&(e.add(ut),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,z))}}get perf(){return w(this,j)}static unsafeExposeInternals(x){return{starts:w(x,we),ttls:w(x,Ce),autopurgeTimers:w(x,Le),sizes:w(x,pe),keyMap:w(x,R),keyList:w(x,C),valList:w(x,M),next:w(x,U),prev:w(x,B),get head(){return w(x,G)},get tail(){return w(x,K)},free:w(x,$),isBackgroundFetch:O=>{var D;return fe(D=x,W,Zr).call(D,O)},backgroundFetch:(O,D,H,Y)=>{var Q;return fe(Q=x,W,H3).call(Q,O,D,H,Y)},moveToTail:O=>{var D;return fe(D=x,W,PE).call(D,O)},indexes:O=>{var D;return fe(D=x,W,Cc).call(D,O)},rindexes:O=>{var D;return fe(D=x,W,Lc).call(D,O)},isStale:O=>{var D;return w(D=x,q).call(D,O)}}}get max(){return w(this,m)}get maxSize(){return w(this,y)}get calculatedSize(){return w(this,N)}get size(){return w(this,F)}get fetchMethod(){return w(this,S)}get memoMethod(){return w(this,P)}get dispose(){return w(this,v)}get onInsert(){return w(this,A)}get disposeAfter(){return w(this,T)}getRemainingTTL(x){return w(this,R).has(x)?1/0:0}*entries(){for(let x of fe(this,W,Cc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,Zr).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*rentries(){for(let x of fe(this,W,Lc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,Zr).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*keys(){for(let x of fe(this,W,Cc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,Zr).call(this,w(this,M)[x])&&(yield O)}}*rkeys(){for(let x of fe(this,W,Lc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,Zr).call(this,w(this,M)[x])&&(yield O)}}*values(){for(let x of fe(this,W,Cc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,Zr).call(this,w(this,M)[x])&&(yield w(this,M)[x])}*rvalues(){for(let x of fe(this,W,Lc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,Zr).call(this,w(this,M)[x])&&(yield w(this,M)[x])}[(g=Symbol.iterator,_=Symbol.toStringTag,g)](){return this.entries()}find(x,O={}){for(let D of fe(this,W,Cc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Zr).call(this,H)?H.__staleWhileFetching:H;if(Y!==void 0&&x(Y,w(this,C)[D],this))return this.get(w(this,C)[D],O)}}forEach(x,O=this){for(let D of fe(this,W,Cc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Zr).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}rforEach(x,O=this){for(let D of fe(this,W,Lc).call(this)){let H=w(this,M)[D],Y=fe(this,W,Zr).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}purgeStale(){let x=!1;for(let O of fe(this,W,Lc).call(this,{allowStale:!0}))w(this,q).call(this,O)&&(fe(this,W,jc).call(this,w(this,C)[O],"expire"),x=!0);return x}info(x){let O=w(this,R).get(x);if(O===void 0)return;let D=w(this,M)[O],H=fe(this,W,Zr).call(this,D)?D.__staleWhileFetching:D;if(H===void 0)return;let Y={value:H};if(w(this,Ce)&&w(this,we)){let Q=w(this,Ce)[O],ee=w(this,we)[O];if(Q&&ee){let ie=Q-(w(this,j).now()-ee);Y.ttl=ie,Y.start=Date.now()}}return w(this,pe)&&(Y.size=w(this,pe)[O]),Y}dump(){let x=[];for(let O of fe(this,W,Cc).call(this,{allowStale:!0})){let D=w(this,C)[O],H=w(this,M)[O],Y=fe(this,W,Zr).call(this,H)?H.__staleWhileFetching:H;if(Y===void 0||D===void 0)continue;let Q={value:Y};if(w(this,Ce)&&w(this,we)){Q.ttl=w(this,Ce)[O];let ee=w(this,j).now()-w(this,we)[O];Q.start=Math.floor(Date.now()-ee)}w(this,pe)&&(Q.size=w(this,pe)[O]),x.unshift([D,Q])}return x}load(x){this.clear();for(let[O,D]of x){if(D.start){let H=Date.now()-D.start;D.start=w(this,j).now()-H}this.set(O,D.value,D)}}set(x,O,D={}){var We,Qe,Xe,Pe,He,Ee,ce;if(O===void 0)return this.delete(x),this;let{ttl:H=this.ttl,start:Y,noDisposeOnSet:Q=this.noDisposeOnSet,sizeCalculation:ee=this.sizeCalculation,status:ie}=D,{noUpdateTTL:Re=this.noUpdateTTL}=D,oe=w(this,he).call(this,x,O,D.size||0,ee);if(this.maxEntrySize&&oe>this.maxEntrySize)return ie&&(ie.set="miss",ie.maxEntrySizeExceeded=!0),fe(this,W,jc).call(this,x,"set"),this;let Te=w(this,F)===0?void 0:w(this,R).get(x);if(Te===void 0)Te=w(this,F)===0?w(this,K):w(this,$).length!==0?w(this,$).pop():w(this,F)===w(this,m)?fe(this,W,G3).call(this,!1):w(this,F),w(this,C)[Te]=x,w(this,M)[Te]=O,w(this,R).set(x,Te),w(this,U)[w(this,K)]=Te,w(this,B)[Te]=w(this,K),be(this,K,Te),vn(this,F)._++,w(this,_e).call(this,Te,oe,ie),ie&&(ie.set="add"),Re=!1,w(this,Me)&&((We=w(this,A))==null||We.call(this,O,x,"add"));else{fe(this,W,PE).call(this,Te);let ne=w(this,M)[Te];if(O!==ne){if(w(this,Oe)&&fe(this,W,Zr).call(this,ne)){ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=ne;xe!==void 0&&!Q&&(w(this,Ie)&&((Qe=w(this,v))==null||Qe.call(this,xe,x,"set")),w(this,ye)&&((Xe=w(this,se))==null||Xe.push([xe,x,"set"])))}else Q||(w(this,Ie)&&((Pe=w(this,v))==null||Pe.call(this,ne,x,"set")),w(this,ye)&&((He=w(this,se))==null||He.push([ne,x,"set"])));if(w(this,re).call(this,Te),w(this,_e).call(this,Te,oe,ie),w(this,M)[Te]=O,ie){ie.set="replace";let xe=ne&&fe(this,W,Zr).call(this,ne)?ne.__staleWhileFetching:ne;xe!==void 0&&(ie.oldValue=xe)}}else ie&&(ie.set="update");w(this,Me)&&((Ee=this.onInsert)==null||Ee.call(this,O,x,O===ne?"update":"replace"))}if(H!==0&&!w(this,Ce)&&fe(this,W,UG).call(this),w(this,Ce)&&(Re||w(this,Z).call(this,Te,H,Y),ie&&w(this,me).call(this,ie,Te)),!Q&&w(this,ye)&&w(this,se)){let ne=w(this,se),xe;for(;xe=ne==null?void 0:ne.shift();)(ce=w(this,T))==null||ce.call(this,...xe)}return this}pop(){var x;try{for(;w(this,F);){let O=w(this,M)[w(this,G)];if(fe(this,W,G3).call(this,!0),fe(this,W,Zr).call(this,O)){if(O.__staleWhileFetching)return O.__staleWhileFetching}else if(O!==void 0)return O}}finally{if(w(this,ye)&&w(this,se)){let O=w(this,se),D;for(;D=O==null?void 0:O.shift();)(x=w(this,T))==null||x.call(this,...D)}}}has(x,O={}){let{updateAgeOnHas:D=this.updateAgeOnHas,status:H}=O,Y=w(this,R).get(x);if(Y!==void 0){let Q=w(this,M)[Y];if(fe(this,W,Zr).call(this,Q)&&Q.__staleWhileFetching===void 0)return!1;if(w(this,q).call(this,Y))H&&(H.has="stale",w(this,me).call(this,H,Y));else return D&&w(this,le).call(this,Y),H&&(H.has="hit",w(this,me).call(this,H,Y)),!0}else H&&(H.has="miss");return!1}peek(x,O={}){let{allowStale:D=this.allowStale}=O,H=w(this,R).get(x);if(H===void 0||!D&&w(this,q).call(this,H))return;let Y=w(this,M)[H];return fe(this,W,Zr).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:Q=this.ttl,noDisposeOnSet:ee=this.noDisposeOnSet,size:ie=0,sizeCalculation:Re=this.sizeCalculation,noUpdateTTL:oe=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:We=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:Pe,forceRefresh:He=!1,status:Ee,signal:ce}=O;if(!w(this,Oe))return Ee&&(Ee.fetch="get"),this.get(x,{allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,status:Ee});let ne={allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,ttl:Q,noDisposeOnSet:ee,size:ie,sizeCalculation:Re,noUpdateTTL:oe,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:We,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ee,signal:ce},xe=w(this,R).get(x);if(xe===void 0){Ee&&(Ee.fetch="miss");let Be=fe(this,W,H3).call(this,x,xe,ne,Pe);return Be.__returned=Be}else{let Be=w(this,M)[xe];if(fe(this,W,Zr).call(this,Be)){let _t=D&&Be.__staleWhileFetching!==void 0;return Ee&&(Ee.fetch="inflight",_t&&(Ee.returnedStale=!0)),_t?Be.__staleWhileFetching:Be.__returned=Be}let ht=w(this,q).call(this,xe);if(!He&&!ht)return Ee&&(Ee.fetch="hit"),fe(this,W,PE).call(this,xe),H&&w(this,le).call(this,xe),Ee&&w(this,me).call(this,Ee,xe),Be;let Et=fe(this,W,H3).call(this,x,xe,ne,Pe),rt=Et.__staleWhileFetching!==void 0&&D;return Ee&&(Ee.fetch=ht?"stale":"refresh",rt&&ht&&(Ee.returnedStale=!0)),rt?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(x,O={}){let D=await this.fetch(x,O);if(D===void 0)throw new Error("fetch() returned undefined");return D}memo(x,O={}){let D=w(this,P);if(!D)throw new Error("no memoMethod provided to constructor");let{context:H,forceRefresh:Y,...Q}=O,ee=this.get(x,Q);if(!Y&&ee!==void 0)return ee;let ie=D(x,ee,{options:Q,context:H});return this.set(x,ie,Q),ie}get(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:Q}=O,ee=w(this,R).get(x);if(ee!==void 0){let ie=w(this,M)[ee],Re=fe(this,W,Zr).call(this,ie);return Q&&w(this,me).call(this,Q,ee),w(this,q).call(this,ee)?(Q&&(Q.get="stale"),Re?(Q&&D&&ie.__staleWhileFetching!==void 0&&(Q.returnedStale=!0),D?ie.__staleWhileFetching:void 0):(Y||fe(this,W,jc).call(this,x,"expire"),Q&&D&&(Q.returnedStale=!0),D?ie:void 0)):(Q&&(Q.get="hit"),Re?ie.__staleWhileFetching:(fe(this,W,PE).call(this,ee),H&&w(this,le).call(this,ee),ie))}else Q&&(Q.get="miss")}delete(x){return fe(this,W,jc).call(this,x,"delete")}clear(){return fe(this,W,HG).call(this,"delete")}},m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,j=new WeakMap,F=new WeakMap,N=new WeakMap,R=new WeakMap,C=new WeakMap,M=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,K=new WeakMap,$=new WeakMap,se=new WeakMap,pe=new WeakMap,we=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Me=new WeakMap,W=new WeakSet,UG=function(){let x=new u(w(this,m)),O=new u(w(this,m));be(this,Ce,x),be(this,we,O);let D=this.ttlAutopurge?new Array(w(this,m)):void 0;be(this,Le,D),be(this,Z,(Q,ee,ie=w(this,j).now())=>{if(O[Q]=ee!==0?ie:0,x[Q]=ee,D!=null&&D[Q]&&(clearTimeout(D[Q]),D[Q]=void 0),ee!==0&&D){let Re=setTimeout(()=>{w(this,q).call(this,Q)&&fe(this,W,jc).call(this,w(this,C)[Q],"expire")},ee+1);Re.unref&&Re.unref(),D[Q]=Re}}),be(this,le,Q=>{O[Q]=x[Q]!==0?w(this,j).now():0}),be(this,me,(Q,ee)=>{if(x[ee]){let ie=x[ee],Re=O[ee];if(!ie||!Re)return;Q.ttl=ie,Q.start=Re,Q.now=H||Y();let oe=Q.now-Re;Q.remainingTTL=ie-oe}});let H=0,Y=()=>{let Q=w(this,j).now();if(this.ttlResolution>0){H=Q;let ee=setTimeout(()=>H=0,this.ttlResolution);ee.unref&&ee.unref()}return Q};this.getRemainingTTL=Q=>{let ee=w(this,R).get(Q);if(ee===void 0)return 0;let ie=x[ee],Re=O[ee];if(!ie||!Re)return 1/0;let oe=(H||Y())-Re;return ie-oe},be(this,q,Q=>{let ee=O[Q],ie=x[Q];return!!ie&&!!ee&&(H||Y())-ee>ie})},le=new WeakMap,me=new WeakMap,Z=new WeakMap,q=new WeakMap,T3e=function(){let x=new u(w(this,m));be(this,N,0),be(this,pe,x),be(this,re,O=>{be(this,N,w(this,N)-x[O]),x[O]=0}),be(this,he,(O,D,H,Y)=>{if(fe(this,W,Zr).call(this,D))return 0;if(!o(H))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(H=Y(D,O),!o(H))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return H}),be(this,_e,(O,D,H)=>{if(x[O]=D,w(this,y)){let Y=w(this,y)-x[O];for(;w(this,N)>Y;)fe(this,W,G3).call(this,!0)}be(this,N,w(this,N)+x[O]),H&&(H.entrySize=D,H.totalCalculatedSize=w(this,N))})},re=new WeakMap,_e=new WeakMap,he=new WeakMap,Cc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,K);!(!fe(this,W,VG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,G)));)O=w(this,B)[O]},Lc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,G);!(!fe(this,W,VG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,K)));)O=w(this,U)[O]},VG=function(x){return x!==void 0&&w(this,R).get(w(this,C)[x])===x},G3=function(x){var Y,Q,ee;let O=w(this,G),D=w(this,C)[O],H=w(this,M)[O];return w(this,Oe)&&fe(this,W,Zr).call(this,H)?H.__abortController.abort(new Error("evicted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Y=w(this,v))==null||Y.call(this,H,D,"evict")),w(this,ye)&&((Q=w(this,se))==null||Q.push([H,D,"evict"]))),w(this,re).call(this,O),(ee=w(this,Le))!=null&&ee[O]&&(clearTimeout(w(this,Le)[O]),w(this,Le)[O]=void 0),x&&(w(this,C)[O]=void 0,w(this,M)[O]=void 0,w(this,$).push(O)),w(this,F)===1?(be(this,G,be(this,K,0)),w(this,$).length=0):be(this,G,w(this,U)[O]),w(this,R).delete(D),vn(this,F)._--,O},H3=function(x,O,D,H){let Y=O===void 0?void 0:w(this,M)[O];if(fe(this,W,Zr).call(this,Y))return Y;let Q=new i,{signal:ee}=D;ee==null||ee.addEventListener("abort",()=>Q.abort(ee.reason),{signal:Q.signal});let ie={signal:Q.signal,options:D,context:H},Re=(Pe,He=!1)=>{let{aborted:Ee}=Q.signal,ce=D.ignoreFetchAbort&&Pe!==void 0,ne=D.ignoreFetchAbort||!!(D.allowStaleOnFetchAbort&&Pe!==void 0);if(D.status&&(Ee&&!He?(D.status.fetchAborted=!0,D.status.fetchError=Q.signal.reason,ce&&(D.status.fetchAbortIgnored=!0)):D.status.fetchResolved=!0),Ee&&!ce&&!He)return Te(Q.signal.reason,ne);let xe=Qe,Be=w(this,M)[O];return(Be===Qe||ce&&He&&Be===void 0)&&(Pe===void 0?xe.__staleWhileFetching!==void 0?w(this,M)[O]=xe.__staleWhileFetching:fe(this,W,jc).call(this,x,"fetch"):(D.status&&(D.status.fetchUpdated=!0),this.set(x,Pe,ie.options))),Pe},oe=Pe=>(D.status&&(D.status.fetchRejected=!0,D.status.fetchError=Pe),Te(Pe,!1)),Te=(Pe,He)=>{let{aborted:Ee}=Q.signal,ce=Ee&&D.allowStaleOnFetchAbort,ne=ce||D.allowStaleOnFetchRejection,xe=ne||D.noDeleteOnFetchRejection,Be=Qe;if(w(this,M)[O]===Qe&&(!xe||!He&&Be.__staleWhileFetching===void 0?fe(this,W,jc).call(this,x,"fetch"):ce||(w(this,M)[O]=Be.__staleWhileFetching)),ne)return D.status&&Be.__staleWhileFetching!==void 0&&(D.status.returnedStale=!0),Be.__staleWhileFetching;if(Be.__returned===Be)throw Pe},We=(Pe,He)=>{var ce;let Ee=(ce=w(this,S))==null?void 0:ce.call(this,x,Y,ie);Ee&&Ee instanceof Promise&&Ee.then(ne=>Pe(ne===void 0?void 0:ne),He),Q.signal.addEventListener("abort",()=>{(!D.ignoreFetchAbort||D.allowStaleOnFetchAbort)&&(Pe(void 0),D.allowStaleOnFetchAbort&&(Pe=ne=>Re(ne,!0)))})};D.status&&(D.status.fetchDispatched=!0);let Qe=new Promise(We).then(Re,oe),Xe=Object.assign(Qe,{__abortController:Q,__staleWhileFetching:Y,__returned:void 0});return O===void 0?(this.set(x,Xe,{...ie.options,status:void 0}),O=w(this,R).get(x)):w(this,M)[O]=Xe,Xe},Zr=function(x){if(!w(this,Oe))return!1;let O=x;return!!O&&O instanceof Promise&&O.hasOwnProperty("__staleWhileFetching")&&O.__abortController instanceof i},GG=function(x,O){w(this,B)[O]=x,w(this,U)[x]=O},PE=function(x){x!==w(this,K)&&(x===w(this,G)?be(this,G,w(this,U)[x]):fe(this,W,GG).call(this,w(this,B)[x],w(this,U)[x]),fe(this,W,GG).call(this,w(this,K),x),be(this,K,x))},jc=function(x,O){var H,Y,Q,ee,ie,Re;let D=!1;if(w(this,F)!==0){let oe=w(this,R).get(x);if(oe!==void 0)if((H=w(this,Le))!=null&&H[oe]&&(clearTimeout((Y=w(this,Le))==null?void 0:Y[oe]),w(this,Le)[oe]=void 0),D=!0,w(this,F)===1)fe(this,W,HG).call(this,O);else{w(this,re).call(this,oe);let Te=w(this,M)[oe];if(fe(this,W,Zr).call(this,Te)?Te.__abortController.abort(new Error("deleted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Q=w(this,v))==null||Q.call(this,Te,x,O)),w(this,ye)&&((ee=w(this,se))==null||ee.push([Te,x,O]))),w(this,R).delete(x),w(this,C)[oe]=void 0,w(this,M)[oe]=void 0,oe===w(this,K))be(this,K,w(this,B)[oe]);else if(oe===w(this,G))be(this,G,w(this,U)[oe]);else{let We=w(this,B)[oe];w(this,U)[We]=w(this,U)[oe];let Qe=w(this,U)[oe];w(this,B)[Qe]=w(this,B)[oe]}vn(this,F)._--,w(this,$).push(oe)}}if(w(this,ye)&&((ie=w(this,se))!=null&&ie.length)){let oe=w(this,se),Te;for(;Te=oe==null?void 0:oe.shift();)(Re=w(this,T))==null||Re.call(this,...Te)}return D},HG=function(x){var O,D,H,Y;for(let Q of fe(this,W,Lc).call(this,{allowStale:!0})){let ee=w(this,M)[Q];if(fe(this,W,Zr).call(this,ee))ee.__abortController.abort(new Error("deleted"));else{let ie=w(this,C)[Q];w(this,Ie)&&((O=w(this,v))==null||O.call(this,ee,ie,x)),w(this,ye)&&((D=w(this,se))==null||D.push([ee,ie,x]))}}if(w(this,R).clear(),w(this,M).fill(void 0),w(this,C).fill(void 0),w(this,Ce)&&w(this,we)){w(this,Ce).fill(0),w(this,we).fill(0);for(let Q of w(this,Le)??[])Q!==void 0&&clearTimeout(Q);(H=w(this,Le))==null||H.fill(void 0)}if(w(this,pe)&&w(this,pe).fill(0),be(this,G,0),be(this,K,0),w(this,$).length=0,be(this,N,0),be(this,F,0),w(this,ye)&&w(this,se)){let Q=w(this,se),ee;for(;ee=Q==null?void 0:Q.shift();)(Y=w(this,T))==null||Y.call(this,...ee)}},z);return OS.LRUCache=d,OS}var Zbe;function uyt(){if(Zbe)return IS;Zbe=1,Object.defineProperty(IS,"__esModule",{value:!0}),IS.ActorRdfUpdateQuadsHypermedia=void 0;const t=nPe(),e=ke(),r=rr(),n=oyt();let i=class extends t.ActorRdfUpdateQuadsDestination{constructor(o){super(o);k(this,"mediatorDereferenceRdf");k(this,"mediatorMetadata");k(this,"mediatorMetadataExtract");k(this,"mediatorRdfUpdateHypermedia");k(this,"cacheSize");k(this,"httpInvalidator");k(this,"cache");this.mediatorDereferenceRdf=o.mediatorDereferenceRdf,this.mediatorMetadata=o.mediatorMetadata,this.mediatorMetadataExtract=o.mediatorMetadataExtract,this.mediatorRdfUpdateHypermedia=o.mediatorRdfUpdateHypermedia,this.cacheSize=o.cacheSize,this.httpInvalidator=o.httpInvalidator,this.cache=this.cacheSize?new n.LRUCache({max:this.cacheSize}):void 0;const c=this.cache;c&&this.httpInvalidator.addInvalidateListener(({url:u})=>u?c.delete(u):c.clear())}async test(o){return(0,r.getContextDestinationUrl)((0,r.getContextDestination)(o.context))?(0,e.passTestVoid)():(0,e.failTest)(`Actor ${this.name} can only update quads against a single destination URL.`)}getDestination(o){const c=(0,r.getContextDestination)(o);let u=(0,r.getContextDestinationUrl)(c);if(this.cache){const d=this.cache.get(u);if(d)return(async()=>{var h;const f=await d;return f.cachePolicy&&!await((h=f.cachePolicy)==null?void 0:h.satisfiesWithoutRevalidation({url:u,context:o}))?(this.cache.delete(u),this.getDestination(o)):f.destination})()}const l=(async()=>{var _;let d,f,h;try{const g=await this.mediatorDereferenceRdf.mediate({context:o,url:u,acceptErrors:!0});f=g.exists,u=g.url,h=g.cachePolicy;const m=await this.mediatorMetadata.mediate({context:o,url:u,quads:g.data,triples:(_=g.metadata)==null?void 0:_.triples});d=(await this.mediatorMetadataExtract.mediate({context:o,url:u,metadata:m.metadata,headers:g.headers,requestTime:g.requestTime})).metadata}catch{d={},f=!1}const{destination:p}=await this.mediatorRdfUpdateHypermedia.mediate({context:o,url:u,metadata:d,exists:f,forceDestinationType:(0,r.getDataDestinationType)(c)});return{destination:p,cachePolicy:h}})();return this.cache&&this.cache.set(u,l),l.then(({destination:d})=>d)}};return IS.ActorRdfUpdateQuadsHypermedia=i,IS}var eve;function cyt(){return eve||(eve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(uyt(),t)}(H9)),H9}var k9={},RS={},z9,tve;function lyt(){if(tve)return z9;tve=1;const t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),e=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),r=new Set([500,502,503,504]),n={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},i={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function a(u){const l=parseInt(u,10);return isFinite(l)?l:0}function s(u){return u?r.has(u.status):!0}function o(u){const l={};if(!u)return l;const d=u.trim().split(/,/);for(const f of d){const[h,p]=f.split(/=/,2);l[h.trim()]=p===void 0?!0:p.trim().replace(/^"|"$/g,"")}return l}function c(u){let l=[];for(const d in u){const f=u[d];l.push(f===!0?d:d+"="+f)}if(l.length)return l.join(", ")}return z9=class{constructor(l,d,{shared:f,cacheHeuristic:h,immutableMinTimeToLive:p,ignoreCargoCult:_,_fromObject:g}={}){if(g){this._fromObject(g);return}if(!d||!d.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(l),this._responseTime=this.now(),this._isShared=f!==!1,this._ignoreCargoCult=!!_,this._cacheHeuristic=h!==void 0?h:.1,this._immutableMinTtl=p!==void 0?p:24*3600*1e3,this._status="status"in d?d.status:200,this._resHeaders=d.headers,this._rescc=o(d.headers["cache-control"]),this._method="method"in l?l.method:"GET",this._url=l.url,this._host=l.headers.host,this._noAuthorization=!l.headers.authorization,this._reqHeaders=d.headers.vary?l.headers:null,this._reqcc=o(l.headers["cache-control"]),this._ignoreCargoCult&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),d.headers["cache-control"]==null&&/no-cache/.test(d.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&e.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return!!(this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires)}_assertRequestHasHeaders(l){if(!l||!l.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(l){return!this.evaluateRequest(l).revalidation}_evaluateRequestHitResult(l){return{response:{headers:this.responseHeaders()},revalidation:l}}_evaluateRequestRevalidation(l,d){return{synchronous:d,headers:this.revalidationHeaders(l)}}_evaluateRequestMissResult(l){return{response:void 0,revalidation:this._evaluateRequestRevalidation(l,!0)}}evaluateRequest(l){if(this._assertRequestHasHeaders(l),this._rescc["must-revalidate"])return this._evaluateRequestMissResult(l);if(!this._requestMatches(l,!1))return this._evaluateRequestMissResult(l);const d=o(l.headers["cache-control"]);return d["no-cache"]||/no-cache/.test(l.headers.pragma)?this._evaluateRequestMissResult(l):d["max-age"]&&this.age()>a(d["max-age"])?this._evaluateRequestMissResult(l):d["min-fresh"]&&this.maxAge()-this.age()<a(d["min-fresh"])?this._evaluateRequestMissResult(l):this.stale()?"max-stale"in d&&(d["max-stale"]===!0||d["max-stale"]>this.age()-this.maxAge())?this._evaluateRequestHitResult(void 0):this.useStaleWhileRevalidate()?this._evaluateRequestHitResult(this._evaluateRequestRevalidation(l,!1)):this._evaluateRequestMissResult(l):this._evaluateRequestHitResult(void 0)}_requestMatches(l,d){return!!((!this._url||this._url===l.url)&&this._host===l.headers.host&&(!l.method||this._method===l.method||d&&l.method==="HEAD")&&this._varyMatches(l))}_allowsStoringAuthenticated(){return!!(this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"])}_varyMatches(l){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;const d=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const f of d)if(l.headers[f]!==this._reqHeaders[f])return!1;return!0}_copyWithoutHopByHopHeaders(l){const d={};for(const f in l)n[f]||(d[f]=l[f]);if(l.connection){const f=l.connection.trim().split(/\s*,\s*/);for(const h of f)delete d[h]}if(d.warning){const f=d.warning.split(/,/).filter(h=>!/^\s*1[0-9][0-9]/.test(h));f.length?d.warning=f.join(",").trim():delete d.warning}return d}responseHeaders(){const l=this._copyWithoutHopByHopHeaders(this._resHeaders),d=this.age();return d>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(l.warning=(l.warning?`${l.warning}, `:"")+'113 - "rfc7234 5.5.4"'),l.age=`${Math.round(d)}`,l.date=new Date(this.now()).toUTCString(),l}date(){const l=Date.parse(this._resHeaders.date);return isFinite(l)?l:this._responseTime}age(){let l=this._ageValue();const d=(this.now()-this._responseTime)/1e3;return l+d}_ageValue(){return a(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return a(this._rescc["s-maxage"])}if(this._rescc["max-age"])return a(this._rescc["max-age"]);const l=this._rescc.immutable?this._immutableMinTtl:0,d=this.date();if(this._resHeaders.expires){const f=Date.parse(this._resHeaders.expires);return Number.isNaN(f)||f<d?0:Math.max(l,(f-d)/1e3)}if(this._resHeaders["last-modified"]){const f=Date.parse(this._resHeaders["last-modified"]);if(isFinite(f)&&d>f)return Math.max(l,(d-f)/1e3*this._cacheHeuristic)}return l}timeToLive(){const l=this.maxAge()-this.age(),d=l+a(this._rescc["stale-if-error"]),f=l+a(this._rescc["stale-while-revalidate"]);return Math.round(Math.max(0,l,d,f)*1e3)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+a(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){const l=a(this._rescc["stale-while-revalidate"]);return l>0&&this.maxAge()+l>this.age()}static fromObject(l){return new this(void 0,void 0,{_fromObject:l})}_fromObject(l){if(this._responseTime)throw Error("Reinitialized");if(!l||l.v!==1)throw Error("Invalid serialization");this._responseTime=l.t,this._isShared=l.sh,this._cacheHeuristic=l.ch,this._immutableMinTtl=l.imm!==void 0?l.imm:24*3600*1e3,this._ignoreCargoCult=!!l.icc,this._status=l.st,this._resHeaders=l.resh,this._rescc=l.rescc,this._method=l.m,this._url=l.u,this._host=l.h,this._noAuthorization=l.a,this._reqHeaders=l.reqh,this._reqcc=l.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,icc:this._ignoreCargoCult,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(l){this._assertRequestHasHeaders(l);const d=this._copyWithoutHopByHopHeaders(l.headers);if(delete d["if-range"],!this._requestMatches(l,!0)||!this.storable())return delete d["if-none-match"],delete d["if-modified-since"],d;if(this._resHeaders.etag&&(d["if-none-match"]=d["if-none-match"]?`${d["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),d["accept-ranges"]||d["if-match"]||d["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete d["if-modified-since"],d["if-none-match"]){const h=d["if-none-match"].split(/,/).filter(p=>!/^\s*W\//.test(p));h.length?d["if-none-match"]=h.join(",").trim():delete d["if-none-match"]}}else this._resHeaders["last-modified"]&&!d["if-modified-since"]&&(d["if-modified-since"]=this._resHeaders["last-modified"]);return d}revalidatedPolicy(l,d){if(this._assertRequestHasHeaders(l),this._useStaleIfError()&&s(d))return{policy:this,modified:!1,matches:!0};if(!d||!d.headers)throw Error("Response headers missing");let f=!1;d.status!==void 0&&d.status!=304?f=!1:d.headers.etag&&!/^\s*W\//.test(d.headers.etag)?f=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===d.headers.etag:this._resHeaders.etag&&d.headers.etag?f=this._resHeaders.etag.replace(/^\s*W\//,"")===d.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?f=this._resHeaders["last-modified"]===d.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!d.headers.etag&&!d.headers["last-modified"]&&(f=!0);const h={shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl,ignoreCargoCult:this._ignoreCargoCult};if(!f)return{policy:new this.constructor(l,d,h),modified:d.status!=304,matches:!1};const p={};for(const g in this._resHeaders)p[g]=g in d.headers&&!i[g]?d.headers[g]:this._resHeaders[g];const _=Object.assign({},d,{status:this._status,method:this._method,headers:p});return{policy:new this.constructor(l,_,h),modified:!1,matches:!0}}},z9}const dyt="5.1.3",fyt={version:dyt};var PS={},rve;function w3e(){if(rve)return PS;rve=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.CachePolicyHttpCacheSemanticsWrapper=void 0;const t=Yo(),e=dt;let r=class Fd{constructor(i,a,s){k(this,"cachePolicy");k(this,"queryTimestamp");k(this,"fetchInitPreprocessor");this.cachePolicy=i,this.queryTimestamp=a,this.fetchInitPreprocessor=s}storable(){return this.cachePolicy.storable()}async satisfiesWithoutRevalidation(i){return this.queryTimestamp&&i.context.get(e.KeysInitQuery.queryTimestampHighResolution)===this.queryTimestamp?!0:this.cachePolicy.satisfiesWithoutRevalidation(await Fd.convertFromFetchRequest(i,this.fetchInitPreprocessor))}responseHeaders(){return Fd.convertToFetchHeaders(this.cachePolicy.responseHeaders())}timeToLive(){return this.cachePolicy.timeToLive()}async revalidationHeaders(i){return Fd.convertToFetchHeaders(this.cachePolicy.revalidationHeaders(await Fd.convertFromFetchRequest(i,this.fetchInitPreprocessor)))}async revalidatedPolicy(i,a){const s=this.cachePolicy.revalidatedPolicy(await Fd.convertFromFetchRequest(i,this.fetchInitPreprocessor),{status:a.status,headers:a.headers?t.ActorHttp.headersToHash(a.headers):{}});return{policy:new Fd(s.policy,this.queryTimestamp,this.fetchInitPreprocessor),modified:s.modified,matches:s.matches}}static async convertFromFetchRequest(i,a){var o,c;let s=typeof i.input=="string"?(o=i.init)==null?void 0:o.headers:i.input.headers;return s=(await a.handle({headers:s},i.context)).headers,{url:typeof i.input=="string"?i.input:i.input.url,method:((c=i.init)==null?void 0:c.method)??"GET",headers:s?t.ActorHttp.headersToHash(new Headers(s)):{}}}static convertToFetchHeaders(i){const a=new Headers;for(const[s,o]of Object.entries(i))if(Array.isArray(o))for(const c of o)a.append(s,c);else o&&a.append(s,o);return a}};return PS.CachePolicyHttpCacheSemanticsWrapper=r,PS}var NS={},nve;function hyt(){if(nve)return NS;nve=1,Object.defineProperty(NS,"__esModule",{value:!0}),NS.FetchInitPreprocessor=void 0;class t{async handle(r){if(r.body&&typeof r.body!="string"&&"getReader"in r.body){const n=r.body.getReader(),i=[];for(;;){const{done:a,value:s}=await n.read();if(a)break;i.push(s)}r.body=i.join("")}return{...r,keepalive:!r.body}}}return NS.FetchInitPreprocessor=t,NS}var ive;function pyt(){var c;if(ive)return RS;ive=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS.ActorHttpFetch=void 0;const t=Yo(),e=dt,r=ke(),n=lyt(),i=fyt,a=w3e(),s=hyt();let o=(c=class extends t.ActorHttp{constructor(d){super(d);k(this,"fetchInitPreprocessor");this.fetchInitPreprocessor=new s.FetchInitPreprocessor(d)}async test(d){return(0,r.passTest)({time:Number.POSITIVE_INFINITY})}async run(d){const f=this.prepareRequestHeaders(d),h={method:"GET",...d.init,headers:f};this.logInfo(d.context,`Requesting ${t.ActorHttp.getInputUrl(d.input).href}`,()=>({headers:t.ActorHttp.headersToHash(f),method:h.method})),d.context.has(e.KeysHttp.fetch)&&(h.headers=t.ActorHttp.headersToHash(f)),d.context.get(e.KeysHttp.includeCredentials)&&(h.credentials="include");const p=d.context.get(e.KeysHttp.httpTimeout),_=d.context.get(e.KeysHttp.httpBodyTimeout),g=d.context.get(e.KeysHttp.fetch)??fetch,m=await this.fetchInitPreprocessor.handle(h,d.context);let y,v;const A=d.context.get(e.KeysHttp.httpAbortSignal);if(A&&(m.signal=AbortSignal.any([...m.signal?[m.signal]:[],A])),p){const S=new AbortController;m.signal=AbortSignal.any([...m.signal?[m.signal]:[],S.signal]),y=()=>S.abort(new Error(`Fetch timed out for ${t.ActorHttp.getInputUrl(d.input).href} after ${p} ms`)),v=setTimeout(()=>y(),p)}const T=await g(d.input,m);return T.fromCache=T.headers.get("x-comunica-cache")==="HIT",T.fromCache&&this.logInfo(d.context,`Cache hit for ${t.ActorHttp.getInputUrl(d.input).href}`),T.cachePolicy=new a.CachePolicyHttpCacheSemanticsWrapper(new n(await a.CachePolicyHttpCacheSemanticsWrapper.convertFromFetchRequest(d,this.fetchInitPreprocessor),{status:T.status,headers:t.ActorHttp.headersToHash(T.headers)},{shared:!1}),d.context.get(e.KeysInitQuery.queryTimestampHighResolution),this.fetchInitPreprocessor),p&&(!_||!T.body)&&clearTimeout(v),T}prepareRequestHeaders(d){var p;const f=new Headers((p=d.init)==null?void 0:p.headers);t.ActorHttp.isBrowser()?f.delete("user-agent"):f.has("user-agent")||f.set("user-agent",c.userAgent);const h=d.context.get(e.KeysHttp.auth);return h&&f.set("Authorization",`Basic ${c.stringToBase64(h)}`),f}static stringToBase64(d){const f=new TextEncoder().encode(d),h=Array.from(f,p=>String.fromCodePoint(p)).join("");return btoa(h)}},k(c,"userAgent",t.ActorHttp.createUserAgent("ActorHttpFetch",i.version)),c);return RS.ActorHttpFetch=o,RS}var ave;function _yt(){return ave||(ave=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(pyt(),t),r(w3e(),t)}(k9)),k9}var Q9={},FS={},sve;function myt(){if(sve)return FS;sve=1,Object.defineProperty(FS,"__esModule",{value:!0}),FS.ActionObserverHttp=void 0;const t=ke();class e extends t.ActionObserver{constructor(i){super(i);k(this,"httpInvalidator");k(this,"observedActors");k(this,"requests",0);this.httpInvalidator=i.httpInvalidator,this.observedActors=i.observedActors,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(i,a,s){this.observedActors.includes(i.name)&&this.requests++}}return FS.ActionObserverHttp=e,FS}var MS={},ove;function gyt(){if(ove)return MS;ove=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.ActorQueryResultSerializeSparqlJson=void 0;const t=Ko(),e=ke(),r=ir(),n=Wt;let i=class NE extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o);k(this,"emitMetadata");k(this,"httpObserver");this.emitMetadata=o.emitMetadata,this.httpObserver=o.httpObserver}static bindingToJsonBindings(o){if(o.termType==="Literal"){const c=o,u={value:c.value,type:"literal"},{language:l,direction:d,datatype:f}=c;return l?(u["xml:lang"]=l,d&&(u["its:dir"]=d)):f&&f.value!=="http://www.w3.org/2001/XMLSchema#string"&&(u.datatype=f.value),u}return o.termType==="BlankNode"?{value:o.value,type:"bnode"}:o.termType==="Quad"?{value:{subject:NE.bindingToJsonBindings(o.subject),predicate:NE.bindingToJsonBindings(o.predicate),object:NE.bindingToJsonBindings(o.object)},type:"triple"}:{value:o.value,type:"uri"}}async testHandleChecked(o,c){return["bindings","boolean"].includes(o.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(o,c,u){const l=new n.Readable,d={};if(o.type==="bindings"){const f=await o.metadata();f.variables.length>0&&(d.vars=f.variables.map(h=>h.variable.value))}if(l.push(`{"head": ${JSON.stringify(d)},
`),o.type==="bindings"){const f=o.bindingsStream;l.push(`"results": { "bindings": [
`);let h=!0;function*p(_){yield _()}l.wrap((0,r.wrap)(f).map(_=>{const g=`${h?"":`,
`}${JSON.stringify(Object.fromEntries([..._].map(([m,y])=>[m.value,NE.bindingToJsonBindings(y)])))}`;return h=!1,g}).append((0,r.wrap)(p(()=>`
]}${this.emitMetadata?`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`:""}}
`))))}else l.wrap((0,r.wrap)(o.execute().then(f=>[`"boolean":${f}
}
`])));return{data:l}}};return MS.ActorQueryResultSerializeSparqlJson=i,MS}var uve;function cve(){return uve||(uve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(myt(),t),r(gyt(),t)}(Q9)),Q9}var W9={},DS={},lve;function yyt(){if(lve)return DS;lve=1,Object.defineProperty(DS,"__esModule",{value:!0}),DS.ActionObserverHttp=void 0;const t=ke();let e=class extends t.ActionObserver{constructor(i){super(i);k(this,"httpInvalidator");k(this,"observedActors");k(this,"requests",0);this.httpInvalidator=i.httpInvalidator,this.observedActors=i.observedActors,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(i,a,s){this.observedActors.includes(i.name)&&this.requests++}};return DS.ActionObserverHttp=e,DS}var CS={},dve;function byt(){if(dve)return CS;dve=1,Object.defineProperty(CS,"__esModule",{value:!0}),CS.ActorQueryResultSerializeStats=void 0;const t=Ko(),e=dt,r=ke(),n=ir(),i=Wt;let a=class extends t.ActorQueryResultSerializeFixedMediaTypes{constructor(c){super(c);k(this,"httpObserver");this.httpObserver=c.httpObserver}async testHandleChecked(c,u){return["bindings","quads"].includes(c.type)?(0,r.passTestVoid)():(0,r.failTest)("This actor can only handle bindings streams or quad streams.")}pushHeader(c){const u=["Result","Delay (ms)","HTTP requests"].join(",");c.push(`${u}
`)}createStat(c,u){return`${[u,this.delay(c),this.httpObserver.requests].join(",")}
`}createSpecialLine(c,u){return`${[c,this.delay(u),this.httpObserver.requests].join(",")}
`}async runHandle(c,u,l){const d=new i.Readable,f=c.type==="bindings"?c.bindingsStream:c.quadStream,h=c.context.getSafe(e.KeysInitQuery.queryTimestampHighResolution);let p=1;function*_(m){yield m()}const g=(0,n.wrap)(f).map(()=>this.createStat(h,p++)).prepend([this.createSpecialLine("PLANNING",h)]).append((0,n.wrap)(_(()=>this.createSpecialLine("TOTAL",h))));return this.pushHeader(d),d.wrap(g),{data:d}}now(){return performance.now()}delay(c){return this.now()-c}};return CS.ActorQueryResultSerializeStats=a,CS}var fve;function hve(){return fve||(fve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(yyt(),t),r(byt(),t)}(W9)),W9}var K9={},LS={},X9={},jS={},pve;function vyt(){if(pve)return jS;pve=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.ActorQuerySourceIdentifyHypermedia=void 0;const t=ke();class e extends t.Actor{constructor(i,a){super(i);k(this,"sourceType");this.sourceType=a}async test(i){return i.forceSourceType&&this.sourceType!==i.forceSourceType?(0,t.failTest)(`Actor ${this.name} is not able to handle source type ${i.forceSourceType}.`):this.testMetadata(i)}}return jS.ActorQuerySourceIdentifyHypermedia=e,jS}var _ve;function jQ(){return _ve||(_ve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vyt(),t)}(X9)),X9}var BS={},J9={},qS={},mve;function Ayt(){if(mve)return qS;mve=1,Object.defineProperty(qS,"__esModule",{value:!0}),qS.ActorQuerySourceIdentify=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return qS.ActorQuerySourceIdentify=e,qS}var Ls={},gve;function Tyt(){if(gve)return Ls;gve=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.quadsToBindings=a,Ls.isTermVariable=s,Ls.getVariables=o,Ls.getDuplicateElementLinks=c,Ls.setMetadata=u,Ls.quadsMetadataToBindingsMetadata=l,Ls.quadsOrderToBindingsOrder=d,Ls.filterMatchingQuotedQuads=f;const t=Df(),e=Mi(),r=Br(),n=Fi(),i=YIe();function a(h,p,_,g,m){const y=o(p),v=p.graph.termType==="Variable"&&!m,A=c(p),T=(0,n.reduceTermsNested)(p,(j,F,N)=>(F.termType==="Variable"&&(j[N.join("_")]=F.value),j),{});let S=h;v&&(S=S.filter(j=>j.graph.termType!=="DefaultGraph")),A&&(S=S.filter(j=>{for(const F in A){const N=F.split("_"),R=(0,n.getValueNestedPath)(j,N);for(const C of A[F])if(!R.equals((0,n.getValueNestedPath)(j,C)))return!1}return!0}));const P=new t.ClosableIterator(S.map(j=>g.bindings(Object.keys(T).map(F=>{const N=F.split("_"),R=T[F],C=(0,n.getValueNestedPath)(j,N);return[_.variable(R),C]}))),{onClose:()=>h.destroy()});return u(_,P,h,T,y,v||!!A),P}function s(h){return h.termType==="Variable"}function o(h){return(0,n.uniqTerms)((0,n.getTermsNested)(h).filter(s))}function c(h){const p={};let _=!1;if((0,n.forEachTermsNested)(h,(m,y)=>{if(m.termType==="Variable"){const v=(0,r.termToString)(m),A=(p[v]||(p[v]=[])).push(y);_=_||A>1}}),!_)return;const g={};for(const m in p){const y=p[m],v=y.slice(1);v.length>0&&(g[y[0].join("_")]=v)}return g}function u(h,p,_,g,m,y){const v=T=>{y&&(T.cardinality.type="estimate"),p.setProperty("metadata",l(h,(0,e.validateMetadataQuads)(T),g,m)),T.state&&T.state.addInvalidateListener(()=>{u(h,p,_,g,m,y)})},A=_.getProperty("metadata");A?v(A):_.getProperty("metadata",v)}function l(h,p,_,g){return{...p,order:p.order?d(h,p.order,_):void 0,availableOrders:p.availableOrders?p.availableOrders.map(m=>({cost:m.cost,terms:d(h,m.terms,_)})):void 0,variables:g.map(m=>({variable:m,canBeUndef:!1}))}}function d(h,p,_){const g={};return p.map(m=>{const y=_[m.term];if(y&&!g[y])return g[y]=!0,{term:h.variable(y),direction:m.direction}}).filter(Boolean)}function f(h,p){return(0,n.someTerms)(h,_=>_.termType==="Quad")&&(p=p.filter(_=>(0,i.matchPatternMappings)(_,h))),p}return Ls}var yve;function LO(){return yve||(yve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ayt(),t),r(Tyt(),t)}(J9)),J9}var bve;function S3e(){if(bve)return BS;bve=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.QuerySourceQpf=void 0;const t=LO(),e=dt,r=Ft(),n=Mi(),i=ir(),a=Br(),s=TO(),o=Fi();let c=class{constructor(d,f,h,p,_,g,m,y,v,A,T,S,P,j){k(this,"selectorShape");k(this,"searchForm");k(this,"mediatorMetadata");k(this,"mediatorMetadataExtract");k(this,"mediatorDereferenceRdf");k(this,"dataFactory");k(this,"algebraFactory");k(this,"bindingsFactory");k(this,"referenceValue");k(this,"subjectUri");k(this,"predicateUri");k(this,"objectUri");k(this,"graphUri");k(this,"url");k(this,"defaultGraph");k(this,"bindingsRestricted");k(this,"cachedQuads");if(this.referenceValue=T,this.mediatorMetadata=d,this.mediatorMetadataExtract=f,this.mediatorDereferenceRdf=h,this.dataFactory=p,this.algebraFactory=_,this.bindingsFactory=g,this.subjectUri=m,this.predicateUri=y,this.objectUri=v,this.graphUri=A,this.url=T,this.bindingsRestricted=P,this.cachedQuads={},this.searchForm=this.getSearchForm(S),this.defaultGraph=S.defaultGraph?this.dataFactory.namedNode(S.defaultGraph):void 0,j){let F=(0,i.wrap)(j);this.defaultGraph&&(F=this.reverseMapQuadsToDefaultGraph(F)),S={...S,state:new n.MetadataValidationState},F.setProperty("metadata",S),this.cacheQuads(F,this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""))}this.selectorShape=this.bindingsRestricted?{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")],filterBindings:!0}:{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")]}}async getFilterFactor(){return 1}async getSelectorShape(){return this.selectorShape}queryBindings(d,f,h){if(!(0,r.isKnownOperation)(d,r.Algebra.Types.PATTERN))throw new Error(`Attempted to pass non-pattern operation '${d.type}' to QuerySourceQpf`);const p=!!f.get(e.KeysQueryOperation.unionDefaultGraph),_=this.match(d.subject,d.predicate,d.object,d.graph,p,f,h);return(0,t.quadsToBindings)(_,d,this.dataFactory,this.bindingsFactory,p)}getSearchForm(d){if(!d.searchForms||!d.searchForms.values)return;const{searchForms:f}=d;for(const h of f.values)if(this.graphUri&&this.subjectUri in h.mappings&&this.predicateUri in h.mappings&&this.objectUri in h.mappings&&this.graphUri in h.mappings&&Object.keys(h.mappings).length===4||this.subjectUri in h.mappings&&this.predicateUri in h.mappings&&this.objectUri in h.mappings&&Object.keys(h.mappings).length===3)return h}createFragmentUri(d,f,h,p,_){const g={},m=[{uri:this.subjectUri,term:f},{uri:this.predicateUri,term:h},{uri:this.objectUri,term:p},{uri:this.graphUri,term:_}];for(const y of m)y.uri&&(this.bindingsRestricted||y.term.termType!=="Variable"&&(y.term.termType!=="Quad"||(0,o.everyTermsNested)(y.term,v=>v.termType!=="Variable")))&&(g[y.uri]=(0,a.termToString)(y.term));return d.getUri(g)}match(d,f,h,p,_,g,m){let y=!1;if(p.termType==="DefaultGraph")if(this.defaultGraph)y=!0,p=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph)if(_)p=this.dataFactory.variable("g");else{const S=new i.ArrayIterator([],{autoStart:!1});return S.setProperty("metadata",{state:new n.MetadataValidationState,requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null}),S}else p=this.dataFactory.variable("g");if(!(m!=null&&m.filterBindings)){const S=this.getCachedQuads(d,f,h,p);if(S)return S}const v=this;let A;const T=async function(){var N;let S=v.createFragmentUri(v.searchForm,d,f,h,p);m!=null&&m.filterBindings&&(S=await v.getBindingsRestrictedLink(d,f,h,p,S,m.filterBindings));const P=await v.mediatorDereferenceRdf.mediate({context:g,url:S});S=P.url;const j=await v.mediatorMetadata.mediate({context:g,url:S,quads:P.data,triples:(N=P.metadata)==null?void 0:N.triples}),{metadata:F}=await v.mediatorMetadataExtract.mediate({context:g,url:S,metadata:j.metadata,requestTime:P.requestTime});return A.setProperty("metadata",{...F,state:new n.MetadataValidationState,subsetOf:v.url}),j.data}();return A=new i.TransformIterator(async()=>{const S=await T,P=this.dataFactory.defaultGraph();let j=(0,i.wrap)(S).transform({filter(F){return(0,o.matchPattern)(F,d,f,h,p)?!0:y&&(0,o.matchPattern)(F,d,f,h,P)}});return(y||p.termType==="Variable")&&(j=this.reverseMapQuadsToDefaultGraph(j)),j},{autoStart:!1}),m!=null&&m.filterBindings?A:(this.cacheQuads(A,d,f,h,p),this.getCachedQuads(d,f,h,p))}async getBindingsRestrictedLink(d,f,h,p,_,g){const m=[];for(const v of await g.bindings.toArray()){const A=["("];for(const T of g.metadata.variables){const S=v.get(T.variable);A.push(S?(0,s.termToString)(S):"UNDEF"),A.push(" ")}A.push(")"),m.push(A.join(""))}m.length===0&&m.push("(<ex:comunica:unknown>)");const y=encodeURIComponent(`(${g.metadata.variables.map(v=>`?${v.variable.value}`).join(" ")}) { ${m.join(" ")} }`);return`${_}&values=${y}`}reverseMapQuadsToDefaultGraph(d){const f=this.dataFactory.defaultGraph();return d.map(h=>(0,o.mapTerms)(h,(p,_)=>_==="graph"&&p.equals(this.defaultGraph)?f:p))}getPatternId(d,f,h,p){return JSON.stringify({s:d.termType==="Variable"?"":u(d),p:f.termType==="Variable"?"":u(f),o:h.termType==="Variable"?"":u(h),g:p.termType==="Variable"?"":u(p)})}cacheQuads(d,f,h,p,_){const g=this.getPatternId(f,h,p,_);this.cachedQuads[g]=d.clone()}getCachedQuads(d,f,h,p){const _=this.getPatternId(d,f,h,p),g=this.cachedQuads[_];if(g)return g.clone()}queryQuads(d,f){throw new Error("queryQuads is not implemented in QuerySourceQpf")}queryBoolean(d,f){throw new Error("queryBoolean is not implemented in QuerySourceQpf")}queryVoid(d,f){throw new Error("queryVoid is not implemented in QuerySourceQpf")}};BS.QuerySourceQpf=c;function u(l){return l.termType==="DefaultGraph"?"|":(0,a.termToString)(l)}return BS}var vve;function wyt(){if(vve)return LS;vve=1,Object.defineProperty(LS,"__esModule",{value:!0}),LS.ActorQuerySourceIdentifyHypermediaQpf=void 0;const t=jQ(),e=dt,r=ke(),n=Ft(),i=ln(),a=S3e();let s=class extends t.ActorQuerySourceIdentifyHypermedia{constructor(u){super(u,"qpf");k(this,"mediatorMetadata");k(this,"mediatorMetadataExtract");k(this,"mediatorDereferenceRdf");k(this,"mediatorMergeBindingsContext");k(this,"subjectUri");k(this,"predicateUri");k(this,"objectUri");k(this,"graphUri");this.mediatorMetadata=u.mediatorMetadata,this.mediatorMetadataExtract=u.mediatorMetadataExtract,this.mediatorDereferenceRdf=u.mediatorDereferenceRdf,this.mediatorMergeBindingsContext=u.mediatorMergeBindingsContext,this.subjectUri=u.subjectUri,this.predicateUri=u.predicateUri,this.objectUri=u.objectUri,this.graphUri=u.graphUri}async test(u){return u.forceSourceType&&u.forceSourceType!=="qpf"&&u.forceSourceType!=="brtpf"?(0,r.failTest)(`Actor ${this.name} is not able to handle source type ${u.forceSourceType}.`):this.testMetadata(u)}async testMetadata(u){const{searchForm:l}=await this.createSource(u.url,u.metadata,u.context,u.forceSourceType==="brtpf");return l?u.handledDatasets&&u.handledDatasets[l.dataset]?(0,r.failTest)(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`):(0,r.passTest)({filterFactor:1}):(0,r.failTest)("Illegal state: found no TPF/QPF search form anymore in metadata.")}async run(u){this.logInfo(u.context,`Identified as qpf source: ${u.url}`);const l=await this.createSource(u.url,u.metadata,u.context,u.forceSourceType==="brtpf",u.quads);return{source:l,dataset:l.searchForm.dataset}}async createSource(u,l,d,f,h){const p=d.getSafe(e.KeysInitQuery.dataFactory),_=new n.AlgebraFactory(p);return new a.QuerySourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,p,_,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,p),this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,u,l,f,h)}};return LS.ActorQuerySourceIdentifyHypermediaQpf=s,LS}var Ave;function Syt(){return Ave||(Ave=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(wyt(),t),r(S3e(),t)}(K9)),K9}var Y9={},US={},VS={},GS={},Tve;function xyt(){var f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R,C,M,U,B,G,K,$,se,pe,we,Ce,Le,Ie,Oe,ye,Me,W,kG,le,me,Z,q,x3e,re,_e,he,Bc,qc,zG,k3,z3,en,QG,FE,Uc,WG,z;if(Tve)return GS;Tve=1,Object.defineProperty(GS,"__esModule",{value:!0}),GS.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,r=typeof process=="object"&&process?process:{},n=(V,x,O,D)=>{typeof r.emitWarning=="function"?r.emitWarning(V,x,O,D):console.error(`[${O}] ${x}: ${V}`)},i=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof i>"u"){a=class{constructor(){k(this,"onabort");k(this,"_onabort",[]);k(this,"reason");k(this,"aborted",!1)}addEventListener(O,D){this._onabort.push(D)}},i=class{constructor(){k(this,"signal",new a);x()}abort(O){var D,H;if(!this.signal.aborted){this.signal.reason=O,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(O);(H=(D=this.signal).onabort)==null||H.call(D,O)}}};let V=((f=r.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{V&&(V=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var s=V=>!e.has(V),o=V=>V&&V===Math.floor(V)&&V>0&&isFinite(V),c=V=>o(V)?V<=Math.pow(2,8)?Uint8Array:V<=Math.pow(2,16)?Uint16Array:V<=Math.pow(2,32)?Uint32Array:V<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(V){super(V),this.fill(0)}},l=(h=class{constructor(x,O){k(this,"heap");k(this,"length");if(!w(h,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new O(x),this.length=0}static create(x){let O=c(x);if(!O)return[];be(h,p,!0);let D=new h(x,O);return be(h,p,!1),D}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},p=new WeakMap,qe(h,p,!1),h),d=(z=class{constructor(x){qe(this,W);qe(this,m);qe(this,y);qe(this,v);qe(this,A);qe(this,T);qe(this,S);qe(this,P);qe(this,j);k(this,"ttl");k(this,"ttlResolution");k(this,"ttlAutopurge");k(this,"updateAgeOnGet");k(this,"updateAgeOnHas");k(this,"allowStale");k(this,"noDisposeOnSet");k(this,"noUpdateTTL");k(this,"maxEntrySize");k(this,"sizeCalculation");k(this,"noDeleteOnFetchRejection");k(this,"noDeleteOnStaleGet");k(this,"allowStaleOnFetchAbort");k(this,"allowStaleOnFetchRejection");k(this,"ignoreFetchAbort");qe(this,F);qe(this,N);qe(this,R);qe(this,C);qe(this,M);qe(this,U);qe(this,B);qe(this,G);qe(this,K);qe(this,$);qe(this,se);qe(this,pe);qe(this,we);qe(this,Ce);qe(this,Le);qe(this,Ie);qe(this,Oe);qe(this,ye);qe(this,Me);qe(this,le,()=>{});qe(this,me,()=>{});qe(this,Z,()=>{});qe(this,q,()=>!1);qe(this,re,x=>{});qe(this,_e,(x,O,D)=>{});qe(this,he,(x,O,D,H)=>{if(D||H)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});k(this,_,"LRUCache");let{max:O=0,ttl:D,ttlResolution:H=1,ttlAutopurge:Y,updateAgeOnGet:Q,updateAgeOnHas:ee,allowStale:ie,dispose:Re,onInsert:oe,disposeAfter:Te,noDisposeOnSet:We,noUpdateTTL:Qe,maxSize:Xe=0,maxEntrySize:Pe=0,sizeCalculation:He,fetchMethod:Ee,memoMethod:ce,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:ht,ignoreFetchAbort:Et,perf:rt}=x;if(rt!==void 0&&typeof(rt==null?void 0:rt.now)!="function")throw new TypeError("perf option must have a now() method if specified");if(be(this,j,rt??t),O!==0&&!o(O))throw new TypeError("max option must be a nonnegative integer");let _t=O?c(O):Array;if(!_t)throw new Error("invalid max value: "+O);if(be(this,m,O),be(this,y,Xe),this.maxEntrySize=Pe||w(this,y),this.sizeCalculation=He,this.sizeCalculation){if(!w(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ce!==void 0&&typeof ce!="function")throw new TypeError("memoMethod must be a function if defined");if(be(this,P,ce),Ee!==void 0&&typeof Ee!="function")throw new TypeError("fetchMethod must be a function if specified");if(be(this,S,Ee),be(this,Oe,!!Ee),be(this,R,new Map),be(this,C,new Array(O).fill(void 0)),be(this,M,new Array(O).fill(void 0)),be(this,U,new _t(O)),be(this,B,new _t(O)),be(this,G,0),be(this,K,0),be(this,$,l.create(O)),be(this,F,0),be(this,N,0),typeof Re=="function"&&be(this,v,Re),typeof oe=="function"&&be(this,A,oe),typeof Te=="function"?(be(this,T,Te),be(this,se,[])):(be(this,T,void 0),be(this,se,void 0)),be(this,Ie,!!w(this,v)),be(this,Me,!!w(this,A)),be(this,ye,!!w(this,T)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!Qe,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!Be,this.allowStaleOnFetchAbort=!!ht,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(w(this,y)!==0&&!o(w(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,W,x3e).call(this)}if(this.allowStale=!!ie,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!Q,this.updateAgeOnHas=!!ee,this.ttlResolution=o(H)||H===0?H:1,this.ttlAutopurge=!!Y,this.ttl=D||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,W,kG).call(this)}if(w(this,m)===0&&this.ttl===0&&w(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!w(this,m)&&!w(this,y)){let ut="LRU_CACHE_UNBOUNDED";s(ut)&&(e.add(ut),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,z))}}get perf(){return w(this,j)}static unsafeExposeInternals(x){return{starts:w(x,we),ttls:w(x,Ce),autopurgeTimers:w(x,Le),sizes:w(x,pe),keyMap:w(x,R),keyList:w(x,C),valList:w(x,M),next:w(x,U),prev:w(x,B),get head(){return w(x,G)},get tail(){return w(x,K)},free:w(x,$),isBackgroundFetch:O=>{var D;return fe(D=x,W,en).call(D,O)},backgroundFetch:(O,D,H,Y)=>{var Q;return fe(Q=x,W,z3).call(Q,O,D,H,Y)},moveToTail:O=>{var D;return fe(D=x,W,FE).call(D,O)},indexes:O=>{var D;return fe(D=x,W,Bc).call(D,O)},rindexes:O=>{var D;return fe(D=x,W,qc).call(D,O)},isStale:O=>{var D;return w(D=x,q).call(D,O)}}}get max(){return w(this,m)}get maxSize(){return w(this,y)}get calculatedSize(){return w(this,N)}get size(){return w(this,F)}get fetchMethod(){return w(this,S)}get memoMethod(){return w(this,P)}get dispose(){return w(this,v)}get onInsert(){return w(this,A)}get disposeAfter(){return w(this,T)}getRemainingTTL(x){return w(this,R).has(x)?1/0:0}*entries(){for(let x of fe(this,W,Bc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,en).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*rentries(){for(let x of fe(this,W,qc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,en).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*keys(){for(let x of fe(this,W,Bc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,en).call(this,w(this,M)[x])&&(yield O)}}*rkeys(){for(let x of fe(this,W,qc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,en).call(this,w(this,M)[x])&&(yield O)}}*values(){for(let x of fe(this,W,Bc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,en).call(this,w(this,M)[x])&&(yield w(this,M)[x])}*rvalues(){for(let x of fe(this,W,qc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,en).call(this,w(this,M)[x])&&(yield w(this,M)[x])}[(g=Symbol.iterator,_=Symbol.toStringTag,g)](){return this.entries()}find(x,O={}){for(let D of fe(this,W,Bc).call(this)){let H=w(this,M)[D],Y=fe(this,W,en).call(this,H)?H.__staleWhileFetching:H;if(Y!==void 0&&x(Y,w(this,C)[D],this))return this.get(w(this,C)[D],O)}}forEach(x,O=this){for(let D of fe(this,W,Bc).call(this)){let H=w(this,M)[D],Y=fe(this,W,en).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}rforEach(x,O=this){for(let D of fe(this,W,qc).call(this)){let H=w(this,M)[D],Y=fe(this,W,en).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}purgeStale(){let x=!1;for(let O of fe(this,W,qc).call(this,{allowStale:!0}))w(this,q).call(this,O)&&(fe(this,W,Uc).call(this,w(this,C)[O],"expire"),x=!0);return x}info(x){let O=w(this,R).get(x);if(O===void 0)return;let D=w(this,M)[O],H=fe(this,W,en).call(this,D)?D.__staleWhileFetching:D;if(H===void 0)return;let Y={value:H};if(w(this,Ce)&&w(this,we)){let Q=w(this,Ce)[O],ee=w(this,we)[O];if(Q&&ee){let ie=Q-(w(this,j).now()-ee);Y.ttl=ie,Y.start=Date.now()}}return w(this,pe)&&(Y.size=w(this,pe)[O]),Y}dump(){let x=[];for(let O of fe(this,W,Bc).call(this,{allowStale:!0})){let D=w(this,C)[O],H=w(this,M)[O],Y=fe(this,W,en).call(this,H)?H.__staleWhileFetching:H;if(Y===void 0||D===void 0)continue;let Q={value:Y};if(w(this,Ce)&&w(this,we)){Q.ttl=w(this,Ce)[O];let ee=w(this,j).now()-w(this,we)[O];Q.start=Math.floor(Date.now()-ee)}w(this,pe)&&(Q.size=w(this,pe)[O]),x.unshift([D,Q])}return x}load(x){this.clear();for(let[O,D]of x){if(D.start){let H=Date.now()-D.start;D.start=w(this,j).now()-H}this.set(O,D.value,D)}}set(x,O,D={}){var We,Qe,Xe,Pe,He,Ee,ce;if(O===void 0)return this.delete(x),this;let{ttl:H=this.ttl,start:Y,noDisposeOnSet:Q=this.noDisposeOnSet,sizeCalculation:ee=this.sizeCalculation,status:ie}=D,{noUpdateTTL:Re=this.noUpdateTTL}=D,oe=w(this,he).call(this,x,O,D.size||0,ee);if(this.maxEntrySize&&oe>this.maxEntrySize)return ie&&(ie.set="miss",ie.maxEntrySizeExceeded=!0),fe(this,W,Uc).call(this,x,"set"),this;let Te=w(this,F)===0?void 0:w(this,R).get(x);if(Te===void 0)Te=w(this,F)===0?w(this,K):w(this,$).length!==0?w(this,$).pop():w(this,F)===w(this,m)?fe(this,W,k3).call(this,!1):w(this,F),w(this,C)[Te]=x,w(this,M)[Te]=O,w(this,R).set(x,Te),w(this,U)[w(this,K)]=Te,w(this,B)[Te]=w(this,K),be(this,K,Te),vn(this,F)._++,w(this,_e).call(this,Te,oe,ie),ie&&(ie.set="add"),Re=!1,w(this,Me)&&((We=w(this,A))==null||We.call(this,O,x,"add"));else{fe(this,W,FE).call(this,Te);let ne=w(this,M)[Te];if(O!==ne){if(w(this,Oe)&&fe(this,W,en).call(this,ne)){ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=ne;xe!==void 0&&!Q&&(w(this,Ie)&&((Qe=w(this,v))==null||Qe.call(this,xe,x,"set")),w(this,ye)&&((Xe=w(this,se))==null||Xe.push([xe,x,"set"])))}else Q||(w(this,Ie)&&((Pe=w(this,v))==null||Pe.call(this,ne,x,"set")),w(this,ye)&&((He=w(this,se))==null||He.push([ne,x,"set"])));if(w(this,re).call(this,Te),w(this,_e).call(this,Te,oe,ie),w(this,M)[Te]=O,ie){ie.set="replace";let xe=ne&&fe(this,W,en).call(this,ne)?ne.__staleWhileFetching:ne;xe!==void 0&&(ie.oldValue=xe)}}else ie&&(ie.set="update");w(this,Me)&&((Ee=this.onInsert)==null||Ee.call(this,O,x,O===ne?"update":"replace"))}if(H!==0&&!w(this,Ce)&&fe(this,W,kG).call(this),w(this,Ce)&&(Re||w(this,Z).call(this,Te,H,Y),ie&&w(this,me).call(this,ie,Te)),!Q&&w(this,ye)&&w(this,se)){let ne=w(this,se),xe;for(;xe=ne==null?void 0:ne.shift();)(ce=w(this,T))==null||ce.call(this,...xe)}return this}pop(){var x;try{for(;w(this,F);){let O=w(this,M)[w(this,G)];if(fe(this,W,k3).call(this,!0),fe(this,W,en).call(this,O)){if(O.__staleWhileFetching)return O.__staleWhileFetching}else if(O!==void 0)return O}}finally{if(w(this,ye)&&w(this,se)){let O=w(this,se),D;for(;D=O==null?void 0:O.shift();)(x=w(this,T))==null||x.call(this,...D)}}}has(x,O={}){let{updateAgeOnHas:D=this.updateAgeOnHas,status:H}=O,Y=w(this,R).get(x);if(Y!==void 0){let Q=w(this,M)[Y];if(fe(this,W,en).call(this,Q)&&Q.__staleWhileFetching===void 0)return!1;if(w(this,q).call(this,Y))H&&(H.has="stale",w(this,me).call(this,H,Y));else return D&&w(this,le).call(this,Y),H&&(H.has="hit",w(this,me).call(this,H,Y)),!0}else H&&(H.has="miss");return!1}peek(x,O={}){let{allowStale:D=this.allowStale}=O,H=w(this,R).get(x);if(H===void 0||!D&&w(this,q).call(this,H))return;let Y=w(this,M)[H];return fe(this,W,en).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:Q=this.ttl,noDisposeOnSet:ee=this.noDisposeOnSet,size:ie=0,sizeCalculation:Re=this.sizeCalculation,noUpdateTTL:oe=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:We=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:Pe,forceRefresh:He=!1,status:Ee,signal:ce}=O;if(!w(this,Oe))return Ee&&(Ee.fetch="get"),this.get(x,{allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,status:Ee});let ne={allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,ttl:Q,noDisposeOnSet:ee,size:ie,sizeCalculation:Re,noUpdateTTL:oe,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:We,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ee,signal:ce},xe=w(this,R).get(x);if(xe===void 0){Ee&&(Ee.fetch="miss");let Be=fe(this,W,z3).call(this,x,xe,ne,Pe);return Be.__returned=Be}else{let Be=w(this,M)[xe];if(fe(this,W,en).call(this,Be)){let _t=D&&Be.__staleWhileFetching!==void 0;return Ee&&(Ee.fetch="inflight",_t&&(Ee.returnedStale=!0)),_t?Be.__staleWhileFetching:Be.__returned=Be}let ht=w(this,q).call(this,xe);if(!He&&!ht)return Ee&&(Ee.fetch="hit"),fe(this,W,FE).call(this,xe),H&&w(this,le).call(this,xe),Ee&&w(this,me).call(this,Ee,xe),Be;let Et=fe(this,W,z3).call(this,x,xe,ne,Pe),rt=Et.__staleWhileFetching!==void 0&&D;return Ee&&(Ee.fetch=ht?"stale":"refresh",rt&&ht&&(Ee.returnedStale=!0)),rt?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(x,O={}){let D=await this.fetch(x,O);if(D===void 0)throw new Error("fetch() returned undefined");return D}memo(x,O={}){let D=w(this,P);if(!D)throw new Error("no memoMethod provided to constructor");let{context:H,forceRefresh:Y,...Q}=O,ee=this.get(x,Q);if(!Y&&ee!==void 0)return ee;let ie=D(x,ee,{options:Q,context:H});return this.set(x,ie,Q),ie}get(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:Q}=O,ee=w(this,R).get(x);if(ee!==void 0){let ie=w(this,M)[ee],Re=fe(this,W,en).call(this,ie);return Q&&w(this,me).call(this,Q,ee),w(this,q).call(this,ee)?(Q&&(Q.get="stale"),Re?(Q&&D&&ie.__staleWhileFetching!==void 0&&(Q.returnedStale=!0),D?ie.__staleWhileFetching:void 0):(Y||fe(this,W,Uc).call(this,x,"expire"),Q&&D&&(Q.returnedStale=!0),D?ie:void 0)):(Q&&(Q.get="hit"),Re?ie.__staleWhileFetching:(fe(this,W,FE).call(this,ee),H&&w(this,le).call(this,ee),ie))}else Q&&(Q.get="miss")}delete(x){return fe(this,W,Uc).call(this,x,"delete")}clear(){return fe(this,W,WG).call(this,"delete")}},m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,j=new WeakMap,F=new WeakMap,N=new WeakMap,R=new WeakMap,C=new WeakMap,M=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,K=new WeakMap,$=new WeakMap,se=new WeakMap,pe=new WeakMap,we=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Me=new WeakMap,W=new WeakSet,kG=function(){let x=new u(w(this,m)),O=new u(w(this,m));be(this,Ce,x),be(this,we,O);let D=this.ttlAutopurge?new Array(w(this,m)):void 0;be(this,Le,D),be(this,Z,(Q,ee,ie=w(this,j).now())=>{if(O[Q]=ee!==0?ie:0,x[Q]=ee,D!=null&&D[Q]&&(clearTimeout(D[Q]),D[Q]=void 0),ee!==0&&D){let Re=setTimeout(()=>{w(this,q).call(this,Q)&&fe(this,W,Uc).call(this,w(this,C)[Q],"expire")},ee+1);Re.unref&&Re.unref(),D[Q]=Re}}),be(this,le,Q=>{O[Q]=x[Q]!==0?w(this,j).now():0}),be(this,me,(Q,ee)=>{if(x[ee]){let ie=x[ee],Re=O[ee];if(!ie||!Re)return;Q.ttl=ie,Q.start=Re,Q.now=H||Y();let oe=Q.now-Re;Q.remainingTTL=ie-oe}});let H=0,Y=()=>{let Q=w(this,j).now();if(this.ttlResolution>0){H=Q;let ee=setTimeout(()=>H=0,this.ttlResolution);ee.unref&&ee.unref()}return Q};this.getRemainingTTL=Q=>{let ee=w(this,R).get(Q);if(ee===void 0)return 0;let ie=x[ee],Re=O[ee];if(!ie||!Re)return 1/0;let oe=(H||Y())-Re;return ie-oe},be(this,q,Q=>{let ee=O[Q],ie=x[Q];return!!ie&&!!ee&&(H||Y())-ee>ie})},le=new WeakMap,me=new WeakMap,Z=new WeakMap,q=new WeakMap,x3e=function(){let x=new u(w(this,m));be(this,N,0),be(this,pe,x),be(this,re,O=>{be(this,N,w(this,N)-x[O]),x[O]=0}),be(this,he,(O,D,H,Y)=>{if(fe(this,W,en).call(this,D))return 0;if(!o(H))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(H=Y(D,O),!o(H))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return H}),be(this,_e,(O,D,H)=>{if(x[O]=D,w(this,y)){let Y=w(this,y)-x[O];for(;w(this,N)>Y;)fe(this,W,k3).call(this,!0)}be(this,N,w(this,N)+x[O]),H&&(H.entrySize=D,H.totalCalculatedSize=w(this,N))})},re=new WeakMap,_e=new WeakMap,he=new WeakMap,Bc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,K);!(!fe(this,W,zG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,G)));)O=w(this,B)[O]},qc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,G);!(!fe(this,W,zG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,K)));)O=w(this,U)[O]},zG=function(x){return x!==void 0&&w(this,R).get(w(this,C)[x])===x},k3=function(x){var Y,Q,ee;let O=w(this,G),D=w(this,C)[O],H=w(this,M)[O];return w(this,Oe)&&fe(this,W,en).call(this,H)?H.__abortController.abort(new Error("evicted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Y=w(this,v))==null||Y.call(this,H,D,"evict")),w(this,ye)&&((Q=w(this,se))==null||Q.push([H,D,"evict"]))),w(this,re).call(this,O),(ee=w(this,Le))!=null&&ee[O]&&(clearTimeout(w(this,Le)[O]),w(this,Le)[O]=void 0),x&&(w(this,C)[O]=void 0,w(this,M)[O]=void 0,w(this,$).push(O)),w(this,F)===1?(be(this,G,be(this,K,0)),w(this,$).length=0):be(this,G,w(this,U)[O]),w(this,R).delete(D),vn(this,F)._--,O},z3=function(x,O,D,H){let Y=O===void 0?void 0:w(this,M)[O];if(fe(this,W,en).call(this,Y))return Y;let Q=new i,{signal:ee}=D;ee==null||ee.addEventListener("abort",()=>Q.abort(ee.reason),{signal:Q.signal});let ie={signal:Q.signal,options:D,context:H},Re=(Pe,He=!1)=>{let{aborted:Ee}=Q.signal,ce=D.ignoreFetchAbort&&Pe!==void 0,ne=D.ignoreFetchAbort||!!(D.allowStaleOnFetchAbort&&Pe!==void 0);if(D.status&&(Ee&&!He?(D.status.fetchAborted=!0,D.status.fetchError=Q.signal.reason,ce&&(D.status.fetchAbortIgnored=!0)):D.status.fetchResolved=!0),Ee&&!ce&&!He)return Te(Q.signal.reason,ne);let xe=Qe,Be=w(this,M)[O];return(Be===Qe||ce&&He&&Be===void 0)&&(Pe===void 0?xe.__staleWhileFetching!==void 0?w(this,M)[O]=xe.__staleWhileFetching:fe(this,W,Uc).call(this,x,"fetch"):(D.status&&(D.status.fetchUpdated=!0),this.set(x,Pe,ie.options))),Pe},oe=Pe=>(D.status&&(D.status.fetchRejected=!0,D.status.fetchError=Pe),Te(Pe,!1)),Te=(Pe,He)=>{let{aborted:Ee}=Q.signal,ce=Ee&&D.allowStaleOnFetchAbort,ne=ce||D.allowStaleOnFetchRejection,xe=ne||D.noDeleteOnFetchRejection,Be=Qe;if(w(this,M)[O]===Qe&&(!xe||!He&&Be.__staleWhileFetching===void 0?fe(this,W,Uc).call(this,x,"fetch"):ce||(w(this,M)[O]=Be.__staleWhileFetching)),ne)return D.status&&Be.__staleWhileFetching!==void 0&&(D.status.returnedStale=!0),Be.__staleWhileFetching;if(Be.__returned===Be)throw Pe},We=(Pe,He)=>{var ce;let Ee=(ce=w(this,S))==null?void 0:ce.call(this,x,Y,ie);Ee&&Ee instanceof Promise&&Ee.then(ne=>Pe(ne===void 0?void 0:ne),He),Q.signal.addEventListener("abort",()=>{(!D.ignoreFetchAbort||D.allowStaleOnFetchAbort)&&(Pe(void 0),D.allowStaleOnFetchAbort&&(Pe=ne=>Re(ne,!0)))})};D.status&&(D.status.fetchDispatched=!0);let Qe=new Promise(We).then(Re,oe),Xe=Object.assign(Qe,{__abortController:Q,__staleWhileFetching:Y,__returned:void 0});return O===void 0?(this.set(x,Xe,{...ie.options,status:void 0}),O=w(this,R).get(x)):w(this,M)[O]=Xe,Xe},en=function(x){if(!w(this,Oe))return!1;let O=x;return!!O&&O instanceof Promise&&O.hasOwnProperty("__staleWhileFetching")&&O.__abortController instanceof i},QG=function(x,O){w(this,B)[O]=x,w(this,U)[x]=O},FE=function(x){x!==w(this,K)&&(x===w(this,G)?be(this,G,w(this,U)[x]):fe(this,W,QG).call(this,w(this,B)[x],w(this,U)[x]),fe(this,W,QG).call(this,w(this,K),x),be(this,K,x))},Uc=function(x,O){var H,Y,Q,ee,ie,Re;let D=!1;if(w(this,F)!==0){let oe=w(this,R).get(x);if(oe!==void 0)if((H=w(this,Le))!=null&&H[oe]&&(clearTimeout((Y=w(this,Le))==null?void 0:Y[oe]),w(this,Le)[oe]=void 0),D=!0,w(this,F)===1)fe(this,W,WG).call(this,O);else{w(this,re).call(this,oe);let Te=w(this,M)[oe];if(fe(this,W,en).call(this,Te)?Te.__abortController.abort(new Error("deleted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Q=w(this,v))==null||Q.call(this,Te,x,O)),w(this,ye)&&((ee=w(this,se))==null||ee.push([Te,x,O]))),w(this,R).delete(x),w(this,C)[oe]=void 0,w(this,M)[oe]=void 0,oe===w(this,K))be(this,K,w(this,B)[oe]);else if(oe===w(this,G))be(this,G,w(this,U)[oe]);else{let We=w(this,B)[oe];w(this,U)[We]=w(this,U)[oe];let Qe=w(this,U)[oe];w(this,B)[Qe]=w(this,B)[oe]}vn(this,F)._--,w(this,$).push(oe)}}if(w(this,ye)&&((ie=w(this,se))!=null&&ie.length)){let oe=w(this,se),Te;for(;Te=oe==null?void 0:oe.shift();)(Re=w(this,T))==null||Re.call(this,...Te)}return D},WG=function(x){var O,D,H,Y;for(let Q of fe(this,W,qc).call(this,{allowStale:!0})){let ee=w(this,M)[Q];if(fe(this,W,en).call(this,ee))ee.__abortController.abort(new Error("deleted"));else{let ie=w(this,C)[Q];w(this,Ie)&&((O=w(this,v))==null||O.call(this,ee,ie,x)),w(this,ye)&&((D=w(this,se))==null||D.push([ee,ie,x]))}}if(w(this,R).clear(),w(this,M).fill(void 0),w(this,C).fill(void 0),w(this,Ce)&&w(this,we)){w(this,Ce).fill(0),w(this,we).fill(0);for(let Q of w(this,Le)??[])Q!==void 0&&clearTimeout(Q);(H=w(this,Le))==null||H.fill(void 0)}if(w(this,pe)&&w(this,pe).fill(0),be(this,G,0),be(this,K,0),w(this,$).length=0,be(this,N,0),be(this,F,0),w(this,ye)&&w(this,se)){let Q=w(this,se),ee;for(;ee=Q==null?void 0:Q.shift();)(Y=w(this,T))==null||Y.call(this,...ee)}},z);return GS.LRUCache=d,GS}var wve;function E3e(){if(wve)return VS;wve=1,Object.defineProperty(VS,"__esModule",{value:!0}),VS.QuerySourceSparql=void 0;const t=dt,e=ke(),r=Ft(),n=Mi(),i=rr(),a=ir(),s=XPe(),o=xyt(),c=Fi();let u=class Q3{constructor(d,f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R){k(this,"referenceValue");k(this,"url");k(this,"urlBackup");k(this,"context");k(this,"mediatorHttp");k(this,"mediatorQuerySerialize");k(this,"bindMethod");k(this,"countTimeout");k(this,"cardinalityCountQueries");k(this,"cardinalityEstimateConstruction");k(this,"defaultGraph");k(this,"unionDefaultGraph");k(this,"propertyFeatures");k(this,"datasets");k(this,"extensionFunctions");k(this,"dataFactory");k(this,"algebraFactory");k(this,"bindingsFactory");k(this,"endpointFetcher");k(this,"cache");k(this,"lastSourceContext");this.referenceValue=f,this.url=d,this.urlBackup=f,this.context=h,this.mediatorHttp=p,this.mediatorQuerySerialize=_,this.bindMethod=g,this.dataFactory=m,this.algebraFactory=y,this.bindingsFactory=v,this.endpointFetcher=new s.SparqlEndpointFetcher({method:A?"GET":"POST",fetch:async(C,M)=>{var B;const U=await this.mediatorHttp.mediate({input:C,init:M,context:this.lastSourceContext});return U.status===404&&this.url!==this.urlBackup?((B=e.Actor.getContextLogger(this.context))==null||B.warn(`Encountered a 404 when requesting ${this.url} according to the service description of ${this.urlBackup}. This is a server configuration issue. Retrying the current and modifying future requests to ${this.urlBackup} instead.`),C=C.replace(this.url,this.urlBackup),this.url=this.urlBackup,await this.mediatorHttp.mediate({input:C,init:M,context:this.lastSourceContext})):U},prefixVariableQuestionMark:!0,dataFactory:m,forceGetIfUrlLengthBelow:F,directPost:R.postAccepted&&!R.postAccepted.includes("application/x-www-form-urlencoded"),parseUnsupportedVersions:N}),this.cache=T>0?new o.LRUCache({max:T}):void 0,this.countTimeout=S,this.cardinalityCountQueries=P,this.cardinalityEstimateConstruction=j,this.defaultGraph=R.defaultGraph,this.unionDefaultGraph=R.unionDefaultGraph??!1,this.datasets=R.datasets,this.extensionFunctions=R.extensionFunctions,this.propertyFeatures=R.propertyFeatures?new Set(R.propertyFeatures):void 0}async getFilterFactor(){return 1}async getSelectorShape(){const d={type:"disjunction",children:[{type:"operation",operation:{operationType:"wildcard"},joinBindings:!0}]};return this.extensionFunctions&&d.children.push({type:"operation",operation:{operationType:"type",type:r.Algebra.Types.EXPRESSION,extensionFunctions:this.extensionFunctions},joinBindings:!0}),{type:"conjunction",children:[d,{type:"negation",child:{type:"operation",operation:{operationType:"type",type:r.Algebra.Types.DISTINCT},children:[{type:"operation",operation:{operationType:"type",type:r.Algebra.Types.CONSTRUCT},children:[{type:"operation",operation:{operationType:"wildcard"},joinBindings:!0}]}]}}]}}queryBindings(d,f,h){let p;h!=null&&h.joinBindings?p=Q3.addBindingsToOperation(this.algebraFactory,this.bindMethod,d,h.joinBindings):p=Promise.resolve(d);const _=new a.TransformIterator(async()=>{const g=await p,m=r.algebraUtils.inScopeVariables(g),y=f.get(t.KeysInitQuery.queryString),v=f.getSafe(t.KeysInitQuery.queryFormat),A=!(h!=null&&h.joinBindings)&&y&&v.language==="sparql"?y:await this.operationToSelectQuery(this.algebraFactory,g,m),T=Q3.getOperationUndefs(g);return this.queryBindingsRemote(this.url,A,m,f,T)},{autoStart:!1});return this.attachMetadata(_,f,p),_}queryQuads(d,f){const h=(0,a.wrap)((async()=>{this.lastSourceContext=this.context.merge(f);const p=f.get(t.KeysInitQuery.queryString)??await this.operationToQuery(d);return await this.endpointFetcher.fetchTriples(this.url,p)})(),{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY});return this.attachMetadata(h,f,Promise.resolve(d.input)),h}async queryBoolean(d,f){if(this.operationUsesPropertyFeatures(d))return!0;this.lastSourceContext=this.context.merge(f);const h=f.get(t.KeysInitQuery.queryString)??await this.operationToQuery(d);return this.endpointFetcher.fetchAsk(this.url,h)}async queryVoid(d,f){this.lastSourceContext=this.context.merge(f);const h=f.get(t.KeysInitQuery.queryString)??await this.operationToQuery(d);return this.endpointFetcher.fetchUpdate(this.url,h)}attachMetadata(d,f,h){let p=[];new Promise(async(_,g)=>{var m,y;try{const v=await h,A=r.algebraUtils.inScopeVariables(v),T=await this.operationToNormalizedCountQuery(v),S=Q3.getOperationUndefs(v);p=A.map(R=>({variable:R,canBeUndef:S.some(C=>C.equals(R))}));const P=(m=this.cache)==null?void 0:m.get(T);if(P)return _(P);if(this.cardinalityEstimateConstruction){const R=await this.estimateOperationCardinality(v);if(Number.isFinite(R.value))return(y=this.cache)==null||y.set(T,R),_(R)}if(!this.cardinalityCountQueries)return _({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url});const j=setTimeout(()=>_({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url}),this.countTimeout),F=this.dataFactory.variable("count");(await this.queryBindingsRemote(this.url,T,[F],f,[])).on("data",R=>{var U;clearTimeout(j);const C=R.get(F),M={type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url};if(C){const B=Number.parseInt(C.value,10);Number.isNaN(B)||(M.type="exact",M.value=B,(U=this.cache)==null||U.set(T,M))}return _(M)}).on("error",()=>{clearTimeout(j),_({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})}).on("end",()=>{clearTimeout(j),_({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})})}catch(v){g(v)}}).then(_=>d.setProperty("metadata",{state:new n.MetadataValidationState,cardinality:_,variables:p})).catch(()=>d.setProperty("metadata",{state:new n.MetadataValidationState,cardinality:{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url},variables:p}))}async operationToNormalizedCountQuery(d){const f=(0,r.isKnownOperation)(d,r.Algebra.Types.PATTERN)?this.algebraFactory.createPattern(d.subject.termType==="Variable"?this.dataFactory.variable("s"):d.subject,d.predicate.termType==="Variable"?this.dataFactory.variable("p"):d.predicate,d.object.termType==="Variable"?this.dataFactory.variable("o"):d.object):d;return await this.operationToCountQuery(this.dataFactory,this.algebraFactory,f)}async estimateOperationCardinality(d){if(this.operationUsesPropertyFeatures(d))return{type:"estimate",value:1,dataset:this.url};const f={getCardinality:async h=>{var g;const p=await this.operationToNormalizedCountQuery(h),_=(g=this.cache)==null?void 0:g.get(p);if(_)return _;if(this.datasets){const m=await Promise.all(this.datasets.filter(v=>this.unionDefaultGraph||this.defaultGraph&&v.uri.endsWith(this.defaultGraph)).map(v=>(0,i.estimateCardinality)(h,v)));return{type:m.some(v=>v.type==="estimate")?"estimate":"exact",value:m.length>0?m.reduce((v,A)=>v+A.value,0):0,dataset:this.url}}},source:this.url,uri:this.url};return(0,i.estimateCardinality)(d,f)}operationUsesPropertyFeatures(d){let f=!1;return this.propertyFeatures&&r.algebraUtils.visitOperation(d,{[r.Algebra.Types.PATTERN]:{visitor:h=>(h.predicate.termType==="NamedNode"&&this.propertyFeatures.has(h.predicate.value)&&(f=!0),!1)},[r.Algebra.Types.LINK]:{visitor:h=>(this.propertyFeatures.has(h.iri.value)&&(f=!0),!1)},[r.Algebra.Types.NPS]:{visitor:h=>(h.iris.some(p=>this.propertyFeatures.has(p.value))&&(f=!0),!1)}}),f}static async addBindingsToOperation(d,f,h,p){const _=await p.bindings.toArray();switch(f){case"values":return d.createJoin([d.createValues(p.metadata.variables.map(g=>g.variable),_.map(g=>Object.fromEntries([...g].map(([m,y])=>[m.value,y])))),h],!1);case"union":throw new Error('Not implemented yet: "union" case');case"filter":throw new Error('Not implemented yet: "filter" case')}}operationToSelectQuery(d,f,h){return this.operationToQuery(d.createProject(f,h))}operationToCountQuery(d,f,h){return this.operationToQuery(f.createProject(f.createExtend(f.createGroup(h,[],[f.createBoundAggregate(d.variable("var0"),"count",f.createWildcardExpression(),!1)]),d.variable("count"),f.createTermExpression(d.variable("var0"))),[d.variable("count")]))}async operationToQuery(d){return(await this.mediatorQuerySerialize.mediate({queryFormat:{language:"sparql",version:"1.2"},operation:d,newlines:!1,indentWidth:0,context:this.context})).query}static getOperationUndefs(d){const f=[];return r.algebraUtils.visitOperation(d,{[r.Algebra.Types.LEFT_JOIN]:{preVisitor:h=>{const p=r.algebraUtils.inScopeVariables(h.input[0]),_=r.algebraUtils.inScopeVariables(h.input[1]);for(const g of _)p.some(m=>m.equals(g))||f.push(g);return{continue:!1}}},[r.Algebra.Types.VALUES]:{preVisitor:h=>{for(const p of h.variables)h.bindings.some(_=>!(p.value in _))&&f.push(p);return{continue:!1}}},[r.Algebra.Types.UNION]:{preVisitor:h=>{const p=h.input.map(_=>r.algebraUtils.inScopeVariables(_));for(const _ of(0,c.uniqTerms)(p.flat()))p.every(g=>g.some(m=>m.equals(_)))||f.push(_);return{}}}}),(0,c.uniqTerms)(f)}async queryBindingsRemote(d,f,h,p,_){const g=new Set(_.map(v=>v.value));this.lastSourceContext=this.context.merge(p);const m=await this.endpointFetcher.fetchBindings(d,f);return(0,a.wrap)(m,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(v=>{const A=h.map(T=>{var P;const S=v[`?${T.value}`];return!g.has(T.value)&&!S&&((P=e.Actor.getContextLogger(this.context))==null||P.warn(`The endpoint ${d} failed to provide a binding for ${T.value}.`)),[T,S]}).filter(([T,S])=>!!S);return this.bindingsFactory.bindings(A)})}toString(){return`QuerySourceSparql(${this.url})`}};return VS.QuerySourceSparql=u,VS}var Sve;function Eyt(){if(Sve)return US;Sve=1,Object.defineProperty(US,"__esModule",{value:!0}),US.ActorQuerySourceIdentifyHypermediaSparql=void 0;const t=jQ(),e=dt,r=ke(),n=Ft(),i=ln(),a=E3e();let s=class extends t.ActorQuerySourceIdentifyHypermedia{constructor(u){super(u,"sparql");k(this,"mediatorHttp");k(this,"mediatorMergeBindingsContext");k(this,"mediatorQuerySerialize");k(this,"checkUrlSuffix");k(this,"forceHttpGet");k(this,"cacheSize");k(this,"forceSourceType");k(this,"bindMethod");k(this,"countTimeout");k(this,"cardinalityCountQueries");k(this,"cardinalityEstimateConstruction");k(this,"forceGetIfUrlLengthBelow");this.mediatorHttp=u.mediatorHttp,this.mediatorMergeBindingsContext=u.mediatorMergeBindingsContext,this.mediatorQuerySerialize=u.mediatorQuerySerialize,this.checkUrlSuffix=u.checkUrlSuffix,this.forceHttpGet=u.forceHttpGet,this.cacheSize=u.cacheSize,this.forceSourceType=!!u.forceSourceType,this.bindMethod=u.bindMethod,this.countTimeout=u.countTimeout,this.cardinalityCountQueries=u.cardinalityCountQueries,this.cardinalityEstimateConstruction=u.cardinalityEstimateConstruction,this.forceGetIfUrlLengthBelow=u.forceGetIfUrlLengthBelow}async testMetadata(u){return!u.forceSourceType&&!this.forceSourceType&&!u.metadata.sparqlService&&!(this.checkUrlSuffix&&(u.url.endsWith("/sparql")||u.url.endsWith("/sparql/")))?(0,r.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`):(0,r.passTest)({filterFactor:1})}async run(u){var p;this.logInfo(u.context,`Identified ${u.url} as sparql source with service URL: ${u.metadata.sparqlService||u.url}`);const l=u.context.getSafe(e.KeysInitQuery.dataFactory),d=new n.AlgebraFactory(l),f=((p=u.context.get(e.KeysQueryOperation.querySources))==null?void 0:p.length)===1;return{source:new a.QuerySourceSparql(u.forceSourceType??this.forceSourceType?u.url:u.metadata.sparqlService||u.url,u.url,u.context,this.mediatorHttp,this.mediatorQuerySerialize,this.bindMethod,l,d,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,u.context,l),this.forceHttpGet,this.cacheSize,this.countTimeout,this.cardinalityCountQueries&&!f,this.cardinalityEstimateConstruction,this.forceGetIfUrlLengthBelow,!!u.context.get(e.KeysInitQuery.parseUnsupportedVersions),u.metadata)}}};return US.ActorQuerySourceIdentifyHypermediaSparql=s,US}var xve;function Iyt(){return xve||(xve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Eyt(),t),r(E3e(),t)}(Y9)),Y9}var $9={},HS={},Z9={},kS={},zS={},Eve;function I3e(){if(Eve)return zS;Eve=1,Object.defineProperty(zS,"__esModule",{value:!0}),zS.QuerySourceRdfJs=void 0;const t=LO(),e=dt,r=Ft(),n=Mi(),i=ir(),a=Fi();let s=class sa{constructor(c,u,l){k(this,"selectorShape");k(this,"referenceValue");k(this,"source");k(this,"dataFactory");k(this,"bindingsFactory");k(this,"dummyDefaultGraph");this.source=c,this.referenceValue=c,this.dataFactory=u,this.bindingsFactory=l;const d=new r.AlgebraFactory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:d.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(c,u){return!c||c.termType==="Variable"||!u&&c.termType==="Quad"&&(0,a.someTermsNested)(c,l=>l.termType==="Variable")?void 0:c}static hasDuplicateVariables(c){const u=(0,a.filterTermsNested)(c,l=>l.termType==="Variable");return u.length>1&&(0,a.uniqTerms)(u).length<u.length}async getSelectorShape(){return this.selectorShape}async getFilterFactor(){return 0}queryBindings(c,u){var p;if(!(0,r.isKnownOperation)(c,r.Algebra.Types.PATTERN))throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceRdfJs`);const l=!!u.get(e.KeysQueryOperation.unionDefaultGraph);if(c.graph.termType==="DefaultGraph"&&l&&(c.graph=this.dummyDefaultGraph),"matchBindings"in this.source&&this.source.matchBindings){const _=this.source.matchBindings(this.bindingsFactory,c.subject,c.predicate,c.object,c.graph);let g=_ instanceof i.AsyncIterator?_:(0,i.wrap)(_,{autoStart:!1}),m=!1;if(c.graph.termType==="Variable"&&!l){m=!0;const y=c.graph;g=g.filter(v=>v.get(y).termType!=="DefaultGraph")}if(c.graph.equals(this.dummyDefaultGraph)&&(g=g.map(y=>y.delete(this.dummyDefaultGraph)),c.graph=this.dataFactory.defaultGraph()),!g.getProperty("metadata")){const y=(0,t.getVariables)(c).map(v=>({variable:v,canBeUndef:!1}));this.setMetadata(g,c,u,m,{variables:y}).catch(v=>g.destroy(v))}return g}const d=!!("features"in this.source&&((p=this.source.features)!=null&&p.quotedTripleFiltering)),f=this.source.match(sa.nullifyVariables(c.subject,d),sa.nullifyVariables(c.predicate,d),sa.nullifyVariables(c.object,d),sa.nullifyVariables(c.graph,d));let h=f instanceof i.AsyncIterator?f:(0,i.wrap)(f,{autoStart:!1});return d||(h=(0,t.filterMatchingQuotedQuads)(c,h)),h.getProperty("metadata")||this.setMetadata(h,c,u).catch(_=>h.destroy(_)),c.graph.equals(this.dummyDefaultGraph)&&(c.graph=this.dataFactory.defaultGraph()),(0,t.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,!!u.get(e.KeysQueryOperation.unionDefaultGraph))}async setMetadata(c,u,l,d=!1,f={}){var m;const h=!!("features"in this.source&&((m=this.source.features)!=null&&m.quotedTripleFiltering)),p=!!l.get(e.KeysQueryOperation.unionDefaultGraph);u.graph.termType==="DefaultGraph"&&p&&(u.graph=this.dummyDefaultGraph);let _;if("countQuads"in this.source&&this.source.countQuads)_=await this.source.countQuads(sa.nullifyVariables(u.subject,h),sa.nullifyVariables(u.predicate,h),sa.nullifyVariables(u.object,h),sa.nullifyVariables(u.graph,h));else{let y=0;_=await new Promise((v,A)=>{let T=this.source.match(sa.nullifyVariables(u.subject,h),sa.nullifyVariables(u.predicate,h),sa.nullifyVariables(u.object,h),sa.nullifyVariables(u.graph,h));typeof T.on!="function"&&(T=new i.ArrayIterator(T)),T.on("error",A),T.on("end",()=>v(y)),T.on("data",()=>y++)})}const g=!h&&(0,a.someTerms)(u,y=>y.termType==="Quad")||sa.hasDuplicateVariables(u);c.setProperty("metadata",{state:new n.MetadataValidationState,cardinality:{type:g||d?"estimate":"exact",value:_},requestTime:0,...f})}queryQuads(c,u){if((0,r.isKnownOperation)(c,r.Algebra.Types.PATTERN))return(0,i.wrap)(this.source.match(c.subject,c.predicate,c.object,c.graph),{autoStart:!1});throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(c,u){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(c,u){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return zS.QuerySourceRdfJs=s,zS}var Ive;function Oyt(){if(Ive)return kS;Ive=1,Object.defineProperty(kS,"__esModule",{value:!0}),kS.ActorQuerySourceIdentifyRdfJs=void 0;const t=LO(),e=dt,r=ke(),n=ln(),i=I3e();let a=class extends t.ActorQuerySourceIdentify{constructor(c){super(c);k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=c.mediatorMergeBindingsContext}async test(c){const u=c.querySourceUnidentified;return u.type!==void 0&&u.type!=="rdfjs"?(0,r.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof u.value=="string"||!("match"in u.value)?(0,r.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,r.passTestVoid)()}async run(c){const u=c.context.getSafe(e.KeysInitQuery.dataFactory);return{querySource:{source:new i.QuerySourceRdfJs(c.querySourceUnidentified.value,u,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,u)),context:c.querySourceUnidentified.context??new r.ActionContext}}}};return kS.ActorQuerySourceIdentifyRdfJs=a,kS}var eU={},Ove;function Ryt(){return Ove||(Ove=1,Object.defineProperty(eU,"__esModule",{value:!0})),eU}var Rve;function O3e(){return Rve||(Rve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Oyt(),t),r(Ryt(),t),r(I3e(),t)}(Z9)),Z9}var HP={},tU={},QS={},WS={},KS={},Pve;function R3e(){if(Pve)return KS;Pve=1,Object.defineProperty(KS,"__esModule",{value:!0}),KS.TermDictionaryNumberRecordFullTerms=void 0;const t=jr(),e=Br();let r=class{constructor(i=new t.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=i}encode(i){const a=(0,e.termToString)(i);let s=this.dictionary[a];return s===void 0&&(s=this.lastId++,this.dictionary[a]=s,this.reverseDictionary[s]=i),s}encodeOptional(i){const a=(0,e.termToString)(i);return this.dictionary[a]}decode(i){const a=this.reverseDictionary[i];if(a===void 0)throw new Error(`The value ${i} is not present in this dictionary`);return a}*encodings(){for(const i of Object.keys(this.reverseDictionary))yield Number.parseInt(i,10)}findQuotedTriples(i){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(i){throw new Error("findQuotedTriplesEncoded is not supported")}};return KS.TermDictionaryNumberRecordFullTerms=r,KS}var XS={},JS={},rU={},Nve;function $o(){return Nve||(Nve=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QUAD_TERM_NAMES_INVERSE=void 0,t.getBestIndex=r,t.getComponentOrderScore=n,t.orderQuadComponents=i,t.encodeOptionalTerms=a,t.quadToPattern=s,t.quadHasVariables=o,t.arePatternsQuoted=c;const e=Fi();t.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(e.QUAD_TERM_NAMES.map((u,l)=>[u,l]));function r(u,l){if(u.length===1||l.every(h=>h!==void 0))return 0;const d=[];for(let h=0;h<e.QUAD_TERM_NAMES.length;h++)l[h]&&d.push(e.QUAD_TERM_NAMES[h]);return u.map((h,p)=>({score:n(h,d),index:p})).sort((h,p)=>p.score-h.score)[0].index}function n(u,l){return u.map((d,f)=>l.includes(d)?u.length-f:0).reduce((d,f)=>d+f,0)}function i(u,l){return u.map(d=>{const f=t.QUAD_TERM_NAMES_INVERSE[d];return l[f]})}function a(u,l){const d=u.map(f=>{if(f){if(f.termType==="Quad"&&o(f))return;const h=l.encodeOptional(f);return h===void 0?"none":h}return f});if(!d.includes("none"))return d}function s(u,l,d,f,h){let p=!1;return[[u||void 0,l||void 0,d||void 0,f||void 0].map(g=>{if(g){if(g.termType==="Variable")return;if(g.termType==="Quad"){if(h)return g;p=!0;return}}return g}),p]}function o(u){for(const l of e.QUAD_TERM_NAMES){const d=u[l];if(d.termType==="Variable"||d.termType==="Quad"&&o(d))return!0}return!1}function c(u){return u.map(l=>(l==null?void 0:l.termType)==="Quad"&&o(l))}}(rU)),rU}var Fve;function BQ(){if(Fve)return JS;Fve=1,Object.defineProperty(JS,"__esModule",{value:!0}),JS.RdfStoreIndexNestedMap=void 0;const t=$o();let e=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,i){const a=this.nestedMap;let s=a.get(n[0]);s||(s=new Map,a.set(n[0],s));let o=s.get(n[1]);o||(o=new Map,s.set(n[1],o));let c=o.get(n[2]);c||(c=new Map,o.set(n[2],c));const u=c.has(n[3]);return u||c.set(n[3],i),!u}remove(n){const i=this.nestedMap,a=i.get(n[0]);if(!a)return!1;const s=a.get(n[1]);if(!s)return!1;const o=s.get(n[2]);if(!o)return!1;const c=o.delete(n[3]);return c&&o.size===0&&(s.delete(n[2]),s.size===0&&(a.delete(n[1]),a.size===0&&i.delete(n[0]))),c}get(n){const i=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!(!i||i.includes(void 0)))return this.getEncoded(i)}getEncoded(n){const i=this.nestedMap.get(n[0]);if(!i)return;const a=i.get(n[1]);if(!a)return;const s=a.get(n[2]);if(s)return s.get(n[3])}*find(n){const i=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!i)return;const[a,s,o,c]=i,[u,l,d,f]=n;let h,p,_,g,m,y,v;const A=this.nestedMap,T=a!==void 0?A.has(a)?[a]:[]:A.keys();for(const S of T){m=A.get(S),h=u||this.dictionary.decode(S);const P=s!==void 0?m.has(s)?[s]:[]:m.keys();for(const j of P){y=m.get(j),p=l||this.dictionary.decode(j);const F=o!==void 0?y.has(o)?[o]:[]:y.keys();for(const N of F){v=y.get(N),_=d||this.dictionary.decode(N);const R=c!==void 0?v.has(c)?[c]:[]:v.keys();for(const C of R)g=f||this.dictionary.decode(C),yield[h,p,_,g]}}}}*findEncoded(n,i){const[a,s,o,c]=n;let u,l,d;const f=this.nestedMap,h=a!==void 0?f.has(a)?[a]:[]:f.keys();for(const p of h){u=f.get(p);const _=s!==void 0?u.has(s)?[s]:[]:u.keys();for(const g of _){l=u.get(g);const m=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const y of m){d=l.get(y);const v=c!==void 0?d.has(c)?[c]:[]:d.keys();for(const A of v)yield[p,g,y,A]}}}}count(n){let i=0;const a=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!a)return 0;const s=a[0],o=a[1],c=a[2],u=a[3];let l,d,f;const h=this.nestedMap,p=s!==void 0?h.has(s)?[s]:[]:h.keys();for(const _ of p){l=h.get(_);const g=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const m of g){d=l.get(m);const y=c!==void 0?d.has(c)?[c]:[]:d.keys();for(const v of y)f=d.get(v),u!==void 0?f.has(u)&&i++:i+=f.size}}return i}};return JS.RdfStoreIndexNestedMap=e,JS}var Mve;function P3e(){if(Mve)return XS;Mve=1,Object.defineProperty(XS,"__esModule",{value:!0}),XS.TermDictionaryQuotedIndexed=void 0;const t=jr(),e=BQ(),r=$o();let n=class bu{constructor(a,s=new t.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=a;const o={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:s};this.quotedTriplesReverseDictionaries=[new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o)],this.dataFactory=s}encode(a){return a.termType==="Quad"?this.encodeQuotedTriple(a,!1):this.plainTermDictionary.encode(a)}encodeQuotedTriple(a,s){if(a.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,r.encodeOptionalTerms)([a.subject,a.predicate,a.object,a.graph],this),c=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(o):void 0;if(c!==void 0||s)return c===void 0?void 0:bu.BITMASK|c;const u=[this.encode(a.subject),this.encode(a.predicate),this.encode(a.object)],l=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(u);const d=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([u[0],u[1],u[2],d],l),this.quotedTriplesReverseDictionaries[1].set([u[1],u[2],u[0],d],l),this.quotedTriplesReverseDictionaries[2].set([u[2],u[0],u[1],d],l),bu.BITMASK|l}encodeOptional(a){return a.termType==="Quad"?this.encodeQuotedTriple(a,!0):this.plainTermDictionary.encodeOptional(a)}decode(a){if(bu.BITMASK&a){const s=(~bu.BITMASK&a)-1;if(s>=this.quotedTriplesDictionary.length)throw new Error(`The value ${a} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[s];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(a)}*encodings(){for(const a of this.plainTermDictionary.encodings())yield a;for(const a of this.quotedTriplesDictionary.keys())yield bu.BITMASK|1+a}*findQuotedTriples(a){for(const s of this.findQuotedTriplesEncoded(a))yield this.decode(s)}*findQuotedTriplesEncoded(a){const[s,o]=(0,r.quadToPattern)(a.subject,a.predicate,a.object,a.graph,!0);for(const c of this.patternToIterable(s[0]))for(const u of this.patternToIterable(s[1]))for(const l of this.patternToIterable(s[2]))for(const d of this.patternToIterable(s[3]))if(c&&u||!u&&!l){const f=[c,u,l,d];for(const h of this.quotedTriplesReverseDictionaries[0].findEncoded(f,s))yield bu.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(h)}else if(!c&&u){const f=[u,l,c,d];for(const h of this.quotedTriplesReverseDictionaries[1].findEncoded(f,s))yield bu.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(h)}else{const f=[l,c,u,d];for(const h of this.quotedTriplesReverseDictionaries[2].findEncoded(f,s))yield bu.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(h)}}*patternToIterable(a){if((a==null?void 0:a.termType)==="Quad"){yield*this.findQuotedTriplesEncoded(a);return}if(a===void 0){yield void 0;return}const s=this.encodeOptional(a);s!==void 0&&(yield s)}};return XS.TermDictionaryQuotedIndexed=n,n.BITMASK=1<<31,XS}var YS={},Dve;function N3e(){if(Dve)return YS;Dve=1,Object.defineProperty(YS,"__esModule",{value:!0}),YS.RdfStoreIndexNestedMapQuoted=void 0;const t=$o(),e=BQ();let r=class extends e.RdfStoreIndexNestedMap{constructor(i){super(i),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(i,a){for(const s of this.dictionary.findQuotedTriplesEncoded(a))i.has(s)&&(yield s)}*find(i){const a=(0,t.encodeOptionalTerms)(i,this.dictionary);if(!a)return;const[s,o,c,u]=a,[l,d,f,h]=i,[p,_,g,m]=(0,t.arePatternsQuoted)(i);let y,v,A,T,S,P,j;const F=this.nestedMap,N=l!==void 0?p?this.getQuotedPatternKeys(F,l):F.has(s)?[s]:[]:F.keys();for(const R of N){S=F.get(R),y=!p&&l?l:this.dictionary.decode(R);const C=d!==void 0?_?this.getQuotedPatternKeys(S,d):S.has(o)?[o]:[]:S.keys();for(const M of C){P=S.get(M),v=!_&&d?d:this.dictionary.decode(M);const U=f!==void 0?g?this.getQuotedPatternKeys(P,f):P.has(c)?[c]:[]:P.keys();for(const B of U){j=P.get(B),A=!g&&f?f:this.dictionary.decode(B);const G=h!==void 0?m?this.getQuotedPatternKeys(j,h):j.has(u)?[u]:[]:j.keys();for(const K of G)T=!m&&h?h:this.dictionary.decode(K),yield[y,v,A,T]}}}}*findEncoded(i,a){const[s,o,c,u]=i,[l,d,f,h]=a,[p,_,g,m]=(0,t.arePatternsQuoted)(a);let y,v,A;const T=this.nestedMap,S=l!==void 0?p?this.getQuotedPatternKeys(T,l):T.has(s)?[s]:[]:T.keys();for(const P of S){y=T.get(P);const j=d!==void 0?_?this.getQuotedPatternKeys(y,d):y.has(o)?[o]:[]:y.keys();for(const F of j){v=y.get(F);const N=f!==void 0?g?this.getQuotedPatternKeys(v,f):v.has(c)?[c]:[]:v.keys();for(const R of N){A=v.get(R);const C=h!==void 0?m?this.getQuotedPatternKeys(A,h):A.has(u)?[u]:[]:A.keys();for(const M of C)yield[Number.parseInt(P,10),Number.parseInt(F,10),Number.parseInt(R,10),Number.parseInt(M,10)]}}}}count(i){let a=0;const s=(0,t.encodeOptionalTerms)(i,this.dictionary);if(!s)return 0;const[o,c,u,l]=s,[d,f,h,p]=i,[_,g,m,y]=(0,t.arePatternsQuoted)(i);let v,A,T;const S=this.nestedMap,P=d!==void 0?_?this.getQuotedPatternKeys(S,d):S.has(o)?[o]:[]:S.keys();for(const j of P){v=S.get(j);const F=f!==void 0?g?this.getQuotedPatternKeys(v,f):v.has(c)?[c]:[]:v.keys();for(const N of F){A=v.get(N);const R=h!==void 0?m?this.getQuotedPatternKeys(A,h):A.has(u)?[u]:[]:A.keys();for(const C of R)T=A.get(C),p!==void 0?y?a+=[...this.getQuotedPatternKeys(T,p)].length:T.has(l)&&a++:a+=T.size}}return a}};return YS.RdfStoreIndexNestedMapQuoted=r,YS}var Cve;function F3e(){if(Cve)return WS;Cve=1,Object.defineProperty(WS,"__esModule",{value:!0}),WS.RdfStore=void 0;const t=ir(),e=jr(),r=Fi(),n=D3e(),i=R3e(),a=P3e(),s=N3e(),o=$o();let c=class ME{constructor(l){this.features={quotedTripleFiltering:!0},this._size=0,this.options=l,this.dataFactory=l.dataFactory,this.dictionary=l.dictionary,this.indexesWrapped=ME.constructIndexesWrapped(l),this.indexesWrappedComponentOrders=this.indexesWrapped.map(d=>d.componentOrder)}static createDefault(){return new ME({indexCombinations:ME.DEFAULT_INDEX_COMBINATIONS,indexConstructor:l=>new s.RdfStoreIndexNestedMapQuoted(l),dictionary:new a.TermDictionaryQuotedIndexed(new i.TermDictionaryNumberRecordFullTerms),dataFactory:new e.DataFactory})}static constructIndexesWrapped(l){const d=[];if(l.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of l.indexCombinations){if(!ME.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);d.push({index:l.indexConstructor(l),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((h,p)=>[h,p]))})}return d}static isCombinationValid(l){for(const d of r.QUAD_TERM_NAMES)if(!l.includes(d))return!1;return l.length===4}get size(){return this._size}addQuad(l){const d=[this.dictionary.encode(l.subject),this.dictionary.encode(l.predicate),this.dictionary.encode(l.object),this.dictionary.encode(l.graph)];let f=!1;for(const h of this.indexesWrapped)f=h.index.set((0,o.orderQuadComponents)(h.componentOrder,d),!0);return f?(this._size++,!0):!1}removeQuad(l){const d=[this.dictionary.encodeOptional(l.subject),this.dictionary.encodeOptional(l.predicate),this.dictionary.encodeOptional(l.object),this.dictionary.encodeOptional(l.graph)];if(d.includes(void 0))return!1;let f=!1;for(const h of this.indexesWrapped)if(f=h.index.remove((0,o.orderQuadComponents)(h.componentOrder,d)),!f)break;return f?(this._size--,!0):!1}remove(l){return l.on("data",d=>this.removeQuad(d)),l}removeMatches(l,d,f,h){return this.remove(this.match(l,d,f,h))}deleteGraph(l){return typeof l=="string"&&(l=this.dataFactory.namedNode(l)),this.removeMatches(void 0,void 0,void 0,l)}import(l){return l.on("data",d=>this.addQuad(d)),l}*readQuads(l,d,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(v=>v.index.features.quotedTripleFiltering),[_,g]=(0,o.quadToPattern)(l,d,f,h,p),m=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,_)],y=(0,o.orderQuadComponents)(m.componentOrder,_);for(const v of m.index.find(y)){const A=this.dataFactory.quad(v[m.componentOrderInverse.subject],v[m.componentOrderInverse.predicate],v[m.componentOrderInverse.object],v[m.componentOrderInverse.graph]);g?(0,r.matchPattern)(A,l,d,f,h)&&(yield A):yield A}}getQuads(l,d,f,h){return[...this.readQuads(l,d,f,h)]}match(l,d,f,h){return(0,t.wrap)(this.readQuads(l,d,f,h))}*readBindings(l,d,f,h,p){const _=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(F=>F.index.features.quotedTripleFiltering),[g,m]=(0,o.quadToPattern)(d,f,h,p,_),y=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,g)],v=(0,o.orderQuadComponents)(y.componentOrder,g),A=(0,o.encodeOptionalTerms)(v,this.dictionary);if(!A)return;const T=(0,o.orderQuadComponents)(y.componentOrder,[d,f,h,p]),S=[];for(let F=0;F<T.length;F++)(T[F].termType==="Variable"||T[F].termType==="Quad")&&S.push(F);let P=!1;const j=T.map((F,N)=>{const R=[];for(let C=N+1;C<T.length;C++)F.equals(T[C])&&(R.push(C),P=!0);return R});for(const F of y.index.findEncoded(A,v)){let N=!1,R=!1;const C=[];for(const M of S){if(P){const B=j[M];if(B){for(const G of B)if(F[M]!==F[G]){N=!0;break}}if(N)break}const U=this.dictionary.decode(F[M]);if(T[M].termType==="Quad"){if(U.termType==="Quad"){const B=(0,r.matchPatternMappings)(U,T[M],{returnMappings:!0});if(B){R=!0;for(const[G,K]of Object.entries(B)){const $=this.dataFactory.variable(G);if(C.some(se=>se[0].equals($)&&!se[1].equals(K))){N=!0;break}C.push([$,K])}continue}}N=!0;break}if(R&&C.some(B=>B[0].equals(T[M])&&!B[1].equals(U))){N=!0;break}C.push([T[M],U])}N||(yield l.bindings(C))}}getBindings(l,d,f,h,p){return[...this.readBindings(l,d,f,h,p)]}matchBindings(l,d,f,h,p){return(0,t.wrap)(this.readBindings(l,d,f,h,p))}countQuads(l,d,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(y=>y.index.features.quotedTripleFiltering),[_]=(0,o.quadToPattern)(l,d,f,h,p);if(_.every(y=>y===void 0))return this.size;const g=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,_)],m=(0,o.orderQuadComponents)(g.componentOrder,_);return g.index.count(m)}asDataset(){return new n.DatasetCoreWrapper(this)}};return WS.RdfStore=c,c.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],WS}var Lve;function D3e(){if(Lve)return QS;Lve=1,Object.defineProperty(QS,"__esModule",{value:!0}),QS.DatasetCoreWrapper=void 0;const t=F3e();let e=class M3e{constructor(n){this.store=n}get size(){return this.store.size}add(n){return this.store.addQuad(n),this}delete(n){return this.store.removeQuad(n),this}has(n){for(const i of this.store.readQuads(n.subject,n.predicate,n.object,n.graph))return!0;return!1}match(n,i,a,s){const o=new t.RdfStore(this.store.options);for(const c of this.store.readQuads(n,i,a,s))o.addQuad(c);return new M3e(o)}[Symbol.iterator](){return this.store.readQuads()}};return QS.DatasetCoreWrapper=e,QS}var nU={},jve;function Pyt(){return jve||(jve=1,Object.defineProperty(nU,"__esModule",{value:!0})),nU}var $S={},Bve;function Nyt(){if(Bve)return $S;Bve=1,Object.defineProperty($S,"__esModule",{value:!0}),$S.TermDictionaryNumberMap=void 0;const t=jr(),e=Br();let r=class{constructor(i=new t.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=i}encode(i){const a=(0,e.termToString)(i);let s=this.dictionary.get(a);return s===void 0&&(s=this.lastId++,this.dictionary.set(a,s),this.reverseDictionary.set(s,a)),s}encodeOptional(i){const a=(0,e.termToString)(i);return this.dictionary.get(a)}decode(i){const a=this.reverseDictionary.get(i);if(a===void 0)throw new Error(`The value ${i} is not present in this dictionary`);return(0,e.stringToTerm)(a,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(i){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(i){throw new Error("findQuotedTriplesEncoded is not supported")}};return $S.TermDictionaryNumberMap=r,$S}var ZS={},qve;function Fyt(){if(qve)return ZS;qve=1,Object.defineProperty(ZS,"__esModule",{value:!0}),ZS.TermDictionaryNumberRecord=void 0;const t=jr(),e=Br();let r=class{constructor(i=new t.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=i}encode(i){const a=(0,e.termToString)(i);let s=this.dictionary[a];return s===void 0&&(s=this.lastId++,this.dictionary[a]=s,this.reverseDictionary[s]=a),s}encodeOptional(i){const a=(0,e.termToString)(i);return this.dictionary[a]}decode(i){const a=this.reverseDictionary[i];if(a===void 0)throw new Error(`The value ${i} is not present in this dictionary`);return(0,e.stringToTerm)(a,this.dataFactory)}*encodings(){for(const i of Object.keys(this.reverseDictionary))yield Number.parseInt(i,10)}findQuotedTriples(i){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(i){throw new Error("findQuotedTriplesEncoded is not supported")}};return ZS.TermDictionaryNumberRecord=r,ZS}var ex={},Uve;function Myt(){if(Uve)return ex;Uve=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.TermDictionaryQuoted=void 0;const t=jr(),e=Fi();let r=class Md{constructor(i,a,s=new t.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=i,this.quotedTriplesDictionary=a,this.dataFactory=s}encode(i){return i.termType==="Quad"?Md.BITMASK|1+this.quotedTriplesDictionary.encode(i):this.plainTermDictionary.encode(i)}encodeOptional(i){if(i.termType==="Quad"){const a=this.quotedTriplesDictionary.encodeOptional(i);return a===void 0?a:Md.BITMASK|1+a}return this.plainTermDictionary.encodeOptional(i)}decode(i){if(Md.BITMASK&i){const a=(~Md.BITMASK&i)-1;return this.quotedTriplesDictionary.decode(a)}return this.plainTermDictionary.decode(i)}*encodings(){for(const i of this.plainTermDictionary.encodings())yield i;for(const i of this.quotedTriplesDictionary.encodings())yield Md.BITMASK|1+i}*findQuotedTriples(i){for(const a of this.findQuotedTriplesEncoded(i))yield this.decode(a)}*findQuotedTriplesEncoded(i){for(let a of this.quotedTriplesDictionary.encodings()){a=Md.BITMASK|1+a;const s=this.decode(a);(0,e.matchPattern)(s,i.subject,i.predicate,i.object,i.graph)&&(yield a)}}};return ex.TermDictionaryQuoted=r,r.BITMASK=1<<31,ex}var tx={},Vve;function Dyt(){if(Vve)return tx;Vve=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.TermDictionaryQuotedReferential=void 0;const t=jr(),e=Fi(),r=$o();let n=class vu{constructor(a,s=new t.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=a,this.dataFactory=s}encode(a){return a.termType==="Quad"?this.encodeQuotedTriple(a,!1):this.plainTermDictionary.encode(a)}encodeQuotedTriple(a,s){var d;if(a.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(d=(0,r.encodeOptionalTerms)([a.subject,a.predicate,a.object,void 0],this))==null?void 0:d.slice(0,3),c=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionary[o.join(vu.SEPARATOR)]:void 0;if(c!==void 0||s)return c===void 0?void 0:vu.BITMASK|c;const u=[this.encode(a.subject),this.encode(a.predicate),this.encode(a.object)],l=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(u),this.quotedTriplesReverseDictionary[u.join(vu.SEPARATOR)]=l,vu.BITMASK|l}encodeOptional(a){return a.termType==="Quad"?this.encodeQuotedTriple(a,!0):this.plainTermDictionary.encodeOptional(a)}decode(a){if(vu.BITMASK&a){const s=(~vu.BITMASK&a)-1;if(s>=this.quotedTriplesDictionary.length)throw new Error(`The value ${a} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[s];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(a)}*encodings(){for(const a of this.plainTermDictionary.encodings())yield a;for(const a of this.quotedTriplesDictionary.keys())yield vu.BITMASK|1+a}*findQuotedTriples(a){for(const s of this.findQuotedTriplesEncoded(a))yield this.decode(s)}*findQuotedTriplesEncoded(a){for(let s of this.quotedTriplesDictionary.keys()){s=vu.BITMASK|1+s;const o=this.decode(s);(0,e.matchPattern)(o,a.subject,a.predicate,a.object,a.graph)&&(yield s)}}};return tx.TermDictionaryQuotedReferential=n,n.BITMASK=1<<31,n.SEPARATOR="_",tx}var rx={},Gve;function Cyt(){if(Gve)return rx;Gve=1,Object.defineProperty(rx,"__esModule",{value:!0}),rx.TermDictionarySymbol=void 0;const t=jr(),e=Br();let r=class{constructor(i=new t.DataFactory){this.features={quotedTriples:!1},this.dataFactory=i}encode(i){return Symbol.for(`rdf::${(0,e.termToString)(i)}`)}encodeOptional(i){return this.encode(i)}decode(i){const a=Symbol.keyFor(i);if(a===void 0)throw new Error(`The value ${String(i)} is not present in this dictionary`);return(0,e.stringToTerm)(a.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(i){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(i){throw new Error("findQuotedTriplesEncoded is not supported")}};return rx.TermDictionarySymbol=r,rx}var iU={},Hve;function Lyt(){return Hve||(Hve=1,Object.defineProperty(iU,"__esModule",{value:!0})),iU}var nx={},kve;function C3e(){if(kve)return nx;kve=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.RdfStoreIndexNestedMapRecursive=void 0;const t=$o();let e=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,i){let a=this.nestedMap,s=!1;for(const[o,c]of n.entries()){const u=a;let l=u.get(c);l?o===n.length-1&&(s=!0):(l=o===n.length-1?i:new Map,u.set(c,l)),a=l}return!s}remove(n){const i=this.nestedMap,a=i.get(n[0]);if(!a)return!1;const s=a.get(n[1]);if(!s)return!1;const o=s.get(n[2]);if(!o)return!1;const c=o.delete(n[3]);return c&&o.size===0&&(s.delete(n[2]),s.size===0&&(a.delete(n[1]),a.size===0&&i.delete(n[0]))),c}get(n){const i=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!(!i||i.includes(void 0)))return this.getEncoded(i)}getEncoded(n){const i=this.nestedMap.get(n[0]);if(!i)return;const a=i.get(n[1]);if(!a)return;const s=a.get(n[2]);if(s)return s.get(n[3])}*find(n){const i=(0,t.encodeOptionalTerms)(n,this.dictionary);if(i)for(const a of this.findEncoded(i,n))yield[i[0]!==void 0?n[0]:this.dictionary.decode(a[0]),i[1]!==void 0?n[1]:this.dictionary.decode(a[1]),i[2]!==void 0?n[2]:this.dictionary.decode(a[2]),i[3]!==void 0?n[3]:this.dictionary.decode(a[3])]}*findEncoded(n,i){return yield*this.findEncodedInner(0,n,i,this.nestedMap,[])}*findEncodedInner(n,i,a,s,o){if(n===i.length)yield[...o];else{const c=i[n];if(a[n]){const l=c;if(l!==void 0){const d=s.get(l);d&&(o[n]=c,yield*this.findEncodedInner(n+1,i,a,d,o))}}else for(const[l,d]of s.entries())o[n]=l,yield*this.findEncodedInner(n+1,i,a,d,o)}}count(n){return this.countInner(0,n,this.nestedMap)}countInner(n,i,a){const s=i[n];let o=0;if(s){const c=this.dictionary.encodeOptional(s);if(c!==void 0){if(n===i.length-1)return a.has(c)?1:0;const u=a.get(c);u&&(o+=this.countInner(n+1,i,u))}}else{if(n===i.length-1)return a.size;for(const c of a.values())o+=this.countInner(n+1,i,c)}return o}};return nx.RdfStoreIndexNestedMapRecursive=e,nx}var ix={},zve;function jyt(){if(zve)return ix;zve=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const t=$o(),e=C3e();let r=class extends e.RdfStoreIndexNestedMapRecursive{constructor(i){super(i),this.features={quotedTripleFiltering:!0}}*findEncoded(i,a){return yield*this.findEncodedInnerQuoted(0,i,a,(0,t.arePatternsQuoted)(a),this.nestedMap,[])}*findEncodedInnerQuoted(i,a,s,o,c,u){if(i===a.length)yield[...u];else{const l=a[i],d=s[i];if(d)if(o[i]){const f=this.dictionary.findQuotedTriplesEncoded(d);for(const h of f){const p=c.get(h);p&&(u[i]=h,yield*this.findEncodedInnerQuoted(i+1,a,s,o,p,u))}}else{const f=l;if(f!==void 0){const h=c.get(f);h&&(u[i]=l,yield*this.findEncodedInnerQuoted(i+1,a,s,o,h,u))}}else for(const[f,h]of c.entries())u[i]=f,yield*this.findEncodedInnerQuoted(i+1,a,s,o,h,u)}}countInner(i,a,s){const o=a[i];let c=0;if(o)if(o.termType==="Quad"&&(0,t.quadHasVariables)(o)){const u=this.dictionary.findQuotedTriplesEncoded(o);for(const l of u)if(i===a.length-1)s.has(l)&&c++;else{const d=s.get(l);d&&(c+=this.countInner(i+1,a,d))}}else{const u=this.dictionary.encodeOptional(o);if(u!==void 0){if(i===a.length-1)return s.has(u)?1:0;const l=s.get(u);l&&(c+=this.countInner(i+1,a,l))}}else{if(i===a.length-1)return s.size;for(const u of s.values())c+=this.countInner(i+1,a,u)}return c}};return ix.RdfStoreIndexNestedMapRecursiveQuoted=r,ix}var ax={},Qve;function L3e(){if(Qve)return ax;Qve=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.RdfStoreIndexNestedRecord=void 0;const t=$o();let e=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedRecords={}}set(n,i){const a=this.nestedRecords,s=a[n[0]]||(a[n[0]]={}),o=s[n[1]]||(s[n[1]]={}),c=o[n[2]]||(o[n[2]]={});return c[n[3]]?!1:(c[n[3]]=i,!0)}remove(n){const i=this.nestedRecords,a=i[n[0]];if(!a)return!1;const s=a[n[1]];if(!s)return!1;const o=s[n[2]];return!o||!o[n[3]]?!1:(delete o[n[3]],Object.keys(o).length===0&&(delete s[n[2]],Object.keys(s).length===0&&(delete a[n[1]],Object.keys(a).length===0&&delete i[n[0]])),!0)}get(n){const i=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!(!i||i.includes(void 0)))return this.getEncoded(i)}getEncoded(n){var i,a,s;return(s=(a=(i=this.nestedRecords[n[0]])==null?void 0:i[n[1]])==null?void 0:a[n[2]])==null?void 0:s[n[3]]}*find(n){const i=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!i)return;const[a,s,o,c]=i,[u,l,d,f]=n;let h,p,_,g,m,y,v;const A=this.nestedRecords,T=a!==void 0?a in A?[a]:[]:Object.keys(A);for(const S of T){m=A[S],h=u||this.dictionary.decode(Number.parseInt(S,10));const P=s!==void 0?s in m?[s]:[]:Object.keys(m);for(const j of P){y=m[j],p=l||this.dictionary.decode(Number.parseInt(j,10));const F=o!==void 0?o in y?[o]:[]:Object.keys(y);for(const N of F){v=y[N],_=d||this.dictionary.decode(Number.parseInt(N,10));const R=c!==void 0?c in v?[c]:[]:Object.keys(v);for(const C of R)g=f||this.dictionary.decode(Number.parseInt(C,10)),yield[h,p,_,g]}}}}*findEncoded(n,i){const[a,s,o,c]=n;let u,l,d;const f=this.nestedRecords,h=a!==void 0?a in f?[a]:[]:Object.keys(f);for(const p of h){u=f[p];const _=s!==void 0?s in u?[s]:[]:Object.keys(u);for(const g of _){l=u[g];const m=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const y of m){d=l[y];const v=c!==void 0?c in d?[c]:[]:Object.keys(d);for(const A of v)yield[Number.parseInt(p,10),Number.parseInt(g,10),Number.parseInt(y,10),Number.parseInt(A,10)]}}}}count(n){let i=0;const a=(0,t.encodeOptionalTerms)(n,this.dictionary);if(!a)return 0;const s=a[0],o=a[1],c=a[2],u=a[3];let l,d,f;const h=this.nestedRecords,p=s!==void 0?s in h?[s]:[]:Object.keys(h);for(const _ of p){l=h[_];const g=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const m of g){d=l[m];const y=c!==void 0?c in d?[c]:[]:Object.keys(d);for(const v of y)f=d[v],u!==void 0?u in f&&i++:i+=Object.keys(f).length}}return i}};return ax.RdfStoreIndexNestedRecord=e,ax}var sx={},Wve;function Byt(){if(Wve)return sx;Wve=1,Object.defineProperty(sx,"__esModule",{value:!0}),sx.RdfStoreIndexNestedRecordQuoted=void 0;const t=$o(),e=L3e();let r=class extends e.RdfStoreIndexNestedRecord{constructor(i){super(i),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(i,a){for(const s of this.dictionary.findQuotedTriplesEncoded(a))s in i&&(yield s)}*find(i){const a=(0,t.encodeOptionalTerms)(i,this.dictionary);if(!a)return;const[s,o,c,u]=a,[l,d,f,h]=i,[p,_,g,m]=(0,t.arePatternsQuoted)(i);let y,v,A,T,S,P,j;const F=this.nestedRecords,N=l!==void 0?p?this.getQuotedPatternKeys(F,l):s in F?[s]:[]:Object.keys(F);for(const R of N){S=F[R],y=!p&&l?l:this.dictionary.decode(Number.parseInt(R,10));const C=d!==void 0?_?this.getQuotedPatternKeys(S,d):o in S?[o]:[]:Object.keys(S);for(const M of C){P=S[M],v=!_&&d?d:this.dictionary.decode(Number.parseInt(M,10));const U=f!==void 0?g?this.getQuotedPatternKeys(P,f):c in P?[c]:[]:Object.keys(P);for(const B of U){j=P[B],A=!g&&f?f:this.dictionary.decode(Number.parseInt(B,10));const G=h!==void 0?m?this.getQuotedPatternKeys(j,h):u in j?[u]:[]:Object.keys(j);for(const K of G)T=!m&&h?h:this.dictionary.decode(Number.parseInt(K,10)),yield[y,v,A,T]}}}}*findEncoded(i,a){const[s,o,c,u]=i,[l,d,f,h]=a,[p,_,g,m]=(0,t.arePatternsQuoted)(a);let y,v,A;const T=this.nestedRecords,S=l!==void 0?p?this.getQuotedPatternKeys(T,l):s in T?[s]:[]:Object.keys(T);for(const P of S){y=T[P];const j=d!==void 0?_?this.getQuotedPatternKeys(y,d):o in y?[o]:[]:Object.keys(y);for(const F of j){v=y[F];const N=f!==void 0?g?this.getQuotedPatternKeys(v,f):c in v?[c]:[]:Object.keys(v);for(const R of N){A=v[R];const C=h!==void 0?m?this.getQuotedPatternKeys(A,h):u in A?[u]:[]:Object.keys(A);for(const M of C)yield[Number.parseInt(P,10),Number.parseInt(F,10),Number.parseInt(R,10),Number.parseInt(M,10)]}}}}count(i){let a=0;const s=(0,t.encodeOptionalTerms)(i,this.dictionary);if(!s)return 0;const[o,c,u,l]=s,[d,f,h,p]=i,[_,g,m,y]=(0,t.arePatternsQuoted)(i);let v,A,T;const S=this.nestedRecords,P=d!==void 0?_?this.getQuotedPatternKeys(S,d):o in S?[o]:[]:Object.keys(S);for(const j of P){v=S[j];const F=f!==void 0?g?this.getQuotedPatternKeys(v,f):c in v?[c]:[]:Object.keys(v);for(const N of F){A=v[N];const R=h!==void 0?m?this.getQuotedPatternKeys(A,h):u in A?[u]:[]:Object.keys(A);for(const C of R)T=A[C],p!==void 0?y?a+=[...this.getQuotedPatternKeys(T,p)].length:l in T&&a++:a+=Object.keys(T).length}}return a}};return sx.RdfStoreIndexNestedRecordQuoted=r,sx}var aU={},Kve;function qyt(){return Kve||(Kve=1,Object.defineProperty(aU,"__esModule",{value:!0})),aU}var sU={},Xve;function Uyt(){return Xve||(Xve=1,Object.defineProperty(sU,"__esModule",{value:!0})),sU}var Jve;function Vyt(){return Jve||(Jve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(D3e(),t),r(Pyt(),t),r(Nyt(),t),r(Fyt(),t),r(R3e(),t),r(Myt(),t),r(P3e(),t),r(Dyt(),t),r(Cyt(),t),r(Lyt(),t),r(BQ(),t),r(N3e(),t),r(C3e(),t),r(jyt(),t),r(L3e(),t),r(Byt(),t),r(qyt(),t),r($o(),t),r(Uyt(),t),r(F3e(),t)}(tU)),tU}var Yve;function j3e(){if(Yve)return HP;Yve=1,Object.defineProperty(HP,"__esModule",{value:!0}),HP.storeStream=e;const t=Vyt();function e(r){const n=t.RdfStore.createDefault();return new Promise((i,a)=>n.import(r).on("error",a).once("end",()=>i(n)))}return HP}var $ve;function Gyt(){if($ve)return HS;$ve=1,Object.defineProperty(HS,"__esModule",{value:!0}),HS.ActorQuerySourceIdentifyHypermediaNone=void 0;const t=O3e(),e=jQ(),r=dt,n=ke(),i=ln(),a=j3e();let s=class extends e.ActorQuerySourceIdentifyHypermedia{constructor(u){super(u,"file");k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=u.mediatorMergeBindingsContext}async testMetadata(u){return(0,n.passTest)({filterFactor:0})}async run(u){this.logInfo(u.context,`Identified as file source: ${u.url}`);const l=u.context.getSafe(r.KeysInitQuery.dataFactory),d=new t.QuerySourceRdfJs(await(0,a.storeStream)(u.quads),l,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,u.context,l));return d.toString=()=>`QuerySourceRdfJs(${u.url})`,d.referenceValue=u.url,{source:d}}};return HS.ActorQuerySourceIdentifyHypermediaNone=s,HS}var Zve;function Hyt(){return Zve||(Zve=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Gyt(),t)}($9)),$9}var oU={},ox={},uU={},ux={},eAe;function kyt(){if(eAe)return ux;eAe=1,Object.defineProperty(ux,"__esModule",{value:!0}),ux.ActorExpressionEvaluatorFactory=void 0;const t=ke();let e=class extends t.Actor{constructor(i){super(i);k(this,"mediatorQueryOperation");k(this,"mediatorFunctionFactory");k(this,"mediatorMergeBindingsContext");this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return ux.ActorExpressionEvaluatorFactory=e,ux}var tAe;function zyt(){return tAe||(tAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(kyt(),t)}(uU)),uU}var cx={},rAe;function B3e(){if(rAe)return cx;rAe=1,Object.defineProperty(cx,"__esModule",{value:!0}),cx.AlgebraTransformer=void 0;const t=dt,e=Ft(),r=Ye();let n=class W3 extends r.TermTransformer{constructor(s,o){super(s.getSafe(t.KeysExpressionEvaluator.superTypeProvider));k(this,"context");k(this,"mediatorFunctionFactory");k(this,"AF",new e.AlgebraFactory);this.context=s,this.mediatorFunctionFactory=o}async transformAlgebra(s){if((0,e.isKnownSubType)(s,e.Algebra.ExpressionTypes.TERM))return s.term.termType==="Quad"?await this.transformOperator(this.AF.createOperatorExpression("triple",[this.AF.createTermExpression(s.term.subject),this.AF.createTermExpression(s.term.predicate),this.AF.createTermExpression(s.term.object)])):this.transformTerm(s);if((0,e.isKnownSubType)(s,e.Algebra.ExpressionTypes.OPERATOR))return await this.transformOperator(s);if((0,e.isKnownSubType)(s,e.Algebra.ExpressionTypes.NAMED))return await this.transformNamed(s);if((0,e.isKnownSubType)(s,e.Algebra.ExpressionTypes.EXISTENCE))return W3.transformExistence(s);if((0,e.isKnownSubType)(s,e.Algebra.ExpressionTypes.AGGREGATE))return W3.transformAggregate(s);if((0,e.isKnownSubType)(s,e.Algebra.ExpressionTypes.WILDCARD))return W3.transformWildcard(s);throw new Error(`Expression of type ${s.subType} cannot be converted into internal representation of expression.`)}static transformWildcard(s){return new r.NamedNode("*")}async getOperator(s,o){const c=await this.mediatorFunctionFactory.mediate({functionName:s,arguments:o.args,context:this.context}),u=await Promise.all(o.args.map(l=>this.transformAlgebra(l)));if(!c.checkArity(u))throw new r.InvalidArity(u,s);return new r.Operator(s,u,c.apply)}async transformOperator(s){return this.getOperator(s.operator.toLowerCase(),s)}async transformNamed(s){return this.getOperator(s.name.value,s)}static transformAggregate(s){const o=s.aggregator;return new r.Aggregate(o,s)}static transformExistence(s){return new r.Existence(s)}};return cx.AlgebraTransformer=n,cx}var lx={},dx={},nAe;function q3e(){if(nAe)return dx;nAe=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.InternalEvaluator=void 0;const t=dt,e=Bl(),r=Ft(),n=Ye(),i=rr(),a=B3e();let s=class{constructor(c,u,l,d){k(this,"context");k(this,"mediatorQueryOperation");k(this,"bindingsFactory");k(this,"transformer");k(this,"subEvaluators",{[e.ExpressionType.Term]:(c,u)=>this.term(c),[e.ExpressionType.Variable]:(c,u)=>this.variable(c,u),[e.ExpressionType.Operator]:(c,u)=>this.evalFunction(c,u),[e.ExpressionType.Existence]:(c,u)=>this.evalExistence(c,u),[e.ExpressionType.Aggregate]:(c,u)=>this.evalAggregate()});this.context=c,this.mediatorQueryOperation=l,this.bindingsFactory=d,this.transformer=new a.AlgebraTransformer(c,u)}async evaluatorExpressionEvaluation(c,u){return this.subEvaluators[c.expressionType].bind(this)(c,u)}term(c){return c}variable(c,u){const l=u.get(n.expressionToVar(this.context.getSafe(t.KeysInitQuery.dataFactory),c));if(!l)throw new n.UnboundVariableError(c.name,u);return this.transformer.transformRDFTermUnsafe(l)}async evalFunction(c,u){return c.apply({args:c.args,mapping:u,exprEval:this})}async evalExistence(c,u){const l=this.context.getSafe(t.KeysInitQuery.dataFactory),d=new r.AlgebraFactory(l),f=(0,i.materializeOperation)(c.expression.input,u,d,this.bindingsFactory),h=await this.mediatorQueryOperation.mediate({operation:f,context:this.context}),p=(0,i.getSafeBindings)(h);return await new Promise((_,g)=>{p.bindingsStream.on("end",()=>{_(!1)}),p.bindingsStream.on("error",g),p.bindingsStream.on("data",()=>{p.bindingsStream.close(),_(!0)})}).then(_=>c.expression.not?!_:_).then(_=>new n.BooleanLiteral(_))}evalAggregate(){throw new n.NoAggregator}};return dx.InternalEvaluator=s,dx}var iAe;function Qyt(){if(iAe)return lx;iAe=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.ExpressionEvaluator=void 0;const t=dt,e=q3e();let r=class{constructor(i,a,s,o,c){k(this,"context");k(this,"expr");k(this,"mediatorFunctionFactory");k(this,"mediatorQueryOperation");k(this,"bindingsFactory");k(this,"internalEvaluator");this.context=i,this.expr=a,this.mediatorFunctionFactory=s,this.mediatorQueryOperation=o,this.bindingsFactory=c,this.internalEvaluator=new e.InternalEvaluator(i,s,o,c)}async evaluate(i){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,i)).toRDF(this.context.getSafe(t.KeysInitQuery.dataFactory))}async evaluateAsEBV(i){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,i)).coerceEBV()}evaluateAsEvaluatorExpression(i){return this.evaluatorExpressionEvaluation(this.expr,i)}evaluatorExpressionEvaluation(i,a){return this.internalEvaluator.evaluatorExpressionEvaluation(i,a)}};return lx.ExpressionEvaluator=r,lx}var aAe;function Wyt(){if(aAe)return ox;aAe=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.ActorExpressionEvaluatorFactoryDefault=void 0;const t=zyt(),e=dt,r=ke(),n=ln(),i=Ye(),a=B3e(),s=Qyt();let o=class extends t.ActorExpressionEvaluatorFactory{constructor(u){super(u)}async test(u){return(0,r.passTestVoid)()}async run(u){const l=(0,i.prepareEvaluatorActionContext)(u.context);return new s.ExpressionEvaluator(l,await new a.AlgebraTransformer(l,this.mediatorFunctionFactory).transformAlgebra(u.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,u.context,u.context.getSafe(e.KeysInitQuery.dataFactory)))}};return ox.ActorExpressionEvaluatorFactoryDefault=o,ox}var sAe;function Kyt(){return sAe||(sAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wyt(),t)}(oU)),oU}var cU={},fx={},hx={},oAe;function Xyt(){if(oAe)return hx;oAe=1,Object.defineProperty(hx,"__esModule",{value:!0}),hx.GroupsState=void 0;const t=dt,e=ln();let r=class{constructor(i,a,s,o,c){k(this,"pattern");k(this,"mediatorBindingsAggregatorFactory");k(this,"context");k(this,"bindingsFactory");k(this,"variables");k(this,"groups");k(this,"groupsInitializer");k(this,"groupVariables");k(this,"waitCounter");k(this,"waitResolver");k(this,"resultHasBeenCalled");this.pattern=i,this.mediatorBindingsAggregatorFactory=a,this.context=s,this.bindingsFactory=o,this.variables=c,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(u=>u.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(i){const a=this.resultCheck();if(a)return a;this.waitCounter++;const s=i.filter((l,d)=>this.groupVariables.has(d.value)),o=this.hashBindings(s);let c=this.groupsInitializer.get(o),u;if(c){const l=c;u=(async()=>{const d=await l;await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;await d.aggregators[h].putBindings(i)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else c=(async()=>{const l={};await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;l[h]=await this.mediatorBindingsAggregatorFactory.mediate({expr:f,context:this.context}),await l[h].putBindings(i)}));const d={aggregators:l,bindings:s};return this.groups.set(o,d),await this.subtractWaitCounterAndCollect(),d})(),this.groupsInitializer.set(o,c),u=c;return u}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const i=this.context.getSafe(t.KeysInitQuery.dataFactory);let a=await Promise.all([...this.groups].map(async([s,o])=>{const{bindings:c,aggregators:u}=o;let l=c;for(const d in u){const f=await u[d].result();f&&(l=l.set(i.variable(d),f))}return l}));if(a.length===0&&this.groupVariables.size===0){const s=[];await Promise.all(this.pattern.aggregates.map(async o=>{const c=o.variable,l=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:o,context:this.context})).result();l!==void 0&&s.push([c,l])})),a=[this.bindingsFactory.bindings(s)]}this.waitResolver(a)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const i=this.resultCheck();if(i)return i;this.resultHasBeenCalled=!0;const a=new Promise(s=>{this.waitResolver=s});return await this.subtractWaitCounterAndCollect(),a}hashBindings(i){return(0,e.bindingsToCompactString)(i,this.variables)}};return hx.GroupsState=r,hx}var uAe;function Jyt(){if(uAe)return fx;uAe=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.ActorQueryOperationGroup=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=ln(),a=rr(),s=ir(),o=Xyt();let c=class extends t.ActorQueryOperationTypedMediated{constructor(d){super(d,n.Algebra.Types.GROUP);k(this,"mediatorMergeBindingsContext");k(this,"mediatorBindingsAggregatorFactory");this.mediatorMergeBindingsContext=d.mediatorMergeBindingsContext,this.mediatorBindingsAggregatorFactory=d.mediatorBindingsAggregatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(d,f){const h=f.getSafe(e.KeysInitQuery.dataFactory),p=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,f,h),{input:_,aggregates:g}=d,m=await this.mediatorQueryOperation.mediate({operation:_,context:f}),y=(0,a.getSafeBindings)(m),v=[...d.variables,...g.map(S=>S.variable)].map(S=>({variable:S,canBeUndef:!1})),A=(await y.metadata()).variables.map(S=>S.variable);return{type:"bindings",bindingsStream:new s.TransformIterator(()=>new Promise((S,P)=>{const j=new o.GroupsState(d,this.mediatorBindingsAggregatorFactory,f,p,A);y.bindingsStream.on("end",async()=>{try{const F=new s.ArrayIterator(await j.collectResults(),{autoStart:!1});S(F)}catch(F){P(F)}}),y.bindingsStream.on("error",P),y.bindingsStream.on("data",F=>{j.consumeBindings(F).catch(P)})}),{autoStart:!1}),metadata:async()=>({...await y.metadata(),variables:v})}}};return fx.ActorQueryOperationGroup=c,fx}var cAe;function Yyt(){return cAe||(cAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Jyt(),t)}(cU)),cU}var lU={},px={},lAe;function $yt(){if(lAe)return px;lAe=1,Object.defineProperty(px,"__esModule",{value:!0}),px.ActorQueryOperationNop=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=ln(),a=Mi(),s=ir();let o=class extends t.ActorQueryOperationTypedMediated{constructor(l){super(l,n.Algebra.Types.NOP);k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=l.mediatorMergeBindingsContext}async testOperation(l,d){return(0,r.passTestVoid)()}async runOperation(l,d){const f=d.getSafe(e.KeysInitQuery.dataFactory),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,f);return{bindingsStream:new s.SingletonIterator(h.bindings()),metadata:()=>Promise.resolve({state:new a.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return px.ActorQueryOperationNop=o,px}var dAe;function Zyt(){return dAe||(dAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r($yt(),t)}(lU)),lU}var dU={},_x={},fAe;function ebt(){if(fAe)return _x;fAe=1,Object.defineProperty(_x,"__esModule",{value:!0}),_x.ActorQueryOperationValues=void 0;const t=qr(),e=dt,r=ke(),n=Ft(),i=ln(),a=Mi(),s=ir();let o=class extends t.ActorQueryOperationTyped{constructor(l){super(l,n.Algebra.Types.VALUES);k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=l.mediatorMergeBindingsContext}async testOperation(l,d){return(0,r.passTestVoid)()}async runOperation(l,d){const f=d.getSafe(e.KeysInitQuery.dataFactory),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,f);return{type:"bindings",bindingsStream:new s.ArrayIterator(l.bindings.map(g=>h.bindings(Object.entries(g).map(([m,y])=>[f.variable(m),y])))),metadata:()=>Promise.resolve({state:new a.MetadataValidationState,cardinality:{type:"exact",value:l.bindings.length},variables:l.variables.map(g=>({variable:g,canBeUndef:l.bindings.some(m=>!(g.value in m))}))})}}};return _x.ActorQueryOperationValues=o,_x}var hAe;function tbt(){return hAe||(hAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ebt(),t)}(dU)),dU}var fU={},mx={},pAe;function rbt(){if(pAe)return mx;pAe=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.ActorQueryOperationPathOneOrMore=void 0;const t=Gl(),e=dt,r=Ft(),n=ln(),i=rr(),a=ir();let s=class extends t.ActorAbstractPath{constructor(u){super(u,r.Algebra.Types.ONE_OR_MORE_PATH);k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=u.mediatorMergeBindingsContext}async runOperation(u,l){const d=l.getSafe(e.KeysInitQuery.dataFactory),f=new r.AlgebraFactory(d),h=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),p=await this.isPathArbitraryLengthDistinct(f,l,u);if(p.operation)return p.operation;l=p.context;const _=u.predicate;if(u.subject.termType!=="Variable"&&u.object.termType==="Variable"){const v=u.object,A=await this.getObjectsPredicateStarEval(u.subject,_.path,v,u.graph,l,!1,f,h),T=(u.graph.termType==="Variable"?[v,u.graph]:[v]).map(S=>({variable:S,canBeUndef:!1}));return{type:"bindings",bindingsStream:A.bindingsStream,metadata:async()=>({...await A.metadata(),variables:T})}}if(u.subject.termType==="Variable"&&u.object.termType==="Variable"){const v=f.createDistinct(f.createPath(u.subject,_.path,u.object,u.graph)),A=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:v})),T=u.subject,S=u.object,P={},j=new a.MultiTransformIterator(A.bindingsStream,{multiTransform:N=>{const R=N.get(T),C=N.get(S),M=u.graph.termType==="Variable"?N.get(u.graph):u.graph;return new a.TransformIterator(async()=>{const U=new a.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(T,S,R,C,_.path,M,l,P,{},U,{count:0},f,h),U.map(B=>(u.graph.termType==="Variable"&&(B=B.set(u.graph,M)),B))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),F=(u.graph.termType==="Variable"?[T,S,u.graph]:[T,S]).map(N=>({variable:N,canBeUndef:!1}));return{type:"bindings",bindingsStream:j,metadata:async()=>({...await A.metadata(),variables:F})}}if(u.subject.termType==="Variable"&&u.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:l,operation:f.createPath(u.object,f.createOneOrMorePath(f.createInv(_.path)),u.subject,u.graph)});const g=this.generateVariable(d),m=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:f.createPath(u.subject,_,g,u.graph)}));return{type:"bindings",bindingsStream:m.bindingsStream.map(v=>u.object.equals(v.get(g))?u.graph.termType==="Variable"?h.bindings([[u.graph,v.get(u.graph)]]):h.bindings():null),metadata:async()=>({...await m.metadata(),variables:(u.graph.termType==="Variable"?[u.graph]:[]).map(v=>({variable:v,canBeUndef:!1}))})}}};return mx.ActorQueryOperationPathOneOrMore=s,mx}var _Ae;function nbt(){return _Ae||(_Ae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(rbt(),t)}(fU)),fU}var hU={},gx={},mAe;function ibt(){if(mAe)return gx;mAe=1,Object.defineProperty(gx,"__esModule",{value:!0}),gx.ActorQueryOperationPathZeroOrMore=void 0;const t=Gl(),e=dt,r=Ft(),n=ln(),i=rr(),a=ir(),s=Br();let o=class extends t.ActorAbstractPath{constructor(l){super(l,r.Algebra.Types.ZERO_OR_MORE_PATH);k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=l.mediatorMergeBindingsContext}async runOperation(l,d){const f=d.getSafe(e.KeysInitQuery.dataFactory),h=new r.AlgebraFactory(f),p=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,d,f),_=await this.isPathArbitraryLengthDistinct(h,d,l);if(_.operation)return _.operation;d=_.context;const g=l.predicate,m=this.getPathSources(g),y=l.subject.termType==="Variable",v=l.object.termType==="Variable";if(l.subject.termType==="Variable"&&l.object.termType==="Variable"){const F=this.generateVariable(f,l),N=this.assignPatternSources(h,h.createPattern(l.subject,F,l.object,l.graph),m),R=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:N})),C=l.subject,M=l.object,U=new Set,B={},G=new a.MultiTransformIterator(R.bindingsStream,{multiTransform:$=>{const se=$.get(C),pe=$.get(M),we=l.graph.termType==="Variable"?$.get(l.graph):l.graph,Ce=(0,s.termToString)(se)+(0,s.termToString)(we),Le=(0,s.termToString)(pe)+(0,s.termToString)(we);return new a.TransformIterator(async()=>{if(U.has(Ce)&&U.has(Le))return new a.EmptyIterator;const Ie=new a.BufferedIterator,Oe={count:0};return U.has(Ce)||(U.add(Ce),await this.getSubjectAndObjectBindingsPredicateStar(C,M,se,se,g.path,we,d,B,{},Ie,Oe,h,p)),U.has(Le)||(U.add(Le),await this.getSubjectAndObjectBindingsPredicateStar(C,M,pe,pe,g.path,we,d,B,{},Ie,Oe,h,p)),Ie.map(ye=>(l.graph.termType==="Variable"&&(ye=ye.set(l.graph,we)),ye))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),K=(l.graph.termType==="Variable"?[C,l.object,l.graph]:[C,l.object]).map($=>({variable:$,canBeUndef:!1}));return{type:"bindings",bindingsStream:G,metadata:async()=>({...await R.metadata(),variables:K})}}if(!y&&!v){const F=this.generateVariable(f),N=await this.getObjectsPredicateStarEval(l.subject,g.path,F,l.graph,d,!0,h,p);return{type:"bindings",bindingsStream:N.bindingsStream.map(C=>l.object.equals(C.get(F))?l.graph.termType==="Variable"?p.bindings([[l.graph,C.get(l.graph)]]):p.bindings():null),metadata:async()=>({...await N.metadata(),variables:(l.graph.termType==="Variable"?[l.graph]:[]).map(C=>({variable:C,canBeUndef:!1}))})}}const A=y?l.object:l.subject,T=y?l.subject:l.object,S=y?h.createInv(g.path):g.path,P=await this.getObjectsPredicateStarEval(A,S,T,l.graph,d,!0,h,p),j=(l.graph.termType==="Variable"?[T,l.graph]:[T]).map(F=>({variable:F,canBeUndef:!1}));return{type:"bindings",bindingsStream:P.bindingsStream,metadata:async()=>({...await P.metadata(),variables:j})}}};return gx.ActorQueryOperationPathZeroOrMore=o,gx}var gAe;function abt(){return gAe||(gAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ibt(),t)}(hU)),hU}var pU={},yx={},yAe;function sbt(){if(yAe)return yx;yAe=1,Object.defineProperty(yx,"__esModule",{value:!0}),yx.ActorQueryOperationUpdateDeleteInsert=void 0;const t=ZPe(),e=qr(),r=dt,n=Ft(),i=ln(),a=rr(),s=ir();let o=class extends e.ActorQueryOperationTypedMediated{constructor(l){super(l,n.Algebra.Types.DELETE_INSERT);k(this,"mediatorUpdateQuads");k(this,"mediatorMergeBindingsContext");k(this,"blankNodeCounter",0);this.mediatorUpdateQuads=l.mediatorUpdateQuads,this.mediatorMergeBindingsContext=l.mediatorMergeBindingsContext}async testOperation(l,d){return(0,a.testReadOnly)(d)}async runOperation(l,d){const f=d.getSafe(r.KeysInitQuery.dataFactory),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,f),p=l.where?(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l.where,context:d})).bindingsStream:new s.ArrayIterator([h.bindings()],{autoStart:!1});let _,g;l.insert&&(_=new t.BindingsToQuadsIterator(f,l.insert.map(t.BindingsToQuadsIterator.localizeQuad.bind(null,f,this.blankNodeCounter)),p.clone()),this.blankNodeCounter++),l.delete&&(g=new t.BindingsToQuadsIterator(f,l.delete.map(t.BindingsToQuadsIterator.localizeQuad.bind(null,f,this.blankNodeCounter)),p.clone()),this.blankNodeCounter++);const{execute:m}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:_,quadStreamDelete:g,context:d});return{type:"void",execute:m}}};return yx.ActorQueryOperationUpdateDeleteInsert=o,yx}var bAe;function obt(){return bAe||(bAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(sbt(),t)}(pU)),pU}var _U={},bx={},vAe;function ubt(){if(vAe)return bx;vAe=1,Object.defineProperty(bx,"__esModule",{value:!0}),bx.ActorQueryOperationPathZeroOrOne=void 0;const t=Gl(),e=dt,r=Ft(),n=ln(),i=Mi(),a=rr(),s=ir();let o=class extends t.ActorAbstractPath{constructor(l){super(l,r.Algebra.Types.ZERO_OR_ONE_PATH);k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=l.mediatorMergeBindingsContext}async runOperation(l,d){const f=d.getSafe(e.KeysInitQuery.dataFactory),h=new r.AlgebraFactory(f),p=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,d,f),_=l.predicate,g=this.getPathSources(_),m=[];if(l.subject.termType!=="Variable"&&l.object.termType!=="Variable"&&l.subject.equals(l.object))return{type:"bindings",bindingsStream:new s.SingletonIterator(p.bindings()),metadata:()=>Promise.resolve({state:new i.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const y=await this.isPathArbitraryLengthDistinct(h,d,l);if(y.operation)return y.operation;d=y.context;const v=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:h.createPath(l.subject,_.path,l.object,l.graph)}));let A;if(l.subject.termType==="Variable"&&l.object.termType==="Variable"){const S=this.generateVariable(f,l,"p"),P=this.generateVariable(f,l,"x"),j=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:h.createUnion([this.assignPatternSources(h,h.createPattern(l.subject,S,P,l.graph),g),this.assignPatternSources(h,h.createPattern(P,S,l.subject,l.graph),g)])})).bindingsStream.map(F=>F.delete(S).delete(P).set(l.object,F.get(l.subject)));A=new s.UnionIterator([j,v.bindingsStream],{autoStart:!1})}else l.subject.termType==="Variable"&&m.push(p.bindings([[l.subject,l.object]])),l.object.termType==="Variable"&&m.push(p.bindings([[l.object,l.subject]])),A=v.bindingsStream.prepend(m);return{type:"bindings",bindingsStream:A,metadata:async()=>{const S=await v.metadata();return{...S,cardinality:{...S.cardinality,value:S.cardinality.value+1}}}}}};return bx.ActorQueryOperationPathZeroOrOne=o,bx}var AAe;function cbt(){return AAe||(AAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ubt(),t)}(_U)),_U}var mU={},vx={},gU={},Ax={},TAe;function lbt(){if(TAe)return Ax;TAe=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.ActorQueryProcess=void 0;const t=ke();let e=class extends t.Actor{constructor(n){super(n)}};return Ax.ActorQueryProcess=e,Ax}var wAe;function jO(){return wAe||(wAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(lbt(),t)}(gU)),gU}var SAe;function dbt(){if(SAe)return vx;SAe=1,Object.defineProperty(vx,"__esModule",{value:!0}),vx.ActorQueryProcessSequential=void 0;const t=jO(),e=dt,r=ke(),n=Ft(),i=ln(),a=rr();let s=class extends t.ActorQueryProcess{constructor(u){super(u);k(this,"mediatorContextPreprocess");k(this,"mediatorQueryParse");k(this,"mediatorOptimizeQueryOperation");k(this,"mediatorQueryOperation");k(this,"mediatorMergeBindingsContext");this.mediatorContextPreprocess=u.mediatorContextPreprocess,this.mediatorQueryParse=u.mediatorQueryParse,this.mediatorOptimizeQueryOperation=u.mediatorOptimizeQueryOperation,this.mediatorQueryOperation=u.mediatorQueryOperation,this.mediatorMergeBindingsContext=u.mediatorMergeBindingsContext}async test(u){return u.context.get(e.KeysInitQuery.explain)??u.context.get(new r.ActionContextKey("explain"))?(0,r.failTest)(`${this.name} is not able to explain queries.`):(0,r.passTestVoid)()}async run(u){let{operation:l,context:d}=await this.parse(u.query,u.context);return{operation:l,context:d}=await this.optimize(l,d),{result:await this.evaluate(l,d)}}async parse(u,l){l=(await this.mediatorContextPreprocess.mediate({context:l,initialize:!0})).context;let d;if(typeof u=="string"){l=l.set(e.KeysInitQuery.queryString,u);const f=l.get(e.KeysInitQuery.baseIRI),h=l.get(e.KeysInitQuery.queryFormat),p=await this.mediatorQueryParse.mediate({context:l,query:u,queryFormat:h,baseIRI:f});d=p.operation,p.baseIRI&&(l=l.set(e.KeysInitQuery.baseIRI,p.baseIRI))}else d=u;if(l.has(e.KeysInitQuery.initialBindings)){const f=l.getSafe(e.KeysInitQuery.dataFactory),h=new n.AlgebraFactory(f),p=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,l,f);d=(0,a.materializeOperation)(d,l.get(e.KeysInitQuery.initialBindings),h,p,{strictTargetVariables:!0}),l=l.delete(e.KeysInitQuery.queryString)}return{operation:d,context:l}}async optimize(u,l){return l=l.set(e.KeysInitQuery.query,u),{operation:u,context:l}=await this.mediatorOptimizeQueryOperation.mediate({context:l,operation:u}),l=l.set(e.KeysInitQuery.query,u),{operation:u,context:l}}async evaluate(u,l){const d=await this.mediatorQueryOperation.mediate({context:l,operation:u});return d.context=l,d}};return vx.ActorQueryProcessSequential=s,vx}var xAe;function fbt(){return xAe||(xAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(dbt(),t)}(mU)),mU}var yU={},Tx={},wx={},Sx={},EAe;function hbt(){var f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R,C,M,U,B,G,K,$,se,pe,we,Ce,Le,Ie,Oe,ye,Me,W,KG,le,me,Z,q,U3e,re,_e,he,Vc,Gc,XG,K3,X3,tn,JG,DE,Hc,YG,z;if(EAe)return Sx;EAe=1,Object.defineProperty(Sx,"__esModule",{value:!0}),Sx.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,r=typeof process=="object"&&process?process:{},n=(V,x,O,D)=>{typeof r.emitWarning=="function"?r.emitWarning(V,x,O,D):console.error(`[${O}] ${x}: ${V}`)},i=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof i>"u"){a=class{constructor(){k(this,"onabort");k(this,"_onabort",[]);k(this,"reason");k(this,"aborted",!1)}addEventListener(O,D){this._onabort.push(D)}},i=class{constructor(){k(this,"signal",new a);x()}abort(O){var D,H;if(!this.signal.aborted){this.signal.reason=O,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(O);(H=(D=this.signal).onabort)==null||H.call(D,O)}}};let V=((f=r.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{V&&(V=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var s=V=>!e.has(V),o=V=>V&&V===Math.floor(V)&&V>0&&isFinite(V),c=V=>o(V)?V<=Math.pow(2,8)?Uint8Array:V<=Math.pow(2,16)?Uint16Array:V<=Math.pow(2,32)?Uint32Array:V<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(V){super(V),this.fill(0)}},l=(h=class{constructor(x,O){k(this,"heap");k(this,"length");if(!w(h,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new O(x),this.length=0}static create(x){let O=c(x);if(!O)return[];be(h,p,!0);let D=new h(x,O);return be(h,p,!1),D}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},p=new WeakMap,qe(h,p,!1),h),d=(z=class{constructor(x){qe(this,W);qe(this,m);qe(this,y);qe(this,v);qe(this,A);qe(this,T);qe(this,S);qe(this,P);qe(this,j);k(this,"ttl");k(this,"ttlResolution");k(this,"ttlAutopurge");k(this,"updateAgeOnGet");k(this,"updateAgeOnHas");k(this,"allowStale");k(this,"noDisposeOnSet");k(this,"noUpdateTTL");k(this,"maxEntrySize");k(this,"sizeCalculation");k(this,"noDeleteOnFetchRejection");k(this,"noDeleteOnStaleGet");k(this,"allowStaleOnFetchAbort");k(this,"allowStaleOnFetchRejection");k(this,"ignoreFetchAbort");qe(this,F);qe(this,N);qe(this,R);qe(this,C);qe(this,M);qe(this,U);qe(this,B);qe(this,G);qe(this,K);qe(this,$);qe(this,se);qe(this,pe);qe(this,we);qe(this,Ce);qe(this,Le);qe(this,Ie);qe(this,Oe);qe(this,ye);qe(this,Me);qe(this,le,()=>{});qe(this,me,()=>{});qe(this,Z,()=>{});qe(this,q,()=>!1);qe(this,re,x=>{});qe(this,_e,(x,O,D)=>{});qe(this,he,(x,O,D,H)=>{if(D||H)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});k(this,_,"LRUCache");let{max:O=0,ttl:D,ttlResolution:H=1,ttlAutopurge:Y,updateAgeOnGet:Q,updateAgeOnHas:ee,allowStale:ie,dispose:Re,onInsert:oe,disposeAfter:Te,noDisposeOnSet:We,noUpdateTTL:Qe,maxSize:Xe=0,maxEntrySize:Pe=0,sizeCalculation:He,fetchMethod:Ee,memoMethod:ce,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:ht,ignoreFetchAbort:Et,perf:rt}=x;if(rt!==void 0&&typeof(rt==null?void 0:rt.now)!="function")throw new TypeError("perf option must have a now() method if specified");if(be(this,j,rt??t),O!==0&&!o(O))throw new TypeError("max option must be a nonnegative integer");let _t=O?c(O):Array;if(!_t)throw new Error("invalid max value: "+O);if(be(this,m,O),be(this,y,Xe),this.maxEntrySize=Pe||w(this,y),this.sizeCalculation=He,this.sizeCalculation){if(!w(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ce!==void 0&&typeof ce!="function")throw new TypeError("memoMethod must be a function if defined");if(be(this,P,ce),Ee!==void 0&&typeof Ee!="function")throw new TypeError("fetchMethod must be a function if specified");if(be(this,S,Ee),be(this,Oe,!!Ee),be(this,R,new Map),be(this,C,new Array(O).fill(void 0)),be(this,M,new Array(O).fill(void 0)),be(this,U,new _t(O)),be(this,B,new _t(O)),be(this,G,0),be(this,K,0),be(this,$,l.create(O)),be(this,F,0),be(this,N,0),typeof Re=="function"&&be(this,v,Re),typeof oe=="function"&&be(this,A,oe),typeof Te=="function"?(be(this,T,Te),be(this,se,[])):(be(this,T,void 0),be(this,se,void 0)),be(this,Ie,!!w(this,v)),be(this,Me,!!w(this,A)),be(this,ye,!!w(this,T)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!Qe,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!Be,this.allowStaleOnFetchAbort=!!ht,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(w(this,y)!==0&&!o(w(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,W,U3e).call(this)}if(this.allowStale=!!ie,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!Q,this.updateAgeOnHas=!!ee,this.ttlResolution=o(H)||H===0?H:1,this.ttlAutopurge=!!Y,this.ttl=D||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,W,KG).call(this)}if(w(this,m)===0&&this.ttl===0&&w(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!w(this,m)&&!w(this,y)){let ut="LRU_CACHE_UNBOUNDED";s(ut)&&(e.add(ut),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,z))}}get perf(){return w(this,j)}static unsafeExposeInternals(x){return{starts:w(x,we),ttls:w(x,Ce),autopurgeTimers:w(x,Le),sizes:w(x,pe),keyMap:w(x,R),keyList:w(x,C),valList:w(x,M),next:w(x,U),prev:w(x,B),get head(){return w(x,G)},get tail(){return w(x,K)},free:w(x,$),isBackgroundFetch:O=>{var D;return fe(D=x,W,tn).call(D,O)},backgroundFetch:(O,D,H,Y)=>{var Q;return fe(Q=x,W,X3).call(Q,O,D,H,Y)},moveToTail:O=>{var D;return fe(D=x,W,DE).call(D,O)},indexes:O=>{var D;return fe(D=x,W,Vc).call(D,O)},rindexes:O=>{var D;return fe(D=x,W,Gc).call(D,O)},isStale:O=>{var D;return w(D=x,q).call(D,O)}}}get max(){return w(this,m)}get maxSize(){return w(this,y)}get calculatedSize(){return w(this,N)}get size(){return w(this,F)}get fetchMethod(){return w(this,S)}get memoMethod(){return w(this,P)}get dispose(){return w(this,v)}get onInsert(){return w(this,A)}get disposeAfter(){return w(this,T)}getRemainingTTL(x){return w(this,R).has(x)?1/0:0}*entries(){for(let x of fe(this,W,Vc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,tn).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*rentries(){for(let x of fe(this,W,Gc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,tn).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*keys(){for(let x of fe(this,W,Vc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,tn).call(this,w(this,M)[x])&&(yield O)}}*rkeys(){for(let x of fe(this,W,Gc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,tn).call(this,w(this,M)[x])&&(yield O)}}*values(){for(let x of fe(this,W,Vc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,tn).call(this,w(this,M)[x])&&(yield w(this,M)[x])}*rvalues(){for(let x of fe(this,W,Gc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,tn).call(this,w(this,M)[x])&&(yield w(this,M)[x])}[(g=Symbol.iterator,_=Symbol.toStringTag,g)](){return this.entries()}find(x,O={}){for(let D of fe(this,W,Vc).call(this)){let H=w(this,M)[D],Y=fe(this,W,tn).call(this,H)?H.__staleWhileFetching:H;if(Y!==void 0&&x(Y,w(this,C)[D],this))return this.get(w(this,C)[D],O)}}forEach(x,O=this){for(let D of fe(this,W,Vc).call(this)){let H=w(this,M)[D],Y=fe(this,W,tn).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}rforEach(x,O=this){for(let D of fe(this,W,Gc).call(this)){let H=w(this,M)[D],Y=fe(this,W,tn).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}purgeStale(){let x=!1;for(let O of fe(this,W,Gc).call(this,{allowStale:!0}))w(this,q).call(this,O)&&(fe(this,W,Hc).call(this,w(this,C)[O],"expire"),x=!0);return x}info(x){let O=w(this,R).get(x);if(O===void 0)return;let D=w(this,M)[O],H=fe(this,W,tn).call(this,D)?D.__staleWhileFetching:D;if(H===void 0)return;let Y={value:H};if(w(this,Ce)&&w(this,we)){let Q=w(this,Ce)[O],ee=w(this,we)[O];if(Q&&ee){let ie=Q-(w(this,j).now()-ee);Y.ttl=ie,Y.start=Date.now()}}return w(this,pe)&&(Y.size=w(this,pe)[O]),Y}dump(){let x=[];for(let O of fe(this,W,Vc).call(this,{allowStale:!0})){let D=w(this,C)[O],H=w(this,M)[O],Y=fe(this,W,tn).call(this,H)?H.__staleWhileFetching:H;if(Y===void 0||D===void 0)continue;let Q={value:Y};if(w(this,Ce)&&w(this,we)){Q.ttl=w(this,Ce)[O];let ee=w(this,j).now()-w(this,we)[O];Q.start=Math.floor(Date.now()-ee)}w(this,pe)&&(Q.size=w(this,pe)[O]),x.unshift([D,Q])}return x}load(x){this.clear();for(let[O,D]of x){if(D.start){let H=Date.now()-D.start;D.start=w(this,j).now()-H}this.set(O,D.value,D)}}set(x,O,D={}){var We,Qe,Xe,Pe,He,Ee,ce;if(O===void 0)return this.delete(x),this;let{ttl:H=this.ttl,start:Y,noDisposeOnSet:Q=this.noDisposeOnSet,sizeCalculation:ee=this.sizeCalculation,status:ie}=D,{noUpdateTTL:Re=this.noUpdateTTL}=D,oe=w(this,he).call(this,x,O,D.size||0,ee);if(this.maxEntrySize&&oe>this.maxEntrySize)return ie&&(ie.set="miss",ie.maxEntrySizeExceeded=!0),fe(this,W,Hc).call(this,x,"set"),this;let Te=w(this,F)===0?void 0:w(this,R).get(x);if(Te===void 0)Te=w(this,F)===0?w(this,K):w(this,$).length!==0?w(this,$).pop():w(this,F)===w(this,m)?fe(this,W,K3).call(this,!1):w(this,F),w(this,C)[Te]=x,w(this,M)[Te]=O,w(this,R).set(x,Te),w(this,U)[w(this,K)]=Te,w(this,B)[Te]=w(this,K),be(this,K,Te),vn(this,F)._++,w(this,_e).call(this,Te,oe,ie),ie&&(ie.set="add"),Re=!1,w(this,Me)&&((We=w(this,A))==null||We.call(this,O,x,"add"));else{fe(this,W,DE).call(this,Te);let ne=w(this,M)[Te];if(O!==ne){if(w(this,Oe)&&fe(this,W,tn).call(this,ne)){ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=ne;xe!==void 0&&!Q&&(w(this,Ie)&&((Qe=w(this,v))==null||Qe.call(this,xe,x,"set")),w(this,ye)&&((Xe=w(this,se))==null||Xe.push([xe,x,"set"])))}else Q||(w(this,Ie)&&((Pe=w(this,v))==null||Pe.call(this,ne,x,"set")),w(this,ye)&&((He=w(this,se))==null||He.push([ne,x,"set"])));if(w(this,re).call(this,Te),w(this,_e).call(this,Te,oe,ie),w(this,M)[Te]=O,ie){ie.set="replace";let xe=ne&&fe(this,W,tn).call(this,ne)?ne.__staleWhileFetching:ne;xe!==void 0&&(ie.oldValue=xe)}}else ie&&(ie.set="update");w(this,Me)&&((Ee=this.onInsert)==null||Ee.call(this,O,x,O===ne?"update":"replace"))}if(H!==0&&!w(this,Ce)&&fe(this,W,KG).call(this),w(this,Ce)&&(Re||w(this,Z).call(this,Te,H,Y),ie&&w(this,me).call(this,ie,Te)),!Q&&w(this,ye)&&w(this,se)){let ne=w(this,se),xe;for(;xe=ne==null?void 0:ne.shift();)(ce=w(this,T))==null||ce.call(this,...xe)}return this}pop(){var x;try{for(;w(this,F);){let O=w(this,M)[w(this,G)];if(fe(this,W,K3).call(this,!0),fe(this,W,tn).call(this,O)){if(O.__staleWhileFetching)return O.__staleWhileFetching}else if(O!==void 0)return O}}finally{if(w(this,ye)&&w(this,se)){let O=w(this,se),D;for(;D=O==null?void 0:O.shift();)(x=w(this,T))==null||x.call(this,...D)}}}has(x,O={}){let{updateAgeOnHas:D=this.updateAgeOnHas,status:H}=O,Y=w(this,R).get(x);if(Y!==void 0){let Q=w(this,M)[Y];if(fe(this,W,tn).call(this,Q)&&Q.__staleWhileFetching===void 0)return!1;if(w(this,q).call(this,Y))H&&(H.has="stale",w(this,me).call(this,H,Y));else return D&&w(this,le).call(this,Y),H&&(H.has="hit",w(this,me).call(this,H,Y)),!0}else H&&(H.has="miss");return!1}peek(x,O={}){let{allowStale:D=this.allowStale}=O,H=w(this,R).get(x);if(H===void 0||!D&&w(this,q).call(this,H))return;let Y=w(this,M)[H];return fe(this,W,tn).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:Q=this.ttl,noDisposeOnSet:ee=this.noDisposeOnSet,size:ie=0,sizeCalculation:Re=this.sizeCalculation,noUpdateTTL:oe=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:We=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:Pe,forceRefresh:He=!1,status:Ee,signal:ce}=O;if(!w(this,Oe))return Ee&&(Ee.fetch="get"),this.get(x,{allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,status:Ee});let ne={allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,ttl:Q,noDisposeOnSet:ee,size:ie,sizeCalculation:Re,noUpdateTTL:oe,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:We,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ee,signal:ce},xe=w(this,R).get(x);if(xe===void 0){Ee&&(Ee.fetch="miss");let Be=fe(this,W,X3).call(this,x,xe,ne,Pe);return Be.__returned=Be}else{let Be=w(this,M)[xe];if(fe(this,W,tn).call(this,Be)){let _t=D&&Be.__staleWhileFetching!==void 0;return Ee&&(Ee.fetch="inflight",_t&&(Ee.returnedStale=!0)),_t?Be.__staleWhileFetching:Be.__returned=Be}let ht=w(this,q).call(this,xe);if(!He&&!ht)return Ee&&(Ee.fetch="hit"),fe(this,W,DE).call(this,xe),H&&w(this,le).call(this,xe),Ee&&w(this,me).call(this,Ee,xe),Be;let Et=fe(this,W,X3).call(this,x,xe,ne,Pe),rt=Et.__staleWhileFetching!==void 0&&D;return Ee&&(Ee.fetch=ht?"stale":"refresh",rt&&ht&&(Ee.returnedStale=!0)),rt?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(x,O={}){let D=await this.fetch(x,O);if(D===void 0)throw new Error("fetch() returned undefined");return D}memo(x,O={}){let D=w(this,P);if(!D)throw new Error("no memoMethod provided to constructor");let{context:H,forceRefresh:Y,...Q}=O,ee=this.get(x,Q);if(!Y&&ee!==void 0)return ee;let ie=D(x,ee,{options:Q,context:H});return this.set(x,ie,Q),ie}get(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:Q}=O,ee=w(this,R).get(x);if(ee!==void 0){let ie=w(this,M)[ee],Re=fe(this,W,tn).call(this,ie);return Q&&w(this,me).call(this,Q,ee),w(this,q).call(this,ee)?(Q&&(Q.get="stale"),Re?(Q&&D&&ie.__staleWhileFetching!==void 0&&(Q.returnedStale=!0),D?ie.__staleWhileFetching:void 0):(Y||fe(this,W,Hc).call(this,x,"expire"),Q&&D&&(Q.returnedStale=!0),D?ie:void 0)):(Q&&(Q.get="hit"),Re?ie.__staleWhileFetching:(fe(this,W,DE).call(this,ee),H&&w(this,le).call(this,ee),ie))}else Q&&(Q.get="miss")}delete(x){return fe(this,W,Hc).call(this,x,"delete")}clear(){return fe(this,W,YG).call(this,"delete")}},m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,j=new WeakMap,F=new WeakMap,N=new WeakMap,R=new WeakMap,C=new WeakMap,M=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,K=new WeakMap,$=new WeakMap,se=new WeakMap,pe=new WeakMap,we=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Me=new WeakMap,W=new WeakSet,KG=function(){let x=new u(w(this,m)),O=new u(w(this,m));be(this,Ce,x),be(this,we,O);let D=this.ttlAutopurge?new Array(w(this,m)):void 0;be(this,Le,D),be(this,Z,(Q,ee,ie=w(this,j).now())=>{if(O[Q]=ee!==0?ie:0,x[Q]=ee,D!=null&&D[Q]&&(clearTimeout(D[Q]),D[Q]=void 0),ee!==0&&D){let Re=setTimeout(()=>{w(this,q).call(this,Q)&&fe(this,W,Hc).call(this,w(this,C)[Q],"expire")},ee+1);Re.unref&&Re.unref(),D[Q]=Re}}),be(this,le,Q=>{O[Q]=x[Q]!==0?w(this,j).now():0}),be(this,me,(Q,ee)=>{if(x[ee]){let ie=x[ee],Re=O[ee];if(!ie||!Re)return;Q.ttl=ie,Q.start=Re,Q.now=H||Y();let oe=Q.now-Re;Q.remainingTTL=ie-oe}});let H=0,Y=()=>{let Q=w(this,j).now();if(this.ttlResolution>0){H=Q;let ee=setTimeout(()=>H=0,this.ttlResolution);ee.unref&&ee.unref()}return Q};this.getRemainingTTL=Q=>{let ee=w(this,R).get(Q);if(ee===void 0)return 0;let ie=x[ee],Re=O[ee];if(!ie||!Re)return 1/0;let oe=(H||Y())-Re;return ie-oe},be(this,q,Q=>{let ee=O[Q],ie=x[Q];return!!ie&&!!ee&&(H||Y())-ee>ie})},le=new WeakMap,me=new WeakMap,Z=new WeakMap,q=new WeakMap,U3e=function(){let x=new u(w(this,m));be(this,N,0),be(this,pe,x),be(this,re,O=>{be(this,N,w(this,N)-x[O]),x[O]=0}),be(this,he,(O,D,H,Y)=>{if(fe(this,W,tn).call(this,D))return 0;if(!o(H))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(H=Y(D,O),!o(H))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return H}),be(this,_e,(O,D,H)=>{if(x[O]=D,w(this,y)){let Y=w(this,y)-x[O];for(;w(this,N)>Y;)fe(this,W,K3).call(this,!0)}be(this,N,w(this,N)+x[O]),H&&(H.entrySize=D,H.totalCalculatedSize=w(this,N))})},re=new WeakMap,_e=new WeakMap,he=new WeakMap,Vc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,K);!(!fe(this,W,XG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,G)));)O=w(this,B)[O]},Gc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,G);!(!fe(this,W,XG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,K)));)O=w(this,U)[O]},XG=function(x){return x!==void 0&&w(this,R).get(w(this,C)[x])===x},K3=function(x){var Y,Q,ee;let O=w(this,G),D=w(this,C)[O],H=w(this,M)[O];return w(this,Oe)&&fe(this,W,tn).call(this,H)?H.__abortController.abort(new Error("evicted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Y=w(this,v))==null||Y.call(this,H,D,"evict")),w(this,ye)&&((Q=w(this,se))==null||Q.push([H,D,"evict"]))),w(this,re).call(this,O),(ee=w(this,Le))!=null&&ee[O]&&(clearTimeout(w(this,Le)[O]),w(this,Le)[O]=void 0),x&&(w(this,C)[O]=void 0,w(this,M)[O]=void 0,w(this,$).push(O)),w(this,F)===1?(be(this,G,be(this,K,0)),w(this,$).length=0):be(this,G,w(this,U)[O]),w(this,R).delete(D),vn(this,F)._--,O},X3=function(x,O,D,H){let Y=O===void 0?void 0:w(this,M)[O];if(fe(this,W,tn).call(this,Y))return Y;let Q=new i,{signal:ee}=D;ee==null||ee.addEventListener("abort",()=>Q.abort(ee.reason),{signal:Q.signal});let ie={signal:Q.signal,options:D,context:H},Re=(Pe,He=!1)=>{let{aborted:Ee}=Q.signal,ce=D.ignoreFetchAbort&&Pe!==void 0,ne=D.ignoreFetchAbort||!!(D.allowStaleOnFetchAbort&&Pe!==void 0);if(D.status&&(Ee&&!He?(D.status.fetchAborted=!0,D.status.fetchError=Q.signal.reason,ce&&(D.status.fetchAbortIgnored=!0)):D.status.fetchResolved=!0),Ee&&!ce&&!He)return Te(Q.signal.reason,ne);let xe=Qe,Be=w(this,M)[O];return(Be===Qe||ce&&He&&Be===void 0)&&(Pe===void 0?xe.__staleWhileFetching!==void 0?w(this,M)[O]=xe.__staleWhileFetching:fe(this,W,Hc).call(this,x,"fetch"):(D.status&&(D.status.fetchUpdated=!0),this.set(x,Pe,ie.options))),Pe},oe=Pe=>(D.status&&(D.status.fetchRejected=!0,D.status.fetchError=Pe),Te(Pe,!1)),Te=(Pe,He)=>{let{aborted:Ee}=Q.signal,ce=Ee&&D.allowStaleOnFetchAbort,ne=ce||D.allowStaleOnFetchRejection,xe=ne||D.noDeleteOnFetchRejection,Be=Qe;if(w(this,M)[O]===Qe&&(!xe||!He&&Be.__staleWhileFetching===void 0?fe(this,W,Hc).call(this,x,"fetch"):ce||(w(this,M)[O]=Be.__staleWhileFetching)),ne)return D.status&&Be.__staleWhileFetching!==void 0&&(D.status.returnedStale=!0),Be.__staleWhileFetching;if(Be.__returned===Be)throw Pe},We=(Pe,He)=>{var ce;let Ee=(ce=w(this,S))==null?void 0:ce.call(this,x,Y,ie);Ee&&Ee instanceof Promise&&Ee.then(ne=>Pe(ne===void 0?void 0:ne),He),Q.signal.addEventListener("abort",()=>{(!D.ignoreFetchAbort||D.allowStaleOnFetchAbort)&&(Pe(void 0),D.allowStaleOnFetchAbort&&(Pe=ne=>Re(ne,!0)))})};D.status&&(D.status.fetchDispatched=!0);let Qe=new Promise(We).then(Re,oe),Xe=Object.assign(Qe,{__abortController:Q,__staleWhileFetching:Y,__returned:void 0});return O===void 0?(this.set(x,Xe,{...ie.options,status:void 0}),O=w(this,R).get(x)):w(this,M)[O]=Xe,Xe},tn=function(x){if(!w(this,Oe))return!1;let O=x;return!!O&&O instanceof Promise&&O.hasOwnProperty("__staleWhileFetching")&&O.__abortController instanceof i},JG=function(x,O){w(this,B)[O]=x,w(this,U)[x]=O},DE=function(x){x!==w(this,K)&&(x===w(this,G)?be(this,G,w(this,U)[x]):fe(this,W,JG).call(this,w(this,B)[x],w(this,U)[x]),fe(this,W,JG).call(this,w(this,K),x),be(this,K,x))},Hc=function(x,O){var H,Y,Q,ee,ie,Re;let D=!1;if(w(this,F)!==0){let oe=w(this,R).get(x);if(oe!==void 0)if((H=w(this,Le))!=null&&H[oe]&&(clearTimeout((Y=w(this,Le))==null?void 0:Y[oe]),w(this,Le)[oe]=void 0),D=!0,w(this,F)===1)fe(this,W,YG).call(this,O);else{w(this,re).call(this,oe);let Te=w(this,M)[oe];if(fe(this,W,tn).call(this,Te)?Te.__abortController.abort(new Error("deleted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Q=w(this,v))==null||Q.call(this,Te,x,O)),w(this,ye)&&((ee=w(this,se))==null||ee.push([Te,x,O]))),w(this,R).delete(x),w(this,C)[oe]=void 0,w(this,M)[oe]=void 0,oe===w(this,K))be(this,K,w(this,B)[oe]);else if(oe===w(this,G))be(this,G,w(this,U)[oe]);else{let We=w(this,B)[oe];w(this,U)[We]=w(this,U)[oe];let Qe=w(this,U)[oe];w(this,B)[Qe]=w(this,B)[oe]}vn(this,F)._--,w(this,$).push(oe)}}if(w(this,ye)&&((ie=w(this,se))!=null&&ie.length)){let oe=w(this,se),Te;for(;Te=oe==null?void 0:oe.shift();)(Re=w(this,T))==null||Re.call(this,...Te)}return D},YG=function(x){var O,D,H,Y;for(let Q of fe(this,W,Gc).call(this,{allowStale:!0})){let ee=w(this,M)[Q];if(fe(this,W,tn).call(this,ee))ee.__abortController.abort(new Error("deleted"));else{let ie=w(this,C)[Q];w(this,Ie)&&((O=w(this,v))==null||O.call(this,ee,ie,x)),w(this,ye)&&((D=w(this,se))==null||D.push([ee,ie,x]))}}if(w(this,R).clear(),w(this,M).fill(void 0),w(this,C).fill(void 0),w(this,Ce)&&w(this,we)){w(this,Ce).fill(0),w(this,we).fill(0);for(let Q of w(this,Le)??[])Q!==void 0&&clearTimeout(Q);(H=w(this,Le))==null||H.fill(void 0)}if(w(this,pe)&&w(this,pe).fill(0),be(this,G,0),be(this,K,0),w(this,$).length=0,be(this,N,0),be(this,F,0),w(this,ye)&&w(this,se)){let Q=w(this,se),ee;for(;ee=Q==null?void 0:Q.shift();)(Y=w(this,T))==null||Y.call(this,...ee)}},z);return Sx.LRUCache=d,Sx}var xx={},Ex={},IAe;function pbt(){if(IAe)return Ex;IAe=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.LinkedRdfSourcesAsyncRdfIterator=void 0;const t=dt,e=Mi(),r=ir();let n=class extends r.BufferedIterator{constructor(s,o,c,u,l,d,f){super({autoStart:!1,...f});k(this,"operation");k(this,"queryBindingsOptions");k(this,"context");k(this,"firstLink");k(this,"maxIterators");k(this,"sourceStateGetter");k(this,"started",!1);k(this,"currentIterators",[]);k(this,"iteratorsPendingCreation",0);k(this,"iteratorsPendingTermination",0);k(this,"accumulatedMetadata",Promise.resolve(void 0));k(this,"preflightMetadata");if(this._reading=!1,this.operation=s,this.queryBindingsOptions=o,this.context=c,this.firstLink=u,this.maxIterators=l,this.sourceStateGetter=d,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}kickstart(){this.started||this._fillBufferAsync()}getProperty(s,o){return s==="metadata"&&!this.started&&(this.preflightMetadata||(this.preflightMetadata=new Promise((c,u)=>{this.sourceStateGetter(this.firstLink,{}).then(l=>{const d=l.source.queryBindings(this.operation,this.context);d.getProperty("metadata",f=>{f.state=new e.MetadataValidationState,d.destroy(),this.accumulateMetadata(l.metadata,f).then(h=>{const p={...l.metadata,...f,...h};c(p)}).catch(()=>{c({...l.metadata,state:new e.MetadataValidationState})})})}).catch(u)})),this.preflightMetadata.then(c=>this.setProperty("metadata",c)).catch(c=>this.emit("error",c))),super.getProperty(s,o)}_end(s){for(const o of this.currentIterators)o.destroy();super._end(s)}_read(s,o){if(this.started){for(const c of this.currentIterators){for(;s>0;){const u=c.read();if(u===null)break;s--,this._push(u)}if(s<=0)break}s>=0&&this.canStartNewIterator()&&this.sourceStateGetter(this.firstLink,{}).then(c=>{this.startIteratorsForNextUrls(c.handledDatasets,!1)}),o()}else this.started=!0,this.sourceStateGetter(this.firstLink,{}).then(c=>{this.startIterator(c),o()}).catch(c=>setTimeout(()=>this.destroy(c)))}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination<this.maxIterators&&(!this.canStartNewIteratorConsiderReadable()||!this.readable)}canStartNewIteratorConsiderReadable(){return!0}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination>0}startIterator(s){try{const o=s.source.queryBindings(this.operation,this.context,this.queryBindingsOptions);this.currentIterators.push(o);let c=!1,u=!1;o._destination=this,o.on("error",l=>this.destroy(l)),o.on("readable",()=>this._fillBuffer()),o.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(o),1),c=!0,u||this.iteratorsPendingTermination++,u&&this.startIteratorsForNextUrls(s.handledDatasets,!0)}),o.getProperty("metadata",l=>{this.accumulatedMetadata=this.accumulatedMetadata.then(d=>(async()=>(d||(d=s.metadata),this.accumulateMetadata(d,l)))().then(f=>{const h={...s.metadata,...l,...f};return h.state=new e.MetadataValidationState,this.updateMetadata(h),this.preflightMetadata&&this.preflightMetadata.then(p=>p.state.invalidate()).catch(()=>{}),this.getSourceLinks(h,s).then(p=>Promise.all(p)).then(async p=>{const _=await this.getLinkQueue();for(const g of p)_.push(g,s.link);u=!0,c&&this.iteratorsPendingTermination--,this.startIteratorsForNextUrls(s.handledDatasets,!0)}).catch(p=>this.destroy(p)),h})).catch(d=>(this.destroy(d),{}))})}catch(o){this.destroy(o)}}updateMetadata(s){const o=this.getProperty("metadata");this.setProperty("metadata",s),o==null||o.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(s,o){this.getLinkQueue().then(c=>{for(;this.canStartNewIterator()&&this.isRunning();){const u=c.pop();if(u)this.iteratorsPendingCreation++,this.sourceStateGetter(u,s).then(l=>{const d=this.context.get(t.KeysStatistics.dereferencedLinks);d&&d.updateStatistic({url:l.link.url,metadata:{...l.metadata,...l.link.metadata}},l.source),this.iteratorsPendingCreation--,this.startIterator(l)}).catch(l=>this.emit("error",l));else break}o&&this.isCloseable(c,!0)&&this.close()}).catch(c=>this.destroy(c))}isCloseable(s,o){return s.isEmpty()&&!this.areIteratorsRunning()}};return Ex.LinkedRdfSourcesAsyncRdfIterator=n,Ex}var OAe;function _bt(){if(OAe)return xx;OAe=1,Object.defineProperty(xx,"__esModule",{value:!0}),xx.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const t=dt,e=pbt();let r=class extends e.LinkedRdfSourcesAsyncRdfIterator{constructor(a,s,o,c,u,l,d,f,h){super(a,s,o,c,u,l);k(this,"mediatorMetadataAccumulate");k(this,"mediatorRdfResolveHypermediaLinks");k(this,"mediatorRdfResolveHypermediaLinksQueue");k(this,"handledUrls");k(this,"linkQueue");this.mediatorMetadataAccumulate=d,this.mediatorRdfResolveHypermediaLinks=f,this.mediatorRdfResolveHypermediaLinksQueue=h,this.handledUrls={[c.url]:!0}}isCloseable(a,s){return a.isEmpty()&&!this.areIteratorsRunning()}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({context:this.context}).then(a=>a.linkQueue)),this.linkQueue}async getSourceLinks(a,s){try{const{links:o}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:a}),c=this.context.get(t.KeysStatistics.discoveredLinks);if(c)for(const u of o)c.updateStatistic({url:u.url,metadata:{...u.metadata}},s.link);return o.filter(u=>this.handledUrls[u.url]?!1:(this.handledUrls[u.url]=!0,!0))}catch{return[]}}async accumulateMetadata(a,s){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:a,appendingMetadata:s,context:this.context})).metadata}};return xx.MediatedLinkedRdfSourcesAsyncRdfIterator=r,xx}var RAe;function V3e(){if(RAe)return wx;RAe=1,Object.defineProperty(wx,"__esModule",{value:!0}),wx.QuerySourceHypermedia=void 0;const t=ir(),e=hbt(),r=_bt();let n=class{constructor(a,s,o,c,u,l){k(this,"referenceValue");k(this,"firstLink");k(this,"mediators");k(this,"dataFactory");k(this,"bindingsFactory");k(this,"sourcesState");k(this,"cacheSize");k(this,"maxIterators");this.referenceValue=s.url,this.cacheSize=a,this.firstLink=s,this.maxIterators=o,this.mediators=c,this.dataFactory=u,this.bindingsFactory=l,this.sourcesState=new e.LRUCache({max:this.cacheSize})}async getSelectorShape(a){return(await this.getSourceCached(this.firstLink,{},a)).source.getSelectorShape(a)}async getFilterFactor(a){return(await this.getSourceCached(this.firstLink,{},a)).source.getFilterFactor(a)}queryBindings(a,s,o){this.sourcesState.size===0&&this.getSourceCached(this.firstLink,{},s).catch(u=>c.destroy(u));const c=new r.MediatedLinkedRdfSourcesAsyncRdfIterator(a,o,s,this.firstLink,this.maxIterators,(u,l)=>this.getSourceCached(u,l,s),this.mediators.mediatorMetadataAccumulate,this.mediators.mediatorRdfResolveHypermediaLinks,this.mediators.mediatorRdfResolveHypermediaLinksQueue);return c}queryQuads(a,s){return new t.TransformIterator(async()=>(await this.getSourceCached(this.firstLink,{},s)).source.queryQuads(a,s),{autoStart:!1})}async queryBoolean(a,s){return await(await this.getSourceCached(this.firstLink,{},s)).source.queryBoolean(a,s)}async queryVoid(a,s){return await(await this.getSourceCached(this.firstLink,{},s)).source.queryVoid(a,s)}async getSource(a,s,o){const{source:c,metadata:u,cachePolicy:l}=await this.mediators.mediatorQuerySourceDereferenceLink.mediate({link:a,handledDatasets:s,context:o});return{link:a,source:c,metadata:u,handledDatasets:s,cachePolicy:l}}getSourceCached(a,s,o){let c=this.sourcesState.get(a.url);return c?(async()=>{var l;const u=await c;return u.cachePolicy&&!await((l=u.cachePolicy)==null?void 0:l.satisfiesWithoutRevalidation({link:a,context:o}))?(this.sourcesState.delete(a.url),this.getSourceCached(a,s,o)):u})():(c=this.getSource(a,s,o),this.sourcesState.set(a.url,c),c)}toString(){return`QuerySourceHypermedia(${this.firstLink.url})`}};return wx.QuerySourceHypermedia=n,wx}var PAe;function mbt(){if(PAe)return Tx;PAe=1,Object.defineProperty(Tx,"__esModule",{value:!0}),Tx.ActorQuerySourceIdentifyHypermedia=void 0;const t=LO(),e=dt,r=ke(),n=ln(),i=V3e();let a=class extends t.ActorQuerySourceIdentify{constructor(c){super(c);k(this,"mediatorMetadataAccumulate");k(this,"mediatorQuerySourceDereferenceLink");k(this,"mediatorRdfResolveHypermediaLinks");k(this,"mediatorRdfResolveHypermediaLinksQueue");k(this,"mediatorMergeBindingsContext");k(this,"cacheSize");k(this,"maxIterators");this.mediatorMetadataAccumulate=c.mediatorMetadataAccumulate,this.mediatorQuerySourceDereferenceLink=c.mediatorQuerySourceDereferenceLink,this.mediatorRdfResolveHypermediaLinks=c.mediatorRdfResolveHypermediaLinks,this.mediatorRdfResolveHypermediaLinksQueue=c.mediatorRdfResolveHypermediaLinksQueue,this.mediatorMergeBindingsContext=c.mediatorMergeBindingsContext,this.cacheSize=c.cacheSize,this.maxIterators=c.maxIterators}async test(c){return typeof c.querySourceUnidentified.value!="string"?(0,r.failTest)(`${this.name} requires a single query source with a URL value to be present in the context.`):(0,r.passTestVoid)()}async run(c){const u=c.querySourceUnidentified.context??new r.ActionContext,l=c.context.getSafe(e.KeysInitQuery.dataFactory);return{querySource:{source:new i.QuerySourceHypermedia(this.cacheSize,{url:c.querySourceUnidentified.value,forceSourceType:c.querySourceUnidentified.type},this.maxIterators,{mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorQuerySourceDereferenceLink:this.mediatorQuerySourceDereferenceLink,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue},l,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,l)),context:u}}}};return Tx.ActorQuerySourceIdentifyHypermedia=a,Tx}var NAe;function gbt(){return NAe||(NAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mbt(),t),r(V3e(),t)}(yU)),yU}var bU={},Ix={},FAe;function ybt(){if(FAe)return Ix;FAe=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.ActorRdfJoinNone=void 0;const t=$i(),e=dt,r=ke(),n=ln(),i=Mi(),a=ir();let s=class extends t.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"none",limitEntries:0});k(this,"mediatorMergeBindingsContext");this.mediatorMergeBindingsContext=u.mediatorMergeBindingsContext}async test(u){return u.entries.length>0?(0,r.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(u,void 0)}async getOutput(u){const l=u.context.getSafe(e.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,u.context,l);return{result:{bindingsStream:new a.ArrayIterator([d.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new i.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(u,l){return(0,r.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},l)}};return Ix.ActorRdfJoinNone=s,Ix}var MAe;function bbt(){return MAe||(MAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ybt(),t)}(bU)),bU}var vU={},Ox={},AU={},Rx={},DAe;function vbt(){if(DAe)return Rx;DAe=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.ActorRdfJoinMultiBind=void 0;const t=$i(),e=dt,r=ke(),n=Ft(),i=ln(),a=rr(),s=ir();let o=class G3e extends t.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1});k(this,"bindOrder");k(this,"selectivityModifier");k(this,"minMaxCardinalityRatio");k(this,"mediatorJoinEntriesSort");k(this,"mediatorQueryOperation");k(this,"mediatorMergeBindingsContext");this.bindOrder=l.bindOrder,this.selectivityModifier=l.selectivityModifier,this.minMaxCardinalityRatio=l.minMaxCardinalityRatio,this.mediatorJoinEntriesSort=l.mediatorJoinEntriesSort,this.mediatorQueryOperation=l.mediatorQueryOperation,this.mediatorMergeBindingsContext=l.mediatorMergeBindingsContext}static createBindStream(l,d,f,h,p,_,g){const m=l==="depth-first",y=v=>{const A=f.map(S=>(0,a.materializeOperation)(S,v,_,g,{bindFilter:!0})),T=S=>S.merge(v);return new s.TransformIterator(async()=>(await h(A,v)).transform({map:T}),{maxBufferSize:128,autoStart:m})};switch(l){case"depth-first":return new s.MultiTransformIterator(d,{autoStart:!1,multiTransform:y,optional:p});case"breadth-first":return new s.UnionIterator(d.transform({map:y,optional:p,autoStart:!1}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${l}`)}}async getOutput(l,d){const f=l.context.getSafe(e.KeysInitQuery.dataFactory),h=new n.AlgebraFactory(f),p=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,l.context,f),_=d.entriesSorted;this.logDebug(l.context,"First entry for Bind Join: ",()=>({entry:{..._[0].operation,metadata:void 0},cardinality:_[0].metadata.cardinality,order:_[0].metadata.order,availableOrders:_[0].metadata.availableOrders}));for(const[A,T]of _.entries())A!==0&&T.output.bindingsStream.destroy();const g=_[0].output,m=[..._];m.splice(0,1);const y=l.context.set(e.KeysQueryOperation.joinLeftMetadata,_[0].metadata).set(e.KeysQueryOperation.joinRightMetadatas,m.map(A=>A.metadata));return{result:{type:"bindings",bindingsStream:G3e.createBindStream(this.bindOrder,g.bindingsStream,m.map(A=>A.operation),async(A,T)=>{const S=A.length===1?A[0]:h.createJoin(A,A.every(j=>!j.metadata));return(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:S,context:y==null?void 0:y.set(e.KeysQueryOperation.joinBindings,T)})).bindingsStream},!1,h,p),metadata:()=>this.constructResultMetadata(_,_.map(A=>A.metadata),l.context)},physicalPlanMetadata:{bindIndex:d.entriesUnsorted.indexOf(_[0]),bindOperation:_[0].operation,bindOperationCardinality:_[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(l){let d=!0;return n.algebraUtils.visitOperation(l,{[n.Algebra.Types.EXTEND]:{preVisitor:()=>(d=!1,{shortcut:!0})},[n.Algebra.Types.GROUP]:{preVisitor:()=>(d=!1,{shortcut:!0})}}),d}async getJoinCoefficients(l,d){let{metadatas:f}=d;const h=l.entries.map((N,R)=>({...N,metadata:f[R]})),p=await t.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,h,l.context);if(p.isFailed())return p;const _=p.get();f=_.map(N=>N.metadata);const g=t.ActorRdfJoin.getRequestInitialTimes(f),m=t.ActorRdfJoin.getRequestItemTimes(f),y=[..._],v=[...g],A=[...m];if(y.splice(0,1),v.splice(0,1),A.splice(0,1),y.some(N=>!this.canBindWithOperation(N.operation)))return(0,r.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(y.some(N=>N.operationModified))return(0,r.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const T=m.some(N=>N>0);if(f[0].cardinality.value*this.minMaxCardinalityRatio/(T?1:3)>Math.max(...f.map(N=>N.cardinality.value)))return(0,r.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const S=await Promise.all(y.map(async N=>(await this.mediatorJoinSelectivity.mediate({entries:[_[0],N],context:l.context})).selectivity*this.selectivityModifier)),P=y.map((N,R)=>N.metadata.cardinality.value*S[R]).reduce((N,R)=>N+R,0),j=v.reduce((N,R)=>N+R,0),F=A.reduce((N,R)=>N+R,0);return(0,r.passTestWithSideData)({iterations:f[0].cardinality.value*P,persistedItems:0,blockingItems:0,requestTime:g[0]+f[0].cardinality.value*(m[0]+j+P*F)},{...d,entriesUnsorted:h,entriesSorted:_})}};return Rx.ActorRdfJoinMultiBind=o,Rx}var CAe;function H3e(){return CAe||(CAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(vbt(),t)}(AU)),AU}var LAe;function Abt(){if(LAe)return Ox;LAe=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.ActorRdfJoinOptionalBind=void 0;const t=H3e(),e=$i(),r=dt,n=ke(),i=Ft(),a=ln(),s=rr();let o=class extends e.ActorRdfJoin{constructor(l){super(l,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0,canHandleOperationRequired:!0});k(this,"bindOrder");k(this,"selectivityModifier");k(this,"mediatorQueryOperation");k(this,"mediatorMergeBindingsContext");this.bindOrder=l.bindOrder,this.selectivityModifier=l.selectivityModifier,this.mediatorQueryOperation=l.mediatorQueryOperation,this.mediatorMergeBindingsContext=l.mediatorMergeBindingsContext}async getOutput(l){const d=l.context.getSafe(r.KeysInitQuery.dataFactory),f=new i.AlgebraFactory(d),h=await a.BindingsFactory.create(this.mediatorMergeBindingsContext,l.context,d);l.entries[1].output.bindingsStream.close();const p=l.context.set(r.KeysQueryOperation.joinLeftMetadata,await l.entries[0].output.metadata()).set(r.KeysQueryOperation.joinRightMetadatas,[await l.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:t.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,l.entries[0].output.bindingsStream,[l.entries[1].operation],async(g,m)=>{const y=g[0];return(0,s.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:y,context:p==null?void 0:p.set(r.KeysQueryOperation.joinBindings,m)})).bindingsStream},!0,f,h),metadata:async()=>await this.constructResultMetadata(l.entries,await e.ActorRdfJoin.getMetadatas(l.entries),l.context,{},!0)}}}async getJoinCoefficients(l,d){const{metadatas:f}=d,h=e.ActorRdfJoin.getRequestInitialTimes(f),p=e.ActorRdfJoin.getRequestItemTimes(f);if(l.entries[1].operation.type===i.Algebra.Types.EXTEND||l.entries[1].operation.type===i.Algebra.Types.GROUP)return(0,n.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const _=(await this.mediatorJoinSelectivity.mediate({entries:l.entries,context:l.context})).selectivity*this.selectivityModifier;return(0,n.passTestWithSideData)({iterations:f[0].cardinality.value*f[1].cardinality.value*_,persistedItems:0,blockingItems:0,requestTime:h[0]+f[0].cardinality.value*(p[0]+h[1]+_*f[1].cardinality.value*p[1])},d)}};return Ox.ActorRdfJoinOptionalBind=o,Ox}var jAe;function Tbt(){return jAe||(jAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Abt(),t)}(vU)),vU}var TU={},Px={},wU={},Nx={},BAe;function wbt(){if(BAe)return Nx;BAe=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.ActorTermComparatorFactory=void 0;const t=ke();let e=class extends t.Actor{constructor(i){super(i);k(this,"mediatorQueryOperation");k(this,"mediatorFunctionFactory");k(this,"mediatorMergeBindingsContext");this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return Nx.ActorTermComparatorFactory=e,Nx}var qAe;function Sbt(){return qAe||(qAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(wbt(),t)}(wU)),wU}var Fx={},UAe;function xbt(){if(UAe)return Fx;UAe=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.TermComparatorExpressionEvaluator=void 0;let t=class{constructor(r,n,i){k(this,"internalEvaluator");k(this,"equalityFunction");k(this,"lessThanFunction");k(this,"_TERM_ORDERING_PRIORITY",{Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5});this.internalEvaluator=r,this.equalityFunction=n,this.lessThanFunction=i}orderTypes(r,n){if(r===n)return 0;if(r===void 0)return-1;if(n===void 0)return 1;if(r.termType!==n.termType)return this._TERM_ORDERING_PRIORITY[r.termType]<this._TERM_ORDERING_PRIORITY[n.termType]?-1:1;if(r.equals(n))return 0;if(r.termType==="Quad"&&n.termType==="Quad"){const i=this.orderTypes(r.subject,n.subject);if(i!==0)return i;const a=this.orderTypes(r.predicate,n.predicate);if(a!==0)return a;const s=this.orderTypes(r.object,n.object);return s!==0?s:this.orderTypes(r.graph,n.graph)}return r.termType==="Literal"?this.orderLiteralTypes(r,n):this.comparePrimitives(r.value,n.value)}orderLiteralTypes(r,n){const i=this.internalEvaluator.transformer.transformLiteral(r),a=this.internalEvaluator.transformer.transformLiteral(n);try{return this.equalityFunction.applyOnTerms([i,a],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([i,a],this.internalEvaluator).typedValue?-1:1}catch{const s=this.comparePrimitives(i.dataType,a.dataType);return s!==0?s:this.comparePrimitives(i.str(),a.str())}}comparePrimitives(r,n){return r===n?0:r<n?-1:1}};return Fx.TermComparatorExpressionEvaluator=t,Fx}var VAe;function Ebt(){if(VAe)return Px;VAe=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.ActorTermComparatorFactoryExpressionEvaluator=void 0;const t=q3e(),e=Sbt(),r=dt,n=ke(),i=ln(),a=Ye(),s=xbt();let o=class extends e.ActorTermComparatorFactory{async test(u){return(0,n.passTestVoid)()}async run({context:u}){return u=a.prepareEvaluatorActionContext(u),new s.TermComparatorExpressionEvaluator(new t.InternalEvaluator(u,this.mediatorFunctionFactory,this.mediatorQueryOperation,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,u,u.getSafe(r.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:a.SparqlOperator.EQUAL,context:u,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:a.SparqlOperator.LT,context:u,requireTermExpression:!0}))}};return Px.ActorTermComparatorFactoryExpressionEvaluator=o,Px}var GAe;function Ibt(){return GAe||(GAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ebt(),t)}(TU)),TU}var SU={},Mx={},HAe;function Obt(){if(HAe)return Mx;HAe=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.ActorQuerySourceDereferenceLinkForceSparql=void 0;const t=gPe(),e=dt,r=ke(),n=Wt;let i=class extends t.ActorQuerySourceDereferenceLink{constructor(o){super(o);k(this,"mediatorMetadataAccumulate");k(this,"mediatorQuerySourceIdentifyHypermedia");this.mediatorMetadataAccumulate=o.mediatorMetadataAccumulate,this.mediatorQuerySourceIdentifyHypermedia=o.mediatorQuerySourceIdentifyHypermedia}async test(o){var c;return o.link.forceSourceType==="sparql"&&((c=o.context.get(e.KeysQueryOperation.querySources))==null?void 0:c.length)===1?(0,r.passTestVoid)():(0,r.failTest)(`${this.name} can only handle a single forced SPARQL source`)}async run(o){const c=o.link.context?o.context.merge(o.link.context):o.context,u=new n.Readable;u._read=()=>(u.push(null),null);const l=(await this.mediatorMetadataAccumulate.mediate({context:o.context,mode:"initialize"})).metadata,{source:d,dataset:f}=await this.mediatorQuerySourceIdentifyHypermedia.mediate({context:c,forceSourceType:o.link.forceSourceType,handledDatasets:o.handledDatasets,metadata:l,quads:u,url:o.link.url});return{source:d,metadata:l,dataset:f}}};return Mx.ActorQuerySourceDereferenceLinkForceSparql=i,Mx}var kAe;function Rbt(){return kAe||(kAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Obt(),t)}(SU)),SU}var xU={},Dx={},zAe;function Pbt(){if(zAe)return Dx;zAe=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.ActorRdfJoinMultiSmallestFilterBindings=void 0;const t=$i(),e=dt,r=ke(),n=Ft(),i=ln(),a=Df(),s=rr(),o=ir();let c=class extends t.ActorRdfJoin{constructor(d){super(d,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1});k(this,"selectivityModifier");k(this,"blockSize");k(this,"mediatorJoinEntriesSort");k(this,"mediatorJoin");this.selectivityModifier=d.selectivityModifier,this.blockSize=d.blockSize,this.mediatorJoinEntriesSort=d.mediatorJoinEntriesSort,this.mediatorJoin=d.mediatorJoin}async sortJoinEntries(d,f){let{entries:h}=await this.mediatorJoinEntriesSort.mediate({entries:d,context:f});h=h.sort((v,A)=>v.operationModified&&!A.operationModified?-1:0);const p=h.splice(0,1)[0];let _,g=-1,m=0;for(const[v,A]of h.entries()){const T=p.metadata.variables.filter(S=>A.metadata.variables.some(P=>S.variable.equals(P.variable))).length;(!_||T>m||T===m&&(A.metadata.variables.length<_.metadata.variables.length||A.metadata.variables.length===_.metadata.variables.length&&A.metadata.cardinality.value<_.metadata.cardinality.value))&&(_=A,g=v,m=T)}if(m===0)return(0,r.failTest)(`Actor ${this.name} can only join with common variables`);const y=h;return y.splice(g,1),(0,r.passTest)({first:p,second:_,remaining:y})}async getOutput(d){const f=d.context.getSafe(e.KeysInitQuery.dataFactory),h=new n.AlgebraFactory(f),p=await t.ActorRdfJoin.getEntriesWithMetadatas([...d.entries]),{first:_,second:g,remaining:m}=(await this.sortJoinEntries(p,d.context)).getOrThrow(),y=_.output.bindingsStream;_.output.bindingsStream=y.clone();const v=_.metadata.variables.filter(C=>g.metadata.variables.some(M=>C.variable.equals(M.variable))),A={},T=y.clone().map(C=>C.filter((M,U)=>v.some(B=>B.variable.equals(U)))).filter(C=>{const M=(0,i.bindingsToString)(C);return!(M in A)&&(A[M]=!0)}),S=new a.ChunkedIterator(T,this.blockSize,{autoStart:!1}),P=(0,s.getOperationSource)(g.operation),F={output:{type:"bindings",bindingsStream:new o.UnionIterator(S.map(C=>P.source.queryBindings(g.operation,P.context?d.context.merge(P.context):d.context,{filterBindings:{bindings:C,metadata:_.metadata}}))),metadata:g.output.metadata},operation:g.operation,operationModified:!0};g.output.bindingsStream.destroy();const N={output:(0,s.getSafeBindings)(await this.mediatorJoin.mediate({type:d.type,entries:[_,F],context:d.context.set(e.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:h.createJoin([_.operation,F.operation],!1),operationModified:!0},R=m;return R.unshift(N),{result:await this.mediatorJoin.mediate({type:d.type,entries:R,context:d.context}),physicalPlanMetadata:{firstIndex:p.indexOf(_),secondIndex:p.indexOf(g)}}}async getJoinCoefficients(d,f){let{metadatas:h}=f;if(d.context.get(e.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,r.failTest)(`Actor ${this.name} can not be called recursively`);h=[...h];const p=await this.sortJoinEntries(d.entries.map((N,R)=>({...N,metadata:h[R]})),d.context);if(p.isFailed())return p;const{first:_,second:g,remaining:m}=p.get(),y=(0,s.getOperationSource)(g.operation);if(!y)return(0,r.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const v=g.operation,A=await y.source.getSelectorShape(d.context),T=d.context.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,s.doesShapeAcceptOperation)(A,v,{filterBindings:!0,wildcardAcceptAllExtensionFunctions:T}))return(0,r.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);h=[_.metadata,g.metadata,...m.map(N=>N.metadata)];const S=t.ActorRdfJoin.getRequestInitialTimes(h),P=t.ActorRdfJoin.getRequestItemTimes(h),{selectivity:j}=await this.mediatorJoinSelectivity.mediate({entries:[_,g],context:d.context}),F=m.reduce((N,R)=>N*R.metadata.cardinality.value*this.selectivityModifier,1);return(0,r.passTestWithSideData)({iterations:j*this.selectivityModifier*g.metadata.cardinality.value*F,persistedItems:_.metadata.cardinality.value,blockingItems:_.metadata.cardinality.value,requestTime:S[0]+h[0].cardinality.value*P[0]+S[1]+F*P[1]},f)}};return Dx.ActorRdfJoinMultiSmallestFilterBindings=c,Dx}var QAe;function Nbt(){return QAe||(QAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Pbt(),t)}(xU)),xU}var EU={},Cx={},WAe;function Fbt(){if(WAe)return Cx;WAe=1,Object.defineProperty(Cx,"__esModule",{value:!0}),Cx.ActorQueryProcessExplainParsed=void 0;const t=jO(),e=dt,r=ke();let n=class extends t.ActorQueryProcess{constructor(s){super(s);k(this,"queryProcessor");this.queryProcessor=s.queryProcessor}async test(s){return(s.context.get(e.KeysInitQuery.explain)??s.context.get(new r.ActionContextKey("explain")))!=="parsed"?(0,r.failTest)(`${this.name} can only explain in 'parsed' mode.`):(0,r.passTestVoid)()}async run(s){const{operation:o}=await this.queryProcessor.parse(s.query,s.context);return{result:{explain:!0,type:"parsed",data:o}}}};return Cx.ActorQueryProcessExplainParsed=n,Cx}var KAe;function Mbt(){return KAe||(KAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fbt(),t)}(EU)),EU}var IU={},Lx={},XAe;function Dbt(){if(XAe)return Lx;XAe=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.ActorQueryProcessExplainLogical=void 0;const t=jO(),e=dt,r=ke();let n=class extends t.ActorQueryProcess{constructor(s){super(s);k(this,"queryProcessor");this.queryProcessor=s.queryProcessor}async test(s){return(s.context.get(e.KeysInitQuery.explain)??s.context.get(new r.ActionContextKey("explain")))!=="logical"?(0,r.failTest)(`${this.name} can only explain in 'logical' mode.`):(0,r.passTestVoid)()}async run(s){let{operation:o,context:c}=await this.queryProcessor.parse(s.query,s.context);return{operation:o,context:c}=await this.queryProcessor.optimize(o,c),{result:{explain:!0,type:"logical",data:o}}}};return Lx.ActorQueryProcessExplainLogical=n,Lx}var JAe;function Cbt(){return JAe||(JAe=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Dbt(),t)}(IU)),IU}var OU={},jx={},YAe;function Lbt(){if(YAe)return jx;YAe=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.ActorQueryProcessExplainQuery=void 0;const t=jO(),e=dt,r=ke(),n=Ft(),i=rr();let a=class k3e extends t.ActorQueryProcess{constructor(c){super(c);k(this,"queryProcessor");k(this,"mediatorQuerySerialize");this.queryProcessor=c.queryProcessor,this.mediatorQuerySerialize=c.mediatorQuerySerialize}async test(c){return(c.context.get(e.KeysInitQuery.explain)??c.context.get(new r.ActionContextKey("explain")))!=="query"?(0,r.failTest)(`${this.name} can only explain in 'query' mode.`):(0,r.passTestVoid)()}async run(c){let{operation:u,context:l}=await this.queryProcessor.parse(c.query,c.context);({operation:u,context:l}=await this.queryProcessor.optimize(u,l));const d=new n.AlgebraFactory;u=k3e.sourceAnnotationToServices(d,l.getSafe(e.KeysInitQuery.dataFactory),u);let f;return u.type===n.Algebra.Types.UNION?f="SELECT * WHERE { FILTER(false) }":f=(await this.mediatorQuerySerialize.mediate({queryFormat:{language:"sparql",version:"1.1"},operation:u,newlines:!0,indentWidth:2,context:l})).query,{result:{explain:!0,type:"query",data:f}}}static sourceAnnotationToServices(c,u,l){return n.transformer.transformObject(l,d=>{var p;const f=d,h=(0,i.getOperationSource)(f);return h?c.createService(f,typeof h.source.referenceValue=="string"?u.namedNode(h.source.referenceValue):u.namedNode(`comunica:${h.source.referenceValue.constructor.name}`),(p=h.context)==null?void 0:p.get(e.KeysInitQuery.lenient)):f})}};return jx.ActorQueryProcessExplainQuery=a,jx}var $Ae;function jbt(){return $Ae||($Ae=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lbt(),t)}(OU)),OU}var RU={},Bx={},jh={},ZAe;function z3e(){if(ZAe)return jh;ZAe=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.MemoryPhysicalQueryPlanLogger=void 0,jh.numberToString=n;const t=Ft(),e=Br();let r=class{constructor(){k(this,"planNodes");k(this,"rootNode");this.planNodes=new Map}logOperation(a,s,o,c,u,l){const d={actor:u,logicalOperator:a,physicalOperator:s,rawNode:o,children:[],metadata:l};if(this.planNodes.set(o,d),this.rootNode){if(!c)throw new Error("Detected more than one parent-less node");const f=this.planNodes.get(c);if(!f)throw new Error("Could not find parent node");f.children.push(d)}else{if(c)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=d}}stashChildren(a,s){const o=this.planNodes.get(a);if(!o)throw new Error("Could not find plan node");o.children=s?o.children.filter(s):[]}unstashChild(a,s){const o=this.planNodes.get(a);if(o){const c=this.planNodes.get(s);if(!c)throw new Error("Could not find plan parent node");c.children.push(o)}}appendMetadata(a,s){const o=this.planNodes.get(a);o&&(o.metadata={...o.metadata,...s})}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(a){var o;const s={logical:a.logicalOperator,physical:a.physicalOperator,...this.getLogicalMetadata(a.rawNode),...this.compactMetadata(a.metadata)};if(a.children.length>0&&(s.children=a.children.map(c=>this.planNodeToJson(c))),s.physical==="bind"&&s.children){const c={};for(const l of s.children){const d=((o=l.children)==null?void 0:o.at(-1))??l,f=this.getPlanHash(d).join(",");c[f]||(c[f]=[]),c[f].push(l)}const u=[];for(const l of Object.values(c))u.push({occurrences:l.length,firstOccurrence:l[0]});s.childrenCompact=u,delete s.children}return s}getPlanHash(a){let s=[`${a.logical}-${a.physical}`];return a.children?s=[...s,...a.children.flatMap(o=>this.getPlanHash(o))]:a.childrenCompact&&(s=[...s,...a.childrenCompact.flatMap(o=>this.getPlanHash(o.firstOccurrence))]),s}compactMetadata(a){return Object.fromEntries(Object.entries(a).map(([s,o])=>[s,this.compactMetadataValue(o)]))}compactMetadataValue(a){return a&&typeof a=="object"&&"termType"in a?this.getLogicalMetadata(a):a}getLogicalMetadata(a){var o;const s={};if("type"in a){const c=a;(o=c.metadata)!=null&&o.scopedSource&&(s.source=c.metadata.scopedSource.source.toString()),(0,t.isKnownOperation)(c,t.Algebra.Types.PATTERN)?s.pattern=this.quadToString(c):(0,t.isKnownOperation)(c,t.Algebra.Types.PROJECT)&&(s.variables=c.variables.map(u=>u.value))}return s}quadToString(a){return`${(0,e.termToString)(a.subject)} ${(0,e.termToString)(a.predicate)} ${(0,e.termToString)(a.object)}${a.graph.termType==="DefaultGraph"?"":` ${(0,e.termToString)(a.graph)}`}`}toCompactString(){const a=this.toJson(),s=[],o=new Map;if("logical"in a?this.nodeToCompactString(s,o,"",a):s.push("Empty"),o.size>0){s.push(""),s.push("sources:");for(const[c,u]of o.entries())s.push(`  ${u}: ${c}`)}return s.join(`
`)}nodeToCompactString(a,s,o,c,u){let l;c.source&&(l=s.get(c.source),l===void 0&&(l=s.size,s.set(c.source,l))),a.push(`${o}${c.logical}${c.physical?`(${c.physical})`:""}${c.pattern?` (${c.pattern})`:""}${c.variables?` (${c.variables.join(",")})`:""}${c.bindOperation?` bindOperation:(${c.bindOperation.pattern}) bindCardEst:${c.bindOperationCardinality.type==="estimate"?"~":""}${n(c.bindOperationCardinality.value)}`:""}${c.cardinality?` cardEst:${c.cardinality.type==="estimate"?"~":""}${n(c.cardinality.value)}`:""}${c.source?` src:${l}`:""}${c.cardinalityReal?` cardReal:${c.cardinalityReal}`:""}${c.timeSelf?` timeSelf:${n(c.timeSelf)}ms`:""}${c.timeLife?` timeLife:${n(c.timeLife)}ms`:""}${u?` ${u}`:""}`);for(const d of c.children??[])this.nodeToCompactString(a,s,`${o}  `,d);for(const d of c.childrenCompact??[])this.nodeToCompactString(a,s,`${o}  `,d.firstOccurrence,`compacted-occurrences:${d.occurrences}`)}};jh.MemoryPhysicalQueryPlanLogger=r;function n(i){return i.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:3})}return jh}var e1e;function Bbt(){if(e1e)return Bx;e1e=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.ActorQueryProcessExplainPhysical=void 0;const t=jO(),e=dt,r=ke(),n=z3e();let i=class extends t.ActorQueryProcess{constructor(o){super(o);k(this,"queryProcessor");this.queryProcessor=o.queryProcessor}async test(o){const c=o.context.get(e.KeysInitQuery.explain)??o.context.get(new r.ActionContextKey("explain"));return c!=="physical"&&c!=="physical-json"?(0,r.failTest)(`${this.name} can only explain in 'physical' or 'physical-json' mode.`):(0,r.passTestVoid)()}async run(o){let{operation:c,context:u}=await this.queryProcessor.parse(o.query,o.context);({operation:c,context:u}=await this.queryProcessor.optimize(c,u));const l=new n.MemoryPhysicalQueryPlanLogger;u=u.set(e.KeysInitQuery.physicalQueryPlanLogger,l);const d=await this.queryProcessor.evaluate(c,u);switch(d.type){case"bindings":await d.bindingsStream.toArray();break;case"quads":await d.quadStream.toArray();break;case"boolean":await d.execute();break;case"void":await d.execute();break}const f=o.context.get(e.KeysInitQuery.explain)??o.context.getSafe(new r.ActionContextKey("explain"));return{result:{explain:!0,type:f,data:f==="physical"?l.toCompactString():l.toJson()}}}};return Bx.ActorQueryProcessExplainPhysical=i,Bx}var t1e;function qbt(){return t1e||(t1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Bbt(),t),r(z3e(),t)}(RU)),RU}var PU={},qx={},r1e;function Ubt(){if(r1e)return qx;r1e=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const t=Yi(),e=dt,r=ke(),n=Ft(),i=rr();let a=class CE extends t.ActorOptimizeQueryOperation{constructor(c){super(c);k(this,"useAskIfSupported");this.useAskIfSupported=c.useAskIfSupported}async test(c){return(0,i.getOperationSource)(c.operation)?(0,r.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,r.passTestVoid)()}async run(c){const u=c.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.AlgebraFactory(u);let d=c.operation;const f=[];n.algebraUtils.visitOperation(d,{[n.Algebra.Types.UNION]:{preVisitor:p=>(this.collectMultiOperationInputs(p.input,f,n.Algebra.Types.PATTERN),{})},[n.Algebra.Types.ALT]:{preVisitor:p=>(this.collectMultiOperationInputs(p.input,f,n.Algebra.Types.LINK),{continue:!1})},[n.Algebra.Types.SERVICE]:{preVisitor:()=>({continue:!1})}});const h=new Set;return await Promise.all(f.map(async p=>{const _=p.type===n.Algebra.Types.LINK?l.createPattern(u.variable("s"),p.iri,u.variable("?o")):p;await this.hasSourceResults(l,(0,i.getOperationSource)(p),_,c.context)||h.add(p)})),h.size>0&&(this.logDebug(c.context,`Pruning ${h.size} source-specific operations`),d=n.algebraUtils.mapOperation(d,{[n.Algebra.Types.UNION]:{transform:(p,_)=>this.mapMultiOperation(p,_,h,g=>l.createUnion(g))},[n.Algebra.Types.ALT]:{transform:(p,_)=>this.mapMultiOperation(p,_,h,g=>l.createAlt(g))},[n.Algebra.Types.PROJECT]:{transform:p=>CE.hasEmptyOperation(p)?l.createUnion([]):p},[n.Algebra.Types.LEFT_JOIN]:{transform:p=>CE.hasEmptyOperation(p.input[1])?p.input[0]:p}})),{operation:d,context:c.context}}static hasEmptyOperation(c){let u=!1;return n.algebraUtils.visitOperation(c,{[n.Algebra.Types.UNION]:{preVisitor:l=>l.input.every(d=>CE.hasEmptyOperation(d))?(u=!0,{shortcut:!0}):{continue:!1}},[n.Algebra.Types.LEFT_JOIN]:{preVisitor:l=>CE.hasEmptyOperation(l.input[0])?(u=!0,{shortcut:!0}):{continue:!1}},[n.Algebra.Types.ALT]:{preVisitor:l=>l.input.length===0?(u=!0,{shortcut:!0}):{continue:!1}}}),u}collectMultiOperationInputs(c,u,l){for(const d of c)(0,i.getOperationSource)(d)&&(0,n.isKnownOperation)(d,l)&&u.push(d)}mapMultiOperation(c,u,l,d){const f=[];for(const[h,p]of c.input.entries())l.has(u.input[h])||f.push(p);return f.length===c.input.length?c:f.length===0?d([]):f.length===1?f[0]:d(f)}async hasSourceResults(c,u,l,d){const f=u.context?d.merge(u.context):d,h=f.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(f.get(e.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const g=c.createAsk(l);if((0,i.doesShapeAcceptOperation)(await u.source.getSelectorShape(d),g,{wildcardAcceptAllExtensionFunctions:h}))return u.source.queryBoolean(g,f)}const p=u.source.queryBindings(l,f),_=await new Promise((g,m)=>{p.on("error",m),p.getProperty("metadata",y=>{p.destroy(),g(y.cardinality)})});if(_.type==="estimate"&&_.value>0){const g=c.createAsk(l);if((0,i.doesShapeAcceptOperation)(await u.source.getSelectorShape(d),g,{wildcardAcceptAllExtensionFunctions:h}))return u.source.queryBoolean(g,f)}return _.value>0}};return qx.ActorOptimizeQueryOperationPruneEmptySourceOperations=a,qx}var n1e;function Vbt(){return n1e||(n1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ubt(),t)}(PU)),PU}var NU={},Ux={},i1e;function Gbt(){if(i1e)return Ux;i1e=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=void 0;const t=Yi(),e=dt,r=ke(),n=Ft(),i=rr();let a=class extends t.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,r.passTestVoid)()}async run(o){const c=o.context.getSafe(e.KeysInitQuery.dataFactory),u=new n.AlgebraFactory(c);let l=o.operation;const d=this;return l=n.algebraUtils.mapOperation(l,{[n.Algebra.Types.LEFT_JOIN]:{transform:f=>{if(f.expression){const h=(0,i.getExpressionVariables)(f.expression),p=n.algebraUtils.inScopeVariables(f.input[0]),_=n.algebraUtils.inScopeVariables(f.input[1]),g=d.variablesIntersect(h,p),m=d.variablesIntersect(h,_);if(g&&!m)return d.logDebug(o.context,"Pushed down optional expression to left-hand operator"),u.createLeftJoin(u.createFilter(f.input[0],f.expression),f.input[1]);if(!g&&m)return d.logDebug(o.context,"Pushed down optional expression to right-hand operator"),u.createLeftJoin(f.input[0],u.createFilter(f.input[1],f.expression))}return f}}}),{operation:l,context:o.context}}variablesIntersect(o,c){return o.some(u=>c.some(l=>u.equals(l)))}};return Ux.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=a,Ux}var a1e;function Hbt(){return a1e||(a1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Gbt(),t)}(NU)),NU}var FU={},Vx={},s1e;function kbt(){if(s1e)return Vx;s1e=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.ActorHttpProxy=void 0;const t=Yo(),e=dt,r=ke();let n=class extends t.ActorHttp{constructor(s){super(s);k(this,"mediatorHttp");this.mediatorHttp=s.mediatorHttp}async test(s){const o=s.context.get(e.KeysHttpProxy.httpProxyHandler);return o?await o.getProxy(s)?(0,r.passTest)({time:Number.POSITIVE_INFINITY}):(0,r.failTest)(`Actor ${this.name} could not determine a proxy for the given request.`):(0,r.failTest)(`Actor ${this.name} could not find a proxy handler in the context.`)}async run(s){const o=typeof s.input=="string"?s.input:s.input.url,c=s.context.get(e.KeysHttpProxy.httpProxyHandler),u=await this.mediatorHttp.mediate({...await c.getProxy(s),context:s.context.delete(e.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(u,"url",{configurable:!0,enumerable:!0,get:()=>u.headers.get("x-final-url")??o}),u}};return Vx.ActorHttpProxy=n,Vx}var Gx={},o1e;function zbt(){if(o1e)return Gx;o1e=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.ProxyHandlerStatic=void 0;let t=class{constructor(r){k(this,"prefixUrl");this.prefixUrl=r}async getProxy(r){return{init:r.init,input:this.modifyInput(r.input)}}modifyInput(r){return typeof r=="string"?this.prefixUrl+r:new Request(this.prefixUrl+r.url,r)}};return Gx.ProxyHandlerStatic=t,Gx}var u1e;function Qbt(){return u1e||(u1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(kbt(),t),r(zbt(),t)}(FU)),FU}var MU={},Hx={},c1e;function Wbt(){if(c1e)return Hx;c1e=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.ActorQuerySourceIdentifySerialized=void 0;const t=LO(),e=ke(),r=j3e(),n=Wt;let i=class extends t.ActorQuerySourceIdentify{constructor(o){super(o);k(this,"mediatorRdfParse");k(this,"mediatorQuerySourceIdentify");this.mediatorRdfParse=o.mediatorRdfParse,this.mediatorQuerySourceIdentify=o.mediatorQuerySourceIdentify}async test(o){return this.isStringSource(o.querySourceUnidentified)?(0,e.passTestVoid)():(0,e.failTest)(`${this.name} requires a single query source with serialized type to be present in the context.`)}async run(o){return await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{type:"rdfjs",value:await this.getRdfSource(o.context,o.querySourceUnidentified),context:o.querySourceUnidentified.context},context:o.context})}async getRdfSource(o,c){const u=new n.Readable({objectMode:!0});u._read=()=>{},u.push(c.value),u.push(null);const l={context:o,handle:{metadata:{baseIRI:c.baseIRI,version:c.version},data:u,context:o},handleMediaType:c.mediaType},d=await this.mediatorRdfParse.mediate(l);return await(0,r.storeStream)(d.handle.data)}isStringSource(o){return"type"in o?o.type==="serialized":typeof o.value!="string"?!1:"mediaType"in o}};return Hx.ActorQuerySourceIdentifySerialized=i,Hx}var l1e;function Kbt(){return l1e||(l1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Wbt(),t)}(MU)),MU}var DU={},kx={},d1e;function Xbt(){if(d1e)return kx;d1e=1,Object.defineProperty(kx,"__esModule",{value:!0}),kx.ActorRdfJoinMultiBindSource=void 0;const t=$i(),e=dt,r=ke(),n=Ft(),i=Df(),a=rr(),s=ir();let o=class extends t.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0});k(this,"selectivityModifier");k(this,"blockSize");k(this,"mediatorJoinEntriesSort");this.selectivityModifier=l.selectivityModifier,this.blockSize=l.blockSize,this.mediatorJoinEntriesSort=l.mediatorJoinEntriesSort}async getOutput(l,d){const f=l.context.getSafe(e.KeysInitQuery.dataFactory),h=new n.AlgebraFactory(f),p=d.entriesSorted;this.logDebug(l.context,"First entry for Bind Join Source: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[S,P]of p.entries())S!==0&&P.output.bindingsStream.close();const _=p[0].output,g=p[0].metadata,m=[...p];m.splice(0,1);const y=(0,a.getOperationSource)(m[0].operation),v=this.createOperationFromEntries(h,m),A=new i.ChunkedIterator(_.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new s.UnionIterator(A.map(S=>y.source.queryBindings(v,y.context?l.context.merge(y.context):l.context,{joinBindings:{bindings:S,metadata:g}}))),metadata:()=>this.constructResultMetadata(p,p.map(S=>S.metadata),l.context)},physicalPlanMetadata:{bindIndex:d.entriesUnsorted.indexOf(p[0])}}}async sortJoinEntries(l,d){const f=await t.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,l,d);return f.isFailed()?f:(l=f.get(),l=l.sort((h,p)=>h.operationModified&&!p.operationModified?-1:0),(0,r.passTest)(l))}async getJoinCoefficients(l,d){let{metadatas:f}=d;const h=l.context.getSafe(e.KeysInitQuery.dataFactory),p=new n.AlgebraFactory(h),_=l.entries.map((C,M)=>({...C,metadata:f[M]})),g=await this.sortJoinEntries(_,l.context);if(g.isFailed())return g;const m=g.get();f=m.map(C=>C.metadata);const y=t.ActorRdfJoin.getRequestInitialTimes(f),v=t.ActorRdfJoin.getRequestItemTimes(f),A=[...m];[...y],[...v],A.splice(0,1);const T=A.map(C=>(0,a.getOperationSource)(C.operation));if(T.some(C=>!C))return(0,r.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(T.some(C=>C!==T[0]))return(0,r.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const S=T[0],P=this.createOperationFromEntries(p,A),j=await S.source.getSelectorShape(l.context),F=l.context.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,a.doesShapeAcceptOperation)(j,P,{joinBindings:!0,wildcardAcceptAllExtensionFunctions:F}))return(0,r.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const N=await Promise.all(A.map(async C=>(await this.mediatorJoinSelectivity.mediate({entries:[m[0],C],context:l.context})).selectivity*this.selectivityModifier)),R=A.map((C,M)=>C.metadata.cardinality.value*N[M]).reduce((C,M)=>C+M,0);return(0,r.passTestWithSideData)({iterations:1,persistedItems:f[0].cardinality.value,blockingItems:f[0].cardinality.value,requestTime:y[0]+f[0].cardinality.value*v[0]+y[1]+R*v[1]},{...d,entriesUnsorted:_,entriesSorted:m})}createOperationFromEntries(l,d){return d.length===1?d[0].operation:l.createJoin(d.map(f=>f.operation),!0)}};return kx.ActorRdfJoinMultiBindSource=o,kx}var f1e;function Jbt(){return f1e||(f1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Xbt(),t)}(DU)),DU}var CU={},zx={},h1e;function Ybt(){if(h1e)return zx;h1e=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.ActorOptimizeQueryOperationJoinConnected=void 0;const t=Yi(),e=dt,r=ke(),n=Ft();let i=class J3 extends t.ActorOptimizeQueryOperation{async test(s){return(0,r.passTestVoid)()}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=new n.AlgebraFactory(o);return{operation:n.algebraUtils.mapOperation(s.operation,{[n.Algebra.Types.JOIN]:{preVisitor:()=>({continue:!1}),transform:l=>J3.cluster(l,c)}}),context:s.context}}static cluster(s,o){const c=s.input.map(f=>({inScopeVariables:Object.fromEntries(n.algebraUtils.inScopeVariables(f).map(h=>[h.value,!0])),entries:[f]}));let u,l=c;do u=l,l=J3.clusterIteration(u);while(u.length!==l.length);const d=l.map(f=>f.entries.length===1?f.entries[0]:o.createJoin(f.entries));return d.length===1?d[0]:o.createJoin(d,!1)}static clusterIteration(s){const o=[];for(const c of s){let u=!1;for(const l of o)if(J3.haveOverlappingVariables(c.inScopeVariables,l.inScopeVariables)){l.entries=[...l.entries,...c.entries],l.inScopeVariables={...l.inScopeVariables,...c.inScopeVariables},u=!0;break}u||o.push({inScopeVariables:c.inScopeVariables,entries:c.entries})}return o}static haveOverlappingVariables(s,o){for(const c of Object.keys(s))if(o[c])return!0;return!1}};return zx.ActorOptimizeQueryOperationJoinConnected=i,zx}var p1e;function $bt(){return p1e||(p1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Ybt(),t)}(CU)),CU}var LU={},Qx={},_1e;function Zbt(){var i;if(_1e)return Qx;_1e=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.ActorHttpRetry=void 0;const t=Yo(),e=dt,r=ke();let n=(i=class extends t.ActorHttp{constructor(o){super(o);k(this,"activeDelays");k(this,"httpInvalidator");k(this,"mediatorHttp");this.activeDelays={},this.httpInvalidator=o.httpInvalidator,this.httpInvalidator.addInvalidateListener(c=>this.handleHttpInvalidateEvent(c)),this.mediatorHttp=o.mediatorHttp}async test(o){if(o.context.has(i.keyWrapped))return(0,r.failTest)(`${this.name} can only wrap a request once`);const c=o.context.get(e.KeysHttp.httpRetryCount);return!c||c<1?(0,r.failTest)(`${this.name} requires a retry count greater than zero to function`):(0,r.passTest)({time:0})}async run(o){const c=t.ActorHttp.getInputUrl(o.input),u=o.context.getSafe(e.KeysHttp.httpRetryCount)+1,l=o.context.get(e.KeysHttp.httpRetryDelayFallback)??0,d=o.context.get(e.KeysHttp.httpRetryDelayLimit),f=o.context.get(e.KeysHttp.httpRetryStatusCodes);for(let h=1;h<=u;h++){const p=c.host in this.activeDelays?this.activeDelays[c.host].date.getTime()-Date.now():l;if(d&&p>d){this.logWarn(o.context,"Requested delay exceeds the limit",()=>({url:c.href,delay:p,delayDate:this.activeDelays[c.host].date.toISOString(),delayLimit:d,currentAttempt:`${h} / ${u}`}));break}else p>0&&h>1&&(this.logDebug(o.context,"Delaying request",()=>({url:c.href,delay:p,currentAttempt:`${h} / ${u}`})),await i.sleep(p));const _=await this.mediatorHttp.mediate({...o,context:o.context.set(i.keyWrapped,!0)});if(_.ok)return _;if(f&&f.includes(_.status)){this.logDebug(o.context,"Status code in force retry list, forcing retry",()=>({url:c.href,status:_.status,statusText:_.statusText,currentAttempt:`${h} / ${u}`}));continue}if(_.status===504){this.logDebug(o.context,"Received proxy timeout",()=>({url:c.href,status:_.status,statusText:_.statusText,currentAttempt:`${h} / ${u}`}));continue}if(_.status===429||_.status===503||_.status===405&&_.headers.has("retry-after")){const g=_.headers.get("retry-after");if(g){const m=i.parseRetryAfterHeader(g);m?(c.host in this.activeDelays&&clearTimeout(this.activeDelays[c.host].timeout),this.activeDelays[c.host]={date:m,timeout:setTimeout(()=>delete this.activeDelays[c.host],m.getTime()-Date.now())}):this.logDebug(o.context,"Invalid Retry-After header value from server",()=>({url:c.href,status:_.status,statusText:_.statusText,retryAfterHeader:g,currentAttempt:`${h} / ${u}`}))}this.logDebug(o.context,"Server temporarily unavailable",()=>({url:c.href,status:_.status,statusText:_.statusText,currentAttempt:`${h} / ${u}`}));continue}if(_.status>=400&&_.status<500){this.logDebug(o.context,"Server reported client-side error",()=>({url:c.href,status:_.status,statusText:_.statusText,currentAttempt:`${h} / ${u}`}));break}if(_.status>=500&&_.status<600){this.logDebug(o.context,"Server-side error encountered, terminating",()=>({url:c.href,status:_.status,statusText:_.statusText,currentAttempt:`${h} / ${u}`}));break}this.logDebug(o.context,"Request failed",()=>({url:c.href,status:_.status,statusText:_.statusText,currentAttempt:`${h} / ${u}`}))}throw new Error(`Request failed: ${c.href}`)}static async sleep(o){o>0&&await new Promise(c=>setTimeout(c,o))}static parseRetryAfterHeader(o){if(i.numberRegex.test(o))return new Date(Date.now()+Number.parseInt(o,10)*1e3);if(i.dateRegex.test(o))return new Date(o)}handleHttpInvalidateEvent(o){const c=o.url?new URL(o.url).host:void 0;for(const u of Object.keys(this.activeDelays))(!c||u===c)&&(clearTimeout(this.activeDelays[u].timeout),delete this.activeDelays[u])}},k(i,"dateRegex",/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), [0-9]{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-9]{4} [0-9]{2}:[0-9]{2}:[0-9]{2} GMT$/u),k(i,"numberRegex",/^[0-9]+$/u),k(i,"keyWrapped",new r.ActionContextKey("urn:comunica:actor-http-retry#wrapped")),i);return Qx.ActorHttpRetry=n,Qx}var m1e;function evt(){return m1e||(m1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Zbt(),t)}(LU)),LU}var jU={},Wx={},g1e;function tvt(){var n;if(g1e)return Wx;g1e=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.ActorHttpLimitRate=void 0;const t=Yo(),e=ke();let r=(n=class extends t.ActorHttp{constructor(s){super(s);k(this,"hostData");k(this,"correctionMultiplier");k(this,"failureMultiplier");k(this,"limitByDefault");k(this,"allowOverlap");k(this,"httpInvalidator");k(this,"mediatorHttp");this.mediatorHttp=s.mediatorHttp,this.httpInvalidator=s.httpInvalidator,this.httpInvalidator.addInvalidateListener(o=>this.handleHttpInvalidateEvent(o)),this.correctionMultiplier=s.correctionMultiplier,this.failureMultiplier=s.failureMultiplier,this.limitByDefault=s.limitByDefault,this.allowOverlap=s.allowOverlap,this.hostData=new Map}async test(s){return s.context.has(n.keyWrapped)?(0,e.failTest)(`${this.name} can only wrap a request once`):(0,e.passTest)({time:0})}async run(s){const o=t.ActorHttp.getInputUrl(s.input);let c=this.hostData.get(o.host);c||(c={latestRequestTimestamp:0,rateLimited:this.limitByDefault,requestInterval:Number.NEGATIVE_INFINITY},this.hostData.set(o.host,c));const u=Date.now();let l=0;c.rateLimited&&(l=Math.max(0,c.latestRequestTimestamp+c.requestInterval-u)),c.latestRequestTimestamp=u+(this.allowOverlap?0:1)*l,l>0&&(this.logDebug(s.context,"Delaying request",()=>({url:o.href,requestInterval:c.requestInterval,currentDelay:l})),await new Promise(f=>setTimeout(f,l)));const d=(f,h)=>{const p=(f?1:this.failureMultiplier)*(Date.now()-u-l);c.requestInterval<0?c.requestInterval=Math.round(p*this.correctionMultiplier):c.requestInterval+=Math.round(this.correctionMultiplier*(p-c.requestInterval)),!f&&h!==404&&!c.rateLimited&&(this.logDebug(s.context,"Marking host as rate-limited",()=>({host:o.host})),c.rateLimited=!0)};try{const f=await this.mediatorHttp.mediate({...s,context:s.context.set(n.keyWrapped,!0)});return d(f.ok,f.status),f}catch(f){throw d(!1,-1),f}}handleHttpInvalidateEvent(s){if(s.url){const o=new URL(s.url).host;this.hostData.delete(o)}else this.hostData.clear()}},k(n,"keyWrapped",new e.ActionContextKey("urn:comunica:actor-http-limit-rate#wrapped")),n);return Wx.ActorHttpLimitRate=r,Wx}var y1e;function rvt(){return y1e||(y1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(tvt(),t)}(jU)),jU}var BU={},Kx={},b1e;function nvt(){if(b1e)return Kx;b1e=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.ActorOptimizeQueryOperationBgpToJoin=void 0;const t=Yi(),e=dt,r=ke(),n=Ft();let i=class extends t.ActorOptimizeQueryOperation{async test(s){return(0,r.passTestVoid)()}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=new n.AlgebraFactory(o);return{operation:n.algebraUtils.mapOperation(s.operation,{[n.Algebra.Types.BGP]:{preVisitor:()=>({continue:!1}),transform:l=>c.createJoin(l.patterns)}}),context:s.context}}};return Kx.ActorOptimizeQueryOperationBgpToJoin=i,Kx}var v1e;function ivt(){return v1e||(v1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(nvt(),t)}(BU)),BU}var qU={},Xx={},A1e;function avt(){if(A1e)return Xx;A1e=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.ActorOptimizeQueryOperationJoinBgp=void 0;const t=Yi(),e=dt,r=ke(),n=Ft();let i=class extends t.ActorOptimizeQueryOperation{async test(s){return(0,r.passTestVoid)()}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=new n.AlgebraFactory(o);return{operation:n.algebraUtils.mapOperation(s.operation,{[n.Algebra.Types.JOIN]:{preVisitor:()=>({continue:!1}),transform:l=>l.input.every(d=>d.type==="bgp")?c.createBgp(l.input.flatMap(d=>d.patterns)):l}}),context:s.context}}};return Xx.ActorOptimizeQueryOperationJoinBgp=i,Xx}var T1e;function svt(){return T1e||(T1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(avt(),t)}(qU)),qU}var UU={},Jx={},w1e;function ovt(){if(w1e)return Jx;w1e=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const t=Yi(),e=dt,r=ke(),n=Ft(),i=rr();let a=class extends t.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,r.passTestVoid)()}async run(o){const c=o.context.getSafe(e.KeysInitQuery.dataFactory),u=new n.AlgebraFactory(c),l=o.context.get(e.KeysQueryOperation.querySources)??[],d=o.context.get(e.KeysQueryOperation.serviceSources)??{};return l.length===0&&Object.keys(d).length===0?{operation:o.operation,context:o.context}:await(0,i.passFullOperationToSource)(o.operation,l,o.context)?{operation:(0,i.assignOperationSource)(o.operation,l[0]),context:o.context}:{operation:this.assignExhaustive(u,o.operation,l,d),context:o.context.delete(e.KeysInitQuery.queryString)}}assignExhaustive(o,c,u,l){return n.algebraUtils.mapOperation(c,{[n.Algebra.Types.PATTERN]:{preVisitor:()=>({continue:!1}),transform:d=>u.length===1?(0,i.assignOperationSource)(d,u[0]):o.createUnion(u.map(f=>(0,i.assignOperationSource)(d,f)))},[n.Algebra.Types.SERVICE]:{preVisitor:()=>({continue:!1}),transform:d=>{if(d.name.termType==="NamedNode"){let f=l[d.name.value];if(f)return d.silent&&(f={...f,context:(f.context??new r.ActionContext).set(e.KeysInitQuery.lenient,!0)}),this.assignExhaustive(o,d.input,[f],{})}return d}},[n.Algebra.Types.CONSTRUCT]:{preVisitor:()=>({continue:!1}),transform:d=>o.createConstruct(this.assignExhaustive(o,d.input,u,l),d.template)},[n.Algebra.Types.LINK]:{preVisitor:()=>({continue:!1}),transform:d=>u.length===1?(0,i.assignOperationSource)(d,u[0]):o.createAlt(u.map(f=>(0,i.assignOperationSource)(d,f)))},[n.Algebra.Types.NPS]:{preVisitor:()=>({continue:!1}),transform:d=>u.length===1?(0,i.assignOperationSource)(d,u[0]):o.createAlt(u.map(f=>(0,i.assignOperationSource)(d,f)))},[n.Algebra.Types.DELETE_INSERT]:{preVisitor:()=>({continue:!1}),transform:d=>o.createDeleteInsert(d.delete,d.insert,d.where?this.assignExhaustive(o,d.where,u,l):void 0)}})}};return Jx.ActorOptimizeQueryOperationAssignSourcesExhaustive=a,Jx}var S1e;function uvt(){return S1e||(S1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(ovt(),t)}(UU)),UU}var VU={},Yx={},$x={},x1e;function cvt(){var f,h,p,_,g,m,y,v,A,T,S,P,j,F,N,R,C,M,U,B,G,K,$,se,pe,we,Ce,Le,Ie,Oe,ye,Me,W,$G,le,me,Z,q,Q3e,re,_e,he,kc,zc,ZG,Y3,$3,rn,eH,LE,Qc,tH,z;if(x1e)return $x;x1e=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,r=typeof process=="object"&&process?process:{},n=(V,x,O,D)=>{typeof r.emitWarning=="function"?r.emitWarning(V,x,O,D):console.error(`[${O}] ${x}: ${V}`)},i=globalThis.AbortController,a=globalThis.AbortSignal;if(typeof i>"u"){a=class{constructor(){k(this,"onabort");k(this,"_onabort",[]);k(this,"reason");k(this,"aborted",!1)}addEventListener(O,D){this._onabort.push(D)}},i=class{constructor(){k(this,"signal",new a);x()}abort(O){var D,H;if(!this.signal.aborted){this.signal.reason=O,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(O);(H=(D=this.signal).onabort)==null||H.call(D,O)}}};let V=((f=r.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1",x=()=>{V&&(V=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",x))}}var s=V=>!e.has(V),o=V=>V&&V===Math.floor(V)&&V>0&&isFinite(V),c=V=>o(V)?V<=Math.pow(2,8)?Uint8Array:V<=Math.pow(2,16)?Uint16Array:V<=Math.pow(2,32)?Uint32Array:V<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(V){super(V),this.fill(0)}},l=(h=class{constructor(x,O){k(this,"heap");k(this,"length");if(!w(h,p))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new O(x),this.length=0}static create(x){let O=c(x);if(!O)return[];be(h,p,!0);let D=new h(x,O);return be(h,p,!1),D}push(x){this.heap[this.length++]=x}pop(){return this.heap[--this.length]}},p=new WeakMap,qe(h,p,!1),h),d=(z=class{constructor(x){qe(this,W);qe(this,m);qe(this,y);qe(this,v);qe(this,A);qe(this,T);qe(this,S);qe(this,P);qe(this,j);k(this,"ttl");k(this,"ttlResolution");k(this,"ttlAutopurge");k(this,"updateAgeOnGet");k(this,"updateAgeOnHas");k(this,"allowStale");k(this,"noDisposeOnSet");k(this,"noUpdateTTL");k(this,"maxEntrySize");k(this,"sizeCalculation");k(this,"noDeleteOnFetchRejection");k(this,"noDeleteOnStaleGet");k(this,"allowStaleOnFetchAbort");k(this,"allowStaleOnFetchRejection");k(this,"ignoreFetchAbort");qe(this,F);qe(this,N);qe(this,R);qe(this,C);qe(this,M);qe(this,U);qe(this,B);qe(this,G);qe(this,K);qe(this,$);qe(this,se);qe(this,pe);qe(this,we);qe(this,Ce);qe(this,Le);qe(this,Ie);qe(this,Oe);qe(this,ye);qe(this,Me);qe(this,le,()=>{});qe(this,me,()=>{});qe(this,Z,()=>{});qe(this,q,()=>!1);qe(this,re,x=>{});qe(this,_e,(x,O,D)=>{});qe(this,he,(x,O,D,H)=>{if(D||H)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});k(this,_,"LRUCache");let{max:O=0,ttl:D,ttlResolution:H=1,ttlAutopurge:Y,updateAgeOnGet:Q,updateAgeOnHas:ee,allowStale:ie,dispose:Re,onInsert:oe,disposeAfter:Te,noDisposeOnSet:We,noUpdateTTL:Qe,maxSize:Xe=0,maxEntrySize:Pe=0,sizeCalculation:He,fetchMethod:Ee,memoMethod:ce,noDeleteOnFetchRejection:ne,noDeleteOnStaleGet:xe,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:ht,ignoreFetchAbort:Et,perf:rt}=x;if(rt!==void 0&&typeof(rt==null?void 0:rt.now)!="function")throw new TypeError("perf option must have a now() method if specified");if(be(this,j,rt??t),O!==0&&!o(O))throw new TypeError("max option must be a nonnegative integer");let _t=O?c(O):Array;if(!_t)throw new Error("invalid max value: "+O);if(be(this,m,O),be(this,y,Xe),this.maxEntrySize=Pe||w(this,y),this.sizeCalculation=He,this.sizeCalculation){if(!w(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ce!==void 0&&typeof ce!="function")throw new TypeError("memoMethod must be a function if defined");if(be(this,P,ce),Ee!==void 0&&typeof Ee!="function")throw new TypeError("fetchMethod must be a function if specified");if(be(this,S,Ee),be(this,Oe,!!Ee),be(this,R,new Map),be(this,C,new Array(O).fill(void 0)),be(this,M,new Array(O).fill(void 0)),be(this,U,new _t(O)),be(this,B,new _t(O)),be(this,G,0),be(this,K,0),be(this,$,l.create(O)),be(this,F,0),be(this,N,0),typeof Re=="function"&&be(this,v,Re),typeof oe=="function"&&be(this,A,oe),typeof Te=="function"?(be(this,T,Te),be(this,se,[])):(be(this,T,void 0),be(this,se,void 0)),be(this,Ie,!!w(this,v)),be(this,Me,!!w(this,A)),be(this,ye,!!w(this,T)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!Qe,this.noDeleteOnFetchRejection=!!ne,this.allowStaleOnFetchRejection=!!Be,this.allowStaleOnFetchAbort=!!ht,this.ignoreFetchAbort=!!Et,this.maxEntrySize!==0){if(w(this,y)!==0&&!o(w(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");fe(this,W,Q3e).call(this)}if(this.allowStale=!!ie,this.noDeleteOnStaleGet=!!xe,this.updateAgeOnGet=!!Q,this.updateAgeOnHas=!!ee,this.ttlResolution=o(H)||H===0?H:1,this.ttlAutopurge=!!Y,this.ttl=D||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");fe(this,W,$G).call(this)}if(w(this,m)===0&&this.ttl===0&&w(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!w(this,m)&&!w(this,y)){let ut="LRU_CACHE_UNBOUNDED";s(ut)&&(e.add(ut),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,z))}}get perf(){return w(this,j)}static unsafeExposeInternals(x){return{starts:w(x,we),ttls:w(x,Ce),autopurgeTimers:w(x,Le),sizes:w(x,pe),keyMap:w(x,R),keyList:w(x,C),valList:w(x,M),next:w(x,U),prev:w(x,B),get head(){return w(x,G)},get tail(){return w(x,K)},free:w(x,$),isBackgroundFetch:O=>{var D;return fe(D=x,W,rn).call(D,O)},backgroundFetch:(O,D,H,Y)=>{var Q;return fe(Q=x,W,$3).call(Q,O,D,H,Y)},moveToTail:O=>{var D;return fe(D=x,W,LE).call(D,O)},indexes:O=>{var D;return fe(D=x,W,kc).call(D,O)},rindexes:O=>{var D;return fe(D=x,W,zc).call(D,O)},isStale:O=>{var D;return w(D=x,q).call(D,O)}}}get max(){return w(this,m)}get maxSize(){return w(this,y)}get calculatedSize(){return w(this,N)}get size(){return w(this,F)}get fetchMethod(){return w(this,S)}get memoMethod(){return w(this,P)}get dispose(){return w(this,v)}get onInsert(){return w(this,A)}get disposeAfter(){return w(this,T)}getRemainingTTL(x){return w(this,R).has(x)?1/0:0}*entries(){for(let x of fe(this,W,kc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,rn).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*rentries(){for(let x of fe(this,W,zc).call(this))w(this,M)[x]!==void 0&&w(this,C)[x]!==void 0&&!fe(this,W,rn).call(this,w(this,M)[x])&&(yield[w(this,C)[x],w(this,M)[x]])}*keys(){for(let x of fe(this,W,kc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,rn).call(this,w(this,M)[x])&&(yield O)}}*rkeys(){for(let x of fe(this,W,zc).call(this)){let O=w(this,C)[x];O!==void 0&&!fe(this,W,rn).call(this,w(this,M)[x])&&(yield O)}}*values(){for(let x of fe(this,W,kc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,rn).call(this,w(this,M)[x])&&(yield w(this,M)[x])}*rvalues(){for(let x of fe(this,W,zc).call(this))w(this,M)[x]!==void 0&&!fe(this,W,rn).call(this,w(this,M)[x])&&(yield w(this,M)[x])}[(g=Symbol.iterator,_=Symbol.toStringTag,g)](){return this.entries()}find(x,O={}){for(let D of fe(this,W,kc).call(this)){let H=w(this,M)[D],Y=fe(this,W,rn).call(this,H)?H.__staleWhileFetching:H;if(Y!==void 0&&x(Y,w(this,C)[D],this))return this.get(w(this,C)[D],O)}}forEach(x,O=this){for(let D of fe(this,W,kc).call(this)){let H=w(this,M)[D],Y=fe(this,W,rn).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}rforEach(x,O=this){for(let D of fe(this,W,zc).call(this)){let H=w(this,M)[D],Y=fe(this,W,rn).call(this,H)?H.__staleWhileFetching:H;Y!==void 0&&x.call(O,Y,w(this,C)[D],this)}}purgeStale(){let x=!1;for(let O of fe(this,W,zc).call(this,{allowStale:!0}))w(this,q).call(this,O)&&(fe(this,W,Qc).call(this,w(this,C)[O],"expire"),x=!0);return x}info(x){let O=w(this,R).get(x);if(O===void 0)return;let D=w(this,M)[O],H=fe(this,W,rn).call(this,D)?D.__staleWhileFetching:D;if(H===void 0)return;let Y={value:H};if(w(this,Ce)&&w(this,we)){let Q=w(this,Ce)[O],ee=w(this,we)[O];if(Q&&ee){let ie=Q-(w(this,j).now()-ee);Y.ttl=ie,Y.start=Date.now()}}return w(this,pe)&&(Y.size=w(this,pe)[O]),Y}dump(){let x=[];for(let O of fe(this,W,kc).call(this,{allowStale:!0})){let D=w(this,C)[O],H=w(this,M)[O],Y=fe(this,W,rn).call(this,H)?H.__staleWhileFetching:H;if(Y===void 0||D===void 0)continue;let Q={value:Y};if(w(this,Ce)&&w(this,we)){Q.ttl=w(this,Ce)[O];let ee=w(this,j).now()-w(this,we)[O];Q.start=Math.floor(Date.now()-ee)}w(this,pe)&&(Q.size=w(this,pe)[O]),x.unshift([D,Q])}return x}load(x){this.clear();for(let[O,D]of x){if(D.start){let H=Date.now()-D.start;D.start=w(this,j).now()-H}this.set(O,D.value,D)}}set(x,O,D={}){var We,Qe,Xe,Pe,He,Ee,ce;if(O===void 0)return this.delete(x),this;let{ttl:H=this.ttl,start:Y,noDisposeOnSet:Q=this.noDisposeOnSet,sizeCalculation:ee=this.sizeCalculation,status:ie}=D,{noUpdateTTL:Re=this.noUpdateTTL}=D,oe=w(this,he).call(this,x,O,D.size||0,ee);if(this.maxEntrySize&&oe>this.maxEntrySize)return ie&&(ie.set="miss",ie.maxEntrySizeExceeded=!0),fe(this,W,Qc).call(this,x,"set"),this;let Te=w(this,F)===0?void 0:w(this,R).get(x);if(Te===void 0)Te=w(this,F)===0?w(this,K):w(this,$).length!==0?w(this,$).pop():w(this,F)===w(this,m)?fe(this,W,Y3).call(this,!1):w(this,F),w(this,C)[Te]=x,w(this,M)[Te]=O,w(this,R).set(x,Te),w(this,U)[w(this,K)]=Te,w(this,B)[Te]=w(this,K),be(this,K,Te),vn(this,F)._++,w(this,_e).call(this,Te,oe,ie),ie&&(ie.set="add"),Re=!1,w(this,Me)&&((We=w(this,A))==null||We.call(this,O,x,"add"));else{fe(this,W,LE).call(this,Te);let ne=w(this,M)[Te];if(O!==ne){if(w(this,Oe)&&fe(this,W,rn).call(this,ne)){ne.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:xe}=ne;xe!==void 0&&!Q&&(w(this,Ie)&&((Qe=w(this,v))==null||Qe.call(this,xe,x,"set")),w(this,ye)&&((Xe=w(this,se))==null||Xe.push([xe,x,"set"])))}else Q||(w(this,Ie)&&((Pe=w(this,v))==null||Pe.call(this,ne,x,"set")),w(this,ye)&&((He=w(this,se))==null||He.push([ne,x,"set"])));if(w(this,re).call(this,Te),w(this,_e).call(this,Te,oe,ie),w(this,M)[Te]=O,ie){ie.set="replace";let xe=ne&&fe(this,W,rn).call(this,ne)?ne.__staleWhileFetching:ne;xe!==void 0&&(ie.oldValue=xe)}}else ie&&(ie.set="update");w(this,Me)&&((Ee=this.onInsert)==null||Ee.call(this,O,x,O===ne?"update":"replace"))}if(H!==0&&!w(this,Ce)&&fe(this,W,$G).call(this),w(this,Ce)&&(Re||w(this,Z).call(this,Te,H,Y),ie&&w(this,me).call(this,ie,Te)),!Q&&w(this,ye)&&w(this,se)){let ne=w(this,se),xe;for(;xe=ne==null?void 0:ne.shift();)(ce=w(this,T))==null||ce.call(this,...xe)}return this}pop(){var x;try{for(;w(this,F);){let O=w(this,M)[w(this,G)];if(fe(this,W,Y3).call(this,!0),fe(this,W,rn).call(this,O)){if(O.__staleWhileFetching)return O.__staleWhileFetching}else if(O!==void 0)return O}}finally{if(w(this,ye)&&w(this,se)){let O=w(this,se),D;for(;D=O==null?void 0:O.shift();)(x=w(this,T))==null||x.call(this,...D)}}}has(x,O={}){let{updateAgeOnHas:D=this.updateAgeOnHas,status:H}=O,Y=w(this,R).get(x);if(Y!==void 0){let Q=w(this,M)[Y];if(fe(this,W,rn).call(this,Q)&&Q.__staleWhileFetching===void 0)return!1;if(w(this,q).call(this,Y))H&&(H.has="stale",w(this,me).call(this,H,Y));else return D&&w(this,le).call(this,Y),H&&(H.has="hit",w(this,me).call(this,H,Y)),!0}else H&&(H.has="miss");return!1}peek(x,O={}){let{allowStale:D=this.allowStale}=O,H=w(this,R).get(x);if(H===void 0||!D&&w(this,q).call(this,H))return;let Y=w(this,M)[H];return fe(this,W,rn).call(this,Y)?Y.__staleWhileFetching:Y}async fetch(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:Q=this.ttl,noDisposeOnSet:ee=this.noDisposeOnSet,size:ie=0,sizeCalculation:Re=this.sizeCalculation,noUpdateTTL:oe=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:We=this.allowStaleOnFetchRejection,ignoreFetchAbort:Qe=this.ignoreFetchAbort,allowStaleOnFetchAbort:Xe=this.allowStaleOnFetchAbort,context:Pe,forceRefresh:He=!1,status:Ee,signal:ce}=O;if(!w(this,Oe))return Ee&&(Ee.fetch="get"),this.get(x,{allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,status:Ee});let ne={allowStale:D,updateAgeOnGet:H,noDeleteOnStaleGet:Y,ttl:Q,noDisposeOnSet:ee,size:ie,sizeCalculation:Re,noUpdateTTL:oe,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:We,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:Qe,status:Ee,signal:ce},xe=w(this,R).get(x);if(xe===void 0){Ee&&(Ee.fetch="miss");let Be=fe(this,W,$3).call(this,x,xe,ne,Pe);return Be.__returned=Be}else{let Be=w(this,M)[xe];if(fe(this,W,rn).call(this,Be)){let _t=D&&Be.__staleWhileFetching!==void 0;return Ee&&(Ee.fetch="inflight",_t&&(Ee.returnedStale=!0)),_t?Be.__staleWhileFetching:Be.__returned=Be}let ht=w(this,q).call(this,xe);if(!He&&!ht)return Ee&&(Ee.fetch="hit"),fe(this,W,LE).call(this,xe),H&&w(this,le).call(this,xe),Ee&&w(this,me).call(this,Ee,xe),Be;let Et=fe(this,W,$3).call(this,x,xe,ne,Pe),rt=Et.__staleWhileFetching!==void 0&&D;return Ee&&(Ee.fetch=ht?"stale":"refresh",rt&&ht&&(Ee.returnedStale=!0)),rt?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(x,O={}){let D=await this.fetch(x,O);if(D===void 0)throw new Error("fetch() returned undefined");return D}memo(x,O={}){let D=w(this,P);if(!D)throw new Error("no memoMethod provided to constructor");let{context:H,forceRefresh:Y,...Q}=O,ee=this.get(x,Q);if(!Y&&ee!==void 0)return ee;let ie=D(x,ee,{options:Q,context:H});return this.set(x,ie,Q),ie}get(x,O={}){let{allowStale:D=this.allowStale,updateAgeOnGet:H=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:Q}=O,ee=w(this,R).get(x);if(ee!==void 0){let ie=w(this,M)[ee],Re=fe(this,W,rn).call(this,ie);return Q&&w(this,me).call(this,Q,ee),w(this,q).call(this,ee)?(Q&&(Q.get="stale"),Re?(Q&&D&&ie.__staleWhileFetching!==void 0&&(Q.returnedStale=!0),D?ie.__staleWhileFetching:void 0):(Y||fe(this,W,Qc).call(this,x,"expire"),Q&&D&&(Q.returnedStale=!0),D?ie:void 0)):(Q&&(Q.get="hit"),Re?ie.__staleWhileFetching:(fe(this,W,LE).call(this,ee),H&&w(this,le).call(this,ee),ie))}else Q&&(Q.get="miss")}delete(x){return fe(this,W,Qc).call(this,x,"delete")}clear(){return fe(this,W,tH).call(this,"delete")}},m=new WeakMap,y=new WeakMap,v=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,j=new WeakMap,F=new WeakMap,N=new WeakMap,R=new WeakMap,C=new WeakMap,M=new WeakMap,U=new WeakMap,B=new WeakMap,G=new WeakMap,K=new WeakMap,$=new WeakMap,se=new WeakMap,pe=new WeakMap,we=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Me=new WeakMap,W=new WeakSet,$G=function(){let x=new u(w(this,m)),O=new u(w(this,m));be(this,Ce,x),be(this,we,O);let D=this.ttlAutopurge?new Array(w(this,m)):void 0;be(this,Le,D),be(this,Z,(Q,ee,ie=w(this,j).now())=>{if(O[Q]=ee!==0?ie:0,x[Q]=ee,D!=null&&D[Q]&&(clearTimeout(D[Q]),D[Q]=void 0),ee!==0&&D){let Re=setTimeout(()=>{w(this,q).call(this,Q)&&fe(this,W,Qc).call(this,w(this,C)[Q],"expire")},ee+1);Re.unref&&Re.unref(),D[Q]=Re}}),be(this,le,Q=>{O[Q]=x[Q]!==0?w(this,j).now():0}),be(this,me,(Q,ee)=>{if(x[ee]){let ie=x[ee],Re=O[ee];if(!ie||!Re)return;Q.ttl=ie,Q.start=Re,Q.now=H||Y();let oe=Q.now-Re;Q.remainingTTL=ie-oe}});let H=0,Y=()=>{let Q=w(this,j).now();if(this.ttlResolution>0){H=Q;let ee=setTimeout(()=>H=0,this.ttlResolution);ee.unref&&ee.unref()}return Q};this.getRemainingTTL=Q=>{let ee=w(this,R).get(Q);if(ee===void 0)return 0;let ie=x[ee],Re=O[ee];if(!ie||!Re)return 1/0;let oe=(H||Y())-Re;return ie-oe},be(this,q,Q=>{let ee=O[Q],ie=x[Q];return!!ie&&!!ee&&(H||Y())-ee>ie})},le=new WeakMap,me=new WeakMap,Z=new WeakMap,q=new WeakMap,Q3e=function(){let x=new u(w(this,m));be(this,N,0),be(this,pe,x),be(this,re,O=>{be(this,N,w(this,N)-x[O]),x[O]=0}),be(this,he,(O,D,H,Y)=>{if(fe(this,W,rn).call(this,D))return 0;if(!o(H))if(Y){if(typeof Y!="function")throw new TypeError("sizeCalculation must be a function");if(H=Y(D,O),!o(H))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return H}),be(this,_e,(O,D,H)=>{if(x[O]=D,w(this,y)){let Y=w(this,y)-x[O];for(;w(this,N)>Y;)fe(this,W,Y3).call(this,!0)}be(this,N,w(this,N)+x[O]),H&&(H.entrySize=D,H.totalCalculatedSize=w(this,N))})},re=new WeakMap,_e=new WeakMap,he=new WeakMap,kc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,K);!(!fe(this,W,ZG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,G)));)O=w(this,B)[O]},zc=function*({allowStale:x=this.allowStale}={}){if(w(this,F))for(let O=w(this,G);!(!fe(this,W,ZG).call(this,O)||((x||!w(this,q).call(this,O))&&(yield O),O===w(this,K)));)O=w(this,U)[O]},ZG=function(x){return x!==void 0&&w(this,R).get(w(this,C)[x])===x},Y3=function(x){var Y,Q,ee;let O=w(this,G),D=w(this,C)[O],H=w(this,M)[O];return w(this,Oe)&&fe(this,W,rn).call(this,H)?H.__abortController.abort(new Error("evicted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Y=w(this,v))==null||Y.call(this,H,D,"evict")),w(this,ye)&&((Q=w(this,se))==null||Q.push([H,D,"evict"]))),w(this,re).call(this,O),(ee=w(this,Le))!=null&&ee[O]&&(clearTimeout(w(this,Le)[O]),w(this,Le)[O]=void 0),x&&(w(this,C)[O]=void 0,w(this,M)[O]=void 0,w(this,$).push(O)),w(this,F)===1?(be(this,G,be(this,K,0)),w(this,$).length=0):be(this,G,w(this,U)[O]),w(this,R).delete(D),vn(this,F)._--,O},$3=function(x,O,D,H){let Y=O===void 0?void 0:w(this,M)[O];if(fe(this,W,rn).call(this,Y))return Y;let Q=new i,{signal:ee}=D;ee==null||ee.addEventListener("abort",()=>Q.abort(ee.reason),{signal:Q.signal});let ie={signal:Q.signal,options:D,context:H},Re=(Pe,He=!1)=>{let{aborted:Ee}=Q.signal,ce=D.ignoreFetchAbort&&Pe!==void 0,ne=D.ignoreFetchAbort||!!(D.allowStaleOnFetchAbort&&Pe!==void 0);if(D.status&&(Ee&&!He?(D.status.fetchAborted=!0,D.status.fetchError=Q.signal.reason,ce&&(D.status.fetchAbortIgnored=!0)):D.status.fetchResolved=!0),Ee&&!ce&&!He)return Te(Q.signal.reason,ne);let xe=Qe,Be=w(this,M)[O];return(Be===Qe||ce&&He&&Be===void 0)&&(Pe===void 0?xe.__staleWhileFetching!==void 0?w(this,M)[O]=xe.__staleWhileFetching:fe(this,W,Qc).call(this,x,"fetch"):(D.status&&(D.status.fetchUpdated=!0),this.set(x,Pe,ie.options))),Pe},oe=Pe=>(D.status&&(D.status.fetchRejected=!0,D.status.fetchError=Pe),Te(Pe,!1)),Te=(Pe,He)=>{let{aborted:Ee}=Q.signal,ce=Ee&&D.allowStaleOnFetchAbort,ne=ce||D.allowStaleOnFetchRejection,xe=ne||D.noDeleteOnFetchRejection,Be=Qe;if(w(this,M)[O]===Qe&&(!xe||!He&&Be.__staleWhileFetching===void 0?fe(this,W,Qc).call(this,x,"fetch"):ce||(w(this,M)[O]=Be.__staleWhileFetching)),ne)return D.status&&Be.__staleWhileFetching!==void 0&&(D.status.returnedStale=!0),Be.__staleWhileFetching;if(Be.__returned===Be)throw Pe},We=(Pe,He)=>{var ce;let Ee=(ce=w(this,S))==null?void 0:ce.call(this,x,Y,ie);Ee&&Ee instanceof Promise&&Ee.then(ne=>Pe(ne===void 0?void 0:ne),He),Q.signal.addEventListener("abort",()=>{(!D.ignoreFetchAbort||D.allowStaleOnFetchAbort)&&(Pe(void 0),D.allowStaleOnFetchAbort&&(Pe=ne=>Re(ne,!0)))})};D.status&&(D.status.fetchDispatched=!0);let Qe=new Promise(We).then(Re,oe),Xe=Object.assign(Qe,{__abortController:Q,__staleWhileFetching:Y,__returned:void 0});return O===void 0?(this.set(x,Xe,{...ie.options,status:void 0}),O=w(this,R).get(x)):w(this,M)[O]=Xe,Xe},rn=function(x){if(!w(this,Oe))return!1;let O=x;return!!O&&O instanceof Promise&&O.hasOwnProperty("__staleWhileFetching")&&O.__abortController instanceof i},eH=function(x,O){w(this,B)[O]=x,w(this,U)[x]=O},LE=function(x){x!==w(this,K)&&(x===w(this,G)?be(this,G,w(this,U)[x]):fe(this,W,eH).call(this,w(this,B)[x],w(this,U)[x]),fe(this,W,eH).call(this,w(this,K),x),be(this,K,x))},Qc=function(x,O){var H,Y,Q,ee,ie,Re;let D=!1;if(w(this,F)!==0){let oe=w(this,R).get(x);if(oe!==void 0)if((H=w(this,Le))!=null&&H[oe]&&(clearTimeout((Y=w(this,Le))==null?void 0:Y[oe]),w(this,Le)[oe]=void 0),D=!0,w(this,F)===1)fe(this,W,tH).call(this,O);else{w(this,re).call(this,oe);let Te=w(this,M)[oe];if(fe(this,W,rn).call(this,Te)?Te.__abortController.abort(new Error("deleted")):(w(this,Ie)||w(this,ye))&&(w(this,Ie)&&((Q=w(this,v))==null||Q.call(this,Te,x,O)),w(this,ye)&&((ee=w(this,se))==null||ee.push([Te,x,O]))),w(this,R).delete(x),w(this,C)[oe]=void 0,w(this,M)[oe]=void 0,oe===w(this,K))be(this,K,w(this,B)[oe]);else if(oe===w(this,G))be(this,G,w(this,U)[oe]);else{let We=w(this,B)[oe];w(this,U)[We]=w(this,U)[oe];let Qe=w(this,U)[oe];w(this,B)[Qe]=w(this,B)[oe]}vn(this,F)._--,w(this,$).push(oe)}}if(w(this,ye)&&((ie=w(this,se))!=null&&ie.length)){let oe=w(this,se),Te;for(;Te=oe==null?void 0:oe.shift();)(Re=w(this,T))==null||Re.call(this,...Te)}return D},tH=function(x){var O,D,H,Y;for(let Q of fe(this,W,zc).call(this,{allowStale:!0})){let ee=w(this,M)[Q];if(fe(this,W,rn).call(this,ee))ee.__abortController.abort(new Error("deleted"));else{let ie=w(this,C)[Q];w(this,Ie)&&((O=w(this,v))==null||O.call(this,ee,ie,x)),w(this,ye)&&((D=w(this,se))==null||D.push([ee,ie,x]))}}if(w(this,R).clear(),w(this,M).fill(void 0),w(this,C).fill(void 0),w(this,Ce)&&w(this,we)){w(this,Ce).fill(0),w(this,we).fill(0);for(let Q of w(this,Le)??[])Q!==void 0&&clearTimeout(Q);(H=w(this,Le))==null||H.fill(void 0)}if(w(this,pe)&&w(this,pe).fill(0),be(this,G,0),be(this,K,0),w(this,$).length=0,be(this,N,0),be(this,F,0),w(this,ye)&&w(this,se)){let Q=w(this,se),ee;for(;ee=Q==null?void 0:Q.shift();)(Y=w(this,T))==null||Y.call(this,...ee)}},z);return $x.LRUCache=d,$x}var E1e;function lvt(){if(E1e)return Yx;E1e=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.ActorOptimizeQueryOperationQuerySourceIdentify=void 0;const t=Yi(),e=dt,r=ke(),n=Ft(),i=rr(),a=cvt();let s=class extends t.ActorOptimizeQueryOperation{constructor(u){super(u);k(this,"serviceForceSparqlEndpoint");k(this,"cacheSize");k(this,"httpInvalidator");k(this,"mediatorQuerySourceIdentify");k(this,"mediatorContextPreprocess");k(this,"cache");this.serviceForceSparqlEndpoint=u.serviceForceSparqlEndpoint,this.cacheSize=u.cacheSize,this.httpInvalidator=u.httpInvalidator,this.mediatorQuerySourceIdentify=u.mediatorQuerySourceIdentify,this.mediatorContextPreprocess=u.mediatorContextPreprocess,this.cache=this.cacheSize?new a.LRUCache({max:this.cacheSize}):void 0;const l=this.cache;l&&this.httpInvalidator.addInvalidateListener(({url:d})=>d?l.delete(d):l.clear())}async test(u){return(0,r.passTestVoid)()}async run(u){let l=u.context,d;if(l.has(e.KeysInitQuery.querySourcesUnidentified)){const f=u.context.get(e.KeysInitQuery.querySourcesUnidentified),h=await Promise.all(f.map(_=>this.expandSource(_)));d=await Promise.all(h.map(async _=>this.identifySource(_,u.context)));const p=u.context.get(e.KeysStatistics.dereferencedLinks);if(p)for(const _ of d)p.updateStatistic({url:_.source.referenceValue,metadata:{seed:!0}},_.source);l=l.delete(e.KeysInitQuery.querySourcesUnidentified).set(e.KeysQueryOperation.querySources,d)}if(!await(0,i.passFullOperationToSource)(u.operation,d??[],l)){const f=new Set;n.algebraUtils.visitOperation(u.operation,{[n.Algebra.Types.SERVICE]:{preVisitor:()=>({continue:!1}),visitor:p=>{p.name.termType==="NamedNode"&&f.add(p.name.value)}}});const h=Object.fromEntries(await Promise.all([...f].map(async p=>[p,await this.identifySource({type:this.serviceForceSparqlEndpoint?"sparql":void 0,value:p},l)])));f.size>0&&(l=l.set(e.KeysQueryOperation.serviceSources,h))}return{context:l,operation:u.operation}}async expandSource(u){return typeof u=="string"||"match"in u?{value:u}:{...u,context:(await this.mediatorContextPreprocess.mediate({context:r.ActionContext.ensureActionContext(u.context??{})})).context}}identifySource(u,l){let d;return typeof u.value=="string"&&this.cache&&(d=this.cache.get(u.value)),d||(d=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:u,context:l}).then(({querySource:f})=>f),typeof u.value=="string"&&this.cache&&this.cache.set(u.value,d)),d}};return Yx.ActorOptimizeQueryOperationQuerySourceIdentify=s,Yx}var I1e;function dvt(){return I1e||(I1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(lvt(),t)}(VU)),VU}var GU={},Zx={},O1e;function fvt(){if(O1e)return Zx;O1e=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const t=Yi(),e=dt,r=ke(),n=Ft();let i=class extends t.ActorOptimizeQueryOperation{constructor(s){super(s)}async test(s){return s.operation.type!==n.Algebra.Types.DESCRIBE?(0,r.failTest)(`Actor ${this.name} only supports describe operations, but got ${s.operation.type}`):(0,r.passTest)(!0)}async run(s){const o=s.context.getSafe(e.KeysInitQuery.dataFactory),c=new n.AlgebraFactory(o),u=s.operation,l=u.terms.filter(f=>f.termType!=="Variable").map(f=>{const h=[o.quad(f,o.variable("__predicate"),o.variable("__object"))];h.forEach(_=>_.type="pattern");const p=c.createBgp(h);return c.createConstruct(p,h)});if(l.length!==u.terms.length){let f=[];u.terms.filter(h=>h.termType==="Variable").forEach((h,p)=>{const _=[o.quad(h,o.variable(`__predicate${p}`),o.variable(`__object${p}`))];_.forEach(g=>g.type="pattern"),f=[...f,..._]}),l.push(c.createConstruct(c.createJoin([u.input,c.createBgp(f)]),f))}return{operation:c.createUnion(l,!1),context:s.context}}};return Zx.ActorOptimizeQueryOperationDescribeToConstructsSubject=i,Zx}var R1e;function hvt(){return R1e||(R1e=1,function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(fvt(),t)}(GU)),GU}var pvt=function(t){const e=new(Btt()).LoggerVoid,r=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^5.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^5.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),i=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^5.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),a=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^5.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),s=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^5.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),o=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^5.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),c=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-serialize/^5.0.0/components/ActorQuerySerialize.jsonld#ActorQuerySerialize_default_bus"}),u=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^5.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),l=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-dereference-link/^5.0.0/components/ActorQuerySourceDereferenceLink.jsonld#ActorQuerySourceDereferenceLink_default_bus"}),d=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^5.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),f=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^5.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),h=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^5.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),p=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^5.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),_=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^5.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),g=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^5.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),m=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^5.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),y=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^5.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),v=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^5.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),A=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^5.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),T=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^5.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),S=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^5.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),P=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^5.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),j=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^5.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),F=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^5.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),N=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^5.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),R=new(et()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^5.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),C=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^5.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),M=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^5.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),U=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^5.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),B=new(qr()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^5.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),G=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^5.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),K=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^5.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),$=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^5.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),se=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^5.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),pe=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^5.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),we=new(ke()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^5.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(Qrt()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",extensionFunctionsAlwaysPushdown:"@comunica/actor-init-query:extensionFunctionsAlwaysPushdown",fetch:"@comunica/bus-http:fetch",fileBaseIRI:"@comunica/actor-init-query:fileBaseIRI",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAbortSignal:"@comunica/bus-http:http-abort-controller",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpCache:"@comunica/bus-http:httpCache",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpRetryStatusCodes:"@comunica/bus-http:http-retry-status-codes",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",parseUnsupportedVersions:"@comunica/actor-init-query:parseUnsupportedVersions",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",rdfSerializationPrefixes:"@comunica/bus-rdf-serialize:rdfSerializationPrefixes",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:n,busFailMessage:"Context preprocessing failed"}),new(Krt()).ActorContextPreprocessSetDefaults({logger:e,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:n,busFailMessage:"Context preprocessing failed"}),new(Jrt()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:n,busFailMessage:"Context preprocessing failed"});const Ce=new(ane()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:n});new(tnt()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:i,busFailMessage:"Failed to obtaining hash functions for bindings"});const Le=new(Pn()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:i});new(snt()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:a,busFailMessage:"Failed to obtaining hash functions for quads"}),new(cnt()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(dnt()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(hnt()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const Ie=new(bnt()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(Ant()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const Oe=new(ane()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:s});new(Nnt()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:o,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'}),new(sat()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:o,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const ye=new(Pn()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:o});new(fat()).ActorQuerySerializeSparql({name:"urn:comunica:default:query-serialize/actors#sparql",bus:c,busFailMessage:'Query serializing failed: none of the configured parsers were able to serialize for the query language "${action.queryFormat.language}" at version "${action.queryFormat.version}"'});const Me=new(Pn()).MediatorRace({name:"urn:comunica:default:query-serialize/mediators#main",bus:c});new(wat()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(xat()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Iat()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Pat()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Mat()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Cat()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Kat()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"});const W=new(Pn()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:u}),ft=new(yc()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:u}),le=new(yc()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:u}),me=new(Pn()).MediatorRace({name:"urn:comunica:default:query-source-dereference-link/mediators#main",bus:l}),Z=new(yh()).MediatorNumber({field:"filterFactor",type:"max",ignoreFailures:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:d}),q=new(est()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:f,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}"}),J=new(Pn()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:f}),re=new(Pn()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:h});new(nst()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:p,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const _e=new(yh()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:p});new(ost()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:_,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const he=new(yh()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:_});new(lst()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:g,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"}),new(fst()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:g,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"});const ue=new(Pn()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:g});new(_st()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(gst()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(bst()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const Ue=new(yc()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:m});new(wst()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(xst()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Ist()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Rst()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Nst()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Mst()).ActorRdfMetadataExtractPostAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#post-accepted",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Cst()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(jst()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(qst()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Gst()).ActorRdfMetadataExtractVoid({name:"urn:comunica:default:rdf-metadata-extract/actors#void",bus:y,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"});const De=new(yc()).MediatorCombineUnion({filterFailures:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:y});new(hot()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:v,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(wot()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:v,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(kot()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:v,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(mut()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:v,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"});const Je=new(Pn()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:v}),ze=new(yc()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:v});new(vut()).ActorRdfParseHtml({busRdfParseHtml:A,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:v,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Mut()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:A,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(Cut()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:A,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(qut()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:T,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"});const ve=new(Pn()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:T});new(kut()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:S,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue"});const de=new(Pn()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:S});new(_ct()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:P,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(wct()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:P,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(slt()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:P,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"});const Ge=new(Pn()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:P}),it=new(yc()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:P}),ae=new(yc()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:P}),z=new(Pn()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:j});new(plt()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:F,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const V=new(Pn()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:F}),x=new(Pn()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:N});new(glt()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vlt()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wlt()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Elt()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Rlt()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Flt()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Clt()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Blt()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Vlt()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(klt()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Wlt()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Jlt()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zlt()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rdt()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(adt()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(udt()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ddt()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pdt()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gdt()).ActorFunctionFactoryTermHasLang({name:"urn:comunica:default:function-factory/actors#term-function-has-lang",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vdt()).ActorFunctionFactoryTermHasLangdir({name:"urn:comunica:default:function-factory/actors#term-function-has-langdir",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wdt()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Edt()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Rdt()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fdt()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Cdt()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Bdt()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Vdt()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kdt()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Wdt()).ActorFunctionFactoryTermLangdir({name:"urn:comunica:default:function-factory/actors#term-function-langdir",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Jdt()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zdt()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rft()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aft()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uft()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dft()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pft()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yft()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Aft()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Sft()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ift()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aPe()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Nft()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Dft()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jft()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Wft()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Jft()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zft()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rht()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aht()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uht()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dht()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pht()).ActorFunctionFactoryTermStrLangdir({name:"urn:comunica:default:function-factory/actors#term-function-str-langdir",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ght()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vht()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wht()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Eht()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ght()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zht()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Kht()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Yht()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ept()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(npt()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(spt()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cpt()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fpt()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_pt()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ypt()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Apt()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Spt()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ipt()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ppt()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Mpt()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lpt()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qpt()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Gpt()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zpt()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Kpt()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ypt()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(e0t()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(n0t()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(s0t()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(c0t()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const O=new(Pn()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:R}),D=new(Pn()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:C}),H=new(yh()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:M}),Y=new(yh()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#main",bus:U});new(d0t()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Q=new(yh()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:B}),ee=new(Pn()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:G}),ie=new(Pn()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:K}),Re=new(h0t()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:$}),oe=new(Pn()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:se}),Te=new(_0t()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:pe}),We=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-optimize-query-operation-query-source-identify/^5.0.0/components/ActorOptimizeQueryOperationQuerySourceIdentify.jsonld#IActorOptimizeQueryOperationQuerySourceIdentifyArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Qe=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-parse-jsonld/^5.0.0/components/ActorRdfParseJsonLd.jsonld#IActorRdfParseJsonLdArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Xe=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^5.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Pe=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-retry/^5.0.0/components/ActorHttpRetry.jsonld#IActorHttpQueueArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),He=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-fetch/^5.0.0/components/ActorHttpFetch.jsonld#IActorHttpFetchArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Ee=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-limit-rate/^5.0.0/components/ActorHttpLimitRate.jsonld#IActorHttpLimitRateArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ce=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^5.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ne=new(Tc()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^5.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:pe,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),xe=new(yc()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:we});new(y0t()).ActorRdfJoinEntriesSortSelectivity({mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join-entries-sort/actors#selectivity",bus:p,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"}),new(x0t()).ActorRdfJoinSingle({mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(I0t()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const Be=new(H_e()).ActorRdfJoinHash({mediatorHashBindings:Le,canHandleUndefs:!1,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),ht=new(H_e()).ActorRdfJoinHash({mediatorHashBindings:Le,canHandleUndefs:!0,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),Et=new(B0t()).ActorRdfJoinSymmetricHash({mediatorHashBindings:Le,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),rt=new(U0t()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(eme()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(eme()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(qP()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(qP()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(qP()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(qP()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(z0t()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const _t=new(K0t()).ActorQuerySourceDereferenceLinkHypermedia({mediatorDereferenceRdf:re,mediatorMetadata:ue,mediatorMetadataExtract:De,mediatorMetadataAccumulate:Ue,mediatorQuerySourceIdentifyHypermedia:Z,name:"urn:comunica:default:query-source-dereference-link/actors#dereference",bus:l,busFailMessage:"Query source dereference link failed: none of the configured actors were able to resolve ${action.link.url}"});new($0t()).ActorDereferenceRdfParse({mediatorDereference:J,mediatorParse:Je,mediatorParseMediatypes:ze,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:h,busFailMessage:"RDF dereferencing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(t_t()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:ze,mediatorRdfParseHandle:Je,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:A,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(n_t()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:Ge,mediatorMediaTypeCombiner:it,mediatorMediaTypeFormatCombiner:ae,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(s_t()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:O,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(c_t()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:O,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(f_t()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:O,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(__t()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:O,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(y_t()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:O,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(A_t()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:O,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(S_t()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:O,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:R,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(O_t()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:O,mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(P_t()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(F_t()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(D_t()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(L_t()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:O,mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(B_t()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(H_t()).ActorHttpWayback({mediatorHttp:H,name:"urn:comunica:default:http/actors#wayback",bus:U,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),new(Q_t()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:Y,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(K_t()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:Y,mediatorRdfSerializeMediatypes:it,mediatorRdfSerialize:Ge,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(Smt()).ActorRdfUpdateHypermediaSparql({mediatorHttp:Y,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(Emt()).ActorQueryOperationAsk({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#ask",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ZPe()).ActorQueryOperationConstruct({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#construct",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Rmt()).ActorQueryOperationDistinctIdentity({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#distinct",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Nmt()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:D,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#extend",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Mmt()).ActorQueryOperationBgpJoin({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#bgp",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Cmt()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:D,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#filter",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(jmt()).ActorQueryOperationFromQuad({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#from",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qmt()).ActorQueryOperationProject({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#project",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Gmt()).ActorQueryOperationReducedHash({mediatorHashBindings:Le,cacheSize:100,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#reduced",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(kmt()).ActorQueryOperationSlice({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#slice",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(t3e()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:Ue,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#union",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Kmt()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:Ue,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-alt",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Jmt()).ActorQueryOperationPathLink({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-link",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new($mt()).ActorQueryOperationPathInv({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-inv",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(egt()).ActorQueryOperationPathNps({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-nps",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(rgt()).ActorQueryOperationClear({mediatorUpdateQuads:V,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#update-clear",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(igt()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#update-composite",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(sgt()).ActorQueryOperationCreate({mediatorUpdateQuads:V,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#update-create",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ugt()).ActorQueryOperationDrop({mediatorUpdateQuads:V,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#update-drop",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(lgt()).ActorQueryOperationLoad({mediatorUpdateQuads:V,mediatorQuerySourceIdentify:ie,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#update-load",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(fgt()).ActorQueryOperationJoin({mediatorJoin:Re,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#join",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(pgt()).ActorQueryOperationLeftJoin({mediatorJoin:Re,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(mgt()).ActorQueryOperationMinus({mediatorJoin:Re,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#minus",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ygt()).ActorQueryOperationPathSeq({mediatorJoin:Re,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-seq",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const ut=new(vgt()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:_e,mediatorJoin:Re,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(Tgt()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:oe,mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Sgt()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:oe,mediatorExpressionEvaluatorFactory:D,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:N,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Igt()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:D,mediatorTermComparatorFactory:oe,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#orderby",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Pt=new(Rgt()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ie]});new(Ngt()).ActorDereferenceHttp({mediatorHttp:Y,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:f,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}",beforeActors:[q]});const Ot=new qk.ActorInitQuery({mediatorQueryProcess:ee,mediatorQueryResultSerialize:W,mediatorQueryResultSerializeMediaTypeCombiner:ft,mediatorQueryResultSerializeMediaTypeFormatCombiner:le,mediatorHttpInvalidate:Te,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:r,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(syt()).ActorRdfParseJsonLd({cacheSize:128,httpInvalidator:Qe,mediatorHttp:Y,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:v,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(cyt()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:Xe,mediatorDereferenceRdf:re,mediatorMetadata:ue,mediatorMetadataExtract:De,mediatorRdfUpdateHypermedia:z,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:F,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const or=new(_yt()).ActorHttpFetch({cacheMaxSize:104857600,cacheMaxCount:1e3,cacheMaxEntrySize:5242880,httpInvalidator:He,agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:M,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),Qt=new(cve()).ActionObserverHttp({httpInvalidator:ce,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^5.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:M}),mt=new(hve()).ActionObserverHttp({httpInvalidator:ne,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^5.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:M});new(Syt()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:ue,mediatorMetadataExtract:De,mediatorDereferenceRdf:re,mediatorMergeBindingsContext:xe,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(Iyt()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:Y,mediatorMergeBindingsContext:xe,mediatorQuerySerialize:Me,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,forceSourceType:!1,bindMethod:"values",countTimeout:3e3,cardinalityCountQueries:!0,cardinalityEstimateConstruction:!1,forceGetIfUrlLengthBelow:600,name:"urn:comunica:default:query-source-identify-hypermedia/actors#sparql",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(Hyt()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:xe,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(Kyt()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:Q,mediatorFunctionFactory:O,mediatorMergeBindingsContext:xe,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:C,busFailMessage:"Creation of Expression Evaluator failed"}),new(Yyt()).ActorQueryOperationGroup({mediatorMergeBindingsContext:xe,mediatorBindingsAggregatorFactory:x,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#group",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Zyt()).ActorQueryOperationNop({mediatorMergeBindingsContext:xe,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#nop",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(tbt()).ActorQueryOperationValues({mediatorMergeBindingsContext:xe,name:"urn:comunica:default:query-operation/actors#values",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(nbt()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:xe,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(abt()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:xe,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(obt()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:V,mediatorMergeBindingsContext:xe,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cbt()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:xe,mediatorQueryOperation:Q,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const wn=new(fbt()).ActorQueryProcessSequential({mediatorContextPreprocess:Ce,mediatorQueryParse:ye,mediatorOptimizeQueryOperation:Oe,mediatorQueryOperation:Q,mediatorMergeBindingsContext:xe,name:"urn:comunica:default:query-process/actors#sequential",bus:G,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),gt=new(gbt()).ActorQuerySourceIdentifyHypermedia({cacheSize:100,maxIterators:64,mediatorMetadataAccumulate:Ue,mediatorQuerySourceDereferenceLink:me,mediatorRdfResolveHypermediaLinks:ve,mediatorRdfResolveHypermediaLinksQueue:de,mediatorMergeBindingsContext:xe,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:K,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"});new(bbt()).ActorRdfJoinNone({mediatorMergeBindingsContext:xe,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Tbt()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:Q,mediatorMergeBindingsContext:xe,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Ibt()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:Q,mediatorFunctionFactory:O,mediatorMergeBindingsContext:xe,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:se,busFailMessage:"Creation of term comparator failed"}),new(Rbt()).ActorQuerySourceDereferenceLinkForceSparql({mediatorMetadataAccumulate:Ue,mediatorQuerySourceIdentifyHypermedia:Z,name:"urn:comunica:default:query-source-dereference-link/actors#force-sparql",bus:l,busFailMessage:"Query source dereference link failed: none of the configured actors were able to resolve ${action.link.url}",beforeActors:[_t]});const Fe=new(H3e()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:_e,mediatorQueryOperation:Q,mediatorMergeBindingsContext:xe,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[ut,Be,ht,Et,rt]});new(Nbt()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:_e,mediatorJoin:Re,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[ut,Be,ht,Et,rt]}),new(cve()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:Qt,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(hve()).ActorQueryResultSerializeStats({httpObserver:mt,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:u,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Mbt()).ActorQueryProcessExplainParsed({queryProcessor:wn,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:G,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(Cbt()).ActorQueryProcessExplainLogical({queryProcessor:wn,name:"urn:comunica:default:query-process/actors#explain-logical",bus:G,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(jbt()).ActorQueryProcessExplainQuery({queryProcessor:wn,mediatorQuerySerialize:Me,name:"urn:comunica:default:query-process/actors#explain-query",bus:G,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(qbt()).ActorQueryProcessExplainPhysical({queryProcessor:wn,name:"urn:comunica:default:query-process/actors#explain-physical",bus:G,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});const $e=new(Vbt()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Pt]});new(Hbt()).ActorOptimizeQueryOperationLeftjoinExpressionPushdown({name:"urn:comunica:default:optimize-query-operation/actors#leftjoin-expression-pushdown",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Pt]});const tt=new(Qbt()).ActorHttpProxy({mediatorHttp:Y,name:"urn:comunica:default:http/actors#proxy",bus:M,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[or]});new(Kbt()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:Je,mediatorQuerySourceIdentify:ie,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:K,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[gt]}),new(O3e()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:xe,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:K,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[gt]}),new(Jbt()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:_e,mediatorJoinSelectivity:he,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[ut,Fe,Be,ht,Et,rt]});const St=new($bt()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[$e]});new(evt()).ActorHttpRetry({mediatorHttp:Y,httpInvalidator:Pe,name:"urn:comunica:default:http/actors#retry",bus:M,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[tt]}),new(rvt()).ActorHttpLimitRate({mediatorHttp:Y,httpInvalidator:Ee,correctionMultiplier:.1,failureMultiplier:10,limitByDefault:!1,allowOverlap:!1,name:"urn:comunica:default:http/actors#limit-rate",bus:M,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[tt]});const Ut=new(ivt()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[St]}),ar=new(svt()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ut]}),nr=new(uvt()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ar]}),fi=new(rPe()).ActorOptimizeQueryOperationQuerySourceSkolemize({name:"urn:comunica:default:optimize-query-operation/actors#query-source-skolemize",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[nr]}),Zo=new(dvt()).ActorOptimizeQueryOperationQuerySourceIdentify({serviceForceSparqlEndpoint:!1,cacheSize:100,httpInvalidator:We,mediatorQuerySourceIdentify:ie,mediatorContextPreprocess:Ce,name:"urn:comunica:default:optimize-query-operation/actors#query-source-identify",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[fi]});return new(hvt()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:s,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Zo]}),Ot};Object.defineProperty(NF,"__esModule",{value:!0});NF.QueryEngine=void 0;const _vt=qk,mvt=pvt;class gvt extends _vt.QueryEngineBase{constructor(e=mvt()){super(e)}}NF.QueryEngine=gvt;(function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(i,a);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,s,o)}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=E&&E.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(NF,t)})(xEe);const{DataFactory:yvt,Store:bvt}=lk,{namedNode:kP,literal:HU,quad:vvt}=yvt;function Avt(t){return t.map(e=>{const r=kP(e.subject),n=kP(e.predicate);let i;return e.objectIsLiteral?e.objectLiteralLanguage?i=HU(e.object,e.objectLiteralLanguage):e.objectLiteralDatatype?i=HU(e.objectLexicalValue??e.object,kP(e.objectLiteralDatatype)):i=HU(e.objectLexicalValue??e.object):i=kP(e.object),vvt(r,n,i)})}function Tvt(t){const e=new Map,r=/(?:^|\s)(?:PREFIX|prefix)\s+(\w+):\s*<([^>]+)>\s*/gim;let n;for(r.lastIndex=0;(n=r.exec(t))!==null;)e.set(n[1],n[2]);return e}function wvt(t,e){const r=new Map(t);for(const[n,i]of e)r.set(n,i);return r}function Svt(t){var o;if(!(t.object.termType==="Literal"))return{subject:t.subject.value,predicate:t.predicate.value,object:t.object.value,objectIsLiteral:!1};const r=t.object,n=r.value,i=r.language,a=(o=r.datatype)==null?void 0:o.value;let s=n;return i&&(s+=`@${i}`),a&&a!=="http://www.w3.org/2001/XMLSchema#string"&&a!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&(s+=`^^${a}`),{subject:t.subject.value,predicate:t.predicate.value,object:s,objectIsLiteral:!0,...i&&{objectLiteralLanguage:i},...a&&a!=="http://www.w3.org/2001/XMLSchema#string"&&a!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&{objectLiteralDatatype:a},...(i||a)&&{objectLexicalValue:n}}}async function W3e(t,e,r){try{const n=Tvt(t),i=wvt(r,n),a=Avt(e),s=new bvt(a),o=new xEe.QueryEngine,c=t.trim().toUpperCase().split(/\s+/)[0];if(c==="CONSTRUCT"||c==="DESCRIBE"){const u=await o.queryQuads(t,{sources:[s]}),l=[];for await(const f of u)l.push(f);return{type:"triples",triples:l.map(Svt),prefixes:i}}else{const u=await o.queryBindings(t,{sources:[s]}),l=[],d=[];let f=!0;for await(const h of u){if(f){for(const _ of h.keys())d.push(_.value);f=!1}const p={};for(const _ of d){const g=h.get(_);if(g)if(g.termType==="Literal"){const m=g;let y=m.value;if(m.language)y+=`@${m.language}`;else if(m.datatype){const v=m.datatype.value;v!=="http://www.w3.org/2001/XMLSchema#string"&&v!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&(y+=`^^${v}`)}p[_]=y}else p[_]=g.value;else p[_]=""}l.push(p)}return{type:"bindings",variables:d,rows:l,prefixes:i}}}catch(n){return{error:n instanceof Error?n.message:String(n)}}}function xvt(t){return`${t.subject}	${t.predicate}	${t.object}`}function Evt(t){const e=t.trim().toUpperCase();return e.startsWith("CONSTRUCT")||e.startsWith("DESCRIBE")}function kU(t){const e=new Set,r=[];for(const n of t){const i=xvt(n);e.has(i)||(e.add(i),r.push(n))}return r}function P1e(t,e){const r=new Map(t);for(const[n,i]of e)r.set(n,i);return r}async function Ivt(t,e,r,n){const i=t.map(l=>l.trim()).filter(l=>l.length>0&&Evt(l)),a=kU([...e]);let s=[],o=new Map(r);const c=[];do{const l=kU([...a,...s]),d=s.length;for(let f=0;f<i.length;f++){const h=i[f],p=await W3e(h,l,o);if("error"in p){c.push({ruleIndex:f,rule:h,error:p.error});continue}if(p.type!=="triples"){c.push({ruleIndex:f,rule:h,error:"Query must be CONSTRUCT or DESCRIBE"});continue}for(const _ of p.triples)s.push(_);o=P1e(o,p.prefixes)}s=kU(s),s.length;break}while(!0);const u=P1e(r,o);return{triples:s,prefixes:u,errors:c}}const N1e="ttl-vis-inference-rules";function F1e(t){const e=t.trim();return e?e.split(/\n(?=\s*(?:CONSTRUCT|DESCRIBE)\s)/i).map(n=>n.trim()).filter(n=>/^(?:CONSTRUCT|DESCRIBE)\s/i.test(n)):[]}function Ovt({isOpen:t,onClose:e,baseTriples:r,basePrefixes:n,inferredCount:i,onInferred:a,onAddToGraph:s,onAddToTtl:o,onViewInferredOnly:c}){const[u,l]=yt.useState(()=>{try{return localStorage.getItem(N1e)||""}catch{return""}}),[d,f]=yt.useState(!1),[h,p]=yt.useState(null),[_,g]=yt.useState([]),m=yt.useRef(null);yt.useEffect(()=>{t&&m.current&&m.current.focus()},[t]),yt.useEffect(()=>{try{u&&localStorage.setItem(N1e,u)}catch{}},[u]);const y=async()=>{const S=F1e(u);if(S.length===0){p("Enter at least one CONSTRUCT or DESCRIBE query.");return}if(r.length===0){p("Load and parse TTL data first.");return}f(!0),p(null),g([]);try{const P=await Ivt(S,r,n,{fixpoint:!1});g(P.errors),a({triples:P.triples,prefixes:P.prefixes,errors:P.errors})}catch(P){p(P instanceof Error?P.message:"Inference failed")}finally{f(!1)}},v=S=>{S.key==="Escape"?e():S.key==="Enter"&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),y())},A=i>0,T=F1e(u);return t?Ve.jsx("div",{className:"inference-modal-overlay",onClick:e,children:Ve.jsxs("div",{className:"inference-modal",onClick:S=>S.stopPropagation(),children:[Ve.jsxs("div",{className:"inference-modal-header",children:[Ve.jsx("h2",{className:"inference-modal-title",children:"Inference Rules"}),Ve.jsx("button",{type:"button",className:"inference-modal-close",onClick:e,"aria-label":"Close",title:"Close (Esc)",children:""})]}),Ve.jsxs("div",{className:"inference-modal-body",children:[Ve.jsx("p",{className:"inference-modal-hint",children:"Add one or more SPARQL CONSTRUCT (or DESCRIBE) queries. Each query runs over the current graph; results are merged as inferred triples."}),Ve.jsx("textarea",{ref:m,className:"inference-modal-textarea",value:u,onChange:S=>{l(S.target.value),p(null)},onKeyDown:v,placeholder:`CONSTRUCT { ?s a ?type } WHERE { ?s a ?type . }
DESCRIBE ?s WHERE { ?s ?p ?o } LIMIT 10`,spellCheck:!1,rows:14}),h&&Ve.jsxs("div",{className:"inference-modal-error",role:"alert",children:[Ve.jsx("strong",{children:"Error:"})," ",h]}),_.length>0&&Ve.jsxs("div",{className:"inference-modal-errors",role:"alert",children:[Ve.jsx("strong",{children:"Rule errors:"}),Ve.jsx("ul",{children:_.map((S,P)=>Ve.jsxs("li",{children:["Rule ",S.ruleIndex+1,": ",S.error]},P))})]}),A&&Ve.jsxs("p",{className:"inference-modal-count",children:["Inferred triples: ",Ve.jsx("strong",{children:i})]})]}),Ve.jsxs("div",{className:"inference-modal-footer",children:[Ve.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,disabled:d,children:"Close"}),Ve.jsx("button",{type:"button",className:"btn btn-primary",onClick:y,disabled:d||r.length===0||T.length===0,"aria-busy":d,children:d?"Running":"Run rules"}),A&&Ve.jsxs(Ve.Fragment,{children:[Ve.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{s(),e()},children:"Add to graph"}),Ve.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{c(),e()},children:"View inferred only"}),Ve.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{o(),e()},children:"Add to TTL"})]})]})]})}):null}const K3e=lk,{namedNode:zP,literal:zU,quad:Rvt}=K3e.DataFactory,Pvt=K3e.Writer;function Nvt(t){const e=zP(t.subject),r=zP(t.predicate);let n;return t.objectIsLiteral?t.objectLiteralLanguage?n=zU(t.objectLexicalValue??t.object,t.objectLiteralLanguage):t.objectLiteralDatatype?n=zU(t.objectLexicalValue??t.object,zP(t.objectLiteralDatatype)):n=zU(t.objectLexicalValue??t.object):n=zP(t.object),Rvt(e,r,n)}function Fvt(t,e){const r=t.map(Nvt);return new Promise((n,i)=>{const a=new Pvt({format:"Turtle",prefixes:Object.fromEntries(e)});a.addQuads(r),a.end((s,o)=>{s?i(s):n(o)})})}const M1e="ttl-vis-theme",D1e="ttl-vis-source-pane-visible",C1e="ttl-vis-active-tab";function Mvt(t){if(t&&!t.includes("://")){const r=(t.includes("/")?t.replace(/^.*\//,""):t).replace(/[^\w.\-]/g,"_");if(r&&(r.endsWith(".ttl")||r.endsWith(".turtle")))return r}return"document.ttl"}function Dvt(t,e){const r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=e,n.click(),URL.revokeObjectURL(r)}const Cvt=`@prefix foaf: <http://xmlns.com/foaf/0.1/> .

<#spiderman> a foaf:Person ;
    foaf:name "Spiderman" .
`;function Lvt(){const[t,e]=yt.useState(Cvt),[r,n]=yt.useState(null),[i,a]=yt.useState(null),[s,o]=yt.useState(""),[c,u]=yt.useState(!1),[l,d]=yt.useState(null),[f,h]=yt.useState(()=>localStorage.getItem(M1e)||"dark"),[p,_]=yt.useState(()=>{try{const ye=localStorage.getItem(D1e);return ye===null?!0:ye==="true"}catch{return!0}}),[g,m]=yt.useState(!1),[y,v]=yt.useState(null),[A,T]=yt.useState(()=>{try{return localStorage.getItem(C1e)==="query"?"query":"graph"}catch{return"graph"}}),[S,P]=yt.useState(!1),[j,F]=yt.useState([]),[N,R]=yt.useState(new Map),[C,M]=yt.useState("base");yt.useEffect(()=>{document.documentElement.setAttribute("data-theme",f),localStorage.setItem(M1e,f)},[f]),yt.useEffect(()=>{try{localStorage.setItem(D1e,String(p))}catch{}},[p]),yt.useEffect(()=>{try{localStorage.setItem(C1e,A)}catch{}},[A]);const U=yt.useCallback(async ye=>{if(!r||r.error||r.triples.length===0)throw new Error("Please load and parse TTL data first");const Me=await W3e(ye,r.triples,r.prefixes);if("error"in Me)throw new Error(Me.error);v(Me),T("query")},[r]),B=yt.useCallback(()=>{h(ye=>ye==="dark"?"light":"dark")},[]),G=yt.useCallback(()=>{n(o_(t))},[t]),K=yt.useCallback(ye=>{var ft;const Me=(ft=ye.target.files)==null?void 0:ft[0];if(!Me)return;const W=new FileReader;W.onload=le=>{var Z;const me=(Z=le.target)==null?void 0:Z.result;typeof me=="string"&&(e(me),a(Me.name),n(o_(me)))},W.readAsText(Me),ye.target.value=""},[]),$=yt.useCallback(async()=>{const ye=s.trim();if(!ye){d("Enter a URL");return}if(!ye.startsWith("http://")&&!ye.startsWith("https://")){d("URL must start with http:// or https://");return}u(!0),d(null);try{const Me=await fetch(ye);if(!Me.ok){d(Me.statusText||`HTTP ${Me.status}`);return}const W=await Me.text();e(W),a(ye.length>60?`${ye.slice(0,57)}...`:ye),n(o_(W))}catch(Me){d(Me instanceof Error?Me.message:"Failed to fetch URL")}finally{u(!1)}},[s]),se=yt.useCallback(()=>{n(o_(t))},[t]),pe=yt.useCallback(()=>{const ye=new Blob([t],{type:"text/turtle"}),Me=Mvt(i);Dvt(ye,Me)},[t,i]),we=yt.useCallback(ye=>{F(ye.triples),R(ye.prefixes),M("combined")},[]),Ce=yt.useCallback(()=>{M("combined")},[]),Le=yt.useCallback(()=>{M("inferred")},[]),Ie=yt.useCallback(async()=>{if(j.length===0)return;const ye=await Fvt(j,N),W=t.trimEnd()+`
# Inferred triples below.
`+ye;e(W),n(o_(W)),F([]),R(new Map),M("base")},[j,N,t]),Oe=yt.useMemo(()=>{if(!r||r.error)return{triples:[],prefixes:new Map};const ye=r.triples,Me=r.prefixes;if(C==="base")return{triples:ye,prefixes:Me};if(C==="inferred")return{triples:j,prefixes:N};const W=new Set,ft=(Z,q,J)=>`${Z}	${q}	${J}`,le=[];for(const Z of[...ye,...j]){const q=ft(Z.subject,Z.predicate,Z.object);W.has(q)||(W.add(q),le.push(Z))}const me=new Map(Me);for(const[Z,q]of N)me.set(Z,q);return{triples:le,prefixes:me}},[r,C,j,N]);return Ve.jsxs("div",{className:"app",children:[Ve.jsx("header",{className:"header",children:Ve.jsxs("div",{className:"header-row",children:[Ve.jsxs("div",{className:"header-brand",children:[Ve.jsx("h1",{children:"TTL Viewer"}),Ve.jsx("span",{className:"tagline",children:"View Turtle RDF triples"})]}),Ve.jsx("button",{type:"button",className:"theme-toggle",onClick:B,title:f==="dark"?"Switch to light mode":"Switch to dark mode","aria-label":f==="dark"?"Switch to light mode":"Switch to dark mode",children:f==="dark"?Ve.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("circle",{cx:"12",cy:"12",r:"5"}),Ve.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):Ve.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Ve.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})}),Ve.jsxs("section",{className:"toolbar",children:[Ve.jsxs("div",{className:"toolbar-left",children:[Ve.jsx("button",{type:"button",className:"btn btn-icon btn-secondary",onClick:()=>_(ye=>!ye),title:p?"Hide Turtle source panel":"Show Turtle source panel","aria-label":p?"Hide Turtle source panel":"Show Turtle source panel","aria-pressed":!p,children:p?Ve.jsxs("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("rect",{x:"3",y:"3",width:"7",height:"18",rx:"1"}),Ve.jsx("rect",{x:"14",y:"3",width:"7",height:"18",rx:"1"})]}):Ve.jsx("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Ve.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"1"})})}),Ve.jsxs("label",{className:"btn btn-icon btn-secondary",title:"Open .ttl file","aria-label":"Open .ttl file",children:[Ve.jsx("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Ve.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Ve.jsx("input",{type:"file",accept:".ttl,.turtle",onChange:K,hidden:!0})]}),Ve.jsx("button",{type:"button",className:"btn btn-icon btn-secondary",onClick:G,title:"Parse Turtle",children:Ve.jsx("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Ve.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})}),Ve.jsx("button",{type:"button",className:"btn btn-icon btn-secondary",onClick:pe,title:"Download as .ttl file","aria-label":"Save Turtle source as .ttl file",children:Ve.jsxs("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Ve.jsx("polyline",{points:"7 10 12 15 17 10"}),Ve.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),Ve.jsx("button",{type:"button",className:"btn btn-icon btn-secondary",onClick:()=>m(!0),title:"Run SPARQL query","aria-label":"Open SPARQL query dialog",children:Ve.jsxs("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),Ve.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),Ve.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})}),Ve.jsx("button",{type:"button",className:"btn btn-icon btn-secondary",onClick:()=>P(!0),title:"Inference rules (CONSTRUCT)","aria-label":"Open inference rules dialog",children:Ve.jsxs("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("path",{d:"M12 20h9"}),Ve.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]})})]}),Ve.jsxs("div",{className:"toolbar-url-wrap",children:[Ve.jsx("input",{type:"url",className:"url-input",value:s,onChange:ye=>{o(ye.target.value),l&&d(null)},onKeyDown:ye=>ye.key==="Enter"&&$(),placeholder:"https://example.com/file.ttl",disabled:c,"aria-label":"URL to load Turtle from"}),Ve.jsx("button",{type:"button",className:"btn btn-icon btn-secondary",onClick:$,disabled:c,"aria-busy":c,title:c?"Loading":"Load from URL","aria-label":c?"Loading":"Load Turtle from URL",children:Ve.jsxs("svg",{className:"btn-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Ve.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),Ve.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})})]}),i&&Ve.jsx("span",{className:"file-name",children:i}),l&&Ve.jsx("span",{className:"url-error",role:"alert",children:l})]}),Ve.jsxs("div",{className:`panels ${p?"":"source-hidden"}`,children:[p&&Ve.jsx("section",{className:"panel panel-source",children:Ve.jsx("textarea",{className:"source-input",value:t,onChange:ye=>e(ye.target.value),onBlur:se,spellCheck:!1,placeholder:"Paste or type Turtle content"})}),Ve.jsx("section",{className:"panel panel-graph",children:r===null?Ve.jsx("p",{className:"hint",children:"Click Parse or open a file to see the graph."}):r.error?Ve.jsxs("div",{className:"error-box",children:[Ve.jsx("strong",{children:"Parse error"}),Ve.jsx("pre",{children:r.error})]}):r.triples.length===0?Ve.jsx("p",{className:"hint",children:"No triples found."}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsxs("div",{className:"view-tabs",children:[Ve.jsx("button",{type:"button",className:`view-tab ${A==="graph"?"view-tab-active":""}`,onClick:()=>T("graph"),"aria-pressed":A==="graph",children:"Graph"}),Ve.jsx("button",{type:"button",className:`view-tab ${A==="query"?"view-tab-active":""}`,onClick:()=>T("query"),"aria-pressed":A==="query",children:"Query Results"})]}),A==="graph"&&j.length>0&&Ve.jsxs("div",{className:"graph-mode-bar",children:[Ve.jsx("span",{className:"graph-mode-label",children:"Viewing:"}),Ve.jsx("button",{type:"button",className:`graph-mode-btn ${C==="base"?"graph-mode-btn-active":""}`,onClick:()=>M("base"),"aria-pressed":C==="base",children:"Base"}),Ve.jsx("button",{type:"button",className:`graph-mode-btn ${C==="inferred"?"graph-mode-btn-active":""}`,onClick:()=>M("inferred"),"aria-pressed":C==="inferred",children:"Inferred"}),Ve.jsx("button",{type:"button",className:`graph-mode-btn ${C==="combined"?"graph-mode-btn-active":""}`,onClick:()=>M("combined"),"aria-pressed":C==="combined",children:"Combined"})]}),Ve.jsx("div",{className:"view-tab-content",children:A==="graph"?Ve.jsx(tG,{triples:Oe.triples,prefixes:Oe.prefixes}):Ve.jsx(tet,{result:y})})]})})]}),Ve.jsx(XZe,{isOpen:g,onClose:()=>m(!1),onExecute:U}),Ve.jsx(Ovt,{isOpen:S,onClose:()=>P(!1),baseTriples:(r==null?void 0:r.triples)??[],basePrefixes:(r==null?void 0:r.prefixes)??new Map,inferredCount:j.length,onInferred:we,onAddToGraph:Ce,onAddToTtl:Ie,onViewInferredOnly:Le})]})}Kwe(document.getElementById("root")).render(Ve.jsx(yt.StrictMode,{children:Ve.jsx(Lvt,{})}));
